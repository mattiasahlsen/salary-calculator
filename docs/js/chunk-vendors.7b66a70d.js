(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),a={};a[i]="z",t.exports="[object z]"===String(a)},"00fb":function(t,e,n){"use strict";e["a"]=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},"00fd":function(t,e,n){var r=n("9e69"),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;function u(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}t.exports=u},"011b":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("76c2"),i=n("a3f7"),a=n("c77c"),o=n("b9b9"),s=n("54ef"),u=n("6791"),c=n("a09b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e){let n=Object(i["a"])(t,"a","div"),s=Object(i["a"])(e,"b","div");[n,s]=Object(r["makeTypesMatch"])(n,s);const l=Object(a["a"])(n,s),f=Object(c["a"])(l),d=Object(o["a"])(s,f);return Object(u["a"])(d,f,l)}const f=Object(s["b"])({divNoNan_:l})},"0159":function(t,e,n){const r=n("bbfd"),i=(t,e,n,i)=>{"string"===typeof n&&(i=n,n=void 0);try{return new r(t,n).inc(e,i).version}catch(a){return null}};t.exports=i},"015f":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("eb7e"),i=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e){if((Object(r["isTypedArray"])(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&Object(r["isTypedArray"])(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");const n=[],a=[];return Object(i["a"])(t,n,a,e)}},"01de":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compose=e.merge=e.$=e.style=e.presets=e.keyframes=e.fontFace=e.insertGlobal=e.insertRule=e.plugins=e.styleSheet=void 0,e.speedy=g,e.simulations=A,e.simulate=j,e.cssLabels=C,e.isLikeRule=D,e.idFor=F,e.css=ot,e.rehydrate=ct,e.flush=lt,e.select=dt,e.parent=ht,e.media=pt,e.pseudo=mt,e.active=gt,e.any=bt,e.checked=yt,e.disabled=vt,e.empty=xt,e.enabled=wt,e._default=Ot,e.first=_t,e.firstChild=At,e.firstOfType=jt,e.fullscreen=kt,e.focus=Ct,e.hover=Et,e.indeterminate=St,e.inRange=Dt,e.invalid=Ft,e.lastChild=Nt,e.lastOfType=Tt,e.left=Mt,e.link=It,e.onlyChild=Rt,e.onlyOfType=$t,e.optional=Bt,e.outOfRange=zt,e.readOnly=Lt,e.readWrite=Pt,e.required=Ut,e.right=Wt,e.root=qt,e.scope=Vt,e.target=Gt,e.valid=Ht,e.visited=Xt,e.dir=Yt,e.lang=Kt,e.not=Jt,e.nthChild=Zt,e.nthLastChild=Qt,e.nthLastOfType=te,e.nthOfType=ee,e.after=ne,e.before=re,e.firstLetter=ie,e.firstLine=ae,e.selection=oe,e.backdrop=se,e.placeholder=ue,e.cssFor=ce,e.attribsFor=le;var r=n("320c"),i=d(r),a=n("483a"),o=n("9ac2"),s=n("b5db"),u=d(s),c=n("bf6d"),l=n("03c6"),f=d(l);function d(t){return t&&t.__esModule?t:{default:t}}function h(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=e.styleSheet=new a.StyleSheet;function g(t){return m.speedy(t)}m.inject();var b=e.plugins=m.plugins=new c.PluginSet([c.prefixes,c.contentWrap,c.fallbacks]);b.media=new c.PluginSet,b.fontFace=new c.PluginSet,b.keyframes=new c.PluginSet([c.prefixes,c.fallbacks]);var y=!1,v=!1,x="undefined"!==typeof window,w=y,O=!1,_=!1;function A(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];w=!!t}function j(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=(0,u.default)(e),e?w?e.reduce((function(t,e){return t["data-simulate-"+E(e)]="",t}),{}):(O||(console.warn("can't simulate without once calling simulations(true)"),O=!0),y||v||_||(console.warn("don't use simulation outside dev"),_=!0),{}):{}}var k=y;function C(t){k=!!t}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.toLowerCase().replace(/[^a-z0-9]/g,e)}function S(t){var e=JSON.stringify(t),n=(0,f.default)(e).toString(36);return t.label&&t.label.length>0&&y?E(t.label.join("."),"-")+"-"+n:n}function D(t){var e=Object.keys(t).filter((function(t){return"toString"!==t}));return 1===e.length&&!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(e[0])}function F(t){var e=Object.keys(t).filter((function(t){return"toString"!==t}));if(1!==e.length)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,r=n.exec(e[0]);if(!r)throw new Error("not a rule");return r[1]}var N=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function T(t){if(-1===t.indexOf(","))return[t];var e,n=[],r=[],i=0;while(e=N.exec(t))switch(e[0]){case"(":i++;break;case")":i--;break;case",":if(i)break;n.push(e.index)}for(e=n.length;e--;)r.unshift(t.slice(n[e]+1)),t=t.slice(0,n[e]);return r.unshift(t),r}function M(t,e){if(!t)return e.replace(/\&/g,"");if(!e)return".css-"+t+",[data-css-"+t+"]";var n=T(e).map((function(e){return e.indexOf("&")>=0?[e.replace(/\&/gm,".css-"+t),e.replace(/\&/gm,"[data-css-"+t+"]")].join(","):".css-"+t+e+",[data-css-"+t+"]"+e})).join(",");return w&&/^\&\:/.exec(e)&&!/\s/.exec(e)&&(n+=",.css-"+t+"[data-simulate-"+E(e)+"],[data-css-"+t+"][data-simulate-"+E(e)+"]"),n}function I(t){var e=t.selector,n=t.style,r=b.transform({selector:e,style:n});return r.selector+"{"+(0,o.createMarkupForStyles)(r.style)+"}"}function R(t){var e=void 0,n=void 0,r=void 0,i=void 0;return Object.keys(t).forEach((function(a){a.indexOf("&")>=0?(n=n||{},n[a]=t[a]):0===a.indexOf("@media")?(r=r||{},r[a]=R(t[a])):0===a.indexOf("@supports")?(i=i||{},i[a]=R(t[a])):"label"===a?t.label.length>0&&(e=e||{},e.label=k?t.label.join("."):""):(e=e||{},e[a]=t[a])})),{plain:e,selects:n,medias:r,supports:i}}function $(t,e){var n=[],r=e.plain,i=e.selects,a=e.medias,o=e.supports;return r&&n.push(I({style:r,selector:M(t)})),i&&Object.keys(i).forEach((function(e){return n.push(I({style:i[e],selector:M(t,e)}))})),a&&Object.keys(a).forEach((function(e){return n.push(e+"{"+$(t,a[e]).join("")+"}")})),o&&Object.keys(o).forEach((function(e){return n.push(e+"{"+$(t,o[e]).join("")+"}")})),n}var B=m.inserted={};function z(t){if(!B[t.id]){B[t.id]=!0;var e=R(t.style),n=$(t.id,e);B[t.id]=!!x||n,n.forEach((function(t){return m.insert(t)}))}}var L=m.registered={};function P(t){L[t.id]||(L[t.id]=t)}function U(t){if(D(t)){var e=L[F(t)];if(null==e)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return e}return t}var W={};function q(t){if(P(t),z(t),W[t.id])return W[t.id];var e=p({},"data-css-"+t.id,k&&t.label||"");return Object.defineProperty(e,"toString",{enumerable:!1,value:function(){return"css-"+t.id}}),W[t.id]=e,e}function V(t){for(var e=[":",".","[",">"," "],n=!1,r=t.charAt(0),i=0;i<e.length;i++)if(r===e[i]){n=!0;break}return n||t.indexOf("&")>=0}function G(t,e){var n=T(t).map((function(t){return t.indexOf("&")>=0?t:"&"+t})),r=T(e).map((function(t){return t.indexOf("&")>=0?t:"&"+t}));return r.reduce((function(t,e){return t.concat(n.map((function(t){return e.replace(/\&/g,t)})))}),[]).join(",")}function H(t,e){return t?"@media "+t.substring(6)+" and "+e.substring(6):e}function X(t){return 0===t.indexOf("@media")}function Y(t){return 0===t.indexOf("@supports")}function K(t,e){return t?"@supports "+t.substring(9)+" and "+e.substring(9):e}function J(t){for(var e=[],n=0;n<t.length;n++)e=Array.isArray(t[n])?e.concat(J(t[n])):e.concat(t[n]);return e}var Z={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function Q(t,e){var n=e.selector,r=void 0===n?"":n,i=e.mq,a=void 0===i?"":i,o=e.supp,s=void 0===o?"":o,c=e.src,l=void 0===c?{}:c;Array.isArray(l)||(l=[l]),l=J(l),l.forEach((function(e){if(D(e)){var n=U(e);if("css"!==n.type)throw new Error("cannot merge this rule");e=n.style}e=(0,u.default)(e),e&&e.composes&&Q(t,{selector:r,mq:a,supp:s,src:e.composes}),Object.keys(e||{}).forEach((function(n){if(V(n))Z[n]&&Z[n].forEach((function(i){return Q(t,{selector:G(r,i),mq:a,supp:s,src:e[n]})})),Q(t,{selector:G(r,n),mq:a,supp:s,src:e[n]});else if(X(n))Q(t,{selector:r,mq:H(a,n),supp:s,src:e[n]});else if(Y(n))Q(t,{selector:r,mq:a,supp:K(s,n),src:e[n]});else if("composes"===n);else{var i=t;s&&(i[s]=i[s]||{},i=i[s]),a&&(i[a]=i[a]||{},i=i[a]),r&&(i[r]=i[r]||{},i=i[r]),"label"===n?k&&(t.label=t.label.concat(e.label)):i[n]=e[n]}}))}))}function tt(t){var e={label:[]};Q(e,{src:t});var n={id:S(e),style:e,label:k?e.label.join("."):"",type:"css"};return q(n)}var et={};Object.defineProperty(et,"toString",{enumerable:!1,value:function(){return"css-nil"}});var nt="undefined"!==typeof WeakMap?[et,new WeakMap,new WeakMap,new WeakMap]:[et],rt=!1;function it(t){return function(e){if(nt[e.length]){var n=nt[e.length],r=0;while(r<e.length-1)n.has(e[r])||n.set(e[r],new WeakMap),n=n.get(e[r]),r++;if(n.has(e[e.length-1])){var i=n.get(e[r]);if(L[i.toString().substring(4)])return i}}var a=t(e);if(nt[e.length]){var o=0,s=nt[e.length];while(o<e.length-1)s=s.get(e[o]),o++;try{s.set(e[o],a)}catch(c){var u;if(y&&!rt)rt=!0,(u=console).warn.apply(u,["failed setting the WeakMap cache for args:"].concat(h(e))),console.warn("this should NOT happen, please file a bug on the github repo.")}}return a}}var at="undefined"!==typeof WeakMap?it(tt):tt;function ot(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e[0]&&e[0].length&&e[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return e=(0,u.default)(e),e?at(e):et}ot.insert=function(t){var e={id:S(t),css:t,type:"raw"};P(e),B[e.id]||(m.insert(e.css),B[e.id]=!!x||[e.css])};e.insertRule=ot.insert;ot.global=function(t,e){if(e=(0,u.default)(e),e)return ot.insert(I({selector:t,style:e}))};e.insertGlobal=ot.global;function st(t){if(!B[t.id]){var e=Object.keys(t.keyframes).map((function(e){var n=b.keyframes.transform({id:t.id,name:e,style:t.keyframes[e]});return n.name+"{"+(0,o.createMarkupForStyles)(n.style)+"}"})).join(""),n=["-webkit-","-moz-","-o-",""].map((function(n){return"@"+n+"keyframes "+t.name+"_"+t.id+"{"+e+"}"}));n.forEach((function(t){return m.insert(t)})),B[t.id]=!!x||n}}ot.keyframes=function(t,e){e||(e=t,t="animation"),e=(0,u.default)(e)||{};var n={id:S({name:t,kfs:e}),type:"keyframes",name:t,keyframes:e};return P(n),st(n),t+"_"+n.id},ot.fontFace=function(t){t=(0,u.default)(t);var e={id:S(t),type:"font-face",font:t};return P(e),ut(e),t.fontFamily};e.fontFace=ot.fontFace,e.keyframes=ot.keyframes;function ut(t){if(!B[t.id]){var e="@font-face{"+(0,o.createMarkupForStyles)(t.font)+"}";m.insert(e),B[t.id]=!!x||[e]}}function ct(t){(0,i.default)(B,t.reduce((function(t,e){return t[e]=!0,t}),{}))}function lt(){B=m.inserted={},L=m.registered={},W={},m.flush(),m.inject()}e.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var ft=e.style=ot;function dt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t?ot(p({},t,n)):ft(n)}e.$=dt;function ht(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ot(p({},t+" &",n))}e.merge=ot,e.compose=ot;function pt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ot(p({},"@media "+t,n))}function mt(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ot(p({},t,n))}function gt(t){return mt(":active",t)}function bt(t){return mt(":any",t)}function yt(t){return mt(":checked",t)}function vt(t){return mt(":disabled",t)}function xt(t){return mt(":empty",t)}function wt(t){return mt(":enabled",t)}function Ot(t){return mt(":default",t)}function _t(t){return mt(":first",t)}function At(t){return mt(":first-child",t)}function jt(t){return mt(":first-of-type",t)}function kt(t){return mt(":fullscreen",t)}function Ct(t){return mt(":focus",t)}function Et(t){return mt(":hover",t)}function St(t){return mt(":indeterminate",t)}function Dt(t){return mt(":in-range",t)}function Ft(t){return mt(":invalid",t)}function Nt(t){return mt(":last-child",t)}function Tt(t){return mt(":last-of-type",t)}function Mt(t){return mt(":left",t)}function It(t){return mt(":link",t)}function Rt(t){return mt(":only-child",t)}function $t(t){return mt(":only-of-type",t)}function Bt(t){return mt(":optional",t)}function zt(t){return mt(":out-of-range",t)}function Lt(t){return mt(":read-only",t)}function Pt(t){return mt(":read-write",t)}function Ut(t){return mt(":required",t)}function Wt(t){return mt(":right",t)}function qt(t){return mt(":root",t)}function Vt(t){return mt(":scope",t)}function Gt(t){return mt(":target",t)}function Ht(t){return mt(":valid",t)}function Xt(t){return mt(":visited",t)}function Yt(t,e){return mt(":dir("+t+")",e)}function Kt(t,e){return mt(":lang("+t+")",e)}function Jt(t,e){var n=t.split(",").map((function(t){return t.trim()})).map((function(t){return":not("+t+")"}));return 1===n.length?mt(":not("+t+")",e):dt(n.join(""),e)}function Zt(t,e){return mt(":nth-child("+t+")",e)}function Qt(t,e){return mt(":nth-last-child("+t+")",e)}function te(t,e){return mt(":nth-last-of-type("+t+")",e)}function ee(t,e){return mt(":nth-of-type("+t+")",e)}function ne(t){return mt("::after",t)}function re(t){return mt("::before",t)}function ie(t){return mt("::first-letter",t)}function ae(t){return mt("::first-line",t)}function oe(t){return mt("::selection",t)}function se(t){return mt("::backdrop",t)}function ue(t){return ot({"::placeholder":t})}function ce(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=(0,u.default)(e),e?e.map((function(t){var e={label:[]};return Q(e,{src:t}),$(S(e),R(e)).join("")})).join(""):""}function le(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e=(0,u.default)(e);var r=e?e.map((function(t){F(t);var e=Object.keys(t)[0],n=t[e];return e+'="'+(n||"")+'"'})).join(" "):"";return r}},"0280":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("043e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e){const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(r);const i=Object(r["a"])(t,"int32"),a=Object(r["a"])([n.length,t.length],"int32");for(let r=0;r<n.length;r++){const e=i.indexToLoc(n[r]),o=r*t.length;a.values.set(e,o)}return a.toTensor()}},"0366":function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"03c6":function(t,e,n){"use strict";function r(t,e){var n=1540483477,r=24,s=e^t.length,u=t.length,c=0;while(u>=4){var l=i(t,c);l=o(l,n),l^=l>>>r,l=o(l,n),s=o(s,n),s^=l,c+=4,u-=4}switch(u){case 3:s^=a(t,c),s^=t.charCodeAt(c+2)<<16,s=o(s,n);break;case 2:s^=a(t,c),s=o(s,n);break;case 1:s^=t.charCodeAt(c),s=o(s,n);break}return s^=s>>>13,s=o(s,n),s^=s>>>15,s>>>0}function i(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)+(t.charCodeAt(e++)<<16)+(t.charCodeAt(e)<<24)}function a(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)}function o(t,e){t|=0,e|=0;var n=65535&t,r=t>>>16,i=n*e+((r*e&65535)<<16)|0;return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"043e":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("34d7"),i=n("eb7e");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e="float32",n){return e=e||"float32",i["assertNonNegativeIntegerDimensions"](t),new r["b"](t,e,n)}},"04b8":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):i(r(t))}},"05bb":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("a3f7"),i=n("eb7e"),a=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e,n){if(Object(i["assertNonNull"])(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");const o=Object(r["c"])(t,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object(a["a"])(t,e,o,n)}},"06cf":function(t,e,n){var r=n("83ab"),i=n("d1e7"),a=n("5c6c"),o=n("fc6a"),s=n("c04ea"),u=n("5135"),c=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=o(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return a(!i.f.call(t,e),t[e])}},"0777":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"real","complex"),s=Object(a["a"])(e,"imag","complex");o["assertShapesMatch"](n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const u=t=>t.complex(n,s),c={real:n,imag:s};return r["a"].runKernelFunc(u,c,null,i["y"])}const c=Object(s["b"])({complex_:u})},"07ac":function(t,e,n){var r=n("23e7"),i=n("6f53").values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},"07d6":function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},"0846":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n("7ad3")),o=n("1309"),s=n("6180"),u=n("8e47");function c(t,e,n={}){return r(this,void 0,void 0,(function*(){let r=e.values;const i=null==e.series?[]:e.series;r=Array.isArray(r[0])?r:[r];const c=[];r.forEach((t,e)=>{const n=null!=i[e]?i[e]:"Series "+(e+1),r=t.map(t=>Object.assign({},t,{series:n}));c.push(...r)}),null!=n.seriesColors&&s.assert(n.seriesColors.length===r.length,"Must have an equal number of series colors as there are data series");const f=u.getDrawArea(t),d=Object.assign({},l,n),h={actions:!1,mode:"vega-lite",defaultStyle:!1},p=()=>d.zoomToFit?{zero:!1}:null!=d.xAxisDomain?{domain:d.xAxisDomain}:void 0,m=()=>d.zoomToFit?{zero:!1}:null!=d.yAxisDomain?{domain:d.yAxisDomain}:void 0,g={width:d.width||o.getDefaultWidth(f),height:d.height||o.getDefaultHeight(f),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:d.fontSize,titleFontSize:d.fontSize},text:{fontSize:d.fontSize},legend:{labelFontSize:d.fontSize,titleFontSize:d.fontSize}},data:{values:c},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:d.xType,title:d.xLabel,scale:p()},y:{field:"y",type:d.yType,title:d.yLabel,scale:m()},color:{field:"series",type:"nominal",scale:{range:d.seriesColors}},shape:{field:"series",type:"nominal"}}};return yield a.default(f,g,h),Promise.resolve()}))}e.scatterplot=c;const l={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},"08a9":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","round"),n={x:e};return r["a"].runKernelFunc(t=>t.round(e),n,null,i["nc"])}const u=Object(o["b"])({round_:s})},"0982":function(t,e,n){const r=n("3fce"),i=(t,e)=>{try{return new r(t,e).range||"*"}catch(n){return null}};t.exports=i},"09b8":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(t){if(!(e=r.exec(t)))throw new Error("invalid format: "+t);var e;return new a({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function a(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}i.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},"09f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("526f"),u=n("deb3"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e){let n=Object(o["a"])(t,"a","maximum"),c=Object(o["a"])(e,"b","maximum");[n,c]=Object(a["makeTypesMatch"])(n,c),"bool"===n.dtype&&(n=Object(u["a"])(n,"int32"),c=Object(u["a"])(c,"int32")),Object(s["a"])(n.shape,c.shape);const l=(t,e)=>{const r=t.maximum(n,c);return e([n,c]),r},f={a:n,b:c};return r["a"].runKernelFunc(l,f,null,i["Jb"])}const f=Object(c["b"])({maximum_:l})},"0a67":function(t,e,n){const r=n("bbfd"),i=n("a236"),{re:a,t:o}=n("8cb5"),s=(t,e)=>{if(t instanceof r)return t;if("number"===typeof t&&(t=String(t)),"string"!==typeof t)return null;e=e||{};let n=null;if(e.rtl){let e;while((e=a[o.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length))n&&e.index+e[0].length===n.index+n[0].length||(n=e),a[o.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;a[o.COERCERTL].lastIndex=-1}else n=t.match(a[o.COERCE]);return null===n?null:i(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};t.exports=s},"0cc2":function(t,e,n){},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),a=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},"0db5":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("0777"),s=n("24b0"),u=n("54ef"),c=n("d7b0"),l=n("a09b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t){const e=Object(a["a"])(t,"x","onesLike"),n=(t,n)=>{if("complex64"===e.dtype){const t=d(Object(c["a"])(e)),n=Object(l["a"])(Object(s["a"])(e));return Object(o["a"])(t,n)}return t.onesLike(e)},u={x:e};return r["a"].runKernelFunc(n,u,null,i["Vb"])}const d=Object(u["b"])({onesLike_:f})},"0eb5":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e,n=0){const o=Object(a["a"])(t,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s=(t,r)=>(r([o]),t.pad(o,e,n)),u={paddings:e,constantValue:n},c={x:o};return r["a"].runKernelFunc(s,c,null,i["Wb"],u)}const u=Object(o["b"])({pad_:s})},"0f6f":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("eb7e"),o=n("b818"),s=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n,s,c,l="NHWC",f){let d=t;3===t.rank&&(d=Object(u["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let h=e;3===h.rank&&(h=Object(u["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]])),a["assert"](4===d.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+d.shape+"."),a["assert"](4===h.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+h.shape+"."),a["assert"](4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+".");const p="NHWC"===l?d.shape[3]:d.shape[1],m="NHWC"===l?h.shape[3]:h.shape[1];a["assert"](p===n[2],()=>`Error in conv2dDerFilter: depth of input ${p}) must match input depth in filter (${n[2]}.`),a["assert"](m===n[3],()=>`Error in conv2dDerFilter: depth of dy (${m}) must match output depth for filter (${n[3]}).`),null!=f&&a["assert"](a["isInt"](c),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${f} but got pad ${c}.`);const g=t=>{const e=1,r=o["g"](l),i=o["a"](d.shape,n,s,e,c,f,!1,r);return t.conv2dDerFilter(d,h,i)},b={x:d,dy:h},y={strides:s,pad:c,dataFormat:l,dimRoundingMode:f};return r["a"].runKernelFunc(g,b,null,i["B"],y)}const l=Object(s["b"])({conv2DBackpropFilter_:c})},"0f86":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n=!1){const s=Object(a["a"])(t,"images","resizeNearestNeighbor");o["assert"](3===s.rank||4===s.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),o["assert"](2===e.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."),o["assert"]("float32"===s.dtype||"int32"===s.dtype,()=>"`images` must have `int32` or `float32` as dtype");let c=s,l=!1;3===s.rank&&(l=!0,c=Object(u["a"])(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[f,d]=e,h={images:c},p={alignCorners:n,size:e},m=(t,e)=>(e([c]),t.resizeNearestNeighbor(c,f,d,n)),g=r["a"].runKernelFunc(m,h,null,i["jc"],p);return l?Object(u["a"])(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const l=Object(s["b"])({resizeNearestNeighbor_:c})},"113e":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},"116b":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("a3f7"),i=n("eb7e"),a=n("dd7e"),o=n("838f"),s=n("54ef"),u=n("35c9");function c(t,e,n,s,c,l=[1,1],f="NHWC"){const d=Object(r["a"])(t,"x","separableConv2d"),h=Object(r["a"])(e,"depthwiseFilter","separableConv2d"),p=Object(r["a"])(n,"pointwiseFilter","separableConv2d");let m=d,g=!1;if(3===d.rank&&(g=!0,m=Object(u["a"])(d,[1,d.shape[0],d.shape[1],d.shape[2]])),"NCHW"===f)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");i["assert"](4===m.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${m.rank}.`),i["assert"](4===h.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${h.rank}.`),i["assert"](4===p.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${h.rank}.`),i["assert"](1===p.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${p.shape[0]}.`),i["assert"](1===p.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${p.shape[1]}.`);const b=h.shape[2],y=h.shape[3];i["assert"](p.shape[2]===b*y,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${b*y}, but got ${p.shape[2]}.`);const v=Object(o["a"])(m,h,s,c,f,l),x=1,w=Object(a["a"])(v,p,x,"valid",f);return g?Object(u["a"])(w,[w.shape[1],w.shape[2],w.shape[3]]):w}const l=Object(s["b"])({separableConv2d_:c})},1212:function(t,e,n){(function(t){var r;(function(t,i,a){function o(t){var e=this,n=c();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new o(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}function c(){var t=4022871197,e=function(e){e=e.toString();for(var n=0;n<e.length;n++){t+=e.charCodeAt(n);var r=.02519603282416938*t;t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=4294967296*r}return 2.3283064365386963e-10*(t>>>0)};return e}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.alea=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},"122e":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n("538e"),i=n("a3f7"),a=n("eb7e"),o=n("36e5"),s=n("deb3"),u=n("c77c"),c=n("a5aa"),l=n("c22a"),f=n("54ef"),d=n("35c9"),h=n("015f"),p=n("e053");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function m(t,e=null,n=!1){const f=Object(i["a"])(t,"x","mean"),m=Object(a["parseAxisParam"])(e,f.shape),g=Object(o["d"])(f.shape,m),b=g[1],y=Object(a["sizeFromShape"])(b),v=Object(r["a"])(t=>{const r=Object(h["a"])(y),i=r.dtype===t.dtype?t:Object(s["a"])(t,r.dtype),a=Object(u["a"])(i,r),o=Object(p["a"])(a,e,n),f=e=>{const n=t.shape.slice();m.forEach(t=>{n[t]=1});const r=Object(d["a"])(e,n),i=Object(u["a"])(Object(c["a"])(r,Object(l["a"])(t.shape,"float32")),y);return i};return{value:o,gradFunc:f}});return v(f)}const g=Object(f["b"])({mean_:m})},1231:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r,i,a,o=n("b170");function s(t){return r=Object(o["a"])(t),i=r.format,a=r.formatPrefix,r}s({thousands:",",grouping:[3],currency:["$",""]})},"126d":function(t,e,n){var r=n("6da8"),i=n("aaec"),a=n("d094");function o(t){return i(t)?a(t):r(t)}t.exports=o},1309:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("01de"),i=n("8e47"),a={prepend:!1};function o(t,e,n={}){const o=i.getDrawArea(t),s=r.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),u=r.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),c=Object.assign({},a,n);let l=o.querySelector(`div[data-name=${e}]`);if(!l){if(l=document.createElement("div"),l.setAttribute("class",""+s),l.dataset.name=e,c.title){const t=document.createElement("div");t.setAttribute("class","subsurface-title "+u),t.innerText=c.title,l.appendChild(t)}c.prepend?o.insertBefore(l,o.firstChild):o.appendChild(l)}return l}function s(t){const e=50;let n=0,r=t;while(r&&0===r.clientWidth)r=r.parentElement,n=e;return r.clientWidth-n}function u(t){return 0===t.clientHeight?200:t.clientHeight}e.subSurface=o,e.getDefaultWidth=s,e.getDefaultHeight=u},1310:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},"132b":function(t,e,n){"use strict";n.d(e,"b",(function(){return i["a"]})),n.d(e,"c",(function(){return a["a"]})),n.d(e,"d",(function(){return o["a"]})),n.d(e,"e",(function(){return s["a"]})),n.d(e,"f",(function(){return u["a"]})),n.d(e,"h",(function(){return c["a"]})),n.d(e,"i",(function(){return l["a"]})),n.d(e,"j",(function(){return f["a"]})),n.d(e,"k",(function(){return d["a"]})),n.d(e,"l",(function(){return h["a"]})),n.d(e,"m",(function(){return p["a"]})),n.d(e,"n",(function(){return m["a"]})),n.d(e,"o",(function(){return g["a"]})),n.d(e,"p",(function(){return b["a"]})),n.d(e,"q",(function(){return y["a"]})),n.d(e,"r",(function(){return v["a"]})),n.d(e,"s",(function(){return S})),n.d(e,"x",(function(){return D["a"]})),n.d(e,"t",(function(){return F["a"]})),n.d(e,"u",(function(){return M})),n.d(e,"v",(function(){return R})),n.d(e,"w",(function(){return B})),n.d(e,"z",(function(){return z["a"]})),n.d(e,"A",(function(){return L["a"]})),n.d(e,"B",(function(){return P["a"]})),n.d(e,"C",(function(){return U["a"]})),n.d(e,"D",(function(){return W["a"]})),n.d(e,"E",(function(){return q["a"]})),n.d(e,"F",(function(){return V["a"]})),n.d(e,"G",(function(){return w["a"]})),n.d(e,"H",(function(){return H})),n.d(e,"I",(function(){return Y})),n.d(e,"J",(function(){return J})),n.d(e,"K",(function(){return Q})),n.d(e,"L",(function(){return tt["a"]})),n.d(e,"M",(function(){return et["a"]})),n.d(e,"N",(function(){return nt["a"]})),n.d(e,"O",(function(){return rt["a"]})),n.d(e,"P",(function(){return ot})),n.d(e,"Q",(function(){return st["a"]})),n.d(e,"R",(function(){return ut["a"]})),n.d(e,"T",(function(){return ct["a"]})),n.d(e,"U",(function(){return lt["a"]})),n.d(e,"V",(function(){return ft["a"]})),n.d(e,"W",(function(){return gt})),n.d(e,"X",(function(){return bt["a"]})),n.d(e,"Y",(function(){return yt["a"]})),n.d(e,"Z",(function(){return vt["a"]})),n.d(e,"bb",(function(){return xt["a"]})),n.d(e,"db",(function(){return wt["a"]})),n.d(e,"fb",(function(){return Ot["a"]})),n.d(e,"hb",(function(){return _t["a"]})),n.d(e,"ib",(function(){return At["a"]})),n.d(e,"jb",(function(){return jt["a"]})),n.d(e,"kb",(function(){return kt["a"]})),n.d(e,"lb",(function(){return St})),n.d(e,"nb",(function(){return Dt["a"]})),n.d(e,"ob",(function(){return Ft["a"]})),n.d(e,"pb",(function(){return Nt["a"]})),n.d(e,"rb",(function(){return Tt["a"]})),n.d(e,"tb",(function(){return Mt["a"]})),n.d(e,"ub",(function(){return It["a"]})),n.d(e,"yb",(function(){return Rt["a"]})),n.d(e,"Cb",(function(){return $t["a"]})),n.d(e,"Db",(function(){return Bt["a"]})),n.d(e,"Eb",(function(){return zt["a"]})),n.d(e,"Fb",(function(){return Lt["a"]})),n.d(e,"Gb",(function(){return Pt["a"]})),n.d(e,"Hb",(function(){return Ut["a"]})),n.d(e,"Lb",(function(){return Wt["a"]})),n.d(e,"Mb",(function(){return qt["a"]})),n.d(e,"Nb",(function(){return Vt["a"]})),n.d(e,"Ob",(function(){return Gt["a"]})),n.d(e,"Pb",(function(){return Ht["a"]})),n.d(e,"Qb",(function(){return Xt["a"]})),n.d(e,"Rb",(function(){return Yt["a"]})),n.d(e,"Sb",(function(){return Kt["a"]})),n.d(e,"Tb",(function(){return Jt["a"]})),n.d(e,"Ub",(function(){return Zt["a"]})),n.d(e,"Vb",(function(){return Qt["a"]})),n.d(e,"Xb",(function(){return O["a"]})),n.d(e,"Yb",(function(){return te["a"]})),n.d(e,"Zb",(function(){return ee["a"]})),n.d(e,"ac",(function(){return ne["a"]})),n.d(e,"bc",(function(){return re["a"]})),n.d(e,"cc",(function(){return ie["a"]})),n.d(e,"ec",(function(){return ae["a"]})),n.d(e,"fc",(function(){return oe["a"]})),n.d(e,"gc",(function(){return se["a"]})),n.d(e,"ic",(function(){return ue["a"]})),n.d(e,"kc",(function(){return he})),n.d(e,"mc",(function(){return _["a"]})),n.d(e,"oc",(function(){return me})),n.d(e,"pc",(function(){return ge["a"]})),n.d(e,"qc",(function(){return be["a"]})),n.d(e,"sc",(function(){return ye["a"]})),n.d(e,"uc",(function(){return ve["a"]})),n.d(e,"vc",(function(){return xe["a"]})),n.d(e,"wc",(function(){return we["a"]})),n.d(e,"yc",(function(){return _e})),n.d(e,"zc",(function(){return Ae["a"]})),n.d(e,"Ac",(function(){return ke})),n.d(e,"Bc",(function(){return Ee})),n.d(e,"Cc",(function(){return De})),n.d(e,"Dc",(function(){return Ne})),n.d(e,"Ec",(function(){return Te["a"]})),n.d(e,"Fc",(function(){return Me["a"]})),n.d(e,"Hc",(function(){return Ie["a"]})),n.d(e,"Ic",(function(){return Re["a"]})),n.d(e,"Jc",(function(){return $e["a"]})),n.d(e,"Kc",(function(){return ze})),n.d(e,"Lc",(function(){return Ue})),n.d(e,"Mc",(function(){return qe})),n.d(e,"Nc",(function(){return Ve["a"]})),n.d(e,"Oc",(function(){return Ge["a"]})),n.d(e,"Pc",(function(){return He["a"]})),n.d(e,"Qc",(function(){return Xe["a"]})),n.d(e,"Rc",(function(){return Ye["a"]})),n.d(e,"Sc",(function(){return Ke["a"]})),n.d(e,"Tc",(function(){return pt["a"]})),n.d(e,"Uc",(function(){return Je["a"]})),n.d(e,"Vc",(function(){return Qe})),n.d(e,"Wc",(function(){return en})),n.d(e,"Xc",(function(){return rn})),n.d(e,"Yc",(function(){return on})),n.d(e,"ad",(function(){return sn["a"]})),n.d(e,"bd",(function(){return un["a"]})),n.d(e,"cd",(function(){return cn["a"]})),n.d(e,"ed",(function(){return ln["a"]})),n.d(e,"fd",(function(){return fn["a"]})),n.d(e,"gd",(function(){return dn["a"]})),n.d(e,"hd",(function(){return j["a"]})),n.d(e,"id",(function(){return hn["a"]})),n.d(e,"kd",(function(){return pn["a"]})),n.d(e,"ld",(function(){return mn["a"]})),n.d(e,"md",(function(){return k["a"]})),n.d(e,"nd",(function(){return bn})),n.d(e,"od",(function(){return vn})),n.d(e,"pd",(function(){return wn})),n.d(e,"qd",(function(){return _n})),n.d(e,"rd",(function(){return An["a"]})),n.d(e,"sd",(function(){return jn["a"]})),n.d(e,"td",(function(){return kn["a"]})),n.d(e,"mb",(function(){return Cn["a"]})),n.d(e,"xb",(function(){return En["a"]})),n.d(e,"Bb",(function(){return Sn["a"]})),n.d(e,"Zc",(function(){return Dn["a"]})),n.d(e,"wd",(function(){return Fn["a"]})),n.d(e,"xd",(function(){return Nn["a"]})),n.d(e,"yd",(function(){return le["a"]})),n.d(e,"zd",(function(){return Tn["a"]})),n.d(e,"Bd",(function(){return Mn["a"]})),n.d(e,"Cd",(function(){return In["a"]})),n.d(e,"Dd",(function(){return Rn["a"]})),n.d(e,"Ed",(function(){return $n["a"]})),n.d(e,"Fd",(function(){return fe["a"]})),n.d(e,"Hd",(function(){return Bn["a"]})),n.d(e,"Id",(function(){return zn["a"]})),n.d(e,"Jd",(function(){return C["a"]})),n.d(e,"Kd",(function(){return Ln["a"]})),n.d(e,"Ld",(function(){return Pn["a"]})),n.d(e,"Md",(function(){return Wn})),n.d(e,"Nd",(function(){return qn["a"]})),n.d(e,"Od",(function(){return Vn})),n.d(e,"Pd",(function(){return Gn})),n.d(e,"Qd",(function(){return Hn})),n.d(e,"Rd",(function(){return Ct["a"]})),n.d(e,"Sd",(function(){return Xn["a"]})),n.d(e,"Ud",(function(){return Yn["a"]})),n.d(e,"Vd",(function(){return Kn["a"]})),n.d(e,"Wd",(function(){return Jn["a"]})),n.d(e,"Xd",(function(){return Zn["a"]})),n.d(e,"Yd",(function(){return Qn})),n.d(e,"Zd",(function(){return tr["a"]})),n.d(e,"ae",(function(){return er["a"]})),n.d(e,"be",(function(){return nr["a"]})),n.d(e,"ce",(function(){return rr["a"]})),n.d(e,"y",(function(){return ar})),n.d(e,"gb",(function(){return or["a"]})),n.d(e,"vb",(function(){return or["b"]})),n.d(e,"wb",(function(){return or["c"]})),n.d(e,"Ib",(function(){return or["d"]})),n.d(e,"Jb",(function(){return or["e"]})),n.d(e,"tc",(function(){return or["f"]})),n.d(e,"g",(function(){return sr["a"]})),n.d(e,"ab",(function(){return sr["b"]})),n.d(e,"dc",(function(){return sr["c"]})),n.d(e,"hc",(function(){return sr["d"]})),n.d(e,"jc",(function(){return sr["e"]})),n.d(e,"nc",(function(){return sr["f"]})),n.d(e,"Gc",(function(){return sr["g"]})),n.d(e,"Ad",(function(){return sr["h"]})),n.d(e,"Gd",(function(){return sr["i"]})),n.d(e,"Td",(function(){return ur["a"]})),n.d(e,"rc",(function(){return cr["a"]})),n.d(e,"lc",(function(){return dr})),n.d(e,"dd",(function(){return hr["a"]})),n.d(e,"ud",(function(){return pr["a"]})),n.d(e,"sb",(function(){return mr["a"]})),n.d(e,"cb",(function(){return vr})),n.d(e,"eb",(function(){return xr})),n.d(e,"S",(function(){return wr})),n.d(e,"Ab",(function(){return _r})),n.d(e,"xc",(function(){return A["b"]})),n.d(e,"a",(function(){return A["a"]})),n.d(e,"zb",(function(){return Vi})),n.d(e,"Kb",(function(){return Gi})),n.d(e,"Wb",(function(){return Hi})),n.d(e,"vd",(function(){return Wi})),n.d(e,"qb",(function(){return r})),n.d(e,"jd",(function(){return qi}));var r={};n.r(r),n.d(r,"conv2d",(function(){return Fr})),n.d(r,"depthwiseConv2d",(function(){return Ir})),n.d(r,"matMul",(function(){return $r}));var i=n("8ae0"),a=n("a374"),o=n("4615"),s=n("9117"),u=n("4850"),c=n("df81"),l=n("4516"),f=n("e89f"),d=n("db49"),h=n("220f"),p=n("dc59"),m=n("7e36"),g=n("6002"),b=n("d1a8"),y=n("9748"),v=n("ba53"),x=n("a3f7"),w=n("649e"),O=n("487b"),_=n("a5aa"),A=n("54ef"),j=n("ffb3"),k=n("6d3c"),C=n("8888");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function E(t,e,n,r,i,a){const o=Object(x["a"])(t,"forgetBias","basicLSTMCell"),u=Object(x["a"])(e,"lstmKernel","basicLSTMCell"),c=Object(x["a"])(n,"lstmBias","basicLSTMCell"),l=Object(x["a"])(r,"data","basicLSTMCell"),f=Object(x["a"])(i,"c","basicLSTMCell"),d=Object(x["a"])(a,"h","basicLSTMCell"),h=Object(w["a"])([l,d],1),p=Object(O["a"])(h,u),m=Object(s["a"])(p,c),g=m.shape[0],b=m.shape[1]/4,y=[g,b],v=Object(k["a"])(m,[0,0],y),A=Object(k["a"])(m,[0,b],y),E=Object(k["a"])(m,[0,2*b],y),S=Object(k["a"])(m,[0,3*b],y),D=Object(s["a"])(Object(_["a"])(Object(j["a"])(v),Object(C["a"])(A)),Object(_["a"])(f,Object(j["a"])(Object(s["a"])(o,E)))),F=Object(_["a"])(Object(C["a"])(D),Object(j["a"])(S));return[D,F]}const S=Object(A["b"])({basicLSTMCell_:E});var D=n("3b28"),F=n("71db"),N=n("eb7e");function T(t,e,n,r,i,a){const o=Object(x["a"])(t,"x","batchNorm"),s=Object(x["a"])(e,"mean","batchNorm"),u=Object(x["a"])(n,"variance","batchNorm");let c,l;return null!=i&&(c=Object(x["a"])(i,"scale","batchNorm")),null!=r&&(l=Object(x["a"])(r,"offset","batchNorm")),N["assert"](2===o.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+o.rank+"."),N["assert"](2===s.rank||1===s.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),N["assert"](2===u.rank||1===u.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),null!=c&&N["assert"](2===c.rank||1===c.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),null!=l&&N["assert"](2===l.rank||1===l.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${l.rank}.`),Object(F["a"])(o,s,u,l,c,a)}const M=Object(A["b"])({batchNorm2d_:T});function I(t,e,n,r,i,a){const o=Object(x["a"])(t,"x","batchNorm"),s=Object(x["a"])(e,"mean","batchNorm"),u=Object(x["a"])(n,"variance","batchNorm");let c,l;return null!=i&&(c=Object(x["a"])(i,"scale","batchNorm")),null!=r&&(l=Object(x["a"])(r,"offset","batchNorm")),N["assert"](3===o.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+o.rank+"."),N["assert"](3===s.rank||1===s.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),N["assert"](3===u.rank||1===u.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),null!=c&&N["assert"](3===c.rank||1===c.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),null!=l&&N["assert"](3===l.rank||1===l.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${l.rank}.`),Object(F["a"])(o,s,u,l,c,a)}const R=Object(A["b"])({batchNorm3d_:I});function $(t,e,n,r,i,a){const o=Object(x["a"])(t,"x","batchNorm"),s=Object(x["a"])(e,"mean","batchNorm"),u=Object(x["a"])(n,"variance","batchNorm");let c,l;return null!=i&&(c=Object(x["a"])(i,"scale","batchNorm")),null!=r&&(l=Object(x["a"])(r,"offset","batchNorm")),N["assert"](4===o.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+o.rank+"."),N["assert"](4===s.rank||1===s.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),N["assert"](4===u.rank||1===u.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),null!=c&&N["assert"](4===c.rank||1===c.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),null!=l&&N["assert"](4===l.rank||1===l.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${l.rank}.`),Object(F["a"])(o,s,u,l,c,a)}const B=Object(A["b"])({batchNorm4d_:$});var z=n("48db"),L=n("043e"),P=n("deb3"),U=n("5960"),W=n("c08f"),q=n("f0a9"),V=n("0777");function G(t){return Object(w["a"])(t,0)}const H=Object(A["b"])({concat1d_:G});function X(t,e){return Object(w["a"])(t,e)}const Y=Object(A["b"])({concat2d_:X});function K(t,e){return Object(w["a"])(t,e)}const J=Object(A["b"])({concat3d_:K});function Z(t,e){return Object(w["a"])(t,e)}const Q=Object(A["b"])({concat4d_:Z});var tt=n("7675"),et=n("dd7e"),nt=n("cd1f"),rt=n("1590"),it=n("99d0");function at(t,e,n,r,i){const a=Object(x["a"])(t,"x","conv3dTranspose"),o=Object(x["a"])(e,"filter","conv3dTranspose");return Object(it["a"])(n,a,o,r,i)}const ot=Object(A["b"])({conv3dTranspose_:at});var st=n("eff7"),ut=n("c1a2"),ct=n("1e68"),lt=n("364e"),ft=n("838f"),dt=n("6ae2"),ht=n("c05b"),pt=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function mt(t){const e=Object(x["a"])(t,"x","diag"),n=n=>{const r=Object(pt["a"])(e,[e.size]),i=n.diag(r),a=[...t.shape,...t.shape];return Object(pt["a"])(i,a)},r={x:e};return dt["a"].runKernelFunc(n,r,null,ht["O"])}const gt=Object(A["b"])({diag_:mt});var bt=n("c170"),yt=n("c77c"),vt=n("011b"),xt=n("29fc"),wt=n("9e38"),Ot=n("b9b9"),_t=n("8e05"),At=n("4f20"),jt=n("dae8"),kt=n("1ba2"),Ct=n("8d71");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Et(t,e,n,r="float32"){null==e&&(e=t);const i=Object(L["a"])([t,e],r),a=t<=e?t:e;for(let s=0;s<a;++s)i.set(1,s,s);const o=Object(pt["a"])(i.toTensor(),[t,e]);if(null==n)return o;if(1===n.length)return Object(Ct["a"])(Object(jt["a"])(o,0),[n[0],1,1]);if(2===n.length)return Object(Ct["a"])(Object(jt["a"])(Object(jt["a"])(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return Object(Ct["a"])(Object(jt["a"])(Object(jt["a"])(Object(jt["a"])(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const St=Object(A["b"])({eye_:Et});var Dt=n("46b8"),Ft=n("d369"),Nt=n("508f"),Tt=n("91a3"),Mt=n("cef0"),It=n("bb2d"),Rt=n("24b0"),$t=n("fc0b"),Bt=n("5980"),zt=n("6fef"),Lt=n("6f37"),Pt=n("e1fd"),Ut=n("b21c"),Wt=n("5894"),qt=n("e101"),Vt=n("1359"),Gt=n("46b1"),Ht=n("c314"),Xt=n("804a"),Yt=n("afda"),Kt=n("e333"),Jt=n("ef00"),Zt=n("f183"),Qt=n("d25f"),te=n("c021"),ee=n("9fe6"),ne=n("53fd"),re=n("8bc9"),ie=n("09f4"),ae=n("122e"),oe=n("ae6d"),se=n("f0e5"),ue=n("4611"),ce=n("36e5"),le=n("93b2"),fe=n("a009");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function de(t,e=null,n=!1){t=Object(x["a"])(t,"x","moments");const r=Object(N["parseAxisParam"])(e,t.shape),i=Object(ae["a"])(t,r,n);let a=i.shape;n||(a=Object(ce["e"])(i.shape,r));const o=Object(le["a"])(Object(fe["a"])(Object(P["a"])(t,"float32"),Object(pt["a"])(i,a))),s=Object(ae["a"])(o,r,n);return{mean:i,variance:s}}const he=Object(A["b"])({moments_:de});function pe(t,e,n,r){const i=Object(x["a"])(e,"data","multiRNNCell"),a=Object(x["b"])(n,"c","multiRNNCell"),o=Object(x["b"])(r,"h","multiRNNCell");let s=i;const u=[];for(let f=0;f<t.length;f++){const e=t[f](s,a[f],o[f]);u.push(e[0]),u.push(e[1]),s=e[1]}const c=[],l=[];for(let f=0;f<u.length;f+=2)c.push(u[f]),l.push(u[f+1]);return[c,l]}const me=Object(A["b"])({multiRNNCell_:pe});var ge=n("3efc"),be=n("3bb7"),ye=n("d4de"),ve=n("e22c"),xe=n("c22a"),we=n("0db5");function Oe(t,e){const n=Object(x["a"])(t,"v1","outerProduct"),r=Object(x["a"])(e,"v2","outerProduct");N["assert"](1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=Object(pt["a"])(n,[-1,1]),a=Object(pt["a"])(r,[1,-1]);return Object(O["a"])(i,a)}const _e=Object(A["b"])({outerProduct_:Oe});var Ae=n("0eb5");function je(t,e,n=0){return Object(N["assert"])(2===e.length,()=>"Invalid number of paddings. Must be length of 2."),Object(Ae["a"])(t,[e],n)}const ke=Object(A["b"])({pad1d_:je});function Ce(t,e,n=0){return Object(N["assert"])(2===e.length&&2===e[0].length&&2===e[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),Object(Ae["a"])(t,e,n)}const Ee=Object(A["b"])({pad2d_:Ce});function Se(t,e,n=0){return Object(N["assert"])(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),Object(Ae["a"])(t,e,n)}const De=Object(A["b"])({pad3d_:Se});function Fe(t,e,n=0){return Object(N["assert"])(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),Object(Ae["a"])(t,e,n)}const Ne=Object(A["b"])({pad4d_:Fe});var Te=n("eaf4"),Me=n("c9f1"),Ie=n("520f"),Re=n("7568"),$e=n("f3ae");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Be(t,e,n){const r=Object(N["sizeFromShape"])(t);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(let a=0;a<r;a++)i[a]=e();return dt["a"].makeTensor(i,t,n)}const ze=Object(A["b"])({rand_:Be});var Le=n("d4e4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pe(t,e,n=1,r="float32",i){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);const a=new Le["b"](e,n,r,i),o=Object(L["a"])(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const Ue=Object(A["b"])({randomGamma_:Pe});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function We(t,e=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);const a=new Le["a"](e,n,r,!1,i),o=Object(L["a"])(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const qe=Object(A["b"])({randomNormal_:We});var Ve=n("8629"),Ge=n("84d6"),He=n("d7b0"),Xe=n("b500"),Ye=n("917a"),Ke=n("46a8"),Je=n("d08e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ze(t){const e=Object(x["a"])(t,"x","reverse");return N["assert"](1===e.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Object(Je["a"])(e,0)}const Qe=Object(A["b"])({reverse1d_:Ze});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tn(t,e){const n=Object(x["a"])(t,"x","reverse");return N["assert"](2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Object(Je["a"])(n,e)}const en=Object(A["b"])({reverse2d_:tn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(t,e){const n=Object(x["a"])(t,"x","reverse");return N["assert"](3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Object(Je["a"])(n,e)}const rn=Object(A["b"])({reverse3d_:nn});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function an(t,e){const n=Object(x["a"])(t,"x","reverse");return N["assert"](4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Object(Je["a"])(n,e)}const on=Object(A["b"])({reverse4d_:an});var sn=n("08a9"),un=n("5f2a"),cn=n("015f"),ln=n("b39e"),fn=n("116b"),dn=n("f74c"),hn=n("1df6"),pn=n("6932"),mn=n("5dc4");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gn(t,e,n){const r=Object(x["a"])(t,"x","slice1d");return N["assert"](1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Object(k["a"])(r,[e],[n])}const bn=Object(A["b"])({slice1d_:gn});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yn(t,e,n){const r=Object(x["a"])(t,"x","slice2d");return N["assert"](2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Object(k["a"])(r,e,n)}const vn=Object(A["b"])({slice2d_:yn});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xn(t,e,n){const r=Object(x["a"])(t,"x","slice3d");return N["assert"](3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Object(k["a"])(r,e,n)}const wn=Object(A["b"])({slice3d_:xn});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function On(t,e,n){const r=Object(x["a"])(t,"x","slice4d");return N["assert"](4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Object(k["a"])(r,e,n)}const _n=Object(A["b"])({slice4d_:On});var An=n("5f87"),jn=n("9ffd"),kn=n("7580"),Cn=n("1ab7"),En=n("4c7a"),Sn=n("69dc"),Dn=n("b61d"),Fn=n("45bb"),Nn=n("163a"),Tn=n("4184"),Mn=n("d1f4"),In=n("d54d"),Rn=n("2fb1"),$n=n("de1a"),Bn=n("e053"),zn=n("d30a"),Ln=n("357d"),Pn=n("960f"),Un=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Wn(t,e,n){if(Object(N["assertNonNull"])(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");const r=Object(x["c"])(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object(Un["a"])(t,e,r,n)}var qn=n("05bb");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vn(t,e,n){if(Object(N["assertNonNull"])(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");const r=Object(x["c"])(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Object(Un["a"])(t,e,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gn(t,e,n){if(Object(N["assertNonNull"])(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");const r=Object(x["c"])(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Object(Un["a"])(t,e,r,n)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hn(t,e,n){if(Object(N["assertNonNull"])(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");const r=Object(x["c"])(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Object(Un["a"])(t,e,r,n)}var Xn=n("5616"),Yn=n("7e6a"),Kn=n("853e"),Jn=n("53f2"),Zn=n("3a44");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Qn(t,e=!0,n,r){return dt["a"].makeVariable(t,e,n,r)}var tr=n("6791"),er=n("a780"),nr=n("5a2c"),rr=n("a09b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function ir(t,e,n){const r=Object(x["a"])(t,"tensor","boolMask"),i=Object(x["a"])(e,"mask","boolMask","bool"),a=null==n?0:n,o=i.rank,s=r.shape;N["assert"](o>0,()=>"mask cannot be scalar"),N["assertShapesMatch"](s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let m=a;m<a+o;m++)u*=s[m];const c=s.slice(0,a).concat([u],s.slice(a+o)),l=Object(pt["a"])(r,c),f=Object(pt["a"])(i,[-1]),d=await Object(er["a"])(f),h=Object(Mn["a"])(d,[1]),p=Object(Tt["a"])(l,h,a);return t!==r&&r.dispose(),e!==i&&i.dispose(),h.dispose(),l.dispose(),f.dispose(),d.dispose(),p}const ar=ir;var or=n("f1b5"),sr=n("ccb1"),ur=n("c912"),cr=n("f757"),lr=n("76c2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function fr(t,e,n,r,i=!0){const a=Object(x["a"])(t,"v","movingAverage"),o=Object(x["a"])(e,"x","movingAverage"),u=Object(x["a"])(n,"decay","movingAverage");Object(lr["assertTypesMatch"])(a,o),N["assert"](N["arraysEqual"](a.shape,o.shape),()=>"Shape mismatch in v and x");const c=Object(cn["a"])(1),l=Object(fe["a"])(c,u);let f=Object(_["a"])(Object(fe["a"])(o,a),l);if(i){N["assert"](null!=r,()=>"When using zeroDebias: true, step is required.");const t=Object(x["a"])(r,"step","movingAverage");f=Object(yt["a"])(f,Object(fe["a"])(c,Object(Me["a"])(u,t)))}return Object(s["a"])(a,f)}const dr=Object(A["b"])({movingAverage_:fr});var hr=n("8bfa"),pr=n("bc62"),mr=n("ba40"),gr=n("34d7");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function br(t,e){if(null==e)return t.shape.slice();if(N["arraysEqual"](t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)null==e[r]&&null!=t.shape[r]?n.push(t.shape[r]):n.push(e[r]);return n}return e}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yr(t,e,n,r){const i=Object(x["a"])(t,"x","dropout");if(N["assert"]("float32"===i.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),N["assert"](e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),0===e)return t instanceof gr["a"]?i.clone():i;const a=br(i,n),o=1-e,u=Object(yt["a"])(Object(Ft["a"])(Object(s["a"])(Object(Ve["a"])(a,0,1,"float32",r),o)),o);return Object(_["a"])(i,u)}const vr=Object(A["b"])({dropout_:yr});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xr(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function wr(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let a=0;a<t;++a){const o=2*Math.PI*a/(t+r-1);i[a]=e-n*Math.cos(o)}return Object(Pn["a"])(i,"float32")}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Or(t,e,n=1){const r=Object(x["a"])(t,"predictions","inTopK"),i=Object(x["a"])(e,"targets","inTopK");Object(N["assert"])(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank),Object(N["assert"])(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Object(N["assertShapesMatch"])(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];Object(N["assert"])(n>0&&n<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`);const o=await r.data(),s=await i.data(),[u,c]=[o.length/a,a],l=Object(N["getTypedArrayFromDType"])("bool",u);for(let f=0;f<u;f++){const t=f*c,e=o.subarray(t,t+c),r=[];for(let n=0;n<e.length;n++)r.push({value:e[n],index:n});r.sort((t,e)=>e.value-t.value),l[f]=0;for(let i=0;i<n;i++)if(r[i].index===s[f]){l[f]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),Object(Ln["a"])(l,i.shape,"bool")}const _r=Or;var Ar=n("538e"),jr=n("526f"),kr=n("0f6f"),Cr=n("73d3"),Er=n("b818"),Sr=n("4749");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Dr({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:u,activation:c="linear",preluActivationWeights:l}){if(c=c||"linear",!1===Object(Sr["d"])(dt["a"].state.gradientDepth,c)){let f=Object(et["a"])(t,e,n,r,i,a,o);return null!=u&&(f=Object(s["a"])(f,u)),Object(Sr["a"])(f,c,l)}const f=Object(x["a"])(t,"x","conv2d"),d=Object(x["a"])(e,"filter","conv2d");let h=f,p=!1;3===f.rank&&(p=!0,h=Object(pt["a"])(f,[1,f.shape[0],f.shape[1],f.shape[2]])),N["assert"](4===h.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+h.rank+"."),N["assert"](4===d.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+d.rank+"."),null!=o&&N["assert"](N["isInt"](r),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${r}.`),N["assert"](h.shape[3]===d.shape[2],()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${d.shape[2]}.`),N["assert"](Er["h"](n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),N["assert"]("NHWC"===i,()=>`Error in conv2d: got dataFormat of ${i} but only NHWC is currently supported.`);const m=Er["a"](h.shape,d.shape,n,a,r,o);let g,b;null!=u&&(g=Object(x["a"])(u,"bias","fused conv2d"),[g]=Object(lr["makeTypesMatch"])(g,f),jr["a"](m.outShape,g.shape)),null!=l&&(b=Object(x["a"])(l,"prelu weights","fused conv2d"));const y=(t,e)=>{const[i,o,s,u]=e,l=Object(Sr["c"])(t,s,c);N["assert"](Er["i"](a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const f=Object(Cr["a"])(o.shape,l,i,n,r),d=Object(kr["a"])(o,l,i.shape,n,r),h=[f,d];if(null!=u){const t=Object(Sr["b"])(u,l);h.push(t)}return h},v=t=>{const e=t.fusedConv2d({input:h,filter:d,convInfo:m,bias:g,activation:c,preluActivationWeights:b});return e},w={x:h,filter:d,bias:g,preluActivationWeights:b},O={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:c};if(null==u){const t=Object(Ar["a"])((t,e,n)=>{let r=dt["a"].runKernelFunc(v,w,null,ht["gb"],O);return n([e,t,r]),p&&(r=Object(pt["a"])(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}});return t(h,d)}{const t=Object(Ar["a"])((t,e,n,r)=>{let i=dt["a"].runKernelFunc(v,w,null,ht["gb"],O);return r([e,t,i,n]),p&&(i=Object(pt["a"])(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:y}});return t(h,d,g)}}const Fr=Object(A["b"])({fusedConv2d_:Dr});var Nr=n("6926"),Tr=n("8cb0");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Mr({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:u,activation:c="linear",preluActivationWeights:l}){if(!1===Object(Sr["d"])(dt["a"].state.gradientDepth,c)){let f=Object(ft["a"])(t,e,n,r,i,a,o);return null!=u&&(f=Object(s["a"])(f,u)),Object(Sr["a"])(f,c,l)}const f=Object(x["a"])(t,"x","depthwiseConv2d"),d=Object(x["a"])(e,"filter","depthwiseConv2d");let h=f,p=!1;3===f.rank&&(p=!0,h=Object(pt["a"])(f,[1,f.shape[0],f.shape[1],f.shape[2]])),N["assert"](4===h.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),N["assert"](4===d.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),N["assert"](h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),null==a&&(a=[1,1]),N["assert"](Er["h"](n,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),null!=o&&N["assert"](N["isInt"](r),()=>`Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode ${o} but got pad ${r}.`);const m=Er["a"](h.shape,d.shape,n,a,r,o,!0);let g,b;null!=u&&(g=Object(x["a"])(u,"bias","fused conv2d"),[g]=Object(lr["makeTypesMatch"])(g,f),jr["a"](m.outShape,g.shape)),null!=l&&(b=Object(x["a"])(l,"prelu weights","fused depthwiseConv2d"));const y=(t,e)=>{N["assert"](Er["i"](a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[n,r,i,o]=e,s=Object(Sr["c"])(t,i,c),u=Object(Tr["a"])(r.shape,s,n,m),l=Object(Nr["a"])(r,s,n.shape,m);if(null!=o){const t=Object(Sr["b"])(g,s);return[u,l,t]}return[u,l]},v=t=>{const e=t.fusedDepthwiseConv2D({input:h,filter:d,convInfo:m,bias:g,activation:c,preluActivationWeights:b});return e},w={x:h,filter:d,bias:g,preluActivationWeights:b},O={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:c};if(null==u){const t=Object(Ar["a"])((t,e,n)=>{let r=dt["a"].runKernelFunc(v,w,null,ht["hb"],O);return n([e,t,r]),p&&(r=Object(pt["a"])(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:y}});return t(h,d)}{const t=Object(Ar["a"])((t,e,n,r)=>{let i=dt["a"].runKernelFunc(v,w,null,ht["hb"],O);return r([e,t,i,n]),p&&(i=Object(pt["a"])(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:y}});return t(h,d,g)}}const Ir=Object(A["b"])({fusedDepthwiseConv2d_:Mr});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rr({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:o}){if(!1===Object(Sr["d"])(dt["a"].state.gradientDepth,a)){let u=Object(O["a"])(t,e,n,r);return null!=i&&(u=Object(s["a"])(u,i)),Object(Sr["a"])(u,a,o)}let u=Object(x["a"])(t,"a","fused matMul"),c=Object(x["a"])(e,"b","fused matMul");[u,c]=Object(lr["makeTypesMatch"])(u,c);const l=n?u.shape[u.rank-2]:u.shape[u.rank-1],f=r?c.shape[c.rank-1]:c.shape[c.rank-2],d=n?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],p=u.shape.slice(0,-2),m=c.shape.slice(0,-2),g=N["sizeFromShape"](p),b=N["sizeFromShape"](m);N["assert"](u.rank>=2&&c.rank>=2&&u.rank===c.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${u.rank} and ${c.rank}.`),N["assert"](N["arraysEqual"](p,m),()=>`Error in fused matMul: outer dimensions (${p}) and (${m}) of Tensors with shapes ${u.shape} and `+c.shape+" must match."),N["assert"](l===f,()=>`Error in fused matMul: inner shapes (${l}) and (${f}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const y=u.shape.slice(0,-2).concat([d,h]),v=n?Object(pt["a"])(u,[g,l,d]):Object(pt["a"])(u,[g,d,l]),w=r?Object(pt["a"])(c,[b,h,f]):Object(pt["a"])(c,[b,f,h]);let _,A;null!=i&&(_=Object(x["a"])(i,"bias","fused matMul"),[_]=Object(lr["makeTypesMatch"])(_,u),jr["a"](y,_.shape)),null!=o&&(A=Object(x["a"])(o,"prelu weights","fused matMul"));const j=(t,e)=>{const[o,s,u,c]=e,l=Object(Sr["c"])(Object(pt["a"])(t,u.shape),u,a);let f,d;if(n||r?!n&&r?(f=Object(O["a"])(l,s,!1,!1),d=Object(O["a"])(l,o,!0,!1)):n&&!r?(f=Object(O["a"])(s,l,!1,!0),d=Object(O["a"])(o,l,!1,!1)):(f=Object(O["a"])(s,l,!0,!0),d=Object(O["a"])(l,o,!0,!0)):(f=Object(O["a"])(l,s,!1,!0),d=Object(O["a"])(o,l,!0,!1)),null!=i){const t=Object(Sr["b"])(c,l);return[f,d,t]}return[f,d]},k=t=>{const e=t.fusedBatchMatMul({a:v,b:w,transposeA:n,transposeB:r,bias:_,activation:a,preluActivationWeights:A});return e},C={a:v,b:w,bias:_,preluActivationWeights:A},E={transposeA:n,transposeB:r,activation:a};if(null==i){const t=Object(Ar["a"])((t,e,n)=>{const r=dt["a"].runKernelFunc(k,C,null,ht["Sc"],E);return n([t,e,r]),{value:Object(pt["a"])(r,y),gradFunc:j}});return t(v,w)}{const t=Object(Ar["a"])((t,e,n,r)=>{const i=dt["a"].runKernelFunc(k,C,null,ht["Sc"],E);return r([t,e,i,n]),{value:Object(pt["a"])(i,y),gradFunc:j}});return t(v,w,_)}}const $r=Object(A["b"])({fusedMatMul_:Rr});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Br(t){return wr(t,.54,.46)}const zr=Object(A["b"])({hammingWindow_:Br});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lr(t){return wr(t,.5,.5)}const Pr=Object(A["b"])({hannWindow_:Lr});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ur(t,e,n,r=!1,i=0){let a=0;const o=[];while(a+e<=t.size)o.push(Object(k["a"])(t,a,e)),a+=n;if(r)while(a<t.size){const r=a+e-t.size,s=Object(w["a"])([Object(k["a"])(t,a,e-r),Object(Dt["a"])([r],i)]);o.push(s),a+=n}return 0===o.length?Wn([],[0,e]):Object(pt["a"])(Object(w["a"])(o),[o.length,e])}const Wr=Object(A["b"])({frame_:Ur});
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr(t,e,n,r,i=Pr){null==r&&(r=xr(e));const a=Wr(t,e,n),o=Object(_["a"])(a,i(e)),s=[];for(let u=0;u<a.shape[0];u++)s.push(Object(Dn["a"])(Object(k["a"])(o,[u,0],[1,e]),r));return Object(w["a"])(s)}const Vr=Object(A["b"])({stft_:qr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gr(t,e,n,r,i,a){const o=Object(x["a"])(t,"image","cropAndResize"),s=Object(x["a"])(e,"boxes","cropAndResize","float32"),u=Object(x["a"])(n,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;const c=s.shape[0];N["assert"](4===o.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),N["assert"](2===s.rank&&4===s.shape[1],()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${s.shape}.`),N["assert"](1===u.rank&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${s.shape}.`),N["assert"](2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),N["assert"](r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was "+r),N["assert"]("bilinear"===i||"nearest"===i,()=>"method must be bilinear or nearest, but was "+i);const l=t=>t.cropAndResize(o,s,u,r,i,a),f={image:o,boxes:s,boxInd:u},d={method:i,extrapolationValue:a,cropSize:r},h=dt["a"].runKernelFunc(l,f,null,ht["I"],d);return h}const Hr=Object(A["b"])({cropAndResize_:Gr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xr(t){const e=Object(x["a"])(t,"image","flipLeftRight","float32");N["assert"](4===e.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e},r=dt["a"].runKernel(ht["bb"],n,{});return r}const Yr=Object(A["b"])({flipLeftRight_:Xr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kr(t,e,n=0,r=.5){const i=Object(x["a"])(t,"image","rotateWithOffset","float32");N["assert"](4===i.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const a={image:i},o={radians:e,fillValue:n,center:r},s=dt["a"].runKernel(ht["mc"],a,o);return s}const Jr=Object(A["b"])({rotateWithOffset_:Kr});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zr(t,e,n,r,i,a){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==a&&(a=0);const o=t.shape[0];return n=Math.min(n,o),N["assert"](0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),N["assert"](2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),N["assert"](4===t.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]),N["assert"](1===e.rank,()=>"scores must be a 1D tensor"),N["assert"](e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was `+e.shape[0]),N["assert"](0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qr(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=Object(x["a"])(t,"boxes","nonMaxSuppression"),o=Object(x["a"])(e,"scores","nonMaxSuppression"),s=Zr(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return dt["a"].runKernelFunc(t=>t.nonMaxSuppression(a,o,n,r,i),{boxes:a,scores:o},null,ht["Qb"],u)}const ti=Object(A["b"])({nonMaxSuppression_:Qr});var ei=n("8389");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ni(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=Object(x["a"])(t,"boxes","nonMaxSuppressionAsync"),o=Object(x["a"])(e,"scores","nonMaxSuppressionAsync"),s=Zr(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u=await Promise.all([a.data(),o.data()]),c=u[0],l=u[1],f=Object(ei["a"])(c,l,n,r,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),f}const ri=ni;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ii(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=Object(x["a"])(t,"boxes","nonMaxSuppression"),s=Object(x["a"])(e,"scores","nonMaxSuppression"),u=Zr(o,s,n,r,i,a);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma;const c={boxes:o,scores:s},l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},f=dt["a"].runKernel(ht["Sb"],c,l);return{selectedIndices:f[0],selectedScores:f[1]}}const ai=Object(A["b"])({nonMaxSuppressionWithScore_:ii});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function oi(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=Object(x["a"])(t,"boxes","nonMaxSuppressionAsync"),s=Object(x["a"])(e,"scores","nonMaxSuppressionAsync"),u=Zr(o,s,n,r,i,a);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma;const c=await Promise.all([o.data(),s.data()]),l=c[0],f=c[1],d=Object(ei["c"])(l,f,n,r,i,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),d}const si=oi;
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ui(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=Object(x["a"])(t,"boxes","nonMaxSuppression"),s=Object(x["a"])(e,"scores","nonMaxSuppression"),u=Zr(o,s,n,r,i,null),c=u.maxOutputSize,l=u.iouThreshold,f=u.scoreThreshold,d={boxes:o,scores:s},h={maxOutputSize:c,iouThreshold:l,scoreThreshold:f,padToMaxOutputSize:a},p=dt["a"].runKernel(ht["Rb"],d,h);return{selectedIndices:p[0],validOutputs:p[1]}}const ci=Object(A["b"])({nonMaxSuppressionPadded_:ui});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function li(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=Object(x["a"])(t,"boxes","nonMaxSuppressionAsync"),s=Object(x["a"])(e,"scores","nonMaxSuppressionAsync"),u=Zr(o,s,n,r,i,null),c=u.maxOutputSize,l=u.iouThreshold,f=u.scoreThreshold,[d,h]=await Promise.all([o.data(),s.data()]),p=Object(ei["b"])(d,h,c,l,f,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),p}const fi=li;var di=n("73f8"),hi=n("0f86");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function pi(t,e,n){Object(N["assert"])(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),Object(N["assert"])(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const r=Object(x["a"])(t,"a","bandPart");Object(N["assert"])(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[a,o]=r.shape.slice(-2);if(!(e<=a))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);e<0&&(e=a),n<0&&(n=o);const s=Object(pt["a"])(Object(Ge["a"])(0,a,1,"int32"),[-1,1]),u=Object(Ge["a"])(0,o,1,"int32"),c=Object(fe["a"])(s,u),l=Object(Kt["a"])(Object(Ut["a"])(c,Object(cn["a"])(+e,"int32")),Object(It["a"])(c,Object(cn["a"])(-n,"int32"))),f=Object(nr["a"])([a,o],r.dtype);return Object(pt["a"])(Object(In["a"])(Object(Zn["a"])(Object(pt["a"])(r,[-1,a,o])).map(t=>Object(tr["a"])(l,t,f))),i)}const mi=Object(A["b"])({bandPart_:pi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gi(t){let e;if(Array.isArray(t)){e=!1,Object(N["assert"])(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=t[0].shape[0];for(let e=1;e<t.length;++e)Object(N["assert"])(t[e].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[e].shape[0]} vs. ${n})`)}else e=!0,t=Object(Fn["a"])(t,t.shape[0],0).map(t=>Object(Mn["a"])(t,[0]));Object(N["assert"])(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(dt["a"].tidy(()=>{let t=r[i];if(i>0)for(let e=0;e<i;++e){const r=Object(_["a"])(Object(Bn["a"])(Object(_["a"])(n[e],t)),n[e]);t=Object(fe["a"])(t,r)}return Object(yt["a"])(t,Object(cr["a"])(t,"euclidean"))}));return e?Object(In["a"])(n,0):n}const bi=Object(A["b"])({gramSchmidt_:gi});var yi=n("c04e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(t,e=!1){if(Object(N["assert"])(t.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank "+t.rank),2===t.rank)return xi(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((t,e)=>t*e),r=Object(Zn["a"])(Object(pt["a"])(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];r.forEach(t=>{const[n,r]=xi(t,e);i.push(n),a.push(r)});const o=Object(pt["a"])(Object(In["a"])(i,0),t.shape),s=Object(pt["a"])(Object(In["a"])(a,0),t.shape);return[o,s]}}function xi(t,e=!1){return dt["a"].tidy(()=>{Object(N["assert"])(2===t.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=St(n),a=Object(q["a"])(t);const o=Wn([[1]],[1,1]);let s=Object(q["a"])(o);const u=n>=r?r:n;for(let t=0;t<u;++t){const e=a,u=s,c=i;[s,a,i]=dt["a"].tidy(()=>{const e=Object(k["a"])(a,[t,t],[n-t,1]),u=Object(cr["a"])(e),c=Object(k["a"])(a,[t,t],[1,1]),l=Object(tr["a"])(Object(Mt["a"])(c,0),Wn([[-1]]),Wn([[1]])),f=Object(fe["a"])(c,Object(_["a"])(l,u)),d=Object(yt["a"])(e,f);s=1===d.shape[0]?Object(q["a"])(o):Object(w["a"])([o,Object(k["a"])(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const h=Object(be["a"])(Object(yt["a"])(Object(O["a"])(l,f),u)),p=Object(k["a"])(a,[t,0],[n-t,r]),m=Object(_["a"])(h,s),g=Object(ur["a"])(s);if(0===t)a=Object(fe["a"])(p,Object(O["a"])(m,Object(O["a"])(g,p)));else{const e=Object(fe["a"])(p,Object(O["a"])(m,Object(O["a"])(g,p)));a=Object(w["a"])([Object(k["a"])(a,[0,0],[t,r]),e],0)}const b=Object(ur["a"])(m),y=Object(k["a"])(i,[0,t],[n,i.shape[1]-t]);if(0===t)i=Object(fe["a"])(y,Object(O["a"])(Object(O["a"])(y,s),b));else{const e=Object(fe["a"])(y,Object(O["a"])(Object(O["a"])(y,s),b));i=Object(w["a"])([Object(k["a"])(i,[0,0],[n,t]),e],1)}return[s,a,i]}),Object(yi["d"])([e,u,c])}return!e&&n>r&&(i=Object(k["a"])(i,[0,0],[n,r]),a=Object(k["a"])(a,[0,0],[r,r])),[i,a]})}const wi=Object(A["b"])({qr_:vi});var Oi=n("57e0");function _i(t,e,n=Oi["a"].SUM_BY_NONZERO_WEIGHTS){const r=Object(x["a"])(t,"losses","computeWeightedLoss");let i=null;null!=e&&(i=Object(x["a"])(e,"weights","computeWeightedLoss"));const a=null==i?r:Object(_["a"])(r,i);if(n===Oi["a"].NONE)return a;if(n===Oi["a"].SUM)return Object(Bn["a"])(a);if(n===Oi["a"].MEAN){if(null==i)return Object(ae["a"])(a);{const t=r.size/i.size,e=Object(yt["a"])(Object(Bn["a"])(a),Object(Bn["a"])(i));return t>1?Object(yt["a"])(e,Object(cn["a"])(t)):e}}if(n===Oi["a"].SUM_BY_NONZERO_WEIGHTS){if(null==i)return Object(yt["a"])(Object(Bn["a"])(a),Object(cn["a"])(r.size));{const t=Object(_["a"])(i,Object(xe["a"])(r.shape)),e=Object(P["a"])(Object(Bn["a"])(Object(ye["a"])(t,Object(cn["a"])(0))),"float32");return Object(yt["a"])(Object(Bn["a"])(a),e)}}throw Error("Unknown reduction: "+n)}const Ai=Object(A["b"])({computeWeightedLoss_:_i});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ji(t,e,n,r=Oi["a"].SUM_BY_NONZERO_WEIGHTS){const a=Object(x["a"])(t,"labels","absoluteDifference"),o=Object(x["a"])(e,"predictions","absoluteDifference");let s=null;null!=n&&(s=Object(x["a"])(n,"weights","absoluteDifference")),Object(N["assertShapesMatch"])(a.shape,o.shape,"Error in absoluteDifference: ");const u=Object(i["a"])(Object(fe["a"])(a,o));return Ai(u,s,r)}const ki=Object(A["b"])({absoluteDifference_:ji});function Ci(t,e,n,r,i=Oi["a"].SUM_BY_NONZERO_WEIGHTS){const a=Object(x["a"])(t,"labels","cosineDistance"),o=Object(x["a"])(e,"predictions","cosineDistance");let s=null;null!=r&&(s=Object(x["a"])(r,"weights","cosineDistance")),Object(N["assertShapesMatch"])(a.shape,o.shape,"Error in cosineDistance: ");const u=Object(cn["a"])(1),c=Object(fe["a"])(u,Object(Bn["a"])(Object(_["a"])(a,o),n,!0));return Ai(c,s,i)}const Ei=Object(A["b"])({cosineDistance_:Ci});function Si(t,e,n,r=Oi["a"].SUM_BY_NONZERO_WEIGHTS){let i=Object(x["a"])(t,"labels","hingeLoss");const a=Object(x["a"])(e,"predictions","hingeLoss");let o=null;null!=n&&(o=Object(x["a"])(n,"weights","hingeLoss")),Object(N["assertShapesMatch"])(i.shape,a.shape,"Error in hingeLoss: ");const s=Object(cn["a"])(1);i=Object(fe["a"])(Object(_["a"])(Object(cn["a"])(2),i),s);const u=Object(Ye["a"])(Object(fe["a"])(s,Object(_["a"])(i,a)));return Ai(u,o,r)}const Di=Object(A["b"])({hingeLoss_:Si});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fi(t,e,n,r=1,a=Oi["a"].SUM_BY_NONZERO_WEIGHTS){const o=Object(x["a"])(t,"labels","huberLoss"),u=Object(x["a"])(e,"predictions","huberLoss");let c=null;null!=n&&(c=Object(x["a"])(n,"weights","huberLoss")),Object(N["assertShapesMatch"])(o.shape,u.shape,"Error in huberLoss: ");const l=Object(cn["a"])(r),f=Object(i["a"])(Object(fe["a"])(u,o)),d=Object(se["a"])(f,l),h=Object(fe["a"])(f,d),p=Object(s["a"])(Object(_["a"])(Object(cn["a"])(.5),Object(le["a"])(d)),Object(_["a"])(l,h));return Ai(p,c,a)}const Ni=Object(A["b"])({huberLoss_:Fi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ti(t,e,n,r=1e-7,i=Oi["a"].SUM_BY_NONZERO_WEIGHTS){const a=Object(x["a"])(t,"labels","logLoss"),o=Object(x["a"])(e,"predictions","logLoss");let u=null;null!=n&&(u=Object(x["a"])(n,"weights","logLoss")),Object(N["assertShapesMatch"])(a.shape,o.shape,"Error in logLoss: ");const c=Object(cn["a"])(1),l=Object(cn["a"])(r),f=Object(be["a"])(Object(_["a"])(a,Object(Vt["a"])(Object(s["a"])(o,l)))),d=Object(_["a"])(Object(fe["a"])(c,a),Object(Vt["a"])(Object(s["a"])(Object(fe["a"])(c,o),l))),h=Object(fe["a"])(f,d);return Ai(h,u,i)}const Mi=Object(A["b"])({logLoss_:Ti});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ii(t,e,n,r=Oi["a"].SUM_BY_NONZERO_WEIGHTS){const i=Object(x["a"])(t,"labels","meanSquaredError"),a=Object(x["a"])(e,"predictions","meanSquaredError");let o=null;null!=n&&(o=Object(x["a"])(n,"weights","meanSquaredError")),Object(N["assertShapesMatch"])(i.shape,a.shape,"Error in meanSquaredError: ");const s=Object(Tn["a"])(i,a);return Ai(s,o,r)}const Ri=Object(A["b"])({meanSquaredError_:Ii});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $i(t,e){const n=Object(x["a"])(t,"labels","sigmoidCrossEntropyWithLogits"),r=Object(x["a"])(e,"logits","sigmoidCrossEntropyWithLogits");Object(N["assertShapesMatch"])(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const a=Object(Ye["a"])(r),o=Object(_["a"])(r,n),u=Object(Gt["a"])(Object(At["a"])(Object(be["a"])(Object(i["a"])(r))));return Object(s["a"])(Object(fe["a"])(a,o),u)}function Bi(t,e,n,r=0,i=Oi["a"].SUM_BY_NONZERO_WEIGHTS){let a=Object(x["a"])(t,"multiClassLabels","sigmoidCrossEntropy");const o=Object(x["a"])(e,"logits","sigmoidCrossEntropy");let u=null;if(null!=n&&(u=Object(x["a"])(n,"weights","sigmoidCrossEntropy")),Object(N["assertShapesMatch"])(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const t=Object(cn["a"])(r),e=Object(cn["a"])(1),n=Object(cn["a"])(.5);a=Object(s["a"])(Object(_["a"])(a,Object(fe["a"])(e,t)),Object(_["a"])(n,t))}const c=$i(a,o);return Ai(c,u,i)}const zi=Object(A["b"])({sigmoidCrossEntropy_:Bi});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Li(t,e,n=-1){if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was `+n);const r=Object(Ar["a"])((t,e,r)=>{const i=!0,a=Object(Yt["a"])(e,[n],i),o=Object(fe["a"])(Object(P["a"])(e,"float32"),a);r([t,o]);const s=Object(be["a"])(Object(_["a"])(o,t)),u=Object(Bn["a"])(s,[n]),c=(t,e)=>{const[r,i]=e,a=Object(ce["e"])(t.shape,[n]);return[Object(_["a"])(Object(pt["a"])(t,a),Object(fe["a"])(Object(P["a"])(r,"float32"),Object(At["a"])(i))),Object(_["a"])(Object(pt["a"])(t,a),Object(fe["a"])(Object(At["a"])(i),Object(P["a"])(r,"float32")))]};return{value:u,gradFunc:c}});return r(t,e)}function Pi(t,e,n,r=0,i=Oi["a"].SUM_BY_NONZERO_WEIGHTS){let a=Object(x["a"])(t,"onehotLabels","softmaxCrossEntropy");const o=Object(x["a"])(e,"logits","softmaxCrossEntropy");let u=null;if(null!=n&&(u=Object(x["a"])(n,"weights","softmaxCrossEntropy")),Object(N["assertShapesMatch"])(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const t=Object(cn["a"])(r),e=Object(cn["a"])(1),n=Object(cn["a"])(a.shape[1]);a=Object(s["a"])(Object(_["a"])(a,Object(fe["a"])(e,t)),Object(yt["a"])(t,n))}const c=Li(a,o);return Ai(c,u,i)}const Ui=Object(A["b"])({softmaxCrossEntropy_:Pi}),Wi={fft:Cn["a"],ifft:En["a"],rfft:Dn["a"],irfft:Sn["a"]},qi={hammingWindow:zr,hannWindow:Pr,frame:Wr,stft:Vr},Vi={flipLeftRight:Yr,resizeNearestNeighbor:hi["a"],resizeBilinear:di["a"],rotateWithOffset:Jr,cropAndResize:Hr,nonMaxSuppression:ti,nonMaxSuppressionAsync:ri,nonMaxSuppressionWithScore:ai,nonMaxSuppressionWithScoreAsync:si,nonMaxSuppressionPadded:ci,nonMaxSuppressionPaddedAsync:fi},Gi={bandPart:mi,gramSchmidt:bi,qr:wi},Hi={absoluteDifference:ki,computeWeightedLoss:Ai,cosineDistance:Ei,hingeLoss:Di,huberLoss:Ni,logLoss:Mi,meanSquaredError:Ri,sigmoidCrossEntropy:zi,softmaxCrossEntropy:Ui};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */},1334:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("30bf"),i=n("01de");class a extends r.Component{render(){const{tabNames:t,activeTab:e,handleClick:n}=this.props,a=t.length>0?t.map(t=>r.h(o,{key:t,id:t,handleClick:n,isActive:t===e},t)):null,s=i.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return r.h("div",{className:s+" visor-tabs"},a)}}e.Tabs=a;class o extends r.Component{render(){const{children:t,isActive:e,handleClick:n,id:a}=this.props,o=i.css({borderBottomColor:e?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return r.h("a",{className:o+" tf-tab","data-isactive":e,onClick:()=>n(a)},t)}}},1359:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","log"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.log(e);return n([e]),r},n,null,i["xb"])}const u=Object(o["b"])({log_:s})},"13af":function(t,e,n){const r=n("bbfd"),i=n("3fce"),a=(t,e,n)=>{let a=null,o=null,s=null;try{s=new i(e,n)}catch(u){return null}return t.forEach(t=>{s.test(t)&&(a&&-1!==o.compare(t)||(a=t,o=new r(a,n)))}),a};t.exports=a},"13d5":function(t,e,n){"use strict";var r=n("23e7"),i=n("d58f").left,a=n("a640"),o=n("ae40"),s=a("reduce"),u=o("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!u},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(t,e,n){var r=n("c6b6"),i=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},1590:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("b818"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n,u,l="NDHWC",f=[1,1,1]){const d=Object(a["a"])(t,"x","conv3d"),h=Object(a["a"])(e,"filter","conv3d");let p=d,m=!1;4===d.rank&&(m=!0,p=Object(c["a"])(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o["assert"](5===p.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${p.rank}.`),o["assert"](5===h.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+h.rank+"."),o["assert"](p.shape[4]===h.shape[3],()=>`Error in conv3d: depth of input (${p.shape[4]}) must match input depth for filter ${h.shape[3]}.`),o["assert"](Object(s["h"])(n,f),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${f}'`),o["assert"]("NDHWC"===l,()=>`Error in conv3d: got dataFormat of ${l} but only NDHWC is currently supported.`);const g=(t,e)=>{const r=s["b"](p.shape,h.shape,n,f,u),i=t.conv3d(p,h,r);return e([p,h]),i},b={x:p,filter:h},y={strides:n,pad:u,dataFormat:l,dilations:f},v=r["a"].runKernelFunc(g,b,null,i["D"],y);return m?Object(c["a"])(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const f=Object(u["b"])({conv3d_:l})},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),a=n("17c2"),o=n("9112");for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==a)try{o(c,"forEach",a)}catch(l){c.forEach=a}}},"163a":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","sqrt"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.sqrt(e);return n([e]),r},n,null,i["Cc"])}const u=Object(o["b"])({sqrt_:s})},1738:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return s}));var r=1e3,i=6e4,a=36e5,o=864e5,s=6048e5},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("a640"),a=n("ae40"),o=i("forEach"),s=a("forEach");t.exports=o&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},1809:function(t,e,n){"use strict";var r=n("18e2"),i=Object(r["a"])((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Object(r["a"])((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):i:null},e["a"]=i;i.range},"18e2":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=new Date,i=new Date;function a(t,e,n,o){function s(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return t(e=new Date(+e)),e},s.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(n,r,i){var a,o=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return o;do{o.push(a=new Date(+n)),e(n,i),t(n)}while(a<n&&n<r);return o},s.filter=function(n){return a((function(e){if(e>=e)while(t(e),!n(e))e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)while(++r<=0)while(e(t,-1),!n(t));else while(--r>=0)while(e(t,1),!n(t));}))},n&&(s.count=function(e,a){return r.setTime(+e),i.setTime(+a),t(r),t(i),Math.floor(n(r,i))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(o?function(e){return o(e)%t===0}:function(e){return s.count(0,e)%t===0}):s:null}),s}},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"1ab7":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("eb7e"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){Object(a["assert"])("complex64"===t.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return r["a"].runKernelFunc(e=>{const n=t.shape[t.shape.length-1],r=t.size/n,i=t.as2D(r,n),a=e.fft(i);return a.reshape(t.shape)},e,null,i["Z"])}const u=Object(o["b"])({fft_:s})},"1ba2":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","expm1"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.expm1(e);return n([e]),r},n,null,i["Y"])}const u=Object(o["b"])({expm1_:s})},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,n){var r=n("b622"),i=r("iterator"),a=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){a=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(u){}return n}},"1cc6":function(t,e,n){const r=n("bbfd"),i=(t,e,n)=>{const i=new r(t,n),a=new r(e,n);return i.compare(a)||i.compareBuild(a)};t.exports=i},"1cdc":function(t,e,n){var r=n("342f");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7");function r(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,u,"next",t)}function u(t){r(o,i,a,s,u,"throw",t)}s(void 0)}))}}},"1dde":function(t,e,n){var r=n("d039"),i=n("b622"),a=n("2d00"),o=i("species");t.exports=function(t){return a>=51||!r((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1df6":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","sign"),n={x:e};return r["a"].runKernelFunc(t=>t.sign(e),n,null,i["tc"])}const u=Object(o["b"])({sign_:s})},"1e68":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("36e5"),s=n("54ef"),u=n("c912");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e=0,n=!1,s=!1){const c=Object(a["a"])(t,"x","cumsum"),l=(t,r)=>{const i=Object(o["f"])([e],c.rank);let a=c;null!=i&&(a=Object(u["a"])(c,i));const l=Object(o["g"])(1,c.rank)[0];let f=t.cumsum(a,l,n,s);if(r([c]),null!=i){const t=Object(o["h"])(i);f=Object(u["a"])(f,t)}return f},f={x:c},d={axis:e,exclusive:n,reverse:s};return r["a"].runKernelFunc(l,f,null,i["J"],d)}const l=Object(s["b"])({cumsum_:c})},"1fb5":function(t,e,n){"use strict";e.byteLength=l,e.toByteArray=d,e.fromByteArray=m;for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function l(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function f(t,e,n){return 3*(e+n)/4-n}function d(t){var e,n,r=c(t),o=r[0],s=r[1],u=new a(f(t,o,s)),l=0,d=s>0?o-4:o;for(n=0;n<d;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u}function h(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function p(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(h(r));return i.join("")}function m(t){for(var e,n=t.length,i=n%3,a=[],o=16383,s=0,u=n-i;s<u;s+=o)a.push(p(t,s,s+o>u?u:s+o));return 1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"220f":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","asin"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.asin(e);return n([e]),r},n,null,i["j"])}const u=Object(o["b"])({asin_:s})},2266:function(t,e,n){var r=n("825a"),i=n("e95a"),a=n("50c4"),o=n("0366"),s=n("35a1"),u=n("9bdd"),c=function(t,e){this.stopped=t,this.result=e},l=t.exports=function(t,e,n,l,f){var d,h,p,m,g,b,y,v=o(e,n,l?2:1);if(f)d=t;else{if(h=s(t),"function"!=typeof h)throw TypeError("Target is not iterable");if(i(h)){for(p=0,m=a(t.length);m>p;p++)if(g=l?v(r(y=t[p])[0],y[1]):v(t[p]),g&&g instanceof c)return g;return new c(!1)}d=h.call(t)}b=d.next;while(!(y=b.call(d)).done)if(g=u(d,v,y.value,l),"object"==typeof g&&g&&g instanceof c)return g;return new c(!1)};l.stop=function(t){return new c(!0,t)}},"23bf":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var r,i,a,o,s;n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return l})),function(t){t["R0"]="R0",t["R1"]="R1",t["R2"]="R2",t["R3"]="R3",t["R4"]="R4",t["R5"]="R5",t["R6"]="R6"}(r||(r={})),function(t){t["float32"]="float32",t["int32"]="int32",t["bool"]="int32",t["complex64"]="complex64"}(i||(i={})),function(t){t["float32"]="float32",t["int32"]="int32",t["bool"]="bool",t["complex64"]="complex64"}(a||(a={})),function(t){t["float32"]="float32",t["int32"]="float32",t["bool"]="float32",t["complex64"]="complex64"}(o||(o={})),function(t){t["float32"]="complex64",t["int32"]="complex64",t["bool"]="complex64",t["complex64"]="complex64"}(s||(s={}));const u={float32:o,int32:i,bool:a,complex64:s};function c(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return u[t][e]}function l(t){return c(t,"int32")}},"23cb":function(t,e,n){var r=n("a691"),i=Math.max,a=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):a(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,a=n("9112"),o=n("6eeb"),s=n("ce4e"),u=n("e893"),c=n("94ca");t.exports=function(t,e){var n,l,f,d,h,p,m=t.target,g=t.global,b=t.stat;if(l=g?r:b?r[m]||s(m,{}):(r[m]||{}).prototype,l)for(f in e){if(h=e[f],t.noTargetGet?(p=i(l,f),d=p&&p.value):d=l[f],n=c(g?f:m+(b?".":"#")+f,t.forced),!n&&void 0!==d){if(typeof h===typeof d)continue;u(h,d)}(t.sham||d&&d.sham)&&a(h,"sham",!0),o(l,f,h,t)}}},2410:function(t,e,n){(function(e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var n,r,i;try{n=Map}catch(f){n=function(){}}try{r=Set}catch(f){r=function(){}}try{i=Promise}catch(f){i=function(){}}function a(o,s,u,c,f){"object"===typeof s&&(u=s.depth,c=s.prototype,f=s.includeNonEnumerable,s=s.circular);var d=[],h=[],p="undefined"!=typeof e;function m(o,u){if(null===o)return null;if(0===u)return o;var g,b;if("object"!=typeof o)return o;if(t(o,n))g=new n;else if(t(o,r))g=new r;else if(t(o,i))g=new i((function(t,e){o.then((function(e){t(m(e,u-1))}),(function(t){e(m(t,u-1))}))}));else if(a.__isArray(o))g=[];else if(a.__isRegExp(o))g=new RegExp(o.source,l(o)),o.lastIndex&&(g.lastIndex=o.lastIndex);else if(a.__isDate(o))g=new Date(o.getTime());else{if(p&&e.isBuffer(o))return g=e.allocUnsafe?e.allocUnsafe(o.length):new e(o.length),o.copy(g),g;t(o,Error)?g=Object.create(o):"undefined"==typeof c?(b=Object.getPrototypeOf(o),g=Object.create(b)):(g=Object.create(c),b=c)}if(s){var y=d.indexOf(o);if(-1!=y)return h[y];d.push(o),h.push(g)}for(var v in t(o,n)&&o.forEach((function(t,e){var n=m(e,u-1),r=m(t,u-1);g.set(n,r)})),t(o,r)&&o.forEach((function(t){var e=m(t,u-1);g.add(e)})),o){var x;b&&(x=Object.getOwnPropertyDescriptor(b,v)),x&&null==x.set||(g[v]=m(o[v],u-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(o);for(v=0;v<w.length;v++){var O=w[v],_=Object.getOwnPropertyDescriptor(o,O);(!_||_.enumerable||f)&&(g[O]=m(o[O],u-1),_.enumerable||Object.defineProperty(g,O,{enumerable:!1}))}}if(f){var A=Object.getOwnPropertyNames(o);for(v=0;v<A.length;v++){var j=A[v];_=Object.getOwnPropertyDescriptor(o,j);_&&_.enumerable||(g[j]=m(o[j],u-1),Object.defineProperty(g,j,{enumerable:!1}))}}return g}return"undefined"==typeof s&&(s=!0),"undefined"==typeof u&&(u=1/0),m(o,u)}function o(t){return Object.prototype.toString.call(t)}function s(t){return"object"===typeof t&&"[object Date]"===o(t)}function u(t){return"object"===typeof t&&"[object Array]"===o(t)}function c(t){return"object"===typeof t&&"[object RegExp]"===o(t)}function l(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return a.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},a.__objToStr=o,a.__isDate=s,a.__isArray=u,a.__isRegExp=c,a.__getRegExpFlags=l,a}();t.exports&&(t.exports=n)}).call(this,n("b639").Buffer)},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),a=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},"24b0":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"input","imag"),n=t=>t.imag(e),o={input:e};return r["a"].runKernelFunc(n,o,null,i["ob"])}const u=Object(o["b"])({imag_:s})},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),i=n("825a"),a=n("d039"),o=n("ad6d"),s="toString",u=RegExp.prototype,c=u[s],l=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f=c.name!=s;(l||f)&&r(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in u)?o.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2626:function(t,e,n){"use strict";var r=n("d066"),i=n("9bf2"),a=n("b622"),o=n("83ab"),s=a("species");t.exports=function(t){var e=r(t),n=i.f;o&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},2739:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return l}));var r=n("18e2"),i=n("1738");function a(t){return Object(r["a"])((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/i["e"]}))}var o=a(0),s=a(1),u=a(2),c=a(3),l=a(4),f=a(5),d=a(6);o.range,s.range,u.range,c.range,l.range,f.range,d.range},"29a8":function(t,e,n){"use strict";(function(t){var e=n("7ed6"),r=n("b333");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const i=Object(r["c"])();i.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),i.registerFlag("IS_BROWSER",()=>e["isBrowser"]()),i.registerFlag("IS_NODE",()=>"undefined"!==typeof t&&"undefined"!==typeof t.versions&&"undefined"!==typeof t.versions.node),i.registerFlag("IS_CHROME",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),i.registerFlag("PROD",()=>!1),i.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>i.getBool("DEBUG")),i.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),i.registerFlag("IS_TEST",()=>!1)}).call(this,n("4362"))},"29d8":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},"29f3":function(t,e){var n=Object.prototype,r=n.toString;function i(t){return r.call(t)}t.exports=i},"29fc":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("a3f7"),i=n("eb7e"),a=n("487b"),o=n("54ef"),s=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(r["a"])(t,"t1","dot"),o=Object(r["a"])(e,"t2","dot");i["assert"]((1===n.rank||2===n.rank)&&(1===o.rank||2===o.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${o.rank}.`);const u=1===n.rank?n.size:n.shape[1],c=1===o.rank?o.size:o.shape[0];if(i["assert"](u===c,()=>`Error in dot: inner dimensions of inputs must match, but got ${u} and ${c}.`),1===n.rank&&1===o.rank){const t=Object(s["a"])(n,[1,-1]),e=Object(s["a"])(o,[-1,1]),r=Object(a["a"])(t,e);return Object(s["a"])(r,[])}if(1===n.rank&&2===o.rank){const t=Object(s["a"])(n,[1,-1]),e=Object(s["a"])(o,[o.shape[0],o.shape[1]]),r=Object(a["a"])(t,e);return Object(s["a"])(r,[r.size])}if(2===n.rank&&1===o.rank){const t=Object(s["a"])(o,[-1,1]),e=Object(a["a"])(n,t);return Object(s["a"])(e,[e.size])}{const t=Object(s["a"])(o,[o.shape[0],o.shape[1]]),e=Object(a["a"])(n,t);return e}}const c=Object(o["b"])({dot_:u})},"2a2d":function(t,e,n){"use strict";var r=n("00fb");function i(t){return(e,n)=>Object(r["a"])(t(e),n)}e["a"]=function(t){let e=t,n=t;function r(t,e,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const a=r+i>>>1;n(t[a],e)<0?r=a+1:i=a}return r}function a(t,e,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const a=r+i>>>1;n(t[a],e)>0?i=a:r=a+1}return r}function o(t,n,i,a){null==i&&(i=0),null==a&&(a=t.length);const o=r(t,n,i,a-1);return o>i&&e(t[o-1],n)>-e(t[o],n)?o-1:o}return 1===t.length&&(e=(e,n)=>t(e)-n,n=i(t)),{left:r,center:o,right:a}}},"2a2e":function(t,e,n){const r=n("1cc6"),i=(t,e)=>t.sort((t,n)=>r(t,n,e));t.exports=i},"2a86":function(t,e,n){const r=n("3fce"),i=(t,e,n)=>{try{e=new r(e,n)}catch(i){return!1}return e.test(t)};t.exports=i},"2b10":function(t,e){function n(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;var a=Array(i);while(++r<i)a[r]=t[r+e];return a}t.exports=n},"2b3e":function(t,e,n){var r=n("585a"),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},"2c38":function(t,e,n){"use strict";var r=n("18e2"),i=n("1738"),a=Object(r["a"])((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i["d"])}),(function(t,e){t.setTime(+t+e*i["c"])}),(function(t,e){return(e-t)/i["c"]}),(function(t){return t.getMinutes()}));e["a"]=a;a.range},"2cdf":function(t,e){const n=/^[0-9]+$/,r=(t,e)=>{const r=n.test(t),i=n.test(e);return r&&i&&(t=+t,e=+e),t===e?0:r&&!i?-1:i&&!r?1:t<e?-1:1},i=(t,e)=>r(e,t);t.exports={compareIdentifiers:r,rcompareIdentifiers:i}},"2cf4":function(t,e,n){var r,i,a,o=n("da84"),s=n("d039"),u=n("c6b6"),c=n("0366"),l=n("1be4"),f=n("cc12"),d=n("1cdc"),h=o.location,p=o.setImmediate,m=o.clearImmediate,g=o.process,b=o.MessageChannel,y=o.Dispatch,v=0,x={},w="onreadystatechange",O=function(t){if(x.hasOwnProperty(t)){var e=x[t];delete x[t],e()}},_=function(t){return function(){O(t)}},A=function(t){O(t.data)},j=function(t){o.postMessage(t+"",h.protocol+"//"+h.host)};p&&m||(p=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return x[++v]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(v),v},m=function(t){delete x[t]},"process"==u(g)?r=function(t){g.nextTick(_(t))}:y&&y.now?r=function(t){y.now(_(t))}:b&&!d?(i=new b,a=i.port2,i.port1.onmessage=A,r=c(a.postMessage,a,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(j)||"file:"===h.protocol?r=w in f("script")?function(t){l.appendChild(f("script"))[w]=function(){l.removeChild(this),O(t)}}:function(t){setTimeout(_(t),0)}:(r=j,o.addEventListener("message",A,!1))),t.exports={set:p,clear:m}},"2d00":function(t,e,n){var r,i,a=n("da84"),o=n("342f"),s=a.process,u=s&&s.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]+r[1]):o&&(r=o.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"2f09":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("aed4");let i;const a="Visor",o="tfjs-visor-container";function s(){if("undefined"===typeof document)throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(o)&&null!=i)return i;let t,e=document.getElementById(o);function n(e,n){let i=null;return t=r.VisorComponent.render(e,t,{ref:t=>i=t,surfaceList:Array.from(n.values())}),i}null==e&&(e=document.createElement("div"),e.id=o,document.body.appendChild(e));const a=new Map,s=n(e,a);return i=new u(s,e,a,n),i}e.visor=s;class u{constructor(t,e,n,r){this.visorComponent=t,this.el=e,this.surfaceList=n,this.renderVisor=r}surface(t){const{name:e}=t,n=null==t.tab?a:t.tab;if(null==e||!("string"===typeof e||e instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");const r=Object.assign({},t,{tab:n}),i=`${e}-${n}`;return this.surfaceList.has(i)||this.surfaceList.set(i,r),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(e,n)}isFullscreen(){return this.visorComponent.isFullscreen()}isOpen(){return this.visorComponent.isOpen()}close(){return this.visorComponent.close()}open(){return this.visorComponent.open()}toggle(){return this.visorComponent.toggle()}toggleFullScreen(){return this.visorComponent.toggleFullScreen()}bindKeys(){return this.visorComponent.bindKeys()}unbindKeys(){return this.visorComponent.unbindKeys()}setActiveTab(t){const e=this.visorComponent.state.tabs;if(!e.has(t))throw new Error(`Tab '${t}' does not exist`);this.visorComponent.setState({activeTab:t})}}e.Visor=u},"2fb1":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e=0){const n=Object(a["a"])(t,"x","step"),o={x:n},s={alpha:e};return r["a"].runKernelFunc(t=>t.step(n,e),o,null,i["Fc"],s)}const u=Object(o["b"])({step_:s})},3009:function(t,e,n){"use strict";n.r(e);var r=/[A-Z]/g,i=/^ms-/,a={};function o(t){return"-"+t.toLowerCase()}function s(t){if(a.hasOwnProperty(t))return a[t];var e=t.replace(r,o);return a[t]=i.test(e)?"-"+e:e}e["default"]=s},3034:function(t,e,n){const r=n("bbfd"),i=(t,e,n)=>new r(t,n).compare(new r(e,n));t.exports=i},"30bf":function(t,e,n){"use strict";function r(){}n.r(e),n.d(e,"h",(function(){return s})),n.d(e,"createElement",(function(){return s})),n.d(e,"cloneElement",(function(){return l})),n.d(e,"Component",(function(){return U})),n.d(e,"render",(function(){return W})),n.d(e,"rerender",(function(){return p})),n.d(e,"options",(function(){return i}));var i={},a=[],o=[];function s(t,e){var n,s,u,c,l=o;for(c=arguments.length;c-- >2;)a.push(arguments[c]);e&&null!=e.children&&(a.length||a.push(e.children),delete e.children);while(a.length)if((s=a.pop())&&void 0!==s.pop)for(c=s.length;c--;)a.push(s[c]);else"boolean"===typeof s&&(s=null),(u="function"!==typeof t)&&(null==s?s="":"number"===typeof s?s=String(s):"string"!==typeof s&&(u=!1)),u&&n?l[l.length-1]+=s:l===o?l=[s]:l.push(s),n=u;var f=new r;return f.nodeName=t,f.children=l,f.attributes=null==e?void 0:e,f.key=null==e?void 0:e.key,void 0!==i.vnode&&i.vnode(f),f}function u(t,e){for(var n in e)t[n]=e[n];return t}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function l(t,e){return s(t.nodeName,u(u({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}var f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,d=[];function h(t){!t._dirty&&(t._dirty=!0)&&1==d.push(t)&&(i.debounceRendering||c)(p)}function p(){var t,e=d;d=[];while(t=e.pop())t._dirty&&z(t)}function m(t,e,n){return"string"===typeof e||"number"===typeof e?void 0!==t.splitText:"string"===typeof e.nodeName?!t._componentConstructor&&g(t,e.nodeName):n||t._componentConstructor===e.nodeName}function g(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function b(t){var e=u({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===e[r]&&(e[r]=n[r]);return e}function y(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}function v(t){var e=t.parentNode;e&&e.removeChild(t)}function x(t,e,n,r,i){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)n&&n(null),r&&r(t);else if("class"!==e||i)if("style"===e){if(r&&"string"!==typeof r&&"string"!==typeof n||(t.style.cssText=r||""),r&&"object"===typeof r){if("string"!==typeof n)for(var a in n)a in r||(t.style[a]="");for(var a in r)t.style[a]="number"===typeof r[a]&&!1===f.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var o=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||t.addEventListener(e,O,o):t.removeEventListener(e,O,o),(t._listeners||(t._listeners={}))[e]=r}else if("list"!==e&&"type"!==e&&!i&&e in t)w(t,e,null==r?"":r),null!=r&&!1!==r||t.removeAttribute(e);else{var s=i&&e!==(e=e.replace(/^xlink:?/,""));null==r||!1===r?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!==typeof r&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function w(t,e,n){try{t[e]=n}catch(r){}}function O(t){return this._listeners[t.type](i.event&&i.event(t)||t)}var _=[],A=0,j=!1,k=!1;function C(){var t;while(t=_.pop())i.afterMount&&i.afterMount(t),t.componentDidMount&&t.componentDidMount()}function E(t,e,n,r,i,a){A++||(j=null!=i&&void 0!==i.ownerSVGElement,k=null!=t&&!("__preactattr_"in t));var o=S(t,e,n,r,a);return i&&o.parentNode!==i&&i.appendChild(o),--A||(k=!1,a||C()),o}function S(t,e,n,r,i){var a=t,o=j;if(null!=e&&"boolean"!==typeof e||(e=""),"string"===typeof e||"number"===typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(a=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(a,t),F(t,!0))),a["__preactattr_"]=!0,a;var s=e.nodeName;if("function"===typeof s)return L(t,e,n,r);if(j="svg"===s||"foreignObject"!==s&&j,s=String(s),(!t||!g(t,s))&&(a=y(s,j),t)){while(t.firstChild)a.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(a,t),F(t,!0)}var u=a.firstChild,c=a["__preactattr_"],l=e.children;if(null==c){c=a["__preactattr_"]={};for(var f=a.attributes,d=f.length;d--;)c[f[d].name]=f[d].value}return!k&&l&&1===l.length&&"string"===typeof l[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=l[0]&&(u.nodeValue=l[0]):(l&&l.length||null!=u)&&D(a,l,n,r,k||null!=c.dangerouslySetInnerHTML),T(a,e.attributes,c),j=o,a}function D(t,e,n,r,i){var a,o,s,u,c,l=t.childNodes,f=[],d={},h=0,p=0,g=l.length,b=0,y=e?e.length:0;if(0!==g)for(var x=0;x<g;x++){var w=l[x],O=w["__preactattr_"],_=y&&O?w._component?w._component.__key:O.key:null;null!=_?(h++,d[_]=w):(O||(void 0!==w.splitText?!i||w.nodeValue.trim():i))&&(f[b++]=w)}if(0!==y)for(x=0;x<y;x++){u=e[x],c=null;_=u.key;if(null!=_)h&&void 0!==d[_]&&(c=d[_],d[_]=void 0,h--);else if(!c&&p<b)for(a=p;a<b;a++)if(void 0!==f[a]&&m(o=f[a],u,i)){c=o,f[a]=void 0,a===b-1&&b--,a===p&&p++;break}c=S(c,u,n,r),s=l[x],c&&c!==t&&c!==s&&(null==s?t.appendChild(c):c===s.nextSibling?v(s):t.insertBefore(c,s))}if(h)for(var x in d)void 0!==d[x]&&F(d[x],!1);while(p<=b)void 0!==(c=f[b--])&&F(c,!1)}function F(t,e){var n=t._component;n?P(n):(null!=t["__preactattr_"]&&t["__preactattr_"].ref&&t["__preactattr_"].ref(null),!1!==e&&null!=t["__preactattr_"]||v(t),N(t))}function N(t){t=t.lastChild;while(t){var e=t.previousSibling;F(t,!0),t=e}}function T(t,e,n){var r;for(r in n)e&&null!=e[r]||null==n[r]||x(t,r,n[r],n[r]=void 0,j);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||x(t,r,n[r],n[r]=e[r],j)}var M={};function I(t){var e=t.constructor.name;(M[e]||(M[e]=[])).push(t)}function R(t,e,n){var r,i=M[t.name];if(t.prototype&&t.prototype.render?(r=new t(e,n),U.call(r,e,n)):(r=new U(e,n),r.constructor=t,r.render=$),i)for(var a=i.length;a--;)if(i[a].constructor===t){r.nextBase=i[a].nextBase,i.splice(a,1);break}return r}function $(t,e,n){return this.constructor(t,n)}function B(t,e,n,r,a){t._disable||(t._disable=!0,(t.__ref=e.ref)&&delete e.ref,(t.__key=e.key)&&delete e.key,!t.base||a?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&!1===i.syncComponentUpdates&&t.base?h(t):z(t,1,a)),t.__ref&&t.__ref(t))}function z(t,e,n,r){if(!t._disable){var a,o,s,c=t.props,l=t.state,f=t.context,d=t.prevProps||c,h=t.prevState||l,p=t.prevContext||f,m=t.base,g=t.nextBase,y=m||g,v=t._component,x=!1;if(m&&(t.props=d,t.state=h,t.context=p,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(c,l,f)?x=!0:t.componentWillUpdate&&t.componentWillUpdate(c,l,f),t.props=c,t.state=l,t.context=f),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!x){a=t.render(c,l,f),t.getChildContext&&(f=u(u({},f),t.getChildContext()));var w,O,j=a&&a.nodeName;if("function"===typeof j){var k=b(a);o=v,o&&o.constructor===j&&k.key==o.__key?B(o,k,1,f,!1):(w=o,t._component=o=R(j,k,f),o.nextBase=o.nextBase||g,o._parentComponent=t,B(o,k,0,f,!1),z(o,1,n,!0)),O=o.base}else s=y,w=v,w&&(s=t._component=null),(y||1===e)&&(s&&(s._component=null),O=E(s,a,f,n||!m,y&&y.parentNode,!0));if(y&&O!==y&&o!==v){var S=y.parentNode;S&&O!==S&&(S.replaceChild(O,y),w||(y._component=null,F(y,!1)))}if(w&&P(w),t.base=O,O&&!r){var D=t,N=t;while(N=N._parentComponent)(D=N).base=O;O._component=D,O._componentConstructor=D.constructor}}if(!m||n?_.unshift(t):x||(t.componentDidUpdate&&t.componentDidUpdate(d,h,p),i.afterUpdate&&i.afterUpdate(t)),null!=t._renderCallbacks)while(t._renderCallbacks.length)t._renderCallbacks.pop().call(t);A||r||C()}}function L(t,e,n,r){var i=t&&t._component,a=i,o=t,s=i&&t._componentConstructor===e.nodeName,u=s,c=b(e);while(i&&!u&&(i=i._parentComponent))u=i.constructor===e.nodeName;return i&&u&&(!r||i._component)?(B(i,c,3,n,r),t=i.base):(a&&!s&&(P(a),t=o=null),i=R(e.nodeName,c,n),t&&!i.nextBase&&(i.nextBase=t,o=null),B(i,c,1,n,r),t=i.base,o&&t!==o&&(o._component=null,F(o,!1))),t}function P(t){i.beforeUnmount&&i.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?P(n):e&&(e["__preactattr_"]&&e["__preactattr_"].ref&&e["__preactattr_"].ref(null),t.nextBase=e,v(e),I(t),N(e)),t.__ref&&t.__ref(null)}function U(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{}}function W(t,e,n){return E(n,t,{},!1,e,!1)}u(U.prototype,{setState:function(t,e){var n=this.state;this.prevState||(this.prevState=u({},n)),u(n,"function"===typeof t?t(n,this.props):t),e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),h(this)},forceUpdate:function(t){t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),z(this,2)},render:function(){}});var q={h:s,createElement:s,cloneElement:l,Component:U,render:W,rerender:p,options:i};e["default"]=q},"31bb":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},"320c":function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function s(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(a){return!1}}t.exports=s()?Object.assign:function(t,e){for(var n,s,u=o(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]),n)i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},"342f":function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},"34d7":function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"f",(function(){return b})),n.d(e,"e",(function(){return y})),n.d(e,"d",(function(){return v})),n.d(e,"a",(function(){return x})),n.d(e,"c",(function(){return w}));var r=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i=20,a=3,o=7;function s(t,e,n,i){const a=Object(r["computeStrides"])(e),o=u(t,e,n,a),s=e.length,c=f(t,e,n,a,o),l=["Tensor"];return i&&(l.push("  dtype: "+n),l.push("  rank: "+s),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(c.map(t=>"    "+t).join("\n")),l.join("\n")}function u(t,e,n,i){const a=Object(r["sizeFromShape"])(e),o=i[i.length-1],s=new Array(o).fill(0),u=e.length,l="complex64"===n?d(t):t;if(u>1)for(let r=0;r<a/o;r++){const t=r*o;for(let e=0;e<o;e++)s[e]=Math.max(s[e],c(l[t+e],0,n).length)}return s}function c(t,e,n){let i;return i=Array.isArray(t)?parseFloat(t[0].toFixed(o))+" + "+parseFloat(t[1].toFixed(o))+"j":Object(r["isString"])(t)?`'${t}'`:"bool"===n?l(t):parseFloat(t.toFixed(o)).toString(),Object(r["rightPad"])(i,e)}function l(t){return 0===t?"false":"true"}function f(t,e,n,r,o,s=!0){const u="complex64"===n?2:1,h=e[0],p=e.length;if(0===p){if("complex64"===n){const e=d(t);return[c(e[0],0,n)]}return"bool"===n?[l(t[0])]:[t[0].toString()]}if(1===p){if(h>i){const e=a*u;let r=Array.from(t.slice(0,e)),i=Array.from(t.slice((h-a)*u,h*u));return"complex64"===n&&(r=d(r),i=d(i)),["["+r.map((t,e)=>c(t,o[e],n)).join(", ")+", ..., "+i.map((t,e)=>c(t,o[h-a+e],n)).join(", ")+"]"]}const e="complex64"===n?d(t):Array.from(t);return["["+e.map((t,e)=>c(t,o[e],n)).join(", ")+"]"]}const m=e.slice(1),g=r.slice(1),b=r[0]*u,y=[];if(h>i){for(let e=0;e<a;e++){const r=e*b,i=r+b;y.push(...f(t.slice(r,i),m,n,g,o,!1))}y.push("...");for(let e=h-a;e<h;e++){const r=e*b,i=r+b;y.push(...f(t.slice(r,i),m,n,g,o,e===h-1))}}else for(let i=0;i<h;i++){const e=i*b,r=e+b;y.push(...f(t.slice(e,r),m,n,g,o,i===h-1))}const v=2===p?",":"";y[0]="["+y[0]+v;for(let i=1;i<y.length-1;i++)y[i]=" "+y[i]+v;let x=",\n";for(let i=2;i<p;i++)x+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(s?"":x),y}function d(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h{constructor(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=r["sizeFromShape"](t),null!=n){const t=n.length;r["assert"](t===this.size,()=>`Length of values '${t}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||r["getArrayFromDType"](e,this.size),this.strides=Object(r["computeStrides"])(t)}set(t,...e){0===e.length&&(e=[0]),r["assert"](e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);const n=this.locToIndex(e);this.values[n]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e]){const e=`Requested out of range element at ${t}.   Buffer shape=`+this.shape;throw new Error(e)}e++}let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return p().makeTensor(this.values,this.shape,this.dtype)}}let p=null,m=null,g=null;function b(t){p=t}function y(t){m=t}function v(t){g=t}class x{constructor(t,e,n,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=r["sizeFromShape"](t),this.strides=Object(r["computeStrides"])(t),this.dataId=n,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return m.buffer(this.shape,this.dtype,t)}bufferSync(){return m.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Object(r["toNestedArray"])(this.shape,t)}arraySync(){return Object(r["toNestedArray"])(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const t=p().read(this.dataId);if("string"===this.dtype){const n=await t;try{return n.map(t=>r["decodeString"](t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=p().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>r["decodeString"](t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await p().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(p().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return m.print(this,t)}clone(){return this.throwIfDisposed(),m.clone(this)}toString(t=!1){const e=this.dataSync();return s(e,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),m.cast(this,t)}variable(t=!0,e,n){return this.throwIfDisposed(),p().makeVariable(this,t,e,n)}}Object.defineProperty(x,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed});class w extends x{constructor(t,e,n,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=n}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!r["arraysEqual"](t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);p().disposeTensor(this),this.dataId=t.dataId,p().incRef(this,null)}dispose(){p().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(w,Symbol.hasInstance,{value:t=>t instanceof x&&null!=t.assign&&t.assign instanceof Function})},"350f":function(t,e,n){"use strict";(function(t){n.d(e,"f",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return g})),n.d(e,"g",(function(){return b}));var r=n("0777"),i=n("357d"),a=n("eb7e"),o=n("9847");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const s=4;async function u(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);for(let o=0;o<i.length;++o){const a=i[o],u=Array.isArray(t)?t[o].tensor:t[a];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype&&"complex64"!==u.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);const c={name:a,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){const t=new Promise(async t=>{const e=await u.bytes(),n=e.reduce((t,e)=>t+e.length,0)+s*e.length,r=new Uint8Array(n);let i=0;for(let a=0;a<e.length;a++){const t=e[a],n=new Uint8Array(new Uint32Array([t.length]).buffer);r.set(n,i),i+=s,r.set(t,i),i+=t.length}t(r)});r.push(t)}else r.push(u.data());null!=e&&(c.group=e),n.push(c)}const a=await Promise.all(r);return{data:l(a),specs:n}}function c(t,e){const n={};let u,c=0;for(const l of e){const e=l.name,f=l.dtype,d=l.shape,h=Object(a["sizeFromShape"])(d);let p;if("quantization"in l){const n=l.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${l.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${l.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==f)throw new Error(`Weight ${l.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${f}.`)}const r=o["a"][n.dtype],i=t.slice(c,c+h*r),a="uint8"===n.dtype?new Uint8Array(i):new Uint16Array(i);if("float32"===f)if("uint8"===n.dtype||"uint16"===n.dtype){p=new Float32Array(a.length);for(let t=0;t<a.length;t++){const e=a[t];p[t]=e*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===u&&(u=w()),p=u(a)}else{if("int32"!==f)throw new Error(`Unsupported dtype in weight '${e}': ${f}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);p=new Int32Array(a.length);for(let t=0;t<a.length;t++){const e=a[t];p[t]=Math.round(e*n.scale+n.min)}}c+=h*r}else if("string"===f){const e=Object(a["sizeFromShape"])(l.shape);p=[];for(let n=0;n<e;n++){const e=new Uint32Array(t.slice(c,c+s))[0];c+=s;const n=new Uint8Array(t.slice(c,c+e));p.push(n),c+=e}}else{const a=o["a"][f],s=t.slice(c,c+h*a);if("float32"===f)p=new Float32Array(s);else if("int32"===f)p=new Int32Array(s);else if("bool"===f)p=new Uint8Array(s);else{if("complex64"!==f)throw new Error(`Unsupported dtype in weight '${e}': ${f}`);{p=new Float32Array(s);const t=new Float32Array(p.length/2),a=new Float32Array(p.length/2);for(let e=0;e<t.length;e++)t[e]=p[2*e],a[e]=p[2*e+1];const o=Object(i["a"])(t,d,"float32"),u=Object(i["a"])(a,d,"float32");n[e]=Object(r["a"])(o,u)}}c+=h*a}"complex64"!==f&&(n[e]=Object(i["a"])(p,d,f))}return n}function l(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));let e=0;const n=[];t.forEach(t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)});const r=new Uint8Array(e);let i=0;return n.forEach(t=>{r.set(new Uint8Array(t.buffer),i),i+=t.byteLength}),r.buffer}const f="undefined"!==typeof t&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function d(e){return f?t.byteLength(e):new Blob([e]).size}function h(e){if(f)return t.from(e).toString("base64");const n=new Uint8Array(e);let r="";for(let t=0,i=n.length;t<i;t++)r+=String.fromCharCode(n[t]);return btoa(r)}function p(e){if(f){const n=t.from(e,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;++t)r.set([n.charCodeAt(t)],t);return r.buffer}function m(t){if(1===t.length)return t[0];let e=0;t.forEach(t=>{e+=t.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function g(t){const e="/";t=t.trim();while(t.endsWith(e))t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function b(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:d(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:d(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function y(){const t=t=>{let e=t<<13,n=0;while(0===(8388608&e))n-=8388608,e<<=1;return e&=-8388609,n+=947912704,e|n},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function v(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function x(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function w(){const t=y(),e=v(),n=x();return r=>{const i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let o=0;o<r.length;o++){const i=r[o],s=t[n[i>>10]+(1023&i)]+e[i>>10];a[o]=s}return new Float32Array(i)}}}).call(this,n("b639").Buffer)},3512:function(t,e,n){"use strict";var r={},i={},a=34,o=10,s=13;function u(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function c(t,e){var n=u(t);return function(r,i){return e(n(r),i,t)}}function l(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function f(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function d(t){return t<0?"-"+f(-t,6):t>9999?"+"+f(t,6):f(t,4)}function h(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":d(t.getUTCFullYear(),4)+"-"+f(t.getUTCMonth()+1,2)+"-"+f(t.getUTCDate(),2)+(i?"T"+f(e,2)+":"+f(n,2)+":"+f(r,2)+"."+f(i,3)+"Z":r?"T"+f(e,2)+":"+f(n,2)+":"+f(r,2)+"Z":n||e?"T"+f(e,2)+":"+f(n,2)+"Z":"")}e["a"]=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function f(t,e){var n,r,i=d(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?c(t,e):u(t)}));return i.columns=r||[],i}function d(t,e){var u,c=[],l=t.length,f=0,d=0,h=l<=0,p=!1;function m(){if(h)return i;if(p)return p=!1,r;var e,u,c=f;if(t.charCodeAt(c)===a){while(f++<l&&t.charCodeAt(f)!==a||t.charCodeAt(++f)===a);return(e=f)>=l?h=!0:(u=t.charCodeAt(f++))===o?p=!0:u===s&&(p=!0,t.charCodeAt(f)===o&&++f),t.slice(c+1,e-1).replace(/""/g,'"')}while(f<l){if((u=t.charCodeAt(e=f++))===o)p=!0;else if(u===s)p=!0,t.charCodeAt(f)===o&&++f;else if(u!==n)continue;return t.slice(c,e)}return h=!0,t.slice(c,l)}t.charCodeAt(l-1)===o&&--l,t.charCodeAt(l-1)===s&&--l;while((u=m())!==i){var g=[];while(u!==r&&u!==i)g.push(u),u=m();e&&null==(g=e(g,d++))||c.push(g)}return c}function p(e,n){return e.map((function(e){return n.map((function(t){return v(e[t])})).join(t)}))}function m(e,n){return null==n&&(n=l(e)),[n.map(v).join(t)].concat(p(e,n)).join("\n")}function g(t,e){return null==e&&(e=l(t)),p(t,e).join("\n")}function b(t){return t.map(y).join("\n")}function y(e){return e.map(v).join(t)}function v(t){return null==t?"":t instanceof Date?h(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:f,parseRows:d,format:m,formatBody:g,formatRows:b,formatRow:y,formatValue:v}}},"357d":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("a3f7"),i=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e,n){const a=Object(r["c"])(t,n);return Object(i["a"])(t,e,a,n)}},"35a1":function(t,e,n){var r=n("f5df"),i=n("3f8c"),a=n("b622"),o=a("iterator");t.exports=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},"35c9":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"x","reshape",null),s={x:n},u={shape:e},c=(t,r)=>(e=o["inferFromImplicitShape"](e,n.size),o["assert"](n.size===o["sizeFromShape"](e),()=>"new shape and old shape must have the same number of elements."),r([n]),t.reshape(n,e));return r["a"].runKernelFunc(c,s,null,i["gc"],u)}const c=Object(s["b"])({reshape_:u})},3601:function(t,e,n){"use strict";var r=/-(.)/g;function i(t){return t.replace(r,(function(t,e){return e.toUpperCase()}))}t.exports=i},"364e":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n="NHWC"){const s=Object(a["a"])(t,"x","depthToSpace"),u="NHWC"===n?s.shape[1]:s.shape[2],c="NHWC"===n?s.shape[2]:s.shape[3],l="NHWC"===n?s.shape[3]:s.shape[1];o["assert"](u*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${e}  for depthToSpace with input shape\n    ${s.shape}`),o["assert"](c*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${c} and ${e} for depthToSpace with input shape\n        ${s.shape}`),o["assert"](l%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${l} for depthToSpace with input shape ${s.shape}`);const f=t=>t.depthToSpace(s,e,n),d={x:s},h={blockSize:e,dataFormat:n};return r["a"].runKernelFunc(f,d,null,i["K"],h)}const c=Object(s["b"])({depthToSpace_:u})},"36e5":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"g",(function(){return f}));var r=n("eb7e");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function a(t,e,n){const r=t.length+e.length,i=[];let a=0,o=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(t[a++]):i.push(e[o++]);return i}function o(t,e){const n=[],r=t.length;for(let a=0;a<r;a++)-1===e.indexOf(a)&&n.push(t[a]);const i=e.map(e=>t[e]);return[n,i]}function s(t,e){const n=e.map(t=>1);return a(t,n,e)}function u(t,e,n){r["assert"](i(e,n),()=>t+" supports only inner-most axes for now. "+`Got axes ${e} and rank-${n} input.`)}function c(t,e){if(i(t,e))return null;const n=[];for(let r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(t=>n.push(t)),n}function l(t){return t.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function f(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}},3729:function(t,e,n){var r=n("9e69"),i=n("00fd"),a=n("29f3"),o="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;function c(t){return null==t?void 0===t?s:o:u&&u in Object(t)?i(t):a(t)}t.exports=c},"37e8":function(t,e,n){var r=n("83ab"),i=n("9bf2"),a=n("825a"),o=n("df75");t.exports=r?Object.defineProperties:function(t,e){a(t);var n,r=o(e),s=r.length,u=0;while(s>u)i.f(t,n=r[u++],e[n]);return t}},3835:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return u}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function i(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)if(n.push(o.value),e&&n.length===e)break}catch(u){i=!0,a=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw a}}return n}}n("a630"),n("fb6a"),n("b0c0"),n("25f0");function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){return r(t)||i(t,e)||o(t,e)||s()}},"38cb":function(t,e,n){const r=n("bbfd"),i=n("6d43"),{ANY:a}=i,o=n("3fce"),s=n("2a86"),u=n("bac4"),c=n("38fa"),l=n("68d3"),f=n("a2a3"),d=(t,e,n,d)=>{let h,p,m,g,b;switch(t=new r(t,d),e=new o(e,d),n){case">":h=u,p=l,m=c,g=">",b=">=";break;case"<":h=c,p=f,m=u,g="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(t,e,d))return!1;for(let r=0;r<e.set.length;++r){const n=e.set[r];let o=null,s=null;if(n.forEach(t=>{t.semver===a&&(t=new i(">=0.0.0")),o=o||t,s=s||t,h(t.semver,o.semver,d)?o=t:m(t.semver,s.semver,d)&&(s=t)}),o.operator===g||o.operator===b)return!1;if((!s.operator||s.operator===g)&&p(t,s.semver))return!1;if(s.operator===b&&m(t,s.semver))return!1}return!0};t.exports=d},"38fa":function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)<0;t.exports=i},"3a44":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=0){const n=Object(a["a"])(t,"x","unstack");o["assert"](e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`),e<0&&(e+=n.shape.length);const s={value:n},u={axis:e},c=t=>t.unstack(n,e);return r["a"].runKernelFunc(c,s,null,i["Pc"],u)}const c=Object(s["b"])({unstack_:u})},"3b28":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){const s=Object(a["a"])(t,"x","batchToSpaceND"),u=e.reduce((t,e)=>t*e);o["assert"](s.rank>=1+e.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${e.length}`),o["assert"](n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),o["assert"](s.shape[0]%u===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${u}`);const c=t=>t.batchToSpaceND(s,e,n),l={x:s},f={blockShape:e,crops:n};return r["a"].runKernelFunc(c,l,null,i["t"],f)}const c=Object(s["b"])({batchToSpaceND_:u})},"3bb7":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","neg"),n={x:e};return r["a"].runKernelFunc(t=>t.neg(e),n,null,i["Pb"])}const u=Object(o["b"])({neg_:s})},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3bfc":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},"3c35":function(t,e){(function(e){t.exports=e}).call(this,{})},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,i=n("69f3"),a=n("7dd0"),o="String Iterator",s=i.set,u=i.getterFor(o);a(String,"String",(function(t){s(this,{type:o,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},"3d50":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},"3e9f":function(t,e,n){"use strict";function r(t,e,n,r,i){for(var a=0,o=t.length;a<o;++a){var s=t[a](e,n,r,i);if(s)return s}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e["default"]},"3efc":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("a3f7"),a=n("54ef"),o=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e,n,a=!1){const s=Object(i["a"])(t,"logits","multinomial"),u=s.size,c=s.rank;if(u<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+u+".");if(c>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+c);n=n||Math.random();const l=1===c?Object(o["a"])(s,[1,-1]):s,f=r["a"].runKernelFunc(t=>t.multinomial(l,a,e,n),{logits2D:l});return 1===c?Object(o["a"])(f,[f.size]):f}const u=Object(a["b"])({multinomial_:s})},"3f8c":function(t,e){t.exports={}},"3fce":function(t,e,n){class r{constructor(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof r)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new r(t.raw,e);if(t instanceof i)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(t=>this.parseRange(t.trim())).filter(t=>t.length),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){const e=this.options.loose;t=t.trim();const n=e?s[u.HYPHENRANGELOOSE]:s[u.HYPHENRANGE];t=t.replace(n,_(this.options.includePrerelease)),a("hyphen replace",t),t=t.replace(s[u.COMPARATORTRIM],c),a("comparator trim",t,s[u.COMPARATORTRIM]),t=t.replace(s[u.TILDETRIM],l),t=t.replace(s[u.CARETTRIM],f),t=t.split(/\s+/).join(" ");const r=e?s[u.COMPARATORLOOSE]:s[u.COMPARATOR];return t.split(" ").map(t=>h(t,this.options)).join(" ").split(/\s+/).map(t=>O(t,this.options)).filter(this.options.loose?t=>!!t.match(r):()=>!0).map(t=>new i(t,this.options))}intersects(t,e){if(!(t instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>d(n,e)&&t.set.some(t=>d(t,e)&&n.every(n=>t.every(t=>n.intersects(t,e)))))}test(t){if(!t)return!1;if("string"===typeof t)try{t=new o(t,this.options)}catch(e){return!1}for(let n=0;n<this.set.length;n++)if(A(this.set[n],t,this.options))return!0;return!1}}t.exports=r;const i=n("6d43"),a=n("b802"),o=n("bbfd"),{re:s,t:u,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:f}=n("8cb5"),d=(t,e)=>{let n=!0;const r=t.slice();let i=r.pop();while(n&&r.length)n=r.every(t=>i.intersects(t,e)),i=r.pop();return n},h=(t,e)=>(a("comp",t,e),t=b(t,e),a("caret",t),t=m(t,e),a("tildes",t),t=v(t,e),a("xrange",t),t=w(t,e),a("stars",t),t),p=t=>!t||"x"===t.toLowerCase()||"*"===t,m=(t,e)=>t.trim().split(/\s+/).map(t=>g(t,e)).join(" "),g=(t,e)=>{const n=e.loose?s[u.TILDELOOSE]:s[u.TILDE];return t.replace(n,(e,n,r,i,o)=>{let s;return a("tilde",t,e,n,r,i,o),p(n)?s="":p(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:p(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,a("tilde return",s),s})},b=(t,e)=>t.trim().split(/\s+/).map(t=>y(t,e)).join(" "),y=(t,e)=>{a("caret",t,e);const n=e.loose?s[u.CARETLOOSE]:s[u.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(e,n,i,o,s)=>{let u;return a("caret",t,e,n,i,o,s),p(n)?u="":p(i)?u=`>=${n}.0.0${r} <${+n+1}.0.0-0`:p(o)?u="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:s?(a("replaceCaret pr",s),u="0"===n?"0"===i?`>=${n}.${i}.${o}-${s} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${s} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${s} <${+n+1}.0.0-0`):(a("no pr"),u="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),a("caret return",u),u})},v=(t,e)=>(a("replaceXRanges",t,e),t.split(/\s+/).map(t=>x(t,e)).join(" ")),x=(t,e)=>{t=t.trim();const n=e.loose?s[u.XRANGELOOSE]:s[u.XRANGE];return t.replace(n,(n,r,i,o,s,u)=>{a("xRange",t,n,r,i,o,s,u);const c=p(i),l=c||p(o),f=l||p(s),d=f;return"="===r&&d&&(r=""),u=e.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(l&&(o=0),s=0,">"===r?(r=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(u="-0"),n=`${r+i}.${o}.${s}${u}`):l?n=`>=${i}.0.0${u} <${+i+1}.0.0-0`:f&&(n=`>=${i}.${o}.0${u} <${i}.${+o+1}.0-0`),a("xRange return",n),n})},w=(t,e)=>(a("replaceStars",t,e),t.trim().replace(s[u.STAR],"")),O=(t,e)=>(a("replaceGTE0",t,e),t.trim().replace(s[e.includePrerelease?u.GTE0PRE:u.GTE0],"")),_=t=>(e,n,r,i,a,o,s,u,c,l,f,d,h)=>(n=p(r)?"":p(i)?`>=${r}.0.0${t?"-0":""}`:p(a)?`>=${r}.${i}.0${t?"-0":""}`:o?">="+n:`>=${n}${t?"-0":""}`,u=p(c)?"":p(l)?`<${+c+1}.0.0-0`:p(f)?`<${c}.${+l+1}.0-0`:d?`<=${c}.${l}.${f}-${d}`:t?`<${c}.${l}.${+f+1}-0`:"<="+u,`${n} ${u}`.trim()),A=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let n=0;n<t.length;n++)if(a(t[n].semver),t[n].semver!==i.ANY&&t[n].semver.prerelease.length>0){const r=t[n].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}},4149:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("ce1a"),a=n("6180");function o(t){if(!Array.isArray(t))throw new Error("input must be an array");if(0===t.length)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};const e=t.length;let n=-1/0,r=1/0,i=0,a=0,o=0;for(let u=0;u<e;u++){const e=t[u];e>n&&(n=e),e<r&&(r=e),0===e&&(i+=1),isNaN(e)?a+=1:isFinite(e)||(o+=1)}const s={numVals:e,numZeros:i,numNans:a,max:n,min:r,numInfs:o};return s.max===-1/0&&(s.max=NaN),s.min===1/0&&(s.min=NaN),s}function s(t){return r(this,void 0,void 0,(function*(){const[e,n,r]=i.tidy(()=>{const e=i.scalar(0,t.dtype),n=t.min(),r=t.max(),a=t.equal(e).sum();return[n,r,a]});return Promise.all([t.data(),e.data(),n.data(),r.data()]).then(([t,e,n,r])=>{const i=t.length;let a=0,o=0;for(let l=0;l<i;l++){const e=t[l];isNaN(e)?a+=1:isFinite(e)||(o+=1)}let s=e[0],u=n[0];a===i&&(s=NaN,u=NaN);const c={numVals:i,numZeros:r[0],numNans:a,min:s,max:u,numInfs:o};return c})}))}function u(t,e,n,o){return r(this,void 0,void 0,(function*(){a.assert(1===t.rank,"labels must be a 1D tensor"),a.assert(1===e.rank,"predictions must be a 1D tensor"),a.assert(t.size===e.size,"labels and predictions must be the same length"),null!=o&&a.assert(o.size===e.size,"labels and predictions must be the same length");const r=t.cast("int32"),s=e.cast("int32");null==n&&(n=i.tidy(()=>{const t=i.maximum(r.max(),s.max()).cast("int32");return t.dataSync()[0]+1}));let u=Promise.resolve(null);return null!=o&&(u=o.data()),Promise.all([r.data(),s.data(),u]).then(([t,e,r])=>{const i=Array(n).fill(0);for(let a=0;a<n;a++)i[a]=Array(n).fill(0);for(let n=0;n<t.length;n++){const a=t[n],o=e[n];i[a][o]+=null!=r?r[n]:1}return i})}))}function c(t,e){return r(this,void 0,void 0,(function*(){a.assertShapesMatch(t.shape,e.shape,"Error computing accuracy.");const n=t.equal(e),r=n.mean(),o=(yield r.data())[0];return i.dispose([n,r]),o}))}function l(t,e,n){return r(this,void 0,void 0,(function*(){return a.assert(1===t.rank,"labels must be a 1D tensor"),a.assert(1===e.rank,"predictions must be a 1D tensor"),a.assert(t.size===e.size,"labels and predictions must be the same length"),null==n&&(n=i.tidy(()=>i.maximum(t.max(),e.max()).dataSync()[0]+1)),Promise.all([t.data(),e.data()]).then(([t,e])=>{const r=Array(n).fill(0),i=Array(n).fill(0);for(let n=0;n<t.length;n++){const a=t[n],o=e[n];r[a]+=1,a===o&&(i[a]+=1)}const a=[];for(let n=0;n<r.length;n++)a.push({count:r[n],accuracy:0===r[n]?0:i[n]/r[n]});return a})}))}e.arrayStats=o,e.tensorStats=s,e.confusionMatrix=u,e.accuracy=c,e.perClassAccuracy=l},"415b":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("eb7e");function i(t,e,n=0){let i=[];if("number"===typeof e)Object(r["assert"])(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),i=new Array(e).fill(t.shape[n]/e);else{const a=e.reduce((t,e)=>(-1===e&&(t+=1),t),0);Object(r["assert"])(a<=1,()=>"There should be only one negative value in split array.");const o=e.indexOf(-1);if(-1!==o){const r=e.reduce((t,e)=>e>0?t+e:t);e[o]=t.shape[n]-r}Object(r["assert"])(t.shape[n]===e.reduce((t,e)=>t+e),()=>"The sum of sizes must match the size of the axis dimension."),i=e}return i}},4160:function(t,e,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},4184:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(o["a"])(t,"a","squaredDifference"),u=Object(o["a"])(e,"b","squaredDifference");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(s["a"])(n.shape,u.shape);const c=(t,e)=>{const r=t.squaredDifference(n,u);return e([n,u]),r},l={a:n,b:u},f={};return r["a"].runKernelFunc(c,l,null,i["Ec"],f)}const l=Object(u["b"])({squaredDifference_:c})},4289:function(t,e,n){},"428f":function(t,e,n){var r=n("da84");t.exports=r},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},4392:function(t,e,n){const r=n("3034"),i=(t,e,n)=>0===r(t,e,n);t.exports=i},"44ad":function(t,e,n){var r=n("d039"),i=n("c6b6"),a="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?a.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),i=n("7c73"),a=n("9bf2"),o=r("unscopables"),s=Array.prototype;void 0==s[o]&&a.f(s,o,{configurable:!0,value:i(null)}),t.exports=function(t){s[o][t]=!0}},"44de":function(t,e,n){var r=n("da84");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},4516:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("36e5"),u=n("54ef"),c=n("35c9"),l=n("c912");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t,e=null,n=!1){let u=Object(a["a"])(t,"x","any","bool");const f=t=>{const r=Object(o["parseAxisParam"])(e,u.shape);let i=r;const a=Object(s["f"])(i,u.rank);null!=a&&(u=Object(l["a"])(u,a),i=Object(s["g"])(i.length,u.rank));const f=t.any(u,i);if(n){const t=Object(s["e"])(f.shape,r);return Object(c["a"])(f,t)}return f},d={x:u},h={axis:e,keepDims:n};return r["a"].runKernelFunc(f,d,null,i["g"],h)}const d=Object(u["b"])({any_:f})},"45bb":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef"),u=n("415b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n=0){const s=Object(a["a"])(t,"x","split"),c=(t,r)=>{const i=Object(o["parseAxisParam"])(n,s.shape)[0],a=Object(u["a"])(s,e,i);return t.split(s,a,i)},l={x:s},f={numOrSizeSplits:e,axis:n};return r["a"].runKernelFunc(c,l,null,i["Bc"],f)}const l=Object(s["b"])({split_:c})},4611:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(o["a"])(t,"a","mod"),s=Object(o["a"])(e,"b","mod");[n,s]=Object(a["makeTypesMatch"])(n,s);const u=(t,e)=>{const r=t.mod(n,s);return e([n,s]),r},c={a:n,b:s};return r["a"].runKernelFunc(u,c,null,i["Nb"])}const c=Object(s["b"])({mod_:u})},4615:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","acosh"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.acosh(e);return n([e]),r},n,null,i["c"])}const u=Object(o["b"])({acosh_:s})},"46a8":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("deb3"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t){const e=Object(a["a"])(t,"x","relu6"),n=(t,n)=>(n([e]),"bool"===e.dtype?Object(o["a"])(e,"int32"):t.relu6(e)),s={x:e};return r["a"].runKernelFunc(n,s,null,i["fc"])}const c=Object(s["b"])({relu6_:u})},"46b1":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","log1p"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.log1p(e);return n([e]),r},n,null,i["yb"])}const u=Object(o["b"])({log1p_:s})},"46b8":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("6ae2"),i=n("c05b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e,n){const a={shape:t,value:e,dtype:n};return r["a"].runKernelFunc(r=>r.fill(t,e,n),{},null,i["ab"],a)}},"46cc":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
var r,i;n.d(e,"a",(function(){return r})),function(t){t[t["DT_INVALID"]=0]="DT_INVALID",t[t["DT_FLOAT"]=1]="DT_FLOAT",t[t["DT_DOUBLE"]=2]="DT_DOUBLE",t[t["DT_INT32"]=3]="DT_INT32",t[t["DT_UINT8"]=4]="DT_UINT8",t[t["DT_INT16"]=5]="DT_INT16",t[t["DT_INT8"]=6]="DT_INT8",t[t["DT_STRING"]=7]="DT_STRING",t[t["DT_COMPLEX64"]=8]="DT_COMPLEX64",t[t["DT_INT64"]=9]="DT_INT64",t[t["DT_BOOL"]=10]="DT_BOOL",t[t["DT_QINT8"]=11]="DT_QINT8",t[t["DT_QUINT8"]=12]="DT_QUINT8",t[t["DT_QINT32"]=13]="DT_QINT32",t[t["DT_BFLOAT16"]=14]="DT_BFLOAT16",t[t["DT_FLOAT_REF"]=101]="DT_FLOAT_REF",t[t["DT_DOUBLE_REF"]=102]="DT_DOUBLE_REF",t[t["DT_INT32_REF"]=103]="DT_INT32_REF",t[t["DT_UINT8_REF"]=104]="DT_UINT8_REF",t[t["DT_INT16_REF"]=105]="DT_INT16_REF",t[t["DT_INT8_REF"]=106]="DT_INT8_REF",t[t["DT_STRING_REF"]=107]="DT_STRING_REF",t[t["DT_COMPLEX64_REF"]=108]="DT_COMPLEX64_REF",t[t["DT_INT64_REF"]=109]="DT_INT64_REF",t[t["DT_BOOL_REF"]=110]="DT_BOOL_REF",t[t["DT_QINT8_REF"]=111]="DT_QINT8_REF",t[t["DT_QUINT8_REF"]=112]="DT_QUINT8_REF",t[t["DT_QINT32_REF"]=113]="DT_QINT32_REF",t[t["DT_BFLOAT16_REF"]=114]="DT_BFLOAT16_REF"}(r||(r={})),function(t){let e;(function(t){t[t["LEGACY"]=0]="LEGACY",t[t["V1"]=1]="V1",t[t["V2"]=2]="V2"})(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(i||(i={}))},"473f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=n("3009"),i=a(r);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){return(0,i.default)(t)}t.exports=e["default"]},4749:function(t,e,n){"use strict";n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return p})),n.d(e,"d",(function(){return m}));var r=n("526f"),i=n("9e38"),a=n("a5aa"),o=n("520f"),s=n("917a"),u=n("46a8"),c=n("35c9"),l=n("2fb1"),f=n("e053");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function d(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return Object(a["a"])(t,Object(l["a"])(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function h(t,e){let n=e;const i=r["c"](t.shape,e.shape);return i.length>0&&(n=Object(f["a"])(n,i)),Object(c["a"])(n,t.shape)}function p(t,e,n){if("linear"===e)return t;if("relu"===e)return Object(s["a"])(t);if("elu"===e)return Object(i["a"])(t);if("relu6"===e)return Object(u["a"])(t);if("prelu"===e)return Object(o["a"])(t,n);throw new Error(`Unknown fused activation ${e}.`)}const m=(t,e)=>{const n=t>0;return!n||"linear"===e}},"483a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StyleSheet=p;var r=n("320c"),i=a(r);function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t){return t[t.length-1]}function u(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}var c="undefined"!==typeof window,l=!1,f=!1,d=function(){if(c){var t=document.createElement("div");return t.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1===t.getElementsByTagName("i").length}}();function h(){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-glamor",""),t.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.speedy,n=void 0===e?!l&&!f:e,r=t.maxLength,i=void 0===r?c&&d?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,i.default)(p.prototype,{getSheet:function(){return u(s(this.tags))},inject:function(){var t=this;if(this.injected)throw new Error("already injected stylesheet!");c?this.tags[0]=h():this.sheet={cssRules:[],insertRule:function(e){t.sheet.cssRules.push({cssText:e})}},this.injected=!0},speedy:function(t){if(0!==this.ctr)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+t+") earlier in your app, or call flush() before speedy("+t+")");this.isSpeedy=!!t},_insert:function(t){try{var e=this.getSheet();e.insertRule(t,-1!==t.indexOf("@import")?0:e.cssRules.length)}catch(n){l&&console.warn("whoops, illegal rule inserted",t)}},insert:function(t){if(c)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(t);else if(-1!==t.indexOf("@import")){var e=s(this.tags);e.insertBefore(document.createTextNode(t),e.firstChild)}else s(this.tags).appendChild(document.createTextNode(t));else this.sheet.insertRule(t,-1!==t.indexOf("@import")?0:this.sheet.cssRules.length);return this.ctr++,c&&this.ctr%this.maxLength===0&&this.tags.push(h()),this.ctr-1},delete:function(t){return this.replace(t,"")},flush:function(){c?(this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!c)return this.sheet.cssRules;var t=[];return this.tags.forEach((function(e){return t.splice.apply(t,[t.length,0].concat(o(Array.from(u(e).cssRules))))})),t}})},4840:function(t,e,n){var r=n("825a"),i=n("1c0b"),a=n("b622"),o=a("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},4850:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t){o["assert"](Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),o["assert"](t.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+t.length);const e=t.map((t,e)=>Object(a["a"])(t,"tensors"+e,"addN")),n=e[0];e.forEach(t=>{if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(t=>{if(!o["arraysEqual"](t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const s=(t,n)=>{const r=t.addN(e);return n(e),r},u=e;return r["a"].runKernelFunc(s,u,null,i["e"])}const c=Object(s["b"])({addN_:u})},4856:function(t,e,n){"use strict";function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e["default"]},"487b":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("eb7e"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n=!1,u=!1){let l=Object(o["a"])(t,"a","matMul"),f=Object(o["a"])(e,"b","matMul");[l,f]=Object(a["makeTypesMatch"])(l,f),s["assert"](l.rank>=2&&f.rank>=2&&l.rank===f.rank,()=>`Error in matMul: inputs must have the same rank of at least 2, got ranks ${l.rank} and ${f.rank}.`);const d=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=u?f.shape[f.rank-1]:f.shape[f.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],m=u?f.shape[f.rank-2]:f.shape[f.rank-1],g=l.shape.slice(0,-2),b=f.shape.slice(0,-2),y=s["sizeFromShape"](g),v=s["sizeFromShape"](b);s["assert"](s["arraysEqual"](g,b),()=>`Error in matMul: outer dimensions (${g}) and (${b}) of Tensors with shapes ${l.shape} and `+f.shape+" must match."),s["assert"](d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${l.shape} and ${f.shape} and transposeA=${n} and transposeB=${u} must match.`);const x=l.shape.slice(0,-2).concat([p,m]),w=n?Object(c["a"])(l,[y,d,p]):Object(c["a"])(l,[y,p,d]),O=u?Object(c["a"])(f,[v,m,h]):Object(c["a"])(f,[v,h,m]),_=(t,e)=>(e([w,O]),t.batchMatMul(w,O,n,u)),A={a:w,b:O},j={transposeA:n,transposeB:u},k=r["a"].runKernelFunc(_,A,null,i["s"],j);return Object(c["a"])(k,x)}const f=Object(u["b"])({matMul_:l})},"48db":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("f0a9"),s=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(a["a"])(t,"broadcastTo","x");const s=n.shape;if(e.some(t=>!(t>0)||t%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const t=n.shape.slice();while(t.length<e.length)t.unshift(1);n=Object(u["a"])(n,t)}const c=n.shape,l=Array.from(e);for(let r=e.length-1;r>=0;r--)if(c[r]===e[r])l[r]=1;else if(1!==n.shape[r])throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${e}].`);const f=l.map((t,e)=>t>1?e:-1).filter(t=>t>=0);if(0===f.length)return Object(o["a"])(n);const d=t=>t.tile(n,l),h={x:n},p={shape:e,inputShape:c};return r["a"].runKernelFunc(d,h,null,i["u"],p)}const l=Object(s["b"])({broadcastTo_:c})},4930:function(t,e,n){var r=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"4b05":function(t,e,n){"use strict";(function(t){var e=n("b333");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r={importFetch:()=>n(1)};let i;class a{constructor(){this.util=n(2),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return null!=Object(e["c"])().global.fetch?Object(e["c"])().global.fetch(t,n):(null==i&&(i=r.importFetch()),i(t,n))}now(){const e=t.hrtime();return 1e3*e[0]+e[1]/1e6}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)}decode(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}}Object(e["c"])().get("IS_NODE")&&Object(e["c"])().setPlatform("node",new a)}).call(this,n("4362"))},"4c23":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s}));var r,i,a,o,s,u=n("a591");function c(t){return r=Object(u["a"])(t),i=r.format,a=r.parse,o=r.utcFormat,s=r.utcParse,r}c({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},"4c53":function(t,e,n){"use strict";var r=n("23e7"),i=n("857a"),a=n("af03");r({target:"String",proto:!0,forced:a("sub")},{sub:function(){return i(this,"sub","","")}})},"4c7a":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("eb7e"),o=n("54ef"),s=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t){Object(a["assert"])("complex64"===t.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return r["a"].runKernelFunc(e=>{const n=t.shape[t.shape.length-1],r=t.size/n,i=Object(s["a"])(t,[r,n]),a=e.ifft(i);return Object(s["a"])(a,t.shape)},e,null,i["mb"])}const c=Object(o["b"])({ifft_:u})},"4ca4":function(t,e,n){const r=n("bbfd"),i=(t,e)=>new r(t,e).patch;t.exports=i},"4caa":function(t,e,n){var r=n("a919"),i=n("76dd"),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",u="\\u20d0-\\u20ff",c=o+s+u,l="["+c+"]",f=RegExp(l,"g");function d(t){return t=i(t),t&&t.replace(a,r).replace(f,"")}t.exports=d},"4cfc":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("c388");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class i extends r["a"]{split(t){return new a(this,t)}}class a extends i{constructor(t,e){super(),this.upstream=t,this.impl=new o(t,e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class o extends r["b"]{constructor(t,e){super(),this.upstream=t,this.separator=e,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const t=await this.upstream.next();if(t.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const e=t.value.split(this.separator);e[0]=this.carryover+e[0];for(const n of e.slice(0,-1))this.outputQueue.push(n);return this.carryover=e[e.length-1],!0}}},"4d64":function(t,e,n){var r=n("fc6a"),i=n("50c4"),a=n("23cb"),o=function(t){return function(e,n,o){var s,u=r(e),c=i(u.length),l=a(o,c);if(t&&n!=n){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},"4d89":function(t,e,n){const r=n("8cb5");t.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n("b15c").SEMVER_SPEC_VERSION,SemVer:n("bbfd"),compareIdentifiers:n("2cdf").compareIdentifiers,rcompareIdentifiers:n("2cdf").rcompareIdentifiers,parse:n("a236"),valid:n("acef"),clean:n("d2ef"),inc:n("0159"),diff:n("6b78"),major:n("4e14"),minor:n("c2d5"),patch:n("4ca4"),prerelease:n("8970"),compare:n("3034"),rcompare:n("b805"),compareLoose:n("b00b"),compareBuild:n("1cc6"),sort:n("2a2e"),rsort:n("6fa7"),gt:n("bac4"),lt:n("38fa"),eq:n("4392"),neq:n("f195"),gte:n("a2a3"),lte:n("68d3"),cmp:n("c4be"),coerce:n("0a67"),Comparator:n("6d43"),Range:n("3fce"),satisfies:n("2a86"),toComparators:n("7d63"),maxSatisfying:n("13af"),minSatisfying:n("fd90"),minVersion:n("86d4"),validRange:n("0982"),outside:n("38cb"),gtr:n("8bd6"),ltr:n("9b6c"),intersects:n("5237"),simplifyRange:n("f67c"),subset:n("c628")}},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,a=n("1dde"),o=n("ae40"),s=a("filter"),u=o("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,n){"use strict";var r=n("0366"),i=n("7b0b"),a=n("9bdd"),o=n("e95a"),s=n("50c4"),u=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,f,d,h,p=i(t),m="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,y=void 0!==b,v=c(p),x=0;if(y&&(b=r(b,g>2?arguments[2]:void 0,2)),void 0==v||m==Array&&o(v))for(e=s(p.length),n=new m(e);e>x;x++)h=y?b(p[x],x):p[x],u(n,x,h);else for(f=v.call(p),d=f.next,n=new m;!(l=d.call(f)).done;x++)h=y?a(f,b,[l.value,x],!0):l.value,u(n,x,h);return n.length=x,n}},"4e14":function(t,e,n){const r=n("bbfd"),i=(t,e)=>new r(t,e).major;t.exports=i},"4f20":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","exp"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.exp(e);return n([r]),r},n,null,i["X"])}const u=Object(o["b"])({exp_:s})},"508f":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(o["a"])(t,"a","floorDiv"),s=Object(o["a"])(e,"b","floorDiv");[n,s]=Object(a["makeTypesMatch"])(n,s);const u=(t,e)=>{const r=t.floorDiv(n,s);return e([n,s]),r},c={a:n,b:s};return r["a"].runKernelFunc(u,c,null,i["db"])}const c=Object(s["b"])({floorDiv_:u})},"50c4":function(t,e,n){var r=n("a691"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},5135:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"515c":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a}));var r=n("658f");function i(e){return!("function"!==typeof t||!Object(r["p"])(t.isBuffer))&&t.isBuffer(e)}function a(t,e){const n=e&&e.property?Object(r["g"])(e.property):r["j"];return Object(r["s"])(t)&&!i(t)?o(n(t),e):n(JSON.parse(t))}function o(t,e){return!Object(r["m"])(t)&&Object(r["q"])(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}a.responseType="json"}).call(this,n("b639").Buffer)},"520f":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e){const n=Object(a["a"])(t,"x","prelu"),o=Object(a["a"])(e,"alpha","prelu"),s=(t,e)=>{const r=t.prelu(n,o);return e([n,o]),r},u={x:n,alpha:o};return r["a"].runKernelFunc(s,u,null,i["Zb"])}const u=Object(o["b"])({prelu_:s})},5237:function(t,e,n){const r=n("3fce"),i=(t,e,n)=>(t=new r(t,n),e=new r(e,n),t.intersects(e));t.exports=i},"526c":function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"g",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return f}));var r=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e,n,i){const o=e.inputParams[t];if(o&&void 0!==o.inputIndexStart){const t=o.inputIndexStart,s=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?t+1:o.inputIndexEnd;if("tensor"===o.type)return a(e.inputNames[o.inputIndexStart],n,i);if("tensors"===o.type){const r=e.inputNames.slice(t,s);return r.map(t=>a(t,n,i))}const u=a(e.inputNames.slice(t)[0],n,i),c=u.dataSync();return"number"===o.type?c[0]:r["fi"].toNestedArray(u.shape,c)}const s=e.attrParams[t];return s&&s.value}function a(t,e,n){const[r,i]=c(t),a=n.currentContextIds.find(t=>!!e[u(r,t)]);return void 0!==a?e[u(r,a)][i]:void 0}function o(t,e,n){return e[u(t,n.currentContextId)]}function s(t,e){const[n,r]=c(t);return[u(n,e&&e.currentContextId),r]}function u(t,e){return e?`${t}-${e}`:t}function c(t){const e=t.split(":");if(1===e.length)return[t,0];const n=e[0];return[n,Number(e[e.length-1])]}function l(t,e,n){let r=i("pad",t,e,n);if("explicit"===r){r=i("explicitPaddings",t,e,n);const a=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)a[t][0]=r[2*t],a[t][1]=r[2*t+1];return a}return r}function f(t){return t.kept?t:Object(r["Rd"])(t)}},"526f":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const a=n-1-i,o=t[a]||1,s=e[e.length-1-i]||1;s>1&&1===o&&r.unshift(a)}return r}function i(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],a=e.length-r-1,o=e[a];(null==i||1===i&&o>1)&&n.unshift(a)}return n}function a(t,e){const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let r=t[t.length-i-1];null==r&&(r=1);let a=e[e.length-i-1];if(null==a&&(a=1),1===r)n.unshift(a);else if(1===a)n.unshift(r);else{if(r!==a){const n=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(n)}n.unshift(r)}}return n}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}))},5319:function(t,e,n){"use strict";var r=n("d784"),i=n("825a"),a=n("7b0b"),o=n("50c4"),s=n("a691"),u=n("1d80"),c=n("8aa5"),l=n("14c3"),f=Math.max,d=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,n,r){var b=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,v=b?"$":"$0";return[function(n,r){var i=u(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!b&&y||"string"===typeof r&&-1===r.indexOf(v)){var a=n(e,t,this,r);if(a.done)return a.value}var u=i(t),h=String(this),p="function"===typeof r;p||(r=String(r));var m=u.global;if(m){var w=u.unicode;u.lastIndex=0}var O=[];while(1){var _=l(u,h);if(null===_)break;if(O.push(_),!m)break;var A=String(_[0]);""===A&&(u.lastIndex=c(h,o(u.lastIndex),w))}for(var j="",k=0,C=0;C<O.length;C++){_=O[C];for(var E=String(_[0]),S=f(d(s(_.index),h.length),0),D=[],F=1;F<_.length;F++)D.push(g(_[F]));var N=_.groups;if(p){var T=[E].concat(D,S,h);void 0!==N&&T.push(N);var M=String(r.apply(void 0,T))}else M=x(E,h,S,D,N,r);S>=k&&(j+=h.slice(k,S)+M,k=S+E.length)}return j+h.slice(k)}];function x(t,n,r,i,o,s){var u=r+t.length,c=i.length,l=m;return void 0!==o&&(o=a(o),l=p),e.call(s,l,(function(e,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return e;if(l>c){var f=h(l/10);return 0===f?e:f<=c?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):e}s=i[l-1]}return void 0===s?"":s}))}}))},"538e":function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u}));var r=n("6ae2"),i=n("34d7"),a=n("a3f7"),o=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){return o["assert"](o["isFunction"](t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const i=Object(a["a"])(e,"x","tf.grad",null),s=null!=n?Object(a["a"])(n,"dy","tf.grad"):null;return r["a"].tidy(()=>{const{value:e,grads:n}=r["a"].gradients(()=>t(i),[i],s);return null!=s&&o["assertShapesMatch"](e.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),h(n),n[0]})}}function u(t){return o["assert"](o["isFunction"](t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{o["assert"](Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const i=Object(a["b"])(e,"args","tf.grads",null),s=null!=n?Object(a["a"])(n,"dy","tf.grads"):null;return r["a"].tidy(()=>{const{value:e,grads:n}=r["a"].gradients(()=>t(...i),i,s);return null!=s&&o["assertShapesMatch"](e.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(n),n})}}function c(t){return o["assert"](o["isFunction"](t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{o["assert"](e instanceof i["a"],()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),o["assert"](null==n||n instanceof i["a"],()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:a,value:s}=r["a"].gradients(()=>t(e),[e],n);return h(a),{grad:a[0],value:s}}}function l(t){return o["assert"](o["isFunction"](t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{o["assert"](Array.isArray(e)&&e.every(t=>t instanceof i["a"]),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),o["assert"](null==n||n instanceof i["a"],()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const a=r["a"].gradients(()=>t(...e),e,n);return null!=n&&o["assertShapesMatch"](a.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(a.grads),a}}function f(t,e){o["assert"](o["isFunction"](t),()=>"The f passed in variableGrads(f) must be a function"),o["assert"](null==e||Array.isArray(e)&&e.every(t=>t instanceof i["c"]),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=e;if(!n){e=[];for(const t in r["a"].registeredVariables)e.push(r["a"].registeredVariables[t])}const a=n?e.filter(t=>!t.trainable):null,s=e.length;e=e.filter(t=>t.trainable),o["assert"](e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const u=!0,{value:c,grads:l}=r["a"].gradients(t,e,null,u);o["assert"](l.some(t=>null!=t),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),o["assert"](0===c.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${c.rank} tensor`);const f={};return e.forEach((t,e)=>{null!=l[e]&&(f[t.name]=l[e])}),null!=a&&a.forEach(t=>f[t.name]=null),{value:c,grads:f}}function d(t){return r["a"].customGrad(t)}function h(t){const e=t.filter(t=>null==t).length;if(e>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},"53f2":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){const s=Object(a["a"])(t,"x","unsortedSegmentSum"),u=Object(a["a"])(e,"segmentIds","unsortedSegmentSum","int32");Object(o["assert"])(Object(o["isInt"])(n),()=>"numSegments must be of dtype int");const c={x:s,segmentIds:u},l={numSegments:n},f=(t,e)=>{const r=t.unsortedSegmentSum(s,u,n);return e([u]),r};return r["a"].runKernelFunc(f,c,null,i["Qc"],l)}const c=Object(s["b"])({unsortedSegmentSum_:u})},"53fd":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c04e"),a=n("c05b"),o=n("a3f7"),s=n("eb7e"),u=n("b818"),c=n("54ef"),l=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t,e=[1,1,1],n,c,f,d="NDHWC",h){null==h?h=[1,1,1]:Object(i["b"])("dilations is deprecated, this field will be gone in v3.0.0.");const p=Object(o["a"])(t,"x","maxPool3d");let m=p,g=!1;4===p.rank&&(g=!0,m=Object(l["a"])(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),s["assert"](5===m.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${m.rank}.`),s["assert"]("NDHWC"===d,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+d),s["assert"](u["h"](n,h),()=>`Error in maxPool3d: Either strides or dilations must be 1. Got strides ${n} and dilations '${h}'`),null!=f&&s["assert"](s["isInt"](c),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${f} but got pad ${c}.`);const b=(t,r)=>{null==h&&(h=[1,1,1]);const i=u["f"](m.shape,e,n,h,c,f,d),a=t.maxPool3d(m,i);return r([m,a]),a},y={x:m},v={filterSize:e,strides:n,pad:c,dimRoundingMode:f,dataFormat:d,dilations:h},x=r["a"].runKernelFunc(b,y,null,a["Fb"],v);return g?Object(l["a"])(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}const d=Object(c["b"])({maxPool3d_:f})},"54ef":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r=n("6ae2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i="__op";function a(t){const e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");let n=e[0];const a=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=i;const o=(...t)=>{r["a"].startScope(n);try{const e=a(...t);return e instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r["a"].endScope(e),e}catch(e){throw r["a"].endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"55f8":function(t,e,n){"use strict";var r=n("18e2"),i=Object(r["a"])((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));e["a"]=i;i.range},5616:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e=1,n=!0){const o=Object(a["a"])(t,"x","topk");if(0===o.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const s=o.shape[o.shape.length-1];if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got `+e);const u={x:o},c={k:e,sorted:n},[l,f]=r["a"].runKernelFunc(t=>t.topk(o,e,n),u,null,i["Mc"],c);return{values:l,indices:f}}const u=Object(o["b"])({topk_:s})},5629:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("ffc3"),i=n("fd32"),a=n("01de"),o=n("8e47");function s(t,e,n={}){if(e&&null==e.headers)throw new Error('Data to render must have a "headers" property');if(e&&null==e.values)throw new Error('Data to render must have a "values" property');const s=o.getDrawArea(t),c=Object.assign({},u,n);let l=i.select(s).select("table.tf-table");const f=a.css({fontSize:c.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(0===l.size()&&(l=i.select(s).append("table"),l.attr("class",` ${f} tf-table`),l.append("thead").append("tr"),l.append("tbody")),1!==l.size())throw new Error("Error inserting table");const d=a.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),h=l.select("thead").select("tr").selectAll("th").data(e.headers),p=h.enter().append("th").attr("class",""+d);h.merge(p).html(t=>t),h.exit().remove();const m=r.format(",.4~f"),g=l.select("tbody").selectAll("tr").data(e.values),b=g.enter().append("tr"),y=a.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),v=g.merge(b).selectAll("td").data(t=>t),x=v.enter().append("td").attr("class",""+y);v.merge(x).html(t=>"number"===typeof t?m(t):t),v.exit().remove(),g.exit().remove()}e.table=s;const u={fontSize:14}},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var r=n("d066"),i=n("241c"),a=n("7418"),o=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(o(t)),n=a.f;return n?e.concat(n(t)):e}},"57e0":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
var r;n.d(e,"a",(function(){return r})),function(t){t[t["NONE"]=0]="NONE",t[t["MEAN"]=1]="MEAN",t[t["SUM"]=2]="SUM",t[t["SUM_BY_NONZERO_WEIGHTS"]=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},"585a":function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("c8ba"))},5874:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},5894:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("6ae2"),i=n("c05b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const a={start:t,stop:e,num:n};return r["a"].runKernelFunc(r=>r.linspace(t,e,n),{},null,i["wb"],a)}},5899:function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),i=n("5899"),a="["+i+"]",o=RegExp("^"+a+a+"*"),s=RegExp(a+a+"*$"),u=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},5959:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("6ae2"),i=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e,n,a){if(null==a&&(a=Object(i["inferDtype"])(t)),"complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Object(i["isTypedArray"])(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){Object(i["assertNonNegativeIntegerDimensions"])(e);const t=Object(i["sizeFromShape"])(e),r=Object(i["sizeFromShape"])(n);Object(i["assert"])(t===r,()=>`Based on the provided shape, [${e}], the tensor should have ${t} values but has ${r}`);for(let a=0;a<n.length;++a){const t=n[a],r=a!==n.length-1||t!==Object(i["sizeFromShape"])(e.slice(a));Object(i["assert"])(n[a]===e[a]||!r,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return Object(i["isTypedArray"])(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==a?Object(i["toTypedArray"])(t,a):Object(i["flatten"])(t,[],!0),r["a"].makeTensor(t,e,a)}},5960:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","ceil"),n={x:e};return r["a"].runKernelFunc(t=>t.ceil(e),n,null,i["w"])}const u=Object(o["b"])({ceil_:s})},5980:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","isInf"),n={x:e};return r["a"].runKernelFunc(t=>t.isInf(e),n,null,i["qb"])}const u=Object(o["b"])({isInf_:s})},"5a2c":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("6ae2"),i=n("eb7e"),a=n("0777");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e="float32"){if("complex64"===e){const e=o(t,"float32"),n=o(t,"float32");return Object(a["a"])(e,n)}const n=Object(i["makeZerosTypedArray"])(Object(i["sizeFromShape"])(t),e);return r["a"].makeTensor(n,t,e)}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5dc4":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","sinh"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.sinh(e);return n([e]),r},n,null,i["vc"])}const u=Object(o["b"])({sinh_:s})},"5ebd":function(t,e,n){"use strict";n.r(e),n.d(e,"assertParamsValid",(function(){return i})),n.d(e,"maskToAxes",(function(){return a})),n.d(e,"computeOutShape",(function(){return o})),n.d(e,"stridesWithElidedDims",(function(){return s})),n.d(e,"getNormalizedAxes",(function(){return l})),n.d(e,"startIndicesWithElidedDims",(function(){return f})),n.d(e,"stopIndicesWithElidedDims",(function(){return d})),n.d(e,"stridesForAxis",(function(){return h})),n.d(e,"startForAxis",(function(){return p})),n.d(e,"stopForAxis",(function(){return m})),n.d(e,"isSliceContinous",(function(){return g})),n.d(e,"computeFlatOffset",(function(){return b})),n.d(e,"parseSliceParams",(function(){return y}));var r=n("eb7e");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e,n){const i=t.shape.length;r["assert"](i===e.length,()=>`Error in slice${i}D: Length of begin ${e} must match the rank of the array (${i}).`),r["assert"](i===n.length,()=>`Error in slice${i}D: Length of size ${n} must match the rank of the array (${i}).`);for(let a=0;a<i;++a)r["assert"](e[a]+n[a]<=t.shape[a],()=>`Error in slice${i}D: begin[${a}] + size[${a}] (${e[a]+n[a]}) would overflow input.shape[${a}] (${t.shape[a]})`)}function a(t){const e=[];let n=0;while(t>0)1&t&&e.push(n),t/=2,n++;return e}function o(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function s(t,e,n,r){const i=[...t];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<n;a++)0===a?i[e]=1:(i.splice(e,0,1),i.pop());return i}function u(t,e,n){return n<=t?n:n-(e-1)}function c(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function l(t,e,n,r,i,a,o,u,c){const l=t.length;let g=new Array(l),b=new Array(l),y=new Array(l);if(e.length&&n>0){const c=e[0],l=n+1;g=f(o,c,l,r,t),b=d(u,c,l,i,t),y=s(a,c,l,t)}else for(let s=0;s<l;s++)g[s]=p(o,r,a,t,s,c),b[s]=m(u,i,a,t,s,c),y[s]=h(a,s,c);return{begin:g,end:b,strides:y}}function f(t,e,n,r,i){const a=[...i],o=c(n,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=0;else{const i=u(e,n,s);let o=r[i];t&1<<i&&(o=0),a[s]=o}return a}function d(t,e,n,i,a){const o=[...a],s=c(n,e);for(let r=0;r<o.length;r++)if(s.indexOf(r)>-1)o[r]=Number.MAX_SAFE_INTEGER;else{const a=u(e,n,r);let s=i[a];t&1<<a&&(s=Number.MAX_SAFE_INTEGER),o[r]=s}for(let u=0;u<o.length;u++){const t=a[u];o[u]<0&&(o[u]+=t),o[u]=r["clamp"](0,o[u],a[u])}return o}function h(t,e,n){let r=t[e];return(n&1<<e||null==r)&&(r=1),r}function p(t,e,n,i,a,o){let s=e[a];const u=n[a]||1;(t&1<<a||o&1<<a||null==s)&&(s=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=i[a];return s<0&&(s+=c),s=r["clamp"](0,s,c-1),s}function m(t,e,n,i,a,o){let s=e[a];const u=n[a]||1;(t&1<<a||o&1<<a||null==s)&&(s=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=i[a];return s<0&&(s+=c),s=u>0?r["clamp"](0,s,c):r["clamp"](-1,s,c-1),s}function g(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function b(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function y(t,e,n){let i;const a=t.shape.length;let o;return i="number"===typeof e?[e,...new Array(a-1).fill(0)]:e.length<a?e.concat(new Array(a-e.length).fill(0)):e.slice(),i.forEach(t=>{r["assert"](-1!==t,()=>"slice() does not support negative begin indexing.")}),o=null==n?new Array(a).fill(-1):"number"===typeof n?[n,...new Array(a-1).fill(-1)]:n.length<a?n.concat(new Array(a-n.length).fill(-1)):n,o=o.map((e,n)=>e>=0?e:(r["assert"](-1===e,()=>`Negative size values should be exactly -1 but got ${e} for the slice() size at index ${n}.`),t.shape[n]-i[n])),[i,o]}},"5edf":function(t,e,n){"use strict";var r=n("18e2"),i=n("1738"),a=Object(r["a"])((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*i["d"])}),(function(t,e){return(e-t)/i["d"]}),(function(t){return t.getUTCSeconds()}));e["a"]=a;a.range},"5f2a":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","rsqrt"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.rsqrt(e);return n([e]),r},n,null,i["oc"])}const u=Object(o["b"])({rsqrt_:s})},"5f87":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e=-1){const n=Object(a["a"])(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const o={logits:n},s={dim:e};return r["a"].runKernelFunc((t,r)=>{const i=t.softmax(n,e);return r([i]),i},o,null,i["xc"],s)}const u=Object(o["b"])({softmax_:s})},6002:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(o["a"])(t,"a","atan2"),s=Object(o["a"])(e,"b","atan2");[n,s]=Object(a["makeTypesMatch"])(n,s);const u=(t,e)=>{const r=t.atan2(n,s);return e([n,s]),r},c={a:n,b:s};return r["a"].runKernelFunc(u,c,null,i["m"])}const c=Object(s["b"])({atan2_:u})},"60da":function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),a=n("df75"),o=n("7418"),s=n("d1e7"),u=n("7b0b"),c=n("44ad"),l=Object.assign,f=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||a(l({},e)).join("")!=i}))?function(t,e){var n=u(t),i=arguments.length,l=1,f=o.f,d=s.f;while(i>l){var h,p=c(arguments[l++]),m=f?a(p).concat(f(p)):a(p),g=m.length,b=0;while(g>b)h=m[b++],r&&!d.call(p,h)||(n[h]=p[h])}return n}:l},6125:function(t,e,n){var r=n("1212"),i=n("b838"),a=n("a49e"),o=n("cae0"),s=n("7aec"),u=n("89ed"),c=n("a49d");c.alea=r,c.xor128=i,c.xorwow=a,c.xorshift7=o,c.xor4096=s,c.tychei=u,t.exports=c},6180:function(t,e,n){"use strict";
/*
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(t,e){if(!t)throw new Error("string"===typeof e?e:e())}function i(t,e,n=""){r(a(t,e),n+` Shapes ${t} and ${e} must match`)}function a(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.assert=r,e.assertShapesMatch=i,e.arraysEqual=a,e.DECIMAL_PLACES_TO_CHECK=4},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"649e":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("f3b9"),u=n("54ef"),c=n("357d");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e=0){Object(o["assert"])(t.length>=1,()=>"Pass at least one tensor to concat");let n=Object(a["b"])(t,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(t=>{if("complex64"!==t.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${t.dtype}. `)});const u=(t,r)=>{const i=Object(o["parseAxisParam"])(e,n[0].shape)[0],a=Object(s["b"])(n.map(t=>t.shape),i);if(0===Object(o["sizeFromShape"])(a))return Object(c["a"])([],a);if(n=n.filter(t=>t.size>0),1===n.length)return n[0];const u=n.map(t=>t.shape);Object(s["a"])(u,i);const l=t.concat(n,i);return r(n),l},l=n,f={axis:e};return r["a"].runKernelFunc(u,l,null,i["z"],f)}const f=Object(u["b"])({concat_:l})},6547:function(t,e,n){var r=n("a691"),i=n("1d80"),a=function(t){return function(e,n){var a,o,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536)}};t.exports={codeAt:a(!1),charAt:a(!0)}},6582:function(t,e,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,e){var n,i,a;return e=e||{},n=JSON.stringify([1],void 0,void 0===e.indent?2:e.indent).slice(2,-3),i=""===n?1/0:void 0===e.maxLength?80:e.maxLength,a=e.replacer,function t(e,o,s){var u,c,l,f,d,h,p,m,g,b,y,v;if(e&&"function"===typeof e.toJSON&&(e=e.toJSON()),y=JSON.stringify(e,a),void 0===y)return y;if(p=i-o.length-s,y.length<=p&&(g=y.replace(r,(function(t,e){return e||t+" "})),g.length<=p))return g;if(null!=a&&(e=JSON.parse(y),a=void 0),"object"===typeof e&&null!==e){if(m=o+n,l=[],c=0,Array.isArray(e))for(b="[",u="]",p=e.length;c<p;c++)l.push(t(e[c],m,c===p-1?0:1)||"null");else for(b="{",u="}",h=Object.keys(e),p=h.length;c<p;c++)f=h[c],d=JSON.stringify(f)+": ",v=t(e[f],m,d.length+(c===p-1?0:1)),void 0!==v&&l.push(d+v);if(l.length>0)return[b,n+l.join(",\n"+m),u].join("\n"+o)}return y}(t,"",0)}},"658f":function(t,e,n){"use strict";function r(t,e,n){return t.fields=e||[],t.fname=n,t}function i(t){return 1===t.length?a(t[0]):o(t)}n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return M})),n.d(e,"c",(function(){return R})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return $})),n.d(e,"f",(function(){return B})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return P})),n.d(e,"i",(function(){return L})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return U})),n.d(e,"l",(function(){return W})),n.d(e,"m",(function(){return d})),n.d(e,"n",(function(){return q})),n.d(e,"o",(function(){return V})),n.d(e,"p",(function(){return I})),n.d(e,"q",(function(){return G})),n.d(e,"r",(function(){return H})),n.d(e,"s",(function(){return h})),n.d(e,"t",(function(){return X})),n.d(e,"u",(function(){return Y})),n.d(e,"v",(function(){return K})),n.d(e,"w",(function(){return Z})),n.d(e,"x",(function(){return tt})),n.d(e,"y",(function(){return O})),n.d(e,"z",(function(){return _})),n.d(e,"A",(function(){return A})),n.d(e,"B",(function(){return j})),n.d(e,"C",(function(){return p})),n.d(e,"D",(function(){return F})),n.d(e,"E",(function(){return et})),n.d(e,"F",(function(){return nt})),n.d(e,"G",(function(){return rt})),n.d(e,"H",(function(){return at})),n.d(e,"I",(function(){return m})),n.d(e,"J",(function(){return st})),n.d(e,"K",(function(){return ot})),n.d(e,"L",(function(){return ut})),n.d(e,"M",(function(){return f})),n.d(e,"N",(function(){return N})),n.d(e,"O",(function(){return C})),n.d(e,"P",(function(){return E})),n.d(e,"Q",(function(){return S})),n.d(e,"R",(function(){return D}));const a=t=>function(e){return e[t]},o=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};function s(t){throw Error(t)}function u(t){const e=[],n=t.length;let r,i,a,o=null,u=0,c="";function l(){e.push(c+t.substring(r,i)),c="",r=i+1}for(t+="",r=i=0;i<n;++i)if(a=t[i],"\\"===a)c+=t.substring(r,i),c+=t.substring(++i,++i),r=i;else if(a===o)l(),o=null,u=-1;else{if(o)continue;r===u&&'"'===a||r===u&&"'"===a?(r=i+1,o=a):"."!==a||u?"["===a?(i>r&&l(),u=r=i+1):"]"===a&&(u||s("Access path missing open bracket: "+t),u>0&&l(),u=0,r=i+1):i>r?l():r=i+1}return u&&s("Access path missing closing bracket: "+t),o&&s("Access path missing closing quote: "+t),i>r&&(i++,l()),e}function c(t,e,n){const a=u(t);return t=1===a.length?a[0]:t,r((n&&n.get||i)(a),[t],e||t)}c("id");const l=r(t=>t,[],"identity"),f=(r(()=>0,[],"zero"),r(()=>1,[],"one"),r(()=>!0,[],"true"));r(()=>!1,[],"false");var d=Array.isArray;function h(t){return t===Object(t)}function p(t){return t[t.length-1]}function m(t){return null==t||""===t?null:+t}const g=t=>e=>t*Math.exp(e),b=t=>e=>Math.log(t*e),y=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),v=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,x=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function w(t,e,n,r){const i=n(t[0]),a=n(p(t)),o=(a-i)*e;return[r(i-o),r(a-o)]}function O(t,e){return w(t,e,m,l)}function _(t,e){var n=Math.sign(t[0]);return w(t,e,b(n),g(n))}function A(t,e,n){return w(t,e,x(n),x(1/n))}function j(t,e,n){return w(t,e,y(n),v(n))}function k(t,e,n,r,i){const a=r(t[0]),o=r(p(t)),s=null!=e?r(e):(a+o)/2;return[i(s+(a-s)*n),i(s+(o-s)*n)]}function C(t,e,n){return k(t,e,n,m,l)}function E(t,e,n){const r=Math.sign(t[0]);return k(t,e,n,b(r),g(r))}function S(t,e,n,r){return k(t,e,n,x(r),x(1/r))}function D(t,e,n,r){return k(t,e,n,y(r),v(r))}function F(t){return 1+~~(new Date(t).getMonth()/3)}function N(t){return 1+~~(new Date(t).getUTCMonth()/3)}function T(t){return null!=t?d(t)?t:[t]:[]}function M(t,e,n){let r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]}function I(t){return"function"===typeof t}function R(t){return I(t)?t:()=>t}function $(t){for(let e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r],e)t[n]=e[n];return t}function B(t,e){let n,r,i,a,o=0;if(t&&(n=t.length))if(null==e){for(r=t[o];o<n&&(null==r||r!==r);r=t[++o]);for(i=a=r;o<n;++o)r=t[o],null!=r&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=e(t[o]);o<n&&(null==r||r!==r);r=e(t[++o]));for(i=a=r;o<n;++o)r=e(t[o]),null!=r&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]}const z=Object.prototype.hasOwnProperty;function L(t,e){return z.call(t,e)}function P(t,e,n,r,i,a){if(!n&&0!==n)return a;const o=+n;let s,u=t[0],c=p(t);c<u&&(s=u,u=c,c=s),s=Math.abs(e-u);const l=Math.abs(c-e);return s<l&&s<=o?r:l<=o?i:a}function U(t,e,n){const r=t.prototype=Object.create(e.prototype);return r.constructor=t,$(r,n)}function W(t,e,n,r){let i,a=e[0],o=e[e.length-1];return a>o&&(i=a,a=o,o=i),n=void 0===n||n,r=void 0===r||r,(n?a<=t:a<t)&&(r?t<=o:t<o)}function q(t){return"boolean"===typeof t}function V(t){return"[object Date]"===Object.prototype.toString.call(t)}function G(t){return t&&I(t[Symbol.iterator])}function H(t){return"number"===typeof t}function X(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function Y(t){return"string"===typeof t}function K(t,e){const n=t[0],r=p(t),i=+e;return i?1===i?r:n+i*(r-n):n}const J=1e4;function Z(t){let e,n,r;t=+t||J;const i=()=>{e={},n={},r=0},a=(i,a)=>(++r>t&&(n=e,e={},r=1),e[i]=a);return i(),{clear:i,has:t=>L(e,t)||L(n,t),get:t=>L(e,t)?e[t]:L(n,t)?a(t,n[t]):void 0,set:(t,n)=>L(e,t)?e[t]=n:a(t,n)}}function Q(t,e){let n="";while(--e>=0)n+=t;return n}function tt(t,e,n,r){const i=n||" ",a=t+"",o=e-a.length;return o<=0?a:"left"===r?Q(i,o)+a:"center"===r?Q(i,~~(o/2))+a+Q(i,Math.ceil(o/2)):a+Q(i,o)}function et(t){return t&&p(t)-t[0]||0}function nt(t){return d(t)?"["+t.map(nt)+"]":h(t)||Y(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function rt(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t}const it=t=>H(t)||V(t)?t:Date.parse(t);function at(t,e){return e=e||it,null==t||""===t?null:e(t)}function ot(t){return null==t||""===t?null:t+""}function st(t){const e={},n=t.length;for(let r=0;r<n;++r)e[t[r]]=!0;return e}function ut(t,e,n,r){const i=null!=r?r:"",a=t+"",o=a.length,s=Math.max(0,e-i.length);return o<=e?a:"left"===n?i+a.slice(o-s):"center"===n?a.slice(0,Math.ceil(s/2))+i+a.slice(o-~~(s/2)):a.slice(0,s)+i}},"65f0":function(t,e,n){var r=n("861d"),i=n("e8b5"),a=n("b622"),o=a("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"673d":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},6747:function(t,e){var n=Array.isArray;t.exports=n},6791:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("48db"),u=n("526f"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n){const c=Object(a["a"])(e,"a","where"),l=Object(a["a"])(n,"b","where"),f=Object(a["a"])(t,"condition","where","bool"),d=Object(u["a"])(c.shape,l.shape),h=Object(s["a"])(c,d),p=Object(s["a"])(l,d);1===f.rank&&Object(o["assert"])(f.shape[0]===c.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),1!==f.rank&&Object(o["assertShapesMatch"])(f.shape,p.shape,"Error in where: ");const m=(t,e)=>{const n=t.select(f,h,p);return e([f]),n},g={condition:f,t:h,e:p};return r["a"].runKernelFunc(m,g,null,i["qc"])}const f=Object(c["b"])({where_:l})},"67a2":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("8756"),a=n("8e47"),o=n("5629"),s=n("1309"),u=n("4149");function c(t,e){return r(this,void 0,void 0,(function*(){const n=a.getDrawArea(t),r=f(e),i=["Layer Name","Output Shape","# Of Params","Trainable"],s=r.layers.map(t=>[t.name,t.outputShape,t.parameters,t.trainable]);o.table(n,{headers:i,values:s})}))}function l(t,e){return r(this,void 0,void 0,(function*(){const n=a.getDrawArea(t),u=yield h(e),c=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],l=s.subSurface(n,"layer-weights-info"),f=u.map(t=>[t.name,t.shape,t.stats.min,t.stats.max,t.weight.size,t.stats.numZeros,t.stats.numNans,t.stats.numInfs]);o.table(l,{headers:c,values:f});const d=s.subSurface(n,"select-layer"),p=s.subSurface(n,"param-distribution"),g=t=>r(this,void 0,void 0,(function*(){const e=u.filter(e=>e.name===t)[0],n=yield e.weight.data();i.histogram(p,n,{height:150,width:460,stats:!1})}));m(u.map(t=>t.name),d,g)}))}function f(t){return{layers:t.layers.map(d)}}function d(t){let e;if(Array.isArray(t.outputShape[0])){const n=t.outputShape.map(t=>p(t));e=`[${n.join(", ")}]`}else e=p(t.outputShape);return{name:t.name,trainable:t.trainable,parameters:t.countParams(),outputShape:e}}function h(t){return r(this,void 0,void 0,(function*(){const e=t.getWeights(),n=t.weights,r=e.map(u.tensorStats),i=yield Promise.all(r),a=e.map(t=>t.shape);return e.map((t,e)=>({name:n[e].name,stats:i[e],shape:p(a[e]),weight:t}))}))}function p(t){const e=t.slice();return 0===e.length?"Scalar":(null===e[0]&&(e[0]="batch"),`[${e.join(",")}]`)}function m(t,e,n){const r=`\n    <select>\n      ${t.map(t=>`<option value=${t}>${t}</option>`)}\n    </select>\n  `,i="<button>Show Values Distribution for:</button>",a=`<div>${i}${r}</div>`;e.innerHTML=a;const o=e.querySelector("button"),s=e.querySelector("select");o.addEventListener("click",()=>{n(s.selectedOptions[0].label)})}e.modelSummary=c,e.layer=l},"68d3":function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)<=0;t.exports=i},6926:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("54ef"),o=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e,n,a){let s=t;3===t.rank&&(s=Object(o["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;3===u.rank&&(u=Object(o["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c=t=>t.depthwiseConv2DDerFilter(s,u,a),l={x:s,dy:u};return r["a"].runKernelFunc(c,l,null,i["M"])}const u=Object(a["b"])({depthwiseConv2dNativeBackpropFilter_:s})},6932:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","sin"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.sin(e);return n([e]),r},n,null,i["uc"])}const u=Object(o["b"])({sin_:s})},"694b":function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;0!==i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!==i--;){var o=a[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}},"69dc":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("0777"),i=n("649e"),a=n("24b0"),o=n("a5aa"),s=n("54ef"),u=n("d7b0"),c=n("35c9"),l=n("d08e"),f=n("015f"),d=n("6d3c"),h=n("4c7a");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function p(t){const e=t.shape[t.shape.length-1],n=t.size/e;let s;if(e<=2){const r=Object(c["a"])(t,[n,e]);s=Object(h["a"])(r)}else{const p=[n,2*(e-1)],m=Object(c["a"])(Object(u["a"])(t),[n,e]),g=Object(c["a"])(Object(a["a"])(t),[n,e]),b=Object(l["a"])(Object(d["a"])(m,[0,1],[n,e-2]),1),y=Object(o["a"])(Object(l["a"])(Object(d["a"])(g,[0,1],[n,e-2]),1),Object(f["a"])(-1)),v=Object(i["a"])([m,b],1),x=Object(i["a"])([g,y],1),w=Object(c["a"])(Object(r["a"])(v,x),[p[0],p[1]]);s=Object(h["a"])(w)}if(s=Object(u["a"])(s),3===t.rank&&0!==t.shape[0]){const e=s,n=t.shape[0];s=Object(c["a"])(s,[n,s.shape[0]/n,s.shape[1]]),e.dispose()}return s}const m=Object(s["b"])({irfft_:p})},"69f3":function(t,e,n){var r,i,a,o=n("7f9a"),s=n("da84"),u=n("861d"),c=n("9112"),l=n("5135"),f=n("f772"),d=n("d012"),h=s.WeakMap,p=function(t){return a(t)?i(t):r(t,{})},m=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(o){var g=new h,b=g.get,y=g.has,v=g.set;r=function(t,e){return v.call(g,t,e),e},i=function(t){return b.call(g,t)||{}},a=function(t){return y.call(g,t)}}else{var x=f("state");d[x]=!0,r=function(t,e){return c(t,x,e),e},i=function(t){return l(t,x)?t[x]:{}},a=function(t){return l(t,x)}}t.exports={set:r,get:i,has:a,enforce:p,getterFor:m}},"6ac0":function(t,e){function n(t,e,n,r){var i=-1,a=null==t?0:t.length;r&&a&&(n=t[++i]);while(++i<a)n=e(n,t[i],i,t);return n}t.exports=n},"6ae2":function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return x}));var r=n("8b87"),i=n("b333"),a=n("f490"),o=n("c05b"),s=n("73b8"),u=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class c{constructor(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new f)}profileKernel(t,e,n){let r;const i=()=>{r=n()},a=this.backendTimer.time(i);for(let s=0;s<r.length;s++){const e=r[s];e.data().then(n=>{l(n,e.dtype,t)})}const o={kernelName:t,outputs:r,inputs:e,timeMs:a.then(t=>t.kernelMs),extraInfo:a.then(t=>null!=t.getExtraProfileInfo?t.getExtraProfileInfo():"")};return o}logKernelProfile(t){const{kernelName:e,outputs:n,timeMs:r,inputs:i,extraInfo:a}=t;n.forEach(t=>{Promise.all([t.data(),r,a]).then(n=>{this.logger.logKernelProfile(e,t,n[0],n[1],i,n[2])})})}}function l(t,e,n){if("float32"!==e)return!1;for(let r=0;r<t.length;r++){const e=t[r];if(isNaN(e)||!isFinite(e))return console.warn(`Found ${e} in the result of '${n}'`),!0}return!1}class f{logKernelProfile(t,e,n,r,i,a){const o="number"===typeof r?u["rightPad"](r+"ms",9):r["error"],s=u["rightPad"](t,25),c=e.rank,l=e.size,f=u["rightPad"](e.shape.toString(),14);let d="";for(const u in i){const t=i[u];if(null!=t){const n=t.shape||e.shape,r=n.length;d+=`${u}: ${r}D ${r>0?n:""} `}}console.log(`%c${s}\t%c${o}\t%c${c}D ${f}\t%c${l}\t%c${d}\t%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d(t,e,n){const r={},i={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const n=t[u],a=n.inputs;for(const t in a){const o=a[t];let s=!1;for(let t=0;t<e.length;t++)if(r[o.id]){n.outputs.forEach(t=>r[t.id]=!0),s=!0,i[n.id]=!0;break}if(s)break}}const a={};a[n.id]=!0;const o={};for(let u=t.length-1;u>=0;u--){const e=t[u],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(a[e.outputs[t].id]){for(const t in n)a[n[t].id]=!0,o[e.id]=!0;break}}const s=[];for(let u=0;u<t.length;u++){const e=t[u];if(i[e.id]&&o[e.id]){const t={};for(const i in e.inputs){const n=e.inputs[i];r[n.id]&&(t[i]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,s.push(n)}}return s}function h(t,e,n,r){for(let i=e.length-1;i>=0;i--){const a=e[i],o=[];if(a.outputs.forEach(e=>{const n=t[e.id];null!=n?o.push(n):o.push(null)}),null==a.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(o);for(const e in a.inputs){if(!(e in s))throw new Error(`Cannot backprop through input ${e}. Available gradients found: ${Object.keys(s)}.`);const i=n(()=>s[e]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${e} must have 'float32' dtype, but has '${i.dtype}'`);const o=a.inputs[e];if(!u["arraysEqual"](i.shape,o.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${e}' has shape '${i.shape}', which does not match the shape of the input '${o.shape}'`);if(null==t[o.id])t[o.id]=i;else{const e=t[o.id];t[o.id]=r(e,i),e.dispose()}}}}var p=n("34d7"),m=n("76c2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class g{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class b{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new g}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],r=await this.initializeBackend(n).success;if(r)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{const{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,n=1){return t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;const{success:e,asyncInit:n}=this.initializeBackend(t),r=n?await e:e;if(!r)return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new c(this.backendInstance),!0}setupRegisteredKernels(){const t=Object(s["d"])(this.backendName);t.forEach(t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){const e=Object(s["d"])(t);e.forEach(e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])})}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const n=e.factory();if(!n||n instanceof r["b"]||"function"!==typeof n.then)return this.registry[t]=n,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,r=n.then(n=>!(e<this.pendingBackendInitId)&&(this.registry[t]=n,this.pendingBackendInit=null,!0)).catch(n=>(e<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const n=this.state.tensorInfo.get(e),r=n.backend,i=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!==typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!==typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=e(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(t,e,n){t();try{const t=n();return e(),t}catch(r){throw e(),r}}nextTensorId(){return b.nextTensorId++}nextVariableId(){return b.nextVariableId++}clone(t){const e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),n={x:t},r=t=>({x:()=>{const e="float32",n={x:t},r={dtype:e};return x.runKernelFunc(n=>n.cast(t,e),n,null,o["v"],r)}}),i=[];return this.addTapeNode(this.state.activeScope.name,n,[e],r,i,{}),e}runKernel(t,e,n,r,i){const a=null,o=null;return this.runKernelFunc(a,e,o,t,n,r,i)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){const r=this.backend.numDataIds();let i=0;n.forEach(t=>{i+="complex64"===t.dtype?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-e-i-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${t}'`)}runKernelFunc(t,e,n,r,i,a,o){let u,c=[];const l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");const f=this.state.numBytes,d=this.state.numTensors;let h;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const p=Object(s["c"])(r,this.backendName);let m,g;if(null!=p)h=()=>{const t=this.backend.numDataIds();m=p.kernelFunc({inputs:e,attrs:i,backend:this.backend});const n=Array.isArray(m)?m:[m];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,t,n);const s=n.map(({dataId:t,shape:e,dtype:n})=>this.makeTensorFromDataId(t,e,n));if(l){let t=this.getTensorsForGradient(r,e,s);if(null==t){null==o&&(o=[]);const e=s.filter((t,e)=>o[e]);t=(a||[]).slice().concat(e)}c=this.saveTensorsForBackwardMode(t)}return s};else{const e=t=>{l&&(c=t.map(t=>this.keep(this.clone(t))))};h=()=>{const n=this.backend.numDataIds();m=this.tidy(()=>t(this.backend,e));const i=Array.isArray(m)?m:[m];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,n,i),i}}return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(g=this.profiler.profileKernel(r,e,()=>h()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),u=g.outputs):u=h()}),l&&this.addTapeNode(r,e,u,n,c,i),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-d,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(t=>null!=e[t]?e[t].shape:null),outputShapes:u.map(t=>t.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(m)?u:u[0]}saveTensorsForBackwardMode(t){const e=t.map(t=>this.keep(this.clone(t)));return e}getTensorsForGradient(t,e,n){const r=Object(s["b"])(t);if(null!=r){const t=r.inputsToSave||[],i=r.outputsToSave||[];let a;r.saveAllInputs?(u["assert"](Array.isArray(e),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(e).map(t=>e[t])):a=t.map(t=>e[t]);const o=n.filter((t,e)=>i[e]);return a.concat(o)}return null}makeTensor(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=t;"string"===n&&u["isString"](t[0])&&(i=t.map(t=>u["encodeString"](t)));const a=r.write(i,e,n),o=new p["a"](e,n,a,this.nextTensorId());if(this.incRef(o,r),"string"===n){const t=this.state.tensorInfo.get(a),e=Object(u["bytesFromStringArray"])(i);this.state.numBytes+=e-t.bytes,t.bytes=e}return o}makeTensorFromDataId(t,e,n,r){n=n||"float32";const i=new p["a"](e,n,t,this.nextTensorId());return this.incRef(i,r),i}makeVariable(t,e=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));const i=new p["c"](t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}incRef(t,e){const n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*u["bytesPerElement"](t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n,refCount:0}),this.state.numBytes+=n}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof p["c"]||this.track(t)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;const e=this.state.tensorInfo.get(t.dataId),n=e.refCount;n<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}disposeVariables(){for(const t in this.state.registeredVariables){const e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(t=>t.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,i,a){const o={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:i},c=Object(s["b"])(t);null!=c&&(r=c.gradFunc),null!=r&&(o.gradient=t=>(t=t.map((t,e)=>{if(null==t){const t=n[e],r=u["makeZerosTypedArray"](t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t}),r(t.length>1?t:t[0],i,a))),this.state.activeTape.push(o)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=Object(m["getTensorsInContainer"])(t),n=new Set(e.map(t=>t.id));for(let i=0;i<this.state.activeScope.track.length;i++){const t=this.state.activeScope.track[i];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(t=>{t.kept||t.scopeId!==r.id||this.track(t)})}gradients(t,e,n,r=!1){if(u["assert"](e.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));u["assert"](i instanceof p["a"],()=>"The result y returned by f() must be a tensor.");const a=d(this.state.activeTape,e,i);if(!r&&0===a.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const t={};t[i.id]=null==n?y(i.shape):n,h(t,a,t=>this.tidy(t),w);const r=e.map(e=>t[e.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(t=>{for(const e of t.saved)e.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(t){return u["assert"](u["isFunction"](t),()=>"The f passed in customGrad(f) must be a function."),(...e)=>{let n;u["assert"](e.every(t=>t instanceof p["a"]),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};return e.forEach((t,e)=>{r[e]=t}),this.runKernelFunc((r,i)=>(n=t(...e,i),u["assert"](n.value instanceof p["a"],()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),u["assert"](u["isFunction"](n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),r,(t,r)=>{const i=n.gradFunc(t,r),a=Array.isArray(i)?i:[i];u["assert"](a.length===e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),u["assert"](a.every(t=>t instanceof p["a"]),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const o={};return a.forEach((t,e)=>{o[e]=()=>t}),o})}}readSync(t){const e=this.state.tensorInfo.get(t);return e.backend.readSync(t)}read(t){const e=this.state.tensorInfo.get(t);return e.backend.read(t)}async time(t){const e=Object(u["now"])(),n=await this.backend.time(t);return n.wallMs=Object(u["now"])()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new g;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function y(t){const e=Object(u["makeOnesTypedArray"])(Object(u["sizeFromShape"])(t),"float32");return x.makeTensor(e,t,"float32")}function v(){const t=Object(a["b"])();if(null==t._tfengine){const e=new i["b"](t);t._tfengine=new b(e)}return Object(i["d"])(t._tfengine.ENV),Object(p["f"])(()=>t._tfengine),t._tfengine}b.nextTensorId=0,b.nextVariableId=0;const x=v();function w(t,e){const n={a:t,b:e};return x.runKernelFunc((n,r)=>{const i=n.add(t,e);return r([t,e]),i},n,null,o["d"])}},"6b03":function(t,e,n){},"6b6b":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("8e47"),a=n("5629");function o(t,e,n){return r(this,void 0,void 0,(function*(){const r=i.getDrawArea(t),o=["Class","Accuracy","# Samples"],s=[];for(let t=0;t<e.length;t++){const r=n?n[t]:t.toString(),i=e[t];s.push([r,i.accuracy,i.count])}return a.table(r,{headers:o,values:s})}))}e.showPerClassAccuracy=o},"6b78":function(t,e,n){const r=n("a236"),i=n("4392"),a=(t,e)=>{if(i(t,e))return null;{const n=r(t),i=r(e),a=n.prerelease.length||i.prerelease.length,o=a?"pre":"",s=a?"prerelease":"";for(const t in n)if(("major"===t||"minor"===t||"patch"===t)&&n[t]!==i[t])return o+t;return s}};t.exports=a},"6bd5":function(t,e,n){"use strict";
/** @license See the LICENSE file. */Object.defineProperty(e,"__esModule",{value:!0});const r="1.4.3";e.version=r},"6d3c":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef"),s=n("5ebd");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){const o=Object(a["a"])(t,"x","slice");if(0===o.rank)throw new Error("Slicing scalar is not possible");const u=(t,r)=>{const[i,a]=s["parseSliceParams"](o,e,n);return s["assertParamsValid"](o,i,a),r([o]),t.slice(o,i,a)},c={x:o},l={begin:e,size:n};return r["a"].runKernelFunc(u,c,null,i["wc"],l)}const c=Object(o["b"])({slice_:u})},"6d43":function(t,e,n){const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof i){if(t.loose===!!e.loose)return t;t=t.value}u("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(t){const e=this.options.loose?a[o.COMPARATORLOOSE]:a[o.COMPARATOR],n=t.match(e);if(!n)throw new TypeError("Invalid comparator: "+t);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new c(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(t){if(u("Comparator.test",t,this.options.loose),this.semver===r||t===r)return!0;if("string"===typeof t)try{t=new c(t,this.options)}catch(e){return!1}return s(t,this.operator,this.semver,this.options)}intersects(t,e){if(!(t instanceof i))throw new TypeError("a Comparator is required");if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return""===this.value||new l(t.value,e).test(this.value);if(""===t.operator)return""===t.value||new l(this.value,e).test(t.semver);const n=(">="===this.operator||">"===this.operator)&&(">="===t.operator||">"===t.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===t.operator||"<"===t.operator),a=this.semver.version===t.semver.version,o=(">="===this.operator||"<="===this.operator)&&(">="===t.operator||"<="===t.operator),u=s(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),c=s(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return n||r||a&&o||u||c}}t.exports=i;const{re:a,t:o}=n("8cb5"),s=n("c4be"),u=n("b802"),c=n("bbfd"),l=n("3fce")},"6da8":function(t,e){function n(t){return t.split("")}t.exports=n},"6e78":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function i(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var a=["Webkit","ms","Moz","O"];Object.keys(r).forEach((function(t){a.forEach((function(e){r[i(e,t)]=r[t]}))}));var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:r,shorthandPropertyExpansions:o};e.default=s},"6eb2":function(t,e,n){"use strict";var r=n("18e2"),i=n("1738"),a=Object(r["a"])((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/i["a"]}),(function(t){return t.getUTCDate()-1}));e["a"]=a;a.range},"6eeb":function(t,e,n){var r=n("da84"),i=n("9112"),a=n("5135"),o=n("ce4e"),s=n("8925"),u=n("69f3"),c=u.get,l=u.enforce,f=String(String).split("String");(t.exports=function(t,e,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||a(n,"name")||i(n,"name",e),l(n).source=f.join("string"==typeof e?e:"")),t!==r?(u?!d&&t[e]&&(c=!0):delete t[e],c?t[e]=n:i(t,e,n)):c?t[e]=n:o(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},"6f37":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("a3f7"),i=n("09f4"),a=n("a5aa"),o=n("54ef"),s=n("015f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=.2){const n=Object(r["a"])(t,"x","leakyRelu");return Object(i["a"])(Object(a["a"])(Object(s["a"])(e),n),n)}const c=Object(o["b"])({leakyRelu_:u})},"6f53":function(t,e,n){var r=n("83ab"),i=n("df75"),a=n("fc6a"),o=n("d1e7").f,s=function(t){return function(e){var n,s=a(e),u=i(s),c=u.length,l=0,f=[];while(c>l)n=u[l++],r&&!o.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}};t.exports={entries:s(!0),values:s(!1)}},"6fa7":function(t,e,n){const r=n("1cc6"),i=(t,e)=>t.sort((t,n)=>r(n,t,e));t.exports=i},"6fef":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","isNaN"),n={x:e};return r["a"].runKernelFunc(t=>t.isNaN(e),n,null,i["rb"])}const u=Object(o["b"])({isNaN_:s})},7156:function(t,e,n){var r=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var a,o;return i&&"function"==typeof(a=e.constructor)&&a!==n&&r(o=a.prototype)&&o!==n.prototype&&i(t,o),t}},"71db":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("35c9");function u(t){let e;return e=0===t.rank||1===t.rank?Object(s["a"])(t,[1,1,1,t.size]):2===t.rank?Object(s["a"])(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?Object(s["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t,e}var c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l(t,e,n,c,l,d){null==d&&(d=.001);const h=Object(a["a"])(t,"x","batchNorm"),p=Object(a["a"])(e,"mean","batchNorm"),m=Object(a["a"])(n,"variance","batchNorm");let g,b;null!=l&&(g=Object(a["a"])(l,"scale","batchNorm")),null!=c&&(b=Object(a["a"])(c,"offset","batchNorm")),o["assert"](p.rank===m.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),o["assert"](null==b||p.rank===b.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),o["assert"](null==g||p.rank===g.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const y=u(h),v=(t,e)=>(e([y,p,m,g]),t.batchNorm(y,f(p),f(m),f(b),f(g),d)),x={x:y,scale:g,offset:b,mean:p,variance:m},w={varianceEpsilon:d},O=r["a"].runKernelFunc(v,x,null,i["fb"],w);return Object(s["a"])(O,h.shape)}function f(t){return null==t?null:0===t.rank?Object(s["a"])(t,[t.size]):1===t.rank?t:2===t.rank?Object(s["a"])(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?Object(s["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t}const d=Object(c["b"])({batchNorm_:l})},"734c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;var r=n("473f"),i=c(r),a=n("b14b"),o=c(a),s=n("4856"),u=c(s);function c(t){return t&&t.__esModule?t:{default:t}}var l={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},f={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function d(t,e){if((0,o.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),r=0,a=n.length;r<a;++r){var s=n[r],u=[s];for(var c in e){var l=(0,i.default)(c);if(s.indexOf(l)>-1&&"order"!==l)for(var d=e[c],h=0,p=d.length;h<p;++h)u.unshift(s.replace(l,f[d[h]]+l))}n[r]=u.join(",")}return n.join(",")}function h(t,e,n,r){if("string"===typeof e&&l.hasOwnProperty(t)){var i=d(e,r),a=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(t){return!/-moz-|-ms-/.test(t)})).join(",");if(t.indexOf("Webkit")>-1)return a;var o=i.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(t){return!/-webkit-|-ms-/.test(t)})).join(",");return t.indexOf("Moz")>-1?o:(n["Webkit"+(0,u.default)(t)]=a,n["Moz"+(0,u.default)(t)]=o,i)}}t.exports=e["default"]},"73b8":function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"a",(function(){return p}));var r=n("b333"),i=n("f490");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const a=Object(i["a"])("kernelRegistry",()=>new Map),o=Object(i["a"])("gradRegistry",()=>new Map);function s(t,e){const n=m(t,e);return a.get(n)}function u(t){return o.get(t)}function c(t){const e=a.entries(),n=[];while(1){const{done:r,value:i}=e.next();if(r)break;const[a,o]=i,[s]=a.split("_");s===t&&n.push(o)}return n}function l(t){const{kernelName:e,backendName:n}=t,r=m(e,n);a.has(r)&&console.warn(`The kernel '${e}' for backend '${n}' is already registered`),a.set(r,t)}function f(t){const{kernelName:e}=t;o.has(e)&&Object(r["c"])().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${e}'`),o.set(e,t)}function d(t,e){const n=m(t,e);if(!a.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);a.delete(n)}function h(t){if(!o.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);o.delete(t)}function p(t,e){const n=c(t);n.forEach(t=>{const n=Object.assign({},t,{backendName:e});l(n)})}function m(t,e){return`${e}_${t}`}},"73d3":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("eb7e"),o=n("b818"),s=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n,s,c,l="NHWC",f){a["assert"](t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let d=t,h=e,p=!1;3===e.rank&&(p=!0,h=Object(u["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]]),d=[1,t[0],t[1],t[2]]),a["assert"](4===d.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+d.length+"."),a["assert"](4===h.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank "+h.rank),a["assert"](4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank);const m="NHWC"===l?d[3]:d[1],g="NHWC"===l?h.shape[3]:h.shape[1];a["assert"](m===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${m}) must match input depth for filter ${n.shape[2]}.`),a["assert"](g===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${g}) must match output depth for filter ${n.shape[3]}.`),null!=f&&a["assert"](a["isInt"](c),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${f} but got pad ${c}.`);const b=(t,e)=>{const r=1,i=o["g"](l),a=o["a"](d,n.shape,s,r,c,f,!1,i),u=t.conv2dDerInput(h,n,a);return e([h,n]),u},y={dy:h,filter:n},v={strides:s,pad:c,dataFormat:l,dimRoundingMode:f,inputShape:d},x=r["a"].runKernelFunc(b,y,null,i["C"],v);return p?Object(u["a"])(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const l=Object(s["b"])({conv2DBackpropInput_:c})},"73f8":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n=!1){const s=Object(a["a"])(t,"images","resizeBilinear");o["assert"](3===s.rank||4===s.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),o["assert"](2===e.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+e+".");let c=s,l=!1;3===s.rank&&(l=!0,c=Object(u["a"])(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const[f,d]=e,h=(t,e)=>(e([c]),t.resizeBilinear(c,f,d,n)),p={images:c},m={alignCorners:n,size:e},g=r["a"].runKernelFunc(h,p,null,i["hc"],m);return l?Object(u["a"])(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const l=Object(s["b"])({resizeBilinear_:c})},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"742c":function(t,e,n){"use strict";var r=n("18e2"),i=n("1738"),a=Object(r["a"])(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*i["c"])/i["a"],t=>t.getDate()-1);e["a"]=a;a.range},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),a=n("e538"),o=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||o(e,t,{value:a.f(t)})}},7559:function(t,e){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function r(t){return t.match(n)||[]}t.exports=r},7568:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(t,e=!1){console.log(t.toString(e))}n.d(e,"a",(function(){return r}))},7580:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){const s=Object(a["a"])(t,"x","spaceToBatchND");o["assert"](s.rank>=1+e.length,()=>`input rank ${s.rank} should be > than [blockShape] ${e.length}`),o["assert"](n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),o["assert"](s.shape.reduce((t,r,i)=>i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]===0:t,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const u=t=>t.spaceToBatchND(s,e,n),c={x:s},l={blockShape:e,paddings:n};return r["a"].runKernelFunc(u,c,null,i["zc"],l)}const c=Object(s["b"])({spaceToBatchND_:u})},"75f0":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});const i=n("b4db"),a=n("df37"),o=n("bd67"),s=n("8756"),u=n("ce1a4"),c=n("0846"),l=n("5629"),f=n("e0fa"),d=n("67a2"),h=n("6b6b"),p=n("dad4"),m=n("4149"),g=n("6bd5");e.version_vis=g.version;const b={barchart:i.barchart,table:l.table,histogram:s.histogram,linechart:u.linechart,scatterplot:c.scatterplot,confusionMatrix:a.confusionMatrix,heatmap:o.heatmap};e.render=b;const y={accuracy:m.accuracy,perClassAccuracy:m.perClassAccuracy,confusionMatrix:m.confusionMatrix};e.metrics=y;const v={history:f.history,fitCallbacks:f.fitCallbacks,perClassAccuracy:h.showPerClassAccuracy,valuesDistribution:p.valuesDistribution,layer:d.layer,modelSummary:d.modelSummary};e.show=v;var x=n("2f09");e.visor=x.visor,r(n("b7e4"))},7638:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=n("4856"),i=a(r);function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){if(t.hasOwnProperty(e))for(var r=t[e],a=0,o=r.length;a<o;++a)n[r[a]+(0,i.default)(e)]=n[e]}t.exports=e["default"]},7675:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("a3f7"),i=n("eb7e"),a=n("dd7e"),o=n("b818"),s=n("54ef"),u=n("35c9");function c(t,e,n,s,c="NWC",l=1,f){const d=Object(r["a"])(t,"x","conv1d"),h=Object(r["a"])(e,"filter","conv1d");let p=d,m=!1;2===d.rank&&(m=!0,p=Object(u["a"])(d,[1,d.shape[0],d.shape[1]])),i["assert"](3===p.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${p.rank}.`),i["assert"](3===h.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+h.rank+"."),null!=f&&i["assert"](i["isInt"](s),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${f} but got pad ${s}.`),i["assert"](p.shape[2]===h.shape[1],()=>`Error in conv1d: depth of input (${p.shape[2]}) must match input depth for filter ${h.shape[1]}.`),i["assert"](o["h"](n,l),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${l}'`),i["assert"]("NWC"===c,()=>`Error in conv1d: got dataFormat of ${c} but only NWC is currently supported.`);const g=Object(u["a"])(h,[1,h.shape[0],h.shape[1],h.shape[2]]),b=Object(u["a"])(p,[p.shape[0],1,p.shape[1],p.shape[2]]),y=[1,n],v=[1,l],x="NHWC",w=Object(a["a"])(b,g,y,s,x,v,f);return m?Object(u["a"])(w,[w.shape[2],w.shape[3]]):Object(u["a"])(w,[w.shape[0],w.shape[2],w.shape[3]])}const l=Object(s["b"])({conv1d_:c})},"76c2":function(t,e,n){"use strict";n.r(e),n.d(e,"makeTypesMatch",(function(){return o})),n.d(e,"assertTypesMatch",(function(){return s})),n.d(e,"isTensorInList",(function(){return u})),n.d(e,"getTensorsInContainer",(function(){return c}));var r=n("34d7"),i=n("23bf"),a=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e){if(t.dtype===e.dtype)return[t,e];const n=Object(i["c"])(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function s(t,e){Object(a["assert"])(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function u(t,e){return e.some(e=>e.id===t.id)}function c(t){const e=[],n=new Set;return l(t,e,n),e}function l(t,e,n){if(null==t)return;if(t instanceof r["a"])return void e.push(t);if(!f(t))return;const i=t;for(const r in i){const t=i[r];n.has(t)||(n.add(t),l(t,e,n))}}function f(t){return Array.isArray(t)||"object"===typeof t}},"76dd":function(t,e,n){var r=n("ce86");function i(t){return null==t?"":r(t)}t.exports=i},"77ae":function(t,e,n){"use strict";var r=n("18e2"),i=Object(r["a"])((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Object(r["a"])((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null},e["a"]=i;i.range},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7948:function(t,e){function n(t,e){var n=-1,r=null==t?0:t.length,i=Array(r);while(++n<r)i[n]=e(t[n],n,t);return i}t.exports=n},"7a23":function(t,e,n){"use strict";n.d(e,"n",(function(){return r["J"]})),n.d(e,"a",(function(){return Ln})),n.d(e,"c",(function(){return Yn})),n.d(e,"d",(function(){return ar})),n.d(e,"e",(function(){return ir})),n.d(e,"f",(function(){return er})),n.d(e,"g",(function(){return Ur})),n.d(e,"h",(function(){return cr})),n.d(e,"i",(function(){return Gn})),n.d(e,"j",(function(){return xe})),n.d(e,"k",(function(){return ve})),n.d(e,"l",(function(){return qr})),n.d(e,"m",(function(){return Rn})),n.d(e,"o",(function(){return we})),n.d(e,"b",(function(){return Li}));var r=n("9ff4");const i=new WeakMap,a=[];let o;const s=Symbol(""),u=Symbol("");function c(t){return t&&!0===t._isEffect}function l(t,e=r["b"]){c(t)&&(t=t.raw);const n=h(t,e);return e.lazy||n(),n}function f(t){t.active&&(p(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let d=0;function h(t,e){const n=function(){if(!n.active)return e.scheduler?void 0:t();if(!a.includes(n)){p(n);try{return y(),a.push(n),o=n,t()}finally{a.pop(),v(),o=a[a.length-1]}}};return n.id=d++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}function p(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let m=!0;const g=[];function b(){g.push(m),m=!1}function y(){g.push(m),m=!0}function v(){const t=g.pop();m=void 0===t||t}function x(t,e,n){if(!m||void 0===o)return;let r=i.get(t);r||i.set(t,r=new Map);let a=r.get(n);a||r.set(n,a=new Set),a.has(o)||(a.add(o),o.deps.push(a))}function w(t,e,n,a,c,l){const f=i.get(t);if(!f)return;const d=new Set,h=t=>{t&&t.forEach(t=>{(t!==o||t.allowRecurse)&&d.add(t)})};if("clear"===e)f.forEach(h);else if("length"===n&&Object(r["n"])(t))f.forEach((t,e)=>{("length"===e||e>=a)&&h(t)});else switch(void 0!==n&&h(f.get(n)),e){case"add":Object(r["n"])(t)?Object(r["r"])(n)&&h(f.get("length")):(h(f.get(s)),Object(r["s"])(t)&&h(f.get(u)));break;case"delete":Object(r["n"])(t)||(h(f.get(s)),Object(r["s"])(t)&&h(f.get(u)));break;case"set":Object(r["s"])(t)&&h(f.get(s));break}const p=t=>{t.options.scheduler?t.options.scheduler(t):t()};d.forEach(p)}const O=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(r["C"])),_=E(),A=E(!1,!0),j=E(!0),k=E(!0,!0),C={};function E(t=!1,e=!1){return function(n,i,a){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_raw"===i&&a===(t?st:ot).get(n))return n;const o=Object(r["n"])(n);if(o&&Object(r["k"])(C,i))return Reflect.get(C,i,a);const s=Reflect.get(n,i,a);if(Object(r["C"])(i)?O.has(i):"__proto__"===i||"__v_isRef"===i)return s;if(t||x(n,"get",i),e)return s;if(yt(s)){const t=!o||!Object(r["r"])(i);return t?s.value:s}return Object(r["u"])(s)?t?dt(s):lt(s):s}}["includes","indexOf","lastIndexOf"].forEach(t=>{const e=Array.prototype[t];C[t]=function(...t){const n=bt(this);for(let e=0,i=this.length;e<i;e++)x(n,"get",e+"");const r=e.apply(n,t);return-1===r||!1===r?e.apply(n,t.map(bt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{const e=Array.prototype[t];C[t]=function(...t){b();const n=e.apply(this,t);return v(),n}});const S=F(),D=F(!0);function F(t=!1){return function(e,n,i,a){const o=e[n];if(!t&&(i=bt(i),!Object(r["n"])(e)&&yt(o)&&!yt(i)))return o.value=i,!0;const s=Object(r["n"])(e)&&Object(r["r"])(n)?Number(n)<e.length:Object(r["k"])(e,n),u=Reflect.set(e,n,i,a);return e===bt(a)&&(s?Object(r["j"])(i,o)&&w(e,"set",n,i,o):w(e,"add",n,i)),u}}function N(t,e){const n=Object(r["k"])(t,e),i=t[e],a=Reflect.deleteProperty(t,e);return a&&n&&w(t,"delete",e,void 0,i),a}function T(t,e){const n=Reflect.has(t,e);return Object(r["C"])(e)&&O.has(e)||x(t,"has",e),n}function M(t){return x(t,"iterate",Object(r["n"])(t)?"length":s),Reflect.ownKeys(t)}const I={get:_,set:S,deleteProperty:N,has:T,ownKeys:M},R={get:j,set(t,e){return!0},deleteProperty(t,e){return!0}},$=Object(r["h"])({},I,{get:A,set:D}),B=(Object(r["h"])({},R,{get:k}),t=>Object(r["u"])(t)?lt(t):t),z=t=>Object(r["u"])(t)?dt(t):t,L=t=>t,P=t=>Reflect.getPrototypeOf(t);function U(t,e,n=!1,r=!1){t=t["__v_raw"];const i=bt(t),a=bt(e);e!==a&&!n&&x(i,"get",e),!n&&x(i,"get",a);const{has:o}=P(i),s=n?z:r?L:B;return o.call(i,e)?s(t.get(e)):o.call(i,a)?s(t.get(a)):void 0}function W(t,e=!1){const n=this["__v_raw"],r=bt(n),i=bt(t);return t!==i&&!e&&x(r,"has",t),!e&&x(r,"has",i),t===i?n.has(t):n.has(t)||n.has(i)}function q(t,e=!1){return t=t["__v_raw"],!e&&x(bt(t),"iterate",s),Reflect.get(t,"size",t)}function V(t){t=bt(t);const e=bt(this),n=P(e),r=n.has.call(e,t),i=e.add(t);return r||w(e,"add",t,t),i}function G(t,e){e=bt(e);const n=bt(this),{has:i,get:a}=P(n);let o=i.call(n,t);o||(t=bt(t),o=i.call(n,t));const s=a.call(n,t),u=n.set(t,e);return o?Object(r["j"])(e,s)&&w(n,"set",t,e,s):w(n,"add",t,e),u}function H(t){const e=bt(this),{has:n,get:r}=P(e);let i=n.call(e,t);i||(t=bt(t),i=n.call(e,t));const a=r?r.call(e,t):void 0,o=e.delete(t);return i&&w(e,"delete",t,void 0,a),o}function X(){const t=bt(this),e=0!==t.size,n=void 0,r=t.clear();return e&&w(t,"clear",void 0,void 0,n),r}function Y(t,e){return function(n,r){const i=this,a=i["__v_raw"],o=bt(a),u=t?z:e?L:B;return!t&&x(o,"iterate",s),a.forEach((t,e)=>n.call(r,u(t),u(e),i))}}function K(t,e,n){return function(...i){const a=this["__v_raw"],o=bt(a),c=Object(r["s"])(o),l="entries"===t||t===Symbol.iterator&&c,f="keys"===t&&c,d=a[t](...i),h=e?z:n?L:B;return!e&&x(o,"iterate",f?u:s),{next(){const{value:t,done:e}=d.next();return e?{value:t,done:e}:{value:l?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function J(t){return function(...e){return"delete"!==t&&this}}const Z={get(t){return U(this,t)},get size(){return q(this)},has:W,add:V,set:G,delete:H,clear:X,forEach:Y(!1,!1)},Q={get(t){return U(this,t,!1,!0)},get size(){return q(this)},has:W,add:V,set:G,delete:H,clear:X,forEach:Y(!1,!0)},tt={get(t){return U(this,t,!0)},get size(){return q(this,!0)},has(t){return W.call(this,t,!0)},add:J("add"),set:J("set"),delete:J("delete"),clear:J("clear"),forEach:Y(!0,!1)},et=["keys","values","entries",Symbol.iterator];function nt(t,e){const n=e?Q:t?tt:Z;return(e,i,a)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get(Object(r["k"])(n,i)&&i in e?n:e,i,a)}et.forEach(t=>{Z[t]=K(t,!1,!1),tt[t]=K(t,!0,!1),Q[t]=K(t,!1,!0)});const rt={get:nt(!1,!1)},it={get:nt(!1,!0)},at={get:nt(!0,!1)};const ot=new WeakMap,st=new WeakMap;function ut(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ct(t){return t["__v_skip"]||!Object.isExtensible(t)?0:ut(Object(r["M"])(t))}function lt(t){return t&&t["__v_isReadonly"]?t:ht(t,!1,I,rt)}function ft(t){return ht(t,!1,$,it)}function dt(t){return ht(t,!0,R,at)}function ht(t,e,n,i){if(!Object(r["u"])(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const a=e?st:ot,o=a.get(t);if(o)return o;const s=ct(t);if(0===s)return t;const u=new Proxy(t,2===s?i:n);return a.set(t,u),u}function pt(t){return mt(t)?pt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function mt(t){return!(!t||!t["__v_isReadonly"])}function gt(t){return pt(t)||mt(t)}function bt(t){return t&&bt(t["__v_raw"])||t}function yt(t){return Boolean(t&&!0===t.__v_isRef)}function vt(t){return yt(t)?t.value:t}const xt={get:(t,e,n)=>vt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return yt(i)&&!yt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function wt(t){return pt(t)?t:new Proxy(t,xt)}class Ot{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=l(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,w(bt(this),"set","value"))}}),this["__v_isReadonly"]=n}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),x(bt(this),"get","value"),this._value}set value(t){this._setter(t)}}function _t(t){let e,n;return Object(r["o"])(t)?(e=t,n=r["d"]):(e=t.get,n=t.set),new Ot(e,n,Object(r["o"])(t)||!t.set)}function At(t,e,n,r){let i;try{i=r?t(...r):t()}catch(a){kt(a,e,n)}return i}function jt(t,e,n,i){if(Object(r["o"])(t)){const a=At(t,e,n,i);return a&&Object(r["w"])(a)&&a.catch(t=>{kt(t,e,n)}),a}const a=[];for(let r=0;r<t.length;r++)a.push(jt(t[r],e,n,i));return a}function kt(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const i=e.proxy,a=n;while(r){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,a))return;r=r.parent}const o=e.appContext.config.errorHandler;if(o)return void At(o,null,10,[t,i,a])}Ct(t,n,i,r)}function Ct(t,e,n,r=!0){console.error(t)}let Et=!1,St=!1;const Dt=[];let Ft=0;const Nt=[];let Tt=null,Mt=0;const It=[];let Rt=null,$t=0;const Bt=Promise.resolve();let zt=null,Lt=null;function Pt(t){const e=zt||Bt;return t?e.then(this?t.bind(this):t):e}function Ut(t){Dt.length&&Dt.includes(t,Et&&t.allowRecurse?Ft+1:Ft)||t===Lt||(Dt.push(t),Wt())}function Wt(){Et||St||(St=!0,zt=Bt.then(Jt))}function qt(t){const e=Dt.indexOf(t);e>-1&&(Dt[e]=null)}function Vt(t,e,n,i){Object(r["n"])(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?i+1:i)||n.push(t),Wt()}function Gt(t){Vt(t,Tt,Nt,Mt)}function Ht(t){Vt(t,Rt,It,$t)}function Xt(t,e=null){if(Nt.length){for(Lt=e,Tt=[...new Set(Nt)],Nt.length=0,Mt=0;Mt<Tt.length;Mt++)Tt[Mt]();Tt=null,Mt=0,Lt=null,Xt(t,e)}}function Yt(t){if(It.length){const t=[...new Set(It)];if(It.length=0,Rt)return void Rt.push(...t);for(Rt=t,Rt.sort((t,e)=>Kt(t)-Kt(e)),$t=0;$t<Rt.length;$t++)Rt[$t]();Rt=null,$t=0}}const Kt=t=>null==t.id?1/0:t.id;function Jt(t){St=!1,Et=!0,Xt(t),Dt.sort((t,e)=>Kt(t)-Kt(e));try{for(Ft=0;Ft<Dt.length;Ft++){const t=Dt[Ft];t&&At(t,null,14)}}finally{Ft=0,Dt.length=0,Yt(t),Et=!1,zt=null,(Dt.length||It.length)&&Jt(t)}}new Set;new Map;function Zt(t,e,...n){const i=t.vnode.props||r["b"];let a=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in i){const t=("modelValue"===s?"model":s)+"Modifiers",{number:e,trim:o}=i[t]||r["b"];o?a=n.map(t=>t.trim()):e&&(a=n.map(r["L"]))}let u=Object(r["K"])(Object(r["e"])(e)),c=i[u];!c&&o&&(u=Object(r["K"])(Object(r["l"])(e)),c=i[u]),c&&jt(c,t,6,a);const l=i[u+"Once"];if(l){if(t.emitted){if(t.emitted[u])return}else(t.emitted={})[u]=!0;jt(l,t,6,a)}}function Qt(t,e,n=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const i=t.emits;let a={},o=!1;if(!Object(r["o"])(t)){const i=t=>{o=!0,Object(r["h"])(a,Qt(t,e,!0))};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return i||o?(Object(r["n"])(i)?i.forEach(t=>a[t]=null):Object(r["h"])(a,i),t.__emits=a):t.__emits=null}function te(t,e){return!(!t||!Object(r["v"])(e))&&(e=e.replace(/Once$/,""),Object(r["k"])(t,e[2].toLowerCase()+e.slice(3))||Object(r["k"])(t,e.slice(2)))}let ee=null;function ne(t){ee=t}function re(t){const{type:e,vnode:n,proxy:i,withProxy:a,props:o,propsOptions:[s],slots:u,attrs:c,emit:l,render:f,renderCache:d,data:h,setupState:p,ctx:m}=t;let g;ee=t;try{let t;if(4&n.shapeFlag){const e=a||i;g=or(f.call(e,e,d,o,p,h,m)),t=c}else{const n=e;0,g=or(n.length>1?n(o,{attrs:c,slots:u,emit:l}):n(o,null)),t=e.props?c:ae(c)}let b=g;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:n}=b;e.length&&(1&n||6&n)&&(s&&e.some(r["t"])&&(t=oe(t,s)),b=rr(b,t))}n.dirs&&(b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),g=b}catch(b){kt(b,t,1),g=er(Un)}return ee=null,g}function ie(t){const e=t.filter(t=>!(Kn(t)&&t.type===Un&&"v-if"!==t.children));return 1===e.length&&Kn(e[0])?e[0]:null}const ae=t=>{let e;for(const n in t)("class"===n||"style"===n||Object(r["v"])(n))&&((e||(e={}))[n]=t[n]);return e},oe=(t,e)=>{const n={};for(const i in t)Object(r["t"])(i)&&i.slice(9)in e||(n[i]=t[i]);return n};function se(t,e,n){const{props:r,children:i,component:a}=t,{props:o,children:s,patchFlag:u}=e,c=a.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>0))return!(!i&&!s||s&&s.$stable)||r!==o&&(r?!o||ue(r,o,c):!!o);if(1024&u)return!0;if(16&u)return r?ue(r,o,c):!!o;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(o[n]!==r[n]&&!te(c,n))return!0}}return!1}function ue(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const a=r[i];if(e[a]!==t[a]&&!te(n,a))return!0}return!1}function ce({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const le=t=>t.__isSuspense;function fe(t){const{shapeFlag:e,children:n}=t;let r,i;return 32&e?(r=de(n.default),i=de(n.fallback)):(r=de(n),i=or(null)),{content:r,fallback:i}}function de(t){if(Object(r["o"])(t)&&(t=t()),Object(r["n"])(t)){const e=ie(t);0,t=e}return or(t)}function he(t,e){e&&e.pendingBranch?Object(r["n"])(t)?e.effects.push(...t):e.effects.push(t):Ht(t)}let pe=0;const me=t=>pe+=t;function ge(t,e=ee){if(!e)return t;const n=(...n)=>{pe||Gn(!0);const r=ee;ne(e);const i=t(...n);return ne(r),pe||Hn(),i};return n._c=!0,n}let be=null;const ye=[];function ve(t){ye.push(be=t)}function xe(){ye.pop(),be=ye[ye.length-1]||null}function we(t){return e=>ge((function(){ve(t);const n=e.apply(this,arguments);return xe(),n}))}function Oe(t,e,n,i=!1){const a={},o={};Object(r["g"])(o,Zn,1),Ae(t,e,a,o),n?t.props=i?a:ft(a):t.type.props?t.props=a:t.props=o,t.attrs=o}function _e(t,e,n,i){const{props:a,attrs:o,vnode:{patchFlag:s}}=t,u=bt(a),[c]=t.propsOptions;if(!(i||s>0)||16&s){let i;Ae(t,e,a,o);for(const o in u)e&&(Object(r["k"])(e,o)||(i=Object(r["l"])(o))!==o&&Object(r["k"])(e,i))||(c?!n||void 0===n[o]&&void 0===n[i]||(a[o]=je(c,e||r["b"],o,void 0,t)):delete a[o]);if(o!==u)for(const t in o)e&&Object(r["k"])(e,t)||delete o[t]}else if(8&s){const n=t.vnode.dynamicProps;for(let i=0;i<n.length;i++){const s=n[i],l=e[s];if(c)if(Object(r["k"])(o,s))o[s]=l;else{const e=Object(r["e"])(s);a[e]=je(c,u,e,l,t)}else o[s]=l}}w(t,"set","$attrs")}function Ae(t,e,n,i){const[a,o]=t.propsOptions;if(e)for(const s in e){const o=e[s];if(Object(r["x"])(s))continue;let u;a&&Object(r["k"])(a,u=Object(r["e"])(s))?n[u]=o:te(t.emitsOptions,s)||(i[s]=o)}if(o){const e=bt(n);for(let r=0;r<o.length;r++){const i=o[r];n[i]=je(a,e,i,e[i],t)}}}function je(t,e,n,i,a){const o=t[n];if(null!=o){const t=Object(r["k"])(o,"default");if(t&&void 0===i){const t=o.default;o.type!==Function&&Object(r["o"])(t)?(Fr(a),i=t(e),Fr(null)):i=t}o[0]&&(Object(r["k"])(e,n)||t?!o[1]||""!==i&&i!==Object(r["l"])(n)||(i=!0):i=!1)}return i}function ke(t,e,n=!1){if(!e.deopt&&t.__props)return t.__props;const i=t.props,a={},o=[];let s=!1;if(!Object(r["o"])(t)){const i=t=>{s=!0;const[n,i]=ke(t,e,!0);Object(r["h"])(a,n),i&&o.push(...i)};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!i&&!s)return t.__props=r["a"];if(Object(r["n"])(i))for(let u=0;u<i.length;u++){0;const t=Object(r["e"])(i[u]);Ce(t)&&(a[t]=r["b"])}else if(i){0;for(const t in i){const e=Object(r["e"])(t);if(Ce(e)){const n=i[t],s=a[e]=Object(r["n"])(n)||Object(r["o"])(n)?{type:n}:n;if(s){const t=De(Boolean,s.type),n=De(String,s.type);s[0]=t>-1,s[1]=n<0||t<n,(t>-1||Object(r["k"])(s,"default"))&&o.push(e)}}}}return t.__props=[a,o]}function Ce(t){return"$"!==t[0]}function Ee(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Se(t,e){return Ee(t)===Ee(e)}function De(t,e){if(Object(r["n"])(e)){for(let n=0,r=e.length;n<r;n++)if(Se(e[n],t))return n}else if(Object(r["o"])(e))return Se(e,t)?0:-1;return-1}function Fe(t,e,n=Sr,r=!1){if(n){const i=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;b(),Fr(n);const i=jt(e,n,t,r);return Fr(null),v(),i});return r?i.unshift(a):i.push(a),a}}const Ne=t=>(e,n=Sr)=>!Tr&&Fe(t,e,n),Te=Ne("bm"),Me=Ne("m"),Ie=Ne("bu"),Re=Ne("u"),$e=Ne("bum"),Be=Ne("um"),ze=Ne("rtg"),Le=Ne("rtc"),Pe=(t,e=Sr)=>{Fe("ec",t,e)};const Ue={};function We(t,e,n){return qe(t,e,n)}function qe(t,e,{immediate:n,deep:i,flush:a,onTrack:o,onTrigger:s}=r["b"],u=Sr){let c,d,h=!1;if(yt(t)?(c=()=>t.value,h=!!t._shallow):pt(t)?(c=()=>t,i=!0):c=Object(r["n"])(t)?()=>t.map(t=>yt(t)?t.value:pt(t)?Ge(t):Object(r["o"])(t)?At(t,u,2):void 0):Object(r["o"])(t)?e?()=>At(t,u,2):()=>{if(!u||!u.isUnmounted)return d&&d(),At(t,u,3,[p])}:r["d"],e&&i){const t=c;c=()=>Ge(t())}const p=t=>{d=y.options.onStop=()=>{At(t,u,4)}};let m=Object(r["n"])(t)?[]:Ue;const g=()=>{if(y.active)if(e){const t=y();(i||h||Object(r["j"])(t,m))&&(d&&d(),jt(e,u,3,[t,m===Ue?void 0:m,p]),m=t)}else y()};let b;g.allowRecurse=!!e,b="sync"===a?g:"post"===a?()=>kn(g,u&&u.suspense):()=>{!u||u.isMounted?Gt(g):g()};const y=l(c,{lazy:!0,onTrack:o,onTrigger:s,scheduler:b});return zr(y),e?n?g():m=y():"post"===a?kn(y,u&&u.suspense):y(),()=>{f(y),u&&Object(r["I"])(u.effects,y)}}function Ve(t,e,n){const i=this.proxy,a=Object(r["B"])(t)?()=>i[t]:t.bind(i);return qe(a,e.bind(i),n,this)}function Ge(t,e=new Set){if(!Object(r["u"])(t)||e.has(t))return t;if(e.add(t),yt(t))Ge(t.value,e);else if(Object(r["n"])(t))for(let n=0;n<t.length;n++)Ge(t[n],e);else if(Object(r["z"])(t)||Object(r["s"])(t))t.forEach(t=>{Ge(t,e)});else for(const n in t)Ge(t[n],e);return t}function He(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Me(()=>{t.isMounted=!0}),$e(()=>{t.isUnmounting=!0}),t}const Xe=[Function,Array],Ye={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xe,onEnter:Xe,onAfterEnter:Xe,onEnterCancelled:Xe,onBeforeLeave:Xe,onLeave:Xe,onAfterLeave:Xe,onLeaveCancelled:Xe,onBeforeAppear:Xe,onAppear:Xe,onAfterAppear:Xe,onAppearCancelled:Xe},setup(t,{slots:e}){const n=Dr(),r=He();let i;return()=>{const a=e.default&&nn(e.default(),!0);if(!a||!a.length)return;const o=bt(t),{mode:s}=o;const u=a[0];if(r.isLeaving)return Qe(u);const c=tn(u);if(!c)return Qe(u);const l=Ze(c,o,r,n);en(c,l);const f=n.subTree,d=f&&tn(f);let h=!1;const{getTransitionKey:p}=c.type;if(p){const t=p();void 0===i?i=t:t!==i&&(i=t,h=!0)}if(d&&d.type!==Un&&(!Jn(c,d)||h)){const t=Ze(d,o,r,n);if(en(d,t),"out-in"===s)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},Qe(u);"in-out"===s&&(t.delayLeave=(t,e,n)=>{const i=Je(r,d);i[String(d.key)]=d,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return u}}},Ke=Ye;function Je(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ze(t,e,n,r){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:s,onEnter:u,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:f,onLeave:d,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:b,onAppearCancelled:y}=e,v=String(t.key),x=Je(n,t),w=(t,e)=>{t&&jt(t,r,9,e)},O={mode:a,persisted:o,beforeEnter(e){let r=s;if(!n.isMounted){if(!i)return;r=m||s}e._leaveCb&&e._leaveCb(!0);const a=x[v];a&&Jn(t,a)&&a.el._leaveCb&&a.el._leaveCb(),w(r,[e])},enter(t){let e=u,r=c,a=l;if(!n.isMounted){if(!i)return;e=g||u,r=b||c,a=y||l}let o=!1;const s=t._enterCb=e=>{o||(o=!0,w(e?a:r,[t]),O.delayedLeave&&O.delayedLeave(),t._enterCb=void 0)};e?(e(t,s),e.length<=1&&s()):s()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();w(f,[e]);let a=!1;const o=e._leaveCb=n=>{a||(a=!0,r(),w(n?p:h,[e]),e._leaveCb=void 0,x[i]===t&&delete x[i])};x[i]=t,d?(d(e,o),d.length<=1&&o()):o()},clone(t){return Ze(t,e,n,r)}};return O}function Qe(t){if(rn(t))return t=rr(t),t.children=null,t}function tn(t){return rn(t)?t.children?t.children[0]:void 0:t}function en(t,e){6&t.shapeFlag&&t.component?en(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function nn(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const a=t[i];a.type===Ln?(128&a.patchFlag&&r++,n=n.concat(nn(a.children,e))):(e||a.type!==Un)&&n.push(a)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}const rn=t=>t.type.__isKeepAlive;RegExp,RegExp;function an(t){return t.displayName||t.name}function on(t,e){return Object(r["n"])(t)?t.some(t=>on(t,e)):Object(r["B"])(t)?t.split(",").indexOf(e)>-1:!!t.test&&t.test(e)}function sn(t,e){cn(t,"a",e)}function un(t,e){cn(t,"da",e)}function cn(t,e,n=Sr){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}t()});if(Fe(e,r,n),n){let t=n.parent;while(t&&t.parent)rn(t.parent.vnode)&&ln(r,e,n,t),t=t.parent}}function ln(t,e,n,i){const a=Fe(e,t,i,!0);Be(()=>{Object(r["I"])(i[e],a)},n)}function fn(t){let e=t.shapeFlag;256&e&&(e-=256),512&e&&(e-=512),t.shapeFlag=e}function dn(t){return 128&t.shapeFlag?t.ssContent:t}const hn=t=>"_"===t[0]||"$stable"===t,pn=t=>Object(r["n"])(t)?t.map(or):[or(t)],mn=(t,e,n)=>ge(t=>pn(e(t)),n),gn=(t,e)=>{const n=t._ctx;for(const i in t){if(hn(i))continue;const a=t[i];if(Object(r["o"])(a))e[i]=mn(i,a,n);else if(null!=a){0;const t=pn(a);e[i]=()=>t}}},bn=(t,e)=>{const n=pn(e);t.slots.default=()=>n},yn=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=e,Object(r["g"])(e,"_",n)):gn(e,t.slots={})}else t.slots={},e&&bn(t,e);Object(r["g"])(t.slots,Zn,1)},vn=(t,e)=>{const{vnode:n,slots:i}=t;let a=!0,o=r["b"];if(32&n.shapeFlag){const t=e._;t?1===t?a=!1:Object(r["h"])(i,e):(a=!e.$stable,gn(e,i)),o=e}else e&&(bn(t,e),o={default:1});if(a)for(const r in i)hn(r)||r in o||delete i[r]};function xn(t,e,n,r){const i=t.dirs,a=e&&e.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);const u=s.dir[r];u&&jt(u,n,8,[t.el,s,t,e])}}function wn(){return{app:null,config:{isNativeTag:r["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:r["c"],errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let On=0;function _n(t,e){return function(n,i=null){null==i||Object(r["u"])(i)||(i=null);const a=wn(),o=new Set;let s=!1;const u=a.app={_uid:On++,_component:n,_props:i,_container:null,_context:a,version:Vr,get config(){return a.config},set config(t){0},use(t,...e){return o.has(t)||(t&&Object(r["o"])(t.install)?(o.add(t),t.install(u,...e)):Object(r["o"])(t)&&(o.add(t),t(u,...e))),u},mixin(t){return a.mixins.includes(t)||(a.mixins.push(t),(t.props||t.emits)&&(a.deopt=!0)),u},component(t,e){return e?(a.components[t]=e,u):a.components[t]},directive(t,e){return e?(a.directives[t]=e,u):a.directives[t]},mount(r,o){if(!s){const c=er(n,i);return c.appContext=a,o&&e?e(c,r):t(c,r),s=!0,u._container=r,r.__vue_app__=u,c.component.proxy}},unmount(){s&&t(null,u._container)},provide(t,e){return a.provides[t]=e,u}};return u}}function An(){}const jn={scheduler:Ut,allowRecurse:!0};const kn=he,Cn=(t,e,n,i,a)=>{if(Object(r["n"])(t))return void t.forEach((t,o)=>Cn(t,e&&(Object(r["n"])(e)?e[o]:e),n,i,a));let o;o=a?4&a.shapeFlag?a.component.proxy:a.el:null;const{i:s,r:u}=t;const c=e&&e.r,l=s.refs===r["b"]?s.refs={}:s.refs,f=s.setupState;if(null!=c&&c!==u&&(Object(r["B"])(c)?(l[c]=null,Object(r["k"])(f,c)&&(f[c]=null)):yt(c)&&(c.value=null)),Object(r["B"])(u)){const t=()=>{l[u]=o,Object(r["k"])(f,u)&&(f[u]=o)};o?(t.id=-1,kn(t,i)):t()}else if(yt(u)){const t=()=>{u.value=o};o?(t.id=-1,kn(t,i)):t()}else Object(r["o"])(u)&&At(u,n,12,[o,l])};function En(t){return Sn(t)}function Sn(t,e){An();const{insert:n,remove:i,patchProp:a,forcePatchProp:o,createElement:s,createText:u,createComment:c,setText:d,setElementText:h,parentNode:p,nextSibling:m,setScopeId:g=r["d"],cloneNode:b,insertStaticContent:y}=t,v=(t,e,n,r=null,i=null,a=null,o=!1,s=!1)=>{t&&!Jn(t,e)&&(r=V(t),L(t,i,a,!0),t=null),-2===e.patchFlag&&(s=!1,e.dynamicChildren=null);const{type:u,ref:c,shapeFlag:l}=e;switch(u){case Pn:x(t,e,n,r);break;case Un:w(t,e,n,r);break;case Wn:null==t&&O(e,n,r,o);break;case Ln:D(t,e,n,r,i,a,o,s);break;default:1&l?_(t,e,n,r,i,a,o,s):6&l?F(t,e,n,r,i,a,o,s):(64&l||128&l)&&u.process(t,e,n,r,i,a,o,s,H)}null!=c&&i&&Cn(c,t&&t.ref,i,a,e)},x=(t,e,r,i)=>{if(null==t)n(e.el=u(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&d(n,e.children)}},w=(t,e,r,i)=>{null==t?n(e.el=c(e.children||""),r,i):e.el=t.el},O=(t,e,n,r)=>{[t.el,t.anchor]=y(t.children,e,n,r)},_=(t,e,n,r,i,a,o,s)=>{o=o||"svg"===e.type,null==t?A(e,n,r,i,a,o,s):C(t,e,i,a,o,s)},A=(t,e,i,o,u,c,l)=>{let f,d;const{type:p,props:m,shapeFlag:g,transition:y,scopeId:v,patchFlag:x,dirs:w}=t;if(t.el&&void 0!==b&&-1===x)f=t.el=b(t.el);else{if(f=t.el=s(t.type,c,m&&m.is),8&g?h(f,t.children):16&g&&k(t.children,f,null,o,u,c&&"foreignObject"!==p,l||!!t.dynamicChildren),w&&xn(t,null,o,"created"),m){for(const e in m)Object(r["x"])(e)||a(f,e,null,m[e],c,t.children,o,u,q);(d=m.onVnodeBeforeMount)&&Dn(d,o,t)}j(f,v,t,o)}w&&xn(t,null,o,"beforeMount");const O=(!u||u&&!u.pendingBranch)&&y&&!y.persisted;O&&y.beforeEnter(f),n(f,e,i),((d=m&&m.onVnodeMounted)||O||w)&&kn(()=>{d&&Dn(d,o,t),O&&y.enter(f),w&&xn(t,null,o,"mounted")},u)},j=(t,e,n,r)=>{if(e&&g(t,e),r){const i=r.type.__scopeId;i&&i!==e&&g(t,i+"-s");let a=r.subTree;0,n===a&&j(t,r.vnode.scopeId,r.vnode,r.parent)}},k=(t,e,n,r,i,a,o,s=0)=>{for(let u=s;u<t.length;u++){const s=t[u]=o?sr(t[u]):or(t[u]);v(null,s,e,n,r,i,a,o)}},C=(t,e,n,i,s,u)=>{const c=e.el=t.el;let{patchFlag:l,dynamicChildren:f,dirs:d}=e;l|=16&t.patchFlag;const p=t.props||r["b"],m=e.props||r["b"];let g;if((g=m.onVnodeBeforeUpdate)&&Dn(g,n,e,t),d&&xn(e,t,n,"beforeUpdate"),l>0){if(16&l)S(c,e,p,m,n,i,s);else if(2&l&&p.class!==m.class&&a(c,"class",null,m.class,s),4&l&&a(c,"style",p.style,m.style,s),8&l){const r=e.dynamicProps;for(let e=0;e<r.length;e++){const u=r[e],l=p[u],f=m[u];(f!==l||o&&o(c,u))&&a(c,u,l,f,s,t.children,n,i,q)}}1&l&&t.children!==e.children&&h(c,e.children)}else u||null!=f||S(c,e,p,m,n,i,s);const b=s&&"foreignObject"!==e.type;f?E(t.dynamicChildren,f,c,n,i,b):u||R(t,e,c,null,n,i,b),((g=m.onVnodeUpdated)||d)&&kn(()=>{g&&Dn(g,n,e,t),d&&xn(e,t,n,"updated")},i)},E=(t,e,n,r,i,a)=>{for(let o=0;o<e.length;o++){const s=t[o],u=e[o],c=s.type===Ln||!Jn(s,u)||6&s.shapeFlag||64&s.shapeFlag?p(s.el):n;v(s,u,c,null,r,i,a,!0)}},S=(t,e,n,i,s,u,c)=>{if(n!==i){for(const l in i){if(Object(r["x"])(l))continue;const f=i[l],d=n[l];(f!==d||o&&o(t,l))&&a(t,l,d,f,c,e.children,s,u,q)}if(n!==r["b"])for(const o in n)Object(r["x"])(o)||o in i||a(t,o,n[o],null,c,e.children,s,u,q)}},D=(t,e,r,i,a,o,s,c)=>{const l=e.el=t?t.el:u(""),f=e.anchor=t?t.anchor:u("");let{patchFlag:d,dynamicChildren:h}=e;d>0&&(c=!0),null==t?(n(l,r,i),n(f,r,i),k(e.children,r,f,a,o,s,c)):d>0&&64&d&&h?(E(t.dynamicChildren,h,r,a,o,s),(null!=e.key||a&&e===a.subTree)&&Fn(t,e,!0)):R(t,e,r,f,a,o,s,c)},F=(t,e,n,r,i,a,o,s)=>{null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,o,s):N(e,n,r,i,a,o,s):T(t,e,s)},N=(t,e,n,r,i,a,o)=>{const s=t.component=Er(t,r,i);if(rn(t)&&(s.ctx.renderer=H),Mr(s),s.asyncDep){if(i&&i.registerDep(s,M),!t.el){const t=s.subTree=er(Un);w(null,t,e,n)}}else M(s,t,e,n,i,a,o)},T=(t,e,n)=>{const r=e.component=t.component;if(se(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void I(r,e,n);r.next=e,qt(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},M=(t,e,n,i,a,o,s)=>{t.update=l((function(){if(t.isMounted){let e,{next:n,bu:i,u:u,parent:c,vnode:l}=t,f=n;0,n?(n.el=l.el,I(t,n,s)):n=l,i&&Object(r["m"])(i),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Dn(e,c,n,l);const d=re(t);0;const h=t.subTree;t.subTree=d,v(h,d,p(h.el),V(h),t,a,o),n.el=d.el,null===f&&ce(t,d.el),u&&kn(u,a),(e=n.props&&n.props.onVnodeUpdated)&&kn(()=>{Dn(e,c,n,l)},a)}else{let s;const{el:u,props:c}=e,{bm:l,m:f,parent:d}=t;l&&Object(r["m"])(l),(s=c&&c.onVnodeBeforeMount)&&Dn(s,d,e);const h=t.subTree=re(t);0,u&&Y?Y(e.el,h,t,a):(v(null,h,n,i,t,a,o),e.el=h.el),f&&kn(f,a),(s=c&&c.onVnodeMounted)&&kn(()=>{Dn(s,d,e)},a);const{a:p}=t;p&&256&e.shapeFlag&&kn(p,a),t.isMounted=!0}}),jn)},I=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,_e(t,e.props,r,n),vn(t,e.children),Xt(void 0,t.update)},R=(t,e,n,r,i,a,o,s=!1)=>{const u=t&&t.children,c=t?t.shapeFlag:0,l=e.children,{patchFlag:f,shapeFlag:d}=e;if(f>0){if(128&f)return void B(u,l,n,r,i,a,o,s);if(256&f)return void $(u,l,n,r,i,a,o,s)}8&d?(16&c&&q(u,i,a),l!==u&&h(n,l)):16&c?16&d?B(u,l,n,r,i,a,o,s):q(u,i,a,!0):(8&c&&h(n,""),16&d&&k(l,n,r,i,a,o,s))},$=(t,e,n,i,a,o,s,u)=>{t=t||r["a"],e=e||r["a"];const c=t.length,l=e.length,f=Math.min(c,l);let d;for(d=0;d<f;d++){const r=e[d]=u?sr(e[d]):or(e[d]);v(t[d],r,n,null,a,o,s,u)}c>l?q(t,a,o,!0,!1,f):k(e,n,i,a,o,s,u,f)},B=(t,e,n,i,a,o,s,u)=>{let c=0;const l=e.length;let f=t.length-1,d=l-1;while(c<=f&&c<=d){const r=t[c],i=e[c]=u?sr(e[c]):or(e[c]);if(!Jn(r,i))break;v(r,i,n,null,a,o,s,u),c++}while(c<=f&&c<=d){const r=t[f],i=e[d]=u?sr(e[d]):or(e[d]);if(!Jn(r,i))break;v(r,i,n,null,a,o,s,u),f--,d--}if(c>f){if(c<=d){const t=d+1,r=t<l?e[t].el:i;while(c<=d)v(null,e[c]=u?sr(e[c]):or(e[c]),n,r,a,o,s),c++}}else if(c>d)while(c<=f)L(t[c],a,o,!0),c++;else{const h=c,p=c,m=new Map;for(c=p;c<=d;c++){const t=e[c]=u?sr(e[c]):or(e[c]);null!=t.key&&m.set(t.key,c)}let g,b=0;const y=d-p+1;let x=!1,w=0;const O=new Array(y);for(c=0;c<y;c++)O[c]=0;for(c=h;c<=f;c++){const r=t[c];if(b>=y){L(r,a,o,!0);continue}let i;if(null!=r.key)i=m.get(r.key);else for(g=p;g<=d;g++)if(0===O[g-p]&&Jn(r,e[g])){i=g;break}void 0===i?L(r,a,o,!0):(O[i-p]=c+1,i>=w?w=i:x=!0,v(r,e[i],n,null,a,o,s,u),b++)}const _=x?Nn(O):r["a"];for(g=_.length-1,c=y-1;c>=0;c--){const t=p+c,r=e[t],u=t+1<l?e[t+1].el:i;0===O[c]?v(null,r,n,u,a,o,s):x&&(g<0||c!==_[g]?z(r,n,u,2):g--)}}},z=(t,e,r,i,a=null)=>{const{el:o,type:s,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void z(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void s.move(t,e,r,H);if(s===Ln){n(o,e,r);for(let t=0;t<c.length;t++)z(c[t],e,r,i);return void n(t.anchor,e,r)}const f=2!==i&&1&l&&u;if(f)if(0===i)u.beforeEnter(o),n(o,e,r),kn(()=>u.enter(o),a);else{const{leave:t,delayLeave:i,afterLeave:a}=u,s=()=>n(o,e,r),c=()=>{t(o,()=>{s(),a&&a()})};i?i(o,s,c):c()}else n(o,e,r)},L=(t,e,n,r=!1,i=!1)=>{const{type:a,props:o,ref:s,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:f,dirs:d}=t;if(null!=s&&e&&Cn(s,null,e,n,null),256&l)return void e.ctx.deactivate(t);const h=1&l&&d;let p;if((p=o&&o.onVnodeBeforeUnmount)&&Dn(p,e,t),6&l)W(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);h&&xn(t,null,e,"beforeUnmount"),c&&(a!==Ln||f>0&&64&f)?q(c,e,n,!1,!0):(a===Ln&&(128&f||256&f)||!i&&16&l)&&q(u,e,n),64&l&&(r||!Mn(t.props))&&t.type.remove(t,H),r&&P(t)}((p=o&&o.onVnodeUnmounted)||h)&&kn(()=>{p&&Dn(p,e,t),h&&xn(t,null,e,"unmounted")},n)},P=t=>{const{type:e,el:n,anchor:r,transition:a}=t;if(e===Ln)return void U(n,r);const o=()=>{i(n),a&&!a.persisted&&a.afterLeave&&a.afterLeave()};if(1&t.shapeFlag&&a&&!a.persisted){const{leave:e,delayLeave:r}=a,i=()=>e(n,o);r?r(t.el,o,i):i()}else o()},U=(t,e)=>{let n;while(t!==e)n=m(t),i(t),t=n;i(e)},W=(t,e,n)=>{const{bum:i,effects:a,update:o,subTree:s,um:u}=t;if(i&&Object(r["m"])(i),a)for(let r=0;r<a.length;r++)f(a[r]);o&&(f(o),L(s,t,e,n)),u&&kn(u,e),kn(()=>{t.isUnmounted=!0},e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},q=(t,e,n,r=!1,i=!1,a=0)=>{for(let o=a;o<t.length;o++)L(t[o],e,n,r,i)},V=t=>6&t.shapeFlag?V(t.component.subTree):128&t.shapeFlag?t.suspense.next():m(t.anchor||t.el),G=(t,e)=>{null==t?e._vnode&&L(e._vnode,null,null,!0):v(e._vnode||null,t,e),Yt(),e._vnode=t},H={p:v,um:L,m:z,r:P,mt:N,mc:k,pc:R,pbc:E,n:V,o:t};let X,Y;return e&&([X,Y]=e(H)),{render:G,hydrate:X,createApp:_n(G,X)}}function Dn(t,e,n,r=null){jt(t,e,7,[n,r])}function Fn(t,e,n=!1){const i=t.children,a=e.children;if(Object(r["n"])(i)&&Object(r["n"])(a))for(let r=0;r<i.length;r++){const t=i[r];let e=a[r];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=a[r]=sr(a[r]),e.el=t.el),n||Fn(t,e))}}function Nn(t){const e=t.slice(),n=[0];let r,i,a,o,s;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}a=0,o=n.length-1;while(a<o)s=(a+o)/2|0,t[n[s]]<u?a=s+1:o=s;u<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}a=n.length,o=n[a-1];while(a-- >0)n[a]=o,o=e[o];return n}const Tn=t=>t.__isTeleport,Mn=t=>t&&(t.disabled||""===t.disabled);const In="components";function Rn(t){return Bn(In,t)||t}const $n=Symbol();function Bn(t,e,n=!0){const i=ee||Sr;if(i){const n=i.type;if(t===In){const t=n.displayName||n.name;if(t&&(t===e||t===Object(r["e"])(e)||t===Object(r["f"])(Object(r["e"])(e))))return n}const a=zn(i[t]||n[t],e)||zn(i.appContext[t],e);return a}}function zn(t,e){return t&&(t[e]||t[Object(r["e"])(e)]||t[Object(r["f"])(Object(r["e"])(e))])}const Ln=Symbol(void 0),Pn=Symbol(void 0),Un=Symbol(void 0),Wn=Symbol(void 0),qn=[];let Vn=null;function Gn(t=!1){qn.push(Vn=t?null:[])}function Hn(){qn.pop(),Vn=qn[qn.length-1]||null}let Xn=1;function Yn(t,e,n,i,a){const o=er(t,e,n,i,a,!0);return o.dynamicChildren=Vn||r["a"],Hn(),Xn>0&&Vn&&Vn.push(o),o}function Kn(t){return!!t&&!0===t.__v_isVNode}function Jn(t,e){return t.type===e.type&&t.key===e.key}const Zn="__vInternal",Qn=({key:t})=>null!=t?t:null,tr=({ref:t})=>null!=t?Object(r["n"])(t)?t:{i:ee,r:t}:null,er=nr;function nr(t,e=null,n=null,i=0,a=null,o=!1){if(t&&t!==$n||(t=Un),Kn(t)){const r=rr(t,e,!0);return n&&ur(r,n),r}if(Lr(t)&&(t=t.__vccOpts),e){(gt(e)||Zn in e)&&(e=Object(r["h"])({},e));let{class:t,style:n}=e;t&&!Object(r["B"])(t)&&(e.class=Object(r["G"])(t)),Object(r["u"])(n)&&(gt(n)&&!Object(r["n"])(n)&&(n=Object(r["h"])({},n)),e.style=Object(r["H"])(n))}const s=Object(r["B"])(t)?1:le(t)?128:Tn(t)?64:Object(r["u"])(t)?4:Object(r["o"])(t)?2:0;const u={__v_isVNode:!0,["__v_skip"]:!0,type:t,props:e,key:e&&Qn(e),ref:e&&tr(e),scopeId:be,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:a,dynamicChildren:null,appContext:null};if(ur(u,n),128&s){const{content:t,fallback:e}=fe(u);u.ssContent=t,u.ssFallback=e}return Xn>0&&!o&&Vn&&(i>0||6&s)&&32!==i&&Vn.push(u),u}function rr(t,e,n=!1){const{props:i,ref:a,patchFlag:o}=t,s=e?cr(i||{},e):i;return{__v_isVNode:!0,["__v_skip"]:!0,type:t.type,props:s,key:s&&Qn(s),ref:e&&e.ref?n&&a?Object(r["n"])(a)?a.concat(tr(e)):[a,tr(e)]:tr(e):a,scopeId:t.scopeId,children:t.children,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ln?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&rr(t.ssContent),ssFallback:t.ssFallback&&rr(t.ssFallback),el:t.el,anchor:t.anchor}}function ir(t=" ",e=0){return er(Pn,null,t,e)}function ar(t="",e=!1){return e?(Gn(),Yn(Un,null,t)):er(Un,null,t)}function or(t){return null==t||"boolean"===typeof t?er(Un):Object(r["n"])(t)?er(Ln,null,t):"object"===typeof t?null===t.el?t:rr(t):er(Pn,null,String(t))}function sr(t){return null===t.el?t:rr(t)}function ur(t,e){let n=0;const{shapeFlag:i}=t;if(null==e)e=null;else if(Object(r["n"])(e))n=16;else if("object"===typeof e){if(1&i||64&i){const n=e.default;return void(n&&(n._c&&me(1),ur(t,n()),n._c&&me(-1)))}{n=32;const r=e._;r||Zn in e?3===r&&ee&&(1024&ee.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=ee}}else Object(r["o"])(e)?(e={default:e,_ctx:ee},n=32):(e=String(e),64&i?(n=16,e=[ir(e)]):n=8);t.children=e,t.shapeFlag|=n}function cr(...t){const e=Object(r["h"])({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=Object(r["G"])([e.class,i.class]));else if("style"===t)e.style=Object(r["H"])([e.style,i.style]);else if(Object(r["v"])(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,i[t]):r)}else""!==t&&(e[t]=i[t])}return e}function lr(t,e){if(Sr){let n=Sr.provides;const r=Sr.parent&&Sr.parent.provides;r===n&&(n=Sr.provides=Object.create(r)),n[t]=e}else 0}function fr(t,e,n=!1){const i=Sr||ee;if(i){const a=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(a&&t in a)return a[t];if(arguments.length>1)return n&&Object(r["o"])(e)?e():e}else 0}let dr=!1;function hr(t,e,n=[],i=[],a=[],o=!1){const{mixins:s,extends:u,data:c,computed:l,methods:f,watch:d,provide:h,inject:p,components:m,directives:g,beforeMount:b,mounted:y,beforeUpdate:v,updated:x,activated:w,deactivated:O,beforeDestroy:_,beforeUnmount:A,destroyed:j,unmounted:k,render:C,renderTracked:E,renderTriggered:S,errorCaptured:D}=e,F=t.proxy,N=t.ctx,T=t.appContext.mixins;o&&C&&t.render===r["d"]&&(t.render=C),o||(dr=!0,pr("beforeCreate","bc",e,t,T),dr=!1,br(t,T,n,i,a)),u&&hr(t,u,n,i,a,!0),s&&br(t,s,n,i,a);if(p)if(Object(r["n"])(p))for(let r=0;r<p.length;r++){const t=p[r];N[t]=fr(t)}else for(const M in p){const t=p[M];Object(r["u"])(t)?N[M]=fr(t.from||M,t.default,!0):N[M]=fr(t)}if(f)for(const M in f){const t=f[M];Object(r["o"])(t)&&(N[M]=t.bind(F))}if(o?c&&n.push(c):(n.length&&n.forEach(e=>yr(t,e,F)),c&&yr(t,c,F)),l)for(const M in l){const t=l[M],e=Object(r["o"])(t)?t.bind(F,F):Object(r["o"])(t.get)?t.get.bind(F,F):r["d"];0;const n=!Object(r["o"])(t)&&Object(r["o"])(t.set)?t.set.bind(F):r["d"],i=Pr({get:e,set:n});Object.defineProperty(N,M,{enumerable:!0,configurable:!0,get:()=>i.value,set:t=>i.value=t})}d&&i.push(d),!o&&i.length&&i.forEach(t=>{for(const e in t)vr(t[e],N,F,e)}),h&&a.push(h),!o&&a.length&&a.forEach(t=>{const e=Object(r["o"])(t)?t.call(F):t;for(const n in e)lr(n,e[n])}),o&&(m&&Object(r["h"])(t.components||(t.components=Object(r["h"])({},t.type.components)),m),g&&Object(r["h"])(t.directives||(t.directives=Object(r["h"])({},t.type.directives)),g)),o||pr("created","c",e,t,T),b&&Te(b.bind(F)),y&&Me(y.bind(F)),v&&Ie(v.bind(F)),x&&Re(x.bind(F)),w&&sn(w.bind(F)),O&&un(O.bind(F)),D&&Pe(D.bind(F)),E&&Le(E.bind(F)),S&&ze(S.bind(F)),A&&$e(A.bind(F)),k&&Be(k.bind(F))}function pr(t,e,n,r,i){gr(t,e,i,r);const{extends:a,mixins:o}=n;a&&mr(t,e,a,r),o&&gr(t,e,o,r);const s=n[t];s&&jt(s.bind(r.proxy),r,e)}function mr(t,e,n,r){n.extends&&mr(t,e,n.extends,r);const i=n[t];i&&jt(i.bind(r.proxy),r,e)}function gr(t,e,n,r){for(let i=0;i<n.length;i++){const a=n[i].mixins;a&&gr(t,e,a,r);const o=n[i][t];o&&jt(o.bind(r.proxy),r,e)}}function br(t,e,n,r,i){for(let a=0;a<e.length;a++)hr(t,e[a],n,r,i,!0)}function yr(t,e,n){const i=e.call(n,n);Object(r["u"])(i)&&(t.data===r["b"]?t.data=lt(i):Object(r["h"])(t.data,i))}function vr(t,e,n,i){const a=i.includes(".")?xr(n,i):()=>n[i];if(Object(r["B"])(t)){const n=e[t];Object(r["o"])(n)&&We(a,n)}else if(Object(r["o"])(t))We(a,t.bind(n));else if(Object(r["u"])(t))if(Object(r["n"])(t))t.forEach(t=>vr(t,e,n,i));else{const i=Object(r["o"])(t.handler)?t.handler.bind(n):e[t.handler];Object(r["o"])(i)&&We(a,i,t)}else 0}function xr(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function wr(t){const e=t.type,{__merged:n,mixins:r,extends:i}=e;if(n)return n;const a=t.appContext.mixins;if(!a.length&&!r&&!i)return e;const o={};return a.forEach(e=>Or(o,e,t)),Or(o,e,t),e.__merged=o}function Or(t,e,n){const i=n.appContext.config.optionMergeStrategies,{mixins:a,extends:o}=e;o&&Or(t,o,n),a&&a.forEach(e=>Or(t,e,n));for(const s in e)i&&Object(r["k"])(i,s)?t[s]=i[s](t[s],e[s],n.proxy,s):t[s]=e[s]}const _r=Object(r["h"])(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>t.parent&&t.parent.proxy,$root:t=>t.root&&t.root.proxy,$emit:t=>t.emit,$options:t=>wr(t),$forceUpdate:t=>()=>Ut(t.update),$nextTick:t=>Pt.bind(t.proxy),$watch:t=>Ve.bind(t)}),Ar={get({_:t},e){const{ctx:n,setupState:i,data:a,props:o,accessCache:s,type:u,appContext:c}=t;if("__v_skip"===e)return!0;let l;if("$"!==e[0]){const u=s[e];if(void 0!==u)switch(u){case 0:return i[e];case 1:return a[e];case 3:return n[e];case 2:return o[e]}else{if(i!==r["b"]&&Object(r["k"])(i,e))return s[e]=0,i[e];if(a!==r["b"]&&Object(r["k"])(a,e))return s[e]=1,a[e];if((l=t.propsOptions[0])&&Object(r["k"])(l,e))return s[e]=2,o[e];if(n!==r["b"]&&Object(r["k"])(n,e))return s[e]=3,n[e];dr||(s[e]=4)}}const f=_r[e];let d,h;return f?("$attrs"===e&&x(t,"get",e),f(t)):(d=u.__cssModules)&&(d=d[e])?d:n!==r["b"]&&Object(r["k"])(n,e)?(s[e]=3,n[e]):(h=c.config.globalProperties,Object(r["k"])(h,e)?h[e]:void 0)},set({_:t},e,n){const{data:i,setupState:a,ctx:o}=t;if(a!==r["b"]&&Object(r["k"])(a,e))a[e]=n;else if(i!==r["b"]&&Object(r["k"])(i,e))i[e]=n;else if(e in t.props)return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:a,propsOptions:o}},s){let u;return void 0!==n[s]||t!==r["b"]&&Object(r["k"])(t,s)||e!==r["b"]&&Object(r["k"])(e,s)||(u=o[0])&&Object(r["k"])(u,s)||Object(r["k"])(i,s)||Object(r["k"])(_r,s)||Object(r["k"])(a.config.globalProperties,s)}};const jr=Object(r["h"])({},Ar,{get(t,e){if(e!==Symbol.unscopables)return Ar.get(t,e,t)},has(t,e){const n="_"!==e[0]&&!Object(r["p"])(e);return n}});const kr=wn();let Cr=0;function Er(t,e,n){const i=t.type,a=(e?e.appContext:t.appContext)||kr,o={uid:Cr++,vnode:t,type:i,parent:e,appContext:a,root:null,next:null,subTree:null,update:null,render:null,proxy:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ke(i,a),emitsOptions:Qt(i,a),emit:null,emitted:null,ctx:r["b"],data:r["b"],props:r["b"],attrs:r["b"],slots:r["b"],refs:r["b"],setupState:r["b"],setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Zt.bind(null,o),o}let Sr=null;const Dr=()=>Sr||ee,Fr=t=>{Sr=t};let Nr,Tr=!1;function Mr(t,e=!1){Tr=e;const{props:n,children:r,shapeFlag:i}=t.vnode,a=4&i;Oe(t,n,a,e),yn(t,r);const o=a?Ir(t,e):void 0;return Tr=!1,o}function Ir(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Ar);const{setup:i}=n;if(i){const n=t.setupContext=i.length>1?Br(t):null;Sr=t,b();const a=At(i,t,0,[t.props,n]);if(v(),Sr=null,Object(r["w"])(a)){if(e)return a.then(e=>{Rr(t,e)});t.asyncDep=a}else Rr(t,a)}else $r(t)}function Rr(t,e,n){Object(r["o"])(e)?t.render=e:Object(r["u"])(e)&&(t.setupState=wt(e)),$r(t)}function $r(t,e){const n=t.type;t.render||(Nr&&n.template&&!n.render&&(n.render=Nr(n.template,{isCustomElement:t.appContext.config.isCustomElement,delimiters:n.delimiters})),t.render=n.render||r["d"],t.render._rc&&(t.withProxy=new Proxy(t.ctx,jr))),Sr=t,hr(t,n),Sr=null}function Br(t){return{attrs:t.attrs,slots:t.slots,emit:t.emit}}function zr(t){Sr&&(Sr.effects||(Sr.effects=[])).push(t)}function Lr(t){return Object(r["o"])(t)&&"__vccOpts"in t}function Pr(t){const e=_t(t);return zr(e.effect),e}function Ur(t){return Object(r["o"])(t)?{setup:t,name:t.name}:t}function Wr(t,e,n){const i=arguments.length;return 2===i?Object(r["u"])(e)&&!Object(r["n"])(e)?Kn(e)?er(t,null,[e]):er(t,e):er(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&Kn(n)&&(n=[n]),er(t,e,n))}Symbol("");function qr(t,e){let n;if(Object(r["n"])(t)||Object(r["B"])(t)){n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=e(t[r],r)}else if("number"===typeof t){0,n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r+1,r)}else if(Object(r["u"])(t))if(t[Symbol.iterator])n=Array.from(t,e);else{const r=Object.keys(t);n=new Array(r.length);for(let i=0,a=r.length;i<a;i++){const a=r[i];n[i]=e(t[a],a,i)}}else n=[];return n}const Vr="3.0.2",Gr="http://www.w3.org/2000/svg",Hr="undefined"!==typeof document?document:null;let Xr,Yr;const Kr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n)=>e?Hr.createElementNS(Gr,t):Hr.createElement(t,n?{is:n}:void 0),createText:t=>Hr.createTextNode(t),createComment:t=>Hr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Hr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){return t.cloneNode(!0)},insertStaticContent(t,e,n,r){const i=r?Yr||(Yr=Hr.createElementNS(Gr,"svg")):Xr||(Xr=Hr.createElement("div"));i.innerHTML=t;const a=i.firstChild;let o=a,s=o;while(o)s=o,Kr.insert(o,e,n),o=i.firstChild;return[a,s]}};function Jr(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}function Zr(t,e,n){const i=t.style;if(n)if(Object(r["B"])(n))e!==n&&(i.cssText=n);else{for(const t in n)ti(i,t,n[t]);if(e&&!Object(r["B"])(e))for(const t in e)null==n[t]&&ti(i,t,"")}else t.removeAttribute("style")}const Qr=/\s*!important$/;function ti(t,e,n){if(Object(r["n"])(n))n.forEach(n=>ti(t,e,n));else if(e.startsWith("--"))t.setProperty(e,n);else{const i=ri(t,e);Qr.test(n)?t.setProperty(Object(r["l"])(i),n.replace(Qr,""),"important"):t[i]=n}}const ei=["Webkit","Moz","ms"],ni={};function ri(t,e){const n=ni[e];if(n)return n;let i=Object(r["e"])(e);if("filter"!==i&&i in t)return ni[e]=i;i=Object(r["f"])(i);for(let r=0;r<ei.length;r++){const n=ei[r]+i;if(n in t)return ni[e]=n}return e}const ii="http://www.w3.org/1999/xlink";function ai(t,e,n,i){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(ii,e.slice(6,e.length)):t.setAttributeNS(ii,e,n);else{const i=Object(r["A"])(e);null==n||i&&!1===n?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function oi(t,e,n,r,i,a,o){if("innerHTML"===e||"textContent"===e)return r&&o(r,i,a),void(t[e]=null==n?"":n);if("value"!==e||"PROGRESS"===t.tagName)if(""===n&&"boolean"===typeof t[e])t[e]=!0;else if(null==n&&"string"===typeof t[e])t[e]="",t.removeAttribute(e);else try{t[e]=n}catch(s){0}else{t._value=n;const e=null==n?"":n;t.value!==e&&(t.value=e)}}let si=Date.now;"undefined"!==typeof document&&si()>document.createEvent("Event").timeStamp&&(si=()=>performance.now());let ui=0;const ci=Promise.resolve(),li=()=>{ui=0},fi=()=>ui||(ci.then(li),ui=si());function di(t,e,n,r){t.addEventListener(e,n,r)}function hi(t,e,n,r){t.removeEventListener(e,n,r)}function pi(t,e,n,r,i=null){const a=t._vei||(t._vei={}),o=a[e];if(r&&o)o.value=r;else{const[n,s]=gi(e);if(r){const o=a[e]=bi(r,i);di(t,n,o,s)}else o&&(hi(t,n,o,s),a[e]=void 0)}}const mi=/(?:Once|Passive|Capture)$/;function gi(t){let e;if(mi.test(t)){let n;e={};while(n=t.match(mi))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t.slice(2).toLowerCase(),e]}function bi(t,e){const n=t=>{const r=t.timeStamp||si();r>=n.attached-1&&jt(yi(t,n.value),e,5,[t])};return n.value=t,n.attached=fi(),n}function yi(t,e){if(Object(r["n"])(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(t=>e=>!e._stopped&&t(e))}return e}const vi=/^on[a-z]/,xi=(t,e)=>"value"===e,wi=(t,e,n,i,a=!1,o,s,u,c)=>{switch(e){case"class":Jr(t,i,a);break;case"style":Zr(t,n,i);break;default:Object(r["v"])(e)?Object(r["t"])(e)||pi(t,e,n,i,s):Oi(t,e,i,a)?oi(t,e,i,o,s,u,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),ai(t,e,i,a));break}};function Oi(t,e,n,i){return i?"innerHTML"===e||!!(e in t&&vi.test(e)&&Object(r["o"])(n)):"spellcheck"!==e&&"draggable"!==e&&(("form"!==e||"string"!==typeof n)&&(("list"!==e||"INPUT"!==t.tagName)&&((!vi.test(e)||!Object(r["B"])(n))&&e in t)))}const _i="transition",Ai="animation",ji=(t,{slots:e})=>Wr(Ke,Ci(t),e);ji.displayName="Transition";const ki={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ji.props=Object(r["h"])({},Ke.props,ki);function Ci(t){let{name:e="v",type:n,css:i=!0,duration:a,enterFromClass:o=e+"-enter-from",enterActiveClass:s=e+"-enter-active",enterToClass:u=e+"-enter-to",appearFromClass:c=o,appearActiveClass:l=s,appearToClass:f=u,leaveFromClass:d=e+"-leave-from",leaveActiveClass:h=e+"-leave-active",leaveToClass:p=e+"-leave-to"}=t;const m={};for(const r in t)r in ki||(m[r]=t[r]);if(!i)return m;const g=Ei(a),b=g&&g[0],y=g&&g[1],{onBeforeEnter:v,onEnter:x,onEnterCancelled:w,onLeave:O,onLeaveCancelled:_,onBeforeAppear:A=v,onAppear:j=x,onAppearCancelled:k=w}=m,C=(t,e,n)=>{Fi(t,e?f:u),Fi(t,e?l:s),n&&n()},E=(t,e)=>{Fi(t,p),Fi(t,h),e&&e()},S=t=>(e,r)=>{const i=t?j:x,a=()=>C(e,t,r);i&&i(e,a),Ni(()=>{Fi(e,t?c:o),Di(e,t?f:u),i&&i.length>1||(b?setTimeout(a,b):Ti(e,n,a))})};return Object(r["h"])(m,{onBeforeEnter(t){v&&v(t),Di(t,s),Di(t,o)},onBeforeAppear(t){A&&A(t),Di(t,l),Di(t,c)},onEnter:S(!1),onAppear:S(!0),onLeave(t,e){const r=()=>E(t,e);Di(t,h),Di(t,d),Ni(()=>{Fi(t,d),Di(t,p),O&&O.length>1||(y?setTimeout(r,y):Ti(t,n,r))}),O&&O(t,r)},onEnterCancelled(t){C(t,!1),w&&w(t)},onAppearCancelled(t){C(t,!0),k&&k(t)},onLeaveCancelled(t){E(t),_&&_(t)}})}function Ei(t){if(null==t)return null;if(Object(r["u"])(t))return[Si(t.enter),Si(t.leave)];{const e=Si(t);return[e,e]}}function Si(t){const e=Object(r["L"])(t);return e}function Di(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(e)}function Fi(t,e){e.split(/\s+/).forEach(e=>e&&t.classList.remove(e));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Ni(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}function Ti(t,e,n){const{type:r,timeout:i,propCount:a}=Mi(t,e);if(!r)return n();const o=r+"end";let s=0;const u=()=>{t.removeEventListener(o,c),n()},c=e=>{e.target===t&&++s>=a&&u()};setTimeout(()=>{s<a&&u()},i+1),t.addEventListener(o,c)}function Mi(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r(_i+"Delay"),a=r(_i+"Duration"),o=Ii(i,a),s=r(Ai+"Delay"),u=r(Ai+"Duration"),c=Ii(s,u);let l=null,f=0,d=0;e===_i?o>0&&(l=_i,f=o,d=a.length):e===Ai?c>0&&(l=Ai,f=c,d=u.length):(f=Math.max(o,c),l=f>0?o>c?_i:Ai:null,d=l?l===_i?a.length:u.length:0);const h=l===_i&&/\b(transform|all)(,|$)/.test(n[_i+"Property"]);return{type:l,timeout:f,propCount:d,hasTransform:h}}function Ii(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map((e,n)=>Ri(e)+Ri(t[n])))}function Ri(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}new WeakMap,new WeakMap;const $i=Object(r["h"])({patchProp:wi,forcePatchProp:xi},Kr);let Bi;function zi(){return Bi||(Bi=En($i))}const Li=(...t)=>{const e=zi().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=Pi(t);if(!i)return;const a=e._component;Object(r["o"])(a)||a.render||a.template||(a.template=i.innerHTML),i.innerHTML="";const o=n(i);return i.removeAttribute("v-cloak"),i.setAttribute("data-v-app",""),o},e};function Pi(t){if(Object(r["B"])(t)){const e=document.querySelector(t);return e}return t}},"7ad3":function(t,e,n){"use strict";n.r(e),n.d(e,"vega",(function(){return XFt})),n.d(e,"vegaLite",(function(){return YFt})),n.d(e,"DEFAULT_ACTIONS",(function(){return JFt})),n.d(e,"guessMode",(function(){return aNt})),n.d(e,"default",(function(){return sNt}));var r={};n.r(r),n.d(r,"JsonPatchError",(function(){return I})),n.d(r,"deepClone",(function(){return R})),n.d(r,"getValueByPointer",(function(){return z})),n.d(r,"applyOperation",(function(){return L})),n.d(r,"applyPatch",(function(){return P})),n.d(r,"applyReducer",(function(){return U})),n.d(r,"validator",(function(){return W})),n.d(r,"validate",(function(){return q})),n.d(r,"_areEquals",(function(){return V}));var i={};n.r(i),n.d(i,"unobserve",(function(){return Z})),n.d(i,"observe",(function(){return Q})),n.d(i,"generate",(function(){return tt})),n.d(i,"compare",(function(){return nt}));var a={};n.r(a),n.d(a,"aggregate",(function(){return Sa})),n.d(a,"bin",(function(){return Fa})),n.d(a,"collect",(function(){return Ta})),n.d(a,"compare",(function(){return Ma})),n.d(a,"countpattern",(function(){return Ra})),n.d(a,"cross",(function(){return Ba})),n.d(a,"density",(function(){return Va})),n.d(a,"dotbin",(function(){return Za})),n.d(a,"expression",(function(){return to})),n.d(a,"extent",(function(){return no})),n.d(a,"facet",(function(){return io})),n.d(a,"field",(function(){return ao})),n.d(a,"filter",(function(){return so})),n.d(a,"flatten",(function(){return uo})),n.d(a,"fold",(function(){return co})),n.d(a,"formula",(function(){return lo})),n.d(a,"generate",(function(){return fo})),n.d(a,"impute",(function(){return mo})),n.d(a,"joinaggregate",(function(){return vo})),n.d(a,"kde",(function(){return xo})),n.d(a,"key",(function(){return wo})),n.d(a,"load",(function(){return _o})),n.d(a,"lookup",(function(){return ko})),n.d(a,"multiextent",(function(){return Co})),n.d(a,"multivalues",(function(){return So})),n.d(a,"params",(function(){return Fo})),n.d(a,"pivot",(function(){return No})),n.d(a,"prefacet",(function(){return Ro})),n.d(a,"project",(function(){return $o})),n.d(a,"proxy",(function(){return zo})),n.d(a,"quantile",(function(){return Lo})),n.d(a,"relay",(function(){return Uo})),n.d(a,"sample",(function(){return Wo})),n.d(a,"sequence",(function(){return qo})),n.d(a,"sieve",(function(){return Vo})),n.d(a,"subflow",(function(){return ro})),n.d(a,"timeunit",(function(){return Go})),n.d(a,"tupleindex",(function(){return Xo})),n.d(a,"values",(function(){return Yo})),n.d(a,"window",(function(){return rs}));var o={};n.r(o),n.d(o,"interpolate",(function(){return ul})),n.d(o,"interpolateArray",(function(){return Zc})),n.d(o,"interpolateBasis",(function(){return Bc})),n.d(o,"interpolateBasisClosed",(function(){return zc})),n.d(o,"interpolateDate",(function(){return tl})),n.d(o,"interpolateDiscrete",(function(){return $f})),n.d(o,"interpolateHue",(function(){return Bf})),n.d(o,"interpolateNumber",(function(){return el})),n.d(o,"interpolateNumberArray",(function(){return Kc})),n.d(o,"interpolateObject",(function(){return nl})),n.d(o,"interpolateRound",(function(){return cl})),n.d(o,"interpolateString",(function(){return sl})),n.d(o,"interpolateTransformCss",(function(){return Vf})),n.d(o,"interpolateTransformSvg",(function(){return Gf})),n.d(o,"interpolateZoom",(function(){return Jf})),n.d(o,"interpolateRgb",(function(){return Gc})),n.d(o,"interpolateRgbBasis",(function(){return Xc})),n.d(o,"interpolateRgbBasisClosed",(function(){return Yc})),n.d(o,"interpolateHsl",(function(){return Qf})),n.d(o,"interpolateHslLong",(function(){return td})),n.d(o,"interpolateLab",(function(){return Od})),n.d(o,"interpolateHcl",(function(){return Ad})),n.d(o,"interpolateHclLong",(function(){return jd})),n.d(o,"interpolateCubehelix",(function(){return Bd})),n.d(o,"interpolateCubehelixLong",(function(){return zd})),n.d(o,"piecewise",(function(){return kf})),n.d(o,"quantize",(function(){return Ld}));var s={};n.r(s),n.d(s,"bound",(function(){return dw})),n.d(s,"identifier",(function(){return mw})),n.d(s,"mark",(function(){return bw})),n.d(s,"overlap",(function(){return vw})),n.d(s,"render",(function(){return Cw})),n.d(s,"viewlayout",(function(){return rO}));var u={};n.r(u),n.d(u,"axisticks",(function(){return uO})),n.d(u,"datajoin",(function(){return cO})),n.d(u,"encode",(function(){return dO})),n.d(u,"legendentries",(function(){return hO})),n.d(u,"linkpath",(function(){return yO})),n.d(u,"pie",(function(){return NO})),n.d(u,"scale",(function(){return $O})),n.d(u,"sortitems",(function(){return KO})),n.d(u,"stack",(function(){return e_}));var c={};n.r(c),n.d(c,"contour",(function(){return wC})),n.d(c,"geojson",(function(){return jC})),n.d(c,"geopath",(function(){return kC})),n.d(c,"geopoint",(function(){return EC})),n.d(c,"geoshape",(function(){return SC})),n.d(c,"graticule",(function(){return FC})),n.d(c,"heatmap",(function(){return NC})),n.d(c,"isocontour",(function(){return uC})),n.d(c,"kde2d",(function(){return bC})),n.d(c,"projection",(function(){return $C}));var l={};n.r(l),n.d(l,"force",(function(){return lS}));var f={};n.r(f),n.d(f,"nest",(function(){return qD})),n.d(f,"pack",(function(){return ZD})),n.d(f,"partition",(function(){return tF})),n.d(f,"stratify",(function(){return eF})),n.d(f,"tree",(function(){return iF})),n.d(f,"treelinks",(function(){return aF})),n.d(f,"treemap",(function(){return uF}));var d={};n.r(d),n.d(d,"loess",(function(){return lF})),n.d(d,"regression",(function(){return hF}));var h={};n.r(h),n.d(h,"voronoi",(function(){return PF}));var p={};n.r(p),n.d(p,"wordcloud",(function(){return aN}));var m={};n.r(m),n.d(m,"crossfilter",(function(){return bN})),n.d(m,"resolvefilter",(function(){return yN}));var g={};n.r(g),n.d(g,"interpolate",(function(){return Lz})),n.d(g,"interpolateArray",(function(){return Sz})),n.d(g,"interpolateBasis",(function(){return mz})),n.d(g,"interpolateBasisClosed",(function(){return gz})),n.d(g,"interpolateDate",(function(){return Fz})),n.d(g,"interpolateDiscrete",(function(){return Pz})),n.d(g,"interpolateHue",(function(){return Uz})),n.d(g,"interpolateNumber",(function(){return Nz})),n.d(g,"interpolateNumberArray",(function(){return Cz})),n.d(g,"interpolateObject",(function(){return Tz})),n.d(g,"interpolateRound",(function(){return Wz})),n.d(g,"interpolateString",(function(){return zz})),n.d(g,"interpolateTransformCss",(function(){return Kz})),n.d(g,"interpolateTransformSvg",(function(){return Jz})),n.d(g,"interpolateZoom",(function(){return nL})),n.d(g,"interpolateRgb",(function(){return _z})),n.d(g,"interpolateRgbBasis",(function(){return jz})),n.d(g,"interpolateRgbBasisClosed",(function(){return kz})),n.d(g,"interpolateHsl",(function(){return iL})),n.d(g,"interpolateHslLong",(function(){return aL})),n.d(g,"interpolateLab",(function(){return oL})),n.d(g,"interpolateHcl",(function(){return uL})),n.d(g,"interpolateHclLong",(function(){return cL})),n.d(g,"interpolateCubehelix",(function(){return fL})),n.d(g,"interpolateCubehelixLong",(function(){return dL})),n.d(g,"piecewise",(function(){return hL})),n.d(g,"quantize",(function(){return pL}));var b={};n.r(b),n.d(b,"interpolate",(function(){return tV})),n.d(b,"interpolateArray",(function(){return Lq})),n.d(b,"interpolateBasis",(function(){return kq})),n.d(b,"interpolateBasisClosed",(function(){return Cq})),n.d(b,"interpolateDate",(function(){return Uq})),n.d(b,"interpolateDiscrete",(function(){return eV})),n.d(b,"interpolateHue",(function(){return nV})),n.d(b,"interpolateNumber",(function(){return Wq})),n.d(b,"interpolateNumberArray",(function(){return Bq})),n.d(b,"interpolateObject",(function(){return qq})),n.d(b,"interpolateRound",(function(){return rV})),n.d(b,"interpolateString",(function(){return Qq})),n.d(b,"interpolateTransformCss",(function(){return lV})),n.d(b,"interpolateTransformSvg",(function(){return fV})),n.d(b,"interpolateZoom",(function(){return vV})),n.d(b,"interpolateRgb",(function(){return Mq})),n.d(b,"interpolateRgbBasis",(function(){return Rq})),n.d(b,"interpolateRgbBasisClosed",(function(){return $q})),n.d(b,"interpolateHsl",(function(){return wV})),n.d(b,"interpolateHslLong",(function(){return OV})),n.d(b,"interpolateLab",(function(){return qV})),n.d(b,"interpolateHcl",(function(){return GV})),n.d(b,"interpolateHclLong",(function(){return HV})),n.d(b,"interpolateCubehelix",(function(){return oG})),n.d(b,"interpolateCubehelixLong",(function(){return sG})),n.d(b,"piecewise",(function(){return VW})),n.d(b,"quantize",(function(){return uG}));var y={};n.r(y),n.d(y,"interpolate",(function(){return Y1})),n.d(y,"interpolateArray",(function(){return B1})),n.d(y,"interpolateBasis",(function(){return A1})),n.d(y,"interpolateBasisClosed",(function(){return j1})),n.d(y,"interpolateDate",(function(){return L1})),n.d(y,"interpolateDiscrete",(function(){return K1})),n.d(y,"interpolateHue",(function(){return J1})),n.d(y,"interpolateNumber",(function(){return P1})),n.d(y,"interpolateNumberArray",(function(){return R1})),n.d(y,"interpolateObject",(function(){return U1})),n.d(y,"interpolateRound",(function(){return Z1})),n.d(y,"interpolateString",(function(){return X1})),n.d(y,"interpolateTransformCss",(function(){return a2})),n.d(y,"interpolateTransformSvg",(function(){return o2})),n.d(y,"interpolateZoom",(function(){return f2})),n.d(y,"interpolateRgb",(function(){return N1})),n.d(y,"interpolateRgbBasis",(function(){return M1})),n.d(y,"interpolateRgbBasisClosed",(function(){return I1})),n.d(y,"interpolateHsl",(function(){return h2})),n.d(y,"interpolateHslLong",(function(){return p2})),n.d(y,"interpolateLab",(function(){return m2})),n.d(y,"interpolateHcl",(function(){return b2})),n.d(y,"interpolateHclLong",(function(){return y2})),n.d(y,"interpolateCubehelix",(function(){return x2})),n.d(y,"interpolateCubehelixLong",(function(){return w2})),n.d(y,"piecewise",(function(){return O2})),n.d(y,"quantize",(function(){return _2}));var v={};n.r(v),n.d(v,"version",(function(){return vN["a"]})),n.d(v,"bandwidthNRD",(function(){return li})),n.d(v,"bin",(function(){return fi})),n.d(v,"bootstrapCI",(function(){return pi})),n.d(v,"cumulativeLogNormal",(function(){return Fi})),n.d(v,"cumulativeNormal",(function(){return Ai})),n.d(v,"cumulativeUniform",(function(){return $i})),n.d(v,"densityLogNormal",(function(){return Di})),n.d(v,"densityNormal",(function(){return _i})),n.d(v,"densityUniform",(function(){return Ri})),n.d(v,"dotbin",(function(){return mi})),n.d(v,"quantileLogNormal",(function(){return Ni})),n.d(v,"quantileNormal",(function(){return ji})),n.d(v,"quantileUniform",(function(){return Bi})),n.d(v,"quantiles",(function(){return ui})),n.d(v,"quartiles",(function(){return ci})),n.d(v,"random",(function(){return di})),n.d(v,"randomInteger",(function(){return yi})),n.d(v,"randomKDE",(function(){return Ei})),n.d(v,"randomLCG",(function(){return bi})),n.d(v,"randomLogNormal",(function(){return Ti})),n.d(v,"randomMixture",(function(){return Mi})),n.d(v,"randomNormal",(function(){return Ci})),n.d(v,"randomUniform",(function(){return zi})),n.d(v,"regressionExp",(function(){return Gi})),n.d(v,"regressionLinear",(function(){return qi})),n.d(v,"regressionLoess",(function(){return ta})),n.d(v,"regressionLog",(function(){return Vi})),n.d(v,"regressionPoly",(function(){return Yi})),n.d(v,"regressionPow",(function(){return Hi})),n.d(v,"regressionQuad",(function(){return Xi})),n.d(v,"sampleCurve",(function(){return aa})),n.d(v,"sampleLogNormal",(function(){return Si})),n.d(v,"sampleNormal",(function(){return Oi})),n.d(v,"sampleUniform",(function(){return Ii})),n.d(v,"setRandom",(function(){return hi})),n.d(v,"DATE",(function(){return la["a"]})),n.d(v,"DAY",(function(){return la["b"]})),n.d(v,"DAYOFYEAR",(function(){return la["c"]})),n.d(v,"HOURS",(function(){return la["d"]})),n.d(v,"MILLISECONDS",(function(){return la["e"]})),n.d(v,"MINUTES",(function(){return la["f"]})),n.d(v,"MONTH",(function(){return la["g"]})),n.d(v,"QUARTER",(function(){return la["h"]})),n.d(v,"SECONDS",(function(){return la["i"]})),n.d(v,"TIME_UNITS",(function(){return la["j"]})),n.d(v,"WEEK",(function(){return la["k"]})),n.d(v,"YEAR",(function(){return la["l"]})),n.d(v,"dayofyear",(function(){return la["m"]})),n.d(v,"timeBin",(function(){return la["n"]})),n.d(v,"timeFloor",(function(){return la["o"]})),n.d(v,"timeInterval",(function(){return la["p"]})),n.d(v,"timeOffset",(function(){return la["q"]})),n.d(v,"timeSequence",(function(){return la["r"]})),n.d(v,"timeUnitSpecifier",(function(){return la["s"]})),n.d(v,"timeUnits",(function(){return la["t"]})),n.d(v,"utcFloor",(function(){return la["u"]})),n.d(v,"utcInterval",(function(){return la["v"]})),n.d(v,"utcOffset",(function(){return la["w"]})),n.d(v,"utcSequence",(function(){return la["x"]})),n.d(v,"utcdayofyear",(function(){return la["y"]})),n.d(v,"utcweek",(function(){return la["z"]})),n.d(v,"week",(function(){return la["A"]})),n.d(v,"accessor",(function(){return ot})),n.d(v,"accessorName",(function(){return st})),n.d(v,"accessorFields",(function(){return ut})),n.d(v,"id",(function(){return gt})),n.d(v,"identity",(function(){return bt})),n.d(v,"zero",(function(){return yt})),n.d(v,"one",(function(){return vt})),n.d(v,"truthy",(function(){return xt})),n.d(v,"falsy",(function(){return wt})),n.d(v,"logger",(function(){return Et})),n.d(v,"None",(function(){return _t})),n.d(v,"Error",(function(){return At})),n.d(v,"Warn",(function(){return jt})),n.d(v,"Info",(function(){return kt})),n.d(v,"Debug",(function(){return Ct})),n.d(v,"mergeConfig",(function(){return Nt})),n.d(v,"writeConfig",(function(){return Tt})),n.d(v,"panLinear",(function(){return Wt})),n.d(v,"panLog",(function(){return qt})),n.d(v,"panPow",(function(){return Vt})),n.d(v,"panSymlog",(function(){return Gt})),n.d(v,"zoomLinear",(function(){return Xt})),n.d(v,"zoomLog",(function(){return Yt})),n.d(v,"zoomPow",(function(){return Kt})),n.d(v,"zoomSymlog",(function(){return Jt})),n.d(v,"quarter",(function(){return Zt})),n.d(v,"utcquarter",(function(){return Qt})),n.d(v,"array",(function(){return te})),n.d(v,"clampRange",(function(){return ee})),n.d(v,"compare",(function(){return ie})),n.d(v,"constant",(function(){return ce})),n.d(v,"debounce",(function(){return le})),n.d(v,"error",(function(){return dt})),n.d(v,"extend",(function(){return fe})),n.d(v,"extent",(function(){return de})),n.d(v,"extentIndex",(function(){return he})),n.d(v,"fastmap",(function(){return be})),n.d(v,"field",(function(){return pt})),n.d(v,"flush",(function(){return ye})),n.d(v,"hasOwnProperty",(function(){return me})),n.d(v,"inherits",(function(){return ve})),n.d(v,"inrange",(function(){return xe})),n.d(v,"isArray",(function(){return St})),n.d(v,"isBoolean",(function(){return we})),n.d(v,"isDate",(function(){return Oe})),n.d(v,"isFunction",(function(){return ne})),n.d(v,"isNumber",(function(){return _e})),n.d(v,"isObject",(function(){return Dt})),n.d(v,"isRegExp",(function(){return Ae})),n.d(v,"isString",(function(){return je})),n.d(v,"key",(function(){return ke})),n.d(v,"lerp",(function(){return Ce})),n.d(v,"lruCache",(function(){return Se})),n.d(v,"merge",(function(){return De})),n.d(v,"pad",(function(){return Ne})),n.d(v,"peek",(function(){return It})),n.d(v,"repeat",(function(){return Fe})),n.d(v,"span",(function(){return Te})),n.d(v,"splitAccessPath",(function(){return ht})),n.d(v,"stringValue",(function(){return Me})),n.d(v,"toBoolean",(function(){return Ie})),n.d(v,"toDate",(function(){return $e})),n.d(v,"toNumber",(function(){return Rt})),n.d(v,"toString",(function(){return Be})),n.d(v,"toSet",(function(){return ze})),n.d(v,"truncate",(function(){return Le})),n.d(v,"visitArray",(function(){return Pe})),n.d(v,"format",(function(){return xN["a"]})),n.d(v,"formats",(function(){return xN["b"]})),n.d(v,"inferType",(function(){return xN["c"]})),n.d(v,"inferTypes",(function(){return xN["d"]})),n.d(v,"loader",(function(){return xN["e"]})),n.d(v,"read",(function(){return xN["f"]})),n.d(v,"responseType",(function(){return xN["g"]})),n.d(v,"typeParsers",(function(){return xN["h"]})),n.d(v,"Bounds",(function(){return vI})),n.d(v,"Gradient",(function(){return CN})),n.d(v,"GroupItem",(function(){return OI})),n.d(v,"ResourceLoader",(function(){return LI})),n.d(v,"Item",(function(){return wI})),n.d(v,"Scenegraph",(function(){return hB})),n.d(v,"Handler",(function(){return _B})),n.d(v,"Renderer",(function(){return kB})),n.d(v,"CanvasHandler",(function(){return KB})),n.d(v,"CanvasRenderer",(function(){return oz})),n.d(v,"SVGHandler",(function(){return fz})),n.d(v,"SVGRenderer",(function(){return uU})),n.d(v,"SVGStringRenderer",(function(){return jU})),n.d(v,"RenderType",(function(){return MU})),n.d(v,"renderModule",(function(){return RU})),n.d(v,"intersect",(function(){return $U})),n.d(v,"Marks",(function(){return aB})),n.d(v,"boundClip",(function(){return WU})),n.d(v,"boundContext",(function(){return KI})),n.d(v,"boundStroke",(function(){return qI})),n.d(v,"boundItem",(function(){return oB})),n.d(v,"boundMark",(function(){return uB})),n.d(v,"pathCurves",(function(){return TT})),n.d(v,"pathSymbols",(function(){return QT})),n.d(v,"pathRectangle",(function(){return gM})),n.d(v,"pathTrail",(function(){return bM})),n.d(v,"pathParse",(function(){return RT})),n.d(v,"pathRender",(function(){return YT})),n.d(v,"point",(function(){return wB})),n.d(v,"domCreate",(function(){return gB})),n.d(v,"domFind",(function(){return bB})),n.d(v,"domChild",(function(){return yB})),n.d(v,"domClear",(function(){return vB})),n.d(v,"openTag",(function(){return nU})),n.d(v,"closeTag",(function(){return rU})),n.d(v,"font",(function(){return H$})),n.d(v,"fontFamily",(function(){return G$})),n.d(v,"fontSize",(function(){return B$})),n.d(v,"lineHeight",(function(){return z$})),n.d(v,"multiLineOffset",(function(){return U$})),n.d(v,"textMetrics",(function(){return N$})),n.d(v,"sceneEqual",(function(){return VU})),n.d(v,"pathEqual",(function(){return GU})),n.d(v,"sceneToJSON",(function(){return lB})),n.d(v,"sceneFromJSON",(function(){return fB})),n.d(v,"intersectPath",(function(){return sR})),n.d(v,"intersectPoint",(function(){return uR})),n.d(v,"intersectRule",(function(){return lR})),n.d(v,"intersectBoxLine",(function(){return fR})),n.d(v,"sceneZOrder",(function(){return wR})),n.d(v,"sceneVisit",(function(){return OR})),n.d(v,"scenePickVisit",(function(){return _R})),n.d(v,"resetSVGClipId",(function(){return bI})),n.d(v,"resetSVGDefIds",(function(){return XU})),n.d(v,"Dataflow",(function(){return Wr})),n.d(v,"EventStream",(function(){return Jn})),n.d(v,"Parameters",(function(){return Ln})),n.d(v,"Pulse",(function(){return _r})),n.d(v,"MultiPulse",(function(){return Cr})),n.d(v,"Operator",(function(){return Gn})),n.d(v,"Transform",(function(){return Vr})),n.d(v,"changeset",(function(){return Bn})),n.d(v,"ingest",(function(){return Nn})),n.d(v,"isTuple",(function(){return Sn})),n.d(v,"definition",(function(){return Hr})),n.d(v,"transform",(function(){return Xr})),n.d(v,"transforms",(function(){return Gr})),n.d(v,"tupleid",(function(){return Dn})),n.d(v,"scale",(function(){return WW})),n.d(v,"scheme",(function(){return vG})),n.d(v,"interpolate",(function(){return dG})),n.d(v,"interpolateColors",(function(){return lG})),n.d(v,"interpolateRange",(function(){return cG})),n.d(v,"quantizeInterpolator",(function(){return fG})),n.d(v,"projection",(function(){return Gk})),n.d(v,"View",(function(){return JQ})),n.d(v,"formatLocale",(function(){return wn["c"]})),n.d(v,"timeFormatLocale",(function(){return wn["e"]})),n.d(v,"locale",(function(){return wn["b"]})),n.d(v,"defaultLocale",(function(){return wn["a"]})),n.d(v,"resetDefaultLocale",(function(){return wn["d"]})),n.d(v,"expressionFunction",(function(){return vnt})),n.d(v,"parse",(function(){return nut})),n.d(v,"runtimeContext",(function(){return CQ}));var x={};n.r(x),n.d(x,"invalidSpec",(function(){return Mdt})),n.d(x,"FIT_NON_SINGLE",(function(){return Idt})),n.d(x,"containerSizeNonSingle",(function(){return Rdt})),n.d(x,"containerSizeNotCompatibleWithAutosize",(function(){return $dt})),n.d(x,"droppingFit",(function(){return Bdt})),n.d(x,"cannotProjectOnChannelWithoutField",(function(){return zdt})),n.d(x,"cannotProjectAggregate",(function(){return Ldt})),n.d(x,"nearestNotSupportForContinuous",(function(){return Pdt})),n.d(x,"selectionNotSupported",(function(){return Udt})),n.d(x,"selectionNotFound",(function(){return Wdt})),n.d(x,"SCALE_BINDINGS_CONTINUOUS",(function(){return qdt})),n.d(x,"LEGEND_BINDINGS_PROJECT_LENGTH",(function(){return Vdt})),n.d(x,"noSameUnitLookup",(function(){return Gdt})),n.d(x,"noSuchRepeatedValue",(function(){return Hdt})),n.d(x,"columnsNotSupportByRowCol",(function(){return Xdt})),n.d(x,"CONCAT_CANNOT_SHARE_AXIS",(function(){return Ydt})),n.d(x,"unrecognizedParse",(function(){return Kdt})),n.d(x,"differentParse",(function(){return Jdt})),n.d(x,"invalidTransformIgnored",(function(){return Zdt})),n.d(x,"NO_FIELDS_NEEDS_AS",(function(){return Qdt})),n.d(x,"customFormatTypeNotAllowed",(function(){return tht})),n.d(x,"encodingOverridden",(function(){return eht})),n.d(x,"projectionOverridden",(function(){return nht})),n.d(x,"REPLACE_ANGLE_WITH_THETA",(function(){return rht})),n.d(x,"primitiveChannelDef",(function(){return iht})),n.d(x,"invalidFieldType",(function(){return aht})),n.d(x,"invalidFieldTypeForCountAggregate",(function(){return oht})),n.d(x,"invalidAggregate",(function(){return sht})),n.d(x,"missingFieldType",(function(){return uht})),n.d(x,"droppingColor",(function(){return cht})),n.d(x,"emptyFieldDef",(function(){return lht})),n.d(x,"latLongDeprecated",(function(){return fht})),n.d(x,"LINE_WITH_VARYING_SIZE",(function(){return dht})),n.d(x,"incompatibleChannel",(function(){return hht})),n.d(x,"invalidEncodingChannel",(function(){return pht})),n.d(x,"facetChannelShouldBeDiscrete",(function(){return mht})),n.d(x,"facetChannelDropped",(function(){return ght})),n.d(x,"discreteChannelCannotEncode",(function(){return bht})),n.d(x,"lineWithRange",(function(){return yht})),n.d(x,"orientOverridden",(function(){return vht})),n.d(x,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return xht})),n.d(x,"RANGE_STEP_DEPRECATED",(function(){return wht})),n.d(x,"cannotUseScalePropertyWithNonColor",(function(){return Oht})),n.d(x,"unaggregateDomainHasNoEffectForRawField",(function(){return _ht})),n.d(x,"unaggregateDomainWithNonSharedDomainOp",(function(){return Aht})),n.d(x,"unaggregatedDomainWithLogScale",(function(){return jht})),n.d(x,"cannotApplySizeToNonOrientedMark",(function(){return kht})),n.d(x,"scaleTypeNotWorkWithChannel",(function(){return Cht})),n.d(x,"scaleTypeNotWorkWithFieldDef",(function(){return Eht})),n.d(x,"scalePropertyNotWorkWithScaleType",(function(){return Sht})),n.d(x,"scaleTypeNotWorkWithMark",(function(){return Dht})),n.d(x,"stepDropped",(function(){return Fht})),n.d(x,"mergeConflictingProperty",(function(){return Nht})),n.d(x,"mergeConflictingDomainProperty",(function(){return Tht})),n.d(x,"independentScaleMeansIndependentGuide",(function(){return Mht})),n.d(x,"domainSortDropped",(function(){return Iht})),n.d(x,"MORE_THAN_ONE_SORT",(function(){return Rht})),n.d(x,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return $ht})),n.d(x,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return Bht})),n.d(x,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return zht})),n.d(x,"INVALID_CHANNEL_FOR_AXIS",(function(){return Lht})),n.d(x,"cannotStackRangedMark",(function(){return Pht})),n.d(x,"cannotStackNonLinearScale",(function(){return Uht})),n.d(x,"stackNonSummativeAggregate",(function(){return Wht})),n.d(x,"invalidTimeUnit",(function(){return qht})),n.d(x,"droppedDay",(function(){return Vht})),n.d(x,"errorBarCenterAndExtentAreNotNeeded",(function(){return Ght})),n.d(x,"errorBarCenterIsUsedWithWrongExtent",(function(){return Hht})),n.d(x,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return Xht})),n.d(x,"errorBarCenterIsNotNeeded",(function(){return Yht})),n.d(x,"errorBand1DNotSupport",(function(){return Kht})),n.d(x,"channelRequiredForBinned",(function(){return Jht})),n.d(x,"domainRequiredForThresholdScale",(function(){return Zht}));var w={};n.r(w),n.d(w,"compile",(function(){return dDt})),n.d(w,"extractTransforms",(function(){return bDt})),n.d(w,"normalize",(function(){return $vt})),n.d(w,"version",(function(){return yDt}));var O={};n.r(O),n.d(O,"dark",(function(){return UDt})),n.d(O,"excel",(function(){return qDt})),n.d(O,"fivethirtyeight",(function(){return JDt})),n.d(O,"ggplot2",(function(){return QDt})),n.d(O,"googlecharts",(function(){return SFt})),n.d(O,"latimes",(function(){return lFt})),n.d(O,"quartz",(function(){return hFt})),n.d(O,"urbaninstitute",(function(){return jFt})),n.d(O,"version",(function(){return DFt})),n.d(O,"vox",(function(){return mFt}));function _(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?n(t.value):i(t.value).then(o,s)}u((r=r.apply(t,e||[])).next())}))}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var A=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=Object.prototype.hasOwnProperty;function k(t,e){return j.call(t,e)}function C(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);e=[];for(var r in t)k(t,r)&&e.push(r);return e}function E(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function S(t){var e,n=0,r=t.length;while(n<r){if(e=t.charCodeAt(n),!(e>=48&&e<=57))return!1;n++}return!0}function D(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function F(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function N(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(N(t[e]))return!0}else if("object"===typeof t){var r=C(t),i=r.length;for(e=0;e<i;e++)if(N(t[r[e]]))return!0}return!1}function T(t,e){var n=[t];for(var r in e){var i="object"===typeof e[r]?JSON.stringify(e[r],null,2):e[r];"undefined"!==typeof i&&n.push(r+": "+i)}return n.join("\n")}var M=function(t){function e(e,n,r,i,a){var o=this.constructor,s=t.call(this,T(e,{name:n,index:r,operation:i,tree:a}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=a,Object.setPrototypeOf(s,o.prototype),s.message=T(e,{name:n,index:r,operation:i,tree:a}),s}return A(e,t),e}(Error),I=M,R=E,$={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=z(n,this.path);r&&(r=E(r));var i=L(n,{op:"remove",path:this.from}).removed;return L(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=z(n,this.from);return L(n,{op:"add",path:this.path,value:E(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:V(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},B={add:function(t,e,n){return S(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:$.move,copy:$.copy,test:$.test,_get:$._get};function z(t,e){if(""==e)return t;var n={op:"_get",path:e};return L(t,n),n.value}function L(t,e,n,r,i,a){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=0),n&&("function"==typeof n?n(e,0,t,e.path):W(e,0)),""===e.path){var o={newDocument:t};if("add"===e.op)return o.newDocument=e.value,o;if("replace"===e.op)return o.newDocument=e.value,o.removed=t,o;if("move"===e.op||"copy"===e.op)return o.newDocument=z(t,e.from),"move"===e.op&&(o.removed=t),o;if("test"===e.op){if(o.test=V(t,e.value),!1===o.test)throw new I("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o.newDocument=t,o}if("remove"===e.op)return o.removed=t,o.newDocument=null,o;if("_get"===e.op)return e.value=t,o;if(n)throw new I("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return o}r||(t=E(t));var s=e.path||"",u=s.split("/"),c=t,l=1,f=u.length,d=void 0,h=void 0,p=void 0;p="function"==typeof n?n:W;while(1){if(h=u[l],i&&"__proto__"==h)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===d&&(void 0===c[h]?d=u.slice(0,l).join("/"):l==f-1&&(d=e.path),void 0!==d&&p(e,0,t,d)),l++,Array.isArray(c)){if("-"===h)h=c.length;else{if(n&&!S(h))throw new I("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);S(h)&&(h=~~h)}if(l>=f){if(n&&"add"===e.op&&h>c.length)throw new I("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);o=B[e.op].call(e,c,h,t);if(!1===o.test)throw new I("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o}}else if(h&&-1!=h.indexOf("~")&&(h=F(h)),l>=f){o=$[e.op].call(e,c,h,t);if(!1===o.test)throw new I("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o}c=c[h]}}function P(t,e,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(e))throw new I("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=E(t));for(var a=new Array(e.length),o=0,s=e.length;o<s;o++)a[o]=L(t,e[o],n,!0,i,o),t=a[o].newDocument;return a.newDocument=t,a}function U(t,e,n){var r=L(t,e);if(!1===r.test)throw new I("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function W(t,e,n,r){if("object"!==typeof t||null===t||Array.isArray(t))throw new I("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(!$[t.op])throw new I("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n);if("string"!==typeof t.path)throw new I("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new I('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if(("move"===t.op||"copy"===t.op)&&"string"!==typeof t.from)throw new I("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new I("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&N(t.value))throw new I("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n)if("add"==t.op){var i=t.path.split("/").length,a=r.split("/").length;if(i!==a+1&&i!==a)throw new I("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==r)throw new I("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if("move"===t.op||"copy"===t.op){var o={op:"_get",path:t.from,value:void 0},s=q([o],n);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new I("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}function q(t,e,n){try{if(!Array.isArray(t))throw new I("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)P(E(e),E(t),n||!0);else{n=n||W;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof I)return i;throw i}}function V(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,r,i,a=Array.isArray(t),o=Array.isArray(e);if(a&&o){if(r=t.length,r!=e.length)return!1;for(n=r;0!==n--;)if(!V(t[n],e[n]))return!1;return!0}if(a!=o)return!1;var s=Object.keys(t);if(r=s.length,r!==Object.keys(e).length)return!1;for(n=r;0!==n--;)if(!e.hasOwnProperty(s[n]))return!1;for(n=r;0!==n--;)if(i=s[n],!V(t[i],e[i]))return!1;return!0}return t!==t&&e!==e}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var G=new WeakMap,H=function(){function t(t){this.observers=new Map,this.obj=t}return t}(),X=function(){function t(t,e){this.callback=t,this.observer=e}return t}();function Y(t){return G.get(t)}function K(t,e){return t.observers.get(e)}function J(t,e){t.observers.delete(e.callback)}function Z(t,e){e.unobserve()}function Q(t,e){var n,r=[],i=Y(t);if(i){var a=K(i,e);n=a&&a.observer}else i=new H(t),G.set(t,i);if(n)return n;if(n={},i.value=E(t),e){n.callback=e,n.next=null;var o=function(){tt(n)},s=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!==typeof window&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return n.patches=r,n.object=t,n.unobserve=function(){tt(n),clearTimeout(n.next),J(i,n),"undefined"!==typeof window&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(e,new X(e,n)),n}function tt(t,e){void 0===e&&(e=!1);var n=G.get(t.object);et(n.value,t.object,t.patches,"",e),t.patches.length&&P(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function et(t,e,n,r,i){if(e!==t){"function"===typeof e.toJSON&&(e=e.toJSON());for(var a=C(e),o=C(t),s=!1,u=o.length-1;u>=0;u--){var c=o[u],l=t[c];if(!k(e,c)||void 0===e[c]&&void 0!==l&&!1===Array.isArray(e))Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+D(c),value:E(l)}),n.push({op:"remove",path:r+"/"+D(c)}),s=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}),!0);else{var f=e[c];"object"==typeof l&&null!=l&&"object"==typeof f&&null!=f?et(l,f,n,r+"/"+D(c),i):l!==f&&(!0,i&&n.push({op:"test",path:r+"/"+D(c),value:E(l)}),n.push({op:"replace",path:r+"/"+D(c),value:E(f)}))}}if(s||a.length!=o.length)for(u=0;u<a.length;u++){c=a[u];k(t,c)||void 0===e[c]||n.push({op:"add",path:r+"/"+D(c),value:E(e[c])})}}}function nt(t,e,n){void 0===n&&(n=!1);var r=[];return et(t,e,r,"",n),r}Object.assign({},r,i,{JsonPatchError:M,deepClone:E,escapePathComponent:D,unescapePathComponent:F});var rt=n("6582"),it=n.n(rt),at=n("4d89"),ot=function(t,e,n){return t.fields=e||[],t.fname=n,t};function st(t){return null==t?null:t.fname}function ut(t){return null==t?null:t.fields}var ct=function(t){return 1===t.length?lt(t[0]):ft(t)};const lt=t=>function(e){return e[t]},ft=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};var dt=function(t){throw Error(t)},ht=function(t){var e,n,r,i=[],a=null,o=0,s=t.length,u="";function c(){i.push(u+t.substring(e,n)),u="",e=n+1}for(t+="",e=n=0;n<s;++n)if(r=t[n],"\\"===r)u+=t.substring(e,n),u+=t.substring(++n,++n),e=n;else if(r===a)c(),a=null,o=-1;else{if(a)continue;e===o&&'"'===r||e===o&&"'"===r?(e=n+1,a=r):"."!==r||o?"["===r?(n>e&&c(),o=e=n+1):"]"===r&&(o||dt("Access path missing open bracket: "+t),o>0&&c(),o=0,e=n+1):n>e?c():e=n+1}return o&&dt("Access path missing closing bracket: "+t),a&&dt("Access path missing closing quote: "+t),n>e&&(n++,c()),i},pt=function(t,e,n){const r=ht(t);return t=1===r.length?r[0]:t,ot((n&&n.get||ct)(r),[t],e||t)},mt=[],gt=pt("id"),bt=ot((function(t){return t}),mt,"identity"),yt=ot((function(){return 0}),mt,"zero"),vt=ot((function(){return 1}),mt,"one"),xt=ot((function(){return!0}),mt,"true"),wt=ot((function(){return!1}),mt,"false");function Ot(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var _t=0,At=1,jt=2,kt=3,Ct=4,Et=function(t,e){var n=t||_t;return{level:function(t){return arguments.length?(n=+t,this):n},error:function(){return n>=At&&Ot(e||"error","ERROR",arguments),this},warn:function(){return n>=jt&&Ot(e||"warn","WARN",arguments),this},info:function(){return n>=kt&&Ot(e||"log","INFO",arguments),this},debug:function(){return n>=Ct&&Ot(e||"log","DEBUG",arguments),this}}},St=Array.isArray,Dt=function(t){return t===Object(t)};const Ft=t=>"__proto__"!==t;function Nt(...t){return t.reduce((t,e)=>{for(var n in e)if("signals"===n)t.signals=Mt(t.signals,e.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;Tt(t,n,e[n],r)}return t},{})}function Tt(t,e,n,r){var i,a;if(Ft(e))if(Dt(n)&&!St(n))for(i in a=Dt(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?Tt(a,i,n[i]):Ft(i)&&(a[i]=n[i]);else t[e]=n}function Mt(t,e){if(null==t)return e;const n={},r=[];function i(t){n[t.name]||(n[t.name]=1,r.push(t))}return e.forEach(i),t.forEach(i),r}var It=function(t){return t[t.length-1]},Rt=function(t){return null==t||""===t?null:+t};function $t(t){return function(e){return t*Math.exp(e)}}function Bt(t){return function(e){return Math.log(t*e)}}function zt(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Lt(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Pt(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ut(t,e,n,r){var i=n(t[0]),a=n(It(t)),o=(a-i)*e;return[r(i-o),r(a-o)]}function Wt(t,e){return Ut(t,e,Rt,bt)}function qt(t,e){var n=Math.sign(t[0]);return Ut(t,e,Bt(n),$t(n))}function Vt(t,e,n){return Ut(t,e,Pt(n),Pt(1/n))}function Gt(t,e,n){return Ut(t,e,zt(n),Lt(n))}function Ht(t,e,n,r,i){var a=r(t[0]),o=r(It(t)),s=null!=e?r(e):(a+o)/2;return[i(s+(a-s)*n),i(s+(o-s)*n)]}function Xt(t,e,n){return Ht(t,e,n,Rt,bt)}function Yt(t,e,n){var r=Math.sign(t[0]);return Ht(t,e,n,Bt(r),$t(r))}function Kt(t,e,n,r){return Ht(t,e,n,Pt(r),Pt(1/r))}function Jt(t,e,n,r){return Ht(t,e,n,zt(r),Lt(r))}function Zt(t){return 1+~~(new Date(t).getMonth()/3)}function Qt(t){return 1+~~(new Date(t).getUTCMonth()/3)}var te=function(t){return null!=t?St(t)?t:[t]:[]},ee=function(t,e,n){var r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]},ne=function(t){return"function"===typeof t};const re="descending";var ie=function(t,e,n){n=n||{},e=te(e)||[];const r=[],i=[],a={},o=n.comparator||oe;return te(t).forEach((t,o)=>{null!=t&&(r.push(e[o]===re?-1:1),i.push(t=ne(t)?t:pt(t,null,n)),(ut(t)||[]).forEach(t=>a[t]=1))}),0===i.length?null:ot(o(i,r),Object.keys(a))};const ae=(t,e)=>(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),oe=(t,e)=>1===t.length?se(t[0],e[0]):ue(t,e,t.length),se=(t,e)=>function(n,r){return ae(t(n),t(r))*e},ue=(t,e,n)=>(e.push(0),function(r,i){let a,o=0,s=-1;while(0===o&&++s<n)a=t[s],o=ae(a(r),a(i));return o*e[s]});var ce=function(t){return ne(t)?t:function(){return t}},le=function(t,e){var n,r;function i(){e(r),n=r=null}return function(e){r=e,n&&clearTimeout(n),n=setTimeout(i,t)}},fe=function(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r],e)t[n]=e[n];return t},de=function(t,e){var n,r,i,a,o=0;if(t&&(n=t.length))if(null==e){for(r=t[o];o<n&&(null==r||r!==r);r=t[++o]);for(i=a=r;o<n;++o)r=t[o],null!=r&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=e(t[o]);o<n&&(null==r||r!==r);r=e(t[++o]));for(i=a=r;o<n;++o)r=e(t[o]),null!=r&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]},he=function(t,e){var n,r,i,a,o,s=-1,u=t.length;if(null==e){while(++s<u)if(r=t[s],null!=r&&r>=r){n=i=r;break}if(s===u)return[-1,-1];a=o=s;while(++s<u)r=t[s],null!=r&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}else{while(++s<u)if(r=e(t[s],s,t),null!=r&&r>=r){n=i=r;break}if(s===u)return[-1,-1];a=o=s;while(++s<u)r=e(t[s],s,t),null!=r&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}return[a,o]};const pe=Object.prototype.hasOwnProperty;var me=function(t,e){return pe.call(t,e)},ge={},be=function(t){var e,n,r={};function i(t){return me(r,t)&&r[t]!==ge}return e={size:0,empty:0,object:r,has:i,get(t){return i(t)?r[t]:void 0},set(t,n){return i(t)||(++e.size,r[t]===ge&&--e.empty),r[t]=n,this},delete(t){return i(t)&&(--e.size,++e.empty,r[t]=ge),this},clear(){e.size=e.empty=0,e.object=r={}},test(t){return arguments.length?(n=t,e):n},clean(){var t,i,a={},o=0;for(t in r)i=r[t],i===ge||n&&n(i)||(a[t]=i,++o);e.size=o,e.empty=0,e.object=r=a}},t&&Object.keys(t).forEach((function(n){e.set(n,t[n])})),e},ye=function(t,e,n,r,i,a){if(!n&&0!==n)return a;var o,s,u=t[0],c=It(t),l=+n;return c<u&&(o=u,u=c,c=o),o=Math.abs(e-u),s=Math.abs(c-e),o<s&&o<=l?r:s<=l?i:a},ve=function(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n},xe=function(t,e,n,r){var i,a=e[0],o=e[e.length-1];return a>o&&(i=a,a=o,o=i),n=void 0===n||n,r=void 0===r||r,(n?a<=t:a<t)&&(r?t<=o:t<o)},we=function(t){return"boolean"===typeof t},Oe=function(t){return"[object Date]"===Object.prototype.toString.call(t)},_e=function(t){return"number"===typeof t},Ae=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},je=function(t){return"string"===typeof t},ke=function(t,e,n){t&&(t=e?te(t).map(t=>t.replace(/\\(.)/g,"$1")):te(t));const r=t&&t.length,i=n&&n.get||ct,a=t=>i(e?[t]:ht(t));let o;if(r)if(1===r){const e=a(t[0]);o=function(t){return""+e(t)}}else{const e=t.map(a);o=function(t){let n=""+e[0](t),i=0;while(++i<r)n+="|"+e[i](t);return n}}else o=function(){return""};return ot(o,t,"key")},Ce=function(t,e){const n=t[0],r=It(t),i=+e;return i?1===i?r:n+i*(r-n):n};const Ee=1e4;var Se=function(t){let e,n,r;t=+t||Ee;const i=()=>{e={},n={},r=0},a=(i,a)=>(++r>t&&(n=e,e={},r=1),e[i]=a);return i(),{clear:i,has:t=>me(e,t)||me(n,t),get:t=>me(e,t)?e[t]:me(n,t)?a(t,n[t]):void 0,set:(t,n)=>me(e,t)?e[t]=n:a(t,n)}},De=function(t,e,n,r){var i=e.length,a=n.length;if(!a)return e;if(!i)return n;for(var o=r||new e.constructor(i+a),s=0,u=0,c=0;s<i&&u<a;++c)o[c]=t(e[s],n[u])>0?n[u++]:e[s++];for(;s<i;++s,++c)o[c]=e[s];for(;u<a;++u,++c)o[c]=n[u];return o},Fe=function(t,e){var n="";while(--e>=0)n+=t;return n},Ne=function(t,e,n,r){var i=n||" ",a=t+"",o=e-a.length;return o<=0?a:"left"===r?Fe(i,o)+a:"center"===r?Fe(i,~~(o/2))+a+Fe(i,Math.ceil(o/2)):a+Fe(i,o)},Te=function(t){return t&&It(t)-t[0]||0};function Me(t){return St(t)?"["+t.map(Me)+"]":Dt(t)||je(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var Ie=function(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t};function Re(t){return _e(t)||Oe(t)?t:Date.parse(t)}var $e=function(t,e){return e=e||Re,null==t||""===t?null:e(t)},Be=function(t){return null==t||""===t?null:t+""},ze=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e},Le=function(t,e,n,r){var i=null!=r?r:"",a=t+"",o=a.length,s=Math.max(0,e-i.length);return o<=e?a:"left"===n?i+a.slice(o-s):"center"===n?a.slice(0,Math.ceil(s/2))+i+a.slice(o-~~(s/2)):a.slice(0,s)+i},Pe=function(t,e,n){if(t)if(e)for(var r,i=0,a=t.length;i<a;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)},Ue=n("fc17");const We=/^([A-Za-z]+:)?\/\//,qe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Ve=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Ge="file://";var He=function(t,e){return n=>({options:n||{},sanitize:Ye,load:Xe,fileAccess:!!e,file:Ke(e),http:Ze(t)})};async function Xe(t,e){const n=await this.sanitize(t,e),r=n.href;return n.localFile?this.file(r):this.http(r,e)}async function Ye(t,e){e=Object(Ue["l"])({},this.options,e);const n=this.fileAccess,r={href:null};let i,a,o;const s=qe.test(t.replace(Ve,""));null!=t&&"string"===typeof t&&s||Object(Ue["k"])("Sanitize failure, invalid URI: "+Object(Ue["W"])(t));const u=We.test(t);return(o=e.baseURL)&&!u&&(t.startsWith("/")||"/"===o[o.length-1]||(t="/"+t),t=o+t),a=(i=t.startsWith(Ge))||"file"===e.mode||"http"!==e.mode&&!u&&n,i?t=t.slice(Ge.length):t.startsWith("//")&&("file"===e.defaultProtocol?(t=t.slice(2),a=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(r,"localFile",{value:!!a}),r.href=t,e.target&&(r.target=e.target+""),e.rel&&(r.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(r.crossOrigin=e.crossOrigin+""),r}function Ke(t){return t?e=>new Promise((n,r)=>{t.readFile(e,(t,e)=>{t?r(t):n(e)})}):Je}async function Je(){Object(Ue["k"])("No file system access.")}function Ze(t){return t?async function(e,n){const r=Object(Ue["l"])({},this.options.http,n),i=n&&n.response,a=await t(e,r);return a.ok?Object(Ue["A"])(a[i])?a[i]():a.text():Object(Ue["k"])(a.status+""+a.statusText)}:Qe}async function Qe(){Object(Ue["k"])("No HTTP fetch method available.")}const tn=t=>null!=t&&t===t,en=t=>"true"===t||"false"===t||!0===t||!1===t,nn=t=>!Number.isNaN(Date.parse(t)),rn=t=>!Number.isNaN(+t)&&!(t instanceof Date),an=t=>rn(t)&&Number.isInteger(+t),on={boolean:Ue["X"],integer:Ue["Z"],number:Ue["Z"],date:Ue["Y"],string:Ue["bb"],unknown:Ue["u"]},sn=[en,an,rn,nn],un=["boolean","integer","number","date"];function cn(t,e){if(!t||!t.length)return"unknown";const n=t.length,r=sn.length,i=sn.map((t,e)=>e+1);for(let a,o,s=0,u=0;s<n;++s)for(o=e?t[s][e]:t[s],a=0;a<r;++a)if(i[a]&&tn(o)&&!sn[a](o)&&(i[a]=0,++u,u===sn.length))return"string";return un[i.reduce((t,e)=>0===t?e:t,0)-1]}function ln(t,e){return e.reduce((e,n)=>(e[n]=cn(t,n),e),{})}var fn=n("3512");function dn(t){const e=function(e,n){const r={delimiter:t};return hn(e,n?Object(Ue["l"])(n,r):r)};return e.responseType="text",e}function hn(t,e){return e.header&&(t=e.header.map(Ue["W"]).join(e.delimiter)+"\n"+t),Object(fn["a"])(e.delimiter).parse(t+"")}hn.responseType="text";var pn=n("9b0d"),mn=n("d217");const gn={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function bn(t,e){let n,r,i,a;return t=Object(pn["a"])(t,e),e&&e.feature?(n=mn["a"],i=e.feature):e&&e.mesh?(n=mn["b"],i=e.mesh,a=gn[e.filter]):Object(Ue["k"])("Missing TopoJSON feature or mesh parameter."),r=(r=t.objects[i])?n(t,r,a):Object(Ue["k"])("Invalid TopoJSON object: "+i),r&&r.features||[r]}bn.responseType="json";const yn={dsv:hn,csv:dn(","),tsv:dn("\t"),json:pn["a"],topojson:bn};function vn(t,e){return arguments.length>1?(yn[t]=e,this):Object(Ue["s"])(yn,t)?yn[t]:null}function xn(t){const e=vn(t);return e&&e.responseType||"text"}var wn=n("c092"),On=function(t,e,n,r){e=e||{};const i=vn(e.type||"json");return i||Object(Ue["k"])("Unknown data format type: "+e.type),t=i(t,e),e.parse&&_n(t,e.parse,n,r),Object(Ue["s"])(t,"columns")&&delete t.columns,t};function _n(t,e,n,r){if(!t.length)return;const i=Object(wn["e"])();n=n||i.timeParse,r=r||i.utcParse;let a,o,s,u,c,l,f=t.columns||Object.keys(t[0]);"auto"===e&&(e=ln(t,f)),f=Object.keys(e);const d=f.map(t=>{const i=e[t];let a,o;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){a=i.split(/:(.+)?/,2),o=a[1],("'"===o[0]&&"'"===o[o.length-1]||'"'===o[0]&&'"'===o[o.length-1])&&(o=o.slice(1,-1));const t="utc"===a[0]?r:n;return t(o)}if(!on[i])throw Error("Illegal format pattern: "+t+":"+i);return on[i]});for(s=0,c=t.length,l=f.length;s<c;++s)for(a=t[s],u=0;u<l;++u)o=f[u],a[o]=d[u](a[o])}const An=He("undefined"!==typeof fetch&&fetch,null);function jn(t){const e=t||Ue["u"],n=[],r={};return n.add=t=>{const i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=t=>{const i=e(t);if(r[i]){r[i]=0;const e=n.indexOf(t);e>=0&&n.splice(e,1)}return n},n}async function kn(t,e){try{await e(t)}catch(n){t.error(n)}}const Cn=Symbol("vega_id");let En=1;function Sn(t){return!(!t||!Dn(t))}function Dn(t){return t[Cn]}function Fn(t,e){return t[Cn]=e,t}function Nn(t){const e=t===Object(t)?t:{data:t};return Dn(e)?e:Fn(e,En++)}function Tn(t){return Mn(t,Nn({}))}function Mn(t,e){for(const n in t)e[n]=t[n];return e}function In(t,e){return Fn(e,Dn(t))}function Rn(t,e){return t?e?(n,r)=>t(n,r)||Dn(e(n))-Dn(e(r)):(e,n)=>t(e,n)||Dn(e)-Dn(n):null}function $n(t){return t&&t.constructor===Bn}function Bn(){const t=[],e=[],n=[],r=[],i=[];let a=null,o=!1;return{constructor:Bn,insert(e){const n=Object(Ue["e"])(e),r=n.length;for(let i=0;i<r;++i)t.push(n[i]);return this},remove(t){const n=Object(Ue["A"])(t)?r:e,i=Object(Ue["e"])(t),a=i.length;for(let e=0;e<a;++e)n.push(i[e]);return this},modify(t,e,r){const a={field:e,value:Object(Ue["i"])(r)};return Object(Ue["A"])(t)?(a.filter=t,i.push(a)):(a.tuple=t,n.push(a)),this},encode(t,e){return Object(Ue["A"])(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},clean(t){return a=t,this},reflow(){return o=!0,this},pulse(s,u){const c={},l={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)c[Dn(u[f])]=1;for(f=0,d=e.length;f<d;++f)m=e[f],c[Dn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(t=>{p(t)&&(c[Dn(t)]=-1)});for(f=0,d=t.length;f<d;++f)m=t[f],g=Dn(m),c[g]?c[g]=1:s.add.push(Nn(t[f]));for(f=0,d=u.length;f<d;++f)m=u[f],c[Dn(m)]<0&&s.rem.push(m);function b(t,e,n){n?t[e]=n(t):s.encode=e,o||(l[Dn(t)]=t)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=c[Dn(m)],g>0&&(b(m,p,h.value),s.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(t=>{p(t)&&c[Dn(t)]>0&&b(t,h.field,h.value)}),s.modifies(h.field);if(o)s.mod=e.length||r.length?u.filter(t=>c[Dn(t)]>0):u.slice();else for(g in l)s.mod.push(l[g]);return(a||null==a&&(e.length||r.length))&&s.clean(!0),s}}}const zn="_:mod:_";function Ln(){Object.defineProperty(this,zn,{writable:!0,value:{}})}Ln.prototype={set(t,e,n,r){const i=this,a=i[t],o=i[zn];return null!=e&&e>=0?(a[e]!==n||r)&&(a[e]=n,o[e+":"+t]=-1,o[t]=-1):(a!==n||r)&&(i[t]=n,o[t]=Object(Ue["x"])(n)?1+n.length:-1),i},modified(t,e){const n=this[zn];if(!arguments.length){for(const t in n)if(n[t])return!0;return!1}if(Object(Ue["x"])(t)){for(let e=0;e<t.length;++e)if(n[t[e]])return!0;return!1}return null!=e&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[zn]={},this}};let Pn=0;const Un="pulse",Wn=new Ln,qn=1,Vn=2;function Gn(t,e,n,r){this.id=++Pn,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}function Hn(t){return function(e){const n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}function Xn(t,e,n,r){let i,a=1;return t instanceof Gn?i=t:t&&t.prototype instanceof Gn?i=new t:Object(Ue["A"])(t)?i=new Gn(null,t):(a=0,i=new Gn(t,e)),this.rank(i),a&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i}function Yn(t,e){const n=t.rank,r=e.length;for(let i=0;i<r;++i)if(n<e[i].rank)return void this.rerank(t)}Gn.prototype={targets(){return this._targets||(this._targets=jn(Ue["t"]))},set(t){return this.value!==t?(this.value=t,1):0},skip:Hn(qn),modified:Hn(Vn),parameters(t,e,n){e=!1!==e;const r=this._argval=this._argval||new Ln,i=this._argops=this._argops||[],a=[];let o,s,u,c;const l=(t,n,o)=>{o instanceof Gn?(o!==this&&(e&&o.targets().add(this),a.push(o)),i.push({op:o,name:t,index:n})):r.set(t,n,o)};for(o in t)if(s=t[o],o===Un)Object(Ue["e"])(s).forEach(t=>{t instanceof Gn?t!==this&&(t.targets().add(this),a.push(t)):Object(Ue["k"])("Pulse parameters must be operator instances.")}),this.source=s;else if(Object(Ue["x"])(s))for(r.set(o,-1,Array(u=s.length)),c=0;c<u;++c)l(o,c,s[c]);else l(o,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),a},marshall(t){const e=this._argval||Wn,n=this._argops;let r,i,a,o;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],a=r.op,o=a.modified()&&a.stamp===t,e.set(r.name,r.index,a.value,o);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,r,i;if(t)for(e=0,n=t.length;e<n;++e)r=t[e],i=r.op,i._targets&&i._targets.remove(this)},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};let Kn=0;function Jn(t,e,n){this.id=++Kn,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function Zn(t,e,n){return new Jn(t,e,n)}function Qn(t,e,n,r){const i=this,a=Zn(n,r),o=function(t){t.dataflow=i;try{a.receive(t)}catch(e){i.error(e)}finally{i.run()}};let s;s="string"===typeof t&&"undefined"!==typeof document?document.querySelectorAll(t):Object(Ue["e"])(t);const u=s.length;for(let c=0;c<u;++c)s[c].addEventListener(e,o);return a}function tr(t,e){const n=this.locale();return On(t,e,n.timeParse,n.utcParse)}function er(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function nr(t,e){const n=this;let r,i=0;try{r=await n.loader().load(t,{context:"dataflow",response:xn(e&&e.type)});try{r=n.parse(r,e)}catch(a){i=-2,n.warn("Data ingestion failed",t,a)}}catch(a){i=-1,n.warn("Loading failed",t,a)}return{data:r,status:i}}async function rr(t,e,n){const r=this,i=r._pending||ir(r);i.requests+=1;const a=await r.request(e,n);return r.pulse(t,r.changeset().remove(Ue["db"]).insert(a.data||[])),i.done(),a}function ir(t){let e;const n=new Promise(t=>e=t);return n.requests=0,n.done=()=>{0===--n.requests&&(t._pending=null,e(t))},t._pending=n}Jn.prototype={_filter:Ue["db"],_apply:Ue["u"],targets(){return this._targets||(this._targets=jn(Ue["t"]))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,r=n?n.length:0;for(let t=0;t<r;++t)n[t].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=Zn(t);return this.targets().add(e),e},apply(t){const e=Zn(null,t);return this.targets().add(e),e},merge(){const t=Zn();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=Zn();return this.targets().add(Zn(null,null,Object(Ue["j"])(t,t=>{const n=t.dataflow;e.receive(t),n&&n.run&&n.run()}))),e},between(t,e){let n=!1;return t.targets().add(Zn(null,null,()=>n=!0)),e.targets().add(Zn(null,null,()=>n=!1)),this.filter(()=>n)},detach(){}};const ar={skip:!0};function or(t,e,n,r,i){const a=t instanceof Gn?ur:sr;return a(this,t,e,n,r,i),this}function sr(t,e,n,r,i,a){const o=Object(Ue["l"])({},a,ar);let s,u;Object(Ue["A"])(n)||(n=Object(Ue["i"])(n)),void 0===r?s=e=>t.touch(n(e)):Object(Ue["A"])(r)?(u=new Gn(null,r,i,!1),s=e=>{u.evaluate(e);const r=n(e),i=u.value;$n(i)?t.pulse(r,i,a):t.update(r,i,o)}):s=e=>t.update(n(e),r,o),e.apply(s)}function ur(t,e,n,r,i,a){if(void 0===r)e.targets().add(n);else{const o=a||{},s=new Gn(null,cr(n,r),i,!1);s.modified(o.force),s.rank=e.rank,e.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),t.connect(n,[s]))}}function cr(t,e){return e=Object(Ue["A"])(e)?e:Object(Ue["i"])(e),t?function(n,r){const i=e(n,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}function lr(t){t.rank=++this._rank}function fr(t){const e=[t];let n,r,i;while(e.length)if(this.rank(n=e.pop()),r=n._targets)for(i=r.length;--i>=0;)e.push(n=r[i]),n===t&&Object(Ue["k"])("Cycle detected in dataflow graph.")}const dr={},hr=1,pr=2,mr=4,gr=hr|pr,br=hr|mr,yr=hr|pr|mr,vr=8,xr=16,wr=32,Or=64;function _r(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Ar(t,e){const n=[];return Object(Ue["fb"])(t,e,t=>n.push(t)),n}function jr(t,e){const n={};return t.visit(e,t=>{n[Dn(t)]=1}),t=>n[Dn(t)]?null:t}function kr(t,e){return t?(n,r)=>t(n,r)&&e(n,r):e}function Cr(t,e,n,r){const i=this,a=n.length;let o=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n;for(let s=0;s<a;++s){const t=n[s];if(t.stamp===e){if(t.fields){const e=i.fields||(i.fields={});for(const n in t.fields)e[n]=1}t.changed(i.ADD)&&(o|=i.ADD),t.changed(i.REM)&&(o|=i.REM),t.changed(i.MOD)&&(o|=i.MOD)}}this.changes=o}async function Er(t,e,n){const r=this,i=[];if(r._pulse)return Nr(r);if(r._pending&&await r._pending,e&&await kn(r,e),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const a=++r._clock;r._pulse=new _r(r,a,t),r._touched.forEach(t=>r._enqueue(t,!0)),r._touched=jn(Ue["t"]);let o,s,u,c=0;try{while(r._heap.size()>0)o=r._heap.pop(),o.rank===o.qrank?(s=o.run(r._getPulse(o,t)),s.then?s=await s:s.async&&(i.push(s.async),s=dr),s!==dr&&o._targets&&o._targets.forEach(t=>r._enqueue(t)),++c):r._enqueue(o,!0)}catch(l){r._heap.clear(),u=l}if(r._input={},r._pulse=null,r.debug("Pulse ".concat(a,": ").concat(c," operators")),u&&(r._postrun=[],r.error(u)),r._postrun.length){const t=r._postrun.sort((t,e)=>e.priority-t.priority);r._postrun=[];for(let e=0;e<t.length;++e)await kn(r,t[e].callback)}return n&&await kn(r,n),i.length&&Promise.all(i).then(t=>r.runAsync(null,()=>{t.forEach(t=>{try{t(r)}catch(l){r.error(l)}})})),r}async function Sr(t,e,n){while(this._running)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(r,r),this._running}function Dr(t,e,n){return this._pulse?Nr(this):(this.evaluate(t,e,n),this)}function Fr(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(r){this.error(r)}}function Nr(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function Tr(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function Mr(t,e){const n=t.source,r=this._clock;return n&&Object(Ue["x"])(n)?new Cr(this,r,n.map(t=>t.pulse),e):this._input[t.id]||Ir(this._pulse,n&&n.pulse)}function Ir(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==dr&&(t.source=e.source),t)}_r.prototype={StopPropagation:dr,ADD:hr,REM:pr,MOD:mr,ADD_REM:gr,ADD_MOD:br,ALL:yr,REFLOW:vr,SOURCE:xr,NO_SOURCE:wr,NO_FIELDS:Or,fork(t){return new _r(this.dataflow).init(this,t)},clone(){const t=this.fork(yr);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(yr|xr)},addAll(){let t=this;const e=!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length;return e||(t=new _r(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||e&Or||(n.fields=t.fields),e&hr?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&pr?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&mr?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&wr?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||yr;return e&hr&&this.add.length||e&pr&&this.rem.length||e&mr&&this.mod.length},reflow(t){if(t)return this.fork(yr).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(mr,jr(this,hr))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return Object(Ue["x"])(t)?t.forEach(t=>e[t]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return!(!e&&!this.mod.length||!n)&&(arguments.length?Object(Ue["x"])(t)?t.some(t=>n[t]):n[t]:!!n)},filter(t,e){const n=this;return t&hr&&(n.addF=kr(n.addF,e)),t&pr&&(n.remF=kr(n.remF,e)),t&mr&&(n.modF=kr(n.modF,e)),t&xr&&(n.srcF=kr(n.srcF,e)),n},materialize(t){t=t||yr;const e=this;return t&hr&&e.addF&&(e.add=Ar(e.add,e.addF),e.addF=null),t&pr&&e.remF&&(e.rem=Ar(e.rem,e.remF),e.remF=null),t&mr&&e.modF&&(e.mod=Ar(e.mod,e.modF),e.modF=null),t&xr&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,r=e;if(t&xr)return Object(Ue["fb"])(n.source,n.srcF,r),n;t&hr&&Object(Ue["fb"])(n.add,n.addF,r),t&pr&&Object(Ue["fb"])(n.rem,n.remF,r),t&mr&&Object(Ue["fb"])(n.mod,n.modF,r);const i=n.source;if(t&vr&&i){const t=n.add.length+n.mod.length;t===i.length||(t?Object(Ue["fb"])(i,jr(n,br),r):Object(Ue["fb"])(i,n.srcF,r))}return n}},Object(Ue["v"])(Cr,_r,{fork(t){const e=new _r(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,t=>e.add.push(t)),t&e.REM&&this.visit(e.REM,t=>e.rem.push(t)),t&e.MOD&&this.visit(e.MOD,t=>e.mod.push(t))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?Object(Ue["x"])(t)?t.some(t=>n[t]):n[t]:0},filter(){Object(Ue["k"])("MultiPulse does not support filtering.")},materialize(){Object(Ue["k"])("MultiPulse does not support materialization.")},visit(t,e){const n=this,r=n.pulses,i=r.length;let a=0;if(t&n.SOURCE)for(;a<i;++a)r[a].visit(t,e);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(t,e);return n}});const Rr={skip:!1,force:!1};function $r(t,e){const n=e||Rr;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function Br(t,e,n){const r=n||Rr;return(t.set(e)||r.force)&&this.touch(t,r),this}function zr(t,e,n){this.touch(t,n||Rr);const r=new _r(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=e.pulse(r,i),this}function Lr(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),Pr(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let r;return e.length?(r=e[0],e[0]=n,Ur(e,0,t)):r=n,r}}}function Pr(t,e,n,r){let i,a;const o=t[n];while(n>e){if(a=n-1>>1,i=t[a],!(r(o,i)<0))break;t[n]=i,n=a}return t[n]=o}function Ur(t,e,n){const r=e,i=t.length,a=t[e];let o,s=1+(e<<1);while(s<i)o=s+1,o<i&&n(t[s],t[o])>=0&&(s=o),t[e]=t[s],e=s,s=1+(e<<1);return t[e]=a,Pr(t,r,e,n)}function Wr(){this.logger(Object(Ue["I"])()),this.logLevel(Ue["a"]),this._clock=0,this._rank=0,this._locale=Object(wn["a"])();try{this._loader=An()}catch(t){}this._touched=jn(Ue["t"]),this._input={},this._pulse=null,this._heap=Lr((t,e)=>t.qrank-e.qrank),this._postrun=[]}function qr(t){return function(){return this._log[t].apply(this,arguments)}}function Vr(t,e){Gn.call(this,t,null,e)}Wr.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:qr("error"),warn:qr("warn"),info:qr("info"),debug:qr("debug"),logLevel:qr("level"),cleanThreshold:1e4,add:Xn,connect:Yn,rank:lr,rerank:fr,pulse:zr,touch:$r,update:Br,changeset:Bn,ingest:er,parse:tr,preload:rr,request:nr,events:Qn,on:or,evaluate:Er,run:Dr,runAsync:Sr,runAfter:Fr,_enqueue:Tr,_getPulse:Mr},Object(Ue["v"])(Vr,Gn,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(t=>this.pulse=t):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const Gr={};function Hr(t){const e=Xr(t);return e&&e.Definition||null}function Xr(t){return t=t&&t.toLowerCase(),Object(Ue["s"])(Gr,t)?Gr[t]:null}var Yr=n("00fb");function Kr(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Jr(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Zr(t,e,n=0,r=t.length-1,i=Yr["a"]){while(r>n){if(r-n>600){const a=r-n+1,o=e-n+1,s=Math.log(a),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(a-u)/a)*(o-a/2<0?-1:1),l=Math.max(n,Math.floor(e-o*u/a+c)),f=Math.min(r,Math.floor(e+(a-o)*u/a+c));Zr(t,e,l,f,i)}const a=t[e];let o=n,s=r;Qr(t,n,e),i(t[r],a)>0&&Qr(t,n,r);while(o<s){Qr(t,o,s),++o,--s;while(i(t[o],a)<0)++o;while(i(t[s],a)>0)--s}0===i(t[n],a)?Qr(t,n,s):(++s,Qr(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Qr(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}var ti=function(t){return null===t?NaN:+t};function*ei(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}function ni(t,e,n){if(t=Float64Array.from(ei(t,n)),r=t.length){if((e=+e)<=0||r<2)return Jr(t);if(e>=1)return Kr(t);var r,i=(r-1)*e,a=Math.floor(i),o=Kr(Zr(t,a).subarray(0,a+1)),s=Jr(t.subarray(a+1));return o+(s-o)*(i-a)}}function ri(t,e,n=ti){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function ii(t,e){let n,r=0,i=0,a=0;if(void 0===e)for(let o of t)null!=o&&(o=+o)>=o&&(n=o-i,i+=n/++r,a+=n*(o-i));else{let o=-1;for(let s of t)null!=(s=e(s,++o,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,a+=n*(s-i))}if(r>1)return a/(r-1)}function ai(t,e){const n=ii(t,e);return n?Math.sqrt(n):n}var oi=function(t,e){return ni(t,.5,e)};function*si(t,e){if(null==e)for(let n of t)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)r=e(r,++n,t),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function ui(t,e,n){const r=Float64Array.from(si(t,n));return r.sort(Yr["a"]),e.map(t=>ri(r,t))}function ci(t,e){return ui(t,[.25,.5,.75],e)}function li(t,e){const n=t.length,r=ai(t,e),i=ci(t,e),a=(i[2]-i[0])/1.34,o=Math.min(r,a)||r||Math.abs(i[0])||1;return 1.06*o*Math.pow(n,-.2)}function fi(t){const e=t.maxbins||20,n=t.base||10,r=Math.log(n),i=t.divide||[5,2];let a,o,s,u,c,l,f=t.extent[0],d=t.extent[1];const h=t.span||d-f||Math.abs(f)||1;if(t.step)a=t.step;else if(t.steps){for(u=h/e,c=0,l=t.steps.length;c<l&&t.steps[c]<u;++c);a=t.steps[Math.max(0,c-1)]}else{o=Math.ceil(Math.log(e)/r),s=t.minstep||0,a=Math.max(s,Math.pow(n,Math.round(Math.log(h)/r)-o));while(Math.ceil(h/a)>e)a*=n;for(c=0,l=i.length;c<l;++c)u=a/i[c],u>=s&&h/u<=e&&(a=u)}u=Math.log(a);const p=u>=0?0:1+~~(-u/r),m=Math.pow(n,-p-1);return(t.nice||void 0===t.nice)&&(u=Math.floor(f/a+m)*a,f=f<u?u-a:u,d=Math.ceil(d/a)*a),{start:f,stop:d===f?f+a:d,step:a}}var di=Math.random;function hi(t){di=t}function pi(t,e,n,r){if(!t.length)return[void 0,void 0];const i=Float64Array.from(si(t,r)),a=i.length,o=e;let s,u,c,l;for(c=0,l=Array(o);c<o;++c){for(s=0,u=0;u<a;++u)s+=i[~~(di()*a)];l[c]=s/a}return l.sort(Yr["a"]),[ni(l,n/2),ni(l,1-n/2)]}function mi(t,e,n,r){r=r||(t=>t);const i=t.length,a=new Float64Array(i);let o,s=0,u=1,c=r(t[0]),l=c,f=c+e;for(;u<i;++u){if(o=r(t[u]),o>=f){for(l=(c+l)/2;s<u;++s)a[s]=l;f=o+e,c=o}l=o}for(l=(c+l)/2;s<u;++s)a[s]=l;return n?gi(a,e+e/4):a}function gi(t,e){const n=t.length;let r,i,a=0,o=1;while(t[a]===t[o])++o;while(o<n){r=o+1;while(t[o]===t[r])++r;if(t[o]-t[o-1]<e){i=o+(a+r-o-o>>1);while(i<o)t[i++]=t[o];while(i>o)t[i--]=t[a]}a=o,o=r}return t}function bi(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function yi(t,e){let n,r,i;null==e&&(e=t,t=0);const a={min(t){return arguments.length?(n=t||0,i=r-n,a):n},max(t){return arguments.length?(r=t||0,i=r-n,a):r},sample(){return n+Math.floor(i*di())},pdf(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},cdf(t){const e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},icdf(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN}};return a.min(t).max(e)}const vi=Math.sqrt(2*Math.PI),xi=Math.SQRT2;let wi=NaN;function Oi(t,e){t=t||0,e=null==e?1:e;let n,r,i=0,a=0;if(wi===wi)i=wi,wi=NaN;else{do{i=2*di()-1,a=2*di()-1,n=i*i+a*a}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,wi=a*r}return t+i*e}function _i(t,e,n){n=null==n?1:n;const r=(t-(e||0))/n;return Math.exp(-.5*r*r)/(n*vi)}function Ai(t,e,n){e=e||0,n=null==n?1:n;const r=(t-e)/n,i=Math.abs(r);let a;if(i>37)a=0;else{const t=Math.exp(-i*i/2);let e;i<7.07106781186547?(e=.0352624965998911*i+.700383064443688,e=e*i+6.37396220353165,e=e*i+33.912866078383,e=e*i+112.079291497871,e=e*i+221.213596169931,e=e*i+220.206867912376,a=t*e,e=.0883883476483184*i+1.75566716318264,e=e*i+16.064177579207,e=e*i+86.7807322029461,e=e*i+296.564248779674,e=e*i+637.333633378831,e=e*i+793.826512519948,e=e*i+440.413735824752,a/=e):(e=i+.65,e=i+4/e,e=i+3/e,e=i+2/e,e=i+1/e,a=t/e/2.506628274631)}return r>0?1-a:a}function ji(t,e,n){return t<0||t>1?NaN:(e||0)+(null==n?1:n)*xi*ki(2*t-1)}function ki(t){let e,n=-Math.log((1-t)*(1+t));return n<6.25?(n-=3.125,e=-364441206401782e-35,e=e*n-16850591381820166e-35,e=128584807152564e-32+e*n,e=11157877678025181e-33+e*n,e=e*n-1333171662854621e-31,e=20972767875968562e-33+e*n,e=6637638134358324e-30+e*n,e=e*n-4054566272975207e-29,e=e*n-8151934197605472e-29,e=26335093153082323e-28+e*n,e=e*n-12975133253453532e-27,e=e*n-5415412054294628e-26,e=1.0512122733215323e-9+e*n,e=e*n-4.112633980346984e-9,e=e*n-2.9070369957882005e-8,e=4.2347877827932404e-7+e*n,e=e*n-13654692000834679e-22,e=e*n-13882523362786469e-21,e=.00018673420803405714+e*n,e=e*n-.000740702534166267,e=e*n-.006033670871430149,e=.24015818242558962+e*n,e=1.6536545626831027+e*n):n<16?(n=Math.sqrt(n)-3.25,e=2.2137376921775787e-9,e=9.075656193888539e-8+e*n,e=e*n-2.7517406297064545e-7,e=1.8239629214389228e-8+e*n,e=15027403968909828e-22+e*n,e=e*n-4013867526981546e-21,e=29234449089955446e-22+e*n,e=12475304481671779e-21+e*n,e=e*n-47318229009055734e-21,e=6828485145957318e-20+e*n,e=24031110387097894e-21+e*n,e=e*n-.0003550375203628475,e=.0009532893797373805+e*n,e=e*n-.0016882755560235047,e=.002491442096107851+e*n,e=e*n-.003751208507569241,e=.005370914553590064+e*n,e=1.0052589676941592+e*n,e=3.0838856104922208+e*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,e=-27109920616438573e-27,e=e*n-2.555641816996525e-10,e=1.5076572693500548e-9+e*n,e=e*n-3.789465440126737e-9,e=7.61570120807834e-9+e*n,e=e*n-1.496002662714924e-8,e=2.914795345090108e-8+e*n,e=e*n-6.771199775845234e-8,e=2.2900482228026655e-7+e*n,e=e*n-9.9298272942317e-7,e=4526062597223154e-21+e*n,e=e*n-1968177810553167e-20,e=7599527703001776e-20+e*n,e=e*n-.00021503011930044477,e=e*n-.00013871931833623122,e=1.0103004648645344+e*n,e=4.849906401408584+e*n):e=1/0,e*t}function Ci(t,e){let n,r;const i={mean(t){return arguments.length?(n=t||0,i):n},stdev(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>Oi(n,r),pdf:t=>_i(t,n,r),cdf:t=>Ai(t,n,r),icdf:t=>ji(t,n,r)};return i.mean(t).stdev(e)}function Ei(t,e){const n=Ci();let r=0;const i={data(n){return arguments.length?(t=n,r=n?n.length:0,i.bandwidth(e)):t},bandwidth(n){return arguments.length?(e=n,!e&&t&&(e=li(t)),i):e},sample(){return t[~~(di()*r)]+e*n.sample()},pdf(i){let a=0,o=0;for(;o<r;++o)a+=n.pdf((i-t[o])/e);return a/e/r},cdf(i){let a=0,o=0;for(;o<r;++o)a+=n.cdf((i-t[o])/e);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function Si(t,e){return t=t||0,e=null==e?1:e,Math.exp(t+Oi()*e)}function Di(t,e,n){if(t<=0)return 0;e=e||0,n=null==n?1:n;const r=(Math.log(t)-e)/n;return Math.exp(-.5*r*r)/(n*vi*t)}function Fi(t,e,n){return Ai(Math.log(t),e,n)}function Ni(t,e,n){return Math.exp(ji(t,e,n))}function Ti(t,e){let n,r;const i={mean(t){return arguments.length?(n=t||0,i):n},stdev(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>Si(n,r),pdf:t=>Di(t,n,r),cdf:t=>Fi(t,n,r),icdf:t=>Ni(t,n,r)};return i.mean(t).stdev(e)}function Mi(t,e){let n,r=0;function i(t){const e=[];let n,i=0;for(n=0;n<r;++n)i+=e[n]=null==t[n]?1:+t[n];for(n=0;n<r;++n)e[n]/=i;return e}const a={weights(t){return arguments.length?(n=i(e=t||[]),a):e},distributions(n){return arguments.length?(n?(r=n.length,t=n):(r=0,t=[]),a.weights(e)):t},sample(){const e=di();let i=t[r-1],a=n[0],o=0;for(;o<r-1;a+=n[++o])if(e<a){i=t[o];break}return i.sample()},pdf(e){let i=0,a=0;for(;a<r;++a)i+=n[a]*t[a].pdf(e);return i},cdf(e){let i=0,a=0;for(;a<r;++a)i+=n[a]*t[a].cdf(e);return i},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(t).weights(e)}function Ii(t,e){return null==e&&(e=null==t?1:t,t=0),t+(e-t)*di()}function Ri(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function $i(t,e,n){return null==n&&(n=null==e?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function Bi(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function zi(t,e){let n,r;const i={min(t){return arguments.length?(n=t||0,i):n},max(t){return arguments.length?(r=null==t?1:t,i):r},sample:()=>Ii(n,r),pdf:t=>Ri(t,n,r),cdf:t=>$i(t,n,r),icdf:t=>Bi(t,n,r)};return null==e&&(e=null==t?1:t,t=0),i.min(t).max(e)}function Li(t,e,n,r){const i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i,o=e-a*t;return[o,a]}function Pi(t,e,n,r){t=t.filter(t=>{let r=e(t),i=n(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i}),r&&t.sort((t,n)=>e(t)-e(n));const i=t.length,a=new Float64Array(i),o=new Float64Array(i);let s,u,c,l=0,f=0,d=0;for(c of t)a[l]=s=+e(c),o[l]=u=+n(c),++l,f+=(s-f)/l,d+=(u-d)/l;for(l=0;l<i;++l)a[l]-=f,o[l]-=d;return[a,o,f,d]}function Ui(t,e,n,r){let i,a,o=-1;for(const s of t)i=e(s),a=n(s),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++o)}function Wi(t,e,n,r,i){let a=0,o=0;return Ui(t,e,n,(t,e)=>{const n=e-i(t),s=e-r;a+=n*n,o+=s*s}),1-a/o}function qi(t,e,n){let r=0,i=0,a=0,o=0,s=0;Ui(t,e,n,(t,e)=>{++s,r+=(t-r)/s,i+=(e-i)/s,a+=(t*e-a)/s,o+=(t*t-o)/s});const u=Li(r,i,a,o),c=t=>u[0]+u[1]*t;return{coef:u,predict:c,rSquared:Wi(t,e,n,i,c)}}function Vi(t,e,n){let r=0,i=0,a=0,o=0,s=0;Ui(t,e,n,(t,e)=>{++s,t=Math.log(t),r+=(t-r)/s,i+=(e-i)/s,a+=(t*e-a)/s,o+=(t*t-o)/s});const u=Li(r,i,a,o),c=t=>u[0]+u[1]*Math.log(t);return{coef:u,predict:c,rSquared:Wi(t,e,n,i,c)}}function Gi(t,e,n){const[r,i,a,o]=Pi(t,e,n);let s,u,c,l=0,f=0,d=0,h=0,p=0;Ui(t,e,n,(t,e)=>{s=r[p++],u=Math.log(e),c=s*e,l+=(e*u-l)/p,f+=(c-f)/p,d+=(c*u-d)/p,h+=(s*c-h)/p});const[m,g]=Li(f/o,l/o,d/o,h/o),b=t=>Math.exp(m+g*(t-a));return{coef:[Math.exp(m-g*a),g],predict:b,rSquared:Wi(t,e,n,o,b)}}function Hi(t,e,n){let r=0,i=0,a=0,o=0,s=0,u=0;Ui(t,e,n,(t,e)=>{const n=Math.log(t),c=Math.log(e);++u,r+=(n-r)/u,i+=(c-i)/u,a+=(n*c-a)/u,o+=(n*n-o)/u,s+=(e-s)/u});const c=Li(r,i,a,o),l=t=>c[0]*Math.pow(t,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:Wi(t,e,n,s,l)}}function Xi(t,e,n){const[r,i,a,o]=Pi(t,e,n),s=r.length;let u,c,l,f,d=0,h=0,p=0,m=0,g=0;for(u=0;u<s;)c=r[u],l=i[u++],f=c*c,d+=(f-d)/u,h+=(f*c-h)/u,p+=(f*f-p)/u,m+=(c*l-m)/u,g+=(f*l-g)/u;const b=p-d*d,y=d*b-h*h,v=(g*d-m*h)/y,x=(m*b-g*h)/y,w=-v*d,O=t=>(t-=a,v*t*t+x*t+w+o);return{coef:[w-x*a+v*a*a+o,x-2*v*a,v],predict:O,rSquared:Wi(t,e,n,o,O)}}function Yi(t,e,n,r){if(1===r)return qi(t,e,n);if(2===r)return Xi(t,e,n);const[i,a,o,s]=Pi(t,e,n),u=i.length,c=[],l=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*a[p];for(c.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}l.push(g)}l.push(c);const b=Ji(l),y=t=>{t-=o;let e=s+b[0]+b[1]*t+b[2]*t*t;for(d=3;d<f;++d)e+=b[d]*Math.pow(t,d);return e};return{coef:Ki(f,b,-o,s),predict:y,rSquared:Wi(t,e,n,s,y)}}function Ki(t,e,n,r){const i=Array(t);let a,o,s,u;for(a=0;a<t;++a)i[a]=0;for(a=t-1;a>=0;--a)for(s=e[a],u=1,i[a]+=s,o=1;o<=a;++o)u*=(a+1-o)/o,i[a-o]+=s*Math.pow(n,o)*u;return i[0]+=r,i}function Ji(t){const e=t.length-1,n=[];let r,i,a,o,s;for(r=0;r<e;++r){for(o=r,i=r+1;i<e;++i)Math.abs(t[r][i])>Math.abs(t[r][o])&&(o=i);for(a=r;a<e+1;++a)s=t[a][r],t[a][r]=t[a][o],t[a][o]=s;for(i=r+1;i<e;++i)for(a=e;a>=r;a--)t[a][i]-=t[a][r]*t[r][i]/t[r][r]}for(i=e-1;i>=0;--i){for(s=0,a=i+1;a<e;++a)s+=t[a][i]*n[a];n[i]=(t[e][i]-s)/t[i][i]}return n}const Zi=2,Qi=1e-12;function ta(t,e,n,r){const[i,a,o,s]=Pi(t,e,n,!0),u=i.length,c=Math.max(2,~~(r*u)),l=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Zi;){const t=[0,c-1];for(let n=0;n<u;++n){const e=i[n],r=t[0],o=t[1],s=e-i[r]>i[o]-e?r:o;let u=0,c=0,h=0,p=0,m=0;const g=1/Math.abs(i[s]-e||1);for(let t=r;t<=o;++t){const n=i[t],r=a[t],o=ea(Math.abs(e-n)*g)*d[t],s=n*o;u+=o,c+=s,h+=r*o,p+=r*s,m+=n*s}const[b,y]=Li(c/u,h/u,p/u,m/u);l[n]=b+y*e,f[n]=Math.abs(a[n]-l[n]),na(i,n+1,t)}if(h===Zi)break;const e=oi(f);if(Math.abs(e)<Qi)break;for(let n,r,i=0;i<u;++i)n=f[i]/(6*e),d[i]=n>=1?Qi:(r=1-n*n)*r}return ra(i,l,o,s)}function ea(t){return(t=1-t*t*t)*t*t}function na(t,e,n){const r=t[e];let i=n[0],a=n[1]+1;if(!(a>=t.length))while(e>i&&t[a]-r<=r-t[i])n[0]=++i,n[1]=a,++a}function ra(t,e,n,r){const i=t.length,a=[];let o,s=0,u=0,c=[];for(;s<i;++s)o=t[s]+n,c[0]===o?c[1]+=(e[s]-c[1])/++u:(u=0,c[1]+=r,c=[o,e[s]],a.push(c));return c[1]+=r,a}const ia=.1*Math.PI/180;function aa(t,e,n,r){n=n||25,r=Math.max(n,r||200);const i=e=>[e,t(e)],a=e[0],o=e[1],s=o-a,u=s/r,c=[i(a)],l=[];if(n===r){for(let t=1;t<r;++t)c.push(i(a+t/n*s));return c.push(i(o)),c}l.push(i(o));for(let h=n;--h>0;)l.push(i(a+h/n*s));let f=c[0],d=l[l.length-1];while(d){const t=i((f[0]+d[0])/2);t[0]-f[0]>=u&&oa(f,t,d)>ia?l.push(t):(f=d,c.push(d),l.pop()),d=l[l.length-1]}return c}function oa(t,e,n){const r=Math.atan2(n[1]-t[1],n[0]-t[0]),i=Math.atan2(e[1]-t[1],e[0]-t[0]);return Math.abs(r-i)}function sa(t,e){let n=0,r=0;if(void 0===e)for(let i of t)null!=i&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)null!=(a=e(a,++i,t))&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}var ua=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);while(++r<i)a[r]=t+r*n;return a},ca=n("2a2d"),la=n("de28");function fa(t){return e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}}function da(t){return t&&t.length?1===t.length?t[0]:fa(t):function(){return""}}function ha(t,e,n){return n||t+(e?"_"+e:"")}const pa=()=>{},ma={init:pa,add:pa,rem:pa,idx:0},ga={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||void 0===t.min)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||void 0===t.max)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},ba=Object.keys(ga);function ya(t,e){return n=>Object(Ue["l"])({name:t,out:n||t},ma,e)}function va(t,e){return ga[t](e)}function xa(t,e){return t.idx-e.idx}function wa(t){const e={};t.forEach(t=>e[t.name]=t);const n=t=>{t.req&&t.req.forEach(t=>{e[t]||n(e[t]=ga[t]())})};return t.forEach(n),Object.values(e).sort(xa)}function Oa(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function _a(t,e){null!=t&&""!==t?t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e))):++this.missing}function Aa(t,e){null!=t&&""!==t?t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e))):--this.missing}function ja(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function ka(t,e){const n=e||Ue["u"],r=wa(t),i=t.slice().sort(xa);function a(t){this._ops=r,this._out=i,this.cell=t,this.init()}return a.prototype.init=Oa,a.prototype.add=_a,a.prototype.rem=Aa,a.prototype.set=ja,a.prototype.get=n,a.fields=t.map(t=>t.out),a}function Ca(t){this._key=t?Object(Ue["q"])(t):Dn,this.reset()}ba.forEach(t=>{ga[t]=ya(t,ga[t])});const Ea=Ca.prototype;function Sa(t){Vr.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ea.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ea.add=function(t){this._add.push(t)},Ea.rem=function(t){this._rem.push(t)},Ea.values=function(){if(this._get=null,0===this._rem.length)return this._add;const t=this._add,e=this._rem,n=this._key,r=t.length,i=e.length,a=Array(r-i),o={};let s,u,c;for(s=0;s<i;++s)o[n(e[s])]=1;for(s=0,u=0;s<r;++s)o[n(c=t[s])]?o[n(c)]=0:a[u++]=c;return this._rem=[],this._add=a},Ea.distinct=function(t){const e=this.values(),n={};let r,i=e.length,a=0;while(--i>=0)r=t(e[i])+"",Object(Ue["s"])(n,r)||(n[r]=1,++a);return a},Ea.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=Object(Ue["n"])(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},Ea.argmin=function(t){return this.extent(t)[0]||{}},Ea.argmax=function(t){return this.extent(t)[1]||{}},Ea.min=function(t){const e=this.extent(t)[0];return null!=e?t(e):void 0},Ea.max=function(t){const e=this.extent(t)[1];return null!=e?t(e):void 0},Ea.quartile=function(t){return this._get===t&&this._q||(this._q=ci(this.values(),t),this._get=t),this._q},Ea.q1=function(t){return this.quartile(t)[0]},Ea.q2=function(t){return this.quartile(t)[1]},Ea.q3=function(t){return this.quartile(t)[2]},Ea.ci=function(t){return this._get===t&&this._ci||(this._ci=pi(this.values(),1e3,.05,t),this._get=t),this._ci},Ea.ci0=function(t){return this.ci(t)[0]},Ea.ci1=function(t){return this.ci(t)[1]},Sa.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ba},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},Object(Ue["v"])(Sa,Vr,{transform(t,e){const n=this,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.modified();return n.stamp=r.stamp,n.value&&(i||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):{},e.visit(e.SOURCE,t=>n.add(t))):(n.value=n.value||n.init(t),e.visit(e.REM,t=>n.rem(t)),e.visit(e.ADD,t=>n.add(t))),r.modifies(n._outputs),n._drop=!1!==t.drop,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const t=this,e=t.value,n=t._dnames,r=n.map(()=>({})),i=n.length;function a(t){let e,a,o,s;for(e in t)for(o=t[e].tuple,a=0;a<i;++a)r[a][s=o[n[a]]]=s}function o(a,s,u){const c=n[u],l=r[u++];for(const n in l){const r=a?a+"|"+n:n;s[c]=l[n],u<i?o(r,s,u):e[r]||t.cell(r,s)}}a(t._prev),a(e),o("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],r={};function i(t){const n=Object(Ue["e"])(Object(Ue["c"])(t)),i=n.length;let a,o=0;for(;o<i;++o)r[a=n[o]]||(r[a]=1,e.push(a))}this._dims=Object(Ue["e"])(t.groupby),this._dnames=this._dims.map(t=>{const e=Object(Ue["d"])(t);return i(t),n.push(e),e}),this.cellkey=t.key?t.key:da(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=t.fields||[null],o=t.ops||["count"],s=t.as||[],u=a.length,c={};let l,f,d,h,p,m;for(u!==o.length&&Object(Ue["k"])("Unmatched number of fields and aggregate ops."),m=0;m<u;++m)l=a[m],f=o[m],null==l&&"count"!==f&&Object(Ue["k"])("Null aggregate field specified."),h=Object(Ue["d"])(l),p=ha(f,h,s[m]),n.push(p),"count"!==f?(d=c[h],d||(i(l),d=c[h]=[],d.field=l,this._measures.push(d)),"count"!==f&&(this._countOnly=!1),d.push(va(f,p))):this._counts.push(p);return this._measures=this._measures.map(t=>ka(t,t.field)),{}},cellkey:da(),cell(t,e){let n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const t=this._measures,e=t.length;n.agg=Array(e);for(let r=0;r<e;++r)n.agg[r]=new t[r](n)}return n.store&&(n.data=new Ca),n},newtuple(t,e){const n=this._dnames,r=this._dims,i=r.length,a={};for(let o=0;o<i;++o)a[n[o]]=r[o](t);return e?In(e.tuple,a):Nn(a)},clean(){const t=this.value;for(const e in t)0===t[e].num&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const r=n.agg;for(let i=0,a=r.length;i<a;++i)r[i].add(r[i].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const r=n.agg;for(let i=0,a=r.length;i<a;++i)r[i].rem(r[i].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let r=0,i=n.length;r<i;++r)e[n[r]]=t.num;if(!this._countOnly){const n=t.agg;for(let t=0,r=n.length;t<r;++t)n[t].set(e)}return e},changes(t){const e=this._adds,n=this._mods,r=this._prev,i=this._drop,a=t.add,o=t.rem,s=t.mod;let u,c,l,f;if(r)for(c in r)u=r[c],i&&!u.num||o.push(u.tuple);for(l=0,f=this._alen;l<f;++l)a.push(this.celltuple(e[l])),e[l]=null;for(l=0,f=this._mlen;l<f;++l)u=n[l],(0===u.num&&i?o:s).push(this.celltuple(u)),n[l]=null;return this._alen=this._mlen=0,this._prev=null,t}});const Da=1e-14;function Fa(t){Vr.call(this,null,t)}function Na(t,e,n){const r=t;let i=e||[],a=n||[],o={},s=0;return{add:t=>a.push(t),remove:t=>o[r(t)]=++s,size:()=>i.length,data:(t,e)=>(s&&(i=i.filter(t=>!o[r(t)]),o={},s=0),e&&t&&i.sort(t),a.length&&(i=t?Object(Ue["K"])(t,i,a.sort(t)):i.concat(a),a=[]),i)}}function Ta(t){Vr.call(this,[],t)}function Ma(t){Gn.call(this,null,Ia,t)}function Ia(t){return this.value&&!t.modified()?this.value:Object(Ue["h"])(t.fields,t.orders)}function Ra(t){Vr.call(this,null,t)}function $a(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}function Ba(t){Vr.call(this,null,t)}function za(t,e,n,r){for(var i,a,o=[],s={},u=t.length,c=0;c<u;++c)for(s[e]=a=t[c],i=0;i<u;++i)s[n]=t[i],r(s)&&(o.push(Nn(s)),s={},s[e]=a);return o}Fa.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Object(Ue["v"])(Fa,Vr,{transform(t,e){const n=!1!==t.interval,r=this._bins(t),i=r.start,a=r.step,o=t.as||["bin0","bin1"],s=o[0],u=o[1];let c;return t.modified()?(e=e.reflow(!0),c=e.SOURCE):c=e.modified(Object(Ue["c"])(t.field))?e.ADD_MOD:e.ADD,e.visit(c,n?t=>{const e=r(t);t[s]=e,t[u]=null==e?null:i+a*(1+(e-i)/a)}:t=>t[s]=r(t)),e.modifies(n?o:s)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=fi(t),r=n.step;let i,a,o=n.start,s=o+Math.ceil((n.stop-o)/r)*r;null!=(i=t.anchor)&&(a=i-(o+r*Math.floor((i-o)/r)),o+=a,s+=a);const u=function(t){let n=Object(Ue["Z"])(e(t));return null==n?null:n<o?-1/0:n>s?1/0:(n=Math.max(o,Math.min(n,s-r)),o+r*Math.floor(Da+(n-o)/r))};return u.start=o,u.stop=n.stop,u.step=r,this.value=Object(Ue["b"])(u,Object(Ue["c"])(e),t.name||"bin_"+Object(Ue["d"])(e))}}),Ta.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(Ue["v"])(Ta,Vr,{transform(t,e){const n=e.fork(e.ALL),r=Na(Dn,this.value,n.materialize(n.ADD).add),i=t.sort,a=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(Rn(i),a),e.source&&e.source.root&&(this.value.root=e.source.root),n}}),Object(Ue["v"])(Ma,Gn),Ra.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},Object(Ue["v"])(Ra,Vr,{transform(t,e){const n=e=>n=>{for(var r,i=$a(s(n),t.case,a)||[],u=0,c=i.length;u<c;++u)o.test(r=i[u])||e(r)},r=this._parameterCheck(t,e),i=this._counts,a=this._match,o=this._stop,s=t.field,u=t.as||["text","count"],c=n(t=>i[t]=1+(i[t]||0)),l=n(t=>i[t]-=1);return r?e.visit(e.SOURCE,c):(e.visit(e.ADD,c),e.visit(e.REM,l)),this._finish(e,u)},_parameterCheck(t,e){let n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,r=this._tuples||(this._tuples={}),i=e[0],a=e[1],o=t.fork(t.NO_SOURCE|t.NO_FIELDS);let s,u,c;for(s in n)u=r[s],c=n[s]||0,!u&&c?(r[s]=u=Nn({}),u[i]=s,u[a]=c,o.add.push(u)):0===c?(u&&o.rem.push(u),n[s]=null,r[s]=null):u[a]!==c&&(u[a]=c,o.mod.push(u));return o.modifies(e)}}),Ba.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(Ue["v"])(Ba,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.as||["a","b"],i=r[0],a=r[1],o=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let s=this.value;return o?(s&&(n.rem=s),s=e.materialize(e.SOURCE).source,n.add=this.value=za(s,i,a,t.filter||Ue["db"])):n.mod=s,n.source=this.value,n.modifies(r)}});const La={kde:Ei,mixture:Mi,normal:Ci,lognormal:Ti,uniform:zi},Pa="distributions",Ua="function",Wa="field";function qa(t,e){const n=t[Ua];Object(Ue["s"])(La,n)||Object(Ue["k"])("Unknown distribution function: "+n);const r=La[n]();for(const i in t)i===Wa?r.data((t.from||e()).map(t[i])):i===Pa?r[i](t[i].map(t=>qa(t,e))):typeof r[i]===Ua&&r[i](t[i]);return r}function Va(t){Vr.call(this,null,t)}const Ga=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Ha={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Ga},{name:"weights",type:"number",array:!0}]};function Xa(t){return()=>t.materialize(t.SOURCE).source}function Ya(t,e){return t?t.map((t,n)=>e[n]||Object(Ue["d"])(t)):null}function Ka(t,e,n){const r=[],i=t=>t(u);let a,o,s,u,c,l;if(null==e)r.push(t.map(n));else for(a={},o=0,s=t.length;o<s;++o)u=t[o],c=e.map(i),l=a[c],l||(a[c]=l=[],l.dims=c,r.push(l)),l.push(n(u));return r}Va.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Ga.concat(Ha)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(Ue["v"])(Va,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=qa(t.distribution,Xa(e)),i=t.steps||t.minsteps||25,a=t.steps||t.maxsteps||200;let o=t.method||"pdf";"pdf"!==o&&"cdf"!==o&&Object(Ue["k"])("Invalid density method: "+o),t.extent||r.data||Object(Ue["k"])("Missing density extent parameter."),o=r[o];const s=t.as||["value","density"],u=t.extent||Object(Ue["m"])(r.data()),c=aa(o,u,i,a).map(t=>{const e={};return e[s[0]]=t[0],e[s[1]]=t[1],Nn(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const Ja="bin";function Za(t){Vr.call(this,null,t)}Za.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Ja}]};const Qa=(t,e)=>Object(Ue["U"])(Object(Ue["m"])(t,e))/30;function to(t){Gn.call(this,null,eo,t),this.modified(!0)}function eo(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:Object(Ue["b"])(n=>e(n,t),Object(Ue["c"])(e),Object(Ue["d"])(e))}function no(t){Vr.call(this,[void 0,void 0],t)}function ro(t,e){Gn.call(this,t),this.parent=e,this.count=0}function io(t){Vr.call(this,{},t),this._keys=Object(Ue["p"])();const e=this._targets=[];e.active=0,e.forEach=t=>{for(let n=0,r=e.active;n<r;++n)t(e[n],n,e)}}function ao(t){Gn.call(this,null,oo,t)}function oo(t){return this.value&&!t.modified()?this.value:Object(Ue["x"])(t.name)?Object(Ue["e"])(t.name).map(t=>Object(Ue["q"])(t)):Object(Ue["q"])(t.name,t.as)}function so(t){Vr.call(this,Object(Ue["p"])(),t)}function uo(t){Vr.call(this,[],t)}function co(t){Vr.call(this,[],t)}function lo(t){Vr.call(this,null,t)}function fo(t){Vr.call(this,[],t)}Object(Ue["v"])(Za,Vr,{transform(t,e){if(this.value&&!t.modified()&&!e.changed())return e;const n=e.materialize(e.SOURCE).source,r=Ka(e.source,t.groupby,Ue["u"]),i=t.smooth||!1,a=t.field,o=t.step||Qa(n,a),s=Rn((t,e)=>a(t)-a(e)),u=t.as||Ja,c=r.length;let l,f=1/0,d=-1/0,h=0;for(;h<c;++h){const t=r[h].sort(s);l=-1;for(const e of mi(t,o,i,a))e<f&&(f=e),e>d&&(d=e),t[++l][u]=e}return this.value={start:f,stop:d,step:o},e.reflow(!0).modifies(u)}}),Object(Ue["v"])(to,Gn),no.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(Ue["v"])(no,Vr,{transform(t,e){const n=this.value,r=t.field,i=e.changed()||e.modified(r.fields)||t.modified("field");let a=n[0],o=n[1];if((i||null==a)&&(a=1/0,o=-1/0),e.visit(i?e.SOURCE:e.ADD,t=>{const e=Object(Ue["Z"])(r(t));null!=e&&(e<a&&(a=e),e>o&&(o=e))}),!Number.isFinite(a)||!Number.isFinite(o)){let t=Object(Ue["d"])(r);t&&(t=' for field "'.concat(t,'"')),e.dataflow.warn("Infinite extent".concat(t,": [").concat(a,", ").concat(o,"]")),a=o=void 0}this.value=[a,o]}}),Object(Ue["v"])(ro,Gn,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}}),Object(Ue["v"])(io,Vr,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,r){const i=this.value;let a,o,s=Object(Ue["s"])(i,t)&&i[t];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[t])&&o.tuple,a=n.dataflow,s=new ro(n.fork(n.NO_SOURCE),this),a.add(s).connect(e(a,t,o)),i[t]=s,this.activate(s)),s},clean(){const t=this.value;for(const e in t)if(0===t[e].count){const n=t[e].detachSubflow;n&&n(),delete t[e]}},initTargets(){const t=this._targets,e=t.length;for(let n=0;n<e&&null!=t[n];++n)t[n]=null;t.active=0},transform(t,e){const n=e.dataflow,r=t.key,i=t.subflow,a=this._keys,o=t.modified("key"),s=t=>this.subflow(t,i,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,t=>{const e=Dn(t),n=a.get(e);void 0!==n&&(a.delete(e),s(n).rem(t))}),e.visit(e.ADD,t=>{const e=r(t);a.set(Dn(t),e),s(e).add(t)}),o||e.modified(r.fields)?e.visit(e.MOD,t=>{const e=Dn(t),n=a.get(e),i=r(t);n===i?s(i).mod(t):(a.set(e,i),s(n).rem(t),s(i).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,t=>{s(a.get(Dn(t))).mod(t)}),o&&e.visit(e.REFLOW,t=>{const e=Dn(t),n=a.get(e),i=r(t);n!==i&&(a.set(e,i),s(n).rem(t),s(i).add(t))}),e.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),e}}),Object(Ue["v"])(ao,Gn),so.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(Ue["v"])(so,Vr,{transform(t,e){const n=e.dataflow,r=this.value,i=e.fork(),a=i.add,o=i.rem,s=i.mod,u=t.expr;let c=!0;function l(e){const n=Dn(e),i=u(e,t),l=r.get(n);i&&l?(r.delete(n),a.push(e)):i||l?c&&i&&!l&&s.push(e):(r.set(n,1),o.push(e))}return e.visit(e.REM,t=>{const e=Dn(t);r.has(e)?r.delete(e):o.push(t)}),e.visit(e.ADD,e=>{u(e,t)?a.push(e):r.set(Dn(e),1)}),e.visit(e.MOD,l),t.modified()&&(c=!1,e.visit(e.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),uo.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Object(Ue["v"])(uo,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=Ya(r,t.as||[]),a=t.index||null,o=i.length;return n.rem=this.value,e.visit(e.SOURCE,t=>{const e=r.map(e=>e(t)),s=e.reduce((t,e)=>Math.max(t,e.length),0);let u,c,l,f=0;for(;f<s;++f){for(c=Tn(t),u=0;u<o;++u)c[i[u]]=null==(l=e[u][f])?null:l;a&&(c[a]=f),n.add.push(c)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(i)}}),co.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(Ue["v"])(co,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(Ue["d"]),a=t.as||["key","value"],o=a[0],s=a[1],u=r.length;return n.rem=this.value,e.visit(e.SOURCE,t=>{for(let e,a=0;a<u;++a)e=Tn(t),e[o]=i[a],e[s]=r[a](t),n.add.push(e)}),this.value=n.source=n.add,n.modifies(a)}}),lo.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(Ue["v"])(lo,Vr,{transform(t,e){const n=t.expr,r=t.as,i=t.modified(),a=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)||e.modified(r)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(a,e=>e[r]=n(e,t))}}),Object(Ue["v"])(fo,Vr,{transform(t,e){const n=e.fork(e.ALL),r=t.generator;let i,a,o,s=this.value,u=t.size-s.length;if(u>0){for(i=[];--u>=0;)i.push(o=Nn(r(t))),s.push(o);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else a=s.slice(0,-u),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,s=s.slice(-u);return n.source=this.value=s,n}});const ho={value:"value",median:oi,mean:sa,min:Jr,max:Kr},po=[];function mo(t){Vr.call(this,[],t)}function go(t){var e,n=t.method||ho.value;if(null!=ho[n])return n===ho.value?(e=void 0!==t.value?t.value:0,()=>e):ho[n];Object(Ue["k"])("Unrecognized imputation method: "+n)}function bo(t){const e=t.field;return t=>t?e(t):NaN}function yo(t,e,n,r){var i,a,o,s,u,c,l,f,d=t=>t(f),h=[],p=r?r.slice():[],m={},g={};for(p.forEach((t,e)=>m[t]=e+1),s=0,l=t.length;s<l;++s)f=t[s],c=n(f),u=m[c]||(m[c]=p.push(c)),a=(i=e?e.map(d):po)+"",(o=g[a])||(o=g[a]=[],h.push(o),o.values=i),o[u-1]=f;return h.domain=p,h}function vo(t){Sa.call(this,t)}function xo(t){Vr.call(this,null,t)}function wo(t){Gn.call(this,null,Oo,t)}function Oo(t){return this.value&&!t.modified()?this.value:Object(Ue["G"])(t.fields,t.flat)}function _o(t){Vr.call(this,[],t),this._pending=null}function Ao(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function jo(t,e,n){n.forEach(Nn);const r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.source=r.add=n,t._pending=null,r.rem.length&&r.clean(!0),r}function ko(t){Vr.call(this,{},t)}function Co(t){Gn.call(this,null,Eo,t)}function Eo(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let r,i,a=1/0,o=-1/0;for(r=0;r<n;++r)i=e[r],i[0]<a&&(a=i[0]),i[1]>o&&(o=i[1]);return[a,o]}function So(t){Gn.call(this,null,Do,t)}function Do(t){return this.value&&!t.modified()?this.value:t.values.reduce((t,e)=>t.concat(e),[])}function Fo(t){Vr.call(this,null,t)}function No(t){Sa.call(this,t)}function To(t,e){const n=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",a=Object(Ue["c"])(n).concat(Object(Ue["c"])(r)),o=Io(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:o.map(()=>i),fields:o.map(t=>Mo(t,n,r,a)),as:o.map(t=>t+""),modified:t.modified.bind(t)}}function Mo(t,e,n,r){return Object(Ue["b"])(r=>e(r)===t?n(r):NaN,r,t+"")}function Io(t,e,n){const r={},i=[];return n.visit(n.SOURCE,e=>{const n=t(e);r[n]||(r[n]=1,i.push(n))}),i.sort(Ue["f"]),e?i.slice(0,e):i}function Ro(t){io.call(this,t)}function $o(t){Vr.call(this,null,t)}function Bo(t,e,n,r){for(let i=0,a=n.length;i<a;++i)e[r[i]]=n[i](t);return e}function zo(t){Vr.call(this,null,t)}function Lo(t){Vr.call(this,null,t)}mo.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(Ue["v"])(mo,Vr,{transform(t,e){var n,r,i,a,o,s,u,c,l,f,d=e.fork(e.ALL),h=go(t),p=bo(t),m=Object(Ue["d"])(t.field),g=Object(Ue["d"])(t.key),b=(t.groupby||[]).map(Ue["d"]),y=yo(e.source,t.groupby,t.key,t.keyvals),v=[],x=this.value,w=y.domain.length;for(o=0,c=y.length;o<c;++o)for(n=y[o],i=n.values,r=NaN,u=0;u<w;++u)if(null==n[u]){for(a=y.domain[u],f={_impute:!0},s=0,l=i.length;s<l;++s)f[b[s]]=i[s];f[g]=a,f[m]=Number.isNaN(r)?r=h(n,p):r,v.push(Nn(f))}return v.length&&(d.add=d.materialize(d.ADD).add.concat(v)),x.length&&(d.rem=d.materialize(d.REM).rem.concat(x)),this.value=v,d}}),vo.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ba},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},Object(Ue["v"])(vo,Sa,{transform(t,e){const n=this,r=t.modified();let i;return n.value&&(r||e.modified(n._inputs,!0))?(i=n.value=r?n.init(t):{},e.visit(e.SOURCE,t=>n.add(t))):(i=n.value=n.value||this.init(t),e.visit(e.REM,t=>n.rem(t)),e.visit(e.ADD,t=>n.add(t))),n.changes(),e.visit(e.SOURCE,t=>{Object(Ue["l"])(t,i[n.cellkey(t)].tuple)}),e.reflow(r).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(t[n]),t[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}}),xo.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(Ue["v"])(xo,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=Ka(r,t.groupby,t.field),a=(t.groupby||[]).map(Ue["d"]),o=t.bandwidth,s=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],c=[];let l=t.extent,f=t.steps||t.minsteps||25,d=t.steps||t.maxsteps||200;"pdf"!==s&&"cdf"!==s&&Object(Ue["k"])("Invalid density method: "+s),"shared"===t.resolve&&(l||(l=Object(Ue["m"])(r,t.field)),f=d=t.steps||d),i.forEach(e=>{const n=Ei(e,o)[s],r=t.counts?e.length:1,i=l||Object(Ue["m"])(e);aa(n,i,f,d).forEach(t=>{const n={};for(let r=0;r<a.length;++r)n[a[r]]=e.dims[r];n[u[0]]=t[0],n[u[1]]=t[1]*r,c.push(Nn(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),Object(Ue["v"])(wo,Gn),Object(Ue["v"])(_o,Vr,{transform(t,e){const n=e.dataflow;if(this._pending)return jo(this,e,this._pending);if(Ao(t))return e.StopPropagation;if(t.values)return jo(this,e,n.parse(t.values,t.format));if(t.async){const e=n.request(t.url,t.format).then(t=>(this._pending=Object(Ue["e"])(t.data),t=>t.touch(this)));return{async:e}}return n.request(t.url,t.format).then(t=>jo(this,e,Object(Ue["e"])(t.data)))}}),ko.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(Ue["v"])(ko,Vr,{transform(t,e){const n=t.fields,r=t.index,i=t.values,a=null==t.default?null:t.default,o=t.modified(),s=n.length;let u,c,l,f=o?e.SOURCE:e.ADD,d=e,h=t.as;return i?(c=i.length,s>1&&!h&&Object(Ue["k"])('Multi-field lookup requires explicit "as" parameter.'),h&&h.length!==s*c&&Object(Ue["k"])('The "as" parameter has too few output field names.'),h=h||i.map(Ue["d"]),u=function(t){for(var e,o,u=0,l=0;u<s;++u)if(o=r.get(n[u](t)),null==o)for(e=0;e<c;++e,++l)t[h[l]]=a;else for(e=0;e<c;++e,++l)t[h[l]]=i[e](o)}):(h||Object(Ue["k"])("Missing output field names."),u=function(t){for(var e,i=0;i<s;++i)e=r.get(n[i](t)),t[h[i]]=null==e?a:e}),o?d=e.reflow(!0):(l=n.some(t=>e.modified(t.fields)),f|=l?e.MOD:0),e.visit(f,u),d.modifies(h)}}),Object(Ue["v"])(Co,Gn),Object(Ue["v"])(So,Gn),Object(Ue["v"])(Fo,Vr,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),No.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ba,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},Object(Ue["v"])(No,Sa,{_transform:Sa.prototype.transform,transform(t,e){return this._transform(To(t,e),e)}}),Object(Ue["v"])(Ro,io,{transform(t,e){const n=t.subflow,r=t.field,i=t=>this.subflow(Dn(t),n,e,t);return(t.modified("field")||r&&e.modified(Object(Ue["c"])(r)))&&Object(Ue["k"])("PreFacet does not support field modification."),this.initTargets(),r?(e.visit(e.MOD,t=>{const e=i(t);r(t).forEach(t=>e.mod(t))}),e.visit(e.ADD,t=>{const e=i(t);r(t).forEach(t=>e.add(Nn(t)))}),e.visit(e.REM,t=>{const e=i(t);r(t).forEach(t=>e.rem(t))})):(e.visit(e.MOD,t=>i(t).mod(t)),e.visit(e.ADD,t=>i(t).add(t)),e.visit(e.REM,t=>i(t).rem(t))),e.clean()&&e.runAfter(()=>this.clean()),e}}),$o.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(Ue["v"])($o,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=Ya(t.fields,t.as||[]),a=r?(t,e)=>Bo(t,e,r,i):Mn;let o;return this.value?o=this.value:(e=e.addAll(),o=this.value={}),e.visit(e.REM,t=>{const e=Dn(t);n.rem.push(o[e]),o[e]=null}),e.visit(e.ADD,t=>{const e=a(t,Nn({}));o[Dn(t)]=e,n.add.push(e)}),e.visit(e.MOD,t=>{n.mod.push(a(t,o[Dn(t)]))}),n}}),Object(Ue["v"])(zo,Vr,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}}),Lo.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Po=1e-14;function Uo(t){Vr.call(this,null,t)}function Wo(t){Vr.call(this,[],t),this.count=0}function qo(t){Vr.call(this,null,t)}function Vo(t){Vr.call(this,null,t),this.modified(!0)}function Go(t){Vr.call(this,null,t)}Object(Ue["v"])(Lo,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const i=e.materialize(e.SOURCE).source,a=Ka(i,t.groupby,t.field),o=(t.groupby||[]).map(Ue["d"]),s=[],u=t.step||.01,c=t.probs||ua(u/2,1-Po,u),l=c.length;return a.forEach(t=>{const e=ui(t,c);for(let n=0;n<l;++n){const i={};for(let e=0;e<o.length;++e)i[o[e]]=t.dims[e];i[r[0]]=c[n],i[r[1]]=e[n],s.push(Nn(i))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}}),Object(Ue["v"])(Uo,Vr,{transform(t,e){let n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,t=>{const e=Dn(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,t=>{const e=Tn(t);r[Dn(t)]=e,n.add.push(e)}),e.visit(e.MOD,t=>{const e=r[Dn(t)];for(const r in t)e[r]=t[r],n.modifies(r);n.mod.push(e)})),n}}),Wo.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(Ue["v"])(Wo,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,a=this.value.reduce((t,e)=>(t[Dn(e)]=1,t),{});let o=this.value,s=this.count,u=0;function c(t){let e,r;o.length<i?o.push(t):(r=~~((s+1)*di()),r<o.length&&r>=u&&(e=o[r],a[Dn(e)]&&n.rem.push(e),o[r]=t)),++s}if(e.rem.length&&(e.visit(e.REM,t=>{const e=Dn(t);a[e]&&(a[e]=-1,n.rem.push(t)),--s}),o=o.filter(t=>-1!==a[Dn(t)])),(e.rem.length||r)&&o.length<i&&e.source&&(u=s=o.length,e.visit(e.SOURCE,t=>{a[Dn(t)]||c(t)}),u=-1),r&&o.length>i){const t=o.length-i;for(let e=0;e<t;++e)a[Dn(o[e])]=-1,n.rem.push(o[e]);o=o.slice(t)}return e.mod.length&&e.visit(e.MOD,t=>{a[Dn(t)]&&n.mod.push(t)}),e.add.length&&e.visit(e.ADD,c),(e.add.length||u<0)&&(n.add=o.filter(t=>!a[Dn(t)])),this.count=s,this.value=n.source=o,n}}),qo.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(Ue["v"])(qo,Vr,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=ua(t.start,t.stop,t.step||1).map(t=>{const e={};return e[r]=t,Nn(e)}),n.add=e.add.concat(this.value),n}}),Object(Ue["v"])(Vo,Vr,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});const Ho=["unit0","unit1"];function Xo(t){Vr.call(this,Object(Ue["p"])(),t)}function Yo(t){Vr.call(this,null,t)}function Ko(t,e,n,r){const i=Jo[t](e,n);return{init:i.init||Ue["gb"],update:function(t,e){e[r]=i.next(t)}}}Go.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:la["j"],array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Ho}]},Object(Ue["v"])(Go,Vr,{transform(t,e){const n=t.field,r=!1!==t.interval,i="utc"===t.timezone,a=this._floor(t,e),o=(i?la["v"]:la["p"])(a.unit).offset,s=t.as||Ho,u=s[0],c=s[1],l=a.step;let f=a.start||1/0,d=a.stop||-1/0,h=e.ADD;return(t.modified()||e.modified(Object(Ue["c"])(n)))&&(e=e.reflow(!0),h=e.SOURCE,f=1/0,d=-1/0),e.visit(h,t=>{const e=n(t);let i,s;null==e?(t[u]=null,r&&(t[c]=null)):(t[u]=i=s=a(e),r&&(t[c]=s=o(i,l)),i<f&&(f=i),s>d&&(d=s))}),a.start=f,a.stop=d,e.modifies(r?s:u)},_floor(t,e){const n="utc"===t.timezone,{units:r,step:i}=t.units?{units:t.units,step:t.step||1}:Object(la["n"])({extent:t.extent||Object(Ue["m"])(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),a=Object(la["t"])(r),o=this.value||{},s=(n?la["u"]:la["o"])(a,i);return s.unit=Object(Ue["S"])(a),s.units=a,s.step=i,s.start=o.start,s.stop=o.stop,this.value=s}}),Object(Ue["v"])(Xo,Vr,{transform(t,e){const n=e.dataflow,r=t.field,i=this.value,a=t=>i.set(r(t),t);let o=!0;return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,a)):e.changed()?(e.visit(e.REM,t=>i.delete(r(t))),e.visit(e.ADD,a)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()}}),Object(Ue["v"])(Yo,Vr,{transform(t,e){const n=!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields);n&&(this.value=(t.sort?e.source.slice().sort(Rn(t.sort)):e.source).map(t.field))}});const Jo={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){const t=Jo.rank(),e=t.next;return{init:t.init,next:t=>(e(t)-1)/(t.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,r=e.compare;let i=e.index;if(t<i){while(i+1<n.length&&!r(n[i],n[i+1]))++i;t=i}return(1+t)/n.length}}},ntile:function(t,e){e=+e,e>0||Object(Ue["k"])("ntile num must be greater than zero.");const n=Jo.cume_dist(),r=n.next;return{init:n.init,next:t=>Math.ceil(e*r(t))}},lag:function(t,e){return e=+e||1,{next:n=>{const r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||Object(Ue["k"])("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const r=t(n.data[n.index]);return null!=r?e=r:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:r=>{const i=r.data;return r.index<=n?e:(n=Zo(t,i,r.index))<0?(n=i.length,e=null):e=t(i[n])}}}};function Zo(t,e,n){for(let r=e.length;n<r;++n){const r=t(e[n]);if(null!=r)return n}return-1}const Qo=Object.keys(Jo);function ts(t){const e=Object(Ue["e"])(t.ops),n=Object(Ue["e"])(t.fields),r=Object(Ue["e"])(t.params),i=Object(Ue["e"])(t.as),a=this.outputs=[],o=this.windows=[],s={},u={},c=[],l=[];let f=!0;function d(t){Object(Ue["e"])(Object(Ue["c"])(t)).forEach(t=>s[t]=1)}d(t.sort),e.forEach((t,e)=>{const s=n[e],h=Object(Ue["d"])(s),p=ha(t,h,i[e]);if(d(s),a.push(p),Object(Ue["s"])(Jo,t))o.push(Ko(t,n[e],r[e],p));else{if(null==s&&"count"!==t&&Object(Ue["k"])("Null aggregate field specified."),"count"===t)return void c.push(p);f=!1;let e=u[h];e||(e=u[h]=[],e.field=s,l.push(e)),e.push(va(t,p))}}),(c.length||l.length)&&(this.cell=ns(l,c,f)),this.inputs=Object.keys(s)}const es=ts.prototype;function ns(t,e,n){t=t.map(t=>ka(t,t.field));const r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new t[o](r);if(r.store)var s=r.data=new Ca;return r.add=function(t){if(r.num+=1,!n){s&&s.add(t);for(let e=0;e<i;++e)a[e].add(a[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){s&&s.rem(t);for(let e=0;e<i;++e)a[e].rem(a[e].get(t),t)}},r.set=function(t){let i,o;for(s&&s.values(),i=0,o=e.length;i<o;++i)t[e[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(t)},r.init=function(){r.num=0,s&&s.reset();for(let t=0;t<i;++t)a[t].init()},r}function rs(t){Vr.call(this,{},t),this._mlen=0,this._mods=[]}function is(t,e,n,r){const i=r.sort,a=i&&!r.ignorePeers,o=r.frame||[null,0],s=t.data(n),u=s.length,c=a?Object(ca["a"])(i):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||Object(Ue["i"])(-1)};e.init();for(let f=0;f<u;++f)as(l,o,f,u),a&&os(l,c),e.update(l,s[f])}function as(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function os(t,e){const n=t.i0,r=t.i1-1,i=t.compare,a=t.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(t.i0=e.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(t.i1=e.right(a,a[r]))}function ss(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function us(t){this._context=t}es.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()},es.update=function(t,e){const n=this.cell,r=this.windows,i=t.data,a=r&&r.length;let o;if(n){for(o=t.p0;o<t.i0;++o)n.rem(i[o]);for(o=t.p1;o<t.i1;++o)n.add(i[o]);n.set(e)}for(o=0;o<a;++o)r[o].update(t,e)},rs.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Qo.concat(ba)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},Object(Ue["v"])(rs,Vr,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),r=Rn(t.sort),i=da(t.groupby),a=t=>this.group(i(t));let o=this.state;o&&!n||(o=this.state=new ts(t)),n||e.modified(o.inputs)?(this.value={},e.visit(e.SOURCE,t=>a(t).add(t))):(e.visit(e.REM,t=>a(t).remove(t)),e.visit(e.ADD,t=>a(t).add(t)));for(let s=0,u=this._mlen;s<u;++s)is(this._mods[s],o,r,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(o.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=Na(Dn),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}}),us.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ss(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ss(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var cs=function(t){return new us(t)},ls=function(){};function fs(t){this._context=t}fs.prototype={areaStart:ls,areaEnd:ls,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ss(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var ds=function(t){return new fs(t)};function hs(t){this._context=t}hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ss(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var ps=function(t){return new hs(t)};function ms(t,e){this._basis=new us(t),this._beta=e}ms.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0){var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,u=-1;while(++u<=n)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*o),this._beta*e[u]+(1-this._beta)*(a+r*s))}this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var gs=function t(e){function n(t){return 1===e?new us(t):new ms(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function bs(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ys(t,e){this._context=t,this._k=(1-e)/6}ys.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:bs(this,this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:bs(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var vs=function t(e){function n(t){return new ys(t,e)}return n.tension=function(e){return t(+e)},n}(0);function xs(t,e){this._context=t,this._k=(1-e)/6}xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bs(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ws=function t(e){function n(t){return new xs(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Os(t,e){this._context=t,this._k=(1-e)/6}Os.prototype={areaStart:ls,areaEnd:ls,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:bs(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var _s=function t(e){function n(t){return new Os(t,e)}return n.tension=function(e){return t(+e)},n}(0),As=Math.abs,js=Math.atan2,ks=Math.cos,Cs=Math.max,Es=Math.min,Ss=Math.sin,Ds=Math.sqrt,Fs=1e-12,Ns=Math.PI,Ts=Ns/2,Ms=2*Ns;function Is(t){return t>1?0:t<-1?Ns:Math.acos(t)}function Rs(t){return t>=1?Ts:t<=-1?-Ts:Math.asin(t)}function $s(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Fs){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Fs){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function Bs(t,e){this._context=t,this._alpha=e}Bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:$s(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zs=function t(e){function n(t){return e?new Bs(t,e):new ys(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ls(t,e){this._context=t,this._alpha=e}Ls.prototype={areaStart:ls,areaEnd:ls,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:$s(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ps=function t(e){function n(t){return e?new Ls(t,e):new Os(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Us(t,e){this._context=t,this._alpha=e}Us.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$s(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ws=function t(e){function n(t){return e?new Us(t,e):new xs(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function qs(t){this._context=t}qs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};var Vs=function(t){return new qs(t)};function Gs(t){this._context=t}Gs.prototype={areaStart:ls,areaEnd:ls,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Hs=function(t){return new Gs(t)};function Xs(t){return t<0?-1:1}function Ys(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Xs(a)+Xs(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Ks(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Js(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Zs(t){this._context=t}function Qs(t){this._context=new tu(t)}function tu(t){this._context=t}function eu(t){return new Zs(t)}function nu(t){return new Qs(t)}function ru(t){this._context=t}function iu(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}Zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Js(this,this._t0,Ks(this,this._t0));break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Js(this,Ks(this,n=Ys(this,t,e)),n);break;default:Js(this,this._t0,n=Ys(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Qs.prototype=Object.create(Zs.prototype)).point=function(t,e){Zs.prototype.point.call(this,e,t)},tu.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=iu(t),i=iu(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var au=function(t){return new ru(t)};function ou(t,e){this._context=t,this._t=e}ou.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}this._x=t,this._y=e}};var su=function(t){return new ou(t,.5)};function uu(t){return new ou(t,0)}function cu(t){return new ou(t,1)}const lu=Math.PI,fu=2*lu,du=1e-6,hu=fu-du;function pu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function mu(){return new pu}pu.prototype=mu.prototype={constructor:pu,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,u=r-e,c=a-t,l=o-e,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>du)if(Math.abs(l*s-u*c)>du&&i){var d=n-a,h=r-o,p=s*s+u*u,m=d*d+h*h,g=Math.sqrt(p),b=Math.sqrt(f),y=i*Math.tan((lu-Math.acos((p+f-m)/(2*g*b)))/2),v=y/b,x=y/g;Math.abs(v-1)>du&&(this._+="L"+(t+v*c)+","+(e+v*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>c*h)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),u=t+o,c=e+s,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>du||Math.abs(this._y1-c)>du)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%fu+fu),f>hu?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):f>du&&(this._+="A"+n+","+n+",0,"+ +(f>=lu)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var gu=mu,bu=function(t){return function(){return t}};function yu(t){return t.innerRadius}function vu(t){return t.outerRadius}function xu(t){return t.startAngle}function wu(t){return t.endAngle}function Ou(t){return t&&t.padAngle}function _u(t,e,n,r,i,a,o,s){var u=n-t,c=r-e,l=o-i,f=s-a,d=f*u-l*c;if(!(d*d<Fs))return d=(l*(e-a)-f*(t-i))/d,[t+d*u,e+d*c]}function Au(t,e,n,r,i,a,o){var s=t-n,u=e-r,c=(o?a:-a)/Ds(s*s+u*u),l=c*u,f=-c*s,d=t+l,h=e+f,p=n+l,m=r+f,g=(d+p)/2,b=(h+m)/2,y=p-d,v=m-h,x=y*y+v*v,w=i-a,O=d*m-p*h,_=(v<0?-1:1)*Ds(Cs(0,w*w*x-O*O)),A=(O*v-y*_)/x,j=(-O*y-v*_)/x,k=(O*v+y*_)/x,C=(-O*y+v*_)/x,E=A-g,S=j-b,D=k-g,F=C-b;return E*E+S*S>D*D+F*F&&(A=k,j=C),{cx:A,cy:j,x01:-l,y01:-f,x11:A*(i/w-1),y11:j*(i/w-1)}}var ju=function(){var t=yu,e=vu,n=bu(0),r=null,i=xu,a=wu,o=Ou,s=null;function u(){var u,c,l=+t.apply(this,arguments),f=+e.apply(this,arguments),d=i.apply(this,arguments)-Ts,h=a.apply(this,arguments)-Ts,p=As(h-d),m=h>d;if(s||(s=u=gu()),f<l&&(c=f,f=l,l=c),f>Fs)if(p>Ms-Fs)s.moveTo(f*ks(d),f*Ss(d)),s.arc(0,0,f,d,h,!m),l>Fs&&(s.moveTo(l*ks(h),l*Ss(h)),s.arc(0,0,l,h,d,m));else{var g,b,y=d,v=h,x=d,w=h,O=p,_=p,A=o.apply(this,arguments)/2,j=A>Fs&&(r?+r.apply(this,arguments):Ds(l*l+f*f)),k=Es(As(f-l)/2,+n.apply(this,arguments)),C=k,E=k;if(j>Fs){var S=Rs(j/l*Ss(A)),D=Rs(j/f*Ss(A));(O-=2*S)>Fs?(S*=m?1:-1,x+=S,w-=S):(O=0,x=w=(d+h)/2),(_-=2*D)>Fs?(D*=m?1:-1,y+=D,v-=D):(_=0,y=v=(d+h)/2)}var F=f*ks(y),N=f*Ss(y),T=l*ks(w),M=l*Ss(w);if(k>Fs){var I,R=f*ks(v),$=f*Ss(v),B=l*ks(x),z=l*Ss(x);if(p<Ns&&(I=_u(F,N,B,z,R,$,T,M))){var L=F-I[0],P=N-I[1],U=R-I[0],W=$-I[1],q=1/Ss(Is((L*U+P*W)/(Ds(L*L+P*P)*Ds(U*U+W*W)))/2),V=Ds(I[0]*I[0]+I[1]*I[1]);C=Es(k,(l-V)/(q-1)),E=Es(k,(f-V)/(q+1))}}_>Fs?E>Fs?(g=Au(B,z,F,N,f,E,m),b=Au(R,$,T,M,f,E,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),E<k?s.arc(g.cx,g.cy,E,js(g.y01,g.x01),js(b.y01,b.x01),!m):(s.arc(g.cx,g.cy,E,js(g.y01,g.x01),js(g.y11,g.x11),!m),s.arc(0,0,f,js(g.cy+g.y11,g.cx+g.x11),js(b.cy+b.y11,b.cx+b.x11),!m),s.arc(b.cx,b.cy,E,js(b.y11,b.x11),js(b.y01,b.x01),!m))):(s.moveTo(F,N),s.arc(0,0,f,y,v,!m)):s.moveTo(F,N),l>Fs&&O>Fs?C>Fs?(g=Au(T,M,R,$,l,-C,m),b=Au(F,N,B,z,l,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<k?s.arc(g.cx,g.cy,C,js(g.y01,g.x01),js(b.y01,b.x01),!m):(s.arc(g.cx,g.cy,C,js(g.y01,g.x01),js(g.y11,g.x11),!m),s.arc(0,0,l,js(g.cy+g.y11,g.cx+g.x11),js(b.cy+b.y11,b.cx+b.x11),m),s.arc(b.cx,b.cy,C,js(b.y11,b.x11),js(b.y01,b.x01),!m))):s.arc(0,0,l,w,x,m):s.lineTo(T,M)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ns/2;return[ks(r)*n,Ss(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:bu(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:bu(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:bu(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:bu(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:bu(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"===typeof t?t:bu(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:bu(+t),u):o},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u},ku=(Array.prototype.slice,function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)});function Cu(t){return t[0]}function Eu(t){return t[1]}var Su=function(t,e){var n=bu(!0),r=null,i=Vs,a=null;function o(o){var s,u,c,l=(o=ku(o)).length,f=!1;for(null==r&&(a=i(c=gu())),s=0;s<=l;++s)!(s<l&&n(u=o[s],s,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(u,s,o),+e(u,s,o));if(c)return a=null,c+""||null}return t="function"===typeof t?t:void 0===t?Cu:bu(t),e="function"===typeof e?e:void 0===e?Eu:bu(e),o.x=function(e){return arguments.length?(t="function"===typeof e?e:bu(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:bu(+t),o):e},o.defined=function(t){return arguments.length?(n="function"===typeof t?t:bu(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o},Du=function(t,e,n){var r=null,i=bu(!0),a=null,o=Vs,s=null;function u(u){var c,l,f,d,h,p=(u=ku(u)).length,m=!1,g=new Array(p),b=new Array(p);for(null==a&&(s=o(h=gu())),c=0;c<=p;++c){if(!(c<p&&i(d=u[c],c,u))===m)if(m=!m)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=l;--f)s.point(g[f],b[f]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+t(d,c,u),b[c]=+e(d,c,u),s.point(r?+r(d,c,u):g[c],n?+n(d,c,u):b[c]))}if(h)return s=null,h+""||null}function c(){return Su().defined(i).curve(o).context(a)}return t="function"===typeof t?t:void 0===t?Cu:bu(+t),e="function"===typeof e?e:bu(void 0===e?0:+e),n="function"===typeof n?n:void 0===n?Eu:bu(+n),u.x=function(e){return arguments.length?(t="function"===typeof e?e:bu(+e),r=null,u):t},u.x0=function(e){return arguments.length?(t="function"===typeof e?e:bu(+e),u):t},u.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:bu(+t),u):r},u.y=function(t){return arguments.length?(e="function"===typeof t?t:bu(+t),n=null,u):e},u.y0=function(t){return arguments.length?(e="function"===typeof t?t:bu(+t),u):e},u.y1=function(t){return arguments.length?(n=null==t?null:"function"===typeof t?t:bu(+t),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(t){return arguments.length?(i="function"===typeof t?t:bu(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),u):a},u},Fu={draw:function(t,e){var n=Math.sqrt(e/Ns);t.moveTo(n,0),t.arc(0,0,n,0,Ms)}},Nu=(Math.sqrt(1/3),Math.sin(Ns/10)/Math.sin(7*Ns/10)),Tu=(Math.sin(Ms/10),Math.cos(Ms/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(t,e){var n=null;function r(){var r;if(n||(n=r=gu()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"===typeof t?t:bu(t||Fu),e="function"===typeof e?e:bu(void 0===e?64:+e),r.type=function(e){return arguments.length?(t="function"===typeof e?e:bu(e),r):t},r.size=function(t){return arguments.length?(e="function"===typeof t?t:bu(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r});const Mu=Math.PI,Iu=2*Mu,Ru=1e-6,$u=Iu-Ru;function Bu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function zu(){return new Bu}Bu.prototype=zu.prototype={constructor:Bu,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,u=r-e,c=a-t,l=o-e,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>Ru)if(Math.abs(l*s-u*c)>Ru&&i){var d=n-a,h=r-o,p=s*s+u*u,m=d*d+h*h,g=Math.sqrt(p),b=Math.sqrt(f),y=i*Math.tan((Mu-Math.acos((p+f-m)/(2*g*b)))/2),v=y/b,x=y/g;Math.abs(v-1)>Ru&&(this._+="L"+(t+v*c)+","+(e+v*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>c*h)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),u=t+o,c=e+s,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>Ru||Math.abs(this._y1-c)>Ru)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%Iu+Iu),f>$u?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):f>Ru&&(this._+="A"+n+","+n+",0,"+ +(f>=Mu)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Lu=zu;function Pu(t,e){if("undefined"!==typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}const Uu=()=>"undefined"!==typeof Image?Image:null,Wu=Object(ca["a"])(Yr["a"]),qu=Wu.right,Vu=Wu.left;Object(ca["a"])(ti).center;var Gu=qu;function Hu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Xu(t,e){switch(arguments.length){case 0:break;case 1:"function"===typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"===typeof e?this.interpolator(e):this.range(e);break}return this}const Yu=Symbol("implicit");function Ku(){var t=new Map,e=[],n=[],r=Yu;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==Yu)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Ku(e,n).unknown(r)},Hu.apply(i,arguments),i}var Ju=n("eecb"),Zu=n("09b8"),Qu=n("d933"),tc=n("1231"),ec=n("d989"),nc=n("dad1");function rc(t,e,n,r){var i,a=Object(Ju["c"])(t,e,n);switch(r=Object(Zu["a"])(null==r?",f":r),r.type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Object(Qu["a"])(a,o))||(r.precision=i),Object(tc["b"])(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Object(ec["a"])(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Object(nc["a"])(a))||(r.precision=i-2*("%"===r.type));break}return Object(tc["a"])(r)}var ic=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function ac(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function oc(){}var sc=.7,uc=1/sc,cc="\\s*([+-]?\\d+)\\s*",lc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dc=/^#([0-9a-f]{3,8})$/,hc=new RegExp("^rgb\\("+[cc,cc,cc]+"\\)$"),pc=new RegExp("^rgb\\("+[fc,fc,fc]+"\\)$"),mc=new RegExp("^rgba\\("+[cc,cc,cc,lc]+"\\)$"),gc=new RegExp("^rgba\\("+[fc,fc,fc,lc]+"\\)$"),bc=new RegExp("^hsl\\("+[lc,fc,fc]+"\\)$"),yc=new RegExp("^hsla\\("+[lc,fc,fc,lc]+"\\)$"),vc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function xc(){return this.rgb().formatHex()}function wc(){return Tc(this).formatHsl()}function Oc(){return this.rgb().formatRgb()}function _c(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=dc.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ac(e):3===n?new Ec(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?jc(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?jc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=hc.exec(t))?new Ec(e[1],e[2],e[3],1):(e=pc.exec(t))?new Ec(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=mc.exec(t))?jc(e[1],e[2],e[3],e[4]):(e=gc.exec(t))?jc(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=bc.exec(t))?Nc(e[1],e[2]/100,e[3]/100,1):(e=yc.exec(t))?Nc(e[1],e[2]/100,e[3]/100,e[4]):vc.hasOwnProperty(t)?Ac(vc[t]):"transparent"===t?new Ec(NaN,NaN,NaN,0):null}function Ac(t){return new Ec(t>>16&255,t>>8&255,255&t,1)}function jc(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ec(t,e,n,r)}function kc(t){return t instanceof oc||(t=_c(t)),t?(t=t.rgb(),new Ec(t.r,t.g,t.b,t.opacity)):new Ec}function Cc(t,e,n,r){return 1===arguments.length?kc(t):new Ec(t,e,n,null==r?1:r)}function Ec(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Sc(){return"#"+Fc(this.r)+Fc(this.g)+Fc(this.b)}function Dc(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Fc(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Nc(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ic(t,e,n,r)}function Tc(t){if(t instanceof Ic)return new Ic(t.h,t.s,t.l,t.opacity);if(t instanceof oc||(t=_c(t)),!t)return new Ic;if(t instanceof Ic)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Ic(o,s,u,t.opacity)}function Mc(t,e,n,r){return 1===arguments.length?Tc(t):new Ic(t,e,n,null==r?1:r)}function Ic(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Rc(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function $c(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}ic(oc,_c,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:xc,formatHex:xc,formatHsl:wc,formatRgb:Oc,toString:Oc}),ic(Ec,Cc,ac(oc,{brighter:function(t){return t=null==t?uc:Math.pow(uc,t),new Ec(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?sc:Math.pow(sc,t),new Ec(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sc,formatHex:Sc,formatRgb:Dc,toString:Dc})),ic(Ic,Mc,ac(oc,{brighter:function(t){return t=null==t?uc:Math.pow(uc,t),new Ic(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?sc:Math.pow(sc,t),new Ic(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ec(Rc(t>=240?t-240:t+120,i,r),Rc(t,i,r),Rc(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Bc=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return $c((n-r/e)*e,o,i,a,s)}},zc=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return $c((n-r/e)*e,i,a,o,s)}},Lc=t=>()=>t;function Pc(t,e){return function(n){return t+n*e}}function Uc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Wc(t,e){var n=e-t;return n?Pc(t,n>180||n<-180?n-360*Math.round(n/360):n):Lc(isNaN(t)?e:t)}function qc(t){return 1===(t=+t)?Vc:function(e,n){return n-e?Uc(e,n,t):Lc(isNaN(e)?n:e)}}function Vc(t,e){var n=e-t;return n?Pc(t,n):Lc(isNaN(t)?e:t)}var Gc=function t(e){var n=qc(e);function r(t,e){var r=n((t=Cc(t)).r,(e=Cc(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Vc(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Hc(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Cc(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var Xc=Hc(Bc),Yc=Hc(zc),Kc=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}};function Jc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var Zc=function(t,e){return(Jc(e)?Kc:Qc)(t,e)};function Qc(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=ul(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}var tl=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},el=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},nl=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=ul(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},rl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,il=new RegExp(rl.source,"g");function al(t){return function(){return t}}function ol(t){return function(e){return t(e)+""}}var sl=function(t,e){var n,r,i,a=rl.lastIndex=il.lastIndex=0,o=-1,s=[],u=[];t+="",e+="";while((n=rl.exec(t))&&(r=il.exec(e)))(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:el(n,r)})),a=il.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?ol(u[0].x):al(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},ul=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Lc(e):("number"===r?el:"string"===r?(n=_c(e))?(e=n,Gc):sl:e instanceof _c?Gc:e instanceof Date?tl:Jc(e)?Kc:Array.isArray(e)?Qc:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?nl:el)(t,e)},cl=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}};function ll(t){return function(){return t}}function fl(t){return+t}var dl=[0,1];function hl(t){return t}function pl(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ll(isNaN(e)?NaN:.5)}function ml(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}function gl(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=pl(i,r),a=n(o,a)):(r=pl(r,i),a=n(a,o)),function(t){return a(r(t))}}function bl(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());while(++o<r)i[o]=pl(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=Gu(t,e,1,r)-1;return a[n](i[n](e))}}function yl(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vl(){var t,e,n,r,i,a,o=dl,s=dl,u=ul,c=hl;function l(){var t=Math.min(o.length,s.length);return c!==hl&&(c=ml(o[0],o[t-1])),r=t>2?bl:gl,i=a=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),s,u)))(t(c(e)))}return f.invert=function(n){return c(e((a||(a=r(s,o.map(t),el)))(n)))},f.domain=function(t){return arguments.length?(o=Array.from(t,fl),l()):o.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=cl,l()},f.clamp=function(t){return arguments.length?(c=!!t||hl,l()):c!==hl},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function xl(){return vl()(hl,hl)}function wl(t){var e=t.domain;return t.ticks=function(t){var n=e();return Object(Ju["a"])(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return rc(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,s=a.length-1,u=a[o],c=a[s],l=10;c<u&&(i=u,u=c,c=i,i=o,o=s,s=i);while(l-- >0){if(i=Object(Ju["b"])(u,c,n),i===r)return a[o]=u,a[s]=c,e(a);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Ol(){var t=xl();return t.copy=function(){return yl(t,Ol())},Hu.apply(t,arguments),wl(t)}function _l(t){var e;function n(t){return isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,fl),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return _l(t).unknown(e)},t=arguments.length?Array.from(t,fl):[0,1],wl(n)}function Al(t,e){t=t.slice();var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function jl(t){return Math.log(t)}function kl(t){return Math.exp(t)}function Cl(t){return-Math.log(-t)}function El(t){return-Math.exp(-t)}function Sl(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Dl(t){return 10===t?Sl:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Fl(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Nl(t){return function(e){return-t(-e)}}function Tl(t){var e,n,r=t(jl,kl),i=r.domain,a=10;function o(){return e=Fl(a),n=Dl(a),i()[0]<0?(e=Nl(e),n=Nl(n),t(Cl,El)):t(jl,kl),r}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(i(t),o()):i()},r.ticks=function(t){var r,o=i(),s=o[0],u=o[o.length-1];(r=u<s)&&(d=s,s=u,u=d);var c,l,f,d=e(s),h=e(u),p=null==t?10:+t,m=[];if(!(a%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(l=1,c=n(d);l<a;++l)if(f=c*l,!(f<s)){if(f>u)break;m.push(f)}}else for(;d<=h;++d)for(l=a-1,c=n(d);l>=1;--l)if(f=c*l,!(f<s)){if(f>u)break;m.push(f)}2*m.length<p&&(m=Object(Ju["a"])(s,u,p))}else m=Object(Ju["a"])(d,h,Math.min(h-d,p)).map(n);return r?m.reverse():m},r.tickFormat=function(t,i){if(null==i&&(i=10===a?".0e":","),"function"!==typeof i&&(i=Object(tc["a"])(i)),t===1/0)return i;null==t&&(t=10);var o=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*a<a-.5&&(r*=a),r<=o?i(t):""}},r.nice=function(){return i(Al(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function Ml(){var t=Tl(vl()).domain([1,10]);return t.copy=function(){return yl(t,Ml()).base(t.base())},Hu.apply(t,arguments),t}function Il(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Rl(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function $l(t){return t<0?-t*t:t*t}function Bl(t){var e=t(hl,hl),n=1;function r(){return 1===n?t(hl,hl):.5===n?t(Rl,$l):t(Il(n),Il(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},wl(e)}function zl(){var t=Bl(vl());return t.copy=function(){return yl(t,zl()).exponent(t.exponent())},Hu.apply(t,arguments),t}function Ll(){return zl.apply(null,arguments).exponent(.5)}function Pl(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Ul(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Wl(t){var e=1,n=t(Pl(e),Ul(e));return n.constant=function(n){return arguments.length?t(Pl(e=+n),Ul(e)):e},wl(n)}function ql(){var t=Wl(vl());return t.copy=function(){return yl(t,ql()).constant(t.constant())},Hu.apply(t,arguments)}var Vl=n("a15a"),Gl=n("9603"),Hl=n("b14c"),Xl=n("742c"),Yl=n("b3c3"),Kl=n("2c38"),Jl=n("5edf"),Zl=n("1809"),Ql=n("4c23"),tf=1e3,ef=60*tf,nf=60*ef,rf=24*nf,af=7*rf,of=30*rf,sf=365*rf;function uf(t){return new Date(t)}function cf(t){return t instanceof Date?+t:+new Date(+t)}function lf(t,e,n,r,i,a,o,s,u){var c=xl(),l=c.invert,f=c.domain,d=u(".%L"),h=u(":%S"),p=u("%I:%M"),m=u("%I %p"),g=u("%a %d"),b=u("%b %d"),y=u("%B"),v=u("%Y"),x=[[o,1,tf],[o,5,5*tf],[o,15,15*tf],[o,30,30*tf],[a,1,ef],[a,5,5*ef],[a,15,15*ef],[a,30,30*ef],[i,1,nf],[i,3,3*nf],[i,6,6*nf],[i,12,12*nf],[r,1,rf],[r,2,2*rf],[n,1,af],[e,1,of],[e,3,3*of],[t,1,sf]];function w(s){return(o(s)<s?d:a(s)<s?h:i(s)<s?p:r(s)<s?m:e(s)<s?n(s)<s?g:b:t(s)<s?y:v)(s)}function O(e,n,r){if(null==e&&(e=10),"number"===typeof e){var i,a=Math.abs(r-n)/e,o=Object(ca["a"])((function(t){return t[2]})).right(x,a);return o===x.length?(i=Object(Ju["c"])(n/sf,r/sf,e),e=t):o?(o=x[a/x[o-1][2]<x[o][2]/a?o-1:o],i=o[1],e=o[0]):(i=Math.max(Object(Ju["c"])(n,r,e),1),e=s),e.every(i)}return e}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?f(Array.from(t,cf)):f().map(uf)},c.ticks=function(t){var e,n=f(),r=n[0],i=n[n.length-1],a=i<r;return a&&(e=r,r=i,i=e),e=O(t,r,i),e=e?e.range(r,i+1):[],a?e.reverse():e},c.tickFormat=function(t,e){return null==e?w:u(e)},c.nice=function(t){var e=f();return(t=O(t,e[0],e[e.length-1]))?f(Al(e,t)):c},c.copy=function(){return yl(c,lf(t,e,n,r,i,a,o,s,u))},c}function ff(){return Hu.apply(lf(Vl["a"],Gl["a"],Hl["b"],Xl["a"],Yl["a"],Kl["a"],Jl["a"],Zl["a"],Ql["a"]).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var df=n("77ae"),hf=n("55f8"),pf=n("2739"),mf=n("6eb2"),gf=n("f623"),bf=n("f8ee");function yf(){return Hu.apply(lf(df["a"],hf["a"],pf["b"],mf["a"],gf["a"],bf["a"],Jl["a"],Zl["a"],Ql["c"]).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function vf(){var t,e,n,r,i,a=0,o=1,s=hl,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function l(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([a,o]=i,t=r(a=+a),e=r(o=+o),n=t===e?0:1/(e-t),c):[a,o]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=l(ul),c.rangeRound=l(cl),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),c}}function xf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function wf(){var t=wl(vf()(hl));return t.copy=function(){return xf(t,wf())},Xu.apply(t,arguments)}function Of(){var t=Tl(vf()).domain([1,10]);return t.copy=function(){return xf(t,Of()).base(t.base())},Xu.apply(t,arguments)}function _f(){var t=Wl(vf());return t.copy=function(){return xf(t,_f()).constant(t.constant())},Xu.apply(t,arguments)}function Af(){var t=Bl(vf());return t.copy=function(){return xf(t,Af()).exponent(t.exponent())},Xu.apply(t,arguments)}function jf(){return Af.apply(null,arguments).exponent(.5)}function kf(t,e){void 0===e&&(e=t,t=ul);var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);while(n<r)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}function Cf(){var t,e,n,r,i,a,o,s=0,u=.5,c=1,l=1,f=hl,d=!1;function h(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(l*t<l*e?r:i),f(d?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=kf(t,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(o){return arguments.length?([s,u,c]=o,t=a(s=+s),e=a(u=+u),n=a(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,h):[s,u,c]},h.clamp=function(t){return arguments.length?(d=!!t,h):d},h.interpolator=function(t){return arguments.length?(f=t,h):f},h.range=p(ul),h.rangeRound=p(cl),h.unknown=function(t){return arguments.length?(o=t,h):o},function(o){return a=o,t=o(s),e=o(u),n=o(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,h}}function Ef(){var t=wl(Cf()(hl));return t.copy=function(){return xf(t,Ef())},Xu.apply(t,arguments)}function Sf(){var t=Tl(Cf()).domain([.1,1,10]);return t.copy=function(){return xf(t,Sf()).base(t.base())},Xu.apply(t,arguments)}function Df(){var t=Wl(Cf());return t.copy=function(){return xf(t,Df()).constant(t.constant())},Xu.apply(t,arguments)}function Ff(){var t=Bl(Cf());return t.copy=function(){return xf(t,Ff()).exponent(t.exponent())},Xu.apply(t,arguments)}function Nf(){return Ff.apply(null,arguments).exponent(.5)}function Tf(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);r=new Array(i-1);while(++t<i)r[t-1]=ri(e,t/i);return a}function a(e){return isNaN(e=+e)?t:n[Gu(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Yr["a"]),i()},a.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return Tf().domain(e).range(n).unknown(t)},Hu.apply(a,arguments)}function Mf(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function o(e){return e<=e?a[Gu(i,e,0,r)]:t}function s(){var t=-1;i=new Array(r);while(++t<r)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},o.range=function(t){return arguments.length?(r=(a=Array.from(t)).length-1,s()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return Mf().domain([e,n]).range(a).unknown(t)},Hu.apply(wl(o),arguments)}function If(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[Gu(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return If().domain(e).range(n).unknown(t)},Hu.apply(i,arguments)}var Rf,$f=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},Bf=function(t,e){var n=Wc(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},zf=180/Math.PI,Lf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Pf=function(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*zf,skewX:Math.atan(u)*zf,scaleX:o,scaleY:s}};function Uf(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Lf:Pf(e.a,e.b,e.c,e.d,e.e,e.f)}function Wf(t){return null==t?Lf:(Rf||(Rf=document.createElementNS("http://www.w3.org/2000/svg","g")),Rf.setAttribute("transform",t),(t=Rf.transform.baseVal.consolidate())?(t=t.matrix,Pf(t.a,t.b,t.c,t.d,t.e,t.f)):Lf)}function qf(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:el(t,i)},{i:u-2,x:el(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}function o(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:el(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:el(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:el(t,n)},{i:s-2,x:el(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),o(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){var e,n=-1,a=i.length;while(++n<a)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var Vf=qf(Uf,"px, ","px)","deg)"),Gf=qf(Wf,", ",")",")"),Hf=1e-12;function Xf(t){return((t=Math.exp(t))+1/t)/2}function Yf(t){return((t=Math.exp(t))-1/t)/2}function Kf(t){return((t=Math.exp(2*t))-1)/(t+1)}var Jf=function t(e,n,r){function i(t,i){var a,o,s=t[0],u=t[1],c=t[2],l=i[0],f=i[1],d=i[2],h=l-s,p=f-u,m=h*h+p*p;if(m<Hf)o=Math.log(d/c)/e,a=function(t){return[s+t*h,u+t*p,c*Math.exp(e*t*o)]};else{var g=Math.sqrt(m),b=(d*d-c*c+r*m)/(2*c*n*g),y=(d*d-c*c-r*m)/(2*d*n*g),v=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-v)/e,a=function(t){var r=t*o,i=Xf(v),a=c/(n*g)*(i*Kf(e*r+v)-Yf(v));return[s+a*h,u+a*p,c*i/Xf(e*r+v)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n,i=r*r;return t(n,r,i)},i}(Math.SQRT2,2,4);function Zf(t){return function(e,n){var r=t((e=Mc(e)).h,(n=Mc(n)).h),i=Vc(e.s,n.s),a=Vc(e.l,n.l),o=Vc(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var Qf=Zf(Wc),td=Zf(Vc);const ed=Math.PI/180,nd=180/Math.PI,rd=18,id=.96422,ad=1,od=.82521,sd=4/29,ud=6/29,cd=3*ud*ud,ld=ud*ud*ud;function fd(t){if(t instanceof hd)return new hd(t.l,t.a,t.b,t.opacity);if(t instanceof xd)return wd(t);t instanceof Ec||(t=kc(t));var e,n,r=bd(t.r),i=bd(t.g),a=bd(t.b),o=pd((.2225045*r+.7168786*i+.0606169*a)/ad);return r===i&&i===a?e=n=o:(e=pd((.4360747*r+.3850649*i+.1430804*a)/id),n=pd((.0139322*r+.0971045*i+.7141733*a)/od)),new hd(116*o-16,500*(e-o),200*(o-n),t.opacity)}function dd(t,e,n,r){return 1===arguments.length?fd(t):new hd(t,e,n,null==r?1:r)}function hd(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function pd(t){return t>ld?Math.pow(t,1/3):t/cd+sd}function md(t){return t>ud?t*t*t:cd*(t-sd)}function gd(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function bd(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function yd(t){if(t instanceof xd)return new xd(t.h,t.c,t.l,t.opacity);if(t instanceof hd||(t=fd(t)),0===t.a&&0===t.b)return new xd(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*nd;return new xd(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function vd(t,e,n,r){return 1===arguments.length?yd(t):new xd(t,e,n,null==r?1:r)}function xd(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function wd(t){if(isNaN(t.h))return new hd(t.l,0,0,t.opacity);var e=t.h*ed;return new hd(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Od(t,e){var n=Vc((t=dd(t)).l,(e=dd(e)).l),r=Vc(t.a,e.a),i=Vc(t.b,e.b),a=Vc(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function _d(t){return function(e,n){var r=t((e=vd(e)).h,(n=vd(n)).h),i=Vc(e.c,n.c),a=Vc(e.l,n.l),o=Vc(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}ic(hd,dd,ac(oc,{brighter:function(t){return new hd(this.l+rd*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new hd(this.l-rd*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=id*md(e),t=ad*md(t),n=od*md(n),new Ec(gd(3.1338561*e-1.6168667*t-.4906146*n),gd(-.9787684*e+1.9161415*t+.033454*n),gd(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ic(xd,vd,ac(oc,{brighter:function(t){return new xd(this.h,this.c,this.l+rd*(null==t?1:t),this.opacity)},darker:function(t){return new xd(this.h,this.c,this.l-rd*(null==t?1:t),this.opacity)},rgb:function(){return wd(this).rgb()}}));var Ad=_d(Wc),jd=_d(Vc),kd=-.14861,Cd=1.78277,Ed=-.29227,Sd=-.90649,Dd=1.97294,Fd=Dd*Sd,Nd=Dd*Cd,Td=Cd*Ed-Sd*kd;function Md(t){if(t instanceof Rd)return new Rd(t.h,t.s,t.l,t.opacity);t instanceof Ec||(t=kc(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Td*r+Fd*e-Nd*n)/(Td+Fd-Nd),a=r-i,o=(Dd*(n-i)-Ed*a)/Sd,s=Math.sqrt(o*o+a*a)/(Dd*i*(1-i)),u=s?Math.atan2(o,a)*nd-120:NaN;return new Rd(u<0?u+360:u,s,i,t.opacity)}function Id(t,e,n,r){return 1===arguments.length?Md(t):new Rd(t,e,n,null==r?1:r)}function Rd(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function $d(t){return function e(n){function r(e,r){var i=t((e=Id(e)).h,(r=Id(r)).h),a=Vc(e.s,r.s),o=Vc(e.l,r.l),s=Vc(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}ic(Rd,Id,ac(oc,{brighter:function(t){return t=null==t?uc:Math.pow(uc,t),new Rd(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?sc:Math.pow(sc,t),new Rd(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ed,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ec(255*(e+n*(kd*r+Cd*i)),255*(e+n*(Ed*r+Sd*i)),255*(e+n*(Dd*r)),this.opacity)}}));var Bd=$d(Wc),zd=$d(Vc),Ld=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};function Pd(t,e,n){const r=t-e+2*n;return t?r>0?r:1:0}const Ud="identity",Wd="linear",qd="log",Vd="pow",Gd="sqrt",Hd="symlog",Xd="time",Yd="utc",Kd="sequential",Jd="diverging",Zd="quantile",Qd="quantize",th="threshold",eh="ordinal",nh="point",rh="band",ih="bin-ordinal",ah="continuous",oh="discrete",sh="discretizing",uh="interpolating",ch="temporal";function lh(t){return function(e){let n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}}function fh(t){return function(e){const n=t.range();let r,i,a,o,s=e[0],u=e[1],c=-1;for(u<s&&(i=s,s=u,u=i),a=0,o=n.length;a<o;++a)n[a]>=s&&n[a]<=u&&(c<0&&(c=a),r=a);if(!(c<0))return s=t.invertExtent(n[c]),u=t.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}function dh(){const t=Ku().unknown(void 0),e=t.domain,n=t.range;let r,i,a=[0,1],o=!1,s=0,u=0,c=.5;function l(){const t=e().length,l=a[1]<a[0],f=a[1-l],d=Pd(t,s,u);let h=a[l-0];r=(f-h)/(d||1),o&&(r=Math.floor(r)),h+=(f-h-r*(t-s))*c,i=r*(1-s),o&&(h=Math.round(h),i=Math.round(i));const p=ua(t).map(t=>h+r*t);return n(l?p.reverse():p)}return delete t.unknown,t.domain=function(t){return arguments.length?(e(t),l()):e()},t.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},t.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},t.bandwidth=function(){return i},t.step=function(){return r},t.round=function(t){return arguments.length?(o=!!t,l()):o},t.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,l()):s},t.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},t.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},t.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},t.invertRange=function(t){if(null==t[0]||null==t[1])return;const r=a[1]<a[0],o=r?n().reverse():n(),s=o.length-1;let u,c,l,f=+t[0],d=+t[1];return f!==f||d!==d||(d<f&&(l=f,f=d,d=l),d<o[0]||f>a[1-r])?void 0:(u=Math.max(0,qu(o,f)-1),c=f===d?u:qu(o,d)-1,f-o[u]>i+1e-10&&++u,r&&(l=u,u=s-c,c=s-l),u>c?void 0:e().slice(u,c+1))},t.invert=function(e){const n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return dh().domain(e()).range(a).round(o).paddingInner(s).paddingOuter(u).align(c)},l()}function hh(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return hh(e())},t}function ph(){return hh(dh().paddingInner(1))}var mh=Array.prototype.map;function gh(t){return mh.call(t,Ue["Z"])}const bh=Array.prototype.slice;function yh(){let t=[],e=[];function n(n){return null==n||n!==n?void 0:e[(Gu(t,n)-1)%e.length]}return n.domain=function(e){return arguments.length?(t=gh(e),n):t.slice()},n.range=function(t){return arguments.length?(e=bh.call(t),n):e.slice()},n.tickFormat=function(e,n){return rc(t[0],Object(Ue["S"])(t),null==e?10:e,n)},n.copy=function(){return yh().domain(n.domain()).range(n.range())},n}const vh={};function xh(t,e,n){const r=function(){const n=e();return n.invertRange||(n.invertRange=n.invert?lh(n):n.invertExtent?fh(n):void 0),n.type=t,n};return r.metadata=Object(Ue["ab"])(Object(Ue["e"])(n)),r}function wh(t,e,n){return arguments.length>1?(vh[t]=xh(t,e,n),this):Oh(t)?vh[t]:void 0}function Oh(t){return Object(Ue["s"])(vh,t)}function _h(t,e){const n=vh[t];return n&&n.metadata[e]}function Ah(t){return _h(t,ah)}function jh(t){return _h(t,oh)}function kh(t){return _h(t,sh)}function Ch(t){return _h(t,qd)}function Eh(t){return _h(t,ch)}function Sh(t){return _h(t,uh)}function Dh(t){return _h(t,Zd)}wh(Ud,_l),wh(Wd,Ol,ah),wh(qd,Ml,[ah,qd]),wh(Vd,zl,ah),wh(Gd,Ll,ah),wh(Hd,ql,ah),wh(Xd,ff,[ah,ch]),wh(Yd,yf,[ah,ch]),wh(Kd,wf,[ah,uh]),wh("".concat(Kd,"-").concat(Wd),wf,[ah,uh]),wh("".concat(Kd,"-").concat(qd),Of,[ah,uh,qd]),wh("".concat(Kd,"-").concat(Vd),Af,[ah,uh]),wh("".concat(Kd,"-").concat(Gd),jf,[ah,uh]),wh("".concat(Kd,"-").concat(Hd),_f,[ah,uh]),wh("".concat(Jd,"-").concat(Wd),Ef,[ah,uh]),wh("".concat(Jd,"-").concat(qd),Sf,[ah,uh,qd]),wh("".concat(Jd,"-").concat(Vd),Ff,[ah,uh]),wh("".concat(Jd,"-").concat(Gd),Nf,[ah,uh]),wh("".concat(Jd,"-").concat(Hd),Df,[ah,uh]),wh(Zd,Tf,[sh,Zd]),wh(Qd,Mf,sh),wh(th,If,sh),wh(ih,yh,[oh,sh]),wh(eh,Ku,oh),wh(rh,dh,oh),wh(nh,ph,oh);const Fh=["clamp","base","constant","exponent"];function Nh(t,e){const n=e[0],r=Object(Ue["S"])(e)-n;return function(e){return t(n+e*r)}}function Th(t,e,n){return kf(Rh(e||"rgb",n),t)}function Mh(t,e){const n=new Array(e),r=e+1;for(let i=0;i<e;)n[i]=t(++i/r);return n}function Ih(t,e,n){const r=n-e;let i,a,o;return r&&Number.isFinite(r)?(i=(a=t.type).indexOf("-"),a=i<0?a:a.slice(i+1),o=wh(a)().domain([e,n]).range([0,1]),Fh.forEach(e=>t[e]?o[e](t[e]()):0),o):Object(Ue["i"])(.5)}function Rh(t,e){const n=o[$h(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function $h(t){return"interpolate"+t.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Bh={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},zh={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function Lh(t){const e=t.length/6|0,n=new Array(e);for(let r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function Ph(t,e){for(const n in t)Wh(n,e(t[n]))}const Uh={};function Wh(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(Uh[t]=e,this):Uh[t]}Ph(zh,Lh),Ph(Bh,t=>Th(Lh(t)));const qh="symbol",Vh="discrete",Gh="gradient",Hh=t=>Object(Ue["x"])(t)?t.map(t=>String(t)):String(t),Xh=(t,e)=>t[1]-e[1],Yh=(t,e)=>e[1]-t[1];function Kh(t,e,n){let r;return Object(Ue["C"])(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),null!=n&&(e=Math.min(e,Math.floor(Object(Ue["U"])(t.domain())/n||1)))),Object(Ue["D"])(e)&&(r=e.step,e=e.interval),Object(Ue["F"])(e)&&(e=t.type===Xd?Object(la["p"])(e):t.type==Yd?Object(la["v"])(e):Object(Ue["k"])("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function Jh(t,e,n){let r=t.range(),i=r[0],a=Object(Ue["S"])(r),o=Xh;if(i>a&&(r=a,a=i,i=r,o=Yh),i=Math.floor(i),a=Math.ceil(a),e=e.map(e=>[e,t(e)]).filter(t=>i<=t[1]&&t[1]<=a).sort(o).map(t=>t[0]),n>0&&e.length>1){const t=[e[0],Object(Ue["S"])(e)];while(e.length>n&&e.length>=3)e=e.filter((t,e)=>!(e%2));e.length<3&&(e=t)}return e}function Zh(t,e){return t.bins?Jh(t,t.bins):t.ticks?t.ticks(e):t.domain()}function Qh(t,e,n,r,i,a){const o=e.type;let s=Hh;if(o===Xd||i===Xd)s=t.timeFormat(r);else if(o===Yd||i===Yd)s=t.utcFormat(r);else if(Ch(o)){const i=t.formatFloat(r);if(a||e.bins)s=i;else{const t=tp(e,n,!1);s=e=>t(e)?i(e):""}}else if(e.tickFormat){const i=e.domain();s=t.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=t.format(r));return s}function tp(t,e,n){const r=Zh(t,e),i=t.base(),a=Math.log(i),o=Math.max(1,i*e/r.length),s=t=>{let e=t/Math.pow(i,Math.round(Math.log(t)/a));return e*i<i-.5&&(e*=i),e<=o};return n?r.filter(s):s}const ep={[Zd]:"quantiles",[Qd]:"thresholds",[th]:"domain"},np={[Zd]:"quantiles",[Qd]:"domain"};function rp(t,e){return t.bins?op(t.bins):t.type===qd?tp(t,e,!0):ep[t.type]?ap(t[ep[t.type]]()):Zh(t,e)}function ip(t,e,n){const r=e[np[e.type]](),i=r.length;let a,o=i>1?r[1]-r[0]:r[0];for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return t.formatSpan(0,o,30,n)}function ap(t){const e=[-1/0].concat(t);return e.max=1/0,e}function op(t){const e=t.slice(0,-1);return e.max=Object(Ue["S"])(t),e}const sp=t=>ep[t.type]||t.bins;function up(t,e,n,r,i,a,o){const s=np[e.type]&&a!==Xd&&a!==Yd?ip(t,e,i):Qh(t,e,n,i,a,o);return r===qh&&sp(e)?cp(s):r===Vh?fp(s):dp(s)}const cp=t=>(e,n,r)=>{const i=lp(r[n+1],lp(r.max,1/0)),a=hp(e,t),o=hp(i,t);return a&&o?a+"  "+o:o?"< "+o:" "+a},lp=(t,e)=>null!=t?t:e,fp=t=>(e,n)=>n?t(e):null,dp=t=>e=>t(e),hp=(t,e)=>Number.isFinite(t)?e(t):null;function pp(t){const e=t.domain(),n=e.length-1;let r=+e[0],i=+Object(Ue["S"])(e),a=i-r;if(t.type===th){const t=n?a/n:.1;r-=t,i+=t,a=i-r}return t=>(t-r)/a}function mp(t,e,n,r){const i=r||e.type;return Object(Ue["F"])(n)&&Eh(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==Xd?n||i!==Yd?up(t,e,5,null,n,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function gp(t,e,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=mp(t,e,n.format,n.formatType);if(kh(e.type)){const t=rp(e).slice(1).map(i),n=t.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(t.join(", "))}if(jh(e.type)){const t=e.domain(),n=t.length,a=n>r?t.slice(0,r-2).map(i).join(", ")+", ending with "+t.slice(-1).map(i):t.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(a)}{const t=e.domain();return"values from ".concat(i(t[0])," to ").concat(i(Object(Ue["S"])(t)))}}let bp=0;const yp="p_";function vp(t){return t&&t.gradient}function xp(t,e,n){const r=t.gradient;let i=t.id,a="radial"===r?yp:"";return i||(i=t.id="gradient_"+bp++,"radial"===r?(t.x1=wp(t.x1,.5),t.y1=wp(t.y1,.5),t.r1=wp(t.r1,0),t.x2=wp(t.x2,.5),t.y2=wp(t.y2,.5),t.r2=wp(t.r2,.5),a=yp):(t.x1=wp(t.x1,0),t.y1=wp(t.y1,0),t.x2=wp(t.x2,1),t.y2=wp(t.y2,0))),e[i]=t,"url("+(n||"")+"#"+a+i+")"}function wp(t,e){return null!=t?t:e}function Op(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}}const _p={basis:{curve:cs},"basis-closed":{curve:ds},"basis-open":{curve:ps},bundle:{curve:gs,tension:"beta",value:.85},cardinal:{curve:vs,tension:"tension",value:0},"cardinal-open":{curve:ws,tension:"tension",value:0},"cardinal-closed":{curve:_s,tension:"tension",value:0},"catmull-rom":{curve:zs,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Ps,tension:"alpha",value:.5},"catmull-rom-open":{curve:Ws,tension:"alpha",value:.5},linear:{curve:Vs},"linear-closed":{curve:Hs},monotone:{horizontal:nu,vertical:eu},natural:{curve:au},step:{curve:su},"step-after":{curve:cu},"step-before":{curve:uu}};function Ap(t,e,n){var r=Object(Ue["s"])(_p,t)&&_p[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const jp={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},kp=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function Cp(t){const e=[];let n,r,i,a,o,s,u,c,l,f;const d=t.slice().replace(kp[0],"###$1").split(kp[1]).slice(1);for(u=0,l=d.length;u<l;++u){for(n=d[u],r=n.slice(1).trim().replace(kp[2],"$1###$2").replace(kp[3],"$1###$2").split(kp[4]),o=n.charAt(0),i=[o],c=0,f=r.length;c<f;++c)(a=+r[c])===a&&i.push(a);if(s=jp[o.toLowerCase()],i.length-1>s){const t=i.length;for(c=1,e.push([o].concat(i.slice(c,c+=s))),o="M"===o?"L":"m"===o?"l":o;c<t;c+=s)e.push([o].concat(i.slice(c,c+s)))}else e.push(i)}return e}const Ep=Math.PI/180,Sp=1e-14,Dp=Math.PI/2,Fp=2*Math.PI,Np=Math.sqrt(3)/2;var Tp={},Mp={},Ip=[].join;function Rp(t,e,n,r,i,a,o,s,u){const c=Ip.call(arguments);if(Tp[c])return Tp[c];const l=o*Ep,f=Math.sin(l),d=Math.cos(l);n=Math.abs(n),r=Math.abs(r);const h=d*(s-t)*.5+f*(u-e)*.5,p=d*(u-e)*.5-f*(s-t)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,b=f/n,y=-f/r,v=d/r,x=g*s+b*u,w=y*s+v*u,O=g*t+b*e,_=y*t+v*e,A=(O-x)*(O-x)+(_-w)*(_-w);let j=1/A-.25;j<0&&(j=0);let k=Math.sqrt(j);a==i&&(k=-k);const C=.5*(x+O)-k*(_-w),E=.5*(w+_)+k*(O-x),S=Math.atan2(w-E,x-C),D=Math.atan2(_-E,O-C);let F=D-S;F<0&&1===a?F+=Fp:F>0&&0===a&&(F-=Fp);const N=Math.ceil(Math.abs(F/(Dp+.001))),T=[];for(let M=0;M<N;++M){const t=S+M*F/N,e=S+(M+1)*F/N;T[M]=[C,E,t,e,n,r,f,d]}return Tp[c]=T}function $p(t){const e=Ip.call(t);if(Mp[e])return Mp[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7];const l=c*o,f=-u*s,d=u*o,h=c*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(a),b=Math.sin(a),y=.5*(a-i),v=Math.sin(.5*y),x=8/3*v*v/Math.sin(y),w=n+p-x*m,O=r+m+x*p,_=n+g,A=r+b,j=_+x*b,k=A-x*g;return Mp[e]=[l*w+f*O,d*w+h*O,l*j+f*k,d*j+h*k,l*_+f*A,d*_+h*A]}const Bp=["l",0,0,0,0,0,0,0];function zp(t,e,n){const r=Bp[0]=t[0];if("a"===r||"A"===r)Bp[1]=e*t[1],Bp[2]=n*t[2],Bp[3]=t[3],Bp[4]=t[4],Bp[5]=t[5],Bp[6]=e*t[6],Bp[7]=n*t[7];else if("h"===r||"H"===r)Bp[1]=e*t[1];else if("v"===r||"V"===r)Bp[1]=n*t[1];else for(var i=1,a=t.length;i<a;++i)Bp[i]=(i%2==1?e:n)*t[i];return Bp}function Lp(t,e,n,r,i,a){var o,s,u,c,l,f=null,d=0,h=0,p=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),t.beginPath&&t.beginPath();for(var g=0,b=e.length;g<b;++g){switch(o=e[g],1===i&&1===a||(o=zp(o,i,a)),o[0]){case"l":d+=o[1],h+=o[2],t.lineTo(d+n,h+r);break;case"L":d=o[1],h=o[2],t.lineTo(d+n,h+r);break;case"h":d+=o[1],t.lineTo(d+n,h+r);break;case"H":d=o[1],t.lineTo(d+n,h+r);break;case"v":h+=o[1],t.lineTo(d+n,h+r);break;case"V":h=o[1],t.lineTo(d+n,h+r);break;case"m":d+=o[1],h+=o[2],t.moveTo(d+n,h+r);break;case"M":d=o[1],h=o[2],t.moveTo(d+n,h+r);break;case"c":s=d+o[5],u=h+o[6],p=d+o[3],m=h+o[4],t.bezierCurveTo(d+o[1]+n,h+o[2]+r,p+n,m+r,s+n,u+r),d=s,h=u;break;case"C":d=o[5],h=o[6],p=o[3],m=o[4],t.bezierCurveTo(o[1]+n,o[2]+r,p+n,m+r,d+n,h+r);break;case"s":s=d+o[3],u=h+o[4],p=2*d-p,m=2*h-m,t.bezierCurveTo(p+n,m+r,d+o[1]+n,h+o[2]+r,s+n,u+r),p=d+o[1],m=h+o[2],d=s,h=u;break;case"S":s=o[3],u=o[4],p=2*d-p,m=2*h-m,t.bezierCurveTo(p+n,m+r,o[1]+n,o[2]+r,s+n,u+r),d=s,h=u,p=o[1],m=o[2];break;case"q":s=d+o[3],u=h+o[4],p=d+o[1],m=h+o[2],t.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"Q":s=o[3],u=o[4],t.quadraticCurveTo(o[1]+n,o[2]+r,s+n,u+r),d=s,h=u,p=o[1],m=o[2];break;case"t":s=d+o[1],u=h+o[2],null===f[0].match(/[QqTt]/)?(p=d,m=h):"t"===f[0]?(p=2*d-c,m=2*h-l):"q"===f[0]&&(p=2*d-p,m=2*h-m),c=p,l=m,t.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u,p=d+o[1],m=h+o[2];break;case"T":s=o[1],u=o[2],p=2*d-p,m=2*h-m,t.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"a":Pp(t,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+h+r]),d+=o[6],h+=o[7];break;case"A":Pp(t,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],h=o[7];break;case"z":case"Z":t.closePath();break}f=o}}function Pp(t,e,n,r){const i=Rp(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n);for(let a=0;a<i.length;++a){const e=$p(i[a]);t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])}}const Up=.5773502691896257,Wp={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,Fp)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,a=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-n),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=Np*n,i=r-n*Up,a=n/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=Np*n,i=r-n*Up;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Np*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Np*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Np*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Np*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function qp(t){return Object(Ue["s"])(Wp,t)?Wp[t]:Gp(t)}var Vp={};function Gp(t){if(!Object(Ue["s"])(Vp,t)){const e=Cp(t);Vp[t]={draw:function(t,n){Lp(t,e,0,0,Math.sqrt(n)/2)}}}return Vp[t]}const Hp=.448084975506;function Xp(t){return t.x}function Yp(t){return t.y}function Kp(t){return t.width}function Jp(t){return t.height}function Zp(t){return"function"===typeof t?t:()=>+t}function Qp(t,e,n){return Math.max(e,Math.min(t,n))}function tm(){var t=Xp,e=Yp,n=Kp,r=Jp,i=Zp(0),a=i,o=i,s=i,u=null;function c(c,l,f){var d,h=null!=l?l:+t.call(this,c),p=null!=f?f:+e.call(this,c),m=+n.call(this,c),g=+r.call(this,c),b=Math.min(m,g)/2,y=Qp(+i.call(this,c),0,b),v=Qp(+a.call(this,c),0,b),x=Qp(+o.call(this,c),0,b),w=Qp(+s.call(this,c),0,b);if(u||(u=d=Lu()),y<=0&&v<=0&&x<=0&&w<=0)u.rect(h,p,m,g);else{var O=h+m,_=p+g;u.moveTo(h+y,p),u.lineTo(O-v,p),u.bezierCurveTo(O-Hp*v,p,O,p+Hp*v,O,p+v),u.lineTo(O,_-w),u.bezierCurveTo(O,_-Hp*w,O-Hp*w,_,O-w,_),u.lineTo(h+x,_),u.bezierCurveTo(h+Hp*x,_,h,_-Hp*x,h,_-x),u.lineTo(h,p+y),u.bezierCurveTo(h,p+Hp*y,h+Hp*y,p,h+y,p),u.closePath()}if(d)return u=null,d+""||null}return c.x=function(e){return arguments.length?(t=Zp(e),c):t},c.y=function(t){return arguments.length?(e=Zp(t),c):e},c.width=function(t){return arguments.length?(n=Zp(t),c):n},c.height=function(t){return arguments.length?(r=Zp(t),c):r},c.cornerRadius=function(t,e,n,r){return arguments.length?(i=Zp(t),a=null!=e?Zp(e):i,s=null!=n?Zp(n):i,o=null!=r?Zp(r):a,c):i},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c}function em(){var t,e,n,r,i,a,o,s,u=null;function c(t,e,n){const r=n/2;if(i){var c=o-e,l=t-a;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*s,h=(l/=f)*s,p=Math.atan2(l,c);u.moveTo(a-d,o-h),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(a+d,o+h),u.arc(a,o,s,p,p+Math.PI)}else u.arc(t,e,r,0,Fp);u.closePath()}else i=1;a=t,o=e,s=r}function l(a){var o,s,l,f=a.length,d=!1;for(null==u&&(u=l=Lu()),o=0;o<=f;++o)!(o<f&&r(s=a[o],o,a))===d&&(d=!d)&&(i=0),d&&c(+t(s,o,a),+e(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}function nm(t,e){return null!=t?t:e}const rm=t=>t.x||0,im=t=>t.y||0,am=t=>t.width||0,om=t=>t.height||0,sm=t=>(t.x||0)+(t.width||0),um=t=>(t.y||0)+(t.height||0),cm=t=>t.startAngle||0,lm=t=>t.endAngle||0,fm=t=>t.padAngle||0,dm=t=>t.innerRadius||0,hm=t=>t.outerRadius||0,pm=t=>t.cornerRadius||0,mm=t=>nm(t.cornerRadiusTopLeft,t.cornerRadius)||0,gm=t=>nm(t.cornerRadiusTopRight,t.cornerRadius)||0,bm=t=>nm(t.cornerRadiusBottomRight,t.cornerRadius)||0,ym=t=>nm(t.cornerRadiusBottomLeft,t.cornerRadius)||0,vm=t=>nm(t.size,64),xm=t=>t.size||1,wm=t=>!(!1===t.defined),Om=t=>qp(t.shape||"circle"),_m=ju().startAngle(cm).endAngle(lm).padAngle(fm).innerRadius(dm).outerRadius(hm).cornerRadius(pm),Am=Du().x(rm).y1(im).y0(um).defined(wm),jm=Du().y(im).x1(rm).x0(sm).defined(wm),km=Su().x(rm).y(im).defined(wm),Cm=tm().x(rm).y(im).width(am).height(om).cornerRadius(mm,gm,bm,ym),Em=Tu().type(Om).size(vm),Sm=em().x(rm).y(im).defined(wm).size(xm);function Dm(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function Fm(t,e){return _m.context(t)(e)}function Nm(t,e){const n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?jm:Am).curve(Ap(r,n.orient,n.tension)).context(t)(e)}function Tm(t,e){const n=e[0],r=n.interpolate||"linear";return km.curve(Ap(r,n.orient,n.tension)).context(t)(e)}function Mm(t,e,n,r){return Cm.context(t)(e,n,r)}function Im(t,e){return(e.mark.shape||e.shape).context(t)(e)}function Rm(t,e){return Em.context(t)(e)}function $m(t,e){return Sm.context(t)(e)}var Bm=1;function zm(t,e,n){var r=e.clip,i=t._defs,a=e.clip_id||(e.clip_id="clip"+Bm++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(Ue["A"])(r)?o.path=r(null):Dm(n)?o.path=Mm(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function Lm(t){this.clear(),t&&this.union(t)}function Pm(t){this.mark=t,this.bounds=this.bounds||new Lm}function Um(t){Pm.call(this,t),this.items=this.items||[]}function Wm(t){this._pending=0,this._loader=t||An()}function qm(t){t._pending+=1}function Vm(t){t._pending-=1}function Gm(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){const r=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(r+(n?Hm(e,r):0))}return t}function Hm(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}Lm.prototype={clone(){return new Lm(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(t,e,n){var{x1:r,y1:i,x2:a,y2:o}=this,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*o+c,u*r+s*o+l,s*a-u*i+c,u*a+s*i+l,s*a-u*o+c,u*a+s*o+l]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},Object(Ue["v"])(Um,Pm),Wm.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return qm(e),e._loader.sanitize(t,{context:"href"}).then(t=>(Vm(e),t)).catch(()=>(Vm(e),null))},loadImage(t){const e=this,n=Uu();return qm(e),e._loader.sanitize(t,{context:"image"}).then(t=>{const r=t.href;if(!r||!n)throw{url:r};const i=new n,a=Object(Ue["s"])(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=a&&(i.crossOrigin=a),i.onload=()=>Vm(e),i.onerror=()=>Vm(e),i.src=r,i}).catch(t=>(Vm(e),{complete:!1,width:0,height:0,src:t&&t.url||""}))},ready(){const t=this;return new Promise(e=>{function n(r){t.pending()?setTimeout(()=>{n(!0)},10):e(r)}n(!1)})}};const Xm=Fp-1e-8;let Ym,Km,Jm,Zm,Qm,tg,eg,ng;const rg=(t,e)=>Ym.add(t,e),ig=(t,e)=>rg(Km=t,Jm=e),ag=t=>rg(t,Ym.y1),og=t=>rg(Ym.x1,t),sg=(t,e)=>Qm*t+eg*e,ug=(t,e)=>tg*t+ng*e,cg=(t,e)=>rg(sg(t,e),ug(t,e)),lg=(t,e)=>ig(sg(t,e),ug(t,e));function fg(t,e){return Ym=t,e?(Zm=e*Ep,Qm=ng=Math.cos(Zm),tg=Math.sin(Zm),eg=-tg):(Qm=ng=1,Zm=tg=eg=0),dg}const dg={beginPath(){},closePath(){},moveTo:lg,lineTo:lg,rect(t,e,n,r){Zm?(cg(t+n,e),cg(t+n,e+r),cg(t,e+r),lg(t,e)):(rg(t+n,e+r),ig(t,e))},quadraticCurveTo(t,e,n,r){const i=sg(t,e),a=ug(t,e),o=sg(n,r),s=ug(n,r);hg(Km,i,o,ag),hg(Jm,a,s,og),ig(o,s)},bezierCurveTo(t,e,n,r,i,a){const o=sg(t,e),s=ug(t,e),u=sg(n,r),c=ug(n,r),l=sg(i,a),f=ug(i,a);pg(Km,o,u,l,ag),pg(Jm,s,c,f,og),ig(l,f)},arc(t,e,n,r,i,a){if(r+=Zm,i+=Zm,Km=n*Math.cos(i)+t,Jm=n*Math.sin(i)+e,Math.abs(i-r)>Xm)rg(t-n,e-n),rg(t+n,e+n);else{const o=r=>rg(n*Math.cos(r)+t,n*Math.sin(r)+e);let s,u;if(o(r),o(i),i!==r)if(r%=Fp,r<0&&(r+=Fp),i%=Fp,i<0&&(i+=Fp),i<r&&(a=!a,s=r,r=i,i=s),a)for(i-=Fp,s=r-r%Dp,u=0;u<4&&s>i;++u,s-=Dp)o(s);else for(s=r-r%Dp+Dp,u=0;u<4&&s<i;++u,s+=Dp)o(s)}}};function hg(t,e,n,r){const i=(t-e)/(t+n-2*e);0<i&&i<1&&r(t+(e-t)*i)}function pg(t,e,n,r,i){const a=r-t+3*e-3*n,o=t+n-2*e,s=t-e;let u,c=0,l=0;Math.abs(a)>Sp?(u=o*o+s*a,u>=0&&(u=Math.sqrt(u),c=(-o+u)/a,l=(-o-u)/a)):c=.5*s/o,0<c&&c<1&&i(mg(c,t,e,n,r)),0<l&&l<1&&i(mg(l,t,e,n,r))}function mg(t,e,n,r,i){const a=1-t,o=a*a,s=t*t;return o*a*e+3*o*t*n+3*a*s*r+s*t*i}var gg=(gg=Pu(1,1))?gg.getContext("2d"):null;const bg=new Lm;function yg(t){return function(e,n){if(!gg)return!0;t(gg,e),bg.clear().union(e.bounds).intersect(n).round();const{x1:r,y1:i,x2:a,y2:o}=bg;for(let t=i;t<=o;++t)for(let e=r;e<=a;++e)if(gg.isPointInPath(e,t))return!0;return!1}}function vg(t,e){return e.contains(t.x||0,t.y||0)}function xg(t,e){const n=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return e.intersects(bg.set(n,r,n+i,r+a))}function wg(t,e){const n=t.x||0,r=t.y||0,i=null!=t.x2?t.x2:n,a=null!=t.y2?t.y2:r;return Og(e,n,r,i,a)}function Og(t,e,n,r,i){const{x1:a,y1:o,x2:s,y2:u}=t,c=r-e,l=i-n;let f,d,h,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(f=-c,d=-(a-e)),1===p&&(f=c,d=s-e),2===p&&(f=-l,d=-(o-n)),3===p&&(f=l,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>g)return!1;h>m&&(m=h)}else if(f>0){if(h<m)return!1;h<g&&(g=h)}}return!0}function _g(t,e){t.globalCompositeOperation=e.blend||"source-over"}function Ag(t,e){return null==t?e:t}function jg(t,e){const n=e.length;for(let r=0;r<n;++r)t.addColorStop(e[r].offset,e[r].color);return t}function kg(t,e,n){const r=n.width(),i=n.height();let a;if("radial"===e.gradient)a=t.createRadialGradient(n.x1+Ag(e.x1,.5)*r,n.y1+Ag(e.y1,.5)*i,Math.max(r,i)*Ag(e.r1,0),n.x1+Ag(e.x2,.5)*r,n.y1+Ag(e.y2,.5)*i,Math.max(r,i)*Ag(e.r2,.5));else{const o=Ag(e.x1,0),s=Ag(e.y1,0),u=Ag(e.x2,1),c=Ag(e.y2,0);if(o!==u&&s!==c&&r!==i){const n=Pu(Math.ceil(r),Math.ceil(i)),a=n.getContext("2d");return a.scale(r,i),a.fillStyle=jg(a.createLinearGradient(o,s,u,c),e.stops),a.fillRect(0,0,r,i),t.createPattern(n,"no-repeat")}a=t.createLinearGradient(n.x1+o*r,n.y1+s*i,n.x1+u*r,n.y1+c*i)}return jg(a,e.stops)}function Cg(t,e,n){return vp(n)?kg(t,n,e.bounds):n}function Eg(t,e,n){return n*=null==e.fillOpacity?1:e.fillOpacity,n>0&&(t.globalAlpha=n,t.fillStyle=Cg(t,e,e.fill),!0)}var Sg=[];function Dg(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity,n>0&&(t.globalAlpha=n,t.strokeStyle=Cg(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Sg),t.lineDashOffset=e.strokeDashOffset||0),!0))}function Fg(t,e){return t.zindex-e.zindex||t.index-e.index}function Ng(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)e=i[n],e.index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(Fg)}function Tg(t,e){var n,r,i=t.items;if(!i||!i.length)return;const a=Ng(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}function Mg(t,e){var n,r,i=t.items;if(!i||!i.length)return null;const a=Ng(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(i=t.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function Ig(t){return function(e,n,r){Tg(n,n=>{r&&!r.intersects(n.bounds)||$g(t,e,n,n)})}}function Rg(t){return function(e,n,r){!n.items.length||r&&!r.intersects(n.bounds)||$g(t,e,n.items[0],n.items)}}function $g(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(_g(e,n),n.fill&&Eg(e,n,i)&&e.fill(),n.stroke&&Dg(e,n,i)&&e.stroke()))}function Bg(t){return t=t||Ue["db"],function(e,n,r,i,a,o){return r*=e.pixelRatio,i*=e.pixelRatio,Mg(n,n=>{const s=n.bounds;if((!s||s.contains(a,o))&&s)return t(e,n,r,i,a,o)?n:void 0})}}function zg(t,e){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function Lg(t){return Bg(zg(t))}function Pg(t,e){return"translate("+t+","+e+")"}function Ug(t){return"rotate("+t+")"}function Wg(t,e){return"scale("+t+","+e+")"}function qg(t){return Pg(t.x||0,t.y||0)}function Vg(t){return Pg(t.x||0,t.y||0)+(t.angle?" "+Ug(t.angle):"")}function Gg(t){return Pg(t.x||0,t.y||0)+(t.angle?" "+Ug(t.angle):"")+(t.scaleX||t.scaleY?" "+Wg(t.scaleX||1,t.scaleY||1):"")}function Hg(t,e,n){function r(t,n){t("transform",Vg(n)),t("d",e(null,n))}function i(t,n){return e(fg(t,n.angle),n),Gm(t,n).translate(n.x||0,n.y||0)}function a(t,n){var r=n.x||0,i=n.y||0,a=n.angle||0;t.translate(r,i),a&&t.rotate(a*=Ep),t.beginPath(),e(t,n),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:r,bound:i,draw:Ig(a),pick:Lg(a),isect:n||yg(a)}}var Xg=Hg("arc",Fm);function Yg(t,e){var n,r,i="horizontal"===t[0].orient?e[1]:e[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,s=1/0;while(--o>=0)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i),r<s&&(s=r,n=t[o]));return n}function Kg(t,e){var n,r,i,a=Math.pow(t[0].strokeWidth||1,2),o=t.length;while(--o>=0)if(!1!==t[o].defined&&(n=t[o].x-e[0],r=t[o].y-e[1],i=n*n+r*r,i<a))return t[o];return null}function Jg(t,e){var n,r,i,a=t.length;while(--a>=0)if(!1!==t[a].defined&&(n=t[a].x-e[0],r=t[a].y-e[1],i=n*n+r*r,n=t[a].size||1,i<n*n))return t[a];return null}function Zg(t,e,n){function r(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))}function i(t,n){var r=n.items;return 0===r.length?t:(e(fg(t),r),Gm(t,r[0]))}function a(t,n){t.beginPath(),e(t,n)}const o=zg(a);function s(t,e,n,r,i,a){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,a)?null:(n*=t.pixelRatio,r*=t.pixelRatio,o(t,s,n,r)?s[0]:null)}return{type:t,tag:"path",nested:!0,attr:r,bound:i,draw:Rg(a),pick:s,isect:vg,tip:n}}var Qg=Zg("area",Nm,Yg);function tb(t,e){var n=e.clip;t.save(),Object(Ue["A"])(n)?(t.beginPath(),n(t),t.clip()):eb(t,e.group)}function eb(t,e){t.beginPath(),Dm(e)?Mm(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function nb(t){const e=Ag(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function rb(t,e){t("transform",qg(e))}function ib(t,e){const n=nb(e);t("d",Mm(null,e,n,n))}function ab(t,e){t("class","background"),t("aria-hidden",!0),ib(t,e)}function ob(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?ib(t,e):t("d","")}function sb(t,e,n){const r=e.clip?zm(n,e,e):null;t("clip-path",r)}function ub(t,e){if(!e.clip&&e.items){const n=e.items,r=n.length;for(let e=0;e<r;++e)t.union(n[e].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),Gm(t,e),t.translate(e.x||0,e.y||0)}function cb(t,e,n,r){const i=nb(e);t.beginPath(),Mm(t,e,(n||0)+i,(r||0)+i)}const lb=zg(cb),fb=zg(cb,!1),db=zg(cb,!0);function hb(t,e,n){Tg(e,e=>{const r=e.x||0,i=e.y||0,a=e.strokeForeground,o=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&o&&(cb(t,e,r,i),_g(t,e),e.fill&&Eg(t,e,o)&&t.fill(),e.stroke&&!a&&Dg(t,e,o)&&t.stroke()),t.save(),t.translate(r,i),e.clip&&eb(t,e),n&&n.translate(-r,-i),Tg(e,e=>{this.draw(t,e,n)}),n&&n.translate(r,i),t.restore(),a&&e.stroke&&o&&(cb(t,e,r,i),_g(t,e),Dg(t,e,o)&&t.stroke())})}function pb(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;const o=n*t.pixelRatio,s=r*t.pixelRatio;return Mg(e,u=>{let c,l,f;const d=u.bounds;if(d&&!d.contains(i,a))return;l=u.x||0,f=u.y||0;const h=l+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<l||i>h||a<f||a>p))return;if(t.save(),t.translate(l,f),l=i-l,f=a-f,m&&Dm(u)&&!db(t,u,o,s))return t.restore(),null;const g=u.strokeForeground,b=!1!==e.interactive;return b&&g&&u.stroke&&fb(t,u,o,s)?(t.restore(),u):(c=Mg(u,t=>mb(t,l,f)?this.pick(t,n,r,l,f):null),!c&&b&&(u.fill||!g&&u.stroke)&&lb(t,u,o,s)&&(c=u),t.restore(),c||null)})}function mb(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}var gb={type:"group",tag:"g",nested:!1,attr:rb,bound:ub,draw:hb,pick:pb,isect:xg,content:sb,background:ab,foreground:ob},bb={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function yb(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(e=>{t.image=e,t.image.url=t.url})),n}function vb(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function xb(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function wb(t,e){return"center"===t?e/2:"right"===t?e:0}function Ob(t,e){return"middle"===t?e/2:"bottom"===t?e:0}function _b(t,e,n){const r=yb(e,n),i=vb(e,r),a=xb(e,r),o=(e.x||0)-wb(e.align,i),s=(e.y||0)-Ob(e.baseline,a),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";t("href",u,bb["xmlns:xlink"],"xlink:href"),t("transform",Pg(o,s)),t("width",i),t("height",a),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")}function Ab(t,e){const n=e.image,r=vb(e,n),i=xb(e,n),a=(e.x||0)-wb(e.align,r),o=(e.y||0)-Ob(e.baseline,i);return t.set(a,o,a+r,o+i)}function jb(t,e,n){Tg(e,e=>{if(n&&!n.intersects(e.bounds))return;const r=yb(e,this);let i,a,o,s,u=vb(e,r),c=xb(e,r),l=(e.x||0)-wb(e.align,u),f=(e.y||0)-Ob(e.baseline,c);!1!==e.aspect&&(a=r.width/r.height,o=e.width/e.height,a===a&&o===o&&a!==o&&(o<a?(s=u/a,f+=(c-s)/2,c=s):(s=c*a,l+=(u-s)/2,u=s))),(r.complete||r.toDataURL)&&(_g(t,e),t.globalAlpha=null!=(i=e.opacity)?i:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(r,l,f,u,c))})}var kb={type:"image",tag:"image",nested:!1,attr:_b,bound:Ab,draw:jb,pick:Bg(),isect:Ue["db"],get:yb,xOffset:wb,yOffset:Ob},Cb=Zg("line",Tm,Kg);function Eb(t,e){var n=e.scaleX||1,r=e.scaleY||1;1===n&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",Gg(e)),t("d",e.path)}function Sb(t,e){var n=e.path;if(null==n)return!0;var r=e.x||0,i=e.y||0,a=e.scaleX||1,o=e.scaleY||1,s=(e.angle||0)*Ep,u=e.pathCache;u&&u.path===n||((e.pathCache=u=Cp(n)).path=n),s&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(s),Lp(t,u,0,0,a,o),t.rotate(-s),t.translate(-r,-i)):Lp(t,u,r,i,a,o)}function Db(t,e){return Sb(fg(t,e.angle),e)?t.set(0,0,0,0):Gm(t,e,!0)}var Fb={type:"path",tag:"path",nested:!1,attr:Eb,bound:Db,draw:Ig(Sb),pick:Lg(Sb),isect:yg(Sb)};function Nb(t,e){t("d",Mm(null,e))}function Tb(t,e){var n,r;return Gm(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)}function Mb(t,e){t.beginPath(),Mm(t,e)}var Ib={type:"rect",tag:"path",nested:!1,attr:Nb,bound:Tb,draw:Ig(Mb),pick:Lg(Mb),isect:xg};function Rb(t,e){t("transform",qg(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)}function $b(t,e){var n,r;return Gm(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)}function Bb(t,e,n){var r,i,a,o;return!(!e.stroke||!Dg(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}function zb(t,e,n){Tg(e,e=>{if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&Bb(t,e,r)&&(_g(t,e),t.stroke())}})}function Lb(t,e,n,r){return!!t.isPointInStroke&&(Bb(t,e,1)&&t.isPointInStroke(n,r))}var Pb={type:"rule",tag:"line",nested:!1,attr:Rb,bound:$b,draw:zb,pick:Bg(Lb),isect:wg},Ub=Hg("shape",Im),Wb=Hg("symbol",Rm,vg);const qb=Object(Ue["J"])();var Vb={height:Jb,measureWidth:Yb,estimateWidth:Hb,width:Hb,canvas:Gb};function Gb(t){Vb.width=t&&gg?Yb:Hb}function Hb(t,e){return Xb(ny(t,e),Jb(t))}function Xb(t,e){return~~(.8*t.length*e)}function Yb(t,e){return Jb(t)<=0||!(e=ny(t,e))?0:Kb(e,oy(t))}function Kb(t,e){const n="(".concat(e,") ").concat(t);let r=qb.get(n);return void 0===r&&(gg.font=e,r=gg.measureText(t).width,qb.set(n,r)),r}function Jb(t){return null!=t.fontSize?+t.fontSize||0:11}function Zb(t){return null!=t.lineHeight?t.lineHeight:Jb(t)+2}function Qb(t){return Object(Ue["x"])(t)?t.length>1?t:t[0]:t}function ty(t){return Qb(t.lineBreak&&t.text&&!Object(Ue["x"])(t.text)?t.text.split(t.lineBreak):t.text)}function ey(t){const e=ty(t);return(Object(Ue["x"])(e)?e.length-1:0)*Zb(t)}function ny(t,e){const n=null==e?"":(e+"").trim();return t.limit>0&&n.length?iy(t,n):n}function ry(t){if(Vb.width===Yb){const e=oy(t);return t=>Kb(t,e)}{const e=Jb(t);return t=>Xb(t,e)}}function iy(t,e){var n=+t.limit,r=ry(t);if(r(e)<n)return e;var i,a=t.ellipsis||"",o="rtl"===t.dir,s=0,u=e.length;if(n-=r(a),o){while(s<u)i=s+u>>>1,r(e.slice(i))>n?s=i+1:u=i;return a+e.slice(s)}while(s<u)i=1+(s+u>>>1),r(e.slice(0,i))<n?s=i:u=i-1;return e.slice(0,s)+a}function ay(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function oy(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Jb(t)+"px "+ay(t,e)}function sy(t){var e=t.baseline,n=Jb(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*Zb(t):"line-bottom"===e?.29*n-.5*Zb(t):0)}Gb(!0);const uy={left:"start",center:"middle",right:"end"},cy=new Lm;function ly(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-Dp,n+=i*Math.cos(e),r+=i*Math.sin(e)),cy.x1=n,cy.y1=r,cy}function fy(t,e){var n,r=e.dx||0,i=(e.dy||0)+sy(e),a=ly(e),o=a.x1,s=a.y1,u=e.angle||0;t("text-anchor",uy[e.align]||"start"),u?(n=Pg(o,s)+" "+Ug(u),(r||i)&&(n+=" "+Pg(r,i))):n=Pg(o+r,s+i),t("transform",n)}function dy(t,e,n){var r,i=Vb.height(e),a=e.align,o=ly(e),s=o.x1,u=o.y1,c=e.dx||0,l=(e.dy||0)+sy(e)-Math.round(.8*i),f=ty(e);if(Object(Ue["x"])(f)?(i+=Zb(e)*(f.length-1),r=f.reduce((t,n)=>Math.max(t,Vb.width(e,n)),0)):r=Vb.width(e,f),"center"===a?c-=r/2:"right"===a&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*Ep,s,u);else if(2===n)return t.rotatedPoints(e.angle*Ep,s,u);return t}function hy(t,e,n){Tg(e,e=>{var r,i,a,o,s,u,c,l=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===l||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=oy(e),t.textAlign=e.align||"left",r=ly(e),i=r.x1,a=r.y1,e.angle&&(t.save(),t.translate(i,a),t.rotate(e.angle*Ep),i=a=0),i+=e.dx||0,a+=(e.dy||0)+sy(e),u=ty(e),_g(t,e),Object(Ue["x"])(u))for(s=Zb(e),o=0;o<u.length;++o)c=ny(e,u[o]),e.fill&&Eg(t,e,l)&&t.fillText(c,i,a),e.stroke&&Dg(t,e,l)&&t.strokeText(c,i,a),a+=s;else c=ny(e,u),e.fill&&Eg(t,e,l)&&t.fillText(c,i,a),e.stroke&&Dg(t,e,l)&&t.strokeText(c,i,a);e.angle&&t.restore()}})}function py(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=ly(e),s=o.x1,u=o.y1,c=dy(cy,e,1),l=-e.angle*Ep,f=Math.cos(l),d=Math.sin(l),h=f*i-d*a+(s-f*s+d*u),p=d*i+f*a+(u-d*s-f*u);return c.contains(h,p)}function my(t,e){const n=dy(cy,t,2);return Og(e,n[0],n[1],n[2],n[3])||Og(e,n[0],n[1],n[4],n[5])||Og(e,n[4],n[5],n[6],n[7])||Og(e,n[2],n[3],n[6],n[7])}var gy={type:"text",tag:"text",nested:!1,attr:fy,bound:dy,draw:hy,pick:Bg(py),isect:my},by=Zg("trail",$m,Jg),yy={arc:Xg,area:Qg,group:gb,image:kb,line:Cb,path:Fb,rect:Ib,rule:Pb,shape:Ub,symbol:Wb,text:gy,trail:by};function vy(t,e,n){var r=yy[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new Lm),t,n)}var xy={mark:null};function wy(t,e,n){var r,i,a,o,s=yy[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?a=c[0]:(xy.mark=t,a=xy),o=vy(a,u,n),e=e&&e.union(o)||o,e;if(e=e||t.bounds&&t.bounds.clear()||new Lm,l)for(r=0,i=c.length;r<i;++r)e.union(vy(c[r],u,n));return t.bounds=e}const Oy=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function _y(t,e){return JSON.stringify(t,Oy,e)}function Ay(t){const e="string"===typeof t?JSON.parse(t):t;return jy(e)}function jy(t){var e,n,r,i=t.marktype,a=t.items;if(a)for(n=0,r=a.length;n<r;++n)e=i?"mark":"group",a[n][e]=t,a[n].zindex&&(a[n][e].zdirty=!0),"group"===(i||e)&&jy(a[n]);return i&&wy(t),t}function ky(t){arguments.length?this.root=Ay(t):(this.root=Cy({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Um(this.root)])}function Cy(t,e){const n={bounds:new Lm,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function Ey(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function Sy(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function Dy(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=Ey(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function Fy(t,e){var n=t.childNodes,r=n.length;while(r>e)t.removeChild(n[--r]);return t}function Ny(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function Ty(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function My(t,e,n,r){var i,a,o=t&&t.mark;if(o&&(i=yy[o.marktype]).tip){a=Ty(e,n),a[0]-=r[0],a[1]-=r[1];while(t=t.mark.group)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}function Iy(t,e){this._active=null,this._handlers={},this._loader=t||An(),this._tooltip=e||Ry}function Ry(t,e,n,r){t.element().setAttribute("title",r||"")}function $y(t){this._el=null,this._bgcolor=null,this._loader=new Wm(t)}ky.prototype={toJSON(t){return _y(this.root,t||0)},mark(t,e,n){e=e||this.root.items[0];const r=Cy(t,e);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},Iy.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const r in e)n.push(...e[r]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(e=>{const n=new MouseEvent(t.type,t),r=Ey(null,"a");for(const t in e)r.setAttribute(t,e[t]);r.dispatchEvent(n)}).catch(()=>{})},handleTooltip(t,e,n){if(e&&null!=e.tooltip){e=My(e,t,this.canvas(),this._origin);const r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.width(),o=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;while(t.mark&&(t=t.mark.group))s+=t.x||0,u+=t.y||0;return{x:s,y:u,width:a,height:o,left:s,top:u,right:s+a,bottom:u+o}}},$y.prototype={initialize(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var n=this,r=n._loader[t](e);if(!n._ready){const t=n._call;n._ready=n._loader.ready().then(e=>{e&&t(),n._ready=null})}return r},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const By="keydown",zy="keypress",Ly="keyup",Py="dragenter",Uy="dragleave",Wy="dragover",qy="mousedown",Vy="mouseup",Gy="mousemove",Hy="mouseout",Xy="mouseover",Yy="click",Ky="dblclick",Jy="wheel",Zy="mousewheel",Qy="touchstart",tv="touchmove",ev="touchend",nv=[By,zy,Ly,Py,Uy,Wy,qy,Vy,Gy,Hy,Xy,Yy,Ky,Jy,Zy,Qy,tv,ev],rv=Gy,iv=Hy,av=Yy;function ov(t,e){Iy.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const sv=t=>t===Qy||t===tv||t===ev?[Qy,tv,ev]:[t];function uv(t,e){sv(e).forEach(e=>cv(t,e))}function cv(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}function lv(t,e,n){return function(r){const i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r)),this.fire(t,r)}}function fv(t){return function(e){this.fire(t,e),this._active=null}}function dv(){return"undefined"!==typeof window&&window.devicePixelRatio||1}Object(Ue["v"])(ov,Iy,{initialize(t,e,n){return this._canvas=t&&Sy(t,"canvas"),[Yy,qy,Gy,Hy,Uy].forEach(t=>uv(this,t)),Iy.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:nv,DOMMouseScroll(t){this.fire(Zy,t)},mousemove:lv(Gy,Xy,Hy),dragover:lv(Wy,Py,Uy),mouseout:fv(Hy),dragleave:fv(Uy),mousedown(t){this._down=this._active,this.fire(qy,t)},click(t){this._down===this._active&&(this.fire(Yy,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Qy,t,!0)},touchmove(t){this.fire(tv,t,!0)},touchend(t){this.fire(ev,t,!0),this._touch=null},fire(t,e,n){const r=n?this._touch:this._active,i=this._handlers[t];if(e.vegaType=t,t===av&&r&&r.href?this.handleHref(e,r,r.href):t!==rv&&t!==iv||this.handleTooltip(e,r,t!==iv),i)for(let a=0,o=i.length;a<o;++a)i[a].handler.call(this._obj,e,r)},on(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);return i<0&&(uv(this,t),(r[n]||(r[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},pickEvent(t){const e=Ty(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,r,i){const a=this.context(),o=yy[t.marktype];return o.pick.call(this,a,t,e,n,r,i)}});var hv=dv();function pv(t,e,n,r,i,a){const o="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,s=t.getContext("2d"),u=o?hv:i;t.width=e*u,t.height=n*u;for(const c in a)s[c]=a[c];return o&&1!==u&&(t.style.width=e+"px",t.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1]),t}function mv(t){$y.call(this,t),this._options={},this._redraw=!1,this._dirty=new Lm,this._tempb=new Lm}const gv=$y.prototype,bv=(t,e,n)=>(new Lm).set(0,0,e,n).translate(-t[0],-t[1]);function yv(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}function vv(t,e){Iy.call(this,t,e);const n=this;n._hrefHandler=xv(n,(t,e)=>{e&&e.href&&n.handleHref(t,e,e.href)}),n._tooltipHandler=xv(n,(t,e)=>{n.handleTooltip(t,e,t.type!==iv)})}Object(Ue["v"])(mv,$y,{initialize(t,e,n,r,i,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Pu(1,1,this._options.type),t&&this._canvas&&(Fy(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),gv.initialize.call(this,t,e,n,r,i)},resize(t,e,n,r){if(gv.resize.call(this,t,e,n,r),this._canvas)pv(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const t=this._options.externalContext;t||Object(Ue["k"])("CanvasRenderer is missing a valid canvas or context"),t.scale(this._scale,this._scale),t.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;while(n)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty,o=bv(n,r,i);e.save();const s=this._redraw||a.empty()?(this._redraw=!1,o.expand(1)):yv(e,o.intersect(a),n);return this.clear(-n[0],-n[1],r,i),this.draw(e,t,s),e.restore(),a.clear(),this},draw(t,e,n){const r=yy[e.marktype];e.clip&&tb(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,r){const i=this._options,a=this.context();"pdf"===i.type||i.externalContext||a.clearRect(t,e,n,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(t,e,n,r))}});const xv=(t,e)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,e.call(t._obj,n,r)};Object(Ue["v"])(vv,Iy,{initialize(t,e,n){let r=this._svg;return r&&(r.removeEventListener(av,this._hrefHandler),r.removeEventListener(rv,this._tooltipHandler),r.removeEventListener(iv,this._tooltipHandler)),this._svg=r=t&&Sy(t,"svg"),r&&(r.addEventListener(av,this._hrefHandler),r.addEventListener(rv,this._tooltipHandler),r.addEventListener(iv,this._tooltipHandler)),Iy.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);if(i<0){const i={type:t,handler:e,listener:xv(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const wv="aria-hidden",Ov="aria-label",_v="role",Av="aria-roledescription",jv="graphics-object",kv="graphics-symbol",Cv=(t,e,n)=>({[_v]:t,[Av]:e,[Ov]:n||void 0}),Ev=Object(Ue["ab"])(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Sv={axis:{desc:"axis",caption:Rv},legend:{desc:"legend",caption:$v},"title-text":{desc:"title",caption:t=>"Title text '".concat(Iv(t),"'")},"title-subtitle":{desc:"subtitle",caption:t=>"Subtitle text '".concat(Iv(t),"'")}},Dv={ariaRole:_v,ariaRoleDescription:Av,description:Ov};function Fv(t,e){const n=!1===e.aria;if(t(wv,n||void 0),n||null==e.description)for(const r in Dv)t(Dv[r],void 0);else{const n=e.mark.marktype;t(Ov,e.description),t(_v,e.ariaRole||("group"===n?jv:kv)),t(Av,e.ariaRoleDescription||"".concat(n," mark"))}}function Nv(t){return!1===t.aria?{[wv]:!0}:Ev[t.role]?null:Sv[t.role]?Mv(t,Sv[t.role]):Tv(t)}function Tv(t){const e=t.marktype,n="group"===e||"text"===e||t.items.some(t=>null!=t.description&&!1!==t.aria);return Cv(n?jv:kv,"".concat(e," mark container"),t.description)}function Mv(t,e){try{const n=t.items[0],r=e.caption||(()=>"");return Cv(e.role||kv,e.desc,n.description||r(n))}catch(n){return null}}function Iv(t){return Object(Ue["e"])(t.text).join(" ")}function Rv(t){const e=t.datum,n=t.orient,r=e.title?Bv(t):null,i=t.context,a=i.scales[e.scale].value,o=i.dataflow.locale(),s=a.type,u="left"===n||"right"===n?"Y":"X";return"".concat(u,"-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(jh(s)?"discrete":s," scale")+" with ".concat(gp(o,a,t))}function $v(t){const e=t.datum,n=e.title?Bv(t):null,r="".concat(e.type||""," legend").trim(),i=e.scales,a=Object.keys(i),o=t.context,s=o.scales[i[a[0]]].value,u=o.dataflow.locale();return Lv(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(zv(a))+" with ".concat(gp(u,s,t))}function Bv(t){try{return Object(Ue["e"])(Object(Ue["S"])(t.items).items[0].text).join(" ")}catch(e){return null}}function zv(t){return t=t.map(t=>t+("fill"===t||"stroke"===t?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Object(Ue["S"])(t)}function Lv(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const Pv=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Uv=t=>Pv(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Wv(){let t="",e="",n="";const r=[],i=()=>e=n="",a=a=>{e&&(t+="".concat(e,">").concat(n),i()),r.push(a)},o=(t,n)=>(null!=n&&(e+=" ".concat(t,'="').concat(Uv(n),'"')),s),s={open(t,...n){a(t),e="<"+t;for(const e of n)for(const t in e)o(t,e[t]);return s},close(){const a=r.pop();return t+=e?e+(n?">".concat(n,"</").concat(a,">"):"/>"):"</".concat(a,">"),i(),s},attr:o,text:t=>(n+=Pv(t),s),toString:()=>t};return s}const qv=t=>Vv(Wv(),t)+"";function Vv(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,r=n.length;for(let e=0;e<r;++e)t.attr(n[e].name,n[e].value)}if(e.hasChildNodes()){const n=e.childNodes,r=n.length;for(let e=0;e<r;e++){const r=n[e];3===r.nodeType?t.text(r.nodeValue):Vv(t,r)}}return t.close()}const Gv={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Hv={fill:"none","stroke-miterlimit":10},Xv=0,Yv=bb.xmlns;function Kv(t){$y.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const Jv=$y.prototype;function Zv(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function Qv(t,e,n){let r,i,a;if("radial"===e.gradient){let r=Dy(t,n++,"pattern",Yv);cx(r,{id:yp+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=Dy(r,0,"rect",Yv),cx(r,{width:1,height:1,fill:"url(".concat(dx(),"#").concat(e.id,")")}),t=Dy(t,n++,"radialGradient",Yv),cx(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=Dy(t,n++,"linearGradient",Yv),cx(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(r=0,i=e.stops.length;r<i;++r)a=Dy(t,r,"stop",Yv),a.setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);return Fy(t,r),n}function tx(t,e,n){let r;return t=Dy(t,n,"clipPath",Yv),t.setAttribute("id",e.id),e.path?(r=Dy(t,0,"path",Yv),r.setAttribute("d",e.path)):(r=Dy(t,0,"rect",Yv),cx(r,{x:0,y:0,width:e.width,height:e.height})),Fy(t,1),n+1}function ex(t,e,n){e=e.lastChild.previousSibling;let r,i=0;Tg(n,n=>{r=t.mark(e,n,r),++i}),Fy(e,1+i)}function nx(t,e,n,r,i){let a,o=t._svg;if(!o&&(a=e.ownerDocument,o=Ey(a,r,Yv),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){const e=Ey(a,"path",Yv);o.appendChild(e),e.__data__=t;const n=Ey(a,"g",Yv);o.appendChild(n),n.__data__=t;const r=Ey(a,"path",Yv);o.appendChild(r),r.__data__=t,r.__values__={fill:"default"}}return(o.ownerSVGElement!==i||rx(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}function rx(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}Object(Ue["v"])(Kv,$y,{initialize(t,e,n,r,i){return this._defs={},this._clearDefs(),t&&(this._svg=Dy(t,0,"svg",Yv),cx(this._svg,bb),this._svg.setAttribute("class","marks"),Fy(t,1),this._root=Dy(this._svg,Xv,"g",Yv),cx(this._root,Hv),Fy(this._svg,Xv+1)),this.background(this._bgcolor),Jv.initialize.call(this,t,e,n,r,i)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),Jv.background.apply(this,arguments)},resize(t,e,n,r){return Jv.resize.call(this,t,e,n,r),this._svg&&(cx(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=Dy(t,Xv,"rect",Yv),cx(n,{width:this._width,height:this._height,fill:e}));const r=qv(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),r},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),Fy(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,r,i,a,o,s,u;for(o=0,s=t.length;o<s;++o)n=t[o],r=n.mark,r.marktype!==i&&(i=r.marktype,a=yy[i]),r.zdirty&&r.dirty!==e&&(this._dirtyAll=!1,Zv(n,e),r.items.forEach(t=>{t.dirty=e})),r.zdirty||(n.exit?(a.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(a,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null):(n=a.nested?r.items[0]:n,n._update!==e&&(n._svg&&n._svg.ownerSVGElement?this._update(a,n._svg,n):(this._dirtyAll=!1,Zv(n,e)),n._update=e)));return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const r=this._svg,i=yy[e.marktype],a=!1===e.interactive?"none":null,o="g"===i.tag;let s=null,u=0;const c=nx(e,t,n,"g",r);c.setAttribute("class",Ny(e));const l=Nv(e);for(const d in l)lx(c,d,l[d]);o||lx(c,"pointer-events",a),lx(c,"clip-path",e.clip?zm(this,e,e.group):null);const f=t=>{const e=this.isDirty(t),n=nx(t,c,s,i.tag,r);e&&(this._update(i,n,t),o&&ex(this,n,t)),s=n,++u};return i.nested?e.items.length&&f(e.items[0]):Tg(e,f),Fy(c,u),c},_update(t,e,n){ix=e,ax=e.__values__,Fv(sx,n),t.attr(sx,n,this);const r=ox[t.type];r&&r.call(this,t,e,n),ix&&this.style(ix,n)},style(t,e){if(null!=e)for(const n in Gv){let r="font"===n?ay(e):e[n];if(r===ax[n])continue;const i=Gv[n];null==r?t.removeAttribute(i):(vp(r)&&(r=xp(r,this._defs.gradient,dx())),t.setAttribute(i,r+"")),ax[n]=r}},defs(){const t=this._svg,e=this._defs;let n=e.el,r=0;for(const i in e.gradient)n||(e.el=n=Dy(t,Xv+1,"defs",Yv)),r=Qv(n,e.gradient[i],r);for(const i in e.clipping)n||(e.el=n=Dy(t,Xv+1,"defs",Yv)),r=tx(n,e.clipping[i],r);n&&(0===r?(t.removeChild(n),e.el=null):Fy(n,r))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});let ix=null,ax=null;const ox={group(t,e,n){const r=ix=e.childNodes[2];ax=r.__values__,t.foreground(sx,n,this),ax=e.__values__,ix=e.childNodes[1],t.content(sx,n,this);const i=ix=e.childNodes[0];t.background(sx,n,this);const a=!1===n.mark.interactive?"none":null;if(a!==ax.events&&(lx(r,"pointer-events",a),lx(i,"pointer-events",a),ax.events=a),n.strokeForeground&&n.stroke){const t=n.fill;lx(r,"display",null),this.style(i,n),lx(i,"stroke",null),t&&(n.fill=null),ax=r.__values__,this.style(r,n),t&&(n.fill=t),ix=null}else lx(r,"display","none")},image(t,e,n){!1===n.smooth?(ux(e,"image-rendering","optimizeSpeed"),ux(e,"image-rendering","pixelated")):ux(e,"image-rendering",null)},text(t,e,n){const r=ty(n);let i,a,o,s;Object(Ue["x"])(r)?(a=r.map(t=>ny(n,t)),i=a.join("\n"),i!==ax.text&&(Fy(e,0),o=e.ownerDocument,s=Zb(n),a.forEach((t,r)=>{const i=Ey(o,"tspan",Yv);i.__data__=n,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),e.appendChild(i)}),ax.text=i)):(a=ny(n,r),a!==ax.text&&(e.textContent=a,ax.text=a)),lx(e,"font-family",ay(n)),lx(e,"font-size",Jb(n)+"px"),lx(e,"font-style",n.fontStyle),lx(e,"font-variant",n.fontVariant),lx(e,"font-weight",n.fontWeight)}};function sx(t,e,n){e!==ax[t]&&(n?fx(ix,t,e,n):lx(ix,t,e),ax[t]=e)}function ux(t,e,n){n!==ax[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),ax[e]=n)}function cx(t,e){for(const n in e)lx(t,n,e[n])}function lx(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function fx(t,e,n,r){null!=n?t.setAttributeNS(r,e,n):t.removeAttributeNS(r,e)}function dx(){let t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function hx(t){$y.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}function px(t,e,n,r,i){if(null==e)return t;if("bgrect"===r&&!1===n.interactive&&(t["pointer-events"]="none"),"bgfore"===r&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===r&&!1===e.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===r&&(t["font-family"]=ay(e),t["font-size"]=Jb(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const a in Gv){let n=e[a];const r=Gv[a];("transparent"!==n||"fill"!==r&&"stroke"!==r)&&null!=n&&(vp(n)&&(n=xp(n,i.gradient,"")),t[r]=n)}return t}Object(Ue["v"])(hx,$y,{svg(){return this._text},_render(t){const e=Wv();e.open("svg",Object(Ue["l"])({},bb,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",Hv,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=yy[e.marktype],r=n.tag,i=[Fv,n.attr];t.open("g",{class:Ny(e),"clip-path":e.clip?zm(this,e,e.group):null},Nv(e),{"pointer-events":"g"!==r&&!1===e.interactive?"none":null});const a=a=>{const o=this.href(a);if(o&&t.open("a",o),t.open(r,this.attr(e,a,i,"g"!==r?r:null)),"text"===r){const e=ty(a);if(Object(Ue["x"])(e)){const n={x:0,dy:Zb(a)};for(let r=0;r<e.length;++r)t.open("tspan",r?n:null).text(ny(a,e[r])).close()}else t.text(ny(a,e))}else if("g"===r){const r=a.strokeForeground,i=a.fill,o=a.stroke;r&&o&&(a.stroke=null),t.open("path",this.attr(e,a,n.background,"bgrect")).close(),t.open("g",this.attr(e,a,n.content)),Tg(a,e=>this.mark(t,e)),t.close(),r&&o?(i&&(a.fill=null),a.stroke=o,t.open("path",this.attr(e,a,n.foreground,"bgrect")).close(),i&&(a.fill=i)):t.open("path",this.attr(e,a,n.foreground,"bgfore")).close()}t.close(),o&&t.close()};return n.nested?e.items&&e.items.length&&a(e.items[0]):Tg(e,a),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(t=>{t["xlink:href"]=t.href,t.href=null,(this._hrefs||(this._hrefs={}))[e]=t})}return null},attr(t,e,n,r){const i={},a=(t,e,n,r)=>{i[r||t]=e};return Array.isArray(n)?n.forEach(t=>t(a,e,this)):n(a,e,this),r&&px(i,e,t,r,this._defs),i},defs(t){const e=this._defs.gradient,n=this._defs.clipping,r=Object.keys(e).length+Object.keys(n).length;if(0!==r){t.open("defs");for(const n in e){const r=e[n],i=r.stops;"radial"===r.gradient?(t.open("pattern",{id:yp+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),t.close(),t.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):t.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let e=0;e<i.length;++e)t.open("stop",{offset:i[e].offset,"stop-color":i[e].color}).close();t.close()}for(const e in n){const r=n[e];t.open("clipPath",{id:e}),r.path?t.open("path",{d:r.path}).close():t.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),t.close()}t.close()}}});const mx="canvas",gx="png",bx="svg",yx="none",vx={Canvas:mx,PNG:gx,SVG:bx,None:yx},xx={};function wx(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(xx[t]=e,this):xx[t]}function Ox(t,e,n){const r=[],i=(new Lm).union(e),a=t.marktype;return a?_x(t,i,n,r):"group"===a?jx(t,i,n,r):Object(Ue["k"])("Intersect scene must be mark node or group item.")}function _x(t,e,n,r){if(Ax(t,e,n)){const i=t.items,a=t.marktype,o=i.length;let s=0;if("group"===a)for(;s<o;++s)jx(i[s],e,n,r);else for(const t=yy[a].isect;s<o;++s){const n=i[s];kx(n,e,t)&&r.push(n)}}return r}function Ax(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}function jx(t,e,n,r){n&&n(t.mark)&&kx(t,e,yy.group.isect)&&r.push(t);const i=t.items,a=i&&i.length;if(a){const o=t.x||0,s=t.y||0;e.translate(-o,-s);for(let t=0;t<a;++t)_x(i[t],e,n,r);e.translate(o,s)}return r}function kx(t,e,n){const r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}xx[mx]=xx[gx]={renderer:mv,headless:mv,handler:ov},xx[bx]={renderer:Kv,headless:hx,handler:vv},xx[yx]={};const Cx=new Lm;function Ex(t){const e=t.clip;if(Object(Ue["A"])(e))e(fg(Cx.clear()));else{if(!e)return;Cx.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(Cx)}const Sx="top",Dx="left",Fx="right",Nx="bottom",Tx="top-left",Mx="top-right",Ix="bottom-left",Rx="bottom-right",$x="start",Bx="middle",zx="end",Lx="x",Px="y",Ux="group",Wx="axis",qx="title",Vx="frame",Gx="scope",Hx="legend",Xx="row-header",Yx="row-footer",Kx="row-title",Jx="column-header",Zx="column-footer",Qx="column-title",tw="padding",ew="symbol",nw="fit",rw="fit-x",iw="fit-y",aw="pad",ow="none",sw="all",uw="each",cw="flush",lw="column",fw="row";function dw(t){Vr.call(this,null,t)}function hw(t,e,n){return e(t.bounds.clear(),t,n)}Object(Ue["v"])(dw,Vr,{transform(t,e){const n=e.dataflow,r=t.mark,i=r.marktype,a=yy[i],o=a.bound;let s,u=r.bounds;if(a.nested)r.items.length&&n.dirty(r.items[0]),u=hw(r,o),r.items.forEach(t=>{t.bounds.clear().union(u)});else if(i===Ux||t.modified())switch(e.visit(e.MOD,t=>n.dirty(t)),u.clear(),r.items.forEach(t=>u.union(hw(t,o))),r.role){case Wx:case Hx:case qx:e.reflow()}else s=e.changed(e.REM),e.visit(e.ADD,t=>{u.union(hw(t,o))}),e.visit(e.MOD,t=>{s=s||u.alignsWith(t.bounds),n.dirty(t),u.union(hw(t,o))}),s&&(u.clear(),r.items.forEach(t=>u.union(t.bounds)));return Ex(r),e.modifies("bounds")}});const pw=":vega_identifier:";function mw(t){Vr.call(this,0,t)}function gw(t){return t._signals[pw]||(t._signals[pw]=t.add(0))}function bw(t){Vr.call(this,null,t)}function yw(t){const e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function vw(t){Vr.call(this,null,t)}mw.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(Ue["v"])(mw,Vr,{transform(t,e){const n=gw(e.dataflow),r=t.as;let i=n.value;return e.visit(e.ADD,t=>t[r]=t[r]||++i),n.set(this.value=i),e}}),Object(Ue["v"])(bw,Vr,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,yw(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const r=n.marktype===Ux?Um:Pm;return e.visit(e.ADD,t=>r.call(t,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});const xw={parity:t=>t.filter((t,e)=>e%2?t.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((t,r)=>r&&ww(n.bounds,t.bounds,e)?t.opacity=0:(n=t,1))}},ww=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),Ow=(t,e)=>{for(var n,r=1,i=t.length,a=t[0].bounds;r<i;a=n,++r)if(ww(a,n=t[r].bounds,e))return!0},_w=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},Aw=(t,e,n)=>{var r=t.range(),i=new Lm;return e===Sx||e===Nx?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),t=>i.encloses(t.bounds)},jw=t=>(t.forEach(t=>t.opacity=1),t),kw=(t,e)=>t.reflow(e.modified()).modifies("opacity");function Cw(t){Vr.call(this,null,t)}Object(Ue["v"])(vw,Vr,{transform(t,e){const n=xw[t.method]||xw.parity,r=t.separation||0;let i,a,o=e.materialize(e.SOURCE).source;if(!o||!o.length)return;if(!t.method)return t.modified("method")&&(jw(o),e=kw(e,t)),e;if(o=o.filter(_w),!o.length)return;if(t.sort&&(o=o.slice().sort(t.sort)),i=jw(o),e=kw(e,t),i.length>=3&&Ow(i,r)){do{i=n(i,r)}while(i.length>=3&&Ow(i,r));i.length<3&&!Object(Ue["S"])(o).opacity&&(i.length>1&&(Object(Ue["S"])(i).opacity=0),Object(Ue["S"])(o).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(a=Aw(t.boundScale,t.boundOrient,+t.boundTolerance),o.forEach(t=>{a(t)||(t.opacity=0)}));const s=i[0].mark.bounds.clear();return o.forEach(t=>{t.opacity&&s.union(t.bounds)}),e}}),Object(Ue["v"])(Cw,Vr,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,t=>n.dirty(t)),e.fields&&e.fields["zindex"]){const t=e.source&&e.source[0];t&&(t.mark.zdirty=!0)}}});const Ew=new Lm;function Sw(t,e,n){return t[e]===n?0:(t[e]=n,1)}function Dw(t){var e=t.items[0].orient;return e===Dx||e===Fx}function Fw(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Nw(t,e,n,r){var i,a,o=e.items[0],s=o.datum,u=null!=o.translate?o.translate:.5,c=o.orient,l=Fw(s),f=o.range,d=o.offset,h=o.position,p=o.minExtent,m=o.maxExtent,g=s.title&&o.items[l[2]].items[0],b=o.titlePadding,y=o.bounds,v=g&&ey(g),x=0,w=0;switch(Ew.clear().union(y),y.clear(),(i=l[0])>-1&&y.union(o.items[i].bounds),(i=l[1])>-1&&y.union(o.items[i].bounds),c){case Sx:x=h||0,w=-d,a=Math.max(p,Math.min(m,-y.y1)),y.add(0,-a).add(f,0),g&&Tw(t,g,a,b,v,0,-1,y);break;case Dx:x=-d,w=h||0,a=Math.max(p,Math.min(m,-y.x1)),y.add(-a,0).add(0,f),g&&Tw(t,g,a,b,v,1,-1,y);break;case Fx:x=n+d,w=h||0,a=Math.max(p,Math.min(m,y.x2)),y.add(0,0).add(a,f),g&&Tw(t,g,a,b,v,1,1,y);break;case Nx:x=h||0,w=r+d,a=Math.max(p,Math.min(m,y.y2)),y.add(0,0).add(f,a),g&&Tw(t,g,a,b,0,0,1,y);break;default:x=o.x,w=o.y}return Gm(y.translate(x,w),o),Sw(o,"x",x+u)|Sw(o,"y",w+u)&&(o.bounds=Ew,t.dirty(o),o.bounds=y,t.dirty(o)),o.mark.bounds.clear().union(y)}function Tw(t,e,n,r,i,a,o,s){const u=e.bounds;if(e.auto){const s=o*(n+i+r);let c=0,l=0;t.dirty(e),a?c=(e.x||0)-(e.x=s):l=(e.y||0)-(e.y=s),e.mark.bounds.clear().union(u.translate(-c,-l)),t.dirty(e)}s.union(u)}const Mw=(t,e)=>Math.floor(Math.min(t,e)),Iw=(t,e)=>Math.ceil(Math.max(t,e));function Rw(t){var e,n,r=t.items,i=r.length,a=0;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;a<i;++a)if(e=r[a],n=e.items,e.marktype===Ux)switch(e.role){case Wx:case Hx:case qx:break;case Xx:o.rowheaders.push(...n);break;case Yx:o.rowfooters.push(...n);break;case Jx:o.colheaders.push(...n);break;case Zx:o.colfooters.push(...n);break;case Kx:o.rowtitle=n[0];break;case Qx:o.coltitle=n[0];break;default:o.marks.push(...n)}return o}function $w(t){return(new Lm).set(0,0,t.width||0,t.height||0)}function Bw(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function zw(t,e,n){const r=Object(Ue["D"])(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function Lw(t){return t<0?Math.ceil(-t):0}function Pw(t,e,n){var r,i,a,o,s,u,c,l,f,d,h,p=!n.nodirty,m=n.bounds===cw?$w:Bw,g=Ew.set(0,0,0,0),b=zw(n.align,lw),y=zw(n.align,fw),v=zw(n.padding,lw),x=zw(n.padding,fw),w=n.columns||e.length,O=w<=0?1:Math.ceil(e.length/w),_=e.length,A=Array(_),j=Array(w),k=0,C=Array(_),E=Array(O),S=0,D=Array(_),F=Array(_),N=Array(_);for(i=0;i<w;++i)j[i]=0;for(i=0;i<O;++i)E[i]=0;for(i=0;i<_;++i)u=e[i],s=N[i]=m(u),u.x=u.x||0,D[i]=0,u.y=u.y||0,F[i]=0,a=i%w,o=~~(i/w),k=Math.max(k,c=Math.ceil(s.x2)),S=Math.max(S,l=Math.ceil(s.y2)),j[a]=Math.max(j[a],c),E[o]=Math.max(E[o],l),A[i]=v+Lw(s.x1),C[i]=x+Lw(s.y1),p&&t.dirty(e[i]);for(i=0;i<_;++i)i%w===0&&(A[i]=0),i<w&&(C[i]=0);if(b===uw)for(a=1;a<w;++a){for(h=0,i=a;i<_;i+=w)h<A[i]&&(h=A[i]);for(i=a;i<_;i+=w)A[i]=h+j[a-1]}else if(b===sw){for(h=0,i=0;i<_;++i)i%w&&h<A[i]&&(h=A[i]);for(i=0;i<_;++i)i%w&&(A[i]=h+k)}else for(b=!1,a=1;a<w;++a)for(i=a;i<_;i+=w)A[i]+=j[a-1];if(y===uw)for(o=1;o<O;++o){for(h=0,i=o*w,r=i+w;i<r;++i)h<C[i]&&(h=C[i]);for(i=o*w;i<r;++i)C[i]=h+E[o-1]}else if(y===sw){for(h=0,i=w;i<_;++i)h<C[i]&&(h=C[i]);for(i=w;i<_;++i)C[i]=h+S}else for(y=!1,o=1;o<O;++o)for(i=o*w,r=i+w;i<r;++i)C[i]+=E[o-1];for(f=0,i=0;i<_;++i)f=A[i]+(i%w?f:0),D[i]+=f-e[i].x;for(a=0;a<w;++a)for(d=0,i=a;i<_;i+=w)d+=C[i],F[i]+=d-e[i].y;if(b&&zw(n.center,lw)&&O>1)for(i=0;i<_;++i)s=b===sw?k:j[i%w],f=s-N[i].x2-e[i].x-D[i],f>0&&(D[i]+=f/2);if(y&&zw(n.center,fw)&&1!==w)for(i=0;i<_;++i)s=y===sw?S:E[~~(i/w)],d=s-N[i].y2-e[i].y-F[i],d>0&&(F[i]+=d/2);for(i=0;i<_;++i)g.union(N[i].translate(D[i],F[i]));switch(f=zw(n.anchor,Lx),d=zw(n.anchor,Px),zw(n.anchor,lw)){case zx:f-=g.width();break;case Bx:f-=g.width()/2}switch(zw(n.anchor,fw)){case zx:d-=g.height();break;case Bx:d-=g.height()/2}for(f=Math.round(f),d=Math.round(d),g.clear(),i=0;i<_;++i)e[i].mark.bounds.clear();for(i=0;i<_;++i)u=e[i],u.x+=D[i]+=f,u.y+=F[i]+=d,g.union(u.mark.bounds.union(u.bounds.translate(D[i],F[i]))),p&&t.dirty(u);return g}function Uw(t,e,n){var r,i,a,o,s,u,c,l=Rw(e),f=l.marks,d=n.bounds===cw?Ww:qw,h=n.offset,p=n.columns||f.length,m=p<=0?1:Math.ceil(f.length/p),g=m*p;const b=Pw(t,f,n);b.empty()&&b.set(0,0,0,0),l.rowheaders&&(u=zw(n.headerBand,fw,null),r=Vw(t,l.rowheaders,f,p,m,-zw(h,"rowHeader"),Mw,0,d,"x1",0,p,1,u)),l.colheaders&&(u=zw(n.headerBand,lw,null),i=Vw(t,l.colheaders,f,p,p,-zw(h,"columnHeader"),Mw,1,d,"y1",0,1,p,u)),l.rowfooters&&(u=zw(n.footerBand,fw,null),a=Vw(t,l.rowfooters,f,p,m,zw(h,"rowFooter"),Iw,0,d,"x2",p-1,p,1,u)),l.colfooters&&(u=zw(n.footerBand,lw,null),o=Vw(t,l.colfooters,f,p,p,zw(h,"columnFooter"),Iw,1,d,"y2",g-p,1,p,u)),l.rowtitle&&(s=zw(n.titleAnchor,fw),c=zw(h,"rowTitle"),c=s===zx?a+c:r-c,u=zw(n.titleBand,fw,.5),Gw(t,l.rowtitle,c,0,b,u)),l.coltitle&&(s=zw(n.titleAnchor,lw),c=zw(h,"columnTitle"),c=s===zx?o+c:i-c,u=zw(n.titleBand,lw,.5),Gw(t,l.coltitle,c,1,b,u))}function Ww(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function qw(t,e){return t.bounds[e]}function Vw(t,e,n,r,i,a,o,s,u,c,l,f,d,h){var p,m,g,b,y,v,x,w,O,_=n.length,A=0,j=0;if(!_)return A;for(p=l;p<_;p+=f)n[p]&&(A=o(A,u(n[p],c)));if(!e.length)return A;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),A+=a,m=0,b=e.length;m<b;++m)t.dirty(e[m]),e[m].mark.bounds.clear();for(p=l,m=0,b=e.length;m<b;++m,p+=f){for(v=e[m],y=v.mark.bounds,g=p;g>=0&&null==(x=n[g]);g-=d);s?(w=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),O=A):(w=A,O=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),y.union(v.bounds.translate(w-(v.x||0),O-(v.y||0))),v.x=w,v.y=O,t.dirty(v),j=o(j,y[c])}return j}function Gw(t,e,n,r,i,a){if(e){t.dirty(e);var o=n,s=n;r?o=Math.round(i.x1+a*i.width()):s=Math.round(i.y1+a*i.height()),e.bounds.translate(o-(e.x||0),s-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=s,t.dirty(e)}}function Hw(t,e){const n=t[e]||{};return(e,r)=>null!=n[e]?n[e]:null!=t[e]?t[e]:r}function Xw(t,e){let n=-1/0;return t.forEach(t=>{null!=t.offset&&(n=Math.max(n,t.offset))}),n>-1/0?n:e}function Yw(t,e,n,r,i,a,o){const s=Hw(n,e),u=Xw(t,s("offset",0)),c=s("anchor",$x),l=c===zx?1:c===Bx?.5:0,f={align:uw,bounds:s("bounds",cw),columns:"vertical"===s("direction")?1:t.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(e){case Dx:f.anchor={x:Math.floor(r.x1)-u,column:zx,y:l*(o||r.height()+2*r.y1),row:c};break;case Fx:f.anchor={x:Math.ceil(r.x2)+u,y:l*(o||r.height()+2*r.y1),row:c};break;case Sx:f.anchor={y:Math.floor(i.y1)-u,row:zx,x:l*(a||i.width()+2*i.x1),column:c};break;case Nx:f.anchor={y:Math.ceil(i.y2)+u,x:l*(a||i.width()+2*i.x1),column:c};break;case Tx:f.anchor={x:u,y:u};break;case Mx:f.anchor={x:a-u,y:u,column:zx};break;case Ix:f.anchor={x:u,y:o-u,row:zx};break;case Rx:f.anchor={x:a-u,y:o-u,column:zx,row:zx};break}return f}function Kw(t,e){var n,r,i=e.items[0],a=i.datum,o=i.orient,s=i.bounds,u=i.x,c=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),Zw(t,i,i.items[0].items[0]),s=Jw(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),a.type===ew&&eO(i.items[0].items[0].items[0].items),o!==ow&&(i.x=u=0,i.y=c=0),i.width=n,i.height=r,Gm(s.set(u,c,u+n,c+r),i),i.mark.bounds.clear().union(s),i}function Jw(t,e){return t.items.forEach(t=>e.union(t.bounds)),e.x1=t.padding,e.y1=t.padding,e}function Zw(t,e,n){var r=e.padding,i=r-n.x,a=r-n.y;if(e.datum.title){var o=e.items[1].items[0],s=o.anchor,u=e.titlePadding||0,c=r-o.x,l=r-o.y;switch(o.orient){case Dx:i+=Math.ceil(o.bounds.width())+u;break;case Fx:case Nx:break;default:a+=o.bounds.height()+u}switch((i||a)&&tO(t,n,i,a),o.orient){case Dx:l+=Qw(e,n,o,s,1,1);break;case Fx:c+=Qw(e,n,o,zx,0,0)+u,l+=Qw(e,n,o,s,1,1);break;case Nx:c+=Qw(e,n,o,s,0,0),l+=Qw(e,n,o,zx,-1,0,1)+u;break;default:c+=Qw(e,n,o,s,0,0)}(c||l)&&tO(t,o,c,l),(c=Math.round(o.bounds.x1-r))<0&&(tO(t,n,-c,0),tO(t,o,-c,0))}else(i||a)&&tO(t,n,i,a)}function Qw(t,e,n,r,i,a,o){const s="symbol"!==t.datum.type,u=n.datum.vgrad,c=!s||!a&&u||o?e:e.items[0],l=c.bounds[i?"y2":"x2"]-t.padding,f=u&&a?l:0,d=u&&a?0:l,h=i<=0?0:ey(n);return Math.round(r===$x?f:r===zx?d-h:.5*(l-h))}function tO(t,e,n,r){e.x+=n,e.y+=r,e.bounds.translate(n,r),e.mark.bounds.translate(n,r),t.dirty(e)}function eO(t){const e=t.reduce((t,e)=>(t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t),{});t.forEach(t=>{t.width=e[t.column],t.height=t.bounds.y2-t.y})}function nO(t,e,n,r,i){var a,o=e.items[0],s=o.frame,u=o.orient,c=o.anchor,l=o.offset,f=o.padding,d=o.items[0].items[0],h=o.items[1]&&o.items[1].items[0],p=u===Dx||u===Fx?r:n,m=0,g=0,b=0,y=0,v=0;if(s!==Ux?u===Dx?(m=i.y2,p=i.y1):u===Fx?(m=i.y1,p=i.y2):(m=i.x1,p=i.x2):u===Dx&&(m=r,p=0),a=c===$x?m:c===zx?p:(m+p)/2,h&&h.text){switch(u){case Sx:case Nx:v=d.bounds.height()+f;break;case Dx:y=d.bounds.width()+f;break;case Fx:y=-d.bounds.width()-f;break}Ew.clear().union(h.bounds),Ew.translate(y-(h.x||0),v-(h.y||0)),Sw(h,"x",y)|Sw(h,"y",v)&&(t.dirty(h),h.bounds.clear().union(Ew),h.mark.bounds.clear().union(Ew),t.dirty(h)),Ew.clear().union(h.bounds)}else Ew.clear();switch(Ew.union(d.bounds),u){case Sx:g=a,b=i.y1-Ew.height()-l;break;case Dx:g=i.x1-Ew.width()-l,b=a;break;case Fx:g=i.x2+Ew.width()+l,b=a;break;case Nx:g=a,b=i.y2+l;break;default:g=o.x,b=o.y}return Sw(o,"x",g)|Sw(o,"y",b)&&(Ew.translate(g,b),t.dirty(o),o.bounds.clear().union(Ew),e.bounds.clear().union(Ew),t.dirty(o)),o.bounds}function rO(t){Vr.call(this,null,t)}function iO(t){return t&&"legend-entry"!==t.mark.role}function aO(t,e,n){var r,i,a,o,s,u,c=e.items,l=Math.max(0,e.width||0),f=Math.max(0,e.height||0),d=(new Lm).set(0,0,l,f),h=d.clone(),p=d.clone(),m=[];for(s=0,u=c.length;s<u;++s)switch(i=c[s],i.role){case Wx:o=Dw(i)?h:p,o.union(Nw(t,i,l,f));break;case qx:r=i;break;case Hx:m.push(Kw(t,i));break;case Vx:case Gx:case Xx:case Yx:case Kx:case Jx:case Zx:case Qx:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}if(m.length){const e={};m.forEach(t=>{a=t.orient||Fx,a!==ow&&(e[a]||(e[a]=[])).push(t)});for(const r in e){const i=e[r];Pw(t,i,Yw(i,r,n.legends,h,p,l,f))}m.forEach(e=>{const r=e.bounds;if(r.equals(e._bounds)||(e.bounds=e._bounds,t.dirty(e),e.bounds=r,t.dirty(e)),n.autosize&&n.autosize.type===nw)switch(e.orient){case Dx:case Fx:d.add(r.x1,0).add(r.x2,0);break;case Sx:case Nx:d.add(0,r.y1).add(0,r.y2)}else d.union(r)})}d.union(h).union(p),r&&d.union(nO(t,r,l,f,d)),e.clip&&d.set(0,0,e.width||0,e.height||0),oO(t,e,d,n)}function oO(t,e,n,r){const i=r.autosize||{},a=i.type;if(t._autosize<1||!a)return;let o=t._width,s=t._height,u=Math.max(0,e.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,e.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-l));if(i.contains===tw){const e=t.padding();o-=e.left+e.right,s-=e.top+e.bottom}a===ow?(c=0,f=0,u=o,l=s):a===nw?(u=Math.max(0,o-c-d),l=Math.max(0,s-f-h)):a===rw?(u=Math.max(0,o-c-d),s=l+f+h):a===iw?(o=u+c+d,l=Math.max(0,s-f-h)):a===aw&&(o=u+c+d,s=l+f+h),t._resizeView(o,s,u,l,[c,f],i.resize)}function sO(t,e){let n=0;if(void 0===e)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function uO(t){Vr.call(this,null,t)}function cO(t){Vr.call(this,null,t)}function lO(){return Nn({})}function fO(t){const e=Object(Ue["p"])().test(t=>t.exit);return e.lookup=n=>e.get(t(n)),e}function dO(t){Vr.call(this,null,t)}function hO(t){Vr.call(this,[],t)}Object(Ue["v"])(rO,Vr,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(e=>{t.layout&&Uw(n,e,t.layout),aO(n,e,t)}),iO(t.mark.group)?e.reflow():e}}),Object(Ue["v"])(uO,Vr,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,a=t.scale,o=null==t.count?t.values?t.values.length:10:t.count,s=Kh(a,o,t.minstep),u=t.format||Qh(n,a,s,t.formatSpecifier,t.formatType,!!t.values),c=t.values?Jh(a,t.values,s):Zh(a,s);return i&&(r.rem=i),i=c.map((t,e)=>Nn({index:e/(c.length-1||1),value:t,label:u(t)})),t.extra&&i.length&&i.push(Nn({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),Object(Ue["v"])(cO,Vr,{transform(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||lO,a=t.key||Dn,o=this.value;return Object(Ue["x"])(r.encode)&&(r.encode=null),o&&(t.modified("key")||e.modified(a))&&Object(Ue["k"])("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=fO(a)),e.visit(e.ADD,t=>{const e=a(t);let n=o.get(e);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(n=i(t),o.set(e,n),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,t=>{const e=a(t),n=o.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,t=>{const e=a(t),n=o.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),(e.clean()||t.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}}),Object(Ue["v"])(dO,Vr,{transform(t,e){var n=e.fork(e.ADD_REM),r=t.mod||!1,i=t.encoders,a=e.encode;if(Object(Ue["x"])(a)){if(!n.changed()&&!a.every(t=>i[t]))return e.StopPropagation;a=a[0],n.encode=null}var o="enter"===a,s=i.update||Ue["o"],u=i.enter||Ue["o"],c=i.exit||Ue["o"],l=(a&&!o?i[a]:s)||Ue["o"];if(e.changed(e.ADD)&&(e.visit(e.ADD,e=>{u(e,t),s(e,t)}),n.modifies(u.output),n.modifies(s.output),l!==Ue["o"]&&l!==s&&(e.visit(e.ADD,e=>{l(e,t)}),n.modifies(l.output))),e.changed(e.REM)&&c!==Ue["o"]&&(e.visit(e.REM,e=>{c(e,t)}),n.modifies(c.output)),o||l!==Ue["o"]){const i=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(i,e=>{const i=u(e,t)||r;(l(e,t)||i)&&n.mod.push(e)}),n.mod.length&&n.modifies(u.output)):e.visit(i,e=>{(l(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(l.output)}return n.changed()?n:e.StopPropagation}}),Object(Ue["v"])(hO,Vr,{transform(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,r,i,a,o,s=e.dataflow.locale(),u=e.fork(e.NO_SOURCE|e.NO_FIELDS),c=this.value,l=t.type||qh,f=t.scale,d=+t.limit,h=Kh(f,null==t.count?5:t.count,t.minstep),p=!!t.values||l===qh,m=t.format||up(s,f,h,l,t.formatSpecifier,t.formatType,p),g=t.values||rp(f,h);return c&&(u.rem=c),l===qh?(d&&g.length>d?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),c=g.slice(0,d-1),o=!0):c=g,Object(Ue["A"])(i=t.size)?(t.values||0!==f(c[0])||(c=c.slice(1)),a=c.reduce((e,n)=>Math.max(e,i(n,t)),0)):i=Object(Ue["i"])(a=i||8),c=c.map((e,n)=>Nn({index:n,label:m(e,n,c),value:e,offset:a,size:i(e,t)})),o&&(o=g[c.length],c.push(Nn({index:c.length,label:"".concat(g.length-c.length," entries"),value:o,offset:a,size:i(o,t)})))):l===Gh?(n=f.domain(),r=Ih(f,n[0],Object(Ue["S"])(n)),g.length<3&&!t.values&&n[0]!==Object(Ue["S"])(n)&&(g=[n[0],Object(Ue["S"])(n)]),c=g.map((t,e)=>Nn({index:e,label:m(t,e,g),value:t,perc:r(t)}))):(i=g.length-1,r=pp(f),c=g.map((t,e)=>Nn({index:e,label:m(t,e,g),value:t,perc:e?r(t):0,perc2:e===i?1:r(g[e+1])}))),u.source=c,u.add=c,this.value=c,u}});const pO=t=>t.source.x,mO=t=>t.source.y,gO=t=>t.target.x,bO=t=>t.target.y;function yO(t){Vr.call(this,{},t)}yO.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(Ue["v"])(yO,Vr,{transform(t,e){var n=t.sourceX||pO,r=t.sourceY||mO,i=t.targetX||gO,a=t.targetY||bO,o=t.as||"path",s=t.orient||"vertical",u=t.shape||"line",c=FO.get(u+"-"+s)||FO.get(u);return c||Object(Ue["k"])("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,t=>{t[o]=c(n(t),r(t),i(t),a(t))}),e.reflow(t.modified()).modifies(o)}});const vO=(t,e,n,r)=>"M"+t+","+e+"L"+n+","+r,xO=(t,e,n,r)=>vO(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),wO=(t,e,n,r)=>{var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a)/2,s=180*Math.atan2(a,i)/Math.PI;return"M"+t+","+e+"A"+o+","+o+" "+s+" 0 1 "+n+","+r},OO=(t,e,n,r)=>wO(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),_O=(t,e,n,r)=>{const i=n-t,a=r-e,o=.2*(i+a),s=.2*(a-i);return"M"+t+","+e+"C"+(t+o)+","+(e+s)+" "+(n+s)+","+(r-o)+" "+n+","+r},AO=(t,e,n,r)=>_O(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),jO=(t,e,n,r)=>"M"+t+","+e+"V"+r+"H"+n,kO=(t,e,n,r)=>"M"+t+","+e+"H"+n+"V"+r,CO=(t,e,n,r)=>{const i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*a+"A"+e+","+e+" 0 0,"+(u?1:0)+" "+e*o+","+e*s+"L"+r*o+","+r*s},EO=(t,e,n,r)=>{const i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},SO=(t,e,n,r)=>{const i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},DO=(t,e,n,r)=>{const i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),u=(e+r)/2;return"M"+e*i+","+e*a+"C"+u*i+","+u*a+" "+u*o+","+u*s+" "+r*o+","+r*s},FO=Object(Ue["p"])({line:vO,"line-radial":xO,arc:wO,"arc-radial":OO,curve:_O,"curve-radial":AO,"orthogonal-horizontal":jO,"orthogonal-vertical":kO,"orthogonal-radial":CO,"diagonal-horizontal":EO,"diagonal-vertical":SO,"diagonal-radial":DO});function NO(t){Vr.call(this,null,t)}NO.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(Ue["v"])(NO,Vr,{transform(t,e){var n,r,i,a=t.as||["startAngle","endAngle"],o=a[0],s=a[1],u=t.field||Ue["M"],c=t.startAngle||0,l=null!=t.endAngle?t.endAngle:2*Math.PI,f=e.source,d=f.map(u),h=d.length,p=c,m=(l-c)/sO(d),g=ua(h);for(t.sort&&g.sort((t,e)=>d[t]-d[e]),n=0;n<h;++n)i=d[g[n]],r=f[g[n]],r[o]=p,r[s]=p+=i*m;return this.value=d,e.reflow(t.modified()).modifies(a)}});const TO=5;function MO(t){const e=t.type;return!t.bins&&(e===Wd||e===Vd||e===Gd)}function IO(t){return Ah(t)&&t!==Kd}const RO=Object(Ue["ab"])(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function $O(t){Vr.call(this,null,t),this.modified(!0)}function BO(t){var e,n=t.type,r="";return n===Kd?Kd+"-"+Wd:(zO(t)&&(e=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0,r=2===e?Kd+"-":3===e?Jd+"-":""),(r+n||Wd).toLowerCase())}function zO(t){const e=t.type;return Ah(e)&&e!==Xd&&e!==Yd&&(t.scheme||t.range&&t.range.length&&t.range.every(Ue["F"]))}function LO(t,e,n){const r=PO(t,e.domainRaw,n);if(r>-1)return r;var i,a,o=e.domain,s=t.type,u=e.zero||void 0===e.zero&&MO(t);if(!o)return 0;if(IO(s)&&e.padding&&o[0]!==Object(Ue["S"])(o)&&(o=UO(s,o,e.range,e.padding,e.exponent,e.constant)),(u||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(o=o.slice()).length-1||1,u&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=e.domainMin&&(o[0]=e.domainMin),null!=e.domainMax&&(o[i]=e.domainMax),null!=e.domainMid)){a=e.domainMid;const t=a>o[i]?i+1:a<o[0]?0:i;t!==i&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(t,0,a)}return t.domain(WO(s,o,n)),s===eh&&t.unknown(e.domainImplicit?Yu:void 0),e.nice&&t.nice&&t.nice(!0!==e.nice&&Kh(t,e.nice)||null),o.length}function PO(t,e,n){return e?(t.domain(WO(t.type,e,n)),e.length):-1}function UO(t,e,n,r,i,a){var o=Math.abs(Object(Ue["S"])(n)-n[0]),s=o/(o-2*r),u=t===qd?Object(Ue["ib"])(e,null,s):t===Gd?Object(Ue["jb"])(e,null,s,.5):t===Vd?Object(Ue["jb"])(e,null,s,i||1):t===Hd?Object(Ue["kb"])(e,null,s,a||1):Object(Ue["hb"])(e,null,s);return e=e.slice(),e[0]=u[0],e[e.length-1]=u[1],e}function WO(t,e,n){if(Ch(t)){var r=Math.abs(e.reduce((t,e)=>t+(e<0?-1:e>0?1:0),0));r!==e.length&&n.warn("Log scale domain includes zero: "+Object(Ue["W"])(e))}return e}function qO(t,e,n){let r=e.bins;if(r&&!Object(Ue["x"])(r)){const e=t.domain(),n=e[0],i=Object(Ue["S"])(e),a=r.step;let o=null==r.start?n:r.start,s=null==r.stop?i:r.stop;a||Object(Ue["k"])("Scale bins parameter missing step property."),o<n&&(o=a*Math.ceil(n/a)),s>i&&(s=a*Math.floor(i/a)),r=ua(o,s+a/2,a)}return r?t.bins=r:t.bins&&delete t.bins,t.type===ih&&(r?e.domain||e.domainRaw||(t.domain(r),n=r.length):t.bins=t.domain()),n}function VO(t,e,n){var r=t.type,i=e.round||!1,a=e.range;if(null!=e.rangeStep)a=GO(r,e,n);else if(e.scheme&&(a=HO(r,e,n),Object(Ue["A"])(a))){if(t.interpolator)return t.interpolator(a);Object(Ue["k"])("Scale type ".concat(r," does not support interpolating color schemes."))}if(a&&Sh(r))return t.interpolator(Th(YO(a,e.reverse),e.interpolate,e.interpolateGamma));a&&e.interpolate&&t.interpolate?t.interpolate(Rh(e.interpolate,e.interpolateGamma)):Object(Ue["A"])(t.round)?t.round(i):Object(Ue["A"])(t.rangeRound)&&t.interpolate(i?cl:ul),a&&t.range(YO(a,e.reverse))}function GO(t,e,n){t!==rh&&t!==nh&&Object(Ue["k"])("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===nh?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*Pd(n,i,r)]}function HO(t,e,n){var r,i,a=e.schemeExtent;return Object(Ue["x"])(e.scheme)?i=Th(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),i=Wh(r),i||Object(Ue["k"])("Unrecognized scheme name: ".concat(e.scheme))),n=t===th?n+1:t===ih?n-1:t===Zd||t===Qd?+e.schemeCount||TO:n,Sh(t)?XO(i,a,e.reverse):Object(Ue["A"])(i)?Mh(XO(i,a),n):t===eh?i:i.slice(0,n)}function XO(t,e,n){return Object(Ue["A"])(t)&&(e||n)?Nh(t,YO(e||[0,1],n)):t}function YO(t,e){return e?t.slice().reverse():t}function KO(t){Vr.call(this,null,t)}Object(Ue["v"])($O,Vr,{transform(t,e){var n=e.dataflow,r=this.value,i=BO(t);for(i in r&&i===r.type||(this.value=r=wh(i)()),t)if(!RO[i]){if("padding"===i&&IO(r.type))continue;Object(Ue["A"])(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return VO(r,t,qO(r,t,LO(r,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),Object(Ue["v"])(KO,Vr,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(Rn(t.sort)),this.modified(n),e}});const JO="zero",ZO="center",QO="normalize",t_=["y0","y1"];function e_(t){Vr.call(this,null,t)}function n_(t,e,n,r,i){for(var a,o=(e-t.sum)/2,s=t.length,u=0;u<s;++u)a=t[u],a[r]=o,a[i]=o+=Math.abs(n(a))}function r_(t,e,n,r,i){for(var a,o=1/t.sum,s=0,u=t.length,c=0,l=0;c<u;++c)a=t[c],a[r]=s,a[i]=s=o*(l+=Math.abs(n(a)))}function i_(t,e,n,r,i){for(var a,o,s=0,u=0,c=t.length,l=0;l<c;++l)o=t[l],a=+n(o),a<0?(o[r]=u,o[i]=u+=a):(o[r]=s,o[i]=s+=a)}function a_(t,e,n,r){var i,a,o,s,u,c,l,f,d,h=[],p=t=>t(u);if(null==e)h.push(t.slice());else for(i={},a=0,o=t.length;a<o;++a)u=t[a],c=e.map(p),l=i[c],l||(i[c]=l=[],h.push(l)),l.push(u);for(c=0,d=0,s=h.length;c<s;++c){for(l=h[c],a=0,f=0,o=l.length;a<o;++a)f+=Math.abs(r(l[a]));l.sum=f,f>d&&(d=f),n&&l.sort(n)}return h.max=d,h}e_.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:JO,values:[JO,ZO,QO]},{name:"as",type:"string",array:!0,length:2,default:t_}]},Object(Ue["v"])(e_,Vr,{transform(t,e){var n,r,i,a,o=t.as||t_,s=o[0],u=o[1],c=Rn(t.sort),l=t.field||Ue["M"],f=t.offset===ZO?n_:t.offset===QO?r_:i_;for(n=a_(e.source,t.groupby,c,l),r=0,i=n.length,a=n.max;r<i;++r)f(n[r],a,l,s,u);return e.reflow(t.modified()).modifies(o)}});var o_=t=>t;function s_(t,e){t&&c_.hasOwnProperty(t.type)&&c_[t.type](t,e)}var u_={Feature:function(t,e){s_(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,r=-1,i=n.length;while(++r<i)s_(n[r].geometry,e)}},c_={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){l_(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)l_(n[r],e,0)},Polygon:function(t,e){f_(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)f_(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,r=-1,i=n.length;while(++r<i)s_(n[r],e)}};function l_(t,e,n){var r,i=-1,a=t.length-n;e.lineStart();while(++i<a)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function f_(t,e){var n=-1,r=t.length;e.polygonStart();while(++n<r)l_(t[n],e,1);e.polygonEnd()}var d_=function(t,e){t&&u_.hasOwnProperty(t.type)?u_[t.type](t,e):s_(t,e)};class h_{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(e[n++]=o),t=a}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,a=0;if(i>0){a=t[--i];while(i>0)if(e=a,n=t[--i],a=e+n,r=n-(a-e),r)break;i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=a+n,n==e-a&&(a=e))}return a}}var p_=1e-6,m_=1e-12,g_=Math.PI,b_=g_/2,y_=g_/4,v_=2*g_,x_=180/g_,w_=g_/180,O_=Math.abs,__=Math.atan,A_=Math.atan2,j_=Math.cos,k_=Math.ceil,C_=Math.exp,E_=(Math.floor,Math.hypot),S_=Math.log,D_=Math.pow,F_=Math.sin,N_=Math.sign||function(t){return t>0?1:t<0?-1:0},T_=Math.sqrt,M_=Math.tan;function I_(t){return t>1?0:t<-1?g_:Math.acos(t)}function R_(t){return t>1?b_:t<-1?-b_:Math.asin(t)}function $_(){}var B_,z_,L_,P_,U_=new h_,W_=new h_,q_={point:$_,lineStart:$_,lineEnd:$_,polygonStart:function(){q_.lineStart=V_,q_.lineEnd=X_},polygonEnd:function(){q_.lineStart=q_.lineEnd=q_.point=$_,U_.add(O_(W_)),W_=new h_},result:function(){var t=U_/2;return U_=new h_,t}};function V_(){q_.point=G_}function G_(t,e){q_.point=H_,B_=L_=t,z_=P_=e}function H_(t,e){W_.add(P_*t-L_*e),L_=t,P_=e}function X_(){H_(B_,z_)}var Y_=q_,K_=1/0,J_=K_,Z_=-K_,Q_=Z_,tA={point:eA,lineStart:$_,lineEnd:$_,polygonStart:$_,polygonEnd:$_,result:function(){var t=[[K_,J_],[Z_,Q_]];return Z_=Q_=-(J_=K_=1/0),t}};function eA(t,e){t<K_&&(K_=t),t>Z_&&(Z_=t),e<J_&&(J_=e),e>Q_&&(Q_=e)}var nA,rA,iA,aA,oA=tA,sA=0,uA=0,cA=0,lA=0,fA=0,dA=0,hA=0,pA=0,mA=0,gA={point:bA,lineStart:yA,lineEnd:wA,polygonStart:function(){gA.lineStart=OA,gA.lineEnd=_A},polygonEnd:function(){gA.point=bA,gA.lineStart=yA,gA.lineEnd=wA},result:function(){var t=mA?[hA/mA,pA/mA]:dA?[lA/dA,fA/dA]:cA?[sA/cA,uA/cA]:[NaN,NaN];return sA=uA=cA=lA=fA=dA=hA=pA=mA=0,t}};function bA(t,e){sA+=t,uA+=e,++cA}function yA(){gA.point=vA}function vA(t,e){gA.point=xA,bA(iA=t,aA=e)}function xA(t,e){var n=t-iA,r=e-aA,i=T_(n*n+r*r);lA+=i*(iA+t)/2,fA+=i*(aA+e)/2,dA+=i,bA(iA=t,aA=e)}function wA(){gA.point=bA}function OA(){gA.point=AA}function _A(){jA(nA,rA)}function AA(t,e){gA.point=jA,bA(nA=iA=t,rA=aA=e)}function jA(t,e){var n=t-iA,r=e-aA,i=T_(n*n+r*r);lA+=i*(iA+t)/2,fA+=i*(aA+e)/2,dA+=i,i=aA*t-iA*e,hA+=i*(iA+t),pA+=i*(aA+e),mA+=3*i,bA(iA=t,aA=e)}var kA=gA;function CA(t){this._context=t}CA.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,v_);break}},result:$_};var EA,SA,DA,FA,NA,TA=new h_,MA={point:$_,lineStart:function(){MA.point=IA},lineEnd:function(){EA&&RA(SA,DA),MA.point=$_},polygonStart:function(){EA=!0},polygonEnd:function(){EA=null},result:function(){var t=+TA;return TA=new h_,t}};function IA(t,e){MA.point=RA,SA=FA=t,DA=NA=e}function RA(t,e){FA-=t,NA-=e,TA.add(T_(FA*FA+NA*NA)),FA=t,NA=e}var $A=MA;function BA(){this._string=[]}function zA(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}BA.prototype={_radius:4.5,_circle:zA(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=zA(this._radius)),this._string.push("M",t,",",e,this._circle);break}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var LA=function(t,e){var n,r,i=4.5;function a(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),d_(t,n(r))),r.result()}return a.area=function(t){return d_(t,n(Y_)),Y_.result()},a.measure=function(t){return d_(t,n($A)),$A.result()},a.bounds=function(t){return d_(t,n(oA)),oA.result()},a.centroid=function(t){return d_(t,n(kA)),kA.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,o_):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new BA):new CA(e=t),"function"!==typeof i&&r.pointRadius(i),a):e},a.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),a):i},a.projection(t).context(e)},PA=function(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:$_,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},UA=function(t,e){return O_(t[0]-e[0])<p_&&O_(t[1]-e[1])<p_};function WA(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var qA=function(t,e,n,r,i){var a,o,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(UA(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2*p_}s.push(n=new WA(r,t,null,!0)),u.push(n.o=new WA(r,null,n,!1)),s.push(n=new WA(o,t,null,!1)),u.push(n.o=new WA(o,null,n,!0))}})),s.length){for(u.sort(e),VA(s),VA(u),a=0,o=u.length;a<o;++a)u[a].e=n=!n;var c,l,f=s[0];while(1){var d=f,h=!0;while(d.v)if((d=d.n)===f)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=c.length;a<o;++a)i.point((l=c[a])[0],l[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((l=c[a])[0],l[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}};function VA(t){if(e=t.length){var e,n,r=0,i=t[0];while(++r<e)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function GA(t){return[A_(t[1],t[0]),R_(t[2])]}function HA(t){var e=t[0],n=t[1],r=j_(n);return[r*j_(e),r*F_(e),F_(n)]}function XA(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function YA(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function KA(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function JA(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ZA(t){var e=T_(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function QA(t){return O_(t[0])<=g_?t[0]:N_(t[0])*((O_(t[0])+g_)%v_-g_)}var tj=function(t,e){var n=QA(e),r=e[1],i=F_(r),a=[F_(n),-j_(n),0],o=0,s=0,u=new h_;1===i?r=b_+p_:-1===i&&(r=-b_-p_);for(var c=0,l=t.length;c<l;++c)if(d=(f=t[c]).length)for(var f,d,h=f[d-1],p=QA(h),m=h[1]/2+y_,g=F_(m),b=j_(m),y=0;y<d;++y,p=x,g=O,b=_,h=v){var v=f[y],x=QA(v),w=v[1]/2+y_,O=F_(w),_=j_(w),A=x-p,j=A>=0?1:-1,k=j*A,C=k>g_,E=g*O;if(u.add(A_(E*j*F_(k),b*_+E*j_(k))),o+=C?A+j*v_:A,C^p>=n^x>=n){var S=YA(HA(h),HA(v));ZA(S);var D=YA(a,S);ZA(D);var F=(C^A>=0?-1:1)*R_(D[2]);(r>F||r===F&&(S[0]||S[1]))&&(s+=C^A>=0?1:-1)}}return(o<-p_||o<p_&&u<-m_)^1&s};function*ej(t){for(const e of t)yield*e}function nj(t){return Array.from(ej(t))}var rj=function(t,e,n,r){return function(i){var a,o,s,u=e(i),c=PA(),l=e(c),f=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=b,d.lineStart=y,d.lineEnd=v,o=[],a=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,o=nj(o);var t=tj(a,r);o.length?(f||(i.polygonStart(),f=!0),qA(o,aj,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function m(){d.point=p,u.lineStart()}function g(){d.point=h,u.lineEnd()}function b(t,e){s.push([t,e]),l.point(t,e)}function y(){l.lineStart(),s=[]}function v(){b(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),d=c.result(),h=d.length;if(s.pop(),a.push(s),s=null,h)if(1&u){if(n=d[0],(e=n.length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),o.push(d.filter(ij))}return d}};function ij(t){return t.length>1}function aj(t,e){return((t=t.x)[0]<0?t[1]-b_-p_:b_-t[1])-((e=e.x)[0]<0?e[1]-b_-p_:b_-e[1])}var oj=rj((function(){return!0}),sj,cj,[-g_,-b_]);function sj(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?g_:-g_,u=O_(a-n);O_(u-g_)<p_?(t.point(n,r=(r+o)/2>0?b_:-b_),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=g_&&(O_(n-i)<p_&&(n-=i*p_),O_(a-s)<p_&&(a-=s*p_),r=uj(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function uj(t,e,n,r){var i,a,o=F_(t-n);return O_(o)>p_?__((F_(e)*(a=j_(r))*F_(n)-F_(r)*(i=j_(e))*F_(t))/(i*a*o)):(e+r)/2}function cj(t,e,n,r){var i;if(null==t)i=n*b_,r.point(-g_,i),r.point(0,i),r.point(g_,i),r.point(g_,0),r.point(g_,-i),r.point(0,-i),r.point(-g_,-i),r.point(-g_,0),r.point(-g_,i);else if(O_(t[0]-e[0])>p_){var a=t[0]<e[0]?g_:-g_;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}var lj=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n};function fj(t,e){return[O_(t)>g_?t+Math.round(-t/v_)*v_:t,e]}function dj(t,e,n){return(t%=v_)?e||n?lj(pj(t),mj(e,n)):pj(t):e||n?mj(e,n):fj}function hj(t){return function(e,n){return e+=t,[e>g_?e-v_:e<-g_?e+v_:e,n]}}function pj(t){var e=hj(t);return e.invert=hj(-t),e}function mj(t,e){var n=j_(t),r=F_(t),i=j_(e),a=F_(e);function o(t,e){var o=j_(e),s=j_(t)*o,u=F_(t)*o,c=F_(e),l=c*n+s*r;return[A_(u*i-l*a,s*n-c*r),R_(l*i+u*a)]}return o.invert=function(t,e){var o=j_(e),s=j_(t)*o,u=F_(t)*o,c=F_(e),l=c*i-u*a;return[A_(u*i+c*a,s*n+l*r),R_(l*n-s*r)]},o}fj.invert=fj;var gj=function(t){function e(e){return e=t(e[0]*w_,e[1]*w_),e[0]*=x_,e[1]*=x_,e}return t=dj(t[0]*w_,t[1]*w_,t.length>2?t[2]*w_:0),e.invert=function(e){return e=t.invert(e[0]*w_,e[1]*w_),e[0]*=x_,e[1]*=x_,e},e};function bj(t,e,n,r,i,a){if(n){var o=j_(e),s=F_(e),u=r*n;null==i?(i=e+r*v_,a=e-u/2):(i=yj(o,i),a=yj(o,a),(r>0?i<a:i>a)&&(i+=r*v_));for(var c,l=i;r>0?l>a:l<a;l-=u)c=GA([o,-s*j_(l),-s*F_(l)]),t.point(c[0],c[1])}}function yj(t,e){e=HA(e),e[0]-=t,ZA(e);var n=I_(-e[1]);return((-e[2]<0?-n:n)+v_-p_)%v_}var vj=function(t){var e=j_(t),n=6*w_,r=e>0,i=O_(e)>p_;function a(e,r,i,a){bj(a,t,n,i,e,r)}function o(t,n){return j_(t)*j_(n)>e}function s(t){var e,n,a,s,l;return{lineStart:function(){s=a=!1,l=1},point:function(f,d){var h,p=[f,d],m=o(f,d),g=r?m?0:c(f,d):m?c(f+(f<0?g_:-g_),d):0;if(!e&&(s=a=m)&&t.lineStart(),m!==a&&(h=u(e,p),(!h||UA(e,h)||UA(p,h))&&(p[2]=1)),m!==a)l=0,m?(t.lineStart(),h=u(p,e),t.point(h[0],h[1])):(h=u(e,p),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(i&&e&&r^m){var b;g&n||!(b=u(p,e,!0))||(l=0,r?(t.lineStart(),t.point(b[0][0],b[0][1]),t.point(b[1][0],b[1][1]),t.lineEnd()):(t.point(b[1][0],b[1][1]),t.lineEnd(),t.lineStart(),t.point(b[0][0],b[0][1],3)))}!m||e&&UA(e,p)||t.point(p[0],p[1]),e=p,a=m,n=g},lineEnd:function(){a&&t.lineEnd(),e=null},clean:function(){return l|(s&&a)<<1}}}function u(t,n,r){var i=HA(t),a=HA(n),o=[1,0,0],s=YA(i,a),u=XA(s,s),c=s[0],l=u-c*c;if(!l)return!r&&t;var f=e*u/l,d=-e*c/l,h=YA(o,s),p=JA(o,f),m=JA(s,d);KA(p,m);var g=h,b=XA(p,g),y=XA(g,g),v=b*b-y*(XA(p,p)-1);if(!(v<0)){var x=T_(v),w=JA(g,(-b-x)/y);if(KA(w,p),w=GA(w),!r)return w;var O,_=t[0],A=n[0],j=t[1],k=n[1];A<_&&(O=_,_=A,A=O);var C=A-_,E=O_(C-g_)<p_,S=E||C<p_;if(!E&&k<j&&(O=j,j=k,k=O),S?E?j+k>0^w[1]<(O_(w[0]-_)<p_?j:k):j<=w[1]&&w[1]<=k:C>g_^(_<=w[0]&&w[0]<=A)){var D=JA(g,(-b+x)/y);return KA(D,p),[w,GA(D)]}}}function c(e,n){var i=r?t:g_-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return rj(o,s,a,r?[0,-t]:[-g_,t-g_])},xj=function(t,e,n,r,i,a){var o,s=t[0],u=t[1],c=e[0],l=e[1],f=0,d=1,h=c-s,p=l-u;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>f&&(f=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<d&&(d=o)}if(o=r-u,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>f&&(f=o)}if(o=a-u,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<d&&(d=o)}return f>0&&(t[0]=s+f*h,t[1]=u+f*p),d<1&&(e[0]=s+d*h,e[1]=u+d*p),!0}}}}},wj=1e9,Oj=-wj;function _j(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,c){var l=0,f=0;if(null==i||(l=o(i,s))!==(f=o(a,s))||u(i,a)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(a[0],a[1])}function o(r,i){return O_(r[0]-t)<p_?i>0?0:3:O_(r[0]-n)<p_?i>0?2:1:O_(r[1]-e)<p_?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var u,c,l,f,d,h,p,m,g,b,y,v=o,x=PA(),w={point:O,lineStart:k,lineEnd:C,polygonStart:A,polygonEnd:j};function O(t,e){i(t,e)&&v.point(t,e)}function _(){for(var e=0,n=0,i=c.length;n<i;++n)for(var a,o,s=c[n],u=1,l=s.length,f=s[0],d=f[0],h=f[1];u<l;++u)a=d,o=h,f=s[u],d=f[0],h=f[1],o<=r?h>r&&(d-a)*(r-o)>(h-o)*(t-a)&&++e:h<=r&&(d-a)*(r-o)<(h-o)*(t-a)&&--e;return e}function A(){v=x,u=[],c=[],y=!0}function j(){var t=_(),e=y&&t,n=(u=nj(u)).length;(e||n)&&(o.polygonStart(),e&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),n&&qA(u,s,t,a,o),o.polygonEnd()),v=o,u=c=l=null}function k(){w.point=E,c&&c.push(l=[]),b=!0,g=!1,p=m=NaN}function C(){u&&(E(f,d),h&&g&&x.rejoin(),u.push(x.result())),w.point=O,g&&v.lineEnd()}function E(a,o){var s=i(a,o);if(c&&l.push([a,o]),b)f=a,d=o,h=s,b=!1,s&&(v.lineStart(),v.point(a,o));else if(s&&g)v.point(a,o);else{var u=[p=Math.max(Oj,Math.min(wj,p)),m=Math.max(Oj,Math.min(wj,m))],x=[a=Math.max(Oj,Math.min(wj,a)),o=Math.max(Oj,Math.min(wj,o))];xj(u,x,t,e,n,r)?(g||(v.lineStart(),v.point(u[0],u[1])),v.point(x[0],x[1]),s||v.lineEnd(),y=!1):s&&(v.lineStart(),v.point(a,o),y=!1)}p=a,m=o,g=s}return w}}function Aj(t){return function(e){var n=new jj;for(var r in t)n[r]=t[r];return n.stream=e,n}}function jj(){}function kj(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),d_(n,t.stream(oA)),e(oA.result()),null!=r&&t.clipExtent(r),t}function Cj(t,e,n){return kj(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])}),n)}function Ej(t,e,n){return Cj(t,[[0,0],e],n)}function Sj(t,e,n){return kj(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])}),n)}function Dj(t,e,n){return kj(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])}),n)}jj.prototype={constructor:jj,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Fj=16,Nj=j_(30*w_),Tj=function(t,e){return+e?Ij(t,e):Mj(t)};function Mj(t){return Aj({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Ij(t,e){function n(r,i,a,o,s,u,c,l,f,d,h,p,m,g){var b=c-r,y=l-i,v=b*b+y*y;if(v>4*e&&m--){var x=o+d,w=s+h,O=u+p,_=T_(x*x+w*w+O*O),A=R_(O/=_),j=O_(O_(O)-1)<p_||O_(a-f)<p_?(a+f)/2:A_(w,x),k=t(j,A),C=k[0],E=k[1],S=C-r,D=E-i,F=y*S-b*D;(F*F/v>e||O_((b*S+y*D)/v-.5)>.3||o*d+s*h+u*p<Nj)&&(n(r,i,a,o,s,u,C,E,j,x/=_,w/=_,O,m,g),g.point(C,E),n(C,E,j,x,w,O,c,l,f,d,h,p,m,g))}}return function(e){var r,i,a,o,s,u,c,l,f,d,h,p,m={point:g,lineStart:b,lineEnd:v,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=b}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function b(){l=NaN,m.point=y,e.lineStart()}function y(r,i){var a=HA([r,i]),o=t(r,i);n(l,f,c,d,h,p,l=o[0],f=o[1],c=r,d=a[0],h=a[1],p=a[2],Fj,e),e.point(l,f)}function v(){m.point=g,e.lineEnd()}function x(){b(),m.point=w,m.lineEnd=O}function w(t,e){y(r=t,e),i=l,a=f,o=d,s=h,u=p,m.point=y}function O(){n(l,f,c,d,h,p,i,a,r,o,s,u,Fj,e),m.lineEnd=v,v()}return m}}var Rj=Aj({point:function(t,e){this.stream.point(t*w_,e*w_)}});function $j(t){return Aj({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Bj(t,e,n,r,i){function a(a,o){return a*=r,o*=i,[e+t*a,n-t*o]}return a.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},a}function zj(t,e,n,r,i,a){if(!a)return Bj(t,e,n,r,i);var o=j_(a),s=F_(a),u=o*t,c=s*t,l=o/t,f=s/t,d=(s*n-o*e)/t,h=(s*e+o*n)/t;function p(t,a){return t*=r,a*=i,[u*t-c*a+e,n-c*t-u*a]}return p.invert=function(t,e){return[r*(l*t-f*e+d),i*(h-f*t-l*e)]},p}function Lj(t){return Pj((function(){return t}))()}function Pj(t){var e,n,r,i,a,o,s,u,c,l,f=150,d=480,h=250,p=0,m=0,g=0,b=0,y=0,v=0,x=1,w=1,O=null,_=oj,A=null,j=o_,k=.5;function C(t){return u(t[0]*w_,t[1]*w_)}function E(t){return t=u.invert(t[0],t[1]),t&&[t[0]*x_,t[1]*x_]}function S(){var t=zj(f,0,0,x,w,v).apply(null,e(p,m)),r=zj(f,d-t[0],h-t[1],x,w,v);return n=dj(g,b,y),s=lj(e,r),u=lj(n,s),o=Tj(s,k),D()}function D(){return c=l=null,C}return C.stream=function(t){return c&&l===t?c:c=Rj($j(n)(_(o(j(l=t)))))},C.preclip=function(t){return arguments.length?(_=t,O=void 0,D()):_},C.postclip=function(t){return arguments.length?(j=t,A=r=i=a=null,D()):j},C.clipAngle=function(t){return arguments.length?(_=+t?vj(O=t*w_):(O=null,oj),D()):O*x_},C.clipExtent=function(t){return arguments.length?(j=null==t?(A=r=i=a=null,o_):_j(A=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),D()):null==A?null:[[A,r],[i,a]]},C.scale=function(t){return arguments.length?(f=+t,S()):f},C.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],S()):[d,h]},C.center=function(t){return arguments.length?(p=t[0]%360*w_,m=t[1]%360*w_,S()):[p*x_,m*x_]},C.rotate=function(t){return arguments.length?(g=t[0]%360*w_,b=t[1]%360*w_,y=t.length>2?t[2]%360*w_:0,S()):[g*x_,b*x_,y*x_]},C.angle=function(t){return arguments.length?(v=t%360*w_,S()):v*x_},C.reflectX=function(t){return arguments.length?(x=t?-1:1,S()):x<0},C.reflectY=function(t){return arguments.length?(w=t?-1:1,S()):w<0},C.precision=function(t){return arguments.length?(o=Tj(s,k=t*t),D()):T_(k)},C.fitExtent=function(t,e){return Cj(C,t,e)},C.fitSize=function(t,e){return Ej(C,t,e)},C.fitWidth=function(t,e){return Sj(C,t,e)},C.fitHeight=function(t,e){return Dj(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&E,S()}}function Uj(t){var e=0,n=g_/3,r=Pj(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*w_,n=t[1]*w_):[e*x_,n*x_]},i}function Wj(t){var e=j_(t);function n(t,n){return[t*e,F_(n)/e]}return n.invert=function(t,n){return[t/e,R_(n*e)]},n}function qj(t,e){var n=F_(t),r=(n+F_(e))/2;if(O_(r)<p_)return Wj(t);var i=1+n*(2*r-n),a=T_(i)/r;function o(t,e){var n=T_(i-2*r*F_(e))/r;return[n*F_(t*=r),a-n*j_(t)]}return o.invert=function(t,e){var n=a-e,o=A_(t,O_(n))*N_(n);return n*r<0&&(o-=g_*N_(t)*N_(n)),[o/r,R_((i-(t*t+n*n)*r*r)/(2*r))]},o}var Vj=function(){return Uj(qj).scale(155.424).center([0,33.6442])},Gj=function(){return Vj().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Hj(t){var e=t.length;return{point:function(n,r){var i=-1;while(++i<e)t[i].point(n,r)},sphere:function(){var n=-1;while(++n<e)t[n].sphere()},lineStart:function(){var n=-1;while(++n<e)t[n].lineStart()},lineEnd:function(){var n=-1;while(++n<e)t[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<e)t[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<e)t[n].polygonEnd()}}}var Xj=function(){var t,e,n,r,i,a,o=Gj(),s=Vj().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Vj().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){a=[t,e]}};function l(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function f(){return t=e=null,l}return l.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},l.stream=function(n){return t&&e===n?t:t=Hj([o.stream(e=n),s.stream(n),u.stream(n)])},l.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),u.precision(t),f()):o.precision()},l.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),u.scale(t),l.translate(o.translate())):o.scale()},l.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],l=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,l-.238*e],[a+.455*e,l+.238*e]]).stream(c),r=s.translate([a-.307*e,l+.201*e]).clipExtent([[a-.425*e+p_,l+.12*e+p_],[a-.214*e-p_,l+.234*e-p_]]).stream(c),i=u.translate([a-.205*e,l+.212*e]).clipExtent([[a-.214*e+p_,l+.166*e+p_],[a-.115*e-p_,l+.234*e-p_]]).stream(c),f()},l.fitExtent=function(t,e){return Cj(l,t,e)},l.fitSize=function(t,e){return Ej(l,t,e)},l.fitWidth=function(t,e){return Sj(l,t,e)},l.fitHeight=function(t,e){return Dj(l,t,e)},l.scale(1070)};function Yj(t){return function(e,n){var r=j_(e),i=j_(n),a=t(r*i);return a===1/0?[2,0]:[a*i*F_(e),a*F_(n)]}}function Kj(t){return function(e,n){var r=T_(e*e+n*n),i=t(r),a=F_(i),o=j_(i);return[A_(e*a,r*o),R_(r&&n*a/r)]}}var Jj=Yj((function(t){return T_(2/(1+t))}));Jj.invert=Kj((function(t){return 2*R_(t/2)}));var Zj=function(){return Lj(Jj).scale(124.75).clipAngle(179.999)},Qj=Yj((function(t){return(t=I_(t))&&t/F_(t)}));Qj.invert=Kj((function(t){return t}));var tk=function(){return Lj(Qj).scale(79.4188).clipAngle(179.999)};function ek(t,e){return[t,S_(M_((b_+e)/2))]}ek.invert=function(t,e){return[t,2*__(C_(e))-b_]};var nk=function(){return rk(ek).scale(961/v_)};function rk(t){var e,n,r,i=Lj(t),a=i.center,o=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var a=g_*o(),s=i(gj(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===ek?[[Math.max(s[0]-a,c),e],[Math.min(s[0]+a,n),r]]:[[c,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),l()):o()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(a(t),l()):a()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function ik(t){return M_((b_+t)/2)}function ak(t,e){var n=j_(t),r=t===e?F_(t):S_(n/j_(e))/S_(ik(e)/ik(t)),i=n*D_(ik(t),r)/r;if(!r)return ek;function a(t,e){i>0?e<-b_+p_&&(e=-b_+p_):e>b_-p_&&(e=b_-p_);var n=i/D_(ik(e),r);return[n*F_(r*t),i-n*j_(r*t)]}return a.invert=function(t,e){var n=i-e,a=N_(r)*T_(t*t+n*n),o=A_(t,O_(n))*N_(n);return n*r<0&&(o-=g_*N_(t)*N_(n)),[o/r,2*__(D_(i/a,1/r))-b_]},a}var ok=function(){return Uj(ak).scale(109.5).parallels([30,30])};function sk(t,e){return[t,e]}sk.invert=sk;var uk=function(){return Lj(sk).scale(152.63)};function ck(t,e){var n=j_(t),r=t===e?F_(t):(n-j_(e))/(e-t),i=n/r+t;if(O_(r)<p_)return sk;function a(t,e){var n=i-e,a=r*t;return[n*F_(a),i-n*j_(a)]}return a.invert=function(t,e){var n=i-e,a=A_(t,O_(n))*N_(n);return n*r<0&&(a-=g_*N_(t)*N_(n)),[a/r,i-N_(r)*T_(t*t+n*n)]},a}var lk=function(){return Uj(ck).scale(131.154).center([0,13.9389])},fk=1.340264,dk=-.081106,hk=893e-6,pk=.003796,mk=T_(3)/2,gk=12;function bk(t,e){var n=R_(mk*F_(e)),r=n*n,i=r*r*r;return[t*j_(n)/(mk*(fk+3*dk*r+i*(7*hk+9*pk*r))),n*(fk+dk*r+i*(hk+pk*r))]}bk.invert=function(t,e){for(var n,r,i,a=e,o=a*a,s=o*o*o,u=0;u<gk;++u)if(r=a*(fk+dk*o+s*(hk+pk*o))-e,i=fk+3*dk*o+s*(7*hk+9*pk*o),a-=n=r/i,o=a*a,s=o*o*o,O_(n)<m_)break;return[mk*t*(fk+3*dk*o+s*(7*hk+9*pk*o))/j_(a),R_(F_(a)/mk)]};var yk=function(){return Lj(bk).scale(177.158)};function vk(t,e){var n=j_(e),r=j_(t)*n;return[n*F_(t)/r,F_(e)/r]}vk.invert=Kj(__);var xk=function(){return Lj(vk).scale(144.049).clipAngle(60)},wk=function(){var t,e,n,r,i,a,o,s=1,u=0,c=0,l=1,f=1,d=0,h=null,p=1,m=1,g=Aj({point:function(t,e){var n=v([t,e]);this.stream.point(n[0],n[1])}}),b=o_;function y(){return p=s*l,m=s*f,a=o=null,v}function v(n){var r=n[0]*p,i=n[1]*m;if(d){var a=i*t-r*e;r=r*t+i*e,i=a}return[r+u,i+c]}return v.invert=function(n){var r=n[0]-u,i=n[1]-c;if(d){var a=i*t+r*e;r=r*t-i*e,i=a}return[r/p,i/m]},v.stream=function(t){return a&&o===t?a:a=g(b(o=t))},v.postclip=function(t){return arguments.length?(b=t,h=n=r=i=null,y()):b},v.clipExtent=function(t){return arguments.length?(b=null==t?(h=n=r=i=null,o_):_j(h=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==h?null:[[h,n],[r,i]]},v.scale=function(t){return arguments.length?(s=+t,y()):s},v.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],y()):[u,c]},v.angle=function(n){return arguments.length?(d=n%360*w_,e=F_(d),t=j_(d),y()):d*x_},v.reflectX=function(t){return arguments.length?(l=t?-1:1,y()):l<0},v.reflectY=function(t){return arguments.length?(f=t?-1:1,y()):f<0},v.fitExtent=function(t,e){return Cj(v,t,e)},v.fitSize=function(t,e){return Ej(v,t,e)},v.fitWidth=function(t,e){return Sj(v,t,e)},v.fitHeight=function(t,e){return Dj(v,t,e)},v};function Ok(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}Ok.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(O_(n)>p_&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]};var _k=function(){return Lj(Ok).scale(175.295)};function Ak(t,e){return[j_(e)*F_(t),F_(e)]}Ak.invert=Kj(R_);var jk=function(){return Lj(Ak).scale(249.5).clipAngle(90+p_)};function kk(t,e){var n=j_(e),r=1+j_(t)*n;return[n*F_(t)/r,F_(e)/r]}kk.invert=Kj((function(t){return 2*__(t)}));var Ck=function(){return Lj(kk).scale(250).clipAngle(142)};function Ek(t,e){return[S_(M_((b_+e)/2)),-t]}Ek.invert=function(t,e){return[-e,2*__(C_(t))-b_]};var Sk=function(){var t=rk(Ek),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)},Dk=Math.abs,Fk=(Math.atan,Math.atan2,Math.ceil,Math.cos),Nk=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),Tk=(Math.tan,1e-6),Mk=Math.PI,Ik=Mk/2,Rk=(Math.SQRT1_2,Bk(2));Bk(Mk);function $k(t){return t>1?Ik:t<-1?-Ik:Math.asin(t)}function Bk(t){return t>0?Math.sqrt(t):0}function zk(t,e){var n,r=t*Nk(e),i=30;do{e-=n=(e+Nk(e)-r)/(1+Fk(e))}while(Dk(n)>Tk&&--i>0);return e/2}function Lk(t,e,n){function r(r,i){return[t*r*Fk(i=zk(n,i)),e*Nk(i)]}return r.invert=function(r,i){return i=$k(i/e),[r/(t*Fk(i)),$k((2*i+Nk(2*i))/n)]},r}var Pk=Lk(Rk/Ik,Rk,Mk),Uk=function(){return Lj(Pk).scale(169.529)};const Wk=LA(),qk=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Vk(t,e){return function n(){const r=e();return r.type=t,r.path=LA().projection(r),r.copy=r.copy||function(){const t=n();return qk.forEach(e=>{r[e]&&t[e](r[e]())}),t.path.pointRadius(r.path.pointRadius()),t},r}}function Gk(t,e){if(!t||"string"!==typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Xk[t]=Vk(t,e),this):Xk[t]||null}function Hk(t){return t&&t.path||Wk}const Xk={albers:Gj,albersusa:Xj,azimuthalequalarea:Zj,azimuthalequidistant:tk,conicconformal:ok,conicequalarea:Vj,conicequidistant:lk,equalEarth:yk,equirectangular:uk,gnomonic:xk,identity:wk,mercator:nk,mollweide:Uk,naturalEarth1:_k,orthographic:jk,stereographic:Ck,transversemercator:Sk};for(const Set in Xk)Gk(Set,Xk[Set]);function Yk(t,e,n){var r=ua(t,e-p_,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Kk(t,e,n){var r=ua(t,e-p_,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Jk(){var t,e,n,r,i,a,o,s,u,c,l,f,d=10,h=d,p=90,m=360,g=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return ua(k_(r/p)*p,n,p).map(l).concat(ua(k_(s/m)*m,o,m).map(f)).concat(ua(k_(e/d)*d,t,d).filter((function(t){return O_(t%p)>p_})).map(u)).concat(ua(k_(a/h)*h,i,h).filter((function(t){return O_(t%m)>p_})).map(c))}return b.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},b.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(o).slice(1),l(n).reverse().slice(1),f(s).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.extentMajor(t).extentMinor(t):b.extentMinor()},b.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),b.precision(g)):[[r,s],[n,o]]},b.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),b.precision(g)):[[e,a],[t,i]]},b.step=function(t){return arguments.length?b.stepMajor(t).stepMinor(t):b.stepMinor()},b.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],b):[p,m]},b.stepMinor=function(t){return arguments.length?(d=+t[0],h=+t[1],b):[d,h]},b.precision=function(d){return arguments.length?(g=+d,u=Yk(a,i,90),c=Kk(e,t,g),l=Yk(s,o,90),f=Kk(r,n,g),b):g},b.extentMajor([[-180,-90+p_],[180,90-p_]]).extentMinor([[-180,-80-p_],[180,80+p_]])}function Zk(){}const Qk=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function tC(){var t=1,e=1,n=s;function r(t,e){return e.map(e=>i(t,e))}function i(t,e){var r=[],i=[];return a(t,e,a=>{n(a,t,e),eC(a)>0?r.push([a]):i.push(a)}),i.forEach(t=>{for(var e,n=0,i=r.length;n<i;++n)if(-1!==nC((e=r[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:e,coordinates:r}}function a(n,r,i){var a,s,u,c,l,f,d=new Array,h=new Array;a=s=-1,c=n[0]>=r,Qk[c<<1].forEach(p);while(++a<t-1)u=c,c=n[a+1]>=r,Qk[u|c<<1].forEach(p);Qk[c<<0].forEach(p);while(++s<e-1){a=-1,c=n[s*t+t]>=r,l=n[s*t]>=r,Qk[c<<1|l<<2].forEach(p);while(++a<t-1)u=c,c=n[s*t+t+a+1]>=r,f=l,l=n[s*t+a+1]>=r,Qk[u|c<<1|l<<2|f<<3].forEach(p);Qk[c|l<<3].forEach(p)}a=-1,l=n[s*t]>=r,Qk[l<<2].forEach(p);while(++a<t-1)f=l,l=n[s*t+a+1]>=r,Qk[l<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+a,t[0][1]+s],u=[t[1][0]+a,t[1][1]+s],c=o(r),l=o(u);(e=h[c])?(n=d[l])?(delete h[e.end],delete d[n.start],e===n?(e.ring.push(u),i(e.ring)):d[e.start]=h[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[e.end],e.ring.push(u),h[e.end=l]=e):(e=d[l])?(n=h[c])?(delete d[e.start],delete h[n.end],e===n?(e.ring.push(u),i(e.ring)):d[n.start]=h[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(r),d[e.start=c]=e):d[c]=h[l]={start:c,end:l,ring:[r,u]}}Qk[l<<3].forEach(p)}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach(n=>{var a,o=n[0],s=n[1],u=0|o,c=0|s,l=r[c*t+u];o>0&&o<t&&u===o&&(a=r[c*t+u-1],n[0]=o+(i-a)/(l-a)-.5),s>0&&s<e&&c===s&&(a=r[(c-1)*t+u],n[1]=s+(i-a)/(l-a)-.5)})}return r.contour=i,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.floor(n[0]),a=Math.floor(n[1]);return i>=0&&a>=0||Object(Ue["k"])("invalid size"),t=i,e=a,r},r.smooth=function(t){return arguments.length?(n=t?s:Zk,r):n===s},r}function eC(t){var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];while(++e<n)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}function nC(t,e){var n,r=-1,i=e.length;while(++r<i)if(n=rC(t,e[r]))return n;return 0}function rC(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var u=t[a],c=u[0],l=u[1],f=t[s],d=f[0],h=f[1];if(iC(u,f,e))return 0;l>r!==h>r&&n<(d-c)*(r-l)/(h-l)+c&&(i=-i)}return i}function iC(t,e,n){var r;return aC(t,e,n)&&oC(t[r=+(t[0]===e[0])],n[r],e[r])}function aC(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function oC(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function sC(t,e,n){return function(r){var i=Object(Ue["m"])(r),a=n?Math.min(i[0],0):i[0],o=i[1],s=o-a,u=e?Object(Ju["c"])(a,o,t):s/(t+1);return ua(u,o,u)}}function uC(t){Vr.call(this,null,t)}function cC(t,e,n){const r=sC(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(t.map(t=>Kr(e(t).values)))}function lC(t,e,n,r){let i=r.scale||e.scale,a=r.translate||e.translate;if(Object(Ue["A"])(i)&&(i=i(n,r)),Object(Ue["A"])(a)&&(a=a(n,r)),(1===i||null==i)&&!a)return;const o=(Object(Ue["C"])(i)?i:i[0])||1,s=(Object(Ue["C"])(i)?i:i[1])||1,u=a&&a[0]||0,c=a&&a[1]||0;t.forEach(fC(e,o,s,u,c))}function fC(t,e,n,r,i){const a=t.x1||0,o=t.y1||0,s=e*n<0;function u(t){t.forEach(c)}function c(t){s&&t.reverse(),t.forEach(l)}function l(t){t[0]=(t[0]-a)*e+r,t[1]=(t[1]-o)*n+i}return function(t){return t.coordinates.forEach(u),t}}function dC(t,e,n){const r=t>=0?t:li(e,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function hC(t){return Object(Ue["A"])(t)?t:Object(Ue["i"])(+t)}function pC(){var t=t=>t[0],e=t=>t[1],n=Ue["M"],r=[-1,-1],i=960,a=500,o=2;function s(s,u){const c=dC(r[0],s,t)>>o,l=dC(r[1],s,e)>>o,f=c?c+2:0,d=l?l+2:0,h=2*f+(i>>o),p=2*d+(a>>o),m=new Float32Array(h*p),g=new Float32Array(h*p);let b=m;s.forEach(r=>{const i=f+(+t(r)>>o),a=d+(+e(r)>>o);i>=0&&i<h&&a>=0&&a<p&&(m[i+a*h]+=+n(r))}),c>0&&l>0?(mC(h,p,m,g,c),gC(h,p,g,m,l),mC(h,p,m,g,c),gC(h,p,g,m,l),mC(h,p,m,g,c),gC(h,p,g,m,l)):c>0?(mC(h,p,m,g,c),mC(h,p,g,m,c),mC(h,p,m,g,c),b=g):l>0&&(gC(h,p,m,g,l),gC(h,p,g,m,l),gC(h,p,m,g,l),b=g);const y=u?Math.pow(2,-2*o):1/sO(b);for(let t=0,e=h*p;t<e;++t)b[t]*=y;return{values:b,scale:1<<o,width:h,height:p,x1:f,y1:d,x2:f+(i>>o),y2:d+(a>>o)}}return s.x=function(e){return arguments.length?(t=hC(e),s):t},s.y=function(t){return arguments.length?(e=hC(t),s):e},s.weight=function(t){return arguments.length?(n=hC(t),s):n},s.size=function(t){if(!arguments.length)return[i,a];var e=+t[0],n=+t[1];return e>=0&&n>=0||Object(Ue["k"])("invalid size"),i=e,a=n,s},s.cellSize=function(t){return arguments.length?((t=+t)>=1||Object(Ue["k"])("invalid cell size"),o=Math.floor(Math.log(t)/Math.LN2),s):1<<o},s.bandwidth=function(t){return arguments.length?(t=Object(Ue["e"])(t),1===t.length&&(t=[+t[0],+t[0]]),2!==t.length&&Object(Ue["k"])("invalid bandwidth"),r=t,s):r},s}function mC(t,e,n,r,i){const a=1+(i<<1);for(let o=0;o<e;++o)for(let e=0,s=0;e<t+i;++e)e<t&&(s+=n[e+o*t]),e>=i&&(e>=a&&(s-=n[e-a+o*t]),r[e-i+o*t]=s/Math.min(e+1,t-1+a-e,a))}function gC(t,e,n,r,i){const a=1+(i<<1);for(let o=0;o<t;++o)for(let s=0,u=0;s<e+i;++s)s<e&&(u+=n[o+s*t]),s>=i&&(s>=a&&(u-=n[o+(s-a)*t]),r[o+(s-i)*t]=u/Math.min(s+1,e-1+a-s,a))}function bC(t){Vr.call(this,null,t)}uC.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Object(Ue["v"])(uC,Vr,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=t.field||Ue["u"],a=tC().smooth(!1!==t.smooth),o=t.thresholds||cC(r,i,t),s=null===t.as?null:t.as||"contour",u=[];return r.forEach(e=>{const n=i(e),r=a.size([n.width,n.height])(n.values,Object(Ue["x"])(o)?o:o(n.values));lC(r,n,e,t),r.forEach(t=>{u.push(Mn(e,Nn(null!=s?{[s]:t}:t)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}}),bC.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const yC=["x","y","weight","size","cellSize","bandwidth"];function vC(t,e){return yC.forEach(n=>null!=e[n]?t[n](e[n]):0),t}function xC(t,e){var n,r,i,a,o,s,u=[],c=t=>t(a);if(null==e)u.push(t);else for(n={},r=0,i=t.length;r<i;++r)a=t[r],o=e.map(c),s=n[o],s||(n[o]=s=[],s.dims=o,u.push(s)),s.push(a);return u}function wC(t){Vr.call(this,null,t)}Object(Ue["v"])(bC,Vr,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=xC(r,t.groupby),a=(t.groupby||[]).map(Ue["d"]),o=vC(pC(),t),s=t.as||"grid",u=[];function c(t,e){for(let n=0;n<a.length;++n)t[a[n]]=e[n];return t}return u=i.map(e=>Nn(c({[s]:o(e,t.counts)},e.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}}),wC.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Object(Ue["v"])(wC,Vr,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),a=tC().smooth(!1!==t.smooth),o=t.values,s=t.thresholds||sC(t.count||10,t.nice,!!o),u=t.size;return o||(o=e.materialize(e.SOURCE).source,n=vC(pC(),t)(o,!0),r=fC(n,n.scale||1,n.scale||1,0,0),u=[n.width,n.height],o=n.values),s=Object(Ue["x"])(s)?s:s(o),o=a.size(u)(o,s),r&&o.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(o||[]).map(Nn),i}});const OC="Feature",_C="FeatureCollection",AC="MultiPoint";function jC(t){Vr.call(this,null,t)}function kC(t){Vr.call(this,null,t)}function CC(t,e){const n=t.pointRadius();return t.context(null),null!=e&&t.pointRadius(e),n}function EC(t){Vr.call(this,null,t)}function SC(t){Vr.call(this,null,t)}function DC(t,e,n){const r=null==n?n=>t(e(n)):r=>{var i=t.pointRadius(),a=t.pointRadius(n)(e(r));return t.pointRadius(i),a};return r.context=e=>(t.context(e),r),r}function FC(t){Vr.call(this,[],t),this.generator=Jk()}function NC(t){Vr.call(this,null,t)}function TC(t,e){let n;return Object(Ue["A"])(t)?(n=n=>Cc(t(n,e)),n.dep=IC(t)):n=Object(Ue["i"])(Cc(t||"#888")),n}function MC(t,e){let n;return Object(Ue["A"])(t)?(n=n=>t(n,e),n.dep=IC(t)):t?n=Object(Ue["i"])(t):(n=t=>t.$value/t.$max||0,n.dep=!0),n}function IC(t){if(!Object(Ue["A"])(t))return!1;const e=Object(Ue["ab"])(Object(Ue["c"])(t));return e.$x||e.$y||e.$value||e.$max}function RC(t,e,n,r){const i=t.width,a=t.height,o=t.x1||0,s=t.y1||0,u=t.x2||i,c=t.y2||a,l=t.values,f=l?t=>l[t]:Ue["gb"],d=Pu(u-o,c-s),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,c-s),m=p.data;for(let g=s,b=0;g<c;++g){e.$y=g-s;for(let t=o,a=g*i;t<u;++t,b+=4){e.$x=t-o,e.$value=f(t+a);const i=n(e);m[b+0]=i.r,m[b+1]=i.g,m[b+2]=i.b,m[b+3]=~~(255*r(e))}}return h.putImageData(p,0,0),d}function $C(t){Vr.call(this,null,t),this.modified(!0)}function BC(t,e){const n=PC(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function zC(t){const e=Gk((t||"mercator").toLowerCase());return e||Object(Ue["k"])("Unrecognized projection type: "+t),e()}function LC(t,e,n){Object(Ue["A"])(t[e])&&t[e](n)}function PC(t){return t=Object(Ue["e"])(t),1===t.length?t[0]:{type:_C,features:t.reduce((t,e)=>t.concat(UC(e)),[])}}function UC(t){return t.type===_C?t.features:Object(Ue["e"])(t).filter(t=>null!=t).map(t=>t.type===OC?t:{type:OC,geometry:t})}jC.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(Ue["v"])(jC,Vr,{transform(t,e){var n,r=this._features,i=this._points,a=t.fields,o=a&&a[0],s=a&&a[1],u=t.geojson||!a&&Ue["u"],c=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(Object(Ue["c"])(u))||o&&e.modified(Object(Ue["c"])(o))||s&&e.modified(Object(Ue["c"])(s)),this.value&&!n||(c=e.SOURCE,this._features=r=[],this._points=i=[]),u&&e.visit(c,t=>r.push(u(t))),o&&s&&(e.visit(c,t=>{var e=o(t),n=s(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&i.push([e,n])}),r=r.concat({type:OC,geometry:{type:AC,coordinates:i}})),this.value={type:_C,features:r}}}),kC.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(Ue["v"])(kC,Vr,{transform(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||Ue["u"],a=t.as||"path",o=n.SOURCE;!r||t.modified()?(this.value=r=Hk(t.projection),n.materialize().reflow()):o=i===Ue["u"]||e.modified(i.fields)?n.ADD_MOD:n.ADD;const s=CC(r,t.pointRadius);return n.visit(o,t=>t[a]=r(i(t))),r.pointRadius(s),n.modifies(a)}}),EC.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(Ue["v"])(EC,Vr,{transform(t,e){var n,r=t.projection,i=t.fields[0],a=t.fields[1],o=t.as||["x","y"],s=o[0],u=o[1];function c(t){const e=r([i(t),a(t)]);e?(t[s]=e[0],t[u]=e[1]):(t[s]=void 0,t[u]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,c):(n=e.modified(i.fields)||e.modified(a.fields),e.visit(n?e.ADD_MOD:e.ADD,c)),e.modifies(o)}}),SC.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(Ue["v"])(SC,Vr,{transform(t,e){var n=e.fork(e.ALL),r=this.value,i=t.as||"shape",a=n.ADD;return r&&!t.modified()||(this.value=r=DC(Hk(t.projection),t.field||Object(Ue["q"])("datum"),t.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,t=>t[i]=r),n.modifies(i)}}),FC.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(Ue["v"])(FC,Vr,{transform(t,e){var n,r=this.value,i=this.generator;if(!r.length||t.modified())for(const a in t)Object(Ue["A"])(i[a])&&i[a](t[a]);return n=i(),r.length?e.mod.push(In(r[0],n)):e.add.push(Nn(n)),r[0]=n,e}}),NC.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Object(Ue["v"])(NC,Vr,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,r="shared"===t.resolve,i=t.field||Ue["u"],a=MC(t.opacity,t),o=TC(t.color,t),s=t.as||"image",u={$x:0,$y:0,$value:0,$max:r?Kr(n.map(t=>Kr(i(t).values))):0};return n.forEach(t=>{const e=i(t),n=Object(Ue["l"])({},t,u);r||(n.$max=Kr(e.values||[])),t[s]=RC(e,n,o.dep?o:Object(Ue["i"])(o(n)),a.dep?a:Object(Ue["i"])(a(n)))}),e.reflow(!0).modifies(s)}}),Object(Ue["v"])($C,Vr,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=zC(t.type),qk.forEach(e=>{null!=t[e]&&LC(n,e,t[e])})):qk.forEach(e=>{t.modified(e)&&LC(n,e,t[e])}),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&BC(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});var WC=function(t,e){var n,r=1;function i(){var i,a,o=n.length,s=0,u=0;for(i=0;i<o;++i)a=n[i],s+=a.x,u+=a.y;for(s=(s/o-t)*r,u=(u/o-e)*r,i=0;i<o;++i)a=n[i],a.x-=s,a.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i},qC=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return VC(this.cover(e,n),e,n,t)};function VC(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,u,c,l,f,d,h=t._root,p={data:r},m=t._x0,g=t._y0,b=t._x1,y=t._y1;if(!h)return t._root=p,t;while(h.length)if((c=e>=(a=(m+b)/2))?m=a:b=a,(l=n>=(o=(g+y)/2))?g=o:y=o,i=h,!(h=h[f=l<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,h.data),u=+t._y.call(null,h.data),e===s&&n===u)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(a=(m+b)/2))?m=a:b=a,(l=n>=(o=(g+y)/2))?g=o:y=o}while((f=l<<1|c)===(d=(u>=o)<<1|s>=a));return i[d]=h,i[f]=p,t}function GC(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),u=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));if(u>l||c>f)return this;for(this.cover(u,c).cover(l,f),n=0;n<a;++n)VC(this,o[n],s[n],t[n]);return this}var HC=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{var o,s,u=i-n||1,c=this._root;while(n>t||t>=i||r>e||e>=a)switch(s=(e<r)<<1|t<n,o=new Array(4),o[s]=c,c=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},XC=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},YC=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},KC=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},JC=function(t,e,n){var r,i,a,o,s,u,c,l=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],m=this._root;m&&p.push(new KC(m,l,f,d,h)),null==n?n=1/0:(l=t-n,f=e-n,d=t+n,h=e+n,n*=n);while(u=p.pop())if(!(!(m=u.node)||(i=u.x0)>d||(a=u.y0)>h||(o=u.x1)<l||(s=u.y1)<f))if(m.length){var g=(i+o)/2,b=(a+s)/2;p.push(new KC(m[3],g,b,o,s),new KC(m[2],i,b,g,s),new KC(m[1],g,a,o,b),new KC(m[0],i,a,g,b)),(c=(e>=b)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,m.data),v=e-+this._y.call(null,m.data),x=y*y+v*v;if(x<n){var w=Math.sqrt(n=x);l=t-w,f=e-w,d=t+w,h=e+w,r=m.data}}return r},ZC=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,u,c,l,f,d,h=this._root,p=this._x0,m=this._y0,g=this._x1,b=this._y1;if(!h)return this;if(h.length)while(1){if((c=a>=(s=(p+g)/2))?p=s:g=s,(l=o>=(u=(m+b)/2))?m=u:b=u,e=h,!(h=h[f=l<<1|c]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}while(h.data!==t)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)};function QC(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}var tE=function(){return this._root},eE=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},nE=function(t){var e,n,r,i,a,o,s=[],u=this._root;u&&s.push(new KC(u,this._x0,this._y0,this._x1,this._y1));while(e=s.pop())if(!t(u=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&u.length){var c=(r+a)/2,l=(i+o)/2;(n=u[3])&&s.push(new KC(n,c,l,a,o)),(n=u[2])&&s.push(new KC(n,r,l,c,o)),(n=u[1])&&s.push(new KC(n,c,i,a,l)),(n=u[0])&&s.push(new KC(n,r,i,c,l))}return this},rE=function(t){var e,n=[],r=[];this._root&&n.push(new KC(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(o+u)/2,f=(s+c)/2;(a=i[0])&&n.push(new KC(a,o,s,l,f)),(a=i[1])&&n.push(new KC(a,l,s,u,f)),(a=i[2])&&n.push(new KC(a,o,f,l,c)),(a=i[3])&&n.push(new KC(a,l,f,u,c))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this};function iE(t){return t[0]}var aE=function(t){return arguments.length?(this._x=t,this):this._x};function oE(t){return t[1]}var sE=function(t){return arguments.length?(this._y=t,this):this._y};function uE(t,e,n){var r=new cE(null==e?iE:e,null==n?oE:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function cE(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function lE(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var fE=uE.prototype=cE.prototype;fE.copy=function(){var t,e,n=new cE(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=lE(r),n;t=[{source:r,target:n._root=new Array(4)}];while(r=t.pop())for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=lE(e));return n},fE.add=qC,fE.addAll=GC,fE.cover=HC,fE.data=XC,fE.extent=YC,fE.find=JC,fE.remove=ZC,fE.removeAll=QC,fE.root=tE,fE.size=eE,fE.visit=nE,fE.visitAfter=rE,fE.x=aE,fE.y=sE;var dE=function(t){return function(){return t}},hE=function(t){return 1e-6*(t()-.5)};function pE(t){return t.x+t.vx}function mE(t){return t.y+t.vy}var gE=function(t){var e,n,r,i=1,a=1;function o(){for(var t,o,u,c,l,f,d,h=e.length,p=0;p<a;++p)for(o=uE(e,pE,mE).visitAfter(s),t=0;t<h;++t)u=e[t],f=n[u.index],d=f*f,c=u.x+u.vx,l=u.y+u.vy,o.visit(m);function m(t,e,n,a,o){var s=t.data,h=t.r,p=f+h;if(!s)return e>c+p||a<c-p||n>l+p||o<l-p;if(s.index>u.index){var m=c-s.x-s.vx,g=l-s.y-s.vy,b=m*m+g*g;b<p*p&&(0===m&&(m=hE(r),b+=m*m),0===g&&(g=hE(r),b+=g*g),b=(p-(b=Math.sqrt(b)))/b*i,u.vx+=(m*=b)*(p=(h*=h)/(d+h)),u.vy+=(g*=b)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=dE(null==t?1:+t)),o.initialize=function(t,n){e=t,r=n,u()},o.iterations=function(t){return arguments.length?(a=+t,o):a},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"===typeof e?e:dE(+e),u(),o):t},o},bE={value:()=>{}};function yE(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new vE(r)}function vE(t){this._=t}function xE(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function wE(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function OE(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=bE,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}vE.prototype=yE.prototype={constructor:vE,on:function(t,e){var n,r=this._,i=xE(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++a<o)if(n=(t=i[a]).type)r[n]=OE(r[n],t.name,e);else if(null==e)for(n in r)r[n]=OE(r[n],t.name,null);return this}while(++a<o)if((n=(t=i[a]).type)&&(n=wE(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new vE(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],a=0,n=r.length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var _E,AE,jE=yE,kE=0,CE=0,EE=0,SE=1e3,DE=0,FE=0,NE=0,TE="object"===typeof performance&&performance.now?performance:Date,ME="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function IE(){return FE||(ME(RE),FE=TE.now()+NE)}function RE(){FE=0}function $E(){this._call=this._time=this._next=null}function BE(t,e,n){var r=new $E;return r.restart(t,e,n),r}function zE(){IE(),++kE;var t,e=_E;while(e)(t=FE-e._time)>=0&&e._call.call(null,t),e=e._next;--kE}function LE(){FE=(DE=TE.now())+NE,kE=CE=0;try{zE()}finally{kE=0,UE(),FE=0}}function PE(){var t=TE.now(),e=t-DE;e>SE&&(NE-=e,DE=t)}function UE(){var t,e,n=_E,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:_E=e);AE=t,WE(r)}function WE(t){if(!kE){CE&&(CE=clearTimeout(CE));var e=t-FE;e>24?(t<1/0&&(CE=setTimeout(LE,t-TE.now()-NE)),EE&&(EE=clearInterval(EE))):(EE||(DE=TE.now(),EE=setInterval(PE,SE)),kE=1,ME(LE))}}$E.prototype=BE.prototype={constructor:$E,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?IE():+n)+(null==e?0:+e),this._next||AE===this||(AE?AE._next=this:_E=this,AE=this),this._call=t,this._time=n,WE()},stop:function(){this._call&&(this._call=null,this._time=1/0,WE())}};const qE=1664525,VE=1013904223,GE=4294967296;var HE=function(){let t=1;return()=>(t=(qE*t+VE)%GE)/GE};function XE(t){return t.x}function YE(t){return t.y}var KE=10,JE=Math.PI*(3-Math.sqrt(5)),ZE=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,u=BE(f),c=jE("tick","end"),l=HE();function f(){d(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function d(r){var u,c,l=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)c=t[u],null==c.fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=KE*Math.sqrt(.5+n),a=n*JE;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),h(),e={tick:d,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},randomSource:function(t){return arguments.length?(l=t,s.forEach(p),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)s=t[c],i=e-s.x,a=n-s.y,o=i*i+a*a,o<r&&(u=s,r=o);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},QE=function(){var t,e,n,r,i,a=dE(-30),o=1,s=1/0,u=.81;function c(n){var i,a=t.length,o=uE(t,XE,YE).visitAfter(f);for(r=n,i=0;i<a;++i)e=t[i],o.visit(d)}function l(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+a(n,e,t)}}function f(t){var e,n,r,a,o,s=0,u=0;if(t.length){for(r=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,a+=n*e.y);t.x=r/u,t.y=a/u}else{e=t,e.x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function d(t,a,c,l){if(!t.value)return!0;var f=t.x-e.x,d=t.y-e.y,h=l-a,p=f*f+d*d;if(h*h/u<p)return p<s&&(0===f&&(f=hE(n),p+=f*f),0===d&&(d=hE(n),p+=d*d),p<o&&(p=Math.sqrt(o*p)),e.vx+=f*t.value*r/p,e.vy+=d*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===f&&(f=hE(n),p+=f*f),0===d&&(d=hE(n),p+=d*d),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(h=i[t.data.index]*r/p,e.vx+=f*h,e.vy+=d*h)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,l()},c.strength=function(t){return arguments.length?(a="function"===typeof t?t:dE(+t),l(),c):a},c.distanceMin=function(t){return arguments.length?(o=t*t,c):Math.sqrt(o)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c};function tS(t){return t.index}function eS(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}var nS=function(t){var e,n,r,i,a,o,s=tS,u=f,c=dE(30),l=1;function f(t){return 1/Math.min(i[t.source.index],i[t.target.index])}function d(r){for(var i=0,s=t.length;i<l;++i)for(var u,c,f,d,h,p,m,g=0;g<s;++g)u=t[g],c=u.source,f=u.target,d=f.x+f.vx-c.x-c.vx||hE(o),h=f.y+f.vy-c.y-c.vy||hE(o),p=Math.sqrt(d*d+h*h),p=(p-n[g])/p*r*e[g],d*=p,h*=p,f.vx-=d*(m=a[g]),f.vy-=h*m,c.vx+=d*(m=1-m),c.vy+=h*m}function h(){if(r){var o,u,c=r.length,l=t.length,f=new Map(r.map((t,e)=>[s(t,e,r),t]));for(o=0,i=new Array(c);o<l;++o)u=t[o],u.index=o,"object"!==typeof u.source&&(u.source=eS(f,u.source)),"object"!==typeof u.target&&(u.target=eS(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(o=0,a=new Array(l);o<l;++o)u=t[o],a[o]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),p(),n=new Array(l),m()}}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function m(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t,e){r=t,o=e,h()},d.links=function(e){return arguments.length?(t=e,h(),d):t},d.id=function(t){return arguments.length?(s=t,d):s},d.iterations=function(t){return arguments.length?(l=+t,d):l},d.strength=function(t){return arguments.length?(u="function"===typeof t?t:dE(+t),p(),d):u},d.distance=function(t){return arguments.length?(c="function"===typeof t?t:dE(+t),m(),d):c},d},rS=function(t){var e,n,r,i=dE(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)i=e[a],i.vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!==typeof t&&(t=dE(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:dE(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"===typeof e?e:dE(+e),o(),a):t},a},iS=function(t){var e,n,r,i=dE(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)i=e[a],i.vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!==typeof t&&(t=dE(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:dE(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"===typeof e?e:dE(+e),o(),a):t},a};const aS={center:WC,collide:gE,nbody:QE,link:nS,x:rS,y:iS},oS="forces",sS=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],uS=["static","iterations"],cS=["x","y","vx","vy"];function lS(t){Vr.call(this,null,t)}function fS(t,e){return()=>t.touch(e).run()}function dS(t,e){const n=ZE(t),r=n.stop,i=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,i()),n.stop=()=>(a=!0,r()),hS(n,e,!0).on("end",()=>a=!0)}function hS(t,e,n,r){var i,a,o,s,u=Object(Ue["e"])(e.forces);for(i=0,a=sS.length;i<a;++i)o=sS[i],o!==oS&&e.modified(o)&&t[o](e[o]);for(i=0,a=u.length;i<a;++i)s=oS+i,o=n||e.modified(oS,i)?mS(u[i]):r&&pS(u[i],r)?t.force(s):null,o&&t.force(s,o);for(a=t.numForces||0;i<a;++i)t.force(oS+i,null);return t.numForces=u.length,t}function pS(t,e){var n,r;for(n in t)if(Object(Ue["A"])(r=t[n])&&e.modified(Object(Ue["c"])(r)))return 1;return 0}function mS(t){var e,n;for(n in Object(Ue["s"])(aS,t.force)||Object(Ue["k"])("Unrecognized force: "+t.force),e=aS[t.force](),t)Object(Ue["A"])(e[n])&&gS(e[n],t[n],t);return e}function gS(t,e,n){t(Object(Ue["A"])(e)?t=>e(t,n):e)}function bS(t){var e=0,n=t.children,r=n&&n.length;if(r)while(--r>=0)e+=n[r].value;else e=1;t.value=e}lS.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:cS}]},Object(Ue["v"])(lS,Vr,{transform(t,e){var n=this.value,r=e.changed(e.ADD_REM),i=t.modified(sS),a=t.iterations||300;if(n?(r&&(e.modifies("index"),n.nodes(e.source)),(i||e.changed(e.MOD))&&hS(n,t,0,e)):(this.value=n=dS(e.source,t),n.on("tick",fS(e.dataflow,this)),t.static||(r=!0,n.tick()),e.modifies("index")),i||r||t.modified(uS)||e.changed()&&t.restart)if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),t.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return e.StopPropagation;return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let s,u=this._argops,c=0,l=u.length;c<l;++c)if(s=u[c],s.name===oS&&"link"===s.op._argval.force)for(var r,i=s.op._argops,a=0,o=i.length;a<o;++a)if("links"===i[a].name&&(r=i[a].op.source)){n.pulse(r,n.changeset().reflow());break}return e.reflow(t.modified()).modifies(cS)}});var yS=function(){return this.eachAfter(bS)},vS=function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},xS=function(t,e){var n,r,i=this,a=[i],o=-1;while(i=a.pop())if(t.call(e,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},wS=function(t,e){var n,r,i,a=this,o=[a],s=[],u=-1;while(a=o.pop())if(s.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);while(a=s.pop())t.call(e,a,++u,this);return this},OS=function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},_S=function(t){return this.eachAfter((function(e){var n=+t(e.data)||0,r=e.children,i=r&&r.length;while(--i>=0)n+=r[i].value;e.value=n}))},AS=function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},jS=function(t){var e=this,n=kS(e,t),r=[e];while(e!==n)e=e.parent,r.push(e);var i=r.length;while(t!==n)r.splice(i,0,t),t=t.parent;return r};function kS(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();while(t===e)i=t,t=n.pop(),e=r.pop();return i}var CS=function(){var t=this,e=[t];while(t=t.parent)e.push(t);return e},ES=function(){return Array.from(this)},SS=function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},DS=function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},FS=function*(){var t,e,n,r,i=this,a=[i];do{t=a.reverse(),a=[];while(i=t.pop())if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n])}while(a.length)};function NS(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=IS)):void 0===e&&(e=MS);var n,r,i,a,o,s=new BS(t),u=[s];while(n=u.pop())if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)u.push(r=i[a]=new BS(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore($S)}function TS(){return NS(this).eachBefore(RS)}function MS(t){return t.children}function IS(t){return Array.isArray(t)?t[1]:null}function RS(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function $S(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function BS(t){this.data=t,this.depth=this.height=0,this.parent=null}BS.prototype=NS.prototype={constructor:BS,count:yS,each:vS,eachAfter:wS,eachBefore:xS,find:OS,sum:_S,sort:AS,path:jS,ancestors:CS,descendants:ES,leaves:SS,links:DS,copy:TS,[Symbol.iterator]:FS};var zS=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)};function LS(t){var e,n,r=t.length;while(r)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}var PS=function(t){var e,n,r=0,i=(t=LS(Array.from(t))).length,a=[];while(r<i)e=t[r],n&&qS(n,e)?++r:(n=GS(a=US(a,e)),r=0);return n};function US(t,e){var n,r;if(VS(e,t))return[e];for(n=0;n<t.length;++n)if(WS(e,t[n])&&VS(XS(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(WS(XS(t[n],t[r]),e)&&WS(XS(t[n],e),t[r])&&WS(XS(t[r],e),t[n])&&VS(YS(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function WS(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function qS(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function VS(t,e){for(var n=0;n<e.length;++n)if(!qS(t,e[n]))return!1;return!0}function GS(t){switch(t.length){case 1:return HS(t[0]);case 2:return XS(t[0],t[1]);case 3:return YS(t[0],t[1],t[2])}}function HS(t){return{x:t.x,y:t.y,r:t.r}}function XS(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-n,c=o-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+a+u/f*l)/2,y:(r+o+c/f*l)/2,r:(f+i+s)/2}}function YS(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,d=r-o,h=r-c,p=i-s,m=i-l,g=u-a,b=f-a,y=r*r+i*i-a*a,v=y-o*o-s*s+u*u,x=y-c*c-l*l+f*f,w=h*p-d*m,O=(p*x-m*v)/(2*w)-r,_=(m*g-p*b)/w,A=(h*v-d*x)/(2*w)-i,j=(d*b-h*g)/w,k=_*_+j*j-1,C=2*(a+O*_+A*j),E=O*O+A*A-a*a,S=-(k?(C+Math.sqrt(C*C-4*k*E))/(2*k):E/C);return{x:r+O+_*S,y:i+A+j*S,r:S}}function KS(t,e,n){var r,i,a,o,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,o=t.r+n.r,o*=o,i>o?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=t.x-r*s-a*u,n.y=t.y-r*u+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-a*u,n.y=e.y+r*u+a*s)):(n.x=e.x+n.r,n.y=e.y)}function JS(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function ZS(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function QS(t){this._=t,this.next=null,this.previous=null}function tD(t){if(!(i=(t=zS(t)).length))return 0;var e,n,r,i,a,o,s,u,c,l,f;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;KS(n,e,r=t[2]),e=new QS(e),n=new QS(n),r=new QS(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){KS(e._,n._,r=t[s]),r=new QS(r),u=n.next,c=e.previous,l=n._.r,f=e._.r;do{if(l<=f){if(JS(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(JS(c._,r._)){e=c,e.next=n,n.previous=e,--s;continue t}f+=c._.r,c=c.previous}}while(u!==c.next);r.previous=e,r.next=n,e.next=n.previous=n=r,a=ZS(e);while((r=r.next)!==n)(o=ZS(r))<a&&(e=r,a=o);n=e.next}e=[n._],r=n;while((r=r.next)!==n)e.push(r._);for(r=PS(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function eD(t){return null==t?null:nD(t)}function nD(t){if("function"!==typeof t)throw new Error;return t}function rD(){return 0}var iD=function(t){return function(){return t}};function aD(t){return Math.sqrt(t.value)}var oD=function(){var t=null,e=1,n=1,r=rD;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(sD(t)).eachAfter(uD(r,.5)).eachBefore(cD(1)):i.eachBefore(sD(aD)).eachAfter(uD(rD,1)).eachAfter(uD(r,i.r/Math.min(e,n))).eachBefore(cD(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=eD(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:iD(+t),i):r},i};function sD(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function uD(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,s=t(n)*e||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=tD(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function cD(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var lD=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},fD=function(t,e,n,r,i){var a,o=t.children,s=-1,u=o.length,c=t.value&&(r-e)/t.value;while(++s<u)a=o[s],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c},dD=function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(a(e,o)),r&&i.eachBefore(lD),i}function a(t,e){return function(r){r.children&&fD(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},hD={depth:-1},pD={};function mD(t){return t.id}function gD(t){return t.parentId}var bD=function(){var t=mD,e=gD;function n(n){var r,i,a,o,s,u,c,l=Array.from(n),f=l.length,d=new Map;for(i=0;i<f;++i)r=l[i],s=l[i]=new BS(r),null!=(u=t(r,i,n))&&(u+="")&&(c=s.id=u,d.set(c,d.has(c)?pD:s)),null!=(u=e(r,i,n))&&(u+="")&&(s.parent=u);for(i=0;i<f;++i)if(s=l[i],u=s.parent){if(o=d.get(u),!o)throw new Error("missing: "+u);if(o===pD)throw new Error("ambiguous: "+u);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=hD,a.eachBefore((function(t){t.depth=t.parent.depth+1,--f})).eachBefore($S),a.parent=null,f>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=nD(e),n):t},n.parentId=function(t){return arguments.length?(e=nD(t),n):e},n};function yD(t,e){return t.parent===e.parent?1:2}function vD(t){var e=t.children;return e?e[0]:t.t}function xD(t){var e=t.children;return e?e[e.length-1]:t.t}function wD(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function OD(t){var e,n=0,r=0,i=t.children,a=i.length;while(--a>=0)e=i[a],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function _D(t,e,n){return t.a.parent===e.parent?t.a:n}function AD(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function jD(t){var e,n,r,i,a,o=new AD(t,0),s=[o];while(e=s.pop())if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new AD(r[i],i)),n.parent=e;return(o.parent=new AD(null,0)).children=[o],o}AD.prototype=Object.create(BS.prototype);var kD=function(){var t=yD,e=1,n=1,r=null;function i(i){var s=jD(i);if(s.eachAfter(a),s.parent.m=-s.z,s.eachBefore(o),r)i.eachBefore(u);else{var c=i,l=i,f=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>f.depth&&(f=t)}));var d=c===l?1:t(c,l)/2,h=d-c.x,p=e/(l.x+d+h),m=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+h)*p,t.y=t.depth*m}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){OD(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=s(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(e,n,r){if(n){var i,a=e,o=e,s=n,u=a.parent.children[0],c=a.m,l=o.m,f=s.m,d=u.m;while(s=xD(s),a=vD(a),s&&a)u=vD(u),o=xD(o),o.a=e,i=s.z+f-a.z-c+t(s._,a._),i>0&&(wD(_D(s,e,r),e,i),c+=i,l+=i),f+=s.m,c+=a.m,d+=u.m,l+=o.m;s&&!xD(o)&&(o.t=s,o.m+=f-l),a&&!vD(u)&&(u.t=a,u.m+=c-d,r=e)}return r}function u(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i};function CD(t,e){return t.parent===e.parent?1:2}function ED(t){return t.reduce(SD,0)/t.length}function SD(t,e){return t+e.x}function DD(t){return 1+t.reduce(FD,0)}function FD(t,e){return Math.max(t,e.y)}function ND(t){var e;while(e=t.children)t=e[0];return t}function TD(t){var e;while(e=t.children)t=e[e.length-1];return t}var MD=function(){var t=CD,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=ED(n),e.y=DD(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var s=ND(i),u=TD(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},ID=function(t,e,n,r,i){var a,o,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=o=a=0;a<u;++a)c[a+1]=o+=s[a].value;function l(t,e,n,r,i,a,o){if(t>=e-1){var u=s[t];return u.x0=r,u.y0=i,u.x1=a,void(u.y1=o)}var f=c[t],d=n/2+f,h=t+1,p=e-1;while(h<p){var m=h+p>>>1;c[m]<d?h=m+1:p=m}d-c[h-1]<c[h]-d&&t+1<h&&--h;var g=c[h]-f,b=n-g;if(a-r>o-i){var y=n?(r*b+a*g)/n:a;l(t,h,g,r,i,y,o),l(h,e,b,y,i,a,o)}else{var v=n?(i*b+o*g)/n:o;l(t,h,g,r,i,a,v),l(h,e,b,r,v,a,o)}}l(0,u,t.value,e,n,r,i)},RD=function(t,e,n,r,i){var a,o=t.children,s=-1,u=o.length,c=t.value&&(i-n)/t.value;while(++s<u)a=o[s],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c},$D=function(t,e,n,r,i){(1&t.depth?RD:fD)(t,e,n,r,i)},BD=(1+Math.sqrt(5))/2;function zD(t,e,n,r,i,a){var o,s,u,c,l,f,d,h,p,m,g,b=[],y=e.children,v=0,x=0,w=y.length,O=e.value;while(v<w){u=i-n,c=a-r;do{l=y[x++].value}while(!l&&x<w);for(f=d=l,m=Math.max(c/u,u/c)/(O*t),g=l*l*m,p=Math.max(d/g,g/f);x<w;++x){if(l+=s=y[x].value,s<f&&(f=s),s>d&&(d=s),g=l*l*m,h=Math.max(d/g,g/f),h>p){l-=s;break}p=h}b.push(o={value:l,dice:u<c,children:y.slice(v,x)}),o.dice?fD(o,n,r,i,O?r+=c*l/O:a):RD(o,n,r,O?n+=u*l/O:i,a),O-=l,v=x}return b}var LD=function t(e){function n(t,n,r,i,a){zD(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(BD),PD=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e){var o,s,u,c,l,f=-1,d=o.length,h=t.value;while(++f<d){for(s=o[f],u=s.children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?fD(s,n,r,i,h?r+=(a-r)*s.value/h:a):RD(s,n,r,h?n+=(i-n)*s.value/h:i,a),h-=s.value}}else t._squarify=o=zD(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(BD),UD=function(){var t=LD,e=!1,n=1,r=1,i=[0],a=rD,o=rD,s=rD,u=rD,c=rD;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(lD),t}function f(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,f=e.x1-n,d=e.y1-n;f<r&&(r=f=(r+f)/2),d<l&&(l=d=(l+d)/2),e.x0=r,e.y0=l,e.x1=f,e.y1=d,e.children&&(n=i[e.depth+1]=a(e)/2,r+=c(e)-n,l+=o(e)-n,f-=s(e)-n,d-=u(e)-n,f<r&&(r=f=(r+f)/2),d<l&&(l=d=(l+d)/2),t(e,r,l,f,d))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=nD(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(a="function"===typeof t?t:iD(+t),l):a},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(o="function"===typeof t?t:iD(+t),l):o},l.paddingRight=function(t){return arguments.length?(s="function"===typeof t?t:iD(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"===typeof t?t:iD(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"===typeof t?t:iD(+t),l):c},l};function WD(t,e,n){const r={};return t.each(t=>{const i=t.data;n(i)&&(r[e(i)]=t)}),t.lookup=r,t}function qD(t){Vr.call(this,null,t)}qD.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const VD=t=>t.values;function GD(){const t=[],e={entries:t=>r(n(t,0),0),key:n=>(t.push(n),e)};function n(e,r){if(r>=t.length)return e;const i=e.length,a=t[r++],o={},s={};let u,c,l,f=-1;while(++f<i)u=a(c=e[f])+"",(l=o[u])?l.push(c):o[u]=[c];for(u in o)s[u]=n(o[u],r);return s}function r(e,n){if(++n>t.length)return e;const i=[];for(const t in e)i.push({key:t,values:r(e[t],n)});return i}return e}function HD(t){Vr.call(this,null,t)}Object(Ue["v"])(qD,Vr,{transform(t,e){e.source||Object(Ue["k"])("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),a=this.value;return(!a||r||e.changed())&&(a&&a.each(t=>{t.children&&Sn(t.data)&&i.rem.push(t.data)}),this.value=a=NS({values:Object(Ue["e"])(t.keys).reduce((t,e)=>(t.key(e),t),GD()).entries(i.source)},VD),n&&a.each(t=>{t.children&&(t=Nn(t.data),i.add.push(t),i.source.push(t))}),WD(a,Dn,Dn)),i.source.root=a,i}});const XD=(t,e)=>t.parent===e.parent?1:2;function YD(t,e,n){for(let r,i=0,a=e.length;i<a;++i)r=e[i],r in n&&t[r](n[r])}function KD(t,e,n){const r=t.data,i=e.length-1;for(let a=0;a<i;++a)r[n[a]]=t[e[a]];r[n[i]]=t.children?t.children.length:0}Object(Ue["v"])(HD,Vr,{transform(t,e){e.source&&e.source.root||Object(Ue["k"])(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),r=this.fields,i=e.source.root,a=t.as||r;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(Rn(t.sort,t=>t.data)),YD(n,this.params,t),n.separation&&n.separation(!1!==t.separation?XD:Ue["M"]);try{this.value=n(i)}catch(o){Object(Ue["k"])(o)}return i.each(t=>KD(t,r,a)),e.reflow(t.modified()).modifies(a).modifies("leaf")}});const JD=["x","y","r","depth","children"];function ZD(t){HD.call(this,t)}ZD.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:JD.length,default:JD}]},Object(Ue["v"])(ZD,HD,{layout:oD,params:["radius","size","padding"],fields:JD});const QD=["x0","y0","x1","y1","depth","children"];function tF(t){HD.call(this,t)}function eF(t){Vr.call(this,null,t)}tF.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:QD.length,default:QD}]},Object(Ue["v"])(tF,HD,{layout:dD,params:["size","round","padding"],fields:QD}),eF.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(Ue["v"])(eF,Vr,{transform(t,e){e.source||Object(Ue["k"])("Stratify transform requires an upstream data source.");let n=this.value;const r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),a=!n||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),a&&(n=i.source.length?WD(bD().id(t.key).parentId(t.parentKey)(i.source),t.key,Ue["db"]):WD(bD()([{}]),t.key,t.key)),i.source.root=this.value=n,i}});const nF={tidy:kD,cluster:MD},rF=["x","y","depth","children"];function iF(t){HD.call(this,t)}function aF(t){Vr.call(this,[],t)}iF.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:rF.length,default:rF}]},Object(Ue["v"])(iF,HD,{layout(t){const e=t||"tidy";if(Object(Ue["s"])(nF,e))return nF[e]();Object(Ue["k"])("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:rF}),aF.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(Ue["v"])(aF,Vr,{transform(t,e){const n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),a={};return r||Object(Ue["k"])("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,t=>a[Dn(t)]=1),r.each(t=>{const e=t.data,n=t.parent&&t.parent.data;n&&a[Dn(e)]&&a[Dn(n)]&&i.add.push(Nn({source:n,target:e}))}),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,t=>a[Dn(t)]=1),n.forEach(t=>{(a[Dn(t.source)]||a[Dn(t.target)])&&i.mod.push(t)})),i}});const oF={binary:ID,dice:fD,slice:RD,slicedice:$D,squarify:LD,resquarify:PD},sF=["x0","y0","x1","y1","depth","children"];function uF(t){HD.call(this,t)}function cF(t,e){var n,r,i,a,o,s,u=[],c=function(t){return t(a)};if(null==e)u.push(t);else for(n={},r=0,i=t.length;r<i;++r)a=t[r],o=e.map(c),s=n[o],s||(n[o]=s=[],s.dims=o,u.push(s)),s.push(a);return u}function lF(t){Vr.call(this,null,t)}uF.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:sF.length,default:sF}]},Object(Ue["v"])(uF,HD,{layout(){const t=UD();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{Object(Ue["s"])(oF,e)?t.tile(oF[e]):Object(Ue["k"])("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:sF}),lF.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(Ue["v"])(lF,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=cF(r,t.groupby),a=(t.groupby||[]).map(Ue["d"]),o=a.length,s=t.as||[Object(Ue["d"])(t.x),Object(Ue["d"])(t.y)],u=[];i.forEach(e=>{ta(e,t.x,t.y,t.bandwidth||.3).forEach(t=>{const n={};for(let r=0;r<o;++r)n[a[r]]=e.dims[r];n[s[0]]=t[0],n[s[1]]=t[1],u.push(Nn(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const fF={linear:qi,log:Vi,exp:Gi,pow:Hi,quad:Xi,poly:Yi},dF=(t,e)=>"poly"===t?e:"quad"===t?2:1;function hF(t){Vr.call(this,null,t)}hF.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(fF)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(Ue["v"])(hF,Vr,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=cF(r,t.groupby),a=(t.groupby||[]).map(Ue["d"]),o=t.method||"linear",s=t.order||3,u=dF(o,s),c=t.as||[Object(Ue["d"])(t.x),Object(Ue["d"])(t.y)],l=fF[o],f=[];let d=t.extent;Object(Ue["s"])(fF,o)||Object(Ue["k"])("Invalid regression method: "+o),null!=d&&"log"===o&&d[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(n=>{const r=n.length;if(r<=u)return void e.dataflow.warn("Skipping regression with more parameters than data points.");const i=l(n,t.x,t.y,s);if(t.params)return void f.push(Nn({keys:n.dims,coef:i.coef,rSquared:i.rSquared}));const h=d||Object(Ue["m"])(n,t.x),p=t=>{const e={};for(let r=0;r<a.length;++r)e[a[r]]=n.dims[r];e[c[0]]=t[0],e[c[1]]=t[1],f.push(Nn(e))};"linear"===o?h.forEach(t=>p([t,i.predict(t)])):aa(i.predict,h,25,200).forEach(p)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const pF=Math.pow(2,-52),mF=new Uint32Array(512);class gF{static from(t,e=kF,n=CF){const r=t.length,i=new Float64Array(2*r);for(let a=0;a<r;a++){const r=t[a];i[2*a]=e(r),i[2*a+1]=n(r)}return new gF(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,a=t.length>>1;let o=1/0,s=1/0,u=-1/0,c=-1/0;for(let j=0;j<a;j++){const e=t[2*j],n=t[2*j+1];e<o&&(o=e),n<s&&(s=n),e>u&&(u=e),n>c&&(c=n),this._ids[j]=j}const l=(o+u)/2,f=(s+c)/2;let d,h,p,m=1/0;for(let j=0;j<a;j++){const e=yF(l,f,t[2*j],t[2*j+1]);e<m&&(d=j,m=e)}const g=t[2*d],b=t[2*d+1];m=1/0;for(let j=0;j<a;j++){if(j===d)continue;const e=yF(g,b,t[2*j],t[2*j+1]);e<m&&e>0&&(h=j,m=e)}let y=t[2*h],v=t[2*h+1],x=1/0;for(let j=0;j<a;j++){if(j===d||j===h)continue;const e=OF(g,b,y,v,t[2*j],t[2*j+1]);e<x&&(p=j,x=e)}let w=t[2*p],O=t[2*p+1];if(x===1/0){for(let r=0;r<a;r++)this._dists[r]=t[2*r]-t[0]||t[2*r+1]-t[1];AF(this._ids,this._dists,0,a-1);const e=new Uint32Array(a);let n=0;for(let t=0,r=-1/0;t<a;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(xF(g,b,y,v,w,O)){const t=h,e=y,n=v;h=p,y=w,v=O,p=t,w=e,O=n}const _=_F(g,b,y,v,w,O);this._cx=_.x,this._cy=_.y;for(let j=0;j<a;j++)this._dists[j]=yF(t[2*j],t[2*j+1],_.x,_.y);AF(this._ids,this._dists,0,a-1),this._hullStart=d;let A=3;n[d]=e[p]=h,n[h]=e[d]=p,n[p]=e[h]=d,r[d]=0,r[h]=1,r[p]=2,i.fill(-1),i[this._hashKey(g,b)]=d,i[this._hashKey(y,v)]=h,i[this._hashKey(w,O)]=p,this.trianglesLen=0,this._addTriangle(d,h,p,-1,-1,-1);for(let j,k,C=0;C<this._ids.length;C++){const a=this._ids[C],o=t[2*a],s=t[2*a+1];if(C>0&&Math.abs(o-j)<=pF&&Math.abs(s-k)<=pF)continue;if(j=o,k=s,a===d||a===h||a===p)continue;let u=0;for(let t=0,e=this._hashKey(o,s);t<this._hashSize;t++)if(u=i[(e+t)%this._hashSize],-1!==u&&u!==n[u])break;u=e[u];let c,l=u;while(c=n[l],!xF(o,s,t[2*l],t[2*l+1],t[2*c],t[2*c+1]))if(l=c,l===u){l=-1;break}if(-1===l)continue;let f=this._addTriangle(l,a,n[l],-1,-1,r[l]);r[a]=this._legalize(f+2),r[l]=f,A++;let m=n[l];while(c=n[m],xF(o,s,t[2*m],t[2*m+1],t[2*c],t[2*c+1]))f=this._addTriangle(m,a,c,r[a],-1,r[m]),r[a]=this._legalize(f+2),n[m]=m,A--,m=c;if(l===u)while(c=e[l],xF(o,s,t[2*c],t[2*c+1],t[2*l],t[2*l+1]))f=this._addTriangle(c,a,l,-1,r[l],r[c]),this._legalize(f+2),r[c]=f,n[l]=l,A--,l=c;this._hullStart=e[a]=l,n[l]=e[m]=a,n[a]=m,i[this._hashKey(o,s)]=a,i[this._hashKey(t[2*l],t[2*l+1])]=l}this.hull=new Uint32Array(A);for(let j=0,k=this._hullStart;j<A;j++)this.hull[j]=k,k=n[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(bF(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,a=0;while(1){const o=n[t],s=t-t%3;if(a=s+(t+2)%3,-1===o){if(0===i)break;t=mF[--i];continue}const u=o-o%3,c=s+(t+1)%3,l=u+(o+2)%3,f=e[a],d=e[t],h=e[c],p=e[l],m=wF(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1]);if(m){e[t]=p,e[o]=f;const r=n[l];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===l){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(o,n[a]),this._link(a,l);const s=u+(o+1)%3;i<mF.length&&(mF[i++]=s)}else{if(0===i)break;t=mF[--i]}}return a}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,a){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}function bF(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function yF(t,e,n,r){const i=t-n,a=e-r;return i*i+a*a}function vF(t,e,n,r,i,a){const o=(r-e)*(i-t),s=(n-t)*(a-e);return Math.abs(o-s)>=33306690738754716e-32*Math.abs(o+s)?o-s:0}function xF(t,e,n,r,i,a){const o=vF(i,a,t,e,n,r)||vF(t,e,n,r,i,a)||vF(n,r,i,a,t,e);return o<0}function wF(t,e,n,r,i,a,o,s){const u=t-o,c=e-s,l=n-o,f=r-s,d=i-o,h=a-s,p=u*u+c*c,m=l*l+f*f,g=d*d+h*h;return u*(f*g-m*h)-c*(l*g-m*d)+p*(l*h-f*d)<0}function OF(t,e,n,r,i,a){const o=n-t,s=r-e,u=i-t,c=a-e,l=o*o+s*s,f=u*u+c*c,d=.5/(o*c-s*u),h=(c*l-s*f)*d,p=(o*f-u*l)*d;return h*h+p*p}function _F(t,e,n,r,i,a){const o=n-t,s=r-e,u=i-t,c=a-e,l=o*o+s*s,f=u*u+c*c,d=.5/(o*c-s*u),h=t+(c*l-s*f)*d,p=e+(o*f-u*l)*d;return{x:h,y:p}}function AF(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],a=e[r];let o=i-1;while(o>=n&&e[t[o]]>a)t[o+1]=t[o--];t[o+1]=r}else{const i=n+r>>1;let a=n+1,o=r;jF(t,i,a),e[t[n]]>e[t[r]]&&jF(t,n,r),e[t[a]]>e[t[r]]&&jF(t,a,r),e[t[n]]>e[t[a]]&&jF(t,n,a);const s=t[a],u=e[s];while(1){do{a++}while(e[t[a]]<u);do{o--}while(e[t[o]]>u);if(o<a)break;jF(t,a,o)}t[n+1]=t[o],t[o]=s,r-a+1>=o-n?(AF(t,e,a,r),AF(t,e,n,o-1)):(AF(t,e,n,o-1),AF(t,e,a,r))}}function jF(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function kF(t){return t[0]}function CF(t){return t[1]}const EF=1e-6;class SF{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){t=+t,e=+e,n=+n;const r=t+n,i=e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>EF||Math.abs(this._y1-i)>EF)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class DF{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class FF{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e))||!((i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let d,h,p=0,m=0,g=n.length;p<g;p+=3,m+=2){const e=2*n[p],r=2*n[p+1],a=2*n[p+2],o=t[e],s=t[e+1],u=t[r],c=t[r+1],l=t[a],f=t[a+1],g=u-o,b=c-s,y=l-o,v=f-s,x=g*g+b*b,w=y*y+v*v,O=2*(g*v-b*y);if(O)if(Math.abs(O)<1e-8)d=(o+l)/2,h=(s+f)/2;else{const t=1/O;d=o+(v*x-b*w)*t,h=s+(g*w-y*x)*t}else d=(o+l)/2-1e8*v,h=(s+f)/2+1e8*y;i[m]=d,i[m+1]=h}let a,o,s,u=e[e.length-1],c=4*u,l=t[2*u],f=t[2*u+1];r.fill(0);for(let d=0;d<e.length;++d)u=e[d],a=c,o=l,s=f,c=4*u,l=t[2*u],f=t[2*u+1],r[a+2]=r[c]=s-f,r[a+3]=r[c+1]=l-o}render(t){const e=null==t?t=new SF:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:a,vectors:o}=this;if(i.length<=1)return null;for(let c=0,l=n.length;c<l;++c){const e=n[c];if(e<c)continue;const r=2*Math.floor(c/3),i=2*Math.floor(e/3),o=a[r],s=a[r+1],u=a[i],l=a[i+1];this._renderSegment(o,s,u,l,t)}let s,u=i[i.length-1];for(let c=0;c<i.length;++c){s=u,u=i[c];const e=2*Math.floor(r[u]/3),n=a[e],l=a[e+1],f=4*s,d=this._project(n,l,o[f+2],o[f+3]);d&&this._renderSegment(n,l,d[0],d[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new SF:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new SF:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;while(r[0]===r[i-2]&&r[1]===r[i-1]&&i>1)i-=2;for(let a=2;a<i;a+=2)r[a]===r[a-2]&&r[a+1]===r[a-1]||e.lineTo(r[a],r[a+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new DF;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let a;const o=this._regioncode(t,e),s=this._regioncode(n,r);0===o&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(a=this._clipSegment(t,e,n,r,o,s))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}contains(t,e,n){return e=+e,e===e&&(n=+n,n===n)&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let a=0,o=t.length;a<o;a+=2)if(e[r]==t[a]&&e[r+1]==t[a+1]&&e[(r+2)%i]==t[(a+o-2)%o]&&e[(r+3)%i]==t[(a+o-1)%o]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,a=n[t];if(-1===a)return null;const o=[];let s=a;do{const n=Math.floor(s/3);if(o.push(e[2*n],e[2*n+1]),s=s%3===2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==a&&-1!==s);return o}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let r,i,a,o,s,u=null,c=e[n-2],l=e[n-1],f=this._regioncode(c,l);for(let d=0;d<n;d+=2)if(r=c,i=l,c=e[d],l=e[d+1],a=f,f=this._regioncode(c,l),0===a&&0===f)o=s,s=0,u?u.push(c,l):u=[c,l];else{let e,n,d,h,p;if(0===a){if(null===(e=this._clipSegment(r,i,c,l,a,f)))continue;[n,d,h,p]=e}else{if(null===(e=this._clipSegment(c,l,r,i,f,a)))continue;[h,p,n,d]=e,o=s,s=this._edgecode(n,d),o&&s&&this._edge(t,o,s,u,u.length),u?u.push(n,d):u=[n,d]}o=s,s=this._edgecode(h,p),o&&s&&this._edge(t,o,s,u,u.length),u?u.push(h,p):u=[h,p]}if(u)o=s,s=this._edgecode(u[0],u[1]),o&&s&&this._edge(t,o,s,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,e,n,r,i,a){while(1){if(0===i&&0===a)return[t,e,n,r];if(i&a)return null;let o,s,u=i||a;8&u?(o=t+(n-t)*(this.ymax-e)/(r-e),s=this.ymax):4&u?(o=t+(n-t)*(this.ymin-e)/(r-e),s=this.ymin):2&u?(s=e+(r-e)*(this.xmax-t)/(n-t),o=this.xmax):(s=e+(r-e)*(this.xmin-t)/(n-t),o=this.xmin),i?(t=o,e=s,i=this._regioncode(t,e)):(n=o,r=s,a=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,a){let o,s=Array.from(e);if((o=this._project(s[0],s[1],n,r))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],i,a))&&s.push(o[0],o[1]),s=this._clipFinite(t,s))for(let u,c=0,l=s.length,f=this._edgecode(s[l-2],s[l-1]);c<l;c+=2)u=f,f=this._edgecode(s[c],s[c+1]),u&&f&&(c=this._edge(t,u,f,s,c),l=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){while(e!==n){let n,a;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,a=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,a=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,a=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,a=this.ymin;break}r[i]===n&&r[i+1]===a||!this.contains(t,n,a)||(r.splice(i,0,n,a),i+=2)}if(r.length>4)for(let a=0;a<r.length;a+=2){const t=(a+2)%r.length,e=(a+4)%r.length;(r[a]===r[t]&&r[t]===r[e]||r[a+1]===r[t+1]&&r[t+1]===r[e+1])&&(r.splice(t,2),a-=2)}return i}_project(t,e,n,r){let i,a,o,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(o=this.ymin,a=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(o=this.ymax,a=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(a=this.xmax,o=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(a=this.xmin,o=e+(s=i)*r)}return[a,o]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const NF=2*Math.PI,TF=Math.pow;function MF(t){return t[0]}function IF(t){return t[1]}function RF(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const t=2*e[r],i=2*e[r+1],a=2*e[r+2],o=(n[a]-n[t])*(n[i+1]-n[t+1])-(n[i]-n[t])*(n[a+1]-n[t+1]);if(o>1e-10)return!1}return!0}function $F(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class BF{static from(t,e=MF,n=IF,r){return new BF("length"in t?zF(t,e,n,r):Float64Array.from(LF(t,e,n,r)))}constructor(t){this._delaunator=new gF(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&RF(t)){this.collinear=Int32Array.from({length:e.length/2},(t,e)=>e).sort((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]);const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let a=0,o=e.length/2;a<o;++a){const t=$F(e[2*a],e[2*a+1],i);e[2*a]=t[0],e[2*a+1]=t[1]}this._delaunator=new gF(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let s=0,u=n.length;s<u;++s){const t=i[s%3===2?s-2:s+1];-1!==n[s]&&-1!==a[t]||(a[t]=s)}for(let s=0,u=r.length;s<u;++s)o[r[s]]=s;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],a[r[0]]=1,2===r.length&&(a[r[1]]=0))}voronoi(t){return new FF(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:a,collinear:o}=this;if(o){const e=o.indexOf(t);return e>0&&(yield o[e-1]),void(e<o.length-1&&(yield o[e+1]))}const s=e[t];if(-1===s)return;let u=s,c=-1;do{if(yield c=a[u],u=u%3===2?u-2:u+1,a[u]!==t)return;if(u=i[u],-1===u){const e=n[(r[t]+1)%n.length];return void(e!==c&&(yield e))}}while(u!==s)}find(t,e,n=0){if(t=+t,t!==t||(e=+e,e!==e))return-1;const r=n;let i;while((i=this._step(n,t,e))>=0&&i!==n&&i!==r)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:a,halfedges:o,triangles:s,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let c=t,l=TF(e-u[2*t],2)+TF(n-u[2*t+1],2);const f=r[t];let d=f;do{let r=s[d];const f=TF(e-u[2*r],2)+TF(n-u[2*r+1],2);if(f<l&&(l=f,c=r),d=d%3===2?d-2:d+1,s[d]!==t)break;if(d=o[d],-1===d){if(d=i[(a[t]+1)%i.length],d!==r&&TF(e-u[2*d],2)+TF(n-u[2*d+1],2)<l)return d;break}}while(d!==f);return c}render(t){const e=null==t?t=new SF:void 0,{points:n,halfedges:r,triangles:i}=this;for(let a=0,o=r.length;a<o;++a){const e=r[a];if(e<a)continue;const o=2*i[a],s=2*i[e];t.moveTo(n[o],n[o+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e=2){const n=null==t?t=new SF:void 0,{points:r}=this;for(let i=0,a=r.length;i<a;i+=2){const n=r[i],a=r[i+1];t.moveTo(n+e,a),t.arc(n,a,e,0,NF)}return n&&n.value()}renderHull(t){const e=null==t?t=new SF:void 0,{hull:n,points:r}=this,i=2*n[0],a=n.length;t.moveTo(r[i],r[i+1]);for(let o=1;o<a;++o){const e=2*n[o];t.lineTo(r[e],r[e+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new DF;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new SF:void 0,{points:r,triangles:i}=this,a=2*i[t*=3],o=2*i[t+1],s=2*i[t+2];return e.moveTo(r[a],r[a+1]),e.lineTo(r[o],r[o+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new DF;return this.renderTriangle(t,e),e.value()}}function zF(t,e,n,r){const i=t.length,a=new Float64Array(2*i);for(let o=0;o<i;++o){const i=t[o];a[2*o]=e.call(r,i,o,t),a[2*o+1]=n.call(r,i,o,t)}return a}function*LF(t,e,n,r){let i=0;for(const a of t)yield e.call(r,a,i,t),yield n.call(r,a,i,t),++i}function PF(t){Vr.call(this,null,t)}PF.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const UF=[-1e5,-1e5,1e5,1e5];function WF(t){const e=t[0][0],n=t[0][1];let r=t.length-1;for(;t[r][0]===e&&t[r][1]===n;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}Object(Ue["v"])(PF,Vr,{transform(t,e){const n=t.as||"path",r=e.source;if(!r||!r.length)return e;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:UF;const a=this.value=BF.from(r,t.x,t.y).voronoi(i);for(let o=0,s=r.length;o<s;++o){const t=a.cellPolygon(o);r[o][n]=t?WF(t):null}return e.reflow(t.modified()).modifies(n)}});var qF=Math.PI/180,VF=64,GF=2048;function HF(){var t,e,n,r,i,a,o,s=[256,256],u=ZF,c=[],l=Math.random,f={};function d(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(VF<<5)/e,t.height=GF/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function h(t,e,n){var r,i,a,o=e.x,c=e.y,f=Math.sqrt(s[0]*s[0]+s[1]*s[1]),d=u(s),h=l()<.5?1:-1,p=-h;while(r=d(p+=h)){if(i=~~r[0],a=~~r[1],Math.min(Math.abs(i),Math.abs(a))>=f)break;if(e.x=o+i,e.y=c+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>s[0]||e.y+e.y1>s[1])&&(!n||!YF(e,t,s[0]))&&(!n||JF(e,n))){for(var m,g=e.sprite,b=e.width>>5,y=s[0]>>5,v=e.x-(b<<4),x=127&v,w=32-x,O=e.y1-e.y0,_=(e.y+e.y0)*y+(v>>5),A=0;A<O;A++){m=0;for(var j=0;j<=b;j++)t[_+j]|=m<<w|(j<b?(m=g[A*b+j])>>>x:0);_+=y}return e.sprite=null,!0}}return!1}return f.layout=function(){var u=d(Pu()),f=tN((s[0]>>5)*s[1]),p=null,m=c.length,g=-1,b=[],y=c.map(s=>({text:t(s),font:e(s),style:r(s),weight:i(s),rotate:a(s),size:~~(n(s)+1e-14),padding:o(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s})).sort((t,e)=>e.size-t.size);while(++g<m){var v=y[g];v.x=s[0]*(l()+.5)>>1,v.y=s[1]*(l()+.5)>>1,XF(u,v,y,g),v.hasText&&h(f,v,p)&&(b.push(v),p?KF(p,v):p=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=s[0]>>1,v.y-=s[1]>>1)}return b},f.words=function(t){return arguments.length?(c=t,f):c},f.size=function(t){return arguments.length?(s=[+t[0],+t[1]],f):s},f.font=function(t){return arguments.length?(e=eN(t),f):e},f.fontStyle=function(t){return arguments.length?(r=eN(t),f):r},f.fontWeight=function(t){return arguments.length?(i=eN(t),f):i},f.rotate=function(t){return arguments.length?(a=eN(t),f):a},f.text=function(e){return arguments.length?(t=eN(e),f):t},f.spiral=function(t){return arguments.length?(u=nN[t]||t,f):u},f.fontSize=function(t){return arguments.length?(n=eN(t),f):n},f.padding=function(t){return arguments.length?(o=eN(t),f):o},f.random=function(t){return arguments.length?(l=t,f):l},f}function XF(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(VF<<5)/a,GF/a);var o,s,u,c,l,f=0,d=0,h=0,p=n.length;--r;while(++r<p){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font,o=i.measureText(e.text+"m").width*a,u=e.size<<1,e.rotate){var m=Math.sin(e.rotate*qF),g=Math.cos(e.rotate*qF),b=o*g,y=o*m,v=u*g,x=u*m;o=Math.max(Math.abs(b+x),Math.abs(b-x))+31>>5<<5,u=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else o=o+31>>5<<5;if(u>h&&(h=u),f+o>=VF<<5&&(f=0,d+=h,h=0),d+u>=GF)break;i.translate((f+(o>>1))/a,(d+(u>>1))/a),e.rotate&&i.rotate(e.rotate*qF),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=o,e.height=u,e.xoff=f,e.yoff=d,e.x1=o>>1,e.y1=u>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,f+=o}var w=i.getImageData(0,0,(VF<<5)/a,GF/a).data,O=[];while(--r>=0)if(e=n[r],e.hasText){for(o=e.width,s=o>>5,u=e.y1-e.y0,c=0;c<u*s;c++)O[c]=0;if(f=e.xoff,null==f)return;d=e.yoff;var _=0,A=-1;for(l=0;l<u;l++){for(c=0;c<o;c++){var j=s*l+(c>>5),k=w[(d+l)*(VF<<5)+(f+c)<<2]?1<<31-c%32:0;O[j]|=k,_|=k}_?A=l:(e.y0++,u--,l--,d++)}e.y1=e.y0+A,e.sprite=O.slice(0,(e.y1-e.y0)*s)}}}function YF(t,e,n){n>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),s=127&o,u=32-s,c=t.y1-t.y0,l=(t.y+t.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var d=0;d<=a;d++)if((r<<u|(d<a?(r=i[f*a+d])>>>s:0))&e[l+d])return!0;l+=n}return!1}function KF(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function JF(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function ZF(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function QF(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(t){var a=t<0?-1:1;switch(Math.sqrt(1+4*a*t)-a&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function tN(t){var e=[],n=-1;while(++n<t)e[n]=0;return e}function eN(t){return"function"===typeof t?t:function(){return t}}var nN={archimedean:ZF,rectangular:QF};const rN=["x","y","font","fontSize","fontStyle","fontWeight","angle"],iN=["text","font","rotate","fontSize","fontStyle","fontWeight"];function aN(t){Vr.call(this,HF(),t)}aN.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:rN}]},Object(Ue["v"])(aN,Vr,{transform(t,e){function n(n){const r=t[n];return Object(Ue["A"])(r)&&e.modified(r.fields)}!t.size||t.size[0]&&t.size[1]||Object(Ue["k"])("Wordcloud size dimensions must be non-zero.");const r=t.modified();if(!(r||e.changed(e.ADD_REM)||iN.some(n)))return;const i=e.materialize(e.SOURCE).source,a=this.value,o=t.as||rN;let s,u=t.fontSize||14;if(Object(Ue["A"])(u)?s=t.fontSizeRange:u=Object(Ue["i"])(u),s){const t=u,e=wh("sqrt")().domain(Object(Ue["m"])(i,t)).range(s);u=n=>e(t(n))}i.forEach(t=>{t[o[0]]=NaN,t[o[1]]=NaN,t[o[3]]=0});const c=a.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(u).random(di).layout(),l=a.size(),f=l[0]>>1,d=l[1]>>1,h=c.length;for(let p,m,g=0;g<h;++g)p=c[g],m=p.datum,m[o[0]]=p.x+f,m[o[1]]=p.y+d,m[o[2]]=p.font,m[o[3]]=p.size,m[o[4]]=p.style,m[o[5]]=p.weight,m[o[6]]=p.rotate;return e.reflow(r).modifies(o)}});var oN=function(t,e){return Array.from(e,e=>t[e])};const sN=t=>new Uint8Array(t),uN=t=>new Uint16Array(t),cN=t=>new Uint32Array(t);function lN(){let t=8,e=[],n=cN(0),r=dN(0,t),i=dN(0,t);return{data:()=>e,seen:()=>n=fN(n,e.length),add(t){for(let n,r=0,i=e.length,a=t.length;r<a;++r)n=t[r],n._index=i++,e.push(n)},remove(t,n){const a=e.length,o=Array(a-t),s=e;let u,c,l;for(c=0;!n[c]&&c<a;++c)o[c]=e[c],s[c]=c;for(l=c;c<a;++c)u=e[c],n[c]?s[c]=-1:(s[c]=l,r[l]=r[c],i[l]=i[c],o[l]=u,u._index=l++),r[c]=0;return e=o,s},size:()=>e.length,curr:()=>r,prev:()=>i,reset:t=>i[t]=r[t],all:()=>t<257?255:t<65537?65535:4294967295,set(t,e){r[t]|=e},clear(t,e){r[t]&=~e},resize(e,n){const a=r.length;(e>a||n>t)&&(t=Math.max(n,t),r=dN(e,t,r),i=dN(e,t))}}}function fN(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function dN(t,e,n){const r=(e<257?sN:e<65537?uN:cN)(t);return n&&r.set(n),r}function hN(t,e,n){const r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(t,e){const n=this,i=n.bisect(n.range,t.value),a=t.index,o=i[0],s=i[1],u=a.length;let c;for(c=0;c<o;++c)e[a[c]]|=r;for(c=s;c<u;++c)e[a[c]]|=r;return n}}}function pN(){let t=cN(0),e=[],n=0;function r(r,i,a){if(!i.length)return[];const o=n,s=i.length,u=cN(s);let c,l,f,d=Array(s);for(f=0;f<s;++f)d[f]=r(i[f]),u[f]=f;if(d=mN(d,u),o)c=e,l=t,e=Array(o+s),t=cN(o+s),gN(a,c,l,o,d,u,s,e,t);else{if(a>0)for(f=0;f<s;++f)u[f]+=a;e=d,t=u}return n=o+s,{index:u,value:d}}function i(r,i){const a=n;let o,s,u;for(s=0;!i[t[s]]&&s<a;++s);for(u=s;s<a;++s)i[o=t[s]]||(t[u]=o,e[u]=e[s],++u);n=a-r}function a(e){for(let r=0,i=n;r<i;++r)t[r]=e[t[r]]}function o(t,r){let i;return r?i=r.length:(r=e,i=n),[Vu(r,t[0],0,i),qu(r,t[1],0,i)]}return{insert:r,remove:i,bisect:o,reindex:a,index:()=>t,size:()=>n}}function mN(t,e){return t.sort.call(e,(e,n)=>{const r=t[e],i=t[n];return r<i?-1:r>i?1:0}),oN(t,e)}function gN(t,e,n,r,i,a,o,s,u){let c,l=0,f=0;for(c=0;l<r&&f<o;++c)e[l]<i[f]?(s[c]=e[l],u[c]=n[l++]):(s[c]=i[f],u[c]=a[f++]+t);for(;l<r;++l,++c)s[c]=e[l],u[c]=n[l];for(;f<o;++f,++c)s[c]=i[f],u[c]=a[f]+t}function bN(t){Vr.call(this,lN(),t),this._indices=null,this._dims=null}function yN(t){Vr.call(this,null,t)}bN.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},Object(Ue["v"])(bN,Vr,{transform(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(t=>e.modified(t.fields));return n?this.reinit(t,e):this.eval(t,e)}return this.init(t,e)},init(t,e){const n=t.fields,r=t.query,i=this._indices={},a=this._dims=[],o=r.length;let s,u,c=0;for(;c<o;++c)s=n[c].fname,u=i[s]||(i[s]=pN()),a.push(hN(u,c,r[c]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),r=t.fields,i=t.query,a=this._indices,o=this._dims,s=this.value,u=s.curr(),c=s.prev(),l=s.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,b,y,v,x,w,O,_;if(c.set(u),e.rem.length&&(v=this.remove(t,e,n)),e.add.length&&s.add(e.add),e.mod.length)for(x={},y=e.mod,w=0,O=y.length;w<O;++w)x[y[w]._index]=1;for(w=0;w<h;++w)_=r[w],(!o[w]||t.modified("fields",w)||e.modified(_.fields))&&(b=_.fname,(m=p[b])||(a[b]=g=pN(),p[b]=m=g.insert(_,e.source,0)),o[w]=hN(g,w,i[w]).onAdd(m,u));for(w=0,O=s.data().length;w<O;++w)v[w]||(c[w]!==u[w]?f.push(w):x[w]&&u[w]!==l&&d.push(w));return s.mask=(1<<h)-1,n},eval(t,e){const n=e.materialize().fork(),r=this._dims.length;let i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},insert(t,e,n){const r=e.add,i=this.value,a=this._dims,o=this._indices,s=t.fields,u={},c=n.add,l=i.size()+r.length,f=a.length;let d,h,p,m=i.size();i.resize(l,f),i.add(r);const g=i.curr(),b=i.prev(),y=i.all();for(d=0;d<f;++d)h=s[d].fname,p=u[h]||(u[h]=o[h].insert(s[d],r,m)),a[d].onAdd(p,g);for(;m<l;++m)b[m]=y,g[m]!==y&&c.push(m)},modify(t,e){const n=e.mod,r=this.value,i=r.curr(),a=r.all(),o=t.mod;let s,u,c;for(s=0,u=o.length;s<u;++s)c=o[s]._index,i[c]!==a&&n.push(c)},remove(t,e,n){const r=this._indices,i=this.value,a=i.curr(),o=i.prev(),s=i.all(),u={},c=n.rem,l=e.rem;let f,d,h,p;for(f=0,d=l.length;f<d;++f)h=l[f]._index,u[h]=1,o[h]=p=a[h],a[h]=s,p!==s&&c.push(h);for(h in r)r[h].remove(d,u);return this.reindex(e,d,u),u},reindex(t,e,n){const r=this._indices,i=this.value;t.runAfter(()=>{const t=i.remove(e,n);for(const e in r)r[e].reindex(t)})},update(t,e,n){const r=this._dims,i=t.query,a=e.stamp,o=r.length;let s,u,c=0;for(n.filters=0,u=0;u<o;++u)t.modified("query",u)&&(s=u,++c);if(1===c)c=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(u=0,c=0;u<o;++u)t.modified("query",u)&&(c|=r[u].one,this.incrementAll(r[u],i[u],a,n.add),n.rem=n.add);return c},incrementAll(t,e,n,r){const i=this.value,a=i.seen(),o=i.curr(),s=i.prev(),u=t.index(),c=t.bisect(t.range),l=t.bisect(e),f=l[0],d=l[1],h=c[0],p=c[1],m=t.one;let g,b,y;if(f<h)for(g=f,b=Math.min(h,d);g<b;++g)y=u[g],a[y]!==n&&(s[y]=o[y],a[y]=n,r.push(y)),o[y]^=m;else if(f>h)for(g=h,b=Math.min(f,p);g<b;++g)y=u[g],a[y]!==n&&(s[y]=o[y],a[y]=n,r.push(y)),o[y]^=m;if(d>p)for(g=Math.max(f,p),b=d;g<b;++g)y=u[g],a[y]!==n&&(s[y]=o[y],a[y]=n,r.push(y)),o[y]^=m;else if(d<p)for(g=Math.max(h,d),b=p;g<b;++g)y=u[g],a[y]!==n&&(s[y]=o[y],a[y]=n,r.push(y)),o[y]^=m;t.range=e.slice()},incrementOne(t,e,n,r){const i=this.value,a=i.curr(),o=t.index(),s=t.bisect(t.range),u=t.bisect(e),c=u[0],l=u[1],f=s[0],d=s[1],h=t.one;let p,m,g;if(c<f)for(p=c,m=Math.min(f,l);p<m;++p)g=o[p],a[g]^=h,n.push(g);else if(c>f)for(p=f,m=Math.min(c,d);p<m;++p)g=o[p],a[g]^=h,r.push(g);if(l>d)for(p=Math.max(c,d),m=l;p<m;++p)g=o[p],a[g]^=h,n.push(g);else if(l<d)for(p=Math.max(f,l),m=d;p<m;++p)g=o[p],a[g]^=h,r.push(g);t.range=e.slice()}}),yN.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(Ue["v"])(yN,Vr,{transform(t,e){const n=~(t.ignore||0),r=t.filter,i=r.mask;if(0===(i&n))return e.StopPropagation;const a=e.fork(e.ALL),o=r.data(),s=r.curr(),u=r.prev(),c=t=>s[t]&n?null:o[t];return a.filter(a.MOD,c),i&i-1?(a.filter(a.ADD,t=>{const e=s[t]&n,r=!e&&e^u[t]&n;return r?o[t]:null}),a.filter(a.REM,t=>{const e=s[t]&n,r=e&&!(e^e^u[t]&n);return r?o[t]:null})):(a.filter(a.ADD,c),a.filter(a.REM,t=>(s[t]&n)===i?o[t]:null)),a.filter(a.SOURCE,t=>c(t._index))}});var vN=n("f161"),xN=n("cf61"),wN=0;function ON(){wN=0}const _N="p_";function AN(t){return t&&t.gradient}function jN(t,e,n){let r=t.id,i=t.gradient,a="radial"===i?_N:"";return r||(r=t.id="gradient_"+wN++,"radial"===i?(t.x1=kN(t.x1,.5),t.y1=kN(t.y1,.5),t.r1=kN(t.r1,0),t.x2=kN(t.x2,.5),t.y2=kN(t.y2,.5),t.r2=kN(t.r2,.5),a=_N):(t.x1=kN(t.x1,0),t.y1=kN(t.y1,0),t.x2=kN(t.x2,1),t.y2=kN(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+a+r+")"}function kN(t,e){return null!=t?t:e}var CN=function(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}},EN=n("a912");function SN(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function DN(t){this._context=t}DN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:SN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:SN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var FN=function(t){return new DN(t)},NN=function(){};function TN(t){this._context=t}TN.prototype={areaStart:NN,areaEnd:NN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:SN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var MN=function(t){return new TN(t)};function IN(t){this._context=t}IN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:SN(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var RN=function(t){return new IN(t)};function $N(t,e){this._basis=new DN(t),this._beta=e}$N.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0){var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,u=-1;while(++u<=n)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*o),this._beta*e[u]+(1-this._beta)*(a+r*s))}this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var BN=function t(e){function n(t){return 1===e?new DN(t):new $N(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function zN(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function LN(t,e){this._context=t,this._k=(1-e)/6}LN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:zN(this,this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:zN(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var PN=function t(e){function n(t){return new LN(t,e)}return n.tension=function(e){return t(+e)},n}(0);function UN(t,e){this._context=t,this._k=(1-e)/6}UN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:zN(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var WN=function t(e){function n(t){return new UN(t,e)}return n.tension=function(e){return t(+e)},n}(0);function qN(t,e){this._context=t,this._k=(1-e)/6}qN.prototype={areaStart:NN,areaEnd:NN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:zN(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var VN=function t(e){function n(t){return new qN(t,e)}return n.tension=function(e){return t(+e)},n}(0),GN=Math.abs,HN=Math.atan2,XN=Math.cos,YN=Math.max,KN=Math.min,JN=Math.sin,ZN=Math.sqrt,QN=1e-12,tT=Math.PI,eT=tT/2,nT=2*tT;function rT(t){return t>1?0:t<-1?tT:Math.acos(t)}function iT(t){return t>=1?eT:t<=-1?-eT:Math.asin(t)}function aT(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>QN){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>QN){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function oT(t,e){this._context=t,this._alpha=e}oT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:aT(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var sT=function t(e){function n(t){return e?new oT(t,e):new LN(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function uT(t,e){this._context=t,this._alpha=e}uT.prototype={areaStart:NN,areaEnd:NN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:aT(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var cT=function t(e){function n(t){return e?new uT(t,e):new qN(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function lT(t,e){this._context=t,this._alpha=e}lT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:aT(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var fT=function t(e){function n(t){return e?new lT(t,e):new UN(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function dT(t){this._context=t}dT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};var hT=function(t){return new dT(t)};function pT(t){this._context=t}pT.prototype={areaStart:NN,areaEnd:NN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var mT=function(t){return new pT(t)};function gT(t){return t<0?-1:1}function bT(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(gT(a)+gT(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function yT(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function vT(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function xT(t){this._context=t}function wT(t){this._context=new OT(t)}function OT(t){this._context=t}function _T(t){return new xT(t)}function AT(t){return new wT(t)}function jT(t){this._context=t}function kT(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}xT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vT(this,this._t0,yT(this,this._t0));break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,vT(this,yT(this,n=bT(this,t,e)),n);break;default:vT(this,this._t0,n=bT(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(wT.prototype=Object.create(xT.prototype)).point=function(t,e){xT.prototype.point.call(this,e,t)},OT.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},jT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=kT(t),i=kT(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var CT=function(t){return new jT(t)};function ET(t,e){this._context=t,this._t=e}ET.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}this._x=t,this._y=e}};var ST=function(t){return new ET(t,.5)};function DT(t){return new ET(t,0)}function FT(t){return new ET(t,1)}var NT={basis:{curve:FN},"basis-closed":{curve:MN},"basis-open":{curve:RN},bundle:{curve:BN,tension:"beta",value:.85},cardinal:{curve:PN,tension:"tension",value:0},"cardinal-open":{curve:WN,tension:"tension",value:0},"cardinal-closed":{curve:VN,tension:"tension",value:0},"catmull-rom":{curve:sT,tension:"alpha",value:.5},"catmull-rom-closed":{curve:cT,tension:"alpha",value:.5},"catmull-rom-open":{curve:fT,tension:"alpha",value:.5},linear:{curve:hT},"linear-closed":{curve:mT},monotone:{horizontal:AT,vertical:_T},natural:{curve:CT},step:{curve:ST},"step-after":{curve:FT},"step-before":{curve:DT}};function TT(t,e,n){var r=Object(EN["f"])(NT,t)&&NT[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var MT={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},IT=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],RT=function(t){var e,n,r,i,a,o,s,u,c,l,f,d=[];for(e=t.slice().replace(IT[0],"###$1").split(IT[1]).slice(1),u=0,l=e.length;u<l;++u){for(n=e[u],r=n.slice(1).trim().replace(IT[2],"$1###$2").split(IT[3]),o=n.charAt(0),i=[o],c=0,f=r.length;c<f;++c)(a=+r[c])===a&&i.push(a);if(s=MT[o.toLowerCase()],i.length-1>s)for(c=1,f=i.length;c<f;c+=s)d.push([o].concat(i.slice(c,c+s)));else d.push(i)}return d};const $T=Math.PI/180,BT=1e-14,zT=Math.PI/2,LT=2*Math.PI,PT=Math.sqrt(3)/2;var UT={},WT={},qT=[].join;function VT(t,e,n,r,i,a,o,s,u){var c=qT.call(arguments);if(UT[c])return UT[c];var l=o*$T,f=Math.sin(l),d=Math.cos(l);n=Math.abs(n),r=Math.abs(r);var h=d*(s-t)*.5+f*(u-e)*.5,p=d*(u-e)*.5-f*(s-t)*.5,m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);var g=d/n,b=f/n,y=-f/r,v=d/r,x=g*s+b*u,w=y*s+v*u,O=g*t+b*e,_=y*t+v*e,A=(O-x)*(O-x)+(_-w)*(_-w),j=1/A-.25;j<0&&(j=0);var k=Math.sqrt(j);a==i&&(k=-k);var C=.5*(x+O)-k*(_-w),E=.5*(w+_)+k*(O-x),S=Math.atan2(w-E,x-C),D=Math.atan2(_-E,O-C),F=D-S;F<0&&1===a?F+=LT:F>0&&0===a&&(F-=LT);for(var N=Math.ceil(Math.abs(F/(zT+.001))),T=[],M=0;M<N;++M){var I=S+M*F/N,R=S+(M+1)*F/N;T[M]=[C,E,I,R,n,r,f,d]}return UT[c]=T}function GT(t){var e=qT.call(t);if(WT[e])return WT[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=c*o,f=-u*s,d=u*o,h=c*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(a),b=Math.sin(a),y=.5*(a-i),v=Math.sin(.5*y),x=8/3*v*v/Math.sin(y),w=n+p-x*m,O=r+m+x*p,_=n+g,A=r+b,j=_+x*b,k=A-x*g;return WT[e]=[l*w+f*O,d*w+h*O,l*j+f*k,d*j+h*k,l*_+f*A,d*_+h*A]}var HT=["l",0,0,0,0,0,0,0];function XT(t,e,n){var r=HT[0]=t[0];if("a"===r||"A"===r)HT[1]=e*t[1],HT[2]=n*t[2],HT[3]=t[3],HT[4]=t[4],HT[5]=t[5],HT[6]=e*t[6],HT[7]=n*t[7];else if("h"===r||"H"===r)HT[1]=e*t[1];else if("v"===r||"V"===r)HT[1]=n*t[1];else for(var i=1,a=t.length;i<a;++i)HT[i]=(i%2==1?e:n)*t[i];return HT}var YT=function(t,e,n,r,i,a){var o,s,u,c,l,f=null,d=0,h=0,p=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),t.beginPath&&t.beginPath();for(var g=0,b=e.length;g<b;++g){switch(o=e[g],1===i&&1===a||(o=XT(o,i,a)),o[0]){case"l":d+=o[1],h+=o[2],t.lineTo(d+n,h+r);break;case"L":d=o[1],h=o[2],t.lineTo(d+n,h+r);break;case"h":d+=o[1],t.lineTo(d+n,h+r);break;case"H":d=o[1],t.lineTo(d+n,h+r);break;case"v":h+=o[1],t.lineTo(d+n,h+r);break;case"V":h=o[1],t.lineTo(d+n,h+r);break;case"m":d+=o[1],h+=o[2],t.moveTo(d+n,h+r);break;case"M":d=o[1],h=o[2],t.moveTo(d+n,h+r);break;case"c":s=d+o[5],u=h+o[6],p=d+o[3],m=h+o[4],t.bezierCurveTo(d+o[1]+n,h+o[2]+r,p+n,m+r,s+n,u+r),d=s,h=u;break;case"C":d=o[5],h=o[6],p=o[3],m=o[4],t.bezierCurveTo(o[1]+n,o[2]+r,p+n,m+r,d+n,h+r);break;case"s":s=d+o[3],u=h+o[4],p=2*d-p,m=2*h-m,t.bezierCurveTo(p+n,m+r,d+o[1]+n,h+o[2]+r,s+n,u+r),p=d+o[1],m=h+o[2],d=s,h=u;break;case"S":s=o[3],u=o[4],p=2*d-p,m=2*h-m,t.bezierCurveTo(p+n,m+r,o[1]+n,o[2]+r,s+n,u+r),d=s,h=u,p=o[1],m=o[2];break;case"q":s=d+o[3],u=h+o[4],p=d+o[1],m=h+o[2],t.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"Q":s=o[3],u=o[4],t.quadraticCurveTo(o[1]+n,o[2]+r,s+n,u+r),d=s,h=u,p=o[1],m=o[2];break;case"t":s=d+o[1],u=h+o[2],null===f[0].match(/[QqTt]/)?(p=d,m=h):"t"===f[0]?(p=2*d-c,m=2*h-l):"q"===f[0]&&(p=2*d-p,m=2*h-m),c=p,l=m,t.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u,p=d+o[1],m=h+o[2];break;case"T":s=o[1],u=o[2],p=2*d-p,m=2*h-m,t.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"a":KT(t,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+h+r]),d+=o[6],h+=o[7];break;case"A":KT(t,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],h=o[7];break;case"z":case"Z":t.closePath();break}f=o}};function KT(t,e,n,r){for(var i=VT(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),a=0;a<i.length;++a){var o=GT(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var JT=.5773502691896257,ZT={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,LT)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,a=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-n),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=PT*n,i=r-n*JT,a=n/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=PT*n,i=r-n*JT;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=PT*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=PT*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=PT*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=PT*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function QT(t){return Object(EN["f"])(ZT,t)?ZT[t]:eM(t)}var tM={};function eM(t){if(!Object(EN["f"])(tM,t)){var e=RT(t);tM[t]={draw:function(t,n){YT(t,e,0,0,Math.sqrt(n)/2)}}}return tM[t]}var nM=Math.PI,rM=2*nM,iM=1e-6,aM=rM-iM;function oM(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function sM(){return new oM}oM.prototype=sM.prototype={constructor:oM,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,u=r-e,c=a-t,l=o-e,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>iM)if(Math.abs(l*s-u*c)>iM&&i){var d=n-a,h=r-o,p=s*s+u*u,m=d*d+h*h,g=Math.sqrt(p),b=Math.sqrt(f),y=i*Math.tan((nM-Math.acos((p+f-m)/(2*g*b)))/2),v=y/b,x=y/g;Math.abs(v-1)>iM&&(this._+="L"+(t+v*c)+","+(e+v*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>c*h)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),u=t+o,c=e+s,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>iM||Math.abs(this._y1-c)>iM)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%rM+rM),f>aM?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):f>iM&&(this._+="A"+n+","+n+",0,"+ +(f>=nM)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var uM=sM;const cM=.448084975506;function lM(t){return t.x}function fM(t){return t.y}function dM(t){return t.width}function hM(t){return t.height}function pM(t){return"function"===typeof t?t:()=>+t}function mM(t,e,n){return Math.max(e,Math.min(t,n))}var gM=function(){var t=lM,e=fM,n=dM,r=hM,i=pM(0),a=i,o=i,s=i,u=null;function c(c,l,f){var d,h=null!=l?l:+t.call(this,c),p=null!=f?f:+e.call(this,c),m=+n.call(this,c),g=+r.call(this,c),b=Math.min(m,g)/2,y=mM(+i.call(this,c),0,b),v=mM(+a.call(this,c),0,b),x=mM(+o.call(this,c),0,b),w=mM(+s.call(this,c),0,b);if(u||(u=d=uM()),y<=0&&v<=0&&x<=0&&w<=0)u.rect(h,p,m,g);else{var O=h+m,_=p+g;u.moveTo(h+y,p),u.lineTo(O-v,p),u.bezierCurveTo(O-cM*v,p,O,p+cM*v,O,p+v),u.lineTo(O,_-w),u.bezierCurveTo(O,_-cM*w,O-cM*w,_,O-w,_),u.lineTo(h+x,_),u.bezierCurveTo(h+cM*x,_,h,_-cM*x,h,_-x),u.lineTo(h,p+y),u.bezierCurveTo(h,p+cM*y,h+cM*y,p,h+y,p),u.closePath()}if(d)return u=null,d+""||null}return c.x=function(e){return arguments.length?(t=pM(e),c):t},c.y=function(t){return arguments.length?(e=pM(t),c):e},c.width=function(t){return arguments.length?(n=pM(t),c):n},c.height=function(t){return arguments.length?(r=pM(t),c):r},c.cornerRadius=function(t,e,n,r){return arguments.length?(i=pM(t),a=null!=e?pM(e):i,s=null!=n?pM(n):i,o=null!=r?pM(r):a,c):i},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c},bM=function(){var t,e,n,r,i,a,o,s,u=null;function c(t,e,n){var r=n/2;if(i){var c=o-e,l=t-a;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*s,h=(l/=f)*s,p=Math.atan2(l,c);u.moveTo(a-d,o-h),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(a+d,o+h),u.arc(a,o,s,p,p+Math.PI)}else u.arc(t,e,r,0,LT);u.closePath()}else i=1;a=t,o=e,s=r}function l(a){var o,s,l,f=a.length,d=!1;for(null==u&&(u=l=uM()),o=0;o<=f;++o)!(o<f&&r(s=a[o],o,a))===d&&(d=!d)&&(i=0),d&&c(+t(s,o,a),+e(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l},yM=function(t){return function(){return t}};function vM(t){return t.innerRadius}function xM(t){return t.outerRadius}function wM(t){return t.startAngle}function OM(t){return t.endAngle}function _M(t){return t&&t.padAngle}function AM(t,e,n,r,i,a,o,s){var u=n-t,c=r-e,l=o-i,f=s-a,d=f*u-l*c;if(!(d*d<QN))return d=(l*(e-a)-f*(t-i))/d,[t+d*u,e+d*c]}function jM(t,e,n,r,i,a,o){var s=t-n,u=e-r,c=(o?a:-a)/ZN(s*s+u*u),l=c*u,f=-c*s,d=t+l,h=e+f,p=n+l,m=r+f,g=(d+p)/2,b=(h+m)/2,y=p-d,v=m-h,x=y*y+v*v,w=i-a,O=d*m-p*h,_=(v<0?-1:1)*ZN(YN(0,w*w*x-O*O)),A=(O*v-y*_)/x,j=(-O*y-v*_)/x,k=(O*v+y*_)/x,C=(-O*y+v*_)/x,E=A-g,S=j-b,D=k-g,F=C-b;return E*E+S*S>D*D+F*F&&(A=k,j=C),{cx:A,cy:j,x01:-l,y01:-f,x11:A*(i/w-1),y11:j*(i/w-1)}}var kM=function(){var t=vM,e=xM,n=yM(0),r=null,i=wM,a=OM,o=_M,s=null;function u(){var u,c,l=+t.apply(this,arguments),f=+e.apply(this,arguments),d=i.apply(this,arguments)-eT,h=a.apply(this,arguments)-eT,p=GN(h-d),m=h>d;if(s||(s=u=uM()),f<l&&(c=f,f=l,l=c),f>QN)if(p>nT-QN)s.moveTo(f*XN(d),f*JN(d)),s.arc(0,0,f,d,h,!m),l>QN&&(s.moveTo(l*XN(h),l*JN(h)),s.arc(0,0,l,h,d,m));else{var g,b,y=d,v=h,x=d,w=h,O=p,_=p,A=o.apply(this,arguments)/2,j=A>QN&&(r?+r.apply(this,arguments):ZN(l*l+f*f)),k=KN(GN(f-l)/2,+n.apply(this,arguments)),C=k,E=k;if(j>QN){var S=iT(j/l*JN(A)),D=iT(j/f*JN(A));(O-=2*S)>QN?(S*=m?1:-1,x+=S,w-=S):(O=0,x=w=(d+h)/2),(_-=2*D)>QN?(D*=m?1:-1,y+=D,v-=D):(_=0,y=v=(d+h)/2)}var F=f*XN(y),N=f*JN(y),T=l*XN(w),M=l*JN(w);if(k>QN){var I,R=f*XN(v),$=f*JN(v),B=l*XN(x),z=l*JN(x);if(p<tT&&(I=AM(F,N,B,z,R,$,T,M))){var L=F-I[0],P=N-I[1],U=R-I[0],W=$-I[1],q=1/JN(rT((L*U+P*W)/(ZN(L*L+P*P)*ZN(U*U+W*W)))/2),V=ZN(I[0]*I[0]+I[1]*I[1]);C=KN(k,(l-V)/(q-1)),E=KN(k,(f-V)/(q+1))}}_>QN?E>QN?(g=jM(B,z,F,N,f,E,m),b=jM(R,$,T,M,f,E,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),E<k?s.arc(g.cx,g.cy,E,HN(g.y01,g.x01),HN(b.y01,b.x01),!m):(s.arc(g.cx,g.cy,E,HN(g.y01,g.x01),HN(g.y11,g.x11),!m),s.arc(0,0,f,HN(g.cy+g.y11,g.cx+g.x11),HN(b.cy+b.y11,b.cx+b.x11),!m),s.arc(b.cx,b.cy,E,HN(b.y11,b.x11),HN(b.y01,b.x01),!m))):(s.moveTo(F,N),s.arc(0,0,f,y,v,!m)):s.moveTo(F,N),l>QN&&O>QN?C>QN?(g=jM(T,M,R,$,l,-C,m),b=jM(F,N,B,z,l,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<k?s.arc(g.cx,g.cy,C,HN(g.y01,g.x01),HN(b.y01,b.x01),!m):(s.arc(g.cx,g.cy,C,HN(g.y01,g.x01),HN(g.y11,g.x11),!m),s.arc(0,0,l,HN(g.cy+g.y11,g.cx+g.x11),HN(b.cy+b.y11,b.cx+b.x11),m),s.arc(b.cx,b.cy,C,HN(b.y11,b.x11),HN(b.y01,b.x01),!m))):s.arc(0,0,l,w,x,m):s.lineTo(T,M)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-tT/2;return[XN(r)*n,JN(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:yM(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:yM(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:yM(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:yM(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:yM(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"===typeof t?t:yM(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:yM(+t),u):o},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u};function CM(t){return t[0]}function EM(t){return t[1]}var SM=function(){var t=CM,e=EM,n=yM(!0),r=null,i=hT,a=null;function o(o){var s,u,c,l=o.length,f=!1;for(null==r&&(a=i(c=uM())),s=0;s<=l;++s)!(s<l&&n(u=o[s],s,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(u,s,o),+e(u,s,o));if(c)return a=null,c+""||null}return o.x=function(e){return arguments.length?(t="function"===typeof e?e:yM(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:yM(+t),o):e},o.defined=function(t){return arguments.length?(n="function"===typeof t?t:yM(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o},DM=function(){var t=CM,e=null,n=yM(0),r=EM,i=yM(!0),a=null,o=hT,s=null;function u(u){var c,l,f,d,h,p=u.length,m=!1,g=new Array(p),b=new Array(p);for(null==a&&(s=o(h=uM())),c=0;c<=p;++c){if(!(c<p&&i(d=u[c],c,u))===m)if(m=!m)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=l;--f)s.point(g[f],b[f]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+t(d,c,u),b[c]=+n(d,c,u),s.point(e?+e(d,c,u):g[c],r?+r(d,c,u):b[c]))}if(h)return s=null,h+""||null}function c(){return SM().defined(i).curve(o).context(a)}return u.x=function(n){return arguments.length?(t="function"===typeof n?n:yM(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"===typeof e?e:yM(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:yM(+t),u):e},u.y=function(t){return arguments.length?(n="function"===typeof t?t:yM(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"===typeof t?t:yM(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:yM(+t),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"===typeof t?t:yM(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),u):a},u},FM={draw:function(t,e){var n=Math.sqrt(e/tT);t.moveTo(n,0),t.arc(0,0,n,0,nT)}},NM=(Math.sqrt(1/3),Math.sin(tT/10)/Math.sin(7*tT/10)),TM=(Math.sin(nT/10),Math.cos(nT/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){var t=yM(FM),e=yM(64),n=null;function r(){var r;if(n||(n=r=uM()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"===typeof e?e:yM(e),r):t},r.size=function(t){return arguments.length?(e="function"===typeof t?t:yM(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r});function MM(t,e){return null!=t?t:e}const IM=t=>t.x||0,RM=t=>t.y||0,$M=t=>t.width||0,BM=t=>t.height||0,zM=t=>(t.x||0)+(t.width||0),LM=t=>(t.y||0)+(t.height||0),PM=t=>t.startAngle||0,UM=t=>t.endAngle||0,WM=t=>t.padAngle||0,qM=t=>t.innerRadius||0,VM=t=>t.outerRadius||0,GM=t=>t.cornerRadius||0,HM=t=>MM(t.cornerRadiusTopLeft,t.cornerRadius)||0,XM=t=>MM(t.cornerRadiusTopRight,t.cornerRadius)||0,YM=t=>MM(t.cornerRadiusBottomRight,t.cornerRadius)||0,KM=t=>MM(t.cornerRadiusBottomLeft,t.cornerRadius)||0,JM=t=>MM(t.size,64),ZM=t=>t.size||1,QM=t=>!(!1===t.defined),tI=t=>QT(t.shape||"circle"),eI=kM().startAngle(PM).endAngle(UM).padAngle(WM).innerRadius(qM).outerRadius(VM).cornerRadius(GM),nI=DM().x(IM).y1(RM).y0(LM).defined(QM),rI=DM().y(RM).x1(IM).x0(zM).defined(QM),iI=SM().x(IM).y(RM).defined(QM),aI=gM().x(IM).y(RM).width($M).height(BM).cornerRadius(HM,XM,YM,KM),oI=TM().type(tI).size(JM),sI=bM().x(IM).y(RM).defined(QM).size(ZM);function uI(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function cI(t,e){return eI.context(t)(e)}function lI(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?rI:nI).curve(TT(r,n.orient,n.tension)).context(t)(e)}function fI(t,e){var n=e[0],r=n.interpolate||"linear";return iI.curve(TT(r,n.orient,n.tension)).context(t)(e)}function dI(t,e,n,r){return aI.context(t)(e,n,r)}function hI(t,e){return(e.mark.shape||e.shape).context(t)(e)}function pI(t,e){return oI.context(t)(e)}function mI(t,e){return sI.context(t)(e)}var gI=1;function bI(){gI=1}var yI=function(t,e,n){var r=e.clip,i=t._defs,a=e.clip_id||(e.clip_id="clip"+gI++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(EN["j"])(r)?o.path=r(null):uI(n)?o.path=dI(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"};function vI(t){this.clear(),t&&this.union(t)}var xI=vI.prototype;function wI(t){this.mark=t,this.bounds=this.bounds||new vI}function OI(t){wI.call(this,t),this.items=this.items||[]}xI.clone=function(){return new vI(this)},xI.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},xI.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},xI.equals=function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},xI.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},xI.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},xI.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},xI.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},xI.scale=function(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},xI.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},xI.rotate=function(t,e,n){const r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},xI.rotatedPoints=function(t,e,n){var{x1:r,y1:i,x2:a,y2:o}=this,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*o+c,u*r+s*o+l,s*a-u*i+c,u*a+s*i+l,s*a-u*o+c,u*a+s*o+l]},xI.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},xI.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},xI.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},xI.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},xI.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},xI.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},xI.width=function(){return this.x2-this.x1},xI.height=function(){return this.y2-this.y1},Object(EN["h"])(OI,wI);const _I=/^([A-Za-z]+:)?\/\//,AI=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,jI=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,kI="file://";var CI=function(t,e){return n=>({options:n||{},sanitize:SI,load:EI,fileAccess:!!e,file:DI(e),http:NI(t)})};async function EI(t,e){const n=await this.sanitize(t,e),r=n.href;return n.localFile?this.file(r):this.http(r,e)}async function SI(t,e){e=Object(EN["d"])({},this.options,e);const n=this.fileAccess,r={href:null};let i,a,o;const s=AI.test(t.replace(jI,""));null!=t&&"string"===typeof t&&s||Object(EN["c"])("Sanitize failure, invalid URI: "+Object(EN["r"])(t));const u=_I.test(t);return(o=e.baseURL)&&!u&&(t.startsWith("/")||"/"===o[o.length-1]||(t="/"+t),t=o+t),a=(i=t.startsWith(kI))||"file"===e.mode||"http"!==e.mode&&!u&&n,i?t=t.slice(kI.length):t.startsWith("//")&&("file"===e.defaultProtocol?(t=t.slice(2),a=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(r,"localFile",{value:!!a}),r.href=t,e.target&&(r.target=e.target+""),e.rel&&(r.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(r.crossOrigin=e.crossOrigin+""),r}function DI(t){return t?e=>new Promise((n,r)=>{t.readFile(e,(t,e)=>{t?r(t):n(e)})}):FI}async function FI(){Object(EN["c"])("No file system access.")}function NI(t){return t?async function(e,n){const r=Object(EN["d"])({},this.options.http,n),i=n&&n.response,a=await t(e,r);return a.ok?Object(EN["j"])(a[i])?a[i]():a.text():Object(EN["c"])(a.status+""+a.statusText)}:TI}async function TI(){Object(EN["c"])("No HTTP fetch method available.")}EN["s"],EN["u"],EN["u"],EN["t"],EN["w"],EN["g"];function MI(t){const e=function(e,n){const r={delimiter:t};return II(e,n?Object(EN["d"])(n,r):r)};return e.responseType="text",e}function II(t,e){return e.header&&(t=e.header.map(EN["r"]).join(e.delimiter)+"\n"+t),Object(fn["a"])(e.delimiter).parse(t+"")}II.responseType="text";var RI=n("9443");const $I={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function BI(t,e){let n,r,i,a;return t=Object(RI["a"])(t,e),e&&e.feature?(n=mn["a"],i=e.feature):e&&e.mesh?(n=mn["b"],i=e.mesh,a=$I[e.filter]):Object(EN["c"])("Missing TopoJSON feature or mesh parameter."),r=(r=t.objects[i])?n(t,r,a):Object(EN["c"])("Invalid TopoJSON object: "+i),r&&r.features||[r]}BI.responseType="json";MI(","),MI("\t"),RI["a"];const zI=CI("undefined"!==typeof fetch&&fetch,null);function LI(t){this._pending=0,this._loader=t||zI()}var PI=LI.prototype;function UI(t){t._pending+=1}function WI(t){t._pending-=1}PI.pending=function(){return this._pending},PI.sanitizeURL=function(t){var e=this;return UI(e),e._loader.sanitize(t,{context:"href"}).then((function(t){return WI(e),t})).catch((function(){return WI(e),null}))},PI.loadImage=function(t){const e=this,n=Uu();return UI(e),e._loader.sanitize(t,{context:"image"}).then((function(t){const r=t.href;if(!r||!n)throw{url:r};const i=new n,a=Object(EN["f"])(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=a&&(i.crossOrigin=a),i.onload=()=>WI(e),i.onerror=()=>WI(e),i.src=r,i})).catch((function(t){return WI(e),{complete:!1,width:0,height:0,src:t&&t.url||""}}))},PI.ready=function(){var t=this;return new Promise((function(e){function n(r){t.pending()?setTimeout((function(){n(!0)}),10):e(r)}n(!1)}))};var qI=function(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){const r=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(r+(n?VI(e,r):0))}return t};function VI(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}var GI,HI,XI,YI=LT-1e-8;function KI(t){return GI=t,KI}function JI(){}function ZI(t,e){GI.add(t,e)}function QI(t,e){ZI(HI=t,XI=e)}function tR(t){ZI(t,GI.y1)}function eR(t){ZI(GI.x1,t)}function nR(t,e,n,r){const i=(t-e)/(t+n-2*e);0<i&&i<1&&r(t+(e-t)*i)}function rR(t,e,n,r,i){const a=r-t+3*e-3*n,o=t+n-2*e,s=t-e;let u,c=0,l=0;Math.abs(a)>BT?(u=o*o+s*a,u>=0&&(u=Math.sqrt(u),c=(-o+u)/a,l=(-o-u)/a)):c=.5*s/o,0<c&&c<1&&i(iR(c,t,e,n,r)),0<l&&l<1&&i(iR(l,t,e,n,r))}function iR(t,e,n,r,i){const a=1-t,o=a*a,s=t*t;return o*a*e+3*o*t*n+3*a*s*r+s*t*i}KI.beginPath=JI,KI.closePath=JI,KI.moveTo=QI,KI.lineTo=QI,KI.rect=function(t,e,n,r){ZI(t+n,e+r),QI(t,e)},KI.quadraticCurveTo=function(t,e,n,r){nR(HI,t,n,tR),nR(XI,e,r,eR),QI(n,r)},KI.bezierCurveTo=function(t,e,n,r,i,a){rR(HI,t,n,i,tR),rR(XI,e,r,a,eR),QI(i,a)},KI.arc=function(t,e,n,r,i,a){if(HI=n*Math.cos(i)+t,XI=n*Math.sin(i)+e,Math.abs(i-r)>YI)ZI(t-n,e-n),ZI(t+n,e+n);else{const o=r=>ZI(n*Math.cos(r)+t,n*Math.sin(r)+e);let s,u;if(o(r),o(i),i!==r)if(r%=LT,r<0&&(r+=LT),i%=LT,i<0&&(i+=LT),i<r&&(a=!a,s=r,r=i,i=s),a)for(i-=LT,s=r-r%zT,u=0;u<4&&s>i;++u,s-=zT)o(s);else for(s=r-r%zT+zT,u=0;u<4&&s<i;++u,s+=zT)o(s)}};var aR=(aR=Pu(1,1))?aR.getContext("2d"):null;const oR=new vI;function sR(t){return function(e,n){if(!aR)return!0;t(aR,e),oR.clear().union(e.bounds).intersect(n).round();const{x1:r,y1:i,x2:a,y2:o}=oR;for(let t=i;t<=o;++t)for(let e=r;e<=a;++e)if(aR.isPointInPath(e,t))return!0;return!1}}function uR(t,e){return e.contains(t.x||0,t.y||0)}function cR(t,e){const n=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return e.intersects(oR.set(n,r,n+i,r+a))}function lR(t,e){const n=t.x||0,r=t.y||0,i=null!=t.x2?t.x2:n,a=null!=t.y2?t.y2:r;return fR(e,n,r,i,a)}function fR(t,e,n,r,i){const{x1:a,y1:o,x2:s,y2:u}=t,c=r-e,l=i-n;let f,d,h,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(f=-c,d=-(a-e)),1===p&&(f=c,d=s-e),2===p&&(f=-l,d=-(o-n)),3===p&&(f=l,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>g)return!1;h>m&&(m=h)}else if(f>0){if(h<m)return!1;h<g&&(g=h)}}return!0}var dR=function(t,e){t.globalCompositeOperation=e.blend||"source-over"},hR=function(t,e){return null==t?e:t};function pR(t,e){const n=e.length;for(let r=0;r<n;++r)t.addColorStop(e[r].offset,e[r].color);return t}var mR=function(t,e,n){const r=n.width(),i=n.height();let a;if("radial"===e.gradient)a=t.createRadialGradient(n.x1+hR(e.x1,.5)*r,n.y1+hR(e.y1,.5)*i,Math.max(r,i)*hR(e.r1,0),n.x1+hR(e.x2,.5)*r,n.y1+hR(e.y2,.5)*i,Math.max(r,i)*hR(e.r2,.5));else{const o=hR(e.x1,0),s=hR(e.y1,0),u=hR(e.x2,1),c=hR(e.y2,0);if(o!==u&&s!==c&&r!==i){const n=Pu(Math.ceil(r),Math.ceil(i)),a=n.getContext("2d");return a.scale(r,i),a.fillStyle=pR(a.createLinearGradient(o,s,u,c),e.stops),a.fillRect(0,0,r,i),t.createPattern(n,"no-repeat")}a=t.createLinearGradient(n.x1+o*r,n.y1+s*i,n.x1+u*r,n.y1+c*i)}return pR(a,e.stops)},gR=function(t,e,n){return AN(n)?mR(t,n,e.bounds):n},bR=function(t,e,n){return n*=null==e.fillOpacity?1:e.fillOpacity,n>0&&(t.globalAlpha=n,t.fillStyle=gR(t,e,e.fill),!0)},yR=[],vR=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity,n>0&&(t.globalAlpha=n,t.strokeStyle=gR(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||yR),t.lineDashOffset=e.strokeDashOffset||0),!0))};function xR(t,e){return t.zindex-e.zindex||t.index-e.index}function wR(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)e=i[n],e.index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(xR)}function OR(t,e){var n,r,i=t.items;if(i&&i.length){var a=wR(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}}function _R(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var a=wR(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(i=t.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function AR(t){return function(e,n,r){OR(n,(function(n){r&&!r.intersects(n.bounds)||kR(t,e,n,n)}))}}function jR(t){return function(e,n,r){!n.items.length||r&&!r.intersects(n.bounds)||kR(t,e,n.items[0],n.items)}}function kR(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(dR(e,n),n.fill&&bR(e,n,i)&&e.fill(),n.stroke&&vR(e,n,i)&&e.stroke()))}function CR(t){return t=t||EN["x"],function(e,n,r,i,a,o){return r*=e.pixelRatio,i*=e.pixelRatio,_R(n,(function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return t(e,n,r,i,a,o)?n:void 0}))}}function ER(t,e){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function SR(t){return CR(ER(t))}function DR(t,e){return"translate("+t+","+e+")"}function FR(t){return"rotate("+t+")"}function NR(t,e){return"scale("+t+","+e+")"}function TR(t){return DR(t.x||0,t.y||0)}function MR(t){return DR(t.x||0,t.y||0)+(t.angle?" "+FR(t.angle):"")+(t.scaleX||t.scaleY?" "+NR(t.scaleX||1,t.scaleY||1):"")}var IR=function(t,e,n){function r(t,n){t("transform",MR(n)),t("d",e(null,n))}function i(t,n){var r=n.x||0,i=n.y||0;return e(KI(t),n),qI(t,n).translate(r,i),n.angle&&t.rotate(n.angle*$T,r,i),t}function a(t,n){var r=n.x||0,i=n.y||0,a=n.angle||0;t.translate(r,i),a&&t.rotate(a*=$T),t.beginPath(),e(t,n),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:r,bound:i,draw:AR(a),pick:SR(a),isect:n||sR(a)}},RR=IR("arc",cI);function $R(t,e){var n,r,i="horizontal"===t[0].orient?e[1]:e[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,s=1/0;while(--o>=0)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i),r<s&&(s=r,n=t[o]));return n}function BR(t,e){var n,r,i,a=Math.pow(t[0].strokeWidth||1,2),o=t.length;while(--o>=0)if(!1!==t[o].defined&&(n=t[o].x-e[0],r=t[o].y-e[1],i=n*n+r*r,i<a))return t[o];return null}function zR(t,e){var n,r,i,a=t.length;while(--a>=0)if(!1!==t[a].defined&&(n=t[a].x-e[0],r=t[a].y-e[1],i=n*n+r*r,n=t[a].size||1,i<n*n))return t[a];return null}var LR=function(t,e,n){function r(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))}function i(t,n){var r=n.items;return 0===r.length?t:(e(KI(t),r),qI(t,r[0]))}function a(t,n){t.beginPath(),e(t,n)}var o=ER(a);function s(t,e,n,r,i,a){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,a)?null:(n*=t.pixelRatio,r*=t.pixelRatio,o(t,s,n,r)?s[0]:null)}return{type:t,tag:"path",nested:!0,attr:r,bound:i,draw:jR(a),pick:s,isect:uR,tip:n}},PR=LR("area",lI,$R),UR=function(t,e){var n=e.clip;t.save(),Object(EN["j"])(n)?(t.beginPath(),n(t),t.clip()):WR(t,e.group)};function WR(t,e){t.beginPath(),uI(e)?dI(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function qR(t){const e=hR(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function VR(t,e){t("transform",TR(e))}function GR(t,e){const n=qR(e);t("d",dI(null,e,n,n))}function HR(t,e){t("class","background"),t("aria-hidden",!0),GR(t,e)}function XR(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?GR(t,e):t("d","")}function YR(t,e,n){const r=e.clip?yI(n,e,e):null;t("clip-path",r)}function KR(t,e){if(!e.clip&&e.items){const n=e.items,r=n.length;for(let e=0;e<r;++e)t.union(n[e].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),qI(t,e),t.translate(e.x||0,e.y||0)}function JR(t,e,n,r){const i=qR(e);t.beginPath(),dI(t,e,(n||0)+i,(r||0)+i)}const ZR=ER(JR),QR=ER(JR,!1);function t$(t,e,n){OR(e,e=>{const r=e.x||0,i=e.y||0,a=e.strokeForeground,o=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&o&&(JR(t,e,r,i),dR(t,e),e.fill&&bR(t,e,o)&&t.fill(),e.stroke&&!a&&vR(t,e,o)&&t.stroke()),t.save(),t.translate(r,i),e.clip&&WR(t,e),n&&n.translate(-r,-i),OR(e,e=>{this.draw(t,e,n)}),n&&n.translate(r,i),t.restore(),a&&e.stroke&&o&&(JR(t,e,r,i),dR(t,e),vR(t,e,o)&&t.stroke())})}function e$(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;const o=n*t.pixelRatio,s=r*t.pixelRatio;return _R(e,u=>{let c,l,f,d,h,p,m,g,b;if(g=u.bounds,(!g||g.contains(i,a))&&(d=u.x||0,h=u.y||0,p=d+(u.width||0),m=h+(u.height||0),b=u.clip,!b||!(i<d||i>p||a<h||a>m)))return t.save(),t.translate(d,h),d=i-d,h=a-h,b&&uI(u)&&!ZR(t,u,o,s)?(t.restore(),null):(l=u.strokeForeground,f=!1!==e.interactive,f&&l&&u.stroke&&QR(t,u,o,s)?(t.restore(),u):(c=_R(u,t=>n$(t,d,h)?this.pick(t,n,r,d,h):null),!c&&f&&(u.fill||!l&&u.stroke)&&ZR(t,u,o,s)&&(c=u),t.restore(),c||null))})}function n$(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}var r$={type:"group",tag:"g",nested:!1,attr:VR,bound:KR,draw:t$,pick:e$,isect:cR,content:YR,background:HR,foreground:XR},i$={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function a$(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(e=>{t.image=e,t.image.url=t.url})),n}function o$(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function s$(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function u$(t,e){return"center"===t?e/2:"right"===t?e:0}function c$(t,e){return"middle"===t?e/2:"bottom"===t?e:0}function l$(t,e,n){const r=a$(e,n),i=o$(e,r),a=s$(e,r),o=(e.x||0)-u$(e.align,i),s=(e.y||0)-c$(e.baseline,a),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";t("href",u,i$["xmlns:xlink"],"xlink:href"),t("transform",DR(o,s)),t("width",i),t("height",a),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")}function f$(t,e){const n=e.image,r=o$(e,n),i=s$(e,n),a=(e.x||0)-u$(e.align,r),o=(e.y||0)-c$(e.baseline,i);return t.set(a,o,a+r,o+i)}function d$(t,e,n){OR(e,e=>{if(n&&!n.intersects(e.bounds))return;let r,i,a,o,s=a$(e,this),u=o$(e,s),c=s$(e,s),l=(e.x||0)-u$(e.align,u),f=(e.y||0)-c$(e.baseline,c);!1!==e.aspect&&(i=s.width/s.height,a=e.width/e.height,i===i&&a===a&&i!==a&&(a<i?(o=u/i,f+=(c-o)/2,c=o):(o=c*i,l+=(u-o)/2,u=o))),(s.complete||s.toDataURL)&&(dR(t,e),t.globalAlpha=null!=(r=e.opacity)?r:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(s,l,f,u,c))})}var h$={type:"image",tag:"image",nested:!1,attr:l$,bound:f$,draw:d$,pick:CR(),isect:EN["x"],get:a$,xOffset:u$,yOffset:c$},p$=LR("line",fI,BR);function m$(t,e){var n=e.scaleX||1,r=e.scaleY||1;1===n&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",MR(e)),t("d",e.path)}function g$(t,e){var n=e.path;if(null==n)return!0;var r=e.x||0,i=e.y||0,a=e.scaleX||1,o=e.scaleY||1,s=(e.angle||0)*$T,u=e.pathCache;u&&u.path===n||((e.pathCache=u=RT(n)).path=n),s&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(s),YT(t,u,0,0,a,o),t.rotate(-s),t.translate(-r,-i)):YT(t,u,r,i,a,o)}function b$(t,e){return g$(KI(t),e)?t.set(0,0,0,0):qI(t,e,!0),e.angle&&t.rotate(e.angle*$T,e.x||0,e.y||0),t}var y$={type:"path",tag:"path",nested:!1,attr:m$,bound:b$,draw:AR(g$),pick:SR(g$),isect:sR(g$)};function v$(t,e){t("d",dI(null,e))}function x$(t,e){var n,r;return qI(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)}function w$(t,e){t.beginPath(),dI(t,e)}var O$={type:"rect",tag:"path",nested:!1,attr:v$,bound:x$,draw:AR(w$),pick:SR(w$),isect:cR};function _$(t,e){t("transform",TR(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)}function A$(t,e){var n,r;return qI(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)}function j$(t,e,n){var r,i,a,o;return!(!e.stroke||!vR(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}function k$(t,e,n){OR(e,(function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&j$(t,e,r)&&(dR(t,e),t.stroke())}}))}function C$(t,e,n,r){return!!t.isPointInStroke&&(j$(t,e,1)&&t.isPointInStroke(n,r))}var E$={type:"rule",tag:"line",nested:!1,attr:_$,bound:A$,draw:k$,pick:CR(C$),isect:lR},S$=IR("shape",hI),D$=IR("symbol",pI,uR);const F$=Object(EN["o"])();var N$={height:B$,measureWidth:R$,estimateWidth:M$,width:M$,canvas:T$};function T$(t){N$.width=t&&aR?R$:M$}function M$(t,e){return I$(W$(t,e),B$(t))}function I$(t,e){return~~(.8*t.length*e)}function R$(t,e){return B$(t)<=0||!(e=W$(t,e))?0:$$(e,H$(t))}function $$(t,e){const n=`(${e}) ${t}`;let r=F$.get(n);return void 0===r&&(aR.font=e,r=aR.measureText(t).width,F$.set(n,r)),r}function B$(t){return null!=t.fontSize?+t.fontSize||0:11}function z$(t){return null!=t.lineHeight?t.lineHeight:B$(t)+2}function L$(t){return Object(EN["i"])(t)?t.length>1?t:t[0]:t}function P$(t){return L$(t.lineBreak&&t.text&&!Object(EN["i"])(t.text)?t.text.split(t.lineBreak):t.text)}function U$(t){const e=P$(t);return(Object(EN["i"])(e)?e.length-1:0)*z$(t)}function W$(t,e){const n=null==e?"":(e+"").trim();return t.limit>0&&n.length?V$(t,n):n}function q$(t){if(N$.width===R$){const e=H$(t);return t=>$$(t,e)}{const e=B$(t);return t=>I$(t,e)}}function V$(t,e){var n=+t.limit,r=q$(t);if(r(e)<n)return e;var i,a=t.ellipsis||"",o="rtl"===t.dir,s=0,u=e.length;if(n-=r(a),o){while(s<u)i=s+u>>>1,r(e.slice(i))>n?s=i+1:u=i;return a+e.slice(s)}while(s<u)i=1+(s+u>>>1),r(e.slice(0,i))<n?s=i:u=i-1;return e.slice(0,s)+a}function G$(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function H$(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+B$(t)+"px "+G$(t,e)}function X$(t){var e=t.baseline,n=B$(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*z$(t):"line-bottom"===e?.29*n-.5*z$(t):0)}T$(!0);var Y$={left:"start",center:"middle",right:"end"},K$=new vI;function J$(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-zT,n+=i*Math.cos(e),r+=i*Math.sin(e)),K$.x1=n,K$.y1=r,K$}function Z$(t,e){var n,r=e.dx||0,i=(e.dy||0)+X$(e),a=J$(e),o=a.x1,s=a.y1,u=e.angle||0;t("text-anchor",Y$[e.align]||"start"),u?(n=DR(o,s)+" "+FR(u),(r||i)&&(n+=" "+DR(r,i))):n=DR(o+r,s+i),t("transform",n)}function Q$(t,e,n){var r,i=N$.height(e),a=e.align,o=J$(e),s=o.x1,u=o.y1,c=e.dx||0,l=(e.dy||0)+X$(e)-Math.round(.8*i),f=P$(e);if(Object(EN["i"])(f)?(i+=z$(e)*(f.length-1),r=f.reduce((t,n)=>Math.max(t,N$.width(e,n)),0)):r=N$.width(e,f),"center"===a?c-=r/2:"right"===a&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*$T,s,u);else if(2===n)return t.rotatedPoints(e.angle*$T,s,u);return t}function tB(t,e,n){OR(e,(function(e){var r,i,a,o,s,u,c,l=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===l||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=H$(e),t.textAlign=e.align||"left",r=J$(e),i=r.x1,a=r.y1,e.angle&&(t.save(),t.translate(i,a),t.rotate(e.angle*$T),i=a=0),i+=e.dx||0,a+=(e.dy||0)+X$(e),u=P$(e),dR(t,e),Object(EN["i"])(u))for(s=z$(e),o=0;o<u.length;++o)c=W$(e,u[o]),e.fill&&bR(t,e,l)&&t.fillText(c,i,a),e.stroke&&vR(t,e,l)&&t.strokeText(c,i,a),a+=s;else c=W$(e,u),e.fill&&bR(t,e,l)&&t.fillText(c,i,a),e.stroke&&vR(t,e,l)&&t.strokeText(c,i,a);e.angle&&t.restore()}}))}function eB(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=J$(e),s=o.x1,u=o.y1,c=Q$(K$,e,1),l=-e.angle*$T,f=Math.cos(l),d=Math.sin(l),h=f*i-d*a+(s-f*s+d*u),p=d*i+f*a+(u-d*s-f*u);return c.contains(h,p)}function nB(t,e){var n=Q$(K$,t,2);return fR(e,n[0],n[1],n[2],n[3])||fR(e,n[0],n[1],n[4],n[5])||fR(e,n[4],n[5],n[6],n[7])||fR(e,n[2],n[3],n[6],n[7])}var rB={type:"text",tag:"text",nested:!1,attr:Z$,bound:Q$,draw:tB,pick:CR(eB),isect:nB},iB=LR("trail",mI,zR),aB={arc:RR,area:PR,group:r$,image:h$,line:p$,path:y$,rect:O$,rule:E$,shape:S$,symbol:D$,text:rB,trail:iB},oB=function(t,e,n){var r=aB[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new vI),t,n)},sB={mark:null},uB=function(t,e,n){var r,i,a,o,s=aB[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?a=c[0]:(sB.mark=t,a=sB),o=oB(a,u,n),e=e&&e.union(o)||o,e;if(e=e||t.bounds&&t.bounds.clear()||new vI,l)for(r=0,i=c.length;r<i;++r)e.union(oB(c[r],u,n));return t.bounds=e},cB=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function lB(t,e){return JSON.stringify(t,cB,e)}function fB(t){var e="string"===typeof t?JSON.parse(t):t;return dB(e)}function dB(t){var e,n,r,i=t.marktype,a=t.items;if(a)for(n=0,r=a.length;n<r;++n)e=i?"mark":"group",a[n][e]=t,a[n].zindex&&(a[n][e].zdirty=!0),"group"===(i||e)&&dB(a[n]);return i&&uB(t),t}function hB(t){arguments.length?this.root=fB(t):(this.root=mB({marktype:"group",name:"root",role:"frame"}),this.root.items=[new OI(this.root)])}var pB=hB.prototype;function mB(t,e){const n={bounds:new vI,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function gB(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function bB(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function yB(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=gB(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function vB(t,e){var n=t.childNodes,r=n.length;while(r>e)t.removeChild(n[--r]);return t}function xB(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}pB.toJSON=function(t){return lB(this.root,t||0)},pB.mark=function(t,e,n){e=e||this.root.items[0];var r=mB(t,e);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var wB=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]},OB=function(t,e,n,r){var i,a,o=t&&t.mark;if(o&&(i=aB[o.marktype]).tip){a=wB(e,n),a[0]-=r[0],a[1]-=r[1];while(t=t.mark.group)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t};function _B(t,e){this._active=null,this._handlers={},this._loader=t||zI(),this._tooltip=e||AB}function AB(t,e,n,r){t.element().setAttribute("title",r||"")}const jB=_B.prototype;function kB(t){this._el=null,this._bgcolor=null,this._loader=new LI(t)}jB.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},jB.element=function(){return this._el},jB.canvas=function(){return this._el&&this._el.firstChild},jB.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},jB.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},jB.on=function(){},jB.off=function(){},jB._handlerIndex=function(t,e,n){for(let r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},jB.handlers=function(t){const e=this._handlers,n=[];if(t)n.push.apply(n,e[this.eventName(t)]);else for(const r in e)n.push.apply(n,e[r]);return n},jB.eventName=function(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},jB.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(e=>{const n=new MouseEvent(t.type,t),r=gB(null,"a");for(const t in e)r.setAttribute(t,e[t]);r.dispatchEvent(n)}).catch((function(){}))},jB.handleTooltip=function(t,e,n){if(e&&null!=e.tooltip){e=OB(e,t,this.canvas(),this._origin);const r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},jB.getItemBoundingClientRect=function(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.width(),o=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;while(t.mark&&(t=t.mark.group))s+=t.x||0,u+=t.y||0;return{x:s,y:u,width:a,height:o,left:s,top:u,right:s+a,bottom:u+o}};var CB=kB.prototype;CB.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},CB.element=function(){return this._el},CB.canvas=function(){return this._el&&this._el.firstChild},CB.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},CB.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},CB.dirty=function(){},CB.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},CB._render=function(){},CB.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then((function(){return e})):Promise.resolve(e)},CB._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(t){t&&i(),n._ready=null}))}return r},CB.sanitizeURL=function(t){return this._load("sanitizeURL",t)},CB.loadImage=function(t){return this._load("loadImage",t)};const EB="keydown",SB="keypress",DB="keyup",FB="dragenter",NB="dragleave",TB="dragover",MB="mousedown",IB="mouseup",RB="mousemove",$B="mouseout",BB="mouseover",zB="click",LB="dblclick",PB="wheel",UB="mousewheel",WB="touchstart",qB="touchmove",VB="touchend",GB=[EB,SB,DB,FB,NB,TB,MB,IB,RB,$B,BB,zB,LB,PB,UB,WB,qB,VB],HB=RB,XB=$B,YB=zB;function KB(t,e){_B.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const JB=Object(EN["h"])(KB,_B);JB.initialize=function(t,e,n){return this._canvas=t&&bB(t,"canvas"),[zB,MB,RB,$B,NB].forEach(t=>QB(this,t)),_B.prototype.initialize.call(this,t,e,n)};const ZB=t=>t===WB||t===qB||t===VB?[WB,qB,VB]:[t];function QB(t,e){ZB(e).forEach(e=>tz(t,e))}function tz(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}function ez(t,e,n){return function(r){const i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r)),this.fire(t,r)}}function nz(t){return function(e){this.fire(t,e),this._active=null}}function rz(){return"undefined"!==typeof window&&window.devicePixelRatio||1}JB.canvas=function(){return this._canvas},JB.context=function(){return this._canvas.getContext("2d")},JB.events=GB,JB.DOMMouseScroll=function(t){this.fire(UB,t)},JB.mousemove=ez(RB,BB,$B),JB.dragover=ez(TB,FB,NB),JB.mouseout=nz($B),JB.dragleave=nz(NB),JB.mousedown=function(t){this._down=this._active,this.fire(MB,t)},JB.click=function(t){this._down===this._active&&(this.fire(zB,t),this._down=null)},JB.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(WB,t,!0)},JB.touchmove=function(t){this.fire(qB,t,!0)},JB.touchend=function(t){this.fire(VB,t,!0),this._touch=null},JB.fire=function(t,e,n){const r=n?this._touch:this._active,i=this._handlers[t];if(e.vegaType=t,t===YB&&r&&r.href?this.handleHref(e,r,r.href):t!==HB&&t!==XB||this.handleTooltip(e,r,t!==XB),i)for(let a=0,o=i.length;a<o;++a)i[a].handler.call(this._obj,e,r)},JB.on=function(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);return i<0&&(QB(this,t),(r[n]||(r[n]=[])).push({type:t,handler:e})),this},JB.off=function(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},JB.pickEvent=function(t){const e=wB(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},JB.pick=function(t,e,n,r,i){const a=this.context(),o=aB[t.marktype];return o.pick.call(this,a,t,e,n,r,i)};var iz=rz(),az=function(t,e,n,r,i,a){const o="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,s=t.getContext("2d"),u=o?iz:i;t.width=e*u,t.height=n*u;for(const c in a)s[c]=a[c];return o&&1!==u&&(t.style.width=e+"px",t.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1]),t};function oz(t){kB.call(this,t),this._options={},this._redraw=!1,this._dirty=new vI,this._tempb=new vI}const sz=Object(EN["h"])(oz,kB),uz=kB.prototype;function cz(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}sz.initialize=function(t,e,n,r,i,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Pu(1,1,this._options.type),t&&this._canvas&&(vB(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),uz.initialize.call(this,t,e,n,r,i)},sz.resize=function(t,e,n,r){if(uz.resize.call(this,t,e,n,r),this._canvas)az(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const t=this._options.externalContext;t||Object(EN["c"])("CanvasRenderer is missing a valid canvas or context"),t.scale(this._scale,this._scale),t.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},sz.canvas=function(){return this._canvas},sz.context=function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},sz.dirty=function(t){let e=this._tempb.clear().union(t.bounds),n=t.mark.group;while(n)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)};const lz=(t,e,n)=>(new vI).set(0,0,e,n).translate(-t[0],-t[1]);function fz(t,e){_B.call(this,t,e);const n=this;n._hrefHandler=hz(n,(t,e)=>{e&&e.href&&n.handleHref(t,e,e.href)}),n._tooltipHandler=hz(n,(t,e)=>{n.handleTooltip(t,e,t.type!==XB)})}sz._render=function(t){const e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty,o=lz(n,r,i);e.save();const s=this._redraw||a.empty()?(this._redraw=!1,o.expand(1)):cz(e,o.intersect(a),n);return this.clear(-n[0],-n[1],r,i),this.draw(e,t,s),e.restore(),a.clear(),this},sz.draw=function(t,e,n){const r=aB[e.marktype];e.clip&&UR(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},sz.clear=function(t,e,n,r){const i=this._options,a=this.context();"pdf"===i.type||i.externalContext||a.clearRect(t,e,n,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(t,e,n,r))};const dz=Object(EN["h"])(fz,_B);dz.initialize=function(t,e,n){let r=this._svg;return r&&(r.removeEventListener(YB,this._hrefHandler),r.removeEventListener(HB,this._tooltipHandler),r.removeEventListener(XB,this._tooltipHandler)),this._svg=r=t&&bB(t,"svg"),r&&(r.addEventListener(YB,this._hrefHandler),r.addEventListener(HB,this._tooltipHandler),r.addEventListener(XB,this._tooltipHandler)),_B.prototype.initialize.call(this,t,e,n)},dz.canvas=function(){return this._svg};const hz=(t,e)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,e.call(t._obj,n,r)};function pz(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}dz.on=function(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);if(i<0){const i={type:t,handler:e,listener:hz(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},dz.off=function(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var mz=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return pz((n-r/e)*e,o,i,a,s)}},gz=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return pz((n-r/e)*e,i,a,o,s)}},bz=t=>()=>t;function yz(t,e){return function(n){return t+n*e}}function vz(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xz(t,e){var n=e-t;return n?yz(t,n>180||n<-180?n-360*Math.round(n/360):n):bz(isNaN(t)?e:t)}function wz(t){return 1===(t=+t)?Oz:function(e,n){return n-e?vz(e,n,t):bz(isNaN(e)?n:e)}}function Oz(t,e){var n=e-t;return n?yz(t,n):bz(isNaN(t)?e:t)}var _z=function t(e){var n=wz(e);function r(t,e){var r=n((t=Cc(t)).r,(e=Cc(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Oz(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Az(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Cc(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var jz=Az(mz),kz=Az(gz),Cz=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}};function Ez(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var Sz=function(t,e){return(Ez(e)?Cz:Dz)(t,e)};function Dz(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Lz(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}var Fz=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},Nz=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},Tz=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=Lz(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Mz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Iz=new RegExp(Mz.source,"g");function Rz(t){return function(){return t}}function $z(t){return function(e){return t(e)+""}}var Bz,zz=function(t,e){var n,r,i,a=Mz.lastIndex=Iz.lastIndex=0,o=-1,s=[],u=[];t+="",e+="";while((n=Mz.exec(t))&&(r=Iz.exec(e)))(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Nz(n,r)})),a=Iz.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?$z(u[0].x):Rz(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},Lz=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?bz(e):("number"===r?Nz:"string"===r?(n=_c(e))?(e=n,_z):zz:e instanceof _c?_z:e instanceof Date?Fz:Ez(e)?Cz:Array.isArray(e)?Dz:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?Tz:Nz)(t,e)},Pz=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},Uz=function(t,e){var n=xz(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},Wz=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},qz=180/Math.PI,Vz={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Gz=function(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*qz,skewX:Math.atan(u)*qz,scaleX:o,scaleY:s}};function Hz(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Vz:Gz(e.a,e.b,e.c,e.d,e.e,e.f)}function Xz(t){return null==t?Vz:(Bz||(Bz=document.createElementNS("http://www.w3.org/2000/svg","g")),Bz.setAttribute("transform",t),(t=Bz.transform.baseVal.consolidate())?(t=t.matrix,Gz(t.a,t.b,t.c,t.d,t.e,t.f)):Vz)}function Yz(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:Nz(t,i)},{i:u-2,x:Nz(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}function o(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Nz(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Nz(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Nz(t,n)},{i:s-2,x:Nz(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),o(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){var e,n=-1,a=i.length;while(++n<a)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var Kz=Yz(Hz,"px, ","px)","deg)"),Jz=Yz(Xz,", ",")",")"),Zz=1e-12;function Qz(t){return((t=Math.exp(t))+1/t)/2}function tL(t){return((t=Math.exp(t))-1/t)/2}function eL(t){return((t=Math.exp(2*t))-1)/(t+1)}var nL=function t(e,n,r){function i(t,i){var a,o,s=t[0],u=t[1],c=t[2],l=i[0],f=i[1],d=i[2],h=l-s,p=f-u,m=h*h+p*p;if(m<Zz)o=Math.log(d/c)/e,a=function(t){return[s+t*h,u+t*p,c*Math.exp(e*t*o)]};else{var g=Math.sqrt(m),b=(d*d-c*c+r*m)/(2*c*n*g),y=(d*d-c*c-r*m)/(2*d*n*g),v=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-v)/e,a=function(t){var r=t*o,i=Qz(v),a=c/(n*g)*(i*eL(e*r+v)-tL(v));return[s+a*h,u+a*p,c*i/Qz(e*r+v)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n,i=r*r;return t(n,r,i)},i}(Math.SQRT2,2,4);function rL(t){return function(e,n){var r=t((e=Mc(e)).h,(n=Mc(n)).h),i=Oz(e.s,n.s),a=Oz(e.l,n.l),o=Oz(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var iL=rL(xz),aL=rL(Oz);function oL(t,e){var n=Oz((t=dd(t)).l,(e=dd(e)).l),r=Oz(t.a,e.a),i=Oz(t.b,e.b),a=Oz(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function sL(t){return function(e,n){var r=t((e=vd(e)).h,(n=vd(n)).h),i=Oz(e.c,n.c),a=Oz(e.l,n.l),o=Oz(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var uL=sL(xz),cL=sL(Oz);function lL(t){return function e(n){function r(e,r){var i=t((e=Id(e)).h,(r=Id(r)).h),a=Oz(e.s,r.s),o=Oz(e.l,r.l),s=Oz(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var fL=lL(xz),dL=lL(Oz);function hL(t,e){void 0===e&&(e=t,t=Lz);var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);while(n<r)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}var pL=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};function mL(t,e,n){const r=t-e+2*n;return t?r>0?r:1:0}const gL="identity",bL="linear",yL="log",vL="pow",xL="sqrt",wL="symlog",OL="time",_L="utc",AL="sequential",jL="diverging",kL="quantile",CL="quantize",EL="threshold",SL="ordinal",DL="point",FL="band",NL="bin-ordinal",TL="continuous",ML="discrete",IL="discretizing",RL="interpolating",$L="temporal";function BL(t){return function(e){let n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}}function zL(t){return function(e){const n=t.range();let r,i,a,o,s=e[0],u=e[1],c=-1;for(u<s&&(i=s,s=u,u=i),a=0,o=n.length;a<o;++a)n[a]>=s&&n[a]<=u&&(c<0&&(c=a),r=a);if(!(c<0))return s=t.invertExtent(n[c]),u=t.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}function LL(){const t=Ku().unknown(void 0),e=t.domain,n=t.range;let r,i,a=[0,1],o=!1,s=0,u=0,c=.5;function l(){const t=e().length,l=a[1]<a[0],f=a[1-l],d=mL(t,s,u);let h=a[l-0];r=(f-h)/(d||1),o&&(r=Math.floor(r)),h+=(f-h-r*(t-s))*c,i=r*(1-s),o&&(h=Math.round(h),i=Math.round(i));const p=ua(t).map(t=>h+r*t);return n(l?p.reverse():p)}return delete t.unknown,t.domain=function(t){return arguments.length?(e(t),l()):e()},t.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},t.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},t.bandwidth=function(){return i},t.step=function(){return r},t.round=function(t){return arguments.length?(o=!!t,l()):o},t.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,l()):s},t.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},t.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},t.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},t.invertRange=function(t){if(null==t[0]||null==t[1])return;const r=a[1]<a[0],o=r?n().reverse():n(),s=o.length-1;let u,c,l,f=+t[0],d=+t[1];return f!==f||d!==d||(d<f&&(l=f,f=d,d=l),d<o[0]||f>a[1-r])?void 0:(u=Math.max(0,qu(o,f)-1),c=f===d?u:qu(o,d)-1,f-o[u]>i+1e-10&&++u,r&&(l=u,u=s-c,c=s-l),u>c?void 0:e().slice(u,c+1))},t.invert=function(e){const n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return LL().domain(e()).range(a).round(o).paddingInner(s).paddingOuter(u).align(c)},l()}function PL(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return PL(e())},t}function UL(){return PL(LL().paddingInner(1))}var WL=Array.prototype.map;function qL(t){return WL.call(t,EN["u"])}const VL=Array.prototype.slice;function GL(){let t=[],e=[];function n(n){return null==n||n!==n?void 0:e[(Gu(t,n)-1)%e.length]}return n.domain=function(e){return arguments.length?(t=qL(e),n):t.slice()},n.range=function(t){return arguments.length?(e=VL.call(t),n):e.slice()},n.tickFormat=function(e,n){return rc(t[0],Object(EN["p"])(t),null==e?10:e,n)},n.copy=function(){return GL().domain(n.domain()).range(n.range())},n}const HL={};function XL(t,e,n){const r=function(){const n=e();return n.invertRange||(n.invertRange=n.invert?BL(n):n.invertExtent?zL(n):void 0),n.type=t,n};return r.metadata=Object(EN["v"])(Object(EN["a"])(n)),r}function YL(t,e,n){return arguments.length>1?(HL[t]=XL(t,e,n),this):KL(t)?HL[t]:void 0}function KL(t){return Object(EN["f"])(HL,t)}function JL(t,e){const n=HL[t];return n&&n.metadata[e]}function ZL(t){return JL(t,ML)}function QL(t){return JL(t,IL)}function tP(t){return JL(t,yL)}function eP(t){return JL(t,$L)}YL(gL,_l),YL(bL,Ol,TL),YL(yL,Ml,[TL,yL]),YL(vL,zl,TL),YL(xL,Ll,TL),YL(wL,ql,TL),YL(OL,ff,[TL,$L]),YL(_L,yf,[TL,$L]),YL(AL,wf,[TL,RL]),YL("".concat(AL,"-").concat(bL),wf,[TL,RL]),YL("".concat(AL,"-").concat(yL),Of,[TL,RL,yL]),YL("".concat(AL,"-").concat(vL),Af,[TL,RL]),YL("".concat(AL,"-").concat(xL),jf,[TL,RL]),YL("".concat(AL,"-").concat(wL),_f,[TL,RL]),YL("".concat(jL,"-").concat(bL),Ef,[TL,RL]),YL("".concat(jL,"-").concat(yL),Sf,[TL,RL,yL]),YL("".concat(jL,"-").concat(vL),Ff,[TL,RL]),YL("".concat(jL,"-").concat(xL),Nf,[TL,RL]),YL("".concat(jL,"-").concat(wL),Df,[TL,RL]),YL(kL,Tf,[IL,kL]),YL(CL,Mf,IL),YL(EL,If,IL),YL(NL,GL,[ML,IL]),YL(SL,Ku,ML),YL(FL,LL,ML),YL(DL,UL,ML);function nP(t,e,n){return hL(rP(e||"rgb",n),t)}function rP(t,e){const n=g[iP(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function iP(t){return"interpolate"+t.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const aP={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},oP={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function sP(t){const e=t.length/6|0,n=new Array(e);for(let r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function uP(t,e){for(const n in t)lP(n,e(t[n]))}const cP={};function lP(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(cP[t]=e,this):cP[t]}uP(oP,sP),uP(aP,t=>nP(sP(t)));const fP="symbol",dP="discrete",hP=t=>Object(EN["i"])(t)?t.map(t=>String(t)):String(t),pP=(t,e)=>t[1]-e[1],mP=(t,e)=>e[1]-t[1];function gP(t,e,n){let r=t.range(),i=r[0],a=Object(EN["p"])(r),o=pP;if(i>a&&(r=a,a=i,i=r,o=mP),i=Math.floor(i),a=Math.ceil(a),e=e.map(e=>[e,t(e)]).filter(t=>i<=t[1]&&t[1]<=a).sort(o).map(t=>t[0]),n>0&&e.length>1){const t=[e[0],Object(EN["p"])(e)];while(e.length>n&&e.length>=3)e=e.filter((t,e)=>!(e%2));e.length<3&&(e=t)}return e}function bP(t,e){return t.bins?gP(t,t.bins):t.ticks?t.ticks(e):t.domain()}function yP(t,e,n,r,i,a){const o=e.type;let s=hP;if(o===OL||i===OL)s=t.timeFormat(r);else if(o===_L||i===_L)s=t.utcFormat(r);else if(tP(o)){const i=t.formatFloat(r);if(a||e.bins)s=i;else{const t=vP(e,n,!1);s=e=>t(e)?i(e):""}}else if(e.tickFormat){const i=e.domain();s=t.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=t.format(r));return s}function vP(t,e,n){const r=bP(t,e),i=t.base(),a=Math.log(i),o=Math.max(1,i*e/r.length),s=t=>{let e=t/Math.pow(i,Math.round(Math.log(t)/a));return e*i<i-.5&&(e*=i),e<=o};return n?r.filter(s):s}const xP={[kL]:"quantiles",[CL]:"thresholds",[EL]:"domain"},wP={[kL]:"quantiles",[CL]:"domain"};function OP(t,e){return t.bins?jP(t.bins):t.type===yL?vP(t,e,!0):xP[t.type]?AP(t[xP[t.type]]()):bP(t,e)}function _P(t,e,n){const r=e[wP[e.type]](),i=r.length;let a,o=i>1?r[1]-r[0]:r[0];for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return t.formatSpan(0,o,30,n)}function AP(t){const e=[-1/0].concat(t);return e.max=1/0,e}function jP(t){const e=t.slice(0,-1);return e.max=Object(EN["p"])(t),e}const kP=t=>xP[t.type]||t.bins;function CP(t,e,n,r,i,a,o){const s=wP[e.type]&&a!==OL&&a!==_L?_P(t,e,i):yP(t,e,n,i,a,o);return r===fP&&kP(e)?EP(s):r===dP?DP(s):FP(s)}const EP=t=>(e,n,r)=>{const i=SP(r[n+1],SP(r.max,1/0)),a=NP(e,t),o=NP(i,t);return a&&o?a+"  "+o:o?"< "+o:" "+a},SP=(t,e)=>null!=t?t:e,DP=t=>(e,n)=>n?t(e):null,FP=t=>e=>t(e),NP=(t,e)=>Number.isFinite(t)?e(t):null;function TP(t,e,n,r){const i=r||e.type;return Object(EN["n"])(n)&&eP(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==OL?n||i!==_L?CP(t,e,5,null,n,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function MP(t,e,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=TP(t,e,n.format,n.formatType);if(QL(e.type)){const t=OP(e).slice(1).map(i),n=t.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(t.join(", "))}if(ZL(e.type)){const t=e.domain(),n=t.length,a=n>r?t.slice(0,r-2).map(i).join(", ")+", ending with "+t.slice(-1).map(i):t.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(a)}{const t=e.domain();return"values from ".concat(i(t[0])," to ").concat(i(Object(EN["p"])(t)))}}const IP="aria-hidden",RP="aria-label",$P="role",BP="aria-roledescription",zP="graphics-object",LP="graphics-symbol",PP=(t,e,n)=>({[$P]:t,[BP]:e,[RP]:n||void 0}),UP=Object(EN["v"])(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),WP={axis:{desc:"axis",caption:KP},legend:{desc:"legend",caption:JP},"title-text":{desc:"title",caption:t=>`Title text '${YP(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${YP(t)}'`}},qP={ariaRole:$P,ariaRoleDescription:BP,description:RP};function VP(t,e){const n=!1===e.aria;if(t(IP,n||void 0),n||null==e.description)for(const r in qP)t(qP[r],void 0);else{const n=e.mark.marktype;t(RP,e.description),t($P,e.ariaRole||("group"===n?zP:LP)),t(BP,e.ariaRoleDescription||n+" mark")}}function GP(t){return!1===t.aria?{[IP]:!0}:UP[t.role]?null:WP[t.role]?XP(t,WP[t.role]):HP(t)}function HP(t){const e=t.marktype,n="group"===e||"text"===e||t.items.some(t=>null!=t.description&&!1!==t.aria);return PP(n?zP:LP,e+" mark container",t.description)}function XP(t,e){try{const n=t.items[0],r=e.caption||(()=>"");return PP(e.role||LP,e.desc,n.description||r(n))}catch(n){return null}}function YP(t){return Object(EN["a"])(t.text).join(" ")}function KP(t){const e=t.datum,n=t.orient,r=e.title?ZP(t):null,i=t.context,a=i.scales[e.scale].value,o=i.dataflow.locale(),s=a.type,u="left"===n||"right"===n?"Y":"X";return u+"-axis"+(r?` titled '${r}'`:"")+` for a ${ZL(s)?"discrete":s} scale with `+MP(o,a,t)}function JP(t){const e=t.datum,n=e.title?ZP(t):null,r=((e.type||"")+" legend").trim(),i=e.scales,a=Object.keys(i),o=t.context,s=o.scales[i[a[0]]].value,u=o.dataflow.locale();return tU(r)+(n?` titled '${n}'`:"")+" for "+QP(a)+" with "+MP(u,s,t)}function ZP(t){try{return Object(EN["a"])(Object(EN["p"])(t.items).items[0].text).join(" ")}catch(e){return null}}function QP(t){return t=t.map(t=>t+("fill"===t||"stroke"===t?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Object(EN["p"])(t)}function tU(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const eU=t=>(t+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;");function nU(t,e,n){var r,i,a="<"+t;if(e)for(r in e)i=e[r],null!=i&&(a+=" "+r+'="'+eU(i)+'"');return n&&(a+=" "+n),a+">"}function rU(t){return"</"+t+">"}const iU={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},aU={fill:"none","stroke-miterlimit":10},oU=0,sU=i$.xmlns;function uU(t){kB.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var cU=Object(EN["h"])(uU,kB),lU=kB.prototype;function fU(t,e,n){var r,i,a;if("radial"===e.gradient){var o=yB(t,n++,"pattern",sU);o.setAttribute("id",_N+e.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),o=yB(o,0,"rect",sU),o.setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+AU()+"#"+e.id+")"),t=yB(t,n++,"radialGradient",sU),t.setAttribute("id",e.id),t.setAttribute("fx",e.x1),t.setAttribute("fy",e.y1),t.setAttribute("fr",e.r1),t.setAttribute("cx",e.x2),t.setAttribute("cy",e.y2),t.setAttribute("r",e.r2)}else t=yB(t,n++,"linearGradient",sU),t.setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2);for(r=0,i=e.stops.length;r<i;++r)a=yB(t,r,"stop",sU),a.setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);return vB(t,r),n}function dU(t,e,n){var r;return t=yB(t,n,"clipPath",sU),t.setAttribute("id",e.id),e.path?(r=yB(t,0,"path",sU),r.setAttribute("d",e.path)):(r=yB(t,0,"rect",sU),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height)),vB(t,1),n+1}function hU(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function pU(t,e,n){e=e.lastChild.previousSibling;let r,i=0;OR(n,n=>{r=t.draw(e,n,r),++i}),vB(e,1+i)}function mU(t,e,n,r,i){let a,o=t._svg;if(!o&&(a=e.ownerDocument,o=gB(a,r,sU),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){const e=gB(a,"path",sU);o.appendChild(e),e.__data__=t;const n=gB(a,"g",sU);o.appendChild(n),n.__data__=t;const r=gB(a,"path",sU);o.appendChild(r),r.__data__=t,r.__values__={fill:"default"}}return(o.ownerSVGElement!==i||gU(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}function gU(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}cU.initialize=function(t,e,n,r){if(this._defs={gradient:{},clipping:{}},t){this._svg=yB(t,0,"svg",sU),this._svg.setAttribute("class","marks"),vB(t,1),this._root=yB(this._svg,oU,"g",sU);for(const t in aU)this._root.setAttribute(t,aU[t]);vB(this._svg,oU+1)}return this.background(this._bgcolor),lU.initialize.call(this,t,e,n,r)},cU.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),lU.background.apply(this,arguments)},cU.resize=function(t,e,n,r){return lU.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},cU.canvas=function(){return this._svg},cU.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in i$)t[e]=i$[e];var n=this._bgcolor?nU("rect",{width:this._width,height:this._height,fill:this._bgcolor})+rU("rect"):"";return nU("svg",t)+(this._defs.el?this._defs.el.outerHTML:"")+n+this._root.outerHTML+rU("svg")},cU._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),vB(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},cU.updateDefs=function(){const t=this._svg,e=this._defs;let n=e.el,r=0;for(const i in e.gradient)n||(e.el=n=yB(t,oU,"defs",sU)),r=fU(n,e.gradient[i],r);for(const i in e.clipping)n||(e.el=n=yB(t,oU,"defs",sU)),r=dU(n,e.clipping[i],r);n&&(0===r?(t.removeChild(n),e.el=null):vB(n,r))},cU._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},cU.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},cU.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},cU._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length||!this._dirtyID)return!0;var e,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=t.length;a<o;++a)e=t[a],n=e.mark,n.marktype!==r&&(r=n.marktype,i=aB[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,hU(e,u),n.items.forEach((function(t){t.dirty=u}))),n.zdirty||(e.exit?(i.nested&&n.items.length?(s=n.items[0],s._svg&&this._update(i,s._svg,s)):e._svg&&(s=e._svg.parentNode,s&&s.removeChild(e._svg)),e._svg=null):(e=i.nested?n.items[0]:e,e._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,hU(e,u)),e._update=u)));return!this._dirtyAll},cU.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r,i=this._svg,a=aB[e.marktype],o=!1===e.interactive?"none":null,s="g"===a.tag,u=null,c=0;r=mU(e,t,n,"g",i),r.setAttribute("class",xB(e));const l=GP(e);for(const d in l)OU(r,d,l[d]);s||OU(r,"pointer-events",o),OU(r,"clip-path",e.clip?yI(this,e,e.group):null);const f=t=>{const e=this.isDirty(t),n=mU(t,r,u,a.tag,i);e&&(this._update(a,n,t),s&&pU(this,n,t)),u=n,++c};return a.nested?e.items.length&&f(e.items[0]):OR(e,f),vB(r,c),r};var bU=null,yU=null,vU={group:function(t,e,n){const r=bU=e.childNodes[2];yU=r.__values__,t.foreground(wU,n,this),yU=e.__values__,bU=e.childNodes[1],t.content(wU,n,this);const i=bU=e.childNodes[0];t.background(wU,n,this);const a=!1===n.mark.interactive?"none":null;if(a!==yU.events&&(OU(r,"pointer-events",a),OU(i,"pointer-events",a),yU.events=a),n.strokeForeground&&n.stroke){const t=n.fill;OU(r,"display",null),this.style(i,n),OU(i,"stroke",null),t&&(n.fill=null),yU=r.__values__,this.style(r,n),t&&(n.fill=t),bU=null}else OU(r,"display","none")},image:function(t,e,n){!1===n.smooth?(xU(e,"image-rendering","optimizeSpeed"),xU(e,"image-rendering","pixelated")):xU(e,"image-rendering",null)},text:function(t,e,n){let r,i,a,o,s=P$(n);Object(EN["i"])(s)?(i=s.map(t=>W$(n,t)),r=i.join("\n"),r!==yU.text&&(vB(e,0),a=e.ownerDocument,o=z$(n),i.forEach((t,r)=>{const i=gB(a,"tspan",sU);i.__data__=n,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",o)),e.appendChild(i)}),yU.text=r)):(i=W$(n,s),i!==yU.text&&(e.textContent=i,yU.text=i)),OU(e,"font-family",G$(n)),OU(e,"font-size",B$(n)+"px"),OU(e,"font-style",n.fontStyle),OU(e,"font-variant",n.fontVariant),OU(e,"font-weight",n.fontWeight)}};function xU(t,e,n){n!==yU[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),yU[e]=n)}function wU(t,e,n){e!==yU[t]&&(n?_U(bU,t,e,n):OU(bU,t,e),yU[t]=e)}function OU(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function _U(t,e,n,r){null!=n?t.setAttributeNS(r,e,n):t.removeAttributeNS(r,e)}function AU(){let t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function jU(t){kB.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}cU._update=function(t,e,n){bU=e,yU=e.__values__,VP(wU,n),t.attr(wU,n,this);const r=vU[t.type];r&&r.call(this,t,e,n),bU&&this.style(bU,n)},cU.style=function(t,e){if(null!=e)for(const n in iU){let r="font"===n?G$(e):e[n];if(r===yU[n])continue;const i=iU[n];null==r?t.removeAttribute(i):(AN(r)&&(r=jN(r,this._defs.gradient,AU())),t.setAttribute(i,r+"")),yU[n]=r}};var kU=Object(EN["h"])(jU,kB),CU=kB.prototype;function EU(t,e,n,r,i){if(null==e)return t;if("bgrect"===r&&!1===n.interactive&&(t["pointer-events"]="none"),"bgfore"===r&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===r&&!1===e.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===r&&(t["font-family"]=G$(e),t["font-size"]=B$(e)+"px",e.fontStyle&&(t["font-style"]=e.fontStyle),e.fontVariant&&(t["font-variant"]=e.fontVariant),e.fontWeight&&(t["font-weight"]=e.fontWeight));for(const a in iU){let n=e[a];const r=iU[a];("transparent"!==n||"fill"!==r&&"stroke"!==r)&&null!=n&&(AN(n)&&(n=jN(n,i.gradient,"")),t[r]=n)}return t}function SU(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}kU.resize=function(t,e,n,r){CU.resize.call(this,t,e,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in i$)o[s]=i$[s];a.head=nU("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?nU("rect",{width:this._width,height:this._height,fill:u})+rU("rect"):"",a.root=nU("g",Object(EN["d"])({},aU,{transform:"translate("+i+")"})),a.foot=rU("g")+rU("svg"),this},kU.background=function(){var t=CU.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},kU.svg=function(){var t=this._text;return t.head+t.defs+t.bg+t.root+t.body+t.foot},kU._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},kU.buildDefs=function(){let t,e="";for(const n in this._defs.gradient){const r=this._defs.gradient[n],i=r.stops;"radial"===r.gradient?(e+=nU(t="pattern",{id:_N+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e+=nU("rect",{width:"1",height:"1",fill:"url(#"+n+")"})+rU("rect"),e+=rU(t),e+=nU(t="radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e+=nU(t="linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e+=nU("stop",{offset:i[t].offset,"stop-color":i[t].color})+rU("stop");e+=rU(t)}for(const n in this._defs.clipping){const t=this._defs.clipping[n];e+=nU("clipPath",{id:n}),t.path?e+=nU("path",{d:t.path})+rU("path"):e+=nU("rect",{x:0,y:0,width:t.width,height:t.height})+rU("rect"),e+=rU("clipPath")}return e?nU("defs")+e+rU("defs"):""},kU.attr=function(t,e,n,r){const i={},a=(t,e,n,r)=>{i[r||t]=e};return Array.isArray(n)?n.forEach(t=>t(a,e,this)):n(a,e,this),r&&EU(i,e,t,r,this._defs),i},kU.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then(t=>{t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t})}return null},kU.mark=function(t){const e=aB[t.marktype],n=e.tag,r=[VP,e.attr];let i="";i+=nU("g",Object(EN["d"])({class:xB(t),"clip-path":t.clip?yI(this,t,t.group):null},GP(t),{"pointer-events":"g"!==n&&!1===t.interactive?"none":null}));const a=a=>{const o=this.href(a);if(o&&(i+=nU("a",o)),i+=nU(n,this.attr(t,a,r,"g"!==n?n:null)),"text"===n){const t=P$(a);if(Object(EN["i"])(t)){const e={x:0,dy:z$(a)};for(let n=0;n<t.length;++n)i+=nU("tspan",n?e:null)+SU(W$(a,t[n]))+rU("tspan")}else i+=SU(W$(a,t))}else if("g"===n){const n=a.strokeForeground,r=a.fill,o=a.stroke;n&&o&&(a.stroke=null),i+=nU("path",this.attr(t,a,e.background,"bgrect"))+rU("path"),i+=nU("g",this.attr(t,a,e.content))+this.markGroup(a)+rU("g"),n&&o?(r&&(a.fill=null),a.stroke=o,i+=nU("path",this.attr(t,a,e.foreground,"bgrect"))+rU("path"),r&&(a.fill=r)):i+=nU("path",this.attr(t,a,e.foreground,"bgfore"))+rU("path")}i+=rU(n),o&&(i+=rU("a"))};return e.nested?t.items&&t.items.length&&a(t.items[0]):OR(t,a),i+rU("g")},kU.markGroup=function(t){let e="";return OR(t,t=>{e+=this.mark(t)}),e};var DU="canvas",FU="png",NU="svg",TU="none",MU={Canvas:DU,PNG:FU,SVG:NU,None:TU},IU={};function RU(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(IU[t]=e,this):IU[t]}function $U(t,e,n){const r=[],i=(new vI).union(e),a=t.marktype;return a?BU(t,i,n,r):"group"===a?LU(t,i,n,r):Object(EN["c"])("Intersect scene must be mark node or group item.")}function BU(t,e,n,r){if(zU(t,e,n)){const i=t.items,a=t.marktype,o=i.length;let s=0;if("group"===a)for(;s<o;++s)LU(i[s],e,n,r);else for(const t=aB[a].isect;s<o;++s){let n=i[s];PU(n,e,t)&&r.push(n)}}return r}function zU(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}function LU(t,e,n,r){n&&n(t.mark)&&PU(t,e,aB.group.isect)&&r.push(t);const i=t.items,a=i&&i.length;if(a){const o=t.x||0,s=t.y||0;e.translate(-o,-s);for(let t=0;t<a;++t)BU(i[t],e,n,r);e.translate(o,s)}return r}function PU(t,e,n){const r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}IU[DU]=IU[FU]={renderer:oz,headless:oz,handler:KB},IU[NU]={renderer:uU,headless:jU,handler:fz},IU[TU]={};var UU=new vI,WU=function(t){var e=t.clip;if(Object(EN["j"])(e))e(KI(UU.clear()));else{if(!e)return;UU.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(UU)},qU=1e-9;function VU(t,e,n){return t===e||("path"===n?GU(t,e):t instanceof Date&&e instanceof Date?+t===+e:Object(EN["l"])(t)&&Object(EN["l"])(e)?Math.abs(t-e)<=qU:t&&e&&(Object(EN["m"])(t)||Object(EN["m"])(e))?null!=t&&null!=e&&HU(t,e):t==e)}function GU(t,e){return VU(RT(t),RT(e))}function HU(t,e){var n,r,i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!VU(t[n],e[n],n))return!1;return typeof t===typeof e}function XU(){bI(),ON()}var YU=function(t,e,n){const r=t-e+2*n;return t?r>0?r:1:0};const KU="identity",JU="linear",ZU="log",QU="pow",tW="sqrt",eW="symlog",nW="time",rW="utc",iW="sequential",aW="diverging",oW="quantile",sW="quantize",uW="threshold",cW="ordinal",lW="point",fW="band",dW="bin-ordinal",hW="continuous",pW="discrete",mW="discretizing",gW="interpolating",bW="temporal";function yW(t,e,n){return t.fields=e||[],t.fname=n,t}function vW(t){return 1===t.length?xW(t[0]):wW(t)}const xW=t=>function(e){return e[t]},wW=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};function OW(t){throw Error(t)}function _W(t){const e=[],n=t.length;let r,i,a,o=null,s=0,u="";function c(){e.push(u+t.substring(r,i)),u="",r=i+1}for(t+="",r=i=0;i<n;++i)if(a=t[i],"\\"===a)u+=t.substring(r,i),u+=t.substring(++i,++i),r=i;else if(a===o)c(),o=null,s=-1;else{if(o)continue;r===s&&'"'===a||r===s&&"'"===a?(r=i+1,o=a):"."!==a||s?"["===a?(i>r&&c(),s=r=i+1):"]"===a&&(s||OW("Access path missing open bracket: "+t),s>0&&c(),s=0,r=i+1):i>r?c():r=i+1}return s&&OW("Access path missing closing bracket: "+t),o&&OW("Access path missing closing quote: "+t),i>r&&(i++,c()),e}function AW(t,e,n){const r=_W(t);return t=1===r.length?r[0]:t,yW((n&&n.get||vW)(r),[t],e||t)}AW("id"),yW(t=>t,[],"identity"),yW(()=>0,[],"zero"),yW(()=>1,[],"one"),yW(()=>!0,[],"true"),yW(()=>!1,[],"false");var jW=Array.isArray;function kW(t){return t[t.length-1]}function CW(t){return null==t||""===t?null:+t}function EW(t){return null!=t?jW(t)?t:[t]:[]}const SW=Object.prototype.hasOwnProperty;function DW(t,e){return SW.call(t,e)}function FW(t){const e={},n=t.length;for(let r=0;r<n;++r)e[t[r]]=!0;return e}var NW=function(t){return function(e){let n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}},TW=function(t){return function(e){let n,r,i,a,o=t.range(),s=e[0],u=e[1],c=-1;for(u<s&&(r=s,s=u,u=r),i=0,a=o.length;i<a;++i)o[i]>=s&&o[i]<=u&&(c<0&&(c=i),n=i);if(!(c<0))return s=t.invertExtent(o[c]),u=t.invertExtent(o[n]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}};function MW(){let t,e,n=Ku().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,u=0,c=.5;function l(){let n=r().length,l=a[1]<a[0],f=a[l-0],d=a[1-l],h=YU(n,s,u);t=(d-f)/(h||1),o&&(t=Math.floor(t)),f+=(d-f-t*(n-s))*c,e=t*(1-s),o&&(f=Math.round(f),e=Math.round(e));const p=ua(n).map((function(e){return f+t*e}));return i(l?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,l()):o},n.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,l()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.invertRange=function(t){if(null==t[0]||null==t[1])return;let n,o,s,u=+t[0],c=+t[1],l=a[1]<a[0],f=l?i().reverse():i(),d=f.length-1;return u!==u||c!==c||(c<u&&(s=u,u=c,c=s),c<f[0]||u>a[1-l])?void 0:(n=Math.max(0,qu(f,u)-1),o=u===c?n:qu(f,c)-1,u-f[n]>e+1e-10&&++n,l&&(s=n,n=d-o,o=d-s),n>o?void 0:r().slice(n,o+1))},n.invert=function(t){const e=n.invertRange([t,t]);return e?e[0]:e},n.copy=function(){return MW().domain(r()).range(a).round(o).paddingInner(s).paddingOuter(u).align(c)},l()}function IW(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return IW(e())},t}function RW(){return IW(MW().paddingInner(1))}var $W=Array.prototype.map;function BW(t){return $W.call(t,CW)}const zW=Array.prototype.slice;function LW(){let t=[],e=[];function n(n){return null==n||n!==n?void 0:e[(Gu(t,n)-1)%e.length]}return n.domain=function(e){return arguments.length?(t=BW(e),n):t.slice()},n.range=function(t){return arguments.length?(e=zW.call(t),n):e.slice()},n.tickFormat=function(e,n){return rc(t[0],kW(t),null==e?10:e,n)},n.copy=function(){return LW().domain(n.domain()).range(n.range())},n}const PW={};function UW(t,e,n){const r=function(){const n=e();return n.invertRange||(n.invertRange=n.invert?NW(n):n.invertExtent?TW(n):void 0),n.type=t,n};return r.metadata=FW(EW(n)),r}function WW(t,e,n){return arguments.length>1?(PW[t]=UW(t,e,n),this):qW(t)?PW[t]:void 0}function qW(t){return DW(PW,t)}function VW(t,e){var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);while(n<r)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}WW(KU,_l),WW(JU,Ol,hW),WW(ZU,Ml,[hW,ZU]),WW(QU,zl,hW),WW(tW,Ll,hW),WW(eW,ql,hW),WW(nW,ff,[hW,bW]),WW(rW,yf,[hW,bW]),WW(iW,wf,[hW,gW]),WW(`${iW}-${JU}`,wf,[hW,gW]),WW(`${iW}-${ZU}`,Of,[hW,gW,ZU]),WW(`${iW}-${QU}`,Af,[hW,gW]),WW(`${iW}-${tW}`,jf,[hW,gW]),WW(`${iW}-${eW}`,_f,[hW,gW]),WW(`${aW}-${JU}`,Ef,[hW,gW]),WW(`${aW}-${ZU}`,Sf,[hW,gW,ZU]),WW(`${aW}-${QU}`,Ff,[hW,gW]),WW(`${aW}-${tW}`,Nf,[hW,gW]),WW(`${aW}-${eW}`,Df,[hW,gW]),WW(oW,Tf,[mW,oW]),WW(sW,Mf,mW),WW(uW,If,mW),WW(dW,LW,[pW,mW]),WW(cW,Ku,pW),WW(fW,MW,pW),WW(lW,RW,pW);var GW=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function HW(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function XW(){}var YW=.7,KW=1/YW,JW="\\s*([+-]?\\d+)\\s*",ZW="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",QW="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tq=/^#([0-9a-f]{3,8})$/,eq=new RegExp("^rgb\\("+[JW,JW,JW]+"\\)$"),nq=new RegExp("^rgb\\("+[QW,QW,QW]+"\\)$"),rq=new RegExp("^rgba\\("+[JW,JW,JW,ZW]+"\\)$"),iq=new RegExp("^rgba\\("+[QW,QW,QW,ZW]+"\\)$"),aq=new RegExp("^hsl\\("+[ZW,QW,QW]+"\\)$"),oq=new RegExp("^hsla\\("+[ZW,QW,QW,ZW]+"\\)$"),sq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function uq(){return this.rgb().formatHex()}function cq(){return wq(this).formatHsl()}function lq(){return this.rgb().formatRgb()}function fq(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=tq.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?dq(e):3===n?new gq(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?hq(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?hq(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=eq.exec(t))?new gq(e[1],e[2],e[3],1):(e=nq.exec(t))?new gq(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=rq.exec(t))?hq(e[1],e[2],e[3],e[4]):(e=iq.exec(t))?hq(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=aq.exec(t))?xq(e[1],e[2]/100,e[3]/100,1):(e=oq.exec(t))?xq(e[1],e[2]/100,e[3]/100,e[4]):sq.hasOwnProperty(t)?dq(sq[t]):"transparent"===t?new gq(NaN,NaN,NaN,0):null}function dq(t){return new gq(t>>16&255,t>>8&255,255&t,1)}function hq(t,e,n,r){return r<=0&&(t=e=n=NaN),new gq(t,e,n,r)}function pq(t){return t instanceof XW||(t=fq(t)),t?(t=t.rgb(),new gq(t.r,t.g,t.b,t.opacity)):new gq}function mq(t,e,n,r){return 1===arguments.length?pq(t):new gq(t,e,n,null==r?1:r)}function gq(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function bq(){return"#"+vq(this.r)+vq(this.g)+vq(this.b)}function yq(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function vq(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function xq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _q(t,e,n,r)}function wq(t){if(t instanceof _q)return new _q(t.h,t.s,t.l,t.opacity);if(t instanceof XW||(t=fq(t)),!t)return new _q;if(t instanceof _q)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new _q(o,s,u,t.opacity)}function Oq(t,e,n,r){return 1===arguments.length?wq(t):new _q(t,e,n,null==r?1:r)}function _q(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Aq(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function jq(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}GW(XW,fq,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:uq,formatHex:uq,formatHsl:cq,formatRgb:lq,toString:lq}),GW(gq,mq,HW(XW,{brighter:function(t){return t=null==t?KW:Math.pow(KW,t),new gq(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?YW:Math.pow(YW,t),new gq(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bq,formatHex:bq,formatRgb:yq,toString:yq})),GW(_q,Oq,HW(XW,{brighter:function(t){return t=null==t?KW:Math.pow(KW,t),new _q(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?YW:Math.pow(YW,t),new _q(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new gq(Aq(t>=240?t-240:t+120,i,r),Aq(t,i,r),Aq(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var kq=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return jq((n-r/e)*e,o,i,a,s)}},Cq=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return jq((n-r/e)*e,i,a,o,s)}},Eq=function(t){return function(){return t}};function Sq(t,e){return function(n){return t+n*e}}function Dq(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Fq(t,e){var n=e-t;return n?Sq(t,n>180||n<-180?n-360*Math.round(n/360):n):Eq(isNaN(t)?e:t)}function Nq(t){return 1===(t=+t)?Tq:function(e,n){return n-e?Dq(e,n,t):Eq(isNaN(e)?n:e)}}function Tq(t,e){var n=e-t;return n?Sq(t,n):Eq(isNaN(t)?e:t)}var Mq=function t(e){var n=Nq(e);function r(t,e){var r=n((t=mq(t)).r,(e=mq(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Tq(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Iq(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=mq(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var Rq=Iq(kq),$q=Iq(Cq),Bq=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}};function zq(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var Lq=function(t,e){return(zq(e)?Bq:Pq)(t,e)};function Pq(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=tV(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}var Uq=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},Wq=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},qq=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=tV(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Vq=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gq=new RegExp(Vq.source,"g");function Hq(t){return function(){return t}}function Xq(t){return function(e){return t(e)+""}}var Yq,Kq,Jq,Zq,Qq=function(t,e){var n,r,i,a=Vq.lastIndex=Gq.lastIndex=0,o=-1,s=[],u=[];t+="",e+="";while((n=Vq.exec(t))&&(r=Gq.exec(e)))(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Wq(n,r)})),a=Gq.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?Xq(u[0].x):Hq(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},tV=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Eq(e):("number"===r?Wq:"string"===r?(n=fq(e))?(e=n,Mq):Qq:e instanceof fq?Mq:e instanceof Date?Uq:zq(e)?Bq:Array.isArray(e)?Pq:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?qq:Wq)(t,e)},eV=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},nV=function(t,e){var n=Fq(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},rV=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},iV=180/Math.PI,aV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},oV=function(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*iV,skewX:Math.atan(u)*iV,scaleX:o,scaleY:s}};function sV(t){return"none"===t?aV:(Yq||(Yq=document.createElement("DIV"),Kq=document.documentElement,Jq=document.defaultView),Yq.style.transform=t,t=Jq.getComputedStyle(Kq.appendChild(Yq),null).getPropertyValue("transform"),Kq.removeChild(Yq),t=t.slice(7,-1).split(","),oV(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function uV(t){return null==t?aV:(Zq||(Zq=document.createElementNS("http://www.w3.org/2000/svg","g")),Zq.setAttribute("transform",t),(t=Zq.transform.baseVal.consolidate())?(t=t.matrix,oV(t.a,t.b,t.c,t.d,t.e,t.f)):aV)}function cV(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:Wq(t,i)},{i:u-2,x:Wq(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}function o(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Wq(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Wq(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Wq(t,n)},{i:s-2,x:Wq(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),o(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){var e,n=-1,a=i.length;while(++n<a)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var lV=cV(sV,"px, ","px)","deg)"),fV=cV(uV,", ",")",")"),dV=Math.SQRT2,hV=2,pV=4,mV=1e-12;function gV(t){return((t=Math.exp(t))+1/t)/2}function bV(t){return((t=Math.exp(t))-1/t)/2}function yV(t){return((t=Math.exp(2*t))-1)/(t+1)}var vV=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],u=e[1],c=e[2],l=s-i,f=u-a,d=l*l+f*f;if(d<mV)r=Math.log(c/o)/dV,n=function(t){return[i+t*l,a+t*f,o*Math.exp(dV*t*r)]};else{var h=Math.sqrt(d),p=(c*c-o*o+pV*d)/(2*o*hV*h),m=(c*c-o*o-pV*d)/(2*c*hV*h),g=Math.log(Math.sqrt(p*p+1)-p),b=Math.log(Math.sqrt(m*m+1)-m);r=(b-g)/dV,n=function(t){var e=t*r,n=gV(g),s=o/(hV*h)*(n*yV(dV*e+g)-bV(g));return[i+s*l,a+s*f,o*n/gV(dV*e+g)]}}return n.duration=1e3*r,n};function xV(t){return function(e,n){var r=t((e=Oq(e)).h,(n=Oq(n)).h),i=Tq(e.s,n.s),a=Tq(e.l,n.l),o=Tq(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var wV=xV(Fq),OV=xV(Tq),_V=Math.PI/180,AV=180/Math.PI,jV=18,kV=.96422,CV=1,EV=.82521,SV=4/29,DV=6/29,FV=3*DV*DV,NV=DV*DV*DV;function TV(t){if(t instanceof IV)return new IV(t.l,t.a,t.b,t.opacity);if(t instanceof UV)return WV(t);t instanceof gq||(t=pq(t));var e,n,r=zV(t.r),i=zV(t.g),a=zV(t.b),o=RV((.2225045*r+.7168786*i+.0606169*a)/CV);return r===i&&i===a?e=n=o:(e=RV((.4360747*r+.3850649*i+.1430804*a)/kV),n=RV((.0139322*r+.0971045*i+.7141733*a)/EV)),new IV(116*o-16,500*(e-o),200*(o-n),t.opacity)}function MV(t,e,n,r){return 1===arguments.length?TV(t):new IV(t,e,n,null==r?1:r)}function IV(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function RV(t){return t>NV?Math.pow(t,1/3):t/FV+SV}function $V(t){return t>DV?t*t*t:FV*(t-SV)}function BV(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zV(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function LV(t){if(t instanceof UV)return new UV(t.h,t.c,t.l,t.opacity);if(t instanceof IV||(t=TV(t)),0===t.a&&0===t.b)return new UV(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*AV;return new UV(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function PV(t,e,n,r){return 1===arguments.length?LV(t):new UV(t,e,n,null==r?1:r)}function UV(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function WV(t){if(isNaN(t.h))return new IV(t.l,0,0,t.opacity);var e=t.h*_V;return new IV(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function qV(t,e){var n=Tq((t=MV(t)).l,(e=MV(e)).l),r=Tq(t.a,e.a),i=Tq(t.b,e.b),a=Tq(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function VV(t){return function(e,n){var r=t((e=PV(e)).h,(n=PV(n)).h),i=Tq(e.c,n.c),a=Tq(e.l,n.l),o=Tq(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}GW(IV,MV,HW(XW,{brighter:function(t){return new IV(this.l+jV*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new IV(this.l-jV*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=kV*$V(e),t=CV*$V(t),n=EV*$V(n),new gq(BV(3.1338561*e-1.6168667*t-.4906146*n),BV(-.9787684*e+1.9161415*t+.033454*n),BV(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),GW(UV,PV,HW(XW,{brighter:function(t){return new UV(this.h,this.c,this.l+jV*(null==t?1:t),this.opacity)},darker:function(t){return new UV(this.h,this.c,this.l-jV*(null==t?1:t),this.opacity)},rgb:function(){return WV(this).rgb()}}));var GV=VV(Fq),HV=VV(Tq),XV=-.14861,YV=1.78277,KV=-.29227,JV=-.90649,ZV=1.97294,QV=ZV*JV,tG=ZV*YV,eG=YV*KV-JV*XV;function nG(t){if(t instanceof iG)return new iG(t.h,t.s,t.l,t.opacity);t instanceof gq||(t=pq(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(eG*r+QV*e-tG*n)/(eG+QV-tG),a=r-i,o=(ZV*(n-i)-KV*a)/JV,s=Math.sqrt(o*o+a*a)/(ZV*i*(1-i)),u=s?Math.atan2(o,a)*AV-120:NaN;return new iG(u<0?u+360:u,s,i,t.opacity)}function rG(t,e,n,r){return 1===arguments.length?nG(t):new iG(t,e,n,null==r?1:r)}function iG(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function aG(t){return function e(n){function r(e,r){var i=t((e=rG(e)).h,(r=rG(r)).h),a=Tq(e.s,r.s),o=Tq(e.l,r.l),s=Tq(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}GW(iG,rG,HW(XW,{brighter:function(t){return t=null==t?KW:Math.pow(KW,t),new iG(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?YW:Math.pow(YW,t),new iG(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*_V,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new gq(255*(e+n*(XV*r+YV*i)),255*(e+n*(KV*r+JV*i)),255*(e+n*(ZV*r)),this.opacity)}}));var oG=aG(Fq),sG=aG(Tq),uG=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};function cG(t,e){const n=e[0],r=kW(e)-n;return function(e){return t(n+e*r)}}function lG(t,e,n){return VW(dG(e||"rgb",n),t)}function fG(t,e){const n=new Array(e),r=e+1;for(let i=0;i<e;)n[i]=t(++i/r);return n}function dG(t,e){const n=b[hG(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function hG(t){return"interpolate"+t.toLowerCase().split("-").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("")}const pG={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},mG={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function gG(t){const e=t.length/6|0,n=new Array(e);for(let r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function bG(t,e){for(const n in t)vG(n,e(t[n]))}const yG={};function vG(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(yG[t]=e,this):yG[t]}bG(mG,gG),bG(pG,t=>lG(gG(t)));function xG(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),wG(e,t.description()))}function wG(t,e){t&&(null==e?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}var OG=function(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})};const _G="default";var AG=function(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:_G,item:null}));t.on(t.events("view","mousemove"),e,(t,n)=>{const r=e.value,i=r?Object(Ue["F"])(r)?r:r.user:_G,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),t.add(null,(function(e){let n=e.cursor,r=this.value;return Object(Ue["F"])(n)||(r=n.item,n=n.user),jG(t,n&&n!==_G?n:r||n),r}),{cursor:e})};function jG(t,e){const n=t.globalCursor()?"undefined"!==typeof document&&document.body:t.container();if(n)return null==e?n.style.removeProperty("cursor"):n.style.cursor=e}function kG(t,e){var n=t._runtime.data;return Object(Ue["s"])(n,e)||Object(Ue["k"])("Unrecognized data set: "+e),n[e]}function CG(t,e){return arguments.length<2?kG(this,t).values.value:EG.call(this,t,Bn().remove(Ue["db"]).insert(e))}function EG(t,e){$n(e)||Object(Ue["k"])("Second argument to changes must be a changeset.");var n=kG(this,t);return n.modified=!0,this.pulse(n.input,e)}function SG(t,e){return EG.call(this,t,Bn().insert(e))}function DG(t,e){return EG.call(this,t,Bn().remove(e))}function FG(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function NG(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function TG(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function MG(t){var e=TG(t),n=FG(t),r=NG(t);t._renderer.background(t.background()),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach(e=>{try{e(n,r)}catch(i){t.error(i)}})}var IG=function(t,e,n){var r,i,a,o=t._renderer,s=o&&o.canvas();return s&&(a=TG(t),i=e.changedTouches?e.changedTouches[0]:e,r=Ty(i,s),r[0]-=a[0],r[1]-=a[1]),e.dataflow=t,e.item=n,e.vega=RG(t,n,r),e};function RG(t,e,n){var r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function a(t){if(!t)return n;Object(Ue["F"])(t)&&(t=i(t));var e=n.slice();while(t)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:Object(Ue["i"])(t),item:Object(Ue["i"])(e||{}),group:i,xy:a,x:function(t){return a(t)[0]},y:function(t){return a(t)[1]}}}const $G="view",BG="timer",zG="window",LG={trap:!1};function PG(t){const e=Object(Ue["l"])({defaults:{}},t),n=(t,e)=>{e.forEach(e=>{Object(Ue["x"])(t[e])&&(t[e]=Object(Ue["ab"])(t[e]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function UG(t,e){var n=t._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}function WG(t,e,n){const r=t._eventConfig&&t._eventConfig[e];return!(!1===r||Object(Ue["D"])(r)&&!r[n])||(t.warn(`Blocked ${e} ${n} event listener.`),!1)}function qG(t,e,n){var r,i=this,a=new Jn(n),o=function(n,r){i.runAsync(null,()=>{t===$G&&UG(i,e)&&n.preventDefault(),a.receive(IG(i,n,r))})};if(t===BG)WG(i,"timer",e)&&i.timer(o,e);else if(t===$G)WG(i,"view",e)&&i.addEventListener(e,o,LG);else if(t===zG?WG(i,"window",e)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&WG(i,"selector",e)&&(r=document.querySelectorAll(t)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(e,o);i._eventListeners.push({type:e,sources:r,handler:o})}else i.warn("Can not resolve event source: "+t);return a}function VG(t){return t.item}function GG(t){return t.item.mark.source}function HG(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}var XG=function(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",VG),GG,HG(t)),this.on(this.events("view","mouseout",VG),GG,HG(e)),this},YG=function(){var t,e,n,r=this._tooltip,i=this._timers,a=this._eventListeners;t=i.length;while(--t>=0)i[t].stop();t=a.length;while(--t>=0){n=a[t],e=n.sources.length;while(--e>=0)n.sources[e].removeEventListener(n.type,n.handler)}return r&&r.call(this,this._handler,null,null,null),this},KG=function(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r};const JG="vega-bind",ZG="vega-bind-name",QG="vega-bind-radio";var tH=function(t,e,n){if(!e)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:e=>{e!==t.signal(r.signal)&&t.runAsync(null,()=>{i.source=!0,t.signal(r.signal,e)})}},r.debounce&&(i.update=Object(Ue["j"])(r.debounce,i.update))),eH(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0),i};function eH(t,e,n,r){const i=KG("div",{class:JG}),a="radio"===n.input?i:i.appendChild(KG("label"));a.appendChild(KG("span",{class:ZG},n.name||n.signal)),e.appendChild(i);let o=nH;switch(n.input){case"checkbox":o=rH;break;case"select":o=iH;break;case"radio":o=aH;break;case"range":o=oH;break}o(t,a,n,r)}function nH(t,e,n,r){const i=KG("input");for(const a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=t=>i.value=t}function rH(t,e,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const a=KG("input",i);e.appendChild(a),a.addEventListener("change",()=>t.update(a.checked)),t.elements=[a],t.set=t=>a.checked=!!t||null}function iH(t,e,n,r){const i=KG("select",{name:n.signal}),a=n.labels||[];n.options.forEach((t,e)=>{const n={value:t};sH(t,r)&&(n.selected=!0),i.appendChild(KG("option",n,(a[e]||t)+""))}),e.appendChild(i),i.addEventListener("change",()=>{t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=t=>{for(let e=0,r=n.options.length;e<r;++e)if(sH(n.options[e],t))return void(i.selectedIndex=e)}}function aH(t,e,n,r){const i=KG("span",{class:QG}),a=n.labels||[];e.appendChild(i),t.elements=n.options.map((e,o)=>{const s={type:"radio",name:n.signal,value:e};sH(e,r)&&(s.checked=!0);const u=KG("input",s);u.addEventListener("change",()=>t.update(e));const c=KG("label",{},(a[o]||e)+"");return c.prepend(u),i.appendChild(c),u}),t.set=e=>{const n=t.elements,r=n.length;for(let t=0;t<r;++t)sH(n[t].value,e)&&(n[t].checked=!0)}}function oH(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,a=n.min||Math.min(0,i,+r)||0,o=n.step||Object(Ju["c"])(a,i,100),s=KG("input",{type:"range",name:n.signal,min:a,max:i,step:o});s.value=r;const u=KG("span",{},+r);e.appendChild(s),e.appendChild(u);const c=()=>{u.textContent=s.value,t.update(+s.value)};s.addEventListener("input",c),s.addEventListener("change",c),t.elements=[s],t.set=t=>{s.value=t,u.textContent=t}}function sH(t,e){return t===e||t+""===e+""}var uH=function(t,e,n,r,i,a){return e=e||new r(t.loader()),e.initialize(n,FG(t),NG(t),TG(t),i,a).background(t.background())},cH=function(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null},lH=function(t,e,n,r){var i=new r(t.loader(),cH(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,TG(t),t);return e&&e.handlers().forEach(t=>{i.on(t.type,t.handler)}),i},fH=function(t,e){const n=this,r=n._renderType,i=n._eventConfig.bind,a=wx(r);t=n._el=t?dH(n,t):null,xG(n),a||n.error("Unrecognized renderer type: "+r);const o=a.handler||ov,s=t?a.renderer:a.headless;return n._renderer=s?uH(n,n._renderer,t,s):null,n._handler=lH(n,n._handler,t,o),n._redraw=!0,t&&"none"!==i&&(e=e?n._elBind=dH(n,e):t.appendChild(KG("form",{class:"vega-bindings"})),n._bind.forEach(t=>{t.param.element&&"container"!==i&&(t.element=dH(n,t.param.element))}),n._bind.forEach(t=>{tH(n,t.element||e,t)})),n};function dH(t,e){if("string"===typeof e){if("undefined"===typeof document)return t.error("DOM document instance not found."),null;if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}const hH=t=>+t||0,pH=t=>({top:t,bottom:t,left:t,right:t});var mH=function(t){return Object(Ue["D"])(t)?{top:hH(t.top),bottom:hH(t.bottom),left:hH(t.left),right:hH(t.right)}:pH(hH(t))},gH=async function(t,e,n,r){const i=wx(e),a=i&&i.headless;return a||Object(Ue["k"])("Unrecognized renderer type: "+e),await t.runAsync(),uH(t,null,null,a,n,r).renderAsync(t._scenegraph.root)},bH=async function(t,e){t!==vx.Canvas&&t!==vx.SVG&&t!==vx.PNG&&Object(Ue["k"])("Unrecognized image type: "+t);const n=await gH(this,t,e);return t===vx.SVG?yH(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")};function yH(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}var vH=async function(t,e){const n=await gH(this,vx.Canvas,t,e);return n.canvas()},xH=async function(t){const e=await gH(this,vx.SVG,t);return e.svg()};const wH="RawCode",OH="Literal",_H="Property",AH="Identifier",jH="ArrayExpression",kH="BinaryExpression",CH="CallExpression",EH="ConditionalExpression",SH="LogicalExpression",DH="MemberExpression",FH="ObjectExpression",NH="UnaryExpression";function TH(t){this.type=t}function MH(t){switch(t.type){case jH:return t.elements;case kH:case SH:return[t.left,t.right];case CH:return[t.callee].concat(t.arguments);case EH:return[t.test,t.consequent,t.alternate];case DH:return[t.object,t.property];case FH:return t.properties;case _H:return[t.key,t.value];case NH:return[t.argument];case AH:case OH:case wH:default:return[]}}var IH,RH,$H,BH,zH;TH.prototype.visit=function(t){let e,n,r;if(t(this))return 1;for(e=MH(this),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1};var LH=1,PH=2,UH=3,WH=4,qH=5,VH=6,GH=7,HH=8,XH=9;IH={},IH[LH]="Boolean",IH[PH]="<end>",IH[UH]="Identifier",IH[WH]="Keyword",IH[qH]="Null",IH[VH]="Numeric",IH[GH]="Punctuator",IH[HH]="String",IH[XH]="RegularExpression";var YH="ArrayExpression",KH="BinaryExpression",JH="CallExpression",ZH="ConditionalExpression",QH="Identifier",tX="Literal",eX="LogicalExpression",nX="MemberExpression",rX="ObjectExpression",iX="Property",aX="UnaryExpression",oX="Unexpected token %0",sX="Unexpected number",uX="Unexpected string",cX="Unexpected identifier",lX="Unexpected reserved word",fX="Unexpected end of input",dX="Invalid regular expression",hX="Invalid regular expression: missing /",pX="Octal literals are not allowed in strict mode.",mX="Duplicate data property in object literal not allowed in strict mode",gX="ILLEGAL",bX="Disabled.",yX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),vX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function xX(t,e){if(!t)throw new Error("ASSERT: "+e)}function wX(t){return t>=48&&t<=57}function OX(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function _X(t){return"01234567".indexOf(t)>=0}function AX(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function jX(t){return 10===t||13===t||8232===t||8233===t}function kX(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&yX.test(String.fromCharCode(t))}function CX(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&vX.test(String.fromCharCode(t))}const EX={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function SX(){while($H<BH){const t=RH.charCodeAt($H);if(!AX(t)&&!jX(t))break;++$H}}function DX(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)$H<BH&&OX(RH[$H])?(r=RH[$H++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):iY({},oX,gX);return String.fromCharCode(i)}function FX(){var t,e,n,r;t=RH[$H],e=0,"}"===t&&iY({},oX,gX);while($H<BH){if(t=RH[$H++],!OX(t))break;e=16*e+"0123456789abcdef".indexOf(t.toLowerCase())}return(e>1114111||"}"!==t)&&iY({},oX,gX),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function NX(){var t,e;t=RH.charCodeAt($H++),e=String.fromCharCode(t),92===t&&(117!==RH.charCodeAt($H)&&iY({},oX,gX),++$H,t=DX("u"),t&&"\\"!==t&&kX(t.charCodeAt(0))||iY({},oX,gX),e=t);while($H<BH){if(t=RH.charCodeAt($H),!CX(t))break;++$H,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==RH.charCodeAt($H)&&iY({},oX,gX),++$H,t=DX("u"),t&&"\\"!==t&&CX(t.charCodeAt(0))||iY({},oX,gX),e+=t)}return e}function TX(){var t,e;t=$H++;while($H<BH){if(e=RH.charCodeAt($H),92===e)return $H=t,NX();if(!CX(e))break;++$H}return RH.slice(t,$H)}function MX(){var t,e,n;return t=$H,e=92===RH.charCodeAt($H)?NX():TX(),n=1===e.length?UH:EX.hasOwnProperty(e)?WH:"null"===e?qH:"true"===e||"false"===e?LH:UH,{type:n,value:e,start:t,end:$H}}function IX(){var t,e,n,r,i=$H,a=RH.charCodeAt($H),o=RH[$H];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$H,{type:GH,value:String.fromCharCode(a),start:i,end:$H};default:if(t=RH.charCodeAt($H+1),61===t)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $H+=2,{type:GH,value:String.fromCharCode(a)+String.fromCharCode(t),start:i,end:$H};case 33:case 61:return $H+=2,61===RH.charCodeAt($H)&&++$H,{type:GH,value:RH.slice(i,$H),start:i,end:$H}}}return r=RH.substr($H,4),">>>="===r?($H+=4,{type:GH,value:r,start:i,end:$H}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?($H+=3,{type:GH,value:n,start:i,end:$H}):(e=n.substr(0,2),o===e[1]&&"+-<>&|".indexOf(o)>=0||"=>"===e?($H+=2,{type:GH,value:e,start:i,end:$H}):"<>=!+-*%&|^/".indexOf(o)>=0?(++$H,{type:GH,value:o,start:i,end:$H}):void iY({},oX,gX)))}function RX(t){let e="";while($H<BH){if(!OX(RH[$H]))break;e+=RH[$H++]}return 0===e.length&&iY({},oX,gX),kX(RH.charCodeAt($H))&&iY({},oX,gX),{type:VH,value:parseInt("0x"+e,16),start:t,end:$H}}function $X(t){let e="0"+RH[$H++];while($H<BH){if(!_X(RH[$H]))break;e+=RH[$H++]}return(kX(RH.charCodeAt($H))||wX(RH.charCodeAt($H)))&&iY({},oX,gX),{type:VH,value:parseInt(e,8),octal:!0,start:t,end:$H}}function BX(){var t,e,n;if(n=RH[$H],xX(wX(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=$H,t="","."!==n){if(t=RH[$H++],n=RH[$H],"0"===t){if("x"===n||"X"===n)return++$H,RX(e);if(_X(n))return $X(e);n&&wX(n.charCodeAt(0))&&iY({},oX,gX)}while(wX(RH.charCodeAt($H)))t+=RH[$H++];n=RH[$H]}if("."===n){t+=RH[$H++];while(wX(RH.charCodeAt($H)))t+=RH[$H++];n=RH[$H]}if("e"===n||"E"===n)if(t+=RH[$H++],n=RH[$H],"+"!==n&&"-"!==n||(t+=RH[$H++]),wX(RH.charCodeAt($H)))while(wX(RH.charCodeAt($H)))t+=RH[$H++];else iY({},oX,gX);return kX(RH.charCodeAt($H))&&iY({},oX,gX),{type:VH,value:parseFloat(t),start:e,end:$H}}function zX(){var t,e,n,r,i="",a=!1;t=RH[$H],xX("'"===t||'"'===t,"String literal must starts with a quote"),e=$H,++$H;while($H<BH){if(n=RH[$H++],n===t){t="";break}if("\\"===n)if(n=RH[$H++],n&&jX(n.charCodeAt(0)))"\r"===n&&"\n"===RH[$H]&&++$H;else switch(n){case"u":case"x":"{"===RH[$H]?(++$H,i+=FX()):i+=DX(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:_X(n)?(r="01234567".indexOf(n),0!==r&&(a=!0),$H<BH&&_X(RH[$H])&&(a=!0,r=8*r+"01234567".indexOf(RH[$H++]),"0123".indexOf(n)>=0&&$H<BH&&_X(RH[$H])&&(r=8*r+"01234567".indexOf(RH[$H++]))),i+=String.fromCharCode(r)):i+=n;break}else{if(jX(n.charCodeAt(0)))break;i+=n}}return""!==t&&iY({},oX,gX),{type:HH,value:i,octal:a,start:e,end:$H}}function LX(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(t,e)=>{if(parseInt(e,16)<=1114111)return"x";iY({},dX)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){iY({},dX)}try{return new RegExp(t,e)}catch(i){return null}}function PX(){var t,e,n,r,i;t=RH[$H],xX("/"===t,"Regular expression literal must start with a slash"),e=RH[$H++],n=!1,r=!1;while($H<BH)if(t=RH[$H++],e+=t,"\\"===t)t=RH[$H++],jX(t.charCodeAt(0))&&iY({},hX),e+=t;else if(jX(t.charCodeAt(0)))iY({},hX);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||iY({},hX),i=e.substr(1,e.length-2),{value:i,literal:e}}function UX(){var t,e,n;e="",n="";while($H<BH){if(t=RH[$H],!CX(t.charCodeAt(0)))break;++$H,"\\"===t&&$H<BH?iY({},oX,gX):(n+=t,e+=t)}return n.search(/[^gimuy]/g)>=0&&iY({},dX,n),{value:n,literal:e}}function WX(){var t,e,n,r;return zH=null,SX(),t=$H,e=PX(),n=UX(),r=LX(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:$H}}function qX(t){return t.type===UH||t.type===WH||t.type===LH||t.type===qH}function VX(){if(SX(),$H>=BH)return{type:PH,start:$H,end:$H};const t=RH.charCodeAt($H);return kX(t)?MX():40===t||41===t||59===t?IX():39===t||34===t?zX():46===t?wX(RH.charCodeAt($H+1))?BX():IX():wX(t)?BX():IX()}function GX(){const t=zH;return $H=t.end,zH=VX(),$H=t.end,t}function HX(){const t=$H;zH=VX(),$H=t}function XX(t){const e=new TH(YH);return e.elements=t,e}function YX(t,e,n){const r=new TH("||"===t||"&&"===t?eX:KH);return r.operator=t,r.left=e,r.right=n,r}function KX(t,e){const n=new TH(JH);return n.callee=t,n.arguments=e,n}function JX(t,e,n){const r=new TH(ZH);return r.test=t,r.consequent=e,r.alternate=n,r}function ZX(t){const e=new TH(QH);return e.name=t,e}function QX(t){const e=new TH(tX);return e.value=t.value,e.raw=RH.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function tY(t,e,n){const r=new TH(nX);return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function eY(t){const e=new TH(rX);return e.properties=t,e}function nY(t,e,n){const r=new TH(iX);return r.key=e,r.value=n,r.kind=t,r}function rY(t,e){const n=new TH(aX);return n.operator=t,n.argument=e,n.prefix=!0,n}function iY(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(t,e)=>(xX(e<r.length,"Message reference must be in range"),r[e]));throw n=new Error(i),n.index=$H,n.description=i,n}function aY(t){t.type===PH&&iY(t,fX),t.type===VH&&iY(t,sX),t.type===HH&&iY(t,uX),t.type===UH&&iY(t,cX),t.type===WH&&iY(t,lX),iY(t,oX,t.value)}function oY(t){const e=GX();e.type===GH&&e.value===t||aY(e)}function sY(t){return zH.type===GH&&zH.value===t}function uY(t){return zH.type===WH&&zH.value===t}function cY(){const t=[];$H=zH.start,oY("[");while(!sY("]"))sY(",")?(GX(),t.push(null)):(t.push(jY()),sY("]")||oY(","));return GX(),XX(t)}function lY(){$H=zH.start;const t=GX();return t.type===HH||t.type===VH?(t.octal&&iY(t,pX),QX(t)):ZX(t.value)}function fY(){var t,e,n,r;return $H=zH.start,t=zH,t.type===UH?(n=lY(),oY(":"),r=jY(),nY("init",n,r)):t.type!==PH&&t.type!==GH?(e=lY(),oY(":"),r=jY(),nY("init",e,r)):void aY(t)}function dY(){var t,e,n,r=[],i={},a=String;$H=zH.start,oY("{");while(!sY("}"))t=fY(),e=t.key.type===QH?t.key.name:a(t.key.value),n="$"+e,Object.prototype.hasOwnProperty.call(i,n)?iY({},mX):i[n]=!0,r.push(t),sY("}")||oY(",");return oY("}"),eY(r)}function hY(){oY("(");const t=kY();return oY(")"),t}const pY={if:1};function mY(){var t,e,n;if(sY("("))return hY();if(sY("["))return cY();if(sY("{"))return dY();if(t=zH.type,$H=zH.start,t===UH||pY[zH.value])n=ZX(GX().value);else if(t===HH||t===VH)zH.octal&&iY(zH,pX),n=QX(GX());else{if(t===WH)throw new Error(bX);t===LH?(e=GX(),e.value="true"===e.value,n=QX(e)):t===qH?(e=GX(),e.value=null,n=QX(e)):sY("/")||sY("/=")?(n=QX(WX()),HX()):aY(GX())}return n}function gY(){const t=[];if(oY("("),!sY(")"))while($H<BH){if(t.push(jY()),sY(")"))break;oY(",")}return oY(")"),t}function bY(){$H=zH.start;const t=GX();return qX(t)||aY(t),ZX(t.value)}function yY(){return oY("."),bY()}function vY(){oY("[");const t=kY();return oY("]"),t}function xY(){var t,e,n;for(t=mY();;)if(sY("."))n=yY(),t=tY(".",t,n);else if(sY("("))e=gY(),t=KX(t,e);else{if(!sY("["))break;n=vY(),t=tY("[",t,n)}return t}function wY(){const t=xY();if(zH.type===GH&&(sY("++")||sY("--")))throw new Error(bX);return t}function OY(){var t,e;if(zH.type!==GH&&zH.type!==WH)e=wY();else{if(sY("++")||sY("--"))throw new Error(bX);if(sY("+")||sY("-")||sY("~")||sY("!"))t=GX(),e=OY(),e=rY(t.value,e);else{if(uY("delete")||uY("void")||uY("typeof"))throw new Error(bX);e=wY()}}return e}function _Y(t){let e=0;if(t.type!==GH&&t.type!==WH)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function AY(){var t,e,n,r,i,a,o,s,u,c;if(t=zH,u=OY(),r=zH,i=_Y(r),0===i)return u;r.prec=i,GX(),e=[t,zH],o=OY(),a=[u,r,o];while((i=_Y(zH))>0){while(a.length>2&&i<=a[a.length-2].prec)o=a.pop(),s=a.pop().value,u=a.pop(),e.pop(),n=YX(s,u,o),a.push(n);r=GX(),r.prec=i,a.push(r),e.push(zH),n=OY(),a.push(n)}c=a.length-1,n=a[c],e.pop();while(c>1)e.pop(),n=YX(a[c-1].value,a[c-2],n),c-=2;return n}function jY(){var t,e,n;return t=AY(),sY("?")&&(GX(),e=jY(),oY(":"),n=jY(),t=JX(t,e,n)),t}function kY(){const t=jY();if(sY(","))throw new Error(bX);return t}function CY(t){RH=t,$H=0,BH=RH.length,zH=null,HX();const e=kY();if(zH.type!==PH)throw new Error("Unexpect token after expression.");return e}var EY={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function SY(t){function e(e,n,r,i){let a=t(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}function n(t,n,r){return i=>e(t,i,n,r)}const r="new Date",i="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&Object(Ue["k"])("Missing arguments to clamp function."),e.length>3&&Object(Ue["k"])("Too many arguments to clamp function.");const n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),join:n("join",null),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),reverse:function(e){return"("+t(e[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),replace:n("replace",i),trim:n("trim",i,0),regexp:a,test:n("test",a),if:function(e){e.length<3&&Object(Ue["k"])("Missing arguments to if function."),e.length>3&&Object(Ue["k"])("Too many arguments to if function.");const n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function DY(t){const e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}function FY(t){t=t||{};const e=t.allowed?Object(Ue["ab"])(t.allowed):{},n=t.forbidden?Object(Ue["ab"])(t.forbidden):{},r=t.constants||EY,i=(t.functions||SY)(f),a=t.globalvar,o=t.fieldvar,s=Object(Ue["A"])(a)?a:t=>"".concat(a,'["').concat(t,'"]');let u={},c={},l=0;function f(t){if(Object(Ue["F"])(t))return t;const e=d[t.type];return null==e&&Object(Ue["k"])("Unsupported type: "+t.type),e(t)}const d={Literal:t=>t.raw,Identifier:t=>{const i=t.name;return l>0?i:Object(Ue["s"])(n,i)?Object(Ue["k"])("Illegal identifier: "+i):Object(Ue["s"])(r,i)?r[i]:Object(Ue["s"])(e,i)?i:(u[i]=1,s(i))},MemberExpression:t=>{const e=!t.computed,n=f(t.object);e&&(l+=1);const r=f(t.property);return n===o&&(c[DY(r)]=1),e&&(l-=1),n+(e?"."+r:"["+r+"]")},CallExpression:t=>{"Identifier"!==t.callee.type&&Object(Ue["k"])("Illegal callee type: "+t.callee.type);const e=t.callee.name,n=t.arguments,r=Object(Ue["s"])(i,e)&&i[e];return r||Object(Ue["k"])("Unrecognized function: "+e),Object(Ue["A"])(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:t=>"["+t.elements.map(f).join(",")+"]",BinaryExpression:t=>"("+f(t.left)+t.operator+f(t.right)+")",UnaryExpression:t=>"("+t.operator+f(t.argument)+")",ConditionalExpression:t=>"("+f(t.test)+"?"+f(t.consequent)+":"+f(t.alternate)+")",LogicalExpression:t=>"("+f(t.left)+t.operator+f(t.right)+")",ObjectExpression:t=>"{"+t.properties.map(f).join(",")+"}",Property:t=>{l+=1;const e=f(t.key);return l-=1,e+":"+f(t.value)}};function h(t){const e={code:f(t),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},e}return h.functions=i,h.constants=r,h}var NY,TY,MY,IY,RY,$Y=new h_,BY=new h_,zY={point:$_,lineStart:$_,lineEnd:$_,polygonStart:function(){$Y=new h_,zY.lineStart=LY,zY.lineEnd=PY},polygonEnd:function(){var t=+$Y;BY.add(t<0?v_+t:t),this.lineStart=this.lineEnd=this.point=$_},sphere:function(){BY.add(v_)}};function LY(){zY.point=UY}function PY(){WY(NY,TY)}function UY(t,e){zY.point=WY,NY=t,TY=e,t*=w_,e*=w_,MY=t,IY=j_(e=e/2+y_),RY=F_(e)}function WY(t,e){t*=w_,e*=w_,e=e/2+y_;var n=t-MY,r=n>=0?1:-1,i=r*n,a=j_(e),o=F_(e),s=RY*o,u=IY*a+s*j_(i),c=s*r*F_(i);$Y.add(A_(c,u)),MY=t,IY=a,RY=o}var qY,VY,GY,HY,XY,YY,KY,JY,ZY,QY,tK,eK=function(t){return BY=new h_,d_(t,zY),2*BY},nK={point:rK,lineStart:aK,lineEnd:oK,polygonStart:function(){nK.point=sK,nK.lineStart=uK,nK.lineEnd=cK,ZY=new h_,zY.polygonStart()},polygonEnd:function(){zY.polygonEnd(),nK.point=rK,nK.lineStart=aK,nK.lineEnd=oK,$Y<0?(qY=-(GY=180),VY=-(HY=90)):ZY>p_?HY=90:ZY<-p_&&(VY=-90),tK[0]=qY,tK[1]=GY},sphere:function(){qY=-(GY=180),VY=-(HY=90)}};function rK(t,e){QY.push(tK=[qY=t,GY=t]),e<VY&&(VY=e),e>HY&&(HY=e)}function iK(t,e){var n=HA([t*w_,e*w_]);if(JY){var r=YA(JY,n),i=[r[1],-r[0],0],a=YA(i,r);ZA(a),a=GA(a);var o,s=t-XY,u=s>0?1:-1,c=a[0]*x_*u,l=O_(s)>180;l^(u*XY<c&&c<u*t)?(o=a[1]*x_,o>HY&&(HY=o)):(c=(c+360)%360-180,l^(u*XY<c&&c<u*t)?(o=-a[1]*x_,o<VY&&(VY=o)):(e<VY&&(VY=e),e>HY&&(HY=e))),l?t<XY?lK(qY,t)>lK(qY,GY)&&(GY=t):lK(t,GY)>lK(qY,GY)&&(qY=t):GY>=qY?(t<qY&&(qY=t),t>GY&&(GY=t)):t>XY?lK(qY,t)>lK(qY,GY)&&(GY=t):lK(t,GY)>lK(qY,GY)&&(qY=t)}else QY.push(tK=[qY=t,GY=t]);e<VY&&(VY=e),e>HY&&(HY=e),JY=n,XY=t}function aK(){nK.point=iK}function oK(){tK[0]=qY,tK[1]=GY,nK.point=rK,JY=null}function sK(t,e){if(JY){var n=t-XY;ZY.add(O_(n)>180?n+(n>0?360:-360):n)}else YY=t,KY=e;zY.point(t,e),iK(t,e)}function uK(){zY.lineStart()}function cK(){sK(YY,KY),zY.lineEnd(),O_(ZY)>p_&&(qY=-(GY=180)),tK[0]=qY,tK[1]=GY,JY=null}function lK(t,e){return(e-=t)<0?e+360:e}function fK(t,e){return t[0]-e[0]}function dK(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var hK,pK,mK,gK,bK,yK,vK,xK,wK,OK,_K,AK,jK,kK,CK,EK,SK=function(t){var e,n,r,i,a,o,s;if(HY=GY=-(qY=VY=1/0),QY=[],d_(t,nK),n=QY.length){for(QY.sort(fK),e=1,r=QY[0],a=[r];e<n;++e)i=QY[e],dK(r,i[0])||dK(r,i[1])?(lK(r[0],i[1])>lK(r[0],r[1])&&(r[1]=i[1]),lK(i[0],r[1])>lK(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,n=a.length-1,e=0,r=a[n];e<=n;r=i,++e)i=a[e],(s=lK(r[1],i[0]))>o&&(o=s,qY=i[0],GY=r[1])}return QY=tK=null,qY===1/0||VY===1/0?[[NaN,NaN],[NaN,NaN]]:[[qY,VY],[GY,HY]]},DK={sphere:$_,point:FK,lineStart:TK,lineEnd:RK,polygonStart:function(){DK.lineStart=$K,DK.lineEnd=BK},polygonEnd:function(){DK.lineStart=TK,DK.lineEnd=RK}};function FK(t,e){t*=w_,e*=w_;var n=j_(e);NK(n*j_(t),n*F_(t),F_(e))}function NK(t,e,n){++hK,mK+=(t-mK)/hK,gK+=(e-gK)/hK,bK+=(n-bK)/hK}function TK(){DK.point=MK}function MK(t,e){t*=w_,e*=w_;var n=j_(e);kK=n*j_(t),CK=n*F_(t),EK=F_(e),DK.point=IK,NK(kK,CK,EK)}function IK(t,e){t*=w_,e*=w_;var n=j_(e),r=n*j_(t),i=n*F_(t),a=F_(e),o=A_(T_((o=CK*a-EK*i)*o+(o=EK*r-kK*a)*o+(o=kK*i-CK*r)*o),kK*r+CK*i+EK*a);pK+=o,yK+=o*(kK+(kK=r)),vK+=o*(CK+(CK=i)),xK+=o*(EK+(EK=a)),NK(kK,CK,EK)}function RK(){DK.point=FK}function $K(){DK.point=zK}function BK(){LK(AK,jK),DK.point=FK}function zK(t,e){AK=t,jK=e,t*=w_,e*=w_,DK.point=LK;var n=j_(e);kK=n*j_(t),CK=n*F_(t),EK=F_(e),NK(kK,CK,EK)}function LK(t,e){t*=w_,e*=w_;var n=j_(e),r=n*j_(t),i=n*F_(t),a=F_(e),o=CK*a-EK*i,s=EK*r-kK*a,u=kK*i-CK*r,c=E_(o,s,u),l=R_(c),f=c&&-l/c;wK.add(f*o),OK.add(f*s),_K.add(f*u),pK+=l,yK+=l*(kK+(kK=r)),vK+=l*(CK+(CK=i)),xK+=l*(EK+(EK=a)),NK(kK,CK,EK)}var PK=function(t){hK=pK=mK=gK=bK=yK=vK=xK=0,wK=new h_,OK=new h_,_K=new h_,d_(t,DK);var e=+wK,n=+OK,r=+_K,i=E_(e,n,r);return i<m_&&(e=yK,n=vK,r=xK,pK<p_&&(e=mK,n=gK,r=bK),i=E_(e,n,r),i<m_)?[NaN,NaN]:[A_(n,e)*x_,R_(r/i)*x_]};const UK="RawCode",WK="Literal",qK="Property",VK="Identifier",GK="ArrayExpression",HK="BinaryExpression",XK="CallExpression",YK="ConditionalExpression",KK="LogicalExpression",JK="MemberExpression",ZK="ObjectExpression",QK="UnaryExpression";function tJ(t){this.type=t}function eJ(t){switch(t.type){case GK:return t.elements;case HK:case KK:return[t.left,t.right];case XK:return[t.callee].concat(t.arguments);case YK:return[t.test,t.consequent,t.alternate];case JK:return[t.object,t.property];case ZK:return t.properties;case qK:return[t.key,t.value];case QK:return[t.argument];case VK:case WK:case UK:default:return[]}}var nJ;tJ.prototype.visit=function(t){let e,n,r;if(t(this))return 1;for(e=eJ(this),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1};var rJ=1,iJ=2,aJ=3,oJ=4,sJ=5,uJ=6,cJ=7,lJ=8,fJ=9;nJ={},nJ[rJ]="Boolean",nJ[iJ]="<end>",nJ[aJ]="Identifier",nJ[oJ]="Keyword",nJ[sJ]="Null",nJ[uJ]="Numeric",nJ[cJ]="Punctuator",nJ[lJ]="String",nJ[fJ]="RegularExpression";new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");const dJ="intersect",hJ="union",pJ="vlMulti",mJ="or",gJ="and";var bJ="E",yJ="R",vJ="R-E",xJ="R-LE",wJ="R-RE",OJ="index:unit";function _J(t,e){for(var n,r,i=e.fields,a=e.values,o=i.length,s=0;s<o;++s)if(r=i[s],r.getter=Ue["q"].getter||Object(Ue["q"])(r.field),n=r.getter(t),Object(Ue["z"])(n)&&(n=Object(Ue["Z"])(n)),Object(Ue["z"])(a[s])&&(a[s]=Object(Ue["Z"])(a[s])),Object(Ue["z"])(a[s][0])&&(a[s]=a[s].map(Ue["Z"])),r.type===bJ){if(Object(Ue["x"])(a[s])?a[s].indexOf(n)<0:n!==a[s])return!1}else if(r.type===yJ){if(!Object(Ue["w"])(n,a[s]))return!1}else if(r.type===wJ){if(!Object(Ue["w"])(n,a[s],!0,!1))return!1}else if(r.type===vJ){if(!Object(Ue["w"])(n,a[s],!1,!1))return!1}else if(r.type===xJ&&!Object(Ue["w"])(n,a[s],!1,!0))return!1;return!0}function AJ(t,e,n){for(var r,i,a,o,s,u=this.context.data[t],c=u?u.values.value:[],l=u?u[OJ]&&u[OJ].value:void 0,f=n===dJ,d=c.length,h=0;h<d;++h)if(r=c[h],l&&f){if(i=i||{},a=i[o=r.unit]||0,-1===a)continue;if(s=_J(e,r),i[o]=s?-1:++a,s&&1===l.size)return!0;if(!s&&a===l.get(o).count)return!1}else if(s=_J(e,r),f^s)return s;return d&&f}function jJ(t,e,n){for(var r,i,a,o,s,u,c,l,f,d,h,p=this.context.data[t],m=p?p.values.value:[],g={},b={},y={},v=m.length,x=0;x<v;++x){for(r=m[x],o=r.unit,i=r.fields,a=r.values,d=0,h=i.length;d<h;++d)s=i[d],u=g[s.field]||(g[s.field]={}),c=u[o]||(u[o]=[]),y[s.field]=l=s.type.charAt(0),f=kJ[l+"_union"],u[o]=f(c,Object(Ue["e"])(a[d]));n&&(c=b[o]||(b[o]=[]),c.push(Object(Ue["e"])(a).reduce((t,e,n)=>(t[i[n].field]=e,t),{})))}return e=e||hJ,Object.keys(g).forEach(t=>{g[t]=Object.keys(g[t]).map(e=>g[t][e]).reduce((n,r)=>void 0===n?r:kJ[y[t]+"_"+e](n,r))}),m=Object.keys(b),n&&m.length&&(g[pJ]=e===hJ?{[mJ]:m.reduce((t,e)=>(t.push(...b[e]),t),[])}:{[gJ]:m.map(t=>({[mJ]:b[t]}))}),g}var kJ={E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(t=>e.indexOf(t)>=0):e},R_union:function(t,e){var n=Object(Ue["Z"])(e[0]),r=Object(Ue["Z"])(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=Object(Ue["Z"])(e[0]),r=Object(Ue["Z"])(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}};const CJ=":",EJ="@";function SJ(t,e,n,r){e[0].type!==WK&&Object(Ue["k"])("First argument to selection functions must be a string literal.");const i=e[0].value,a=e.length>=2&&Object(Ue["S"])(e).value,o="unit",s=EJ+o,u=CJ+i;a!==dJ||Object(Ue["s"])(r,s)||(r[s]=n.getData(i).indataRef(n,o)),Object(Ue["s"])(r,u)||(r[u]=n.getData(i).tuplesRef())}function DJ(t){const e=this.context.data[t];return e?e.values.value:[]}function FJ(t,e,n){const r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i}function NJ(t,e){const n=this.context.dataflow,r=this.context.data[t],i=r.input;return n.pulse(i,n.changeset().remove(Ue["db"]).insert(e)),1}function TJ(t,e,n){if(t){const n=this.context.dataflow,r=t.mark.source;n.pulse(r,n.changeset().encode(t,e))}return void 0!==n?n:t}const MJ=t=>function(e,n){const r=this.context.dataflow.locale();return r[t](n)(e)},IJ=MJ("format"),RJ=MJ("timeFormat"),$J=MJ("utcFormat"),BJ=MJ("timeParse"),zJ=MJ("utcParse"),LJ=new Date(2e3,0,1);function PJ(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?(LJ.setYear(2e3),LJ.setMonth(t),LJ.setDate(e),RJ.call(this,LJ,n)):""}function UJ(t){return PJ.call(this,t,1,"%B")}function WJ(t){return PJ.call(this,t,1,"%b")}function qJ(t){return PJ.call(this,0,2+t,"%A")}function VJ(t){return PJ.call(this,0,2+t,"%a")}const GJ=":",HJ="@",XJ="%",YJ="$";function KJ(t,e,n,r){e[0].type!==OH&&Object(Ue["k"])("First argument to data functions must be a string literal.");const i=e[0].value,a=GJ+i;if(!Object(Ue["s"])(a,r))try{r[a]=n.getData(i).tuplesRef()}catch(o){}}function JJ(t,e,n,r){e[0].type!==OH&&Object(Ue["k"])("First argument to indata must be a string literal."),e[1].type!==OH&&Object(Ue["k"])("Second argument to indata must be a string literal.");const i=e[0].value,a=e[1].value,o=HJ+a;Object(Ue["s"])(o,r)||(r[o]=n.getData(i).indataRef(n,a))}function ZJ(t,e,n,r){if(e[0].type===OH)QJ(n,r,e[0].value);else for(t in n.scales)QJ(n,r,t)}function QJ(t,e,n){const r=XJ+n;if(!Object(Ue["s"])(e,r))try{e[r]=t.scaleRef(n)}catch(i){}}function tZ(t,e){let n;return Object(Ue["A"])(t)?t:Object(Ue["F"])(t)?(n=e.scales[t])&&n.value:void 0}function eZ(t,e,n){e.__bandwidth=t=>t&&t.bandwidth?t.bandwidth():0,n._bandwidth=ZJ,n._range=ZJ,n._scale=ZJ;const r=e=>"_["+(e.type===OH?Object(Ue["W"])(XJ+e.value):Object(Ue["W"])(XJ)+"+"+t(e))+"]";return{_bandwidth:t=>"this.__bandwidth(".concat(r(t[0]),")"),_range:t=>"".concat(r(t[0]),".range()"),_scale:e=>"".concat(r(e[0]),"(").concat(t(e[1]),")")}}function nZ(t,e){return function(n,r,i){if(n){const e=tZ(n,(i||this).context);return e&&e.path[t](r)}return e(r)}}const rZ=nZ("area",eK),iZ=nZ("bounds",SK),aZ=nZ("centroid",PK);function oZ(t){const e=this.context.group;let n=!1;if(e)while(t){if(t===e){n=!0;break}t=t.mark.group}return n}function sZ(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function uZ(){return sZ(this.context.dataflow,"warn",arguments)}function cZ(){return sZ(this.context.dataflow,"info",arguments)}function lZ(){return sZ(this.context.dataflow,"debug",arguments)}function fZ(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function dZ(t){const e=Cc(t),n=fZ(e.r),r=fZ(e.g),i=fZ(e.b);return.2126*n+.7152*r+.0722*i}function hZ(t,e){const n=dZ(t),r=dZ(e),i=Math.max(n,r),a=Math.min(n,r);return(i+.05)/(a+.05)}function pZ(){const t=[].slice.call(arguments);return t.unshift({}),Object(Ue["l"])(...t)}function mZ(t,e){return t===e||t!==t&&e!==e||(Object(Ue["x"])(t)?!(!Object(Ue["x"])(e)||t.length!==e.length)&&gZ(t,e):!(!Object(Ue["D"])(t)||!Object(Ue["D"])(e))&&bZ(t,e))}function gZ(t,e){for(let n=0,r=t.length;n<r;++n)if(!mZ(t[n],e[n]))return!1;return!0}function bZ(t,e){for(const n in t)if(!mZ(t[n],e[n]))return!1;return!0}function yZ(t){return e=>bZ(t,e)}function vZ(t,e,n,r,i,a){const o=this.context.dataflow,s=this.context.data[t],u=s.input,c=o.stamp();let l,f,d=s.changes;if(!1===o._trigger||!(u.value.length||e||r))return 0;if((!d||d.stamp<c)&&(s.changes=d=o.changeset(),d.stamp=c,o.runAfter(()=>{s.modified=!0,o.pulse(u,d).run()},!0,1)),n&&(l=!0===n?Ue["db"]:Object(Ue["x"])(n)||Sn(n)?n:yZ(n),d.remove(l)),e&&d.insert(e),r&&(l=yZ(r),u.value.some(l)?d.remove(l):d.insert(r)),i)for(f in a)d.modify(i,f,a[f]);return 1}function xZ(t){const e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)}function wZ(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}function OZ(t,e,n){return Pd(t||0,e||0,n||0)}function _Z(t,e){const n=tZ(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function AZ(t,e){const n=tZ(t,(e||this).context);return n?n.copy():void 0}function jZ(t,e){const n=tZ(t,(e||this).context);return n?n.domain():[]}function kZ(t,e,n){const r=tZ(t,(n||this).context);return r?Object(Ue["x"])(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}function CZ(t,e){const n=tZ(t,(e||this).context);return n&&n.range?n.range():[]}function EZ(t,e,n){const r=tZ(t,(n||this).context);return r?r(e):void 0}function SZ(t,e,n,r,i){t=tZ(t,(i||this).context);const a=Op(e,n);let o=t.domain(),s=o[0],u=Object(Ue["S"])(o),c=Ue["u"];return u-s?c=Ih(t,s,u):t=(t.interpolator?wh("sequential")().interpolator(t.interpolator()):wh("linear")().interpolate(t.interpolate()).range(t.range())).domain([s=0,u=1]),t.ticks&&(o=t.ticks(+r||15),s!==o[0]&&o.unshift(s),u!==Object(Ue["S"])(o)&&o.push(u)),o.forEach(e=>a.stop(c(e),t(e))),a}function DZ(t,e,n){const r=tZ(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}}function FZ(t){let e=null;return function(n){return n?Lp(n,e=e||Cp(t)):t}}const NZ=t=>t.data;function TZ(t,e){const n=DJ.call(e,t);return n.root&&n.root.lookup||{}}function MZ(t,e,n){const r=TZ(t,this),i=r[e],a=r[n];return i&&a?i.path(a).map(NZ):void 0}function IZ(t,e){const n=TZ(t,this)[e];return n?n.ancestors().map(NZ):void 0}const RZ=()=>"undefined"!==typeof window&&window||null;function $Z(){const t=RZ();return t?t.screen:{}}function BZ(){const t=RZ();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function zZ(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function LZ(t,e,n){if(!t)return[];const[r,i]=t,a=(new Lm).set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return Ox(o,a,PZ(e))}function PZ(t){let e=null;if(t){const n=Object(Ue["e"])(t.marktype),r=Object(Ue["e"])(t.markname);e=t=>(!n.length||n.some(e=>t.marktype===e))&&(!r.length||r.some(e=>t.name===e))}return e}const UZ={random(){return di()},cumulativeNormal:Ai,cumulativeLogNormal:Fi,cumulativeUniform:$i,densityNormal:_i,densityLogNormal:Di,densityUniform:Ri,quantileNormal:ji,quantileLogNormal:Ni,quantileUniform:Bi,sampleNormal:Oi,sampleLogNormal:Si,sampleUniform:Ii,isArray:Ue["x"],isBoolean:Ue["y"],isDate:Ue["z"],isDefined(t){return void 0!==t},isNumber:Ue["C"],isObject:Ue["D"],isRegExp:Ue["E"],isString:Ue["F"],isTuple:Sn,isValid(t){return null!=t&&t===t},toBoolean:Ue["X"],toDate:Ue["Y"],toNumber:Ue["Z"],toString:Ue["bb"],flush:Ue["r"],lerp:Ue["H"],merge:pZ,pad:Ue["N"],peek:Ue["S"],span:Ue["U"],inrange:Ue["w"],truncate:Ue["cb"],rgb:Cc,lab:dd,hcl:vd,hsl:Mc,luminance:dZ,contrast:hZ,sequence:ua,format:IJ,utcFormat:$J,utcParse:zJ,utcOffset:la["w"],utcSequence:la["x"],timeFormat:RJ,timeParse:BJ,timeOffset:la["q"],timeSequence:la["r"],timeUnitSpecifier:la["s"],monthFormat:UJ,monthAbbrevFormat:WJ,dayFormat:qJ,dayAbbrevFormat:VJ,quarter:Ue["T"],utcquarter:Ue["eb"],week:la["A"],utcweek:la["z"],dayofyear:la["m"],utcdayofyear:la["y"],warn:uZ,info:cZ,debug:lZ,extent:Ue["m"],inScope:oZ,intersect:LZ,clampRange:Ue["g"],pinchDistance:xZ,pinchAngle:wZ,screen:$Z,containerSize:zZ,windowSize:BZ,bandspace:OZ,setdata:NJ,pathShape:FZ,panLinear:Ue["O"],panLog:Ue["P"],panPow:Ue["Q"],panSymlog:Ue["R"],zoomLinear:Ue["hb"],zoomLog:Ue["ib"],zoomPow:Ue["jb"],zoomSymlog:Ue["kb"],encode:TJ,modify:vZ},WZ=["view","item","group","xy","x","y"],qZ="event.vega.",VZ="this.",GZ={},HZ={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>"_[".concat(Object(Ue["W"])(YJ+t),"]"),functions:YZ,constants:EY,visitors:GZ},XZ=FY(HZ);function YZ(t){const e=SY(t);WZ.forEach(t=>e[t]=qZ+t);for(const n in UZ)e[n]=VZ+n;return Object(Ue["l"])(e,eZ(t,UZ,GZ)),e}function KZ(t,e,n){return 1===arguments.length?UZ[t]:(UZ[t]=e,n&&(GZ[t]=n),XZ&&(XZ.functions[t]=VZ+t),this)}function JZ(t,e){const n={};let r;try{t=Object(Ue["F"])(t)?t:Object(Ue["W"])(t)+"",r=CY(t)}catch(a){Object(Ue["k"])("Expression parse error: "+t)}r.visit(t=>{if(t.type!==CH)return;const r=t.callee.name,i=HZ.visitors[r];i&&i(r,t.arguments,e,n)});const i=XZ(r);return i.globals.forEach(t=>{const r=YJ+t;!Object(Ue["s"])(n,r)&&e.getSignal(t)&&(n[r]=e.signalRef(t))}),{$expr:Object(Ue["l"])({code:i.code},e.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function ZZ(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(t=>e.parseOperator(t)),n.forEach(t=>e.parseOperatorParameters(t)),(t.streams||[]).forEach(t=>e.parseStream(t)),(t.updates||[]).forEach(t=>e.parseUpdate(t)),e.resolve()}KZ("bandwidth",_Z,ZJ),KZ("copy",AZ,ZJ),KZ("domain",jZ,ZJ),KZ("range",CZ,ZJ),KZ("invert",kZ,ZJ),KZ("scale",EZ,ZJ),KZ("gradient",SZ,ZJ),KZ("geoArea",rZ,ZJ),KZ("geoBounds",iZ,ZJ),KZ("geoCentroid",aZ,ZJ),KZ("geoShape",DZ,ZJ),KZ("indata",FJ,JJ),KZ("data",DJ,KJ),KZ("treePath",MZ,KJ),KZ("treeAncestors",IZ,KJ),KZ("vlSelectionTest",AJ,SJ),KZ("vlSelectionResolve",jJ,SJ);const QZ=Object(Ue["ab"])(["rule"]),tQ=Object(Ue["ab"])(["group","image","rect"]);function eQ(t,e){let n="";return QZ[e]||(t.x2&&(t.x?(tQ[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(tQ[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function nQ(t){return(t+"").toLowerCase()}function rQ(t){return"operator"===nQ(t)}function iQ(t){return"collect"===nQ(t)}function aQ(t,e,n){";"!==n[n.length-1]&&(n="return("+n+");");const r=Function(...e.concat(n));return t&&t.functions?r.bind(t.functions):r}function oQ(t,e,n,r){return"((u = ".concat(t,") < (v = ").concat(e,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}var sQ={operator:(t,e)=>aQ(t,["_"],e.code),parameter:(t,e)=>aQ(t,["datum","_"],e.code),event:(t,e)=>aQ(t,["event"],e.code),handler:(t,e)=>{const n="var datum=event.item&&event.item.datum;return ".concat(e.code,";");return aQ(t,["_","event"],n)},encode:(t,e)=>{const{marktype:n,channels:r}=e;let i="var o=item,datum=o.datum,m=0,$;";for(const a in r){const t="o["+Object(Ue["W"])(a)+"]";i+="$=".concat(r[a].code,";if(").concat(t,"!==$)").concat(t,"=$,m=1;")}return i+=eQ(r,n),i+="return m;",aQ(t,["item","_"],i)},codegen:{get(t){const e="[".concat(t.map(Ue["W"]).join("]["),"]"),n=Function("_","return _".concat(e,";"));return n.path=e,n},comparator(t,e){let n;const r=(t,r)=>{const i=e[r];let a,o;return t.path?(a="a".concat(t.path),o="b".concat(t.path)):((n=n||{})["f"+r]=t,a="this.f".concat(r,"(a)"),o="this.f".concat(r,"(b)")),oQ(a,o,-i,i)},i=Function("a","b","var u, v; return "+t.map(r).join("")+"0;");return n?i.bind(n):i}}};function uQ(t){const e=this;rQ(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function cQ(t){const e=this;if(t.params){const n=e.get(t.id);n||Object(Ue["k"])("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function lQ(t,e){e=e||{};const n=this;for(const r in t){const i=t[r];e[r]=Object(Ue["x"])(i)?i.map(t=>fQ(t,n,e)):fQ(i,n,e)}return e}function fQ(t,e,n){if(!t||!Object(Ue["D"])(t))return t;for(let r,i=0,a=dQ.length;i<a;++i)if(r=dQ[i],Object(Ue["s"])(t,r.key))return r.parse(t,e,n);return t}var dQ=[{key:"$ref",parse:hQ},{key:"$key",parse:mQ},{key:"$expr",parse:pQ},{key:"$field",parse:gQ},{key:"$encode",parse:yQ},{key:"$compare",parse:bQ},{key:"$context",parse:vQ},{key:"$subflow",parse:xQ},{key:"$tupleid",parse:wQ}];function hQ(t,e){return e.get(t.$ref)||Object(Ue["k"])("Operator not defined: "+t.$ref)}function pQ(t,e,n){t.$params&&e.parseParameters(t.$params,n);const r="e:"+t.$expr.code+"_"+t.$name;return e.fn[r]||(e.fn[r]=Object(Ue["b"])(e.parameterExpression(t.$expr),t.$fields,t.$name))}function mQ(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=Object(Ue["G"])(t.$key,t.$flat,e.expr.codegen))}function gQ(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Object(Ue["q"])(t.$field,t.$name,e.expr.codegen))}function bQ(t,e){const n="c:"+t.$compare+"_"+t.$order,r=Object(Ue["e"])(t.$compare).map(t=>t&&t.$tupleid?Dn:t);return e.fn[n]||(e.fn[n]=Object(Ue["h"])(r,t.$order,e.expr.codegen))}function yQ(t,e){const n=t.$encode,r={};for(const i in n){const t=n[i];r[i]=Object(Ue["b"])(e.encodeExpression(t.$expr),t.$fields),r[i].output=t.$output}return r}function vQ(t,e){return e}function xQ(t,e){const n=t.$subflow;return function(t,r,i){const a=e.fork().parse(n),o=a.get(n.operators[0].id),s=a.signals.parent;return s&&s.set(i),o.detachSubflow=()=>e.detach(a),o}}function wQ(){return Dn}function OQ(t){var e,n=this,r=null!=t.filter?n.eventExpression(t.filter):void 0,i=null!=t.stream?n.get(t.stream):void 0;t.source?i=n.events(t.source,t.type,r):t.merge&&(e=t.merge.map(t=>n.get(t)),i=e[0].merge.apply(e[0],e.slice(1))),t.between&&(e=t.between.map(t=>n.get(t)),i=i.between(e[0],e[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&Object(Ue["k"])("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),n.stream(t,i)}function _Q(t){var e=this,n=Object(Ue["D"])(n=t.source)?n.$ref:n,r=e.get(n),i=null,a=t.update,o=void 0;r||Object(Ue["k"])("Source not defined: "+t.source),i=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),a&&a.$expr&&(a.$params&&(o=e.parseParameters(a.$params)),a=e.handlerExpression(a.$expr)),e.update(t,r,i,a,o)}const AQ={skip:!0};function jQ(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(n=>{const i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(n=>{const r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(e=>e.getState(t))),n}function kQ(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(t=>{n.update(e.signals[t],i[t],AQ)}),Object.keys(r||{}).forEach(t=>{n.pulse(e.data[t].input,n.changeset().remove(Ue["db"]).insert(r[t]))}),(t.subcontext||[]).forEach((t,n)=>{const r=e.subcontext[n];r&&r.setState(t)})}function CQ(t,e,n,r){return new EQ(t,e,n,r)}function EQ(t,e,n,r){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=r||sQ,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function SQ(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}EQ.prototype=SQ.prototype={fork(){const t=new SQ(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(e=>e!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,r=n.dataflow,i=t.value;if(n.set(t.id,e),iQ(t.type)&&i&&(i.$ingest?r.ingest(e,i.$ingest,i.$format):i.$request?r.preload(e,i.$request,i.$format):r.pulse(e,r.changeset().insert(i))),t.root&&(n.root=e),t.parent){let i=n.get(t.parent.$ref);i?(r.connect(i,[e]),e.targets().add(i)):(n.unresolved=n.unresolved||[]).push(()=>{i=n.get(t.parent.$ref),r.connect(i,[e]),e.targets().add(i)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const a in t.data){const r=n.data[a]||(n.data[a]={});t.data[a].forEach(t=>r[t]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[nQ(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:ZZ,parseOperator:uQ,parseOperatorParameters:cQ,parseParameters:lQ,parseStream:OQ,parseUpdate:_Q,getState:jQ,setState:kQ};var DQ=function(t,e,n){return CQ(t,Gr,UZ,n).parse(e)};function FQ(t){var e=this._runtime.scales;return Object(Ue["s"])(e,t)||Object(Ue["k"])("Unrecognized scale or projection: "+t),e[t].value}var NQ="width",TQ="height",MQ="padding",IQ={skip:!0};function RQ(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===MQ?r.left+r.right:0)}function $Q(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===MQ?r.top+r.bottom:0)}function BQ(t){var e=t._signals,n=e[NQ],r=e[TQ],i=e[MQ];function a(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,e=>{t._width=e.size,t._viewWidth=RQ(t,e.size),a()},{size:n}),t._resizeHeight=t.add(null,e=>{t._height=e.size,t._viewHeight=$Q(t,e.size),a()},{size:r});var o=t.add(null,a,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function zQ(t,e,n,r,i,a){this.runAfter(o=>{var s=0;o._autosize=0,o.width()!==n&&(s=1,o.signal(NQ,n,IQ),o._resizeWidth.skip(!0)),o.height()!==r&&(s=1,o.signal(TQ,r,IQ),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),s&&o.run("enter"),a&&o.runAfter(t=>t.resize())},!1,1)}function LQ(t){return this._runtime.getState(t||{data:PQ,signals:UQ,recurse:!0})}function PQ(t,e){return e.modified&&Object(Ue["x"])(e.input.value)&&t.indexOf("_:vega:_")}function UQ(t,e){return!("parent"===t||e instanceof Gr.proxy)}function WQ(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},t=>{t._trigger=!0}),this}var qQ=function(t,e,n){var r=new $E,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?IE():+n,r._restart((function a(o){o+=i,r._restart(a,i+=e,n),t(o)}),e,n)},r.restart(t,e,n),r)},VQ=function(t,e){function n(e){t({timestamp:Date.now(),elapsed:e})}this._timers.push(qQ(n,e))},GQ=function(t,e,n,r){var i=t.element();i&&i.setAttribute("title",HQ(r))};function HQ(t){return null==t?"":Object(Ue["x"])(t)?YQ(t):Object(Ue["D"])(t)&&!Object(Ue["z"])(t)?XQ(t):t+""}function XQ(t){return Object.keys(t).map(e=>{var n=t[e];return e+": "+(Object(Ue["x"])(n)?YQ(n):KQ(n))}).join("\n")}function YQ(t){return"["+t.map(KQ).join(", ")+"]"}function KQ(t){return Object(Ue["x"])(t)?"[]":Object(Ue["D"])(t)&&!Object(Ue["z"])(t)?"{}":t}function JQ(t,e){const n=this;if(e=e||{},Wr.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),null!=e.logLevel&&n.logLevel(e.logLevel),e.locale||t.locale){const r=Object(Ue["l"])({},t.locale,e.locale);n.locale(Object(wn["b"])(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||vx.Canvas,n._scenegraph=new ky;const r=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||GQ,n._redraw=!0,n._handler=(new ov).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=PG(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=DQ(n,t,e.expr);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(t=>({state:null,param:Object(Ue["l"])({},t)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=RQ(n,n._width),n._viewHeight=$Q(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,BQ(n),OG(n),AG(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}function ZQ(t,e){return Object(Ue["s"])(t._signals,e)?t._signals[e]:Object(Ue["k"])("Unrecognized signal name: "+Object(Ue["W"])(e))}function QQ(t,e){const n=(t._targets||[]).filter(t=>t._update&&t._update.handler===e);return n.length?n[0]:null}function t0(t,e,n,r){var i=QQ(n,r);return i||(i=cH(t,()=>r(e,n.value)),i.handler=r,t.on(n,null,i)),t}function e0(t,e,n){var r=QQ(e,n);return r&&e._targets.remove(r),t}Object(Ue["v"])(JQ,Wr,{async evaluate(t,e,n){if(await Wr.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,MG(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&kn(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=null!=t?t+"":null;return e!==this._desc&&wG(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){var r=ZQ(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",mH(t)):mH(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(wx(t)||Object(Ue["k"])("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Wr.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(ZQ(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:zQ,addEventListener(t,e,n){var r=e;return n&&!1===n.trap||(r=cH(this,e),r.raw=e),this._handler.on(t,r),this},removeEventListener(t,e){var n,r,i=this._handler.handlers(t),a=i.length;while(--a>=0)if(r=i[a].type,n=i[a].handler,t===r&&(e===n||e===n.raw)){this._handler.off(r,n);break}return this},addResizeListener(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return t0(this,t,ZQ(this,t),e)},removeSignalListener(t,e){return e0(this,ZQ(this,t),e)},addDataListener(t,e){return t0(this,t,kG(this,t).values,e)},removeDataListener(t,e){return e0(this,kG(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=jG(this,null);this._globalCursor=!!t,e&&jG(this,e)}return this}return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:VQ,events:qG,finalize:YG,hover:XG,data:CG,change:EG,insert:SG,remove:DG,scale:FQ,initialize:fH,toImageURL:bH,toCanvas:vH,toSVG:xH,getState:LQ,setState:WQ});var n0=n("658f");function r0(t){const e=this.context.data[t];return e?e.values.value:[]}function i0(t,e,n){const r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i}function a0(t,e){const n=this.context.dataflow,r=this.context.data[t],i=r.input;return n.pulse(i,n.changeset().remove(n0["M"]).insert(e)),1}var o0=function(t,e,n){if(t){const n=this.context.dataflow,r=t.mark.source;n.pulse(r,n.changeset().encode(t,e))}return void 0!==n?n:t};const s0=t=>function(e,n){const r=this.context.dataflow.locale();return r[t](n)(e)},u0=s0("format"),c0=s0("timeFormat"),l0=s0("utcFormat"),f0=s0("timeParse"),d0=s0("utcParse"),h0=new Date(2e3,0,1);function p0(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?(h0.setYear(2e3),h0.setMonth(t),h0.setDate(e),c0.call(this,h0,n)):""}function m0(t){return p0.call(this,t,1,"%B")}function g0(t){return p0.call(this,t,1,"%b")}function b0(t){return p0.call(this,0,2+t,"%A")}function y0(t){return p0.call(this,0,2+t,"%a")}const v0=":",x0="@",w0="%",O0="$",_0="RawCode",A0="Literal",j0="Property",k0="Identifier",C0="ArrayExpression",E0="BinaryExpression",S0="CallExpression",D0="ConditionalExpression",F0="LogicalExpression",N0="MemberExpression",T0="ObjectExpression",M0="UnaryExpression";function I0(t){this.type=t}function R0(t){switch(t.type){case C0:return t.elements;case E0:case F0:return[t.left,t.right];case S0:return[t.callee].concat(t.arguments);case D0:return[t.test,t.consequent,t.alternate];case N0:return[t.object,t.property];case T0:return t.properties;case j0:return[t.key,t.value];case M0:return[t.argument];case k0:case A0:case _0:default:return[]}}var $0;I0.prototype.visit=function(t){let e,n,r;if(t(this))return 1;for(e=R0(this),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1};var B0=1,z0=2,L0=3,P0=4,U0=5,W0=6,q0=7,V0=8,G0=9;$0={},$0[B0]="Boolean",$0[z0]="<end>",$0[L0]="Identifier",$0[P0]="Keyword",$0[U0]="Null",$0[W0]="Numeric",$0[q0]="Punctuator",$0[V0]="String",$0[G0]="RegularExpression";new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");var H0={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},X0=function(t){function e(e,n,r,i){let a=t(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}function n(t,n,r){return i=>e(t,i,n,r)}const r="new Date",i="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&Object(n0["d"])("Missing arguments to clamp function."),e.length>3&&Object(n0["d"])("Too many arguments to clamp function.");const n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),join:n("join",null),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),reverse:function(e){return"("+t(e[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),replace:n("replace",i),trim:n("trim",i,0),regexp:a,test:n("test",a),if:function(e){e.length<3&&Object(n0["d"])("Missing arguments to if function."),e.length>3&&Object(n0["d"])("Too many arguments to if function.");const n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};function Y0(t){const e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}var K0=function(t){t=t||{};const e=t.whitelist?Object(n0["J"])(t.whitelist):{},n=t.blacklist?Object(n0["J"])(t.blacklist):{},r=t.constants||H0,i=(t.functions||X0)(f),a=t.globalvar,o=t.fieldvar,s=Object(n0["p"])(a)?a:t=>`${a}["${t}"]`;let u={},c={},l=0;function f(t){if(Object(n0["u"])(t))return t;const e=d[t.type];return null==e&&Object(n0["d"])("Unsupported type: "+t.type),e(t)}const d={Literal:t=>t.raw,Identifier:t=>{const i=t.name;return l>0?i:Object(n0["i"])(n,i)?Object(n0["d"])("Illegal identifier: "+i):Object(n0["i"])(r,i)?r[i]:Object(n0["i"])(e,i)?i:(u[i]=1,s(i))},MemberExpression:t=>{const e=!t.computed,n=f(t.object);e&&(l+=1);const r=f(t.property);return n===o&&(c[Y0(r)]=1),e&&(l-=1),n+(e?"."+r:"["+r+"]")},CallExpression:t=>{"Identifier"!==t.callee.type&&Object(n0["d"])("Illegal callee type: "+t.callee.type);const e=t.callee.name,n=t.arguments,r=Object(n0["i"])(i,e)&&i[e];return r||Object(n0["d"])("Unrecognized function: "+e),Object(n0["p"])(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:t=>"["+t.elements.map(f).join(",")+"]",BinaryExpression:t=>"("+f(t.left)+t.operator+f(t.right)+")",UnaryExpression:t=>"("+t.operator+f(t.argument)+")",ConditionalExpression:t=>"("+f(t.test)+"?"+f(t.consequent)+":"+f(t.alternate)+")",LogicalExpression:t=>"("+f(t.left)+t.operator+f(t.right)+")",ObjectExpression:t=>"{"+t.properties.map(f).join(",")+"}",Property:t=>{l+=1;const e=f(t.key);return l-=1,e+":"+f(t.value)}};function h(t){const e={code:f(t),globals:Object.keys(u),fields:Object.keys(c)};return u={},c={},e}return h.functions=i,h.constants=r,h};function J0(t,e,n,r){e[0].type!==A0&&Object(n0["d"])("First argument to data functions must be a string literal.");const i=e[0].value,a=v0+i;if(!Object(n0["i"])(a,r))try{r[a]=n.getData(i).tuplesRef()}catch(o){}}function Z0(t,e,n,r){e[0].type!==A0&&Object(n0["d"])("First argument to indata must be a string literal."),e[1].type!==A0&&Object(n0["d"])("Second argument to indata must be a string literal.");const i=e[0].value,a=e[1].value,o=x0+a;Object(n0["i"])(o,r)||(r[o]=n.getData(i).indataRef(n,a))}function Q0(t,e,n,r){if(e[0].type===A0)t1(n,r,e[0].value);else for(t in n.scales)t1(n,r,t)}function t1(t,e,n){const r=w0+n;if(!Object(n0["i"])(e,r))try{e[r]=t.scaleRef(n)}catch(i){}}function e1(t,e){let n;return Object(n0["p"])(t)?t:Object(n0["u"])(t)?(n=e.scales[t])&&n.value:void 0}function n1(t,e,n){e.__bandwidth=t=>t&&t.bandwidth?t.bandwidth():0,n._bandwidth=Q0,n._range=Q0,n._scale=Q0;const r=e=>"_["+(e.type===A0?Object(n0["F"])(w0+e.value):Object(n0["F"])(w0)+"+"+t(e))+"]";return{_bandwidth:t=>`this.__bandwidth(${r(t[0])})`,_range:t=>r(t[0])+".range()",_scale:e=>`${r(e[0])}(${t(e[1])})`}}function r1(t,e){return function(n,r,i){if(n){const e=e1(n,(i||this).context);return e&&e.path[t](r)}return e(r)}}const i1=r1("area",eK),a1=r1("bounds",SK),o1=r1("centroid",PK);var s1=function(t){const e=this.context.group;let n=!1;if(e)while(t){if(t===e){n=!0;break}t=t.mark.group}return n};function u1(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function c1(){return u1(this.context.dataflow,"warn",arguments)}function l1(){return u1(this.context.dataflow,"info",arguments)}function f1(){return u1(this.context.dataflow,"debug",arguments)}function d1(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function h1(t){const e=Cc(t),n=d1(e.r),r=d1(e.g),i=d1(e.b);return.2126*n+.7152*r+.0722*i}function p1(t,e){const n=h1(t),r=h1(e),i=Math.max(n,r),a=Math.min(n,r);return(i+.05)/(a+.05)}var m1=function(){const t=[].slice.call(arguments);return t.unshift({}),n0["e"].apply(null,t)};function g1(t,e){return t===e||t!==t&&e!==e||(Object(n0["m"])(t)?!(!Object(n0["m"])(e)||t.length!==e.length)&&b1(t,e):!(!Object(n0["s"])(t)||!Object(n0["s"])(e))&&y1(t,e))}function b1(t,e){for(let n=0,r=t.length;n<r;++n)if(!g1(t[n],e[n]))return!1;return!0}function y1(t,e){for(const n in t)if(!g1(t[n],e[n]))return!1;return!0}function v1(t){return e=>y1(t,e)}var x1=function(t,e,n,r,i,a){const o=this.context.dataflow,s=this.context.data[t],u=s.input,c=o.stamp();let l,f,d=s.changes;if(!1===o._trigger||!(u.value.length||e||r))return 0;if((!d||d.stamp<c)&&(s.changes=d=o.changeset(),d.stamp=c,o.runAfter(()=>{s.modified=!0,o.pulse(u,d).run()},!0,1)),n&&(l=!0===n?n0["M"]:Object(n0["m"])(n)||Sn(n)?n:v1(n),d.remove(l)),e&&d.insert(e),r&&(l=v1(r),u.value.some(l)?d.remove(l):d.insert(r)),i)for(f in a)d.modify(i,f,a[f]);return 1};function w1(t){const e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)}function O1(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}function _1(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}var A1=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return _1((n-r/e)*e,o,i,a,s)}},j1=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return _1((n-r/e)*e,i,a,o,s)}},k1=t=>()=>t;function C1(t,e){return function(n){return t+n*e}}function E1(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function S1(t,e){var n=e-t;return n?C1(t,n>180||n<-180?n-360*Math.round(n/360):n):k1(isNaN(t)?e:t)}function D1(t){return 1===(t=+t)?F1:function(e,n){return n-e?E1(e,n,t):k1(isNaN(e)?n:e)}}function F1(t,e){var n=e-t;return n?C1(t,n):k1(isNaN(t)?e:t)}var N1=function t(e){var n=D1(e);function r(t,e){var r=n((t=Cc(t)).r,(e=Cc(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=F1(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function T1(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Cc(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var M1=T1(A1),I1=T1(j1),R1=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}};function $1(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var B1=function(t,e){return($1(e)?R1:z1)(t,e)};function z1(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Y1(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}var L1=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},P1=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},U1=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=Y1(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},W1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,q1=new RegExp(W1.source,"g");function V1(t){return function(){return t}}function G1(t){return function(e){return t(e)+""}}var H1,X1=function(t,e){var n,r,i,a=W1.lastIndex=q1.lastIndex=0,o=-1,s=[],u=[];t+="",e+="";while((n=W1.exec(t))&&(r=q1.exec(e)))(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:P1(n,r)})),a=q1.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?G1(u[0].x):V1(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},Y1=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?k1(e):("number"===r?P1:"string"===r?(n=_c(e))?(e=n,N1):X1:e instanceof _c?N1:e instanceof Date?L1:$1(e)?R1:Array.isArray(e)?z1:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?U1:P1)(t,e)},K1=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},J1=function(t,e){var n=S1(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},Z1=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},Q1=180/Math.PI,t2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},e2=function(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Q1,skewX:Math.atan(u)*Q1,scaleX:o,scaleY:s}};function n2(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?t2:e2(e.a,e.b,e.c,e.d,e.e,e.f)}function r2(t){return null==t?t2:(H1||(H1=document.createElementNS("http://www.w3.org/2000/svg","g")),H1.setAttribute("transform",t),(t=H1.transform.baseVal.consolidate())?(t=t.matrix,e2(t.a,t.b,t.c,t.d,t.e,t.f)):t2)}function i2(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:P1(t,i)},{i:u-2,x:P1(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}function o(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:P1(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:P1(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:P1(t,n)},{i:s-2,x:P1(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),o(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){var e,n=-1,a=i.length;while(++n<a)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var a2=i2(n2,"px, ","px)","deg)"),o2=i2(r2,", ",")",")"),s2=1e-12;function u2(t){return((t=Math.exp(t))+1/t)/2}function c2(t){return((t=Math.exp(t))-1/t)/2}function l2(t){return((t=Math.exp(2*t))-1)/(t+1)}var f2=function t(e,n,r){function i(t,i){var a,o,s=t[0],u=t[1],c=t[2],l=i[0],f=i[1],d=i[2],h=l-s,p=f-u,m=h*h+p*p;if(m<s2)o=Math.log(d/c)/e,a=function(t){return[s+t*h,u+t*p,c*Math.exp(e*t*o)]};else{var g=Math.sqrt(m),b=(d*d-c*c+r*m)/(2*c*n*g),y=(d*d-c*c-r*m)/(2*d*n*g),v=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(y*y+1)-y);o=(x-v)/e,a=function(t){var r=t*o,i=u2(v),a=c/(n*g)*(i*l2(e*r+v)-c2(v));return[s+a*h,u+a*p,c*i/u2(e*r+v)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n,i=r*r;return t(n,r,i)},i}(Math.SQRT2,2,4);function d2(t){return function(e,n){var r=t((e=Mc(e)).h,(n=Mc(n)).h),i=F1(e.s,n.s),a=F1(e.l,n.l),o=F1(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var h2=d2(S1),p2=d2(F1);function m2(t,e){var n=F1((t=dd(t)).l,(e=dd(e)).l),r=F1(t.a,e.a),i=F1(t.b,e.b),a=F1(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function g2(t){return function(e,n){var r=t((e=vd(e)).h,(n=vd(n)).h),i=F1(e.c,n.c),a=F1(e.l,n.l),o=F1(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var b2=g2(S1),y2=g2(F1);function v2(t){return function e(n){function r(e,r){var i=t((e=Id(e)).h,(r=Id(r)).h),a=F1(e.s,r.s),o=F1(e.l,r.l),s=F1(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var x2=v2(S1),w2=v2(F1);function O2(t,e){void 0===e&&(e=t,t=Y1);var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);while(n<r)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}var _2=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};function A2(t,e,n){const r=t-e+2*n;return t?r>0?r:1:0}const j2="identity",k2="linear",C2="log",E2="pow",S2="sqrt",D2="symlog",F2="time",N2="utc",T2="sequential",M2="diverging",I2="quantile",R2="quantize",$2="threshold",B2="ordinal",z2="point",L2="band",P2="bin-ordinal",U2="continuous",W2="discrete",q2="discretizing",V2="interpolating",G2="temporal";function H2(t){return function(e){let n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}}function X2(t){return function(e){const n=t.range();let r,i,a,o,s=e[0],u=e[1],c=-1;for(u<s&&(i=s,s=u,u=i),a=0,o=n.length;a<o;++a)n[a]>=s&&n[a]<=u&&(c<0&&(c=a),r=a);if(!(c<0))return s=t.invertExtent(n[c]),u=t.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}function Y2(){const t=Ku().unknown(void 0),e=t.domain,n=t.range;let r,i,a=[0,1],o=!1,s=0,u=0,c=.5;function l(){const t=e().length,l=a[1]<a[0],f=a[1-l],d=A2(t,s,u);let h=a[l-0];r=(f-h)/(d||1),o&&(r=Math.floor(r)),h+=(f-h-r*(t-s))*c,i=r*(1-s),o&&(h=Math.round(h),i=Math.round(i));const p=ua(t).map(t=>h+r*t);return n(l?p.reverse():p)}return delete t.unknown,t.domain=function(t){return arguments.length?(e(t),l()):e()},t.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},t.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},t.bandwidth=function(){return i},t.step=function(){return r},t.round=function(t){return arguments.length?(o=!!t,l()):o},t.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,l()):s},t.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},t.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},t.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},t.invertRange=function(t){if(null==t[0]||null==t[1])return;const r=a[1]<a[0],o=r?n().reverse():n(),s=o.length-1;let u,c,l,f=+t[0],d=+t[1];return f!==f||d!==d||(d<f&&(l=f,f=d,d=l),d<o[0]||f>a[1-r])?void 0:(u=Math.max(0,qu(o,f)-1),c=f===d?u:qu(o,d)-1,f-o[u]>i+1e-10&&++u,r&&(l=u,u=s-c,c=s-l),u>c?void 0:e().slice(u,c+1))},t.invert=function(e){const n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return Y2().domain(e()).range(a).round(o).paddingInner(s).paddingOuter(u).align(c)},l()}function K2(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return K2(e())},t}function J2(){return K2(Y2().paddingInner(1))}var Z2=Array.prototype.map;function Q2(t){return Z2.call(t,n0["I"])}const t3=Array.prototype.slice;function e3(){let t=[],e=[];function n(n){return null==n||n!==n?void 0:e[(Gu(t,n)-1)%e.length]}return n.domain=function(e){return arguments.length?(t=Q2(e),n):t.slice()},n.range=function(t){return arguments.length?(e=t3.call(t),n):e.slice()},n.tickFormat=function(e,n){return rc(t[0],Object(n0["C"])(t),null==e?10:e,n)},n.copy=function(){return e3().domain(n.domain()).range(n.range())},n}const n3={};function r3(t,e,n){const r=function(){const n=e();return n.invertRange||(n.invertRange=n.invert?H2(n):n.invertExtent?X2(n):void 0),n.type=t,n};return r.metadata=Object(n0["J"])(Object(n0["a"])(n)),r}function i3(t,e,n){return arguments.length>1?(n3[t]=r3(t,e,n),this):a3(t)?n3[t]:void 0}function a3(t){return Object(n0["i"])(n3,t)}function o3(t,e){const n=n3[t];return n&&n.metadata[e]}function s3(t){return o3(t,W2)}function u3(t){return o3(t,q2)}function c3(t){return o3(t,C2)}function l3(t){return o3(t,G2)}i3(j2,_l),i3(k2,Ol,U2),i3(C2,Ml,[U2,C2]),i3(E2,zl,U2),i3(S2,Ll,U2),i3(D2,ql,U2),i3(F2,ff,[U2,G2]),i3(N2,yf,[U2,G2]),i3(T2,wf,[U2,V2]),i3("".concat(T2,"-").concat(k2),wf,[U2,V2]),i3("".concat(T2,"-").concat(C2),Of,[U2,V2,C2]),i3("".concat(T2,"-").concat(E2),Af,[U2,V2]),i3("".concat(T2,"-").concat(S2),jf,[U2,V2]),i3("".concat(T2,"-").concat(D2),_f,[U2,V2]),i3("".concat(M2,"-").concat(k2),Ef,[U2,V2]),i3("".concat(M2,"-").concat(C2),Sf,[U2,V2,C2]),i3("".concat(M2,"-").concat(E2),Ff,[U2,V2]),i3("".concat(M2,"-").concat(S2),Nf,[U2,V2]),i3("".concat(M2,"-").concat(D2),Df,[U2,V2]),i3(I2,Tf,[q2,I2]),i3(R2,Mf,q2),i3($2,If,q2),i3(P2,e3,[W2,q2]),i3(B2,Ku,W2),i3(L2,Y2,W2),i3(z2,J2,W2);const f3=["clamp","base","constant","exponent"];function d3(t,e,n){return O2(p3(e||"rgb",n),t)}function h3(t,e,n){const r=n-e;let i,a,o;return r&&Number.isFinite(r)?(i=(a=t.type).indexOf("-"),a=i<0?a:a.slice(i+1),o=i3(a)().domain([e,n]).range([0,1]),f3.forEach(e=>t[e]?o[e](t[e]()):0),o):Object(n0["c"])(.5)}function p3(t,e){const n=y[m3(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function m3(t){return"interpolate"+t.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const g3={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},b3={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function y3(t){const e=t.length/6|0,n=new Array(e);for(let r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function v3(t,e){for(const n in t)w3(n,e(t[n]))}const x3={};function w3(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(x3[t]=e,this):x3[t]}v3(b3,y3),v3(g3,t=>d3(y3(t)));const O3="symbol",_3="discrete",A3=t=>Object(n0["m"])(t)?t.map(t=>String(t)):String(t),j3=(t,e)=>t[1]-e[1],k3=(t,e)=>e[1]-t[1];function C3(t,e,n){let r=t.range(),i=r[0],a=Object(n0["C"])(r),o=j3;if(i>a&&(r=a,a=i,i=r,o=k3),i=Math.floor(i),a=Math.ceil(a),e=e.map(e=>[e,t(e)]).filter(t=>i<=t[1]&&t[1]<=a).sort(o).map(t=>t[0]),n>0&&e.length>1){const t=[e[0],Object(n0["C"])(e)];while(e.length>n&&e.length>=3)e=e.filter((t,e)=>!(e%2));e.length<3&&(e=t)}return e}function E3(t,e){return t.bins?C3(t,t.bins):t.ticks?t.ticks(e):t.domain()}function S3(t,e,n,r,i,a){const o=e.type;let s=A3;if(o===F2||i===F2)s=t.timeFormat(r);else if(o===N2||i===N2)s=t.utcFormat(r);else if(c3(o)){const i=t.formatFloat(r);if(a||e.bins)s=i;else{const t=D3(e,n,!1);s=e=>t(e)?i(e):""}}else if(e.tickFormat){const i=e.domain();s=t.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=t.format(r));return s}function D3(t,e,n){const r=E3(t,e),i=t.base(),a=Math.log(i),o=Math.max(1,i*e/r.length),s=t=>{let e=t/Math.pow(i,Math.round(Math.log(t)/a));return e*i<i-.5&&(e*=i),e<=o};return n?r.filter(s):s}const F3={[I2]:"quantiles",[R2]:"thresholds",[$2]:"domain"},N3={[I2]:"quantiles",[R2]:"domain"};function T3(t,e){return t.bins?R3(t.bins):t.type===C2?D3(t,e,!0):F3[t.type]?I3(t[F3[t.type]]()):E3(t,e)}function M3(t,e,n){const r=e[N3[e.type]](),i=r.length;let a,o=i>1?r[1]-r[0]:r[0];for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return t.formatSpan(0,o,30,n)}function I3(t){const e=[-1/0].concat(t);return e.max=1/0,e}function R3(t){const e=t.slice(0,-1);return e.max=Object(n0["C"])(t),e}const $3=t=>F3[t.type]||t.bins;function B3(t,e,n,r,i,a,o){const s=N3[e.type]&&a!==F2&&a!==N2?M3(t,e,i):S3(t,e,n,i,a,o);return r===O3&&$3(e)?z3(s):r===_3?P3(s):U3(s)}const z3=t=>(e,n,r)=>{const i=L3(r[n+1],L3(r.max,1/0)),a=W3(e,t),o=W3(i,t);return a&&o?a+"  "+o:o?"< "+o:" "+a},L3=(t,e)=>null!=t?t:e,P3=t=>(e,n)=>n?t(e):null,U3=t=>e=>t(e),W3=(t,e)=>Number.isFinite(t)?e(t):null;function q3(t,e,n,r){const i=r||e.type;return Object(n0["u"])(n)&&l3(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==F2?n||i!==N2?B3(t,e,5,null,n,r,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}function V3(t,e,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=q3(t,e,n.format,n.formatType);if(u3(e.type)){const t=T3(e).slice(1).map(i),n=t.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(t.join(", "))}if(s3(e.type)){const t=e.domain(),n=t.length,a=n>r?t.slice(0,r-2).map(i).join(", ")+", ending with "+t.slice(-1).map(i):t.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(a)}{const t=e.domain();return"values from ".concat(i(t[0])," to ").concat(i(Object(n0["C"])(t)))}}function G3(t,e,n){return A2(t||0,e||0,n||0)}function H3(t,e){const n=e1(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function X3(t,e){const n=e1(t,(e||this).context);return n?n.copy():void 0}function Y3(t,e){const n=e1(t,(e||this).context);return n?n.domain():[]}function K3(t,e,n){const r=e1(t,(n||this).context);return r?Object(n0["m"])(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}function J3(t,e){const n=e1(t,(e||this).context);return n&&n.range?n.range():[]}function Z3(t,e,n){const r=e1(t,(n||this).context);return r?r(e):void 0}function Q3(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function t4(t){this._context=t}t4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Q3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Q3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var e4=function(t){return new t4(t)},n4=function(){};function r4(t){this._context=t}r4.prototype={areaStart:n4,areaEnd:n4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Q3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var i4=function(t){return new r4(t)};function a4(t){this._context=t}a4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Q3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var o4=function(t){return new a4(t)};function s4(t,e){this._basis=new t4(t),this._beta=e}s4.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0){var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,u=-1;while(++u<=n)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*o),this._beta*e[u]+(1-this._beta)*(a+r*s))}this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var u4=function t(e){function n(t){return 1===e?new t4(t):new s4(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function c4(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function l4(t,e){this._context=t,this._k=(1-e)/6}l4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:c4(this,this._x1,this._y1);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:c4(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var f4=function t(e){function n(t){return new l4(t,e)}return n.tension=function(e){return t(+e)},n}(0);function d4(t,e){this._context=t,this._k=(1-e)/6}d4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:c4(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var h4=function t(e){function n(t){return new d4(t,e)}return n.tension=function(e){return t(+e)},n}(0);function p4(t,e){this._context=t,this._k=(1-e)/6}p4.prototype={areaStart:n4,areaEnd:n4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:c4(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var m4=function t(e){function n(t){return new p4(t,e)}return n.tension=function(e){return t(+e)},n}(0),g4=Math.abs,b4=Math.atan2,y4=Math.cos,v4=Math.max,x4=Math.min,w4=Math.sin,O4=Math.sqrt,_4=1e-12,A4=Math.PI,j4=A4/2,k4=2*A4;function C4(t){return t>1?0:t<-1?A4:Math.acos(t)}function E4(t){return t>=1?j4:t<=-1?-j4:Math.asin(t)}function S4(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>_4){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>_4){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function D4(t,e){this._context=t,this._alpha=e}D4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:S4(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var F4=function t(e){function n(t){return e?new D4(t,e):new l4(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function N4(t,e){this._context=t,this._alpha=e}N4.prototype={areaStart:n4,areaEnd:n4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:S4(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var T4=function t(e){function n(t){return e?new N4(t,e):new p4(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function M4(t,e){this._context=t,this._alpha=e}M4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:S4(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var I4=function t(e){function n(t){return e?new M4(t,e):new d4(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function R4(t){this._context=t}R4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};var $4=function(t){return new R4(t)};function B4(t){this._context=t}B4.prototype={areaStart:n4,areaEnd:n4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var z4=function(t){return new B4(t)};function L4(t){return t<0?-1:1}function P4(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(L4(a)+L4(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function U4(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function W4(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function q4(t){this._context=t}function V4(t){this._context=new G4(t)}function G4(t){this._context=t}function H4(t){return new q4(t)}function X4(t){return new V4(t)}function Y4(t){this._context=t}function K4(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}q4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:W4(this,this._t0,U4(this,this._t0));break}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,W4(this,U4(this,n=P4(this,t,e)),n);break;default:W4(this,this._t0,n=P4(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(V4.prototype=Object.create(q4.prototype)).point=function(t,e){q4.prototype.point.call(this,e,t)},G4.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},Y4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=K4(t),i=K4(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var J4=function(t){return new Y4(t)};function Z4(t,e){this._context=t,this._t=e}Z4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}this._x=t,this._y=e}};var Q4=function(t){return new Z4(t,.5)};function t5(t){return new Z4(t,0)}function e5(t){return new Z4(t,1)}const n5=Math.PI,r5=2*n5,i5=1e-6,a5=r5-i5;function o5(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function s5(){return new o5}o5.prototype=s5.prototype={constructor:o5,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,u=r-e,c=a-t,l=o-e,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>i5)if(Math.abs(l*s-u*c)>i5&&i){var d=n-a,h=r-o,p=s*s+u*u,m=d*d+h*h,g=Math.sqrt(p),b=Math.sqrt(f),y=i*Math.tan((n5-Math.acos((p+f-m)/(2*g*b)))/2),v=y/b,x=y/g;Math.abs(v-1)>i5&&(this._+="L"+(t+v*c)+","+(e+v*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>c*h)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),u=t+o,c=e+s,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>i5||Math.abs(this._y1-c)>i5)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%r5+r5),f>a5?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):f>i5&&(this._+="A"+n+","+n+",0,"+ +(f>=n5)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var u5=s5,c5=function(t){return function(){return t}};function l5(t){return t.innerRadius}function f5(t){return t.outerRadius}function d5(t){return t.startAngle}function h5(t){return t.endAngle}function p5(t){return t&&t.padAngle}function m5(t,e,n,r,i,a,o,s){var u=n-t,c=r-e,l=o-i,f=s-a,d=f*u-l*c;if(!(d*d<_4))return d=(l*(e-a)-f*(t-i))/d,[t+d*u,e+d*c]}function g5(t,e,n,r,i,a,o){var s=t-n,u=e-r,c=(o?a:-a)/O4(s*s+u*u),l=c*u,f=-c*s,d=t+l,h=e+f,p=n+l,m=r+f,g=(d+p)/2,b=(h+m)/2,y=p-d,v=m-h,x=y*y+v*v,w=i-a,O=d*m-p*h,_=(v<0?-1:1)*O4(v4(0,w*w*x-O*O)),A=(O*v-y*_)/x,j=(-O*y-v*_)/x,k=(O*v+y*_)/x,C=(-O*y+v*_)/x,E=A-g,S=j-b,D=k-g,F=C-b;return E*E+S*S>D*D+F*F&&(A=k,j=C),{cx:A,cy:j,x01:-l,y01:-f,x11:A*(i/w-1),y11:j*(i/w-1)}}var b5=function(){var t=l5,e=f5,n=c5(0),r=null,i=d5,a=h5,o=p5,s=null;function u(){var u,c,l=+t.apply(this,arguments),f=+e.apply(this,arguments),d=i.apply(this,arguments)-j4,h=a.apply(this,arguments)-j4,p=g4(h-d),m=h>d;if(s||(s=u=u5()),f<l&&(c=f,f=l,l=c),f>_4)if(p>k4-_4)s.moveTo(f*y4(d),f*w4(d)),s.arc(0,0,f,d,h,!m),l>_4&&(s.moveTo(l*y4(h),l*w4(h)),s.arc(0,0,l,h,d,m));else{var g,b,y=d,v=h,x=d,w=h,O=p,_=p,A=o.apply(this,arguments)/2,j=A>_4&&(r?+r.apply(this,arguments):O4(l*l+f*f)),k=x4(g4(f-l)/2,+n.apply(this,arguments)),C=k,E=k;if(j>_4){var S=E4(j/l*w4(A)),D=E4(j/f*w4(A));(O-=2*S)>_4?(S*=m?1:-1,x+=S,w-=S):(O=0,x=w=(d+h)/2),(_-=2*D)>_4?(D*=m?1:-1,y+=D,v-=D):(_=0,y=v=(d+h)/2)}var F=f*y4(y),N=f*w4(y),T=l*y4(w),M=l*w4(w);if(k>_4){var I,R=f*y4(v),$=f*w4(v),B=l*y4(x),z=l*w4(x);if(p<A4&&(I=m5(F,N,B,z,R,$,T,M))){var L=F-I[0],P=N-I[1],U=R-I[0],W=$-I[1],q=1/w4(C4((L*U+P*W)/(O4(L*L+P*P)*O4(U*U+W*W)))/2),V=O4(I[0]*I[0]+I[1]*I[1]);C=x4(k,(l-V)/(q-1)),E=x4(k,(f-V)/(q+1))}}_>_4?E>_4?(g=g5(B,z,F,N,f,E,m),b=g5(R,$,T,M,f,E,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),E<k?s.arc(g.cx,g.cy,E,b4(g.y01,g.x01),b4(b.y01,b.x01),!m):(s.arc(g.cx,g.cy,E,b4(g.y01,g.x01),b4(g.y11,g.x11),!m),s.arc(0,0,f,b4(g.cy+g.y11,g.cx+g.x11),b4(b.cy+b.y11,b.cx+b.x11),!m),s.arc(b.cx,b.cy,E,b4(b.y11,b.x11),b4(b.y01,b.x01),!m))):(s.moveTo(F,N),s.arc(0,0,f,y,v,!m)):s.moveTo(F,N),l>_4&&O>_4?C>_4?(g=g5(T,M,R,$,l,-C,m),b=g5(F,N,B,z,l,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<k?s.arc(g.cx,g.cy,C,b4(g.y01,g.x01),b4(b.y01,b.x01),!m):(s.arc(g.cx,g.cy,C,b4(g.y01,g.x01),b4(g.y11,g.x11),!m),s.arc(0,0,l,b4(g.cy+g.y11,g.cx+g.x11),b4(b.cy+b.y11,b.cx+b.x11),m),s.arc(b.cx,b.cy,C,b4(b.y11,b.x11),b4(b.y01,b.x01),!m))):s.arc(0,0,l,w,x,m):s.lineTo(T,M)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-A4/2;return[y4(r)*n,w4(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:c5(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:c5(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:c5(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:c5(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:c5(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"===typeof t?t:c5(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:c5(+t),u):o},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u},y5=(Array.prototype.slice,function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)});function v5(t){return t[0]}function x5(t){return t[1]}var w5=function(t,e){var n=c5(!0),r=null,i=$4,a=null;function o(o){var s,u,c,l=(o=y5(o)).length,f=!1;for(null==r&&(a=i(c=u5())),s=0;s<=l;++s)!(s<l&&n(u=o[s],s,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(u,s,o),+e(u,s,o));if(c)return a=null,c+""||null}return t="function"===typeof t?t:void 0===t?v5:c5(t),e="function"===typeof e?e:void 0===e?x5:c5(e),o.x=function(e){return arguments.length?(t="function"===typeof e?e:c5(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:c5(+t),o):e},o.defined=function(t){return arguments.length?(n="function"===typeof t?t:c5(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o},O5=function(t,e,n){var r=null,i=c5(!0),a=null,o=$4,s=null;function u(u){var c,l,f,d,h,p=(u=y5(u)).length,m=!1,g=new Array(p),b=new Array(p);for(null==a&&(s=o(h=u5())),c=0;c<=p;++c){if(!(c<p&&i(d=u[c],c,u))===m)if(m=!m)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=l;--f)s.point(g[f],b[f]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+t(d,c,u),b[c]=+e(d,c,u),s.point(r?+r(d,c,u):g[c],n?+n(d,c,u):b[c]))}if(h)return s=null,h+""||null}function c(){return w5().defined(i).curve(o).context(a)}return t="function"===typeof t?t:void 0===t?v5:c5(+t),e="function"===typeof e?e:c5(void 0===e?0:+e),n="function"===typeof n?n:void 0===n?x5:c5(+n),u.x=function(e){return arguments.length?(t="function"===typeof e?e:c5(+e),r=null,u):t},u.x0=function(e){return arguments.length?(t="function"===typeof e?e:c5(+e),u):t},u.x1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:c5(+t),u):r},u.y=function(t){return arguments.length?(e="function"===typeof t?t:c5(+t),n=null,u):e},u.y0=function(t){return arguments.length?(e="function"===typeof t?t:c5(+t),u):e},u.y1=function(t){return arguments.length?(n=null==t?null:"function"===typeof t?t:c5(+t),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(t){return arguments.length?(i="function"===typeof t?t:c5(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),u):a},u},_5={draw:function(t,e){var n=Math.sqrt(e/A4);t.moveTo(n,0),t.arc(0,0,n,0,k4)}},A5=(Math.sqrt(1/3),Math.sin(A4/10)/Math.sin(7*A4/10)),j5=(Math.sin(k4/10),Math.cos(k4/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(t,e){var n=null;function r(){var r;if(n||(n=r=u5()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"===typeof t?t:c5(t||_5),e="function"===typeof e?e:c5(void 0===e?64:+e),r.type=function(e){return arguments.length?(t="function"===typeof e?e:c5(e),r):t},r.size=function(t){return arguments.length?(e="function"===typeof t?t:c5(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r});const k5=/^([A-Za-z]+:)?\/\//,C5=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,E5=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,S5="file://";var D5=function(t,e){return n=>({options:n||{},sanitize:N5,load:F5,fileAccess:!!e,file:T5(e),http:I5(t)})};async function F5(t,e){const n=await this.sanitize(t,e),r=n.href;return n.localFile?this.file(r):this.http(r,e)}async function N5(t,e){e=Object(n0["e"])({},this.options,e);const n=this.fileAccess,r={href:null};let i,a,o;const s=C5.test(t.replace(E5,""));null!=t&&"string"===typeof t&&s||Object(n0["d"])("Sanitize failure, invalid URI: "+Object(n0["F"])(t));const u=k5.test(t);return(o=e.baseURL)&&!u&&(t.startsWith("/")||"/"===o[o.length-1]||(t="/"+t),t=o+t),a=(i=t.startsWith(S5))||"file"===e.mode||"http"!==e.mode&&!u&&n,i?t=t.slice(S5.length):t.startsWith("//")&&("file"===e.defaultProtocol?(t=t.slice(2),a=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(r,"localFile",{value:!!a}),r.href=t,e.target&&(r.target=e.target+""),e.rel&&(r.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(r.crossOrigin=e.crossOrigin+""),r}function T5(t){return t?e=>new Promise((n,r)=>{t.readFile(e,(t,e)=>{t?r(t):n(e)})}):M5}async function M5(){Object(n0["d"])("No file system access.")}function I5(t){return t?async function(e,n){const r=Object(n0["e"])({},this.options.http,n),i=n&&n.response,a=await t(e,r);return a.ok?Object(n0["p"])(a[i])?a[i]():a.text():Object(n0["d"])(a.status+""+a.statusText)}:R5}async function R5(){Object(n0["d"])("No HTTP fetch method available.")}n0["G"],n0["I"],n0["I"],n0["H"],n0["K"],n0["j"];function $5(t){const e=function(e,n){const r={delimiter:t};return B5(e,n?Object(n0["e"])(n,r):r)};return e.responseType="text",e}function B5(t,e){return e.header&&(t=e.header.map(n0["F"]).join(e.delimiter)+"\n"+t),Object(fn["a"])(e.delimiter).parse(t+"")}B5.responseType="text";var z5=n("515c");const L5={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function P5(t,e){let n,r,i,a;return t=Object(z5["a"])(t,e),e&&e.feature?(n=mn["a"],i=e.feature):e&&e.mesh?(n=mn["b"],i=e.mesh,a=L5[e.filter]):Object(n0["d"])("Missing TopoJSON feature or mesh parameter."),r=(r=t.objects[i])?n(t,r,a):Object(n0["d"])("Invalid TopoJSON object: "+i),r&&r.features||[r]}P5.responseType="json";$5(","),$5("\t"),z5["a"];const U5=D5("undefined"!==typeof fetch&&fetch,null);let W5=0;const q5="p_";function V5(t){return t&&t.gradient}function G5(t,e,n){const r=t.gradient;let i=t.id,a="radial"===r?q5:"";return i||(i=t.id="gradient_"+W5++,"radial"===r?(t.x1=H5(t.x1,.5),t.y1=H5(t.y1,.5),t.r1=H5(t.r1,0),t.x2=H5(t.x2,.5),t.y2=H5(t.y2,.5),t.r2=H5(t.r2,.5),a=q5):(t.x1=H5(t.x1,0),t.y1=H5(t.y1,0),t.x2=H5(t.x2,1),t.y2=H5(t.y2,0))),e[i]=t,"url("+(n||"")+"#"+a+i+")"}function H5(t,e){return null!=t?t:e}function X5(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}}const Y5={basis:{curve:e4},"basis-closed":{curve:i4},"basis-open":{curve:o4},bundle:{curve:u4,tension:"beta",value:.85},cardinal:{curve:f4,tension:"tension",value:0},"cardinal-open":{curve:h4,tension:"tension",value:0},"cardinal-closed":{curve:m4,tension:"tension",value:0},"catmull-rom":{curve:F4,tension:"alpha",value:.5},"catmull-rom-closed":{curve:T4,tension:"alpha",value:.5},"catmull-rom-open":{curve:I4,tension:"alpha",value:.5},linear:{curve:$4},"linear-closed":{curve:z4},monotone:{horizontal:X4,vertical:H4},natural:{curve:J4},step:{curve:Q4},"step-after":{curve:e5},"step-before":{curve:t5}};function K5(t,e,n){var r=Object(n0["i"])(Y5,t)&&Y5[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const J5={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Z5=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function Q5(t){const e=[];let n,r,i,a,o,s,u,c,l,f;const d=t.slice().replace(Z5[0],"###$1").split(Z5[1]).slice(1);for(u=0,l=d.length;u<l;++u){for(n=d[u],r=n.slice(1).trim().replace(Z5[2],"$1###$2").replace(Z5[3],"$1###$2").split(Z5[4]),o=n.charAt(0),i=[o],c=0,f=r.length;c<f;++c)(a=+r[c])===a&&i.push(a);if(s=J5[o.toLowerCase()],i.length-1>s){const t=i.length;for(c=1,e.push([o].concat(i.slice(c,c+=s))),o="M"===o?"L":"m"===o?"l":o;c<t;c+=s)e.push([o].concat(i.slice(c,c+s)))}else e.push(i)}return e}const t6=Math.PI/180,e6=1e-14,n6=Math.PI/2,r6=2*Math.PI,i6=Math.sqrt(3)/2;var a6={},o6={},s6=[].join;function u6(t,e,n,r,i,a,o,s,u){const c=s6.call(arguments);if(a6[c])return a6[c];const l=o*t6,f=Math.sin(l),d=Math.cos(l);n=Math.abs(n),r=Math.abs(r);const h=d*(s-t)*.5+f*(u-e)*.5,p=d*(u-e)*.5-f*(s-t)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,b=f/n,y=-f/r,v=d/r,x=g*s+b*u,w=y*s+v*u,O=g*t+b*e,_=y*t+v*e,A=(O-x)*(O-x)+(_-w)*(_-w);let j=1/A-.25;j<0&&(j=0);let k=Math.sqrt(j);a==i&&(k=-k);const C=.5*(x+O)-k*(_-w),E=.5*(w+_)+k*(O-x),S=Math.atan2(w-E,x-C),D=Math.atan2(_-E,O-C);let F=D-S;F<0&&1===a?F+=r6:F>0&&0===a&&(F-=r6);const N=Math.ceil(Math.abs(F/(n6+.001))),T=[];for(let M=0;M<N;++M){const t=S+M*F/N,e=S+(M+1)*F/N;T[M]=[C,E,t,e,n,r,f,d]}return a6[c]=T}function c6(t){const e=s6.call(t);if(o6[e])return o6[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7];const l=c*o,f=-u*s,d=u*o,h=c*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(a),b=Math.sin(a),y=.5*(a-i),v=Math.sin(.5*y),x=8/3*v*v/Math.sin(y),w=n+p-x*m,O=r+m+x*p,_=n+g,A=r+b,j=_+x*b,k=A-x*g;return o6[e]=[l*w+f*O,d*w+h*O,l*j+f*k,d*j+h*k,l*_+f*A,d*_+h*A]}const l6=["l",0,0,0,0,0,0,0];function f6(t,e,n){const r=l6[0]=t[0];if("a"===r||"A"===r)l6[1]=e*t[1],l6[2]=n*t[2],l6[3]=t[3],l6[4]=t[4],l6[5]=t[5],l6[6]=e*t[6],l6[7]=n*t[7];else if("h"===r||"H"===r)l6[1]=e*t[1];else if("v"===r||"V"===r)l6[1]=n*t[1];else for(var i=1,a=t.length;i<a;++i)l6[i]=(i%2==1?e:n)*t[i];return l6}function d6(t,e,n,r,i,a){var o,s,u,c,l,f=null,d=0,h=0,p=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),t.beginPath&&t.beginPath();for(var g=0,b=e.length;g<b;++g){switch(o=e[g],1===i&&1===a||(o=f6(o,i,a)),o[0]){case"l":d+=o[1],h+=o[2],t.lineTo(d+n,h+r);break;case"L":d=o[1],h=o[2],t.lineTo(d+n,h+r);break;case"h":d+=o[1],t.lineTo(d+n,h+r);break;case"H":d=o[1],t.lineTo(d+n,h+r);break;case"v":h+=o[1],t.lineTo(d+n,h+r);break;case"V":h=o[1],t.lineTo(d+n,h+r);break;case"m":d+=o[1],h+=o[2],t.moveTo(d+n,h+r);break;case"M":d=o[1],h=o[2],t.moveTo(d+n,h+r);break;case"c":s=d+o[5],u=h+o[6],p=d+o[3],m=h+o[4],t.bezierCurveTo(d+o[1]+n,h+o[2]+r,p+n,m+r,s+n,u+r),d=s,h=u;break;case"C":d=o[5],h=o[6],p=o[3],m=o[4],t.bezierCurveTo(o[1]+n,o[2]+r,p+n,m+r,d+n,h+r);break;case"s":s=d+o[3],u=h+o[4],p=2*d-p,m=2*h-m,t.bezierCurveTo(p+n,m+r,d+o[1]+n,h+o[2]+r,s+n,u+r),p=d+o[1],m=h+o[2],d=s,h=u;break;case"S":s=o[3],u=o[4],p=2*d-p,m=2*h-m,t.bezierCurveTo(p+n,m+r,o[1]+n,o[2]+r,s+n,u+r),d=s,h=u,p=o[1],m=o[2];break;case"q":s=d+o[3],u=h+o[4],p=d+o[1],m=h+o[2],t.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"Q":s=o[3],u=o[4],t.quadraticCurveTo(o[1]+n,o[2]+r,s+n,u+r),d=s,h=u,p=o[1],m=o[2];break;case"t":s=d+o[1],u=h+o[2],null===f[0].match(/[QqTt]/)?(p=d,m=h):"t"===f[0]?(p=2*d-c,m=2*h-l):"q"===f[0]&&(p=2*d-p,m=2*h-m),c=p,l=m,t.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u,p=d+o[1],m=h+o[2];break;case"T":s=o[1],u=o[2],p=2*d-p,m=2*h-m,t.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"a":h6(t,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+h+r]),d+=o[6],h+=o[7];break;case"A":h6(t,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],h=o[7];break;case"z":case"Z":t.closePath();break}f=o}}function h6(t,e,n,r){const i=u6(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n);for(let a=0;a<i.length;++a){const e=c6(i[a]);t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])}}const p6=.5773502691896257,m6={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,r6)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,a=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-n),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=i6*n,i=r-n*p6,a=n/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=i6*n,i=r-n*p6;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=i6*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=i6*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=i6*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=i6*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function g6(t){return Object(n0["i"])(m6,t)?m6[t]:y6(t)}var b6={};function y6(t){if(!Object(n0["i"])(b6,t)){const e=Q5(t);b6[t]={draw:function(t,n){d6(t,e,0,0,Math.sqrt(n)/2)}}}return b6[t]}const v6=.448084975506;function x6(t){return t.x}function w6(t){return t.y}function O6(t){return t.width}function _6(t){return t.height}function A6(t){return"function"===typeof t?t:()=>+t}function j6(t,e,n){return Math.max(e,Math.min(t,n))}function k6(){var t=x6,e=w6,n=O6,r=_6,i=A6(0),a=i,o=i,s=i,u=null;function c(c,l,f){var d,h=null!=l?l:+t.call(this,c),p=null!=f?f:+e.call(this,c),m=+n.call(this,c),g=+r.call(this,c),b=Math.min(m,g)/2,y=j6(+i.call(this,c),0,b),v=j6(+a.call(this,c),0,b),x=j6(+o.call(this,c),0,b),w=j6(+s.call(this,c),0,b);if(u||(u=d=u5()),y<=0&&v<=0&&x<=0&&w<=0)u.rect(h,p,m,g);else{var O=h+m,_=p+g;u.moveTo(h+y,p),u.lineTo(O-v,p),u.bezierCurveTo(O-v6*v,p,O,p+v6*v,O,p+v),u.lineTo(O,_-w),u.bezierCurveTo(O,_-v6*w,O-v6*w,_,O-w,_),u.lineTo(h+x,_),u.bezierCurveTo(h+v6*x,_,h,_-v6*x,h,_-x),u.lineTo(h,p+y),u.bezierCurveTo(h,p+v6*y,h+v6*y,p,h+y,p),u.closePath()}if(d)return u=null,d+""||null}return c.x=function(e){return arguments.length?(t=A6(e),c):t},c.y=function(t){return arguments.length?(e=A6(t),c):e},c.width=function(t){return arguments.length?(n=A6(t),c):n},c.height=function(t){return arguments.length?(r=A6(t),c):r},c.cornerRadius=function(t,e,n,r){return arguments.length?(i=A6(t),a=null!=e?A6(e):i,s=null!=n?A6(n):i,o=null!=r?A6(r):a,c):i},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c}function C6(){var t,e,n,r,i,a,o,s,u=null;function c(t,e,n){const r=n/2;if(i){var c=o-e,l=t-a;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*s,h=(l/=f)*s,p=Math.atan2(l,c);u.moveTo(a-d,o-h),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(a+d,o+h),u.arc(a,o,s,p,p+Math.PI)}else u.arc(t,e,r,0,r6);u.closePath()}else i=1;a=t,o=e,s=r}function l(a){var o,s,l,f=a.length,d=!1;for(null==u&&(u=l=u5()),o=0;o<=f;++o)!(o<f&&r(s=a[o],o,a))===d&&(d=!d)&&(i=0),d&&c(+t(s,o,a),+e(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}function E6(t,e){return null!=t?t:e}const S6=t=>t.x||0,D6=t=>t.y||0,F6=t=>t.width||0,N6=t=>t.height||0,T6=t=>(t.x||0)+(t.width||0),M6=t=>(t.y||0)+(t.height||0),I6=t=>t.startAngle||0,R6=t=>t.endAngle||0,$6=t=>t.padAngle||0,B6=t=>t.innerRadius||0,z6=t=>t.outerRadius||0,L6=t=>t.cornerRadius||0,P6=t=>E6(t.cornerRadiusTopLeft,t.cornerRadius)||0,U6=t=>E6(t.cornerRadiusTopRight,t.cornerRadius)||0,W6=t=>E6(t.cornerRadiusBottomRight,t.cornerRadius)||0,q6=t=>E6(t.cornerRadiusBottomLeft,t.cornerRadius)||0,V6=t=>E6(t.size,64),G6=t=>t.size||1,H6=t=>!(!1===t.defined),X6=t=>g6(t.shape||"circle"),Y6=b5().startAngle(I6).endAngle(R6).padAngle($6).innerRadius(B6).outerRadius(z6).cornerRadius(L6),K6=O5().x(S6).y1(D6).y0(M6).defined(H6),J6=O5().y(D6).x1(S6).x0(T6).defined(H6),Z6=w5().x(S6).y(D6).defined(H6),Q6=k6().x(S6).y(D6).width(F6).height(N6).cornerRadius(P6,U6,W6,q6),t8=j5().type(X6).size(V6),e8=C6().x(S6).y(D6).defined(H6).size(G6);function n8(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function r8(t,e){return Y6.context(t)(e)}function i8(t,e){const n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?J6:K6).curve(K5(r,n.orient,n.tension)).context(t)(e)}function a8(t,e){const n=e[0],r=n.interpolate||"linear";return Z6.curve(K5(r,n.orient,n.tension)).context(t)(e)}function o8(t,e,n,r){return Q6.context(t)(e,n,r)}function s8(t,e){return(e.mark.shape||e.shape).context(t)(e)}function u8(t,e){return t8.context(t)(e)}function c8(t,e){return e8.context(t)(e)}var l8=1;function f8(t,e,n){var r=e.clip,i=t._defs,a=e.clip_id||(e.clip_id="clip"+l8++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(n0["p"])(r)?o.path=r(null):n8(n)?o.path=o8(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function d8(t){this.clear(),t&&this.union(t)}function h8(t){this.mark=t,this.bounds=this.bounds||new d8}function p8(t){h8.call(this,t),this.items=this.items||[]}function m8(t){this._pending=0,this._loader=t||U5()}function g8(t){t._pending+=1}function b8(t){t._pending-=1}function y8(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){const r=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(r+(n?v8(e,r):0))}return t}function v8(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}d8.prototype={clone(){return new d8(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(t,e,n){var{x1:r,y1:i,x2:a,y2:o}=this,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*o+c,u*r+s*o+l,s*a-u*i+c,u*a+s*i+l,s*a-u*o+c,u*a+s*o+l]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},Object(n0["k"])(p8,h8),m8.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return g8(e),e._loader.sanitize(t,{context:"href"}).then(t=>(b8(e),t)).catch(()=>(b8(e),null))},loadImage(t){const e=this,n=Uu();return g8(e),e._loader.sanitize(t,{context:"image"}).then(t=>{const r=t.href;if(!r||!n)throw{url:r};const i=new n,a=Object(n0["i"])(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=a&&(i.crossOrigin=a),i.onload=()=>b8(e),i.onerror=()=>b8(e),i.src=r,i}).catch(t=>(b8(e),{complete:!1,width:0,height:0,src:t&&t.url||""}))},ready(){const t=this;return new Promise(e=>{function n(r){t.pending()?setTimeout(()=>{n(!0)},10):e(r)}n(!1)})}};const x8=r6-1e-8;let w8,O8,_8,A8,j8,k8,C8,E8;const S8=(t,e)=>w8.add(t,e),D8=(t,e)=>S8(O8=t,_8=e),F8=t=>S8(t,w8.y1),N8=t=>S8(w8.x1,t),T8=(t,e)=>j8*t+C8*e,M8=(t,e)=>k8*t+E8*e,I8=(t,e)=>S8(T8(t,e),M8(t,e)),R8=(t,e)=>D8(T8(t,e),M8(t,e));function $8(t,e){return w8=t,e?(A8=e*t6,j8=E8=Math.cos(A8),k8=Math.sin(A8),C8=-k8):(j8=E8=1,A8=k8=C8=0),B8}const B8={beginPath(){},closePath(){},moveTo:R8,lineTo:R8,rect(t,e,n,r){A8?(I8(t+n,e),I8(t+n,e+r),I8(t,e+r),R8(t,e)):(S8(t+n,e+r),D8(t,e))},quadraticCurveTo(t,e,n,r){const i=T8(t,e),a=M8(t,e),o=T8(n,r),s=M8(n,r);z8(O8,i,o,F8),z8(_8,a,s,N8),D8(o,s)},bezierCurveTo(t,e,n,r,i,a){const o=T8(t,e),s=M8(t,e),u=T8(n,r),c=M8(n,r),l=T8(i,a),f=M8(i,a);L8(O8,o,u,l,F8),L8(_8,s,c,f,N8),D8(l,f)},arc(t,e,n,r,i,a){if(r+=A8,i+=A8,O8=n*Math.cos(i)+t,_8=n*Math.sin(i)+e,Math.abs(i-r)>x8)S8(t-n,e-n),S8(t+n,e+n);else{const o=r=>S8(n*Math.cos(r)+t,n*Math.sin(r)+e);let s,u;if(o(r),o(i),i!==r)if(r%=r6,r<0&&(r+=r6),i%=r6,i<0&&(i+=r6),i<r&&(a=!a,s=r,r=i,i=s),a)for(i-=r6,s=r-r%n6,u=0;u<4&&s>i;++u,s-=n6)o(s);else for(s=r-r%n6+n6,u=0;u<4&&s<i;++u,s+=n6)o(s)}}};function z8(t,e,n,r){const i=(t-e)/(t+n-2*e);0<i&&i<1&&r(t+(e-t)*i)}function L8(t,e,n,r,i){const a=r-t+3*e-3*n,o=t+n-2*e,s=t-e;let u,c=0,l=0;Math.abs(a)>e6?(u=o*o+s*a,u>=0&&(u=Math.sqrt(u),c=(-o+u)/a,l=(-o-u)/a)):c=.5*s/o,0<c&&c<1&&i(P8(c,t,e,n,r)),0<l&&l<1&&i(P8(l,t,e,n,r))}function P8(t,e,n,r,i){const a=1-t,o=a*a,s=t*t;return o*a*e+3*o*t*n+3*a*s*r+s*t*i}var U8=(U8=Pu(1,1))?U8.getContext("2d"):null;const W8=new d8;function q8(t){return function(e,n){if(!U8)return!0;t(U8,e),W8.clear().union(e.bounds).intersect(n).round();const{x1:r,y1:i,x2:a,y2:o}=W8;for(let t=i;t<=o;++t)for(let e=r;e<=a;++e)if(U8.isPointInPath(e,t))return!0;return!1}}function V8(t,e){return e.contains(t.x||0,t.y||0)}function G8(t,e){const n=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return e.intersects(W8.set(n,r,n+i,r+a))}function H8(t,e){const n=t.x||0,r=t.y||0,i=null!=t.x2?t.x2:n,a=null!=t.y2?t.y2:r;return X8(e,n,r,i,a)}function X8(t,e,n,r,i){const{x1:a,y1:o,x2:s,y2:u}=t,c=r-e,l=i-n;let f,d,h,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(f=-c,d=-(a-e)),1===p&&(f=c,d=s-e),2===p&&(f=-l,d=-(o-n)),3===p&&(f=l,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>g)return!1;h>m&&(m=h)}else if(f>0){if(h<m)return!1;h<g&&(g=h)}}return!0}function Y8(t,e){t.globalCompositeOperation=e.blend||"source-over"}function K8(t,e){return null==t?e:t}function J8(t,e){const n=e.length;for(let r=0;r<n;++r)t.addColorStop(e[r].offset,e[r].color);return t}function Z8(t,e,n){const r=n.width(),i=n.height();let a;if("radial"===e.gradient)a=t.createRadialGradient(n.x1+K8(e.x1,.5)*r,n.y1+K8(e.y1,.5)*i,Math.max(r,i)*K8(e.r1,0),n.x1+K8(e.x2,.5)*r,n.y1+K8(e.y2,.5)*i,Math.max(r,i)*K8(e.r2,.5));else{const o=K8(e.x1,0),s=K8(e.y1,0),u=K8(e.x2,1),c=K8(e.y2,0);if(o!==u&&s!==c&&r!==i){const n=Pu(Math.ceil(r),Math.ceil(i)),a=n.getContext("2d");return a.scale(r,i),a.fillStyle=J8(a.createLinearGradient(o,s,u,c),e.stops),a.fillRect(0,0,r,i),t.createPattern(n,"no-repeat")}a=t.createLinearGradient(n.x1+o*r,n.y1+s*i,n.x1+u*r,n.y1+c*i)}return J8(a,e.stops)}function Q8(t,e,n){return V5(n)?Z8(t,n,e.bounds):n}function t7(t,e,n){return n*=null==e.fillOpacity?1:e.fillOpacity,n>0&&(t.globalAlpha=n,t.fillStyle=Q8(t,e,e.fill),!0)}var e7=[];function n7(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity,n>0&&(t.globalAlpha=n,t.strokeStyle=Q8(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||e7),t.lineDashOffset=e.strokeDashOffset||0),!0))}function r7(t,e){return t.zindex-e.zindex||t.index-e.index}function i7(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)e=i[n],e.index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(r7)}function a7(t,e){var n,r,i=t.items;if(!i||!i.length)return;const a=i7(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}function o7(t,e){var n,r,i=t.items;if(!i||!i.length)return null;const a=i7(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(i=t.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function s7(t){return function(e,n,r){a7(n,n=>{r&&!r.intersects(n.bounds)||c7(t,e,n,n)})}}function u7(t){return function(e,n,r){!n.items.length||r&&!r.intersects(n.bounds)||c7(t,e,n.items[0],n.items)}}function c7(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(Y8(e,n),n.fill&&t7(e,n,i)&&e.fill(),n.stroke&&n7(e,n,i)&&e.stroke()))}function l7(t){return t=t||n0["M"],function(e,n,r,i,a,o){return r*=e.pixelRatio,i*=e.pixelRatio,o7(n,n=>{const s=n.bounds;if((!s||s.contains(a,o))&&s)return t(e,n,r,i,a,o)?n:void 0})}}function f7(t,e){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function d7(t){return l7(f7(t))}function h7(t,e){return"translate("+t+","+e+")"}function p7(t){return"rotate("+t+")"}function m7(t,e){return"scale("+t+","+e+")"}function g7(t){return h7(t.x||0,t.y||0)}function b7(t){return h7(t.x||0,t.y||0)+(t.angle?" "+p7(t.angle):"")}function y7(t){return h7(t.x||0,t.y||0)+(t.angle?" "+p7(t.angle):"")+(t.scaleX||t.scaleY?" "+m7(t.scaleX||1,t.scaleY||1):"")}function v7(t,e,n){function r(t,n){t("transform",b7(n)),t("d",e(null,n))}function i(t,n){return e($8(t,n.angle),n),y8(t,n).translate(n.x||0,n.y||0)}function a(t,n){var r=n.x||0,i=n.y||0,a=n.angle||0;t.translate(r,i),a&&t.rotate(a*=t6),t.beginPath(),e(t,n),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:r,bound:i,draw:s7(a),pick:d7(a),isect:n||q8(a)}}var x7=v7("arc",r8);function w7(t,e){var n,r,i="horizontal"===t[0].orient?e[1]:e[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,s=1/0;while(--o>=0)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i),r<s&&(s=r,n=t[o]));return n}function O7(t,e){var n,r,i,a=Math.pow(t[0].strokeWidth||1,2),o=t.length;while(--o>=0)if(!1!==t[o].defined&&(n=t[o].x-e[0],r=t[o].y-e[1],i=n*n+r*r,i<a))return t[o];return null}function _7(t,e){var n,r,i,a=t.length;while(--a>=0)if(!1!==t[a].defined&&(n=t[a].x-e[0],r=t[a].y-e[1],i=n*n+r*r,n=t[a].size||1,i<n*n))return t[a];return null}function A7(t,e,n){function r(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))}function i(t,n){var r=n.items;return 0===r.length?t:(e($8(t),r),y8(t,r[0]))}function a(t,n){t.beginPath(),e(t,n)}const o=f7(a);function s(t,e,n,r,i,a){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,a)?null:(n*=t.pixelRatio,r*=t.pixelRatio,o(t,s,n,r)?s[0]:null)}return{type:t,tag:"path",nested:!0,attr:r,bound:i,draw:u7(a),pick:s,isect:V8,tip:n}}var j7=A7("area",i8,w7);function k7(t,e){var n=e.clip;t.save(),Object(n0["p"])(n)?(t.beginPath(),n(t),t.clip()):C7(t,e.group)}function C7(t,e){t.beginPath(),n8(e)?o8(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function E7(t){const e=K8(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function S7(t,e){t("transform",g7(e))}function D7(t,e){const n=E7(e);t("d",o8(null,e,n,n))}function F7(t,e){t("class","background"),t("aria-hidden",!0),D7(t,e)}function N7(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?D7(t,e):t("d","")}function T7(t,e,n){const r=e.clip?f8(n,e,e):null;t("clip-path",r)}function M7(t,e){if(!e.clip&&e.items){const n=e.items,r=n.length;for(let e=0;e<r;++e)t.union(n[e].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),y8(t,e),t.translate(e.x||0,e.y||0)}function I7(t,e,n,r){const i=E7(e);t.beginPath(),o8(t,e,(n||0)+i,(r||0)+i)}const R7=f7(I7),$7=f7(I7,!1),B7=f7(I7,!0);function z7(t,e,n){a7(e,e=>{const r=e.x||0,i=e.y||0,a=e.strokeForeground,o=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&o&&(I7(t,e,r,i),Y8(t,e),e.fill&&t7(t,e,o)&&t.fill(),e.stroke&&!a&&n7(t,e,o)&&t.stroke()),t.save(),t.translate(r,i),e.clip&&C7(t,e),n&&n.translate(-r,-i),a7(e,e=>{this.draw(t,e,n)}),n&&n.translate(r,i),t.restore(),a&&e.stroke&&o&&(I7(t,e,r,i),Y8(t,e),n7(t,e,o)&&t.stroke())})}function L7(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;const o=n*t.pixelRatio,s=r*t.pixelRatio;return o7(e,u=>{let c,l,f;const d=u.bounds;if(d&&!d.contains(i,a))return;l=u.x||0,f=u.y||0;const h=l+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<l||i>h||a<f||a>p))return;if(t.save(),t.translate(l,f),l=i-l,f=a-f,m&&n8(u)&&!B7(t,u,o,s))return t.restore(),null;const g=u.strokeForeground,b=!1!==e.interactive;return b&&g&&u.stroke&&$7(t,u,o,s)?(t.restore(),u):(c=o7(u,t=>P7(t,l,f)?this.pick(t,n,r,l,f):null),!c&&b&&(u.fill||!g&&u.stroke)&&R7(t,u,o,s)&&(c=u),t.restore(),c||null)})}function P7(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}var U7={type:"group",tag:"g",nested:!1,attr:S7,bound:M7,draw:z7,pick:L7,isect:G8,content:T7,background:F7,foreground:N7},W7={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function q7(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(e=>{t.image=e,t.image.url=t.url})),n}function V7(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function G7(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function H7(t,e){return"center"===t?e/2:"right"===t?e:0}function X7(t,e){return"middle"===t?e/2:"bottom"===t?e:0}function Y7(t,e,n){const r=q7(e,n),i=V7(e,r),a=G7(e,r),o=(e.x||0)-H7(e.align,i),s=(e.y||0)-X7(e.baseline,a),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";t("href",u,W7["xmlns:xlink"],"xlink:href"),t("transform",h7(o,s)),t("width",i),t("height",a),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")}function K7(t,e){const n=e.image,r=V7(e,n),i=G7(e,n),a=(e.x||0)-H7(e.align,r),o=(e.y||0)-X7(e.baseline,i);return t.set(a,o,a+r,o+i)}function J7(t,e,n){a7(e,e=>{if(n&&!n.intersects(e.bounds))return;const r=q7(e,this);let i,a,o,s,u=V7(e,r),c=G7(e,r),l=(e.x||0)-H7(e.align,u),f=(e.y||0)-X7(e.baseline,c);!1!==e.aspect&&(a=r.width/r.height,o=e.width/e.height,a===a&&o===o&&a!==o&&(o<a?(s=u/a,f+=(c-s)/2,c=s):(s=c*a,l+=(u-s)/2,u=s))),(r.complete||r.toDataURL)&&(Y8(t,e),t.globalAlpha=null!=(i=e.opacity)?i:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(r,l,f,u,c))})}var Z7={type:"image",tag:"image",nested:!1,attr:Y7,bound:K7,draw:J7,pick:l7(),isect:n0["M"],get:q7,xOffset:H7,yOffset:X7},Q7=A7("line",a8,O7);function t9(t,e){var n=e.scaleX||1,r=e.scaleY||1;1===n&&1===r||t("vector-effect","non-scaling-stroke"),t("transform",y7(e)),t("d",e.path)}function e9(t,e){var n=e.path;if(null==n)return!0;var r=e.x||0,i=e.y||0,a=e.scaleX||1,o=e.scaleY||1,s=(e.angle||0)*t6,u=e.pathCache;u&&u.path===n||((e.pathCache=u=Q5(n)).path=n),s&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(s),d6(t,u,0,0,a,o),t.rotate(-s),t.translate(-r,-i)):d6(t,u,r,i,a,o)}function n9(t,e){return e9($8(t,e.angle),e)?t.set(0,0,0,0):y8(t,e,!0)}var r9={type:"path",tag:"path",nested:!1,attr:t9,bound:n9,draw:s7(e9),pick:d7(e9),isect:q8(e9)};function i9(t,e){t("d",o8(null,e))}function a9(t,e){var n,r;return y8(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)}function o9(t,e){t.beginPath(),o8(t,e)}var s9={type:"rect",tag:"path",nested:!1,attr:i9,bound:a9,draw:s7(o9),pick:d7(o9),isect:G8};function u9(t,e){t("transform",g7(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)}function c9(t,e){var n,r;return y8(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)}function l9(t,e,n){var r,i,a,o;return!(!e.stroke||!n7(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}function f9(t,e,n){a7(e,e=>{if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&l9(t,e,r)&&(Y8(t,e),t.stroke())}})}function d9(t,e,n,r){return!!t.isPointInStroke&&(l9(t,e,1)&&t.isPointInStroke(n,r))}var h9={type:"rule",tag:"line",nested:!1,attr:u9,bound:c9,draw:f9,pick:l7(d9),isect:H8},p9=v7("shape",s8),m9=v7("symbol",u8,V8);const g9=Object(n0["w"])();var b9={height:_9,measureWidth:w9,estimateWidth:v9,width:v9,canvas:y9};function y9(t){b9.width=t&&U8?w9:v9}function v9(t,e){return x9(C9(t,e),_9(t))}function x9(t,e){return~~(.8*t.length*e)}function w9(t,e){return _9(t)<=0||!(e=C9(t,e))?0:O9(e,F9(t))}function O9(t,e){const n="(".concat(e,") ").concat(t);let r=g9.get(n);return void 0===r&&(U8.font=e,r=U8.measureText(t).width,g9.set(n,r)),r}function _9(t){return null!=t.fontSize?+t.fontSize||0:11}function A9(t){return null!=t.lineHeight?t.lineHeight:_9(t)+2}function j9(t){return Object(n0["m"])(t)?t.length>1?t:t[0]:t}function k9(t){return j9(t.lineBreak&&t.text&&!Object(n0["m"])(t.text)?t.text.split(t.lineBreak):t.text)}function C9(t,e){const n=null==e?"":(e+"").trim();return t.limit>0&&n.length?S9(t,n):n}function E9(t){if(b9.width===w9){const e=F9(t);return t=>O9(t,e)}{const e=_9(t);return t=>x9(t,e)}}function S9(t,e){var n=+t.limit,r=E9(t);if(r(e)<n)return e;var i,a=t.ellipsis||"",o="rtl"===t.dir,s=0,u=e.length;if(n-=r(a),o){while(s<u)i=s+u>>>1,r(e.slice(i))>n?s=i+1:u=i;return a+e.slice(s)}while(s<u)i=1+(s+u>>>1),r(e.slice(0,i))<n?s=i:u=i-1;return e.slice(0,s)+a}function D9(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function F9(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+_9(t)+"px "+D9(t,e)}function N9(t){var e=t.baseline,n=_9(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*A9(t):"line-bottom"===e?.29*n-.5*A9(t):0)}y9(!0);const T9={left:"start",center:"middle",right:"end"},M9=new d8;function I9(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-n6,n+=i*Math.cos(e),r+=i*Math.sin(e)),M9.x1=n,M9.y1=r,M9}function R9(t,e){var n,r=e.dx||0,i=(e.dy||0)+N9(e),a=I9(e),o=a.x1,s=a.y1,u=e.angle||0;t("text-anchor",T9[e.align]||"start"),u?(n=h7(o,s)+" "+p7(u),(r||i)&&(n+=" "+h7(r,i))):n=h7(o+r,s+i),t("transform",n)}function $9(t,e,n){var r,i=b9.height(e),a=e.align,o=I9(e),s=o.x1,u=o.y1,c=e.dx||0,l=(e.dy||0)+N9(e)-Math.round(.8*i),f=k9(e);if(Object(n0["m"])(f)?(i+=A9(e)*(f.length-1),r=f.reduce((t,n)=>Math.max(t,b9.width(e,n)),0)):r=b9.width(e,f),"center"===a?c-=r/2:"right"===a&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*t6,s,u);else if(2===n)return t.rotatedPoints(e.angle*t6,s,u);return t}function B9(t,e,n){a7(e,e=>{var r,i,a,o,s,u,c,l=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===l||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=F9(e),t.textAlign=e.align||"left",r=I9(e),i=r.x1,a=r.y1,e.angle&&(t.save(),t.translate(i,a),t.rotate(e.angle*t6),i=a=0),i+=e.dx||0,a+=(e.dy||0)+N9(e),u=k9(e),Y8(t,e),Object(n0["m"])(u))for(s=A9(e),o=0;o<u.length;++o)c=C9(e,u[o]),e.fill&&t7(t,e,l)&&t.fillText(c,i,a),e.stroke&&n7(t,e,l)&&t.strokeText(c,i,a),a+=s;else c=C9(e,u),e.fill&&t7(t,e,l)&&t.fillText(c,i,a),e.stroke&&n7(t,e,l)&&t.strokeText(c,i,a);e.angle&&t.restore()}})}function z9(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=I9(e),s=o.x1,u=o.y1,c=$9(M9,e,1),l=-e.angle*t6,f=Math.cos(l),d=Math.sin(l),h=f*i-d*a+(s-f*s+d*u),p=d*i+f*a+(u-d*s-f*u);return c.contains(h,p)}function L9(t,e){const n=$9(M9,t,2);return X8(e,n[0],n[1],n[2],n[3])||X8(e,n[0],n[1],n[4],n[5])||X8(e,n[4],n[5],n[6],n[7])||X8(e,n[2],n[3],n[6],n[7])}var P9={type:"text",tag:"text",nested:!1,attr:R9,bound:$9,draw:B9,pick:l7(z9),isect:L9},U9=A7("trail",c8,_7),W9={arc:x7,area:j7,group:U7,image:Z7,line:Q7,path:r9,rect:s9,rule:h9,shape:p9,symbol:m9,text:P9,trail:U9};function q9(t,e,n){var r=W9[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new d8),t,n)}var V9={mark:null};function G9(t,e,n){var r,i,a,o,s=W9[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?a=c[0]:(V9.mark=t,a=V9),o=q9(a,u,n),e=e&&e.union(o)||o,e;if(e=e||t.bounds&&t.bounds.clear()||new d8,l)for(r=0,i=c.length;r<i;++r)e.union(q9(c[r],u,n));return t.bounds=e}const H9=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function X9(t,e){return JSON.stringify(t,H9,e)}function Y9(t){const e="string"===typeof t?JSON.parse(t):t;return K9(e)}function K9(t){var e,n,r,i=t.marktype,a=t.items;if(a)for(n=0,r=a.length;n<r;++n)e=i?"mark":"group",a[n][e]=t,a[n].zindex&&(a[n][e].zdirty=!0),"group"===(i||e)&&K9(a[n]);return i&&G9(t),t}function J9(t){arguments.length?this.root=Y9(t):(this.root=Z9({marktype:"group",name:"root",role:"frame"}),this.root.items=[new p8(this.root)])}function Z9(t,e){const n={bounds:new d8,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function Q9(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function ttt(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function ett(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=Q9(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function ntt(t,e){var n=t.childNodes,r=n.length;while(r>e)t.removeChild(n[--r]);return t}function rtt(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function itt(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function att(t,e,n,r){var i,a,o=t&&t.mark;if(o&&(i=W9[o.marktype]).tip){a=itt(e,n),a[0]-=r[0],a[1]-=r[1];while(t=t.mark.group)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}function ott(t,e){this._active=null,this._handlers={},this._loader=t||U5(),this._tooltip=e||stt}function stt(t,e,n,r){t.element().setAttribute("title",r||"")}function utt(t){this._el=null,this._bgcolor=null,this._loader=new m8(t)}J9.prototype={toJSON(t){return X9(this.root,t||0)},mark(t,e,n){e=e||this.root.items[0];const r=Z9(t,e);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},ott.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const r in e)n.push(...e[r]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(e=>{const n=new MouseEvent(t.type,t),r=Q9(null,"a");for(const t in e)r.setAttribute(t,e[t]);r.dispatchEvent(n)}).catch(()=>{})},handleTooltip(t,e,n){if(e&&null!=e.tooltip){e=att(e,t,this.canvas(),this._origin);const r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.width(),o=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;while(t.mark&&(t=t.mark.group))s+=t.x||0,u+=t.y||0;return{x:s,y:u,width:a,height:o,left:s,top:u,right:s+a,bottom:u+o}}},utt.prototype={initialize(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var n=this,r=n._loader[t](e);if(!n._ready){const t=n._call;n._ready=n._loader.ready().then(e=>{e&&t(),n._ready=null})}return r},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const ctt="keydown",ltt="keypress",ftt="keyup",dtt="dragenter",htt="dragleave",ptt="dragover",mtt="mousedown",gtt="mouseup",btt="mousemove",ytt="mouseout",vtt="mouseover",xtt="click",wtt="dblclick",Ott="wheel",_tt="mousewheel",Att="touchstart",jtt="touchmove",ktt="touchend",Ctt=[ctt,ltt,ftt,dtt,htt,ptt,mtt,gtt,btt,ytt,vtt,xtt,wtt,Ott,_tt,Att,jtt,ktt],Ett=btt,Stt=ytt,Dtt=xtt;function Ftt(t,e){ott.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const Ntt=t=>t===Att||t===jtt||t===ktt?[Att,jtt,ktt]:[t];function Ttt(t,e){Ntt(e).forEach(e=>Mtt(t,e))}function Mtt(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}function Itt(t,e,n){return function(r){const i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r)),this.fire(t,r)}}function Rtt(t){return function(e){this.fire(t,e),this._active=null}}function $tt(){return"undefined"!==typeof window&&window.devicePixelRatio||1}Object(n0["k"])(Ftt,ott,{initialize(t,e,n){return this._canvas=t&&ttt(t,"canvas"),[xtt,mtt,btt,ytt,htt].forEach(t=>Ttt(this,t)),ott.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Ctt,DOMMouseScroll(t){this.fire(_tt,t)},mousemove:Itt(btt,vtt,ytt),dragover:Itt(ptt,dtt,htt),mouseout:Rtt(ytt),dragleave:Rtt(htt),mousedown(t){this._down=this._active,this.fire(mtt,t)},click(t){this._down===this._active&&(this.fire(xtt,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Att,t,!0)},touchmove(t){this.fire(jtt,t,!0)},touchend(t){this.fire(ktt,t,!0),this._touch=null},fire(t,e,n){const r=n?this._touch:this._active,i=this._handlers[t];if(e.vegaType=t,t===Dtt&&r&&r.href?this.handleHref(e,r,r.href):t!==Ett&&t!==Stt||this.handleTooltip(e,r,t!==Stt),i)for(let a=0,o=i.length;a<o;++a)i[a].handler.call(this._obj,e,r)},on(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);return i<0&&(Ttt(this,t),(r[n]||(r[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},pickEvent(t){const e=itt(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,r,i){const a=this.context(),o=W9[t.marktype];return o.pick.call(this,a,t,e,n,r,i)}});var Btt=$tt();function ztt(t,e,n,r,i,a){const o="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,s=t.getContext("2d"),u=o?Btt:i;t.width=e*u,t.height=n*u;for(const c in a)s[c]=a[c];return o&&1!==u&&(t.style.width=e+"px",t.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1]),t}function Ltt(t){utt.call(this,t),this._options={},this._redraw=!1,this._dirty=new d8,this._tempb=new d8}const Ptt=utt.prototype,Utt=(t,e,n)=>(new d8).set(0,0,e,n).translate(-t[0],-t[1]);function Wtt(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}function qtt(t,e){ott.call(this,t,e);const n=this;n._hrefHandler=Vtt(n,(t,e)=>{e&&e.href&&n.handleHref(t,e,e.href)}),n._tooltipHandler=Vtt(n,(t,e)=>{n.handleTooltip(t,e,t.type!==Stt)})}Object(n0["k"])(Ltt,utt,{initialize(t,e,n,r,i,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Pu(1,1,this._options.type),t&&this._canvas&&(ntt(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Ptt.initialize.call(this,t,e,n,r,i)},resize(t,e,n,r){if(Ptt.resize.call(this,t,e,n,r),this._canvas)ztt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const t=this._options.externalContext;t||Object(n0["d"])("CanvasRenderer is missing a valid canvas or context"),t.scale(this._scale,this._scale),t.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;while(n)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty,o=Utt(n,r,i);e.save();const s=this._redraw||a.empty()?(this._redraw=!1,o.expand(1)):Wtt(e,o.intersect(a),n);return this.clear(-n[0],-n[1],r,i),this.draw(e,t,s),e.restore(),a.clear(),this},draw(t,e,n){const r=W9[e.marktype];e.clip&&k7(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,r){const i=this._options,a=this.context();"pdf"===i.type||i.externalContext||a.clearRect(t,e,n,r),null!=this._bgcolor&&(a.fillStyle=this._bgcolor,a.fillRect(t,e,n,r))}});const Vtt=(t,e)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,e.call(t._obj,n,r)};Object(n0["k"])(qtt,ott,{initialize(t,e,n){let r=this._svg;return r&&(r.removeEventListener(Dtt,this._hrefHandler),r.removeEventListener(Ett,this._tooltipHandler),r.removeEventListener(Stt,this._tooltipHandler)),this._svg=r=t&&ttt(t,"svg"),r&&(r.addEventListener(Dtt,this._hrefHandler),r.addEventListener(Ett,this._tooltipHandler),r.addEventListener(Stt,this._tooltipHandler)),ott.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),r=this._handlers,i=this._handlerIndex(r[n],t,e);if(i<0){const i={type:t,handler:e,listener:Vtt(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off(t,e){const n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const Gtt="aria-hidden",Htt="aria-label",Xtt="role",Ytt="aria-roledescription",Ktt="graphics-object",Jtt="graphics-symbol",Ztt=(t,e,n)=>({[Xtt]:t,[Ytt]:e,[Htt]:n||void 0}),Qtt=Object(n0["J"])(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),tet={axis:{desc:"axis",caption:set},legend:{desc:"legend",caption:uet},"title-text":{desc:"title",caption:t=>"Title text '".concat(oet(t),"'")},"title-subtitle":{desc:"subtitle",caption:t=>"Subtitle text '".concat(oet(t),"'")}},eet={ariaRole:Xtt,ariaRoleDescription:Ytt,description:Htt};function net(t,e){const n=!1===e.aria;if(t(Gtt,n||void 0),n||null==e.description)for(const r in eet)t(eet[r],void 0);else{const n=e.mark.marktype;t(Htt,e.description),t(Xtt,e.ariaRole||("group"===n?Ktt:Jtt)),t(Ytt,e.ariaRoleDescription||"".concat(n," mark"))}}function ret(t){return!1===t.aria?{[Gtt]:!0}:Qtt[t.role]?null:tet[t.role]?aet(t,tet[t.role]):iet(t)}function iet(t){const e=t.marktype,n="group"===e||"text"===e||t.items.some(t=>null!=t.description&&!1!==t.aria);return Ztt(n?Ktt:Jtt,"".concat(e," mark container"),t.description)}function aet(t,e){try{const n=t.items[0],r=e.caption||(()=>"");return Ztt(e.role||Jtt,e.desc,n.description||r(n))}catch(n){return null}}function oet(t){return Object(n0["a"])(t.text).join(" ")}function set(t){const e=t.datum,n=t.orient,r=e.title?cet(t):null,i=t.context,a=i.scales[e.scale].value,o=i.dataflow.locale(),s=a.type,u="left"===n||"right"===n?"Y":"X";return"".concat(u,"-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(s3(s)?"discrete":s," scale")+" with ".concat(V3(o,a,t))}function uet(t){const e=t.datum,n=e.title?cet(t):null,r="".concat(e.type||""," legend").trim(),i=e.scales,a=Object.keys(i),o=t.context,s=o.scales[i[a[0]]].value,u=o.dataflow.locale();return det(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(fet(a))+" with ".concat(V3(u,s,t))}function cet(t){try{return Object(n0["a"])(Object(n0["C"])(t.items).items[0].text).join(" ")}catch(e){return null}}function fet(t){return t=t.map(t=>t+("fill"===t||"stroke"===t?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Object(n0["C"])(t)}function det(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const het=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),pet=t=>het(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function met(){let t="",e="",n="";const r=[],i=()=>e=n="",a=a=>{e&&(t+="".concat(e,">").concat(n),i()),r.push(a)},o=(t,n)=>(null!=n&&(e+=" ".concat(t,'="').concat(pet(n),'"')),s),s={open(t,...n){a(t),e="<"+t;for(const e of n)for(const t in e)o(t,e[t]);return s},close(){const a=r.pop();return t+=e?e+(n?">".concat(n,"</").concat(a,">"):"/>"):"</".concat(a,">"),i(),s},attr:o,text:t=>(n+=het(t),s),toString:()=>t};return s}const get=t=>bet(met(),t)+"";function bet(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,r=n.length;for(let e=0;e<r;++e)t.attr(n[e].name,n[e].value)}if(e.hasChildNodes()){const n=e.childNodes,r=n.length;for(let e=0;e<r;e++){const r=n[e];3===r.nodeType?t.text(r.nodeValue):bet(t,r)}}return t.close()}const yet={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},vet={fill:"none","stroke-miterlimit":10},xet=0,wet=W7.xmlns;function Oet(t){utt.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const _et=utt.prototype;function Aet(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function jet(t,e,n){let r,i,a;if("radial"===e.gradient){let r=ett(t,n++,"pattern",wet);Ret(r,{id:q5+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=ett(r,0,"rect",wet),Ret(r,{width:1,height:1,fill:"url(".concat(zet(),"#").concat(e.id,")")}),t=ett(t,n++,"radialGradient",wet),Ret(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=ett(t,n++,"linearGradient",wet),Ret(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(r=0,i=e.stops.length;r<i;++r)a=ett(t,r,"stop",wet),a.setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);return ntt(t,r),n}function ket(t,e,n){let r;return t=ett(t,n,"clipPath",wet),t.setAttribute("id",e.id),e.path?(r=ett(t,0,"path",wet),r.setAttribute("d",e.path)):(r=ett(t,0,"rect",wet),Ret(r,{x:0,y:0,width:e.width,height:e.height})),ntt(t,1),n+1}function Cet(t,e,n){e=e.lastChild.previousSibling;let r,i=0;a7(n,n=>{r=t.mark(e,n,r),++i}),ntt(e,1+i)}function Eet(t,e,n,r,i){let a,o=t._svg;if(!o&&(a=e.ownerDocument,o=Q9(a,r,wet),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){const e=Q9(a,"path",wet);o.appendChild(e),e.__data__=t;const n=Q9(a,"g",wet);o.appendChild(n),n.__data__=t;const r=Q9(a,"path",wet);o.appendChild(r),r.__data__=t,r.__values__={fill:"default"}}return(o.ownerSVGElement!==i||Det(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}function Det(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}Object(n0["k"])(Oet,utt,{initialize(t,e,n,r,i){return this._defs={},this._clearDefs(),t&&(this._svg=ett(t,0,"svg",wet),Ret(this._svg,W7),this._svg.setAttribute("class","marks"),ntt(t,1),this._root=ett(this._svg,xet,"g",wet),Ret(this._root,vet),ntt(this._svg,xet+1)),this.background(this._bgcolor),_et.initialize.call(this,t,e,n,r,i)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),_et.background.apply(this,arguments)},resize(t,e,n,r){return _et.resize.call(this,t,e,n,r),this._svg&&(Ret(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=ett(t,xet,"rect",wet),Ret(n,{width:this._width,height:this._height,fill:e}));const r=get(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),r},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),ntt(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,r,i,a,o,s,u;for(o=0,s=t.length;o<s;++o)n=t[o],r=n.mark,r.marktype!==i&&(i=r.marktype,a=W9[i]),r.zdirty&&r.dirty!==e&&(this._dirtyAll=!1,Aet(n,e),r.items.forEach(t=>{t.dirty=e})),r.zdirty||(n.exit?(a.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(a,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null):(n=a.nested?r.items[0]:n,n._update!==e&&(n._svg&&n._svg.ownerSVGElement?this._update(a,n._svg,n):(this._dirtyAll=!1,Aet(n,e)),n._update=e)));return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const r=this._svg,i=W9[e.marktype],a=!1===e.interactive?"none":null,o="g"===i.tag;let s=null,u=0;const c=Eet(e,t,n,"g",r);c.setAttribute("class",rtt(e));const l=ret(e);for(const d in l)$et(c,d,l[d]);o||$et(c,"pointer-events",a),$et(c,"clip-path",e.clip?f8(this,e,e.group):null);const f=t=>{const e=this.isDirty(t),n=Eet(t,c,s,i.tag,r);e&&(this._update(i,n,t),o&&Cet(this,n,t)),s=n,++u};return i.nested?e.items.length&&f(e.items[0]):a7(e,f),ntt(c,u),c},_update(t,e,n){Fet=e,Net=e.__values__,net(Met,n),t.attr(Met,n,this);const r=Tet[t.type];r&&r.call(this,t,e,n),Fet&&this.style(Fet,n)},style(t,e){if(null!=e)for(const n in yet){let r="font"===n?D9(e):e[n];if(r===Net[n])continue;const i=yet[n];null==r?t.removeAttribute(i):(V5(r)&&(r=G5(r,this._defs.gradient,zet())),t.setAttribute(i,r+"")),Net[n]=r}},defs(){const t=this._svg,e=this._defs;let n=e.el,r=0;for(const i in e.gradient)n||(e.el=n=ett(t,xet+1,"defs",wet)),r=jet(n,e.gradient[i],r);for(const i in e.clipping)n||(e.el=n=ett(t,xet+1,"defs",wet)),r=ket(n,e.clipping[i],r);n&&(0===r?(t.removeChild(n),e.el=null):ntt(n,r))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});let Fet=null,Net=null;const Tet={group(t,e,n){const r=Fet=e.childNodes[2];Net=r.__values__,t.foreground(Met,n,this),Net=e.__values__,Fet=e.childNodes[1],t.content(Met,n,this);const i=Fet=e.childNodes[0];t.background(Met,n,this);const a=!1===n.mark.interactive?"none":null;if(a!==Net.events&&($et(r,"pointer-events",a),$et(i,"pointer-events",a),Net.events=a),n.strokeForeground&&n.stroke){const t=n.fill;$et(r,"display",null),this.style(i,n),$et(i,"stroke",null),t&&(n.fill=null),Net=r.__values__,this.style(r,n),t&&(n.fill=t),Fet=null}else $et(r,"display","none")},image(t,e,n){!1===n.smooth?(Iet(e,"image-rendering","optimizeSpeed"),Iet(e,"image-rendering","pixelated")):Iet(e,"image-rendering",null)},text(t,e,n){const r=k9(n);let i,a,o,s;Object(n0["m"])(r)?(a=r.map(t=>C9(n,t)),i=a.join("\n"),i!==Net.text&&(ntt(e,0),o=e.ownerDocument,s=A9(n),a.forEach((t,r)=>{const i=Q9(o,"tspan",wet);i.__data__=n,i.textContent=t,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),e.appendChild(i)}),Net.text=i)):(a=C9(n,r),a!==Net.text&&(e.textContent=a,Net.text=a)),$et(e,"font-family",D9(n)),$et(e,"font-size",_9(n)+"px"),$et(e,"font-style",n.fontStyle),$et(e,"font-variant",n.fontVariant),$et(e,"font-weight",n.fontWeight)}};function Met(t,e,n){e!==Net[t]&&(n?Bet(Fet,t,e,n):$et(Fet,t,e),Net[t]=e)}function Iet(t,e,n){n!==Net[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),Net[e]=n)}function Ret(t,e){for(const n in e)$et(t,n,e[n])}function $et(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function Bet(t,e,n,r){null!=n?t.setAttributeNS(r,e,n):t.removeAttributeNS(r,e)}function zet(){let t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Let(t){utt.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}function Pet(t,e,n,r,i){if(null==e)return t;if("bgrect"===r&&!1===n.interactive&&(t["pointer-events"]="none"),"bgfore"===r&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===r&&!1===e.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===r&&(t["font-family"]=D9(e),t["font-size"]=_9(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const a in yet){let n=e[a];const r=yet[a];("transparent"!==n||"fill"!==r&&"stroke"!==r)&&null!=n&&(V5(n)&&(n=G5(n,i.gradient,"")),t[r]=n)}return t}Object(n0["k"])(Let,utt,{svg(){return this._text},_render(t){const e=met();e.open("svg",Object(n0["e"])({},W7,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",vet,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=W9[e.marktype],r=n.tag,i=[net,n.attr];t.open("g",{class:rtt(e),"clip-path":e.clip?f8(this,e,e.group):null},ret(e),{"pointer-events":"g"!==r&&!1===e.interactive?"none":null});const a=a=>{const o=this.href(a);if(o&&t.open("a",o),t.open(r,this.attr(e,a,i,"g"!==r?r:null)),"text"===r){const e=k9(a);if(Object(n0["m"])(e)){const n={x:0,dy:A9(a)};for(let r=0;r<e.length;++r)t.open("tspan",r?n:null).text(C9(a,e[r])).close()}else t.text(C9(a,e))}else if("g"===r){const r=a.strokeForeground,i=a.fill,o=a.stroke;r&&o&&(a.stroke=null),t.open("path",this.attr(e,a,n.background,"bgrect")).close(),t.open("g",this.attr(e,a,n.content)),a7(a,e=>this.mark(t,e)),t.close(),r&&o?(i&&(a.fill=null),a.stroke=o,t.open("path",this.attr(e,a,n.foreground,"bgrect")).close(),i&&(a.fill=i)):t.open("path",this.attr(e,a,n.foreground,"bgfore")).close()}t.close(),o&&t.close()};return n.nested?e.items&&e.items.length&&a(e.items[0]):a7(e,a),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(t=>{t["xlink:href"]=t.href,t.href=null,(this._hrefs||(this._hrefs={}))[e]=t})}return null},attr(t,e,n,r){const i={},a=(t,e,n,r)=>{i[r||t]=e};return Array.isArray(n)?n.forEach(t=>t(a,e,this)):n(a,e,this),r&&Pet(i,e,t,r,this._defs),i},defs(t){const e=this._defs.gradient,n=this._defs.clipping,r=Object.keys(e).length+Object.keys(n).length;if(0!==r){t.open("defs");for(const n in e){const r=e[n],i=r.stops;"radial"===r.gradient?(t.open("pattern",{id:q5+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),t.close(),t.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):t.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let e=0;e<i.length;++e)t.open("stop",{offset:i[e].offset,"stop-color":i[e].color}).close();t.close()}for(const e in n){const r=n[e];t.open("clipPath",{id:e}),r.path?t.open("path",{d:r.path}).close():t.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),t.close()}t.close()}}});const Uet="canvas",Wet="png",qet="svg",Vet="none",Get={};function Het(t,e,n){const r=[],i=(new d8).union(e),a=t.marktype;return a?Xet(t,i,n,r):"group"===a?Ket(t,i,n,r):Object(n0["d"])("Intersect scene must be mark node or group item.")}function Xet(t,e,n,r){if(Yet(t,e,n)){const i=t.items,a=t.marktype,o=i.length;let s=0;if("group"===a)for(;s<o;++s)Ket(i[s],e,n,r);else for(const t=W9[a].isect;s<o;++s){const n=i[s];Jet(n,e,t)&&r.push(n)}}return r}function Yet(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}function Ket(t,e,n,r){n&&n(t.mark)&&Jet(t,e,W9.group.isect)&&r.push(t);const i=t.items,a=i&&i.length;if(a){const o=t.x||0,s=t.y||0;e.translate(-o,-s);for(let t=0;t<a;++t)Xet(i[t],e,n,r);e.translate(o,s)}return r}function Jet(t,e,n){const r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}Get[Uet]=Get[Wet]={renderer:Ltt,headless:Ltt,handler:Ftt},Get[qet]={renderer:Oet,headless:Let,handler:qtt},Get[Vet]={};new d8;var Zet=function(t,e,n,r,i){t=e1(t,(i||this).context);const a=X5(e,n);let o=t.domain(),s=o[0],u=Object(n0["C"])(o),c=n0["j"];return u-s?c=h3(t,s,u):t=(t.interpolator?i3("sequential")().interpolator(t.interpolator()):i3("linear")().interpolate(t.interpolate()).range(t.range())).domain([s=0,u=1]),t.ticks&&(o=t.ticks(+r||15),s!==o[0]&&o.unshift(s),u!==Object(n0["C"])(o)&&o.push(u)),o.forEach(e=>a.stop(c(e),t(e))),a};function Qet(t,e,n){const r=e1(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}}function tnt(t){let e=null;return function(n){return n?d6(n,e=e||Q5(t)):t}}const ent=t=>t.data;function nnt(t,e){const n=r0.call(e,t);return n.root&&n.root.lookup||{}}function rnt(t,e,n){const r=nnt(t,this),i=r[e],a=r[n];return i&&a?i.path(a).map(ent):void 0}function int(t,e){const n=nnt(t,this)[e];return n?n.ancestors().map(ent):void 0}const ant=()=>"undefined"!==typeof window&&window||null;function ont(){const t=ant();return t?t.screen:{}}function snt(){const t=ant();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function unt(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}var cnt=function(t,e,n){if(!t)return[];const[r,i]=t,a=(new d8).set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return Het(o,a,lnt(e))};function lnt(t){let e=null;if(t){const n=Object(n0["a"])(t.marktype),r=Object(n0["a"])(t.markname);e=t=>(!n.length||n.some(e=>t.marktype===e))&&(!r.length||r.some(e=>t.name===e))}return e}const fnt={random(){return di()},cumulativeNormal:Ai,cumulativeLogNormal:Fi,cumulativeUniform:$i,densityNormal:_i,densityLogNormal:Di,densityUniform:Ri,quantileNormal:ji,quantileLogNormal:Ni,quantileUniform:Bi,sampleNormal:Oi,sampleLogNormal:Si,sampleUniform:Ii,isArray:n0["m"],isBoolean:n0["n"],isDate:n0["o"],isDefined(t){return void 0!==t},isNumber:n0["r"],isObject:n0["s"],isRegExp:n0["t"],isString:n0["u"],isTuple:Sn,isValid(t){return null!=t&&t===t},toBoolean:n0["G"],toDate:n0["H"],toNumber:n0["I"],toString:n0["K"],flush:n0["h"],lerp:n0["v"],merge:m1,pad:n0["x"],peek:n0["C"],span:n0["E"],inrange:n0["l"],truncate:n0["L"],rgb:Cc,lab:dd,hcl:vd,hsl:Mc,luminance:h1,contrast:p1,sequence:ua,format:u0,utcFormat:l0,utcParse:d0,utcOffset:la["w"],utcSequence:la["x"],timeFormat:c0,timeParse:f0,timeOffset:la["q"],timeSequence:la["r"],timeUnitSpecifier:la["s"],monthFormat:m0,monthAbbrevFormat:g0,dayFormat:b0,dayAbbrevFormat:y0,quarter:n0["D"],utcquarter:n0["N"],week:la["A"],utcweek:la["z"],dayofyear:la["m"],utcdayofyear:la["y"],warn:c1,info:l1,debug:f1,extent:n0["f"],inScope:s1,intersect:cnt,clampRange:n0["b"],pinchDistance:w1,pinchAngle:O1,screen:ont,containerSize:unt,windowSize:snt,bandspace:G3,setdata:a0,pathShape:tnt,panLinear:n0["y"],panLog:n0["z"],panPow:n0["A"],panSymlog:n0["B"],zoomLinear:n0["O"],zoomLog:n0["P"],zoomPow:n0["Q"],zoomSymlog:n0["R"],encode:o0,modify:x1},dnt=["view","item","group","xy","x","y"],hnt="event.vega.",pnt="this.",mnt={},gnt={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${Object(n0["F"])(O0+t)}]`,functions:ynt,constants:H0,visitors:mnt},bnt=K0(gnt);function ynt(t){const e=X0(t);dnt.forEach(t=>e[t]=hnt+t);for(const n in fnt)e[n]=pnt+n;return Object(n0["e"])(e,n1(t,fnt,mnt)),e}function vnt(t,e,n){return 1===arguments.length?fnt[t]:(fnt[t]=e,n&&(mnt[t]=n),bnt&&(bnt.functions[t]=pnt+t),this)}vnt("bandwidth",H3,Q0),vnt("copy",X3,Q0),vnt("domain",Y3,Q0),vnt("range",J3,Q0),vnt("invert",K3,Q0),vnt("scale",Z3,Q0),vnt("gradient",Zet,Q0),vnt("geoArea",i1,Q0),vnt("geoBounds",a1,Q0),vnt("geoCentroid",o1,Q0),vnt("geoShape",Qet,Q0),vnt("indata",i0,Z0),vnt("data",r0,J0),vnt("treePath",rnt,J0),vnt("treeAncestors",int,J0),vnt("vlSelectionTest",AJ,SJ),vnt("vlSelectionResolve",jJ,SJ);var xnt=function(t){return Object(Ue["D"])(t)?t:{type:t||"pad"}};const wnt=t=>+t||0,Ont=t=>({top:t,bottom:t,left:t,right:t});var _nt=function(t){return Object(Ue["D"])(t)?t.signal?t:{top:wnt(t.top),bottom:wnt(t.bottom),left:wnt(t.left),right:wnt(t.right)}:Ont(wnt(t))};const Ant=t=>Object(Ue["D"])(t)&&!Object(Ue["x"])(t)?Object(Ue["l"])({},t):{value:t};function jnt(t,e,n,r){if(null!=n){const i=Object(Ue["D"])(n)&&!Object(Ue["x"])(n)||Object(Ue["x"])(n)&&n.length&&Object(Ue["D"])(n[0]);return i?t.update[e]=n:t[r||"enter"][e]={value:n},1}return 0}function knt(t,e,n){for(const r in e)jnt(t,r,e[r]);for(const r in n)jnt(t,r,n[r],"update")}function Cnt(t,e,n){for(const r in e)n&&Object(Ue["s"])(n,r)||(t[r]=Object(Ue["l"])(t[r]||{},e[r]));return t}function Ent(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const Snt="mark",Dnt="frame",Fnt="scope",Nnt="axis",Tnt="axis-domain",Mnt="axis-grid",Int="axis-label",Rnt="axis-tick",$nt="axis-title",Bnt="legend",znt="legend-band",Lnt="legend-entry",Pnt="legend-gradient",Unt="legend-label",Wnt="legend-symbol",qnt="legend-title",Vnt="title",Gnt="title-text",Hnt="title-subtitle";var Xnt=function(t,e,n,r,i){const a={},o={};let s,u,c,l;for(u in u="lineBreak","text"!==e||null==i[u]||Ent(u,t)||Ynt(a,u,i[u]),("legend"==n||String(n).startsWith("axis"))&&(n=null),l=n===Dnt?i.group:n===Snt?Object(Ue["l"])({},i.mark,i[e]):null,l)c=Ent(u,t)||("fill"===u||"stroke"===u)&&(Ent("fill",t)||Ent("stroke",t)),c||Ynt(a,u,l[u]);for(u in Object(Ue["e"])(r).forEach(e=>{const n=i.style&&i.style[e];for(const r in n)Ent(r,t)||Ynt(a,r,n[r])}),t=Object(Ue["l"])({},t),a)l=a[u],l.signal?(s=s||{})[u]=l:o[u]=l;return t.enter=Object(Ue["l"])(o,t.enter),s&&(t.update=Object(Ue["l"])(s,t.update)),t};function Ynt(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const Knt=t=>Object(Ue["F"])(t)?Object(Ue["W"])(t):t.signal?`(${t.signal})`:nrt(t);function Jnt(t){if(null!=t.gradient)return trt(t);let e=t.signal?`(${t.signal})`:t.color?Qnt(t.color):null!=t.field?nrt(t.field):void 0!==t.value?Object(Ue["W"])(t.value):void 0;return null!=t.scale&&(e=irt(t,e)),void 0===e&&(e=null),null!=t.exponent&&(e=`pow(${e},${ert(t.exponent)})`),null!=t.mult&&(e+="*"+ert(t.mult)),null!=t.offset&&(e+="+"+ert(t.offset)),t.round&&(e=`round(${e})`),e}const Znt=(t,e,n,r)=>`(${t}(${[e,n,r].map(Jnt).join(",")})+'')`;function Qnt(t){return t.c?Znt("hcl",t.h,t.c,t.l):t.h||t.s?Znt("hsl",t.h,t.s,t.l):t.l||t.a?Znt("lab",t.l,t.a,t.b):t.r||t.g||t.b?Znt("rgb",t.r,t.g,t.b):null}function trt(t){const e=[t.start,t.stop,t.count].map(t=>null==t?null:Object(Ue["W"])(t));while(e.length&&null==Object(Ue["S"])(e))e.pop();return e.unshift(Knt(t.gradient)),`gradient(${e.join(",")})`}function ert(t){return Object(Ue["D"])(t)?"("+Jnt(t)+")":t}function nrt(t){return rrt(Object(Ue["D"])(t)?t:{datum:t})}function rrt(t){let e,n,r;if(t.signal)e="datum",r=t.signal;else if(t.group||t.parent){n=Math.max(1,t.level||1),e="item";while(n-- >0)e+=".mark.group";t.parent?(r=t.parent,e+=".datum"):r=t.group}else t.datum?(e="datum",r=t.datum):Object(Ue["k"])("Invalid field reference: "+Object(Ue["W"])(t));return t.signal||(r=Object(Ue["F"])(r)?Object(Ue["V"])(r).map(Ue["W"]).join("]["):rrt(r)),e+"["+r+"]"}function irt(t,e){const n=Knt(t.scale);return null!=t.range?e=`lerp(_range(${n}), ${+t.range})`:(void 0!==e&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(1===+t.band?"":"*"+ert(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),null==e&&(e="0")),e}var art=function(t){let e="";return t.forEach(t=>{const n=Jnt(t);e+=t.test?`(${t.test})?${n}:`:n}),":"===Object(Ue["S"])(e)&&(e+="null"),e},ort=function(t,e,n,r,i,a){const o={};a=a||{},a.encoders={$encode:o},t=Xnt(t,e,n,r,i.config);for(const s in t)o[s]=srt(t[s],e,a,i);return a};function srt(t,e,n,r){const i={},a={};for(const o in t)null!=t[o]&&(i[o]=crt(urt(t[o]),r,n,a));return{$expr:{marktype:e,channels:i},$fields:Object.keys(a),$output:Object.keys(t)}}function urt(t){return Object(Ue["x"])(t)?art(t):Jnt(t)}function crt(t,e,n,r){const i=JZ(t,e);return i.$fields.forEach(t=>r[t]=1),Object(Ue["l"])(n,i.$params),i.$expr}const lrt="outer",frt=["value","update","init","react","bind"];function drt(t,e){Object(Ue["k"])(t+' for "outer" push: '+Object(Ue["W"])(e))}var hrt=function(t,e){const n=t.name;if(t.push===lrt)e.signals[n]||drt("No prior signal definition",n),frt.forEach(e=>{void 0!==t[e]&&drt("Invalid property ",e)});else{const r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}};function prt(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function mrt(t,e,n,r){return new prt(t,e,n,r)}function grt(t,e){return mrt("operator",t,e)}function brt(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function yrt(t,e){return e?{$field:t,$name:e}:{$field:t}}const vrt=yrt("key");function xrt(t,e){return{$compare:t,$order:e}}function wrt(t,e){const n={$key:t};return e&&(n.$flat=!0),n}const Ort="ascending",_rt="descending";function Art(t){return Object(Ue["D"])(t)?(t.order===_rt?"-":"+")+jrt(t.op,t.field):""}function jrt(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const krt="scope",Crt="view";function Ert(t){return t&&t.signal}function Srt(t){return t&&t.expr}function Drt(t){if(Ert(t))return!0;if(Object(Ue["D"])(t))for(const e in t)if(Drt(t[e]))return!0;return!1}function Frt(t,e){return null!=t?t:e}function Nrt(t){return t&&t.signal||t}const Trt="timer";function Mrt(t,e){const n=t.merge?Rrt:t.stream?$rt:t.type?Brt:Object(Ue["k"])("Invalid stream specification: "+Object(Ue["W"])(t));return n(t,e)}function Irt(t){return t===krt?Crt:t||Crt}function Rrt(t,e){const n=t.merge.map(t=>Mrt(t,e)),r=zrt({merge:n},t,e);return e.addStream(r).id}function $rt(t,e){const n=Mrt(t.stream,e),r=zrt({stream:n},t,e);return e.addStream(r).id}function Brt(t,e){let n;t.type===Trt?(n=e.event(Trt,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(Irt(t.source),t.type);const r=zrt({stream:n},t,e);return 1===Object.keys(r).length?n:e.addStream(r).id}function zrt(t,e,n){let r=e.between;return r&&(2!==r.length&&Object(Ue["k"])('Stream "between" parameter must have 2 entries: '+Object(Ue["W"])(e)),t.between=[Mrt(r[0],n),Mrt(r[1],n)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(Lrt(e.marktype,e.markname,e.markrole)),e.source===krt&&r.push("inScope(event.item)"),r.length&&(t.filter=JZ("("+r.join(")&&(")+")",n).$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}function Lrt(t,e,n){const r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}const Prt="view",Urt="[",Wrt="]",qrt="{",Vrt="}",Grt=":",Hrt=",",Xrt="@",Yrt=">",Krt=/[[\]{}]/,Jrt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Zrt,Qrt;function tit(t,e,n){return Zrt=e||Prt,Qrt=n||Jrt,rit(t.trim()).map(iit)}function eit(t){return Qrt[t]}function nit(t,e,n,r,i){const a=t.length;let o,s=0;for(;e<a;++e){if(o=t[e],!s&&o===n)return e;i&&i.indexOf(o)>=0?--s:r&&r.indexOf(o)>=0&&++s}return e}function rit(t){const e=[],n=t.length;let r=0,i=0;while(i<n)i=nit(t,i,Hrt,Urt+qrt,Wrt+Vrt),e.push(t.substring(r,i).trim()),r=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function iit(t){return"["===t[0]?ait(t):oit(t)}function ait(t){const e=t.length;let n,r=1;if(r=nit(t,r,Wrt,Urt,Wrt),r===e)throw"Empty between selector: "+t;if(n=rit(t.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+t;if(t=t.slice(r+1).trim(),t[0]!==Yrt)throw"Expected '>' after between selector: "+t;n=n.map(iit);const i=iit(t.slice(1).trim());return i.between?{between:n,stream:i}:(i.between=n,i)}function oit(t){const e={source:Zrt},n=[];let r,i,a=[0,0],o=0,s=0,u=t.length,c=0;if(t[u-1]===Vrt){if(c=t.lastIndexOf(qrt),!(c>=0))throw"Unmatched right brace: "+t;try{a=sit(t.substring(c+1,u-1))}catch(l){throw"Invalid throttle specification: "+t}t=t.slice(0,c).trim(),u=t.length,c=0}if(!u)throw t;if(t[0]===Xrt&&(o=++c),r=nit(t,c,Grt),r<u&&(n.push(t.substring(s,r).trim()),s=c=++r),c=nit(t,c,Urt),c===u)n.push(t.substring(s,u).trim());else if(n.push(t.substring(s,c).trim()),i=[],s=++c,s===u)throw"Unmatched left bracket: "+t;while(c<u){if(c=nit(t,c,Wrt),c===u)throw"Unmatched left bracket: "+t;if(i.push(t.substring(s,c).trim()),c<u-1&&t[++c]!==Urt)throw"Expected left bracket: "+t;s=++c}if(!(u=n.length)||Krt.test(n[u-1]))throw"Invalid event selector: "+t;return u>1?(e.type=n[1],o?e.markname=n[0].slice(1):eit(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],"!"===e.type.slice(-1)&&(e.consume=!0,e.type=e.type.slice(0,-1)),null!=i&&(e.filter=i),a[0]&&(e.throttle=a[0]),a[1]&&(e.debounce=a[1]),e}function sit(t){const e=t.split(Hrt);if(!t.length||e.length>2)throw t;return e.map(e=>{const n=+e;if(n!==n)throw t;return n})}const uit={code:"_.$value",ast:{type:"Identifier",value:"value"}};var cit=function(t,e,n){const r=t.encode,i={target:n};let a=t.events,o=t.update,s=[];a||Object(Ue["k"])("Signal update missing events specification."),Object(Ue["F"])(a)&&(a=tit(a,e.isSubscope()?krt:Crt)),a=Object(Ue["e"])(a).filter(t=>t.signal||t.scale?(s.push(t),0):1),s.length>1&&(s=[fit(s)]),a.length&&s.push(a.length>1?{merge:a}:a[0]),null!=r&&(o&&Object(Ue["k"])("Signal encode and update are mutually exclusive."),o="encode(item(),"+Object(Ue["W"])(r)+")"),i.update=Object(Ue["F"])(o)?JZ(o,e):null!=o.expr?JZ(o.expr,e):null!=o.value?o.value:null!=o.signal?{$expr:uit,$params:{$value:e.signalRef(o.signal)}}:Object(Ue["k"])("Invalid signal update specification."),t.force&&(i.options={force:!0}),s.forEach(t=>e.addUpdate(Object(Ue["l"])(lit(t,e),i)))};function lit(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):Mrt(t,e)}}function fit(t){return{signal:"["+t.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}var dit=function(t,e){const n=e.getSignal(t.name);let r=t.update;t.init&&(r?Object(Ue["k"])("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=JZ(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach(t=>cit(t,e,n.id))};const hit=t=>(e,n,r)=>mrt(t,n,e||void 0,r),pit=hit("aggregate"),mit=hit("axisticks"),git=hit("bound"),bit=hit("collect"),yit=hit("compare"),vit=hit("datajoin"),xit=hit("encode"),wit=hit("expression"),Oit=(hit("extent"),hit("facet")),_it=hit("field"),Ait=hit("key"),jit=hit("legendentries"),kit=hit("load"),Cit=hit("mark"),Eit=hit("multiextent"),Sit=hit("multivalues"),Dit=hit("overlap"),Fit=hit("params"),Nit=hit("prefacet"),Tit=hit("projection"),Mit=hit("proxy"),Iit=hit("relay"),Rit=hit("render"),$it=hit("scale"),Bit=hit("sieve"),zit=hit("sortitems"),Lit=hit("viewlayout"),Pit=hit("values");let Uit=0;const Wit={min:"min",max:"max",count:"sum"};function qit(t,e){const n=t.type||"linear";Oh(n)||Object(Ue["k"])("Unrecognized scale type: "+Object(Ue["W"])(n)),e.addScale(t.name,{type:n,domain:void 0})}function Vit(t,e){const n=e.getScale(t.name).params;let r;for(r in n.domain=Yit(t.domain,t,e),null!=t.range&&(n.range=sat(t,e,n)),null!=t.interpolate&&oat(t.interpolate,n),null!=t.nice&&(n.nice=aat(t.nice)),null!=t.bins&&(n.bins=iat(t.bins,e)),t)Object(Ue["s"])(n,r)||"name"===r||(n[r]=Git(t[r],e))}function Git(t,e){return Object(Ue["D"])(t)?t.signal?e.signalRef(t.signal):Object(Ue["k"])("Unsupported object: "+Object(Ue["W"])(t)):t}function Hit(t,e){return t.signal?e.signalRef(t.signal):t.map(t=>Git(t,e))}function Xit(t){Object(Ue["k"])("Can not find data set: "+Object(Ue["W"])(t))}function Yit(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(Object(Ue["x"])(t)?Kit:t.fields?Zit:Jit)(t,e,n);null==e.domainMin&&null==e.domainMax||Object(Ue["k"])("No scale domain defined for domainMin/domainMax to override.")}function Kit(t,e,n){return t.map(t=>Git(t,n))}function Jit(t,e,n){const r=n.getData(t.data);return r||Xit(t.data),jh(e.type)?r.valuesRef(n,t.field,eat(t.sort,!1)):Dh(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function Zit(t,e,n){const r=t.data,i=t.fields.reduce((t,e)=>(e=Object(Ue["F"])(e)?{data:r,field:e}:Object(Ue["x"])(e)||e.signal?Qit(e,n):e,t.push(e),t),[]);return(jh(e.type)?tat:Dh(e.type)?nat:rat)(t,n,i)}function Qit(t,e){const n="_:vega:_"+Uit++,r=bit({});if(Object(Ue["x"])(t))r.value={$ingest:t};else if(t.signal){const i="setdata("+Object(Ue["W"])(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,Bit({})]),{data:n,field:"data"}}function tat(t,e,n){const r=eat(t.sort,!0);let i,a;const o=n.map(t=>{const n=e.getData(t.data);return n||Xit(t.data),n.countsRef(e,t.field,r)}),s={groupby:vrt,pulse:o};r&&(i=r.op||"count",a=r.field?jrt(i,r.field):"count",s.ops=[Wit[i]],s.fields=[e.fieldRef(a)],s.as=[a]),i=e.add(pit(s));const u=e.add(bit({pulse:brt(i)}));return a=e.add(Pit({field:vrt,sort:e.sortRef(r),pulse:brt(u)})),brt(a)}function eat(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field&&t.op&&!Wit[t.op]&&Object(Ue["k"])("Multiple domain scales can not be sorted using "+t.op):Object(Ue["k"])("No field provided for sort aggregate op: "+t.op):Object(Ue["D"])(t)?t.field="key":t={field:"key"}),t}function nat(t,e,n){const r=n.map(t=>{const n=e.getData(t.data);return n||Xit(t.data),n.domainRef(e,t.field)});return brt(e.add(Sit({values:r})))}function rat(t,e,n){const r=n.map(t=>{const n=e.getData(t.data);return n||Xit(t.data),n.extentRef(e,t.field)});return brt(e.add(Eit({extents:r})))}function iat(t,e){return t.signal||Object(Ue["x"])(t)?Hit(t,e):e.objectProperty(t)}function aat(t){return Object(Ue["D"])(t)?{interval:Git(t.interval),step:Git(t.step)}:Git(t)}function oat(t,e){e.interpolate=Git(t.type||t),null!=t.gamma&&(e.interpolateGamma=Git(t.gamma))}function sat(t,e,n){const r=e.config.range;let i=t.range;if(i.signal)return e.signalRef(i.signal);if(Object(Ue["F"])(i)){if(r&&Object(Ue["s"])(r,i))return t=Object(Ue["l"])({},t,{range:r[i]}),sat(t,e,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=jh(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(Ue["k"])("Unrecognized scale range value: "+Object(Ue["W"])(i))}else{if(i.scheme)return n.scheme=Object(Ue["x"])(i.scheme)?Hit(i.scheme,e):Git(i.scheme,e),i.extent&&(n.schemeExtent=Hit(i.extent,e)),void(i.count&&(n.schemeCount=Git(i.count,e)));if(i.step)return void(n.rangeStep=Git(i.step,e));if(jh(t.type)&&!Object(Ue["x"])(i))return Yit(i,t,e);Object(Ue["x"])(i)||Object(Ue["k"])("Unsupported range type: "+Object(Ue["W"])(i))}return i.map(t=>(Object(Ue["x"])(t)?Hit:Git)(t,e))}var uat=function(t,e){const n=e.config.projection||{},r={};for(const i in t)"name"!==i&&(r[i]=cat(t[i],i,e));for(const i in n)null==r[i]&&(r[i]=cat(n[i],i,e));e.addProjection(t.name,r)};function cat(t,e,n){return Object(Ue["x"])(t)?t.map(t=>cat(t,e,n)):Object(Ue["D"])(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:Object(Ue["k"])("Unsupported parameter object: "+Object(Ue["W"])(t)):t}const lat="top",fat="left",dat="right",hat="bottom",pat="center",mat="vertical",gat="start",bat="middle",yat="end",vat="index",xat="label",wat="offset",Oat="perc",_at="perc2",Aat="value",jat="guide-label",kat="guide-title",Cat="group-title",Eat="group-subtitle",Sat="symbol",Dat="gradient",Fat="discrete",Nat="size",Tat="shape",Mat="fill",Iat="stroke",Rat="strokeWidth",$at="strokeDash",Bat="opacity",zat=[Nat,Tat,Mat,Iat,Rat,$at,Bat],Lat={name:1,style:1,interactive:1},Pat={value:0},Uat={value:1},Wat="group",qat="rect",Vat="rule",Gat="symbol",Hat="text";var Xat=function(t){return t.type=Wat,t.interactive=t.interactive||!1,t};function Yat(t,e){const n=(n,r)=>Frt(t[n],Frt(e[n],r));return n.isVertical=n=>mat===Frt(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>Frt(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>Frt(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>Frt(t.columns,Frt(e.columns,+n.isVertical(!0))),n}function Kat(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function Jat(t,e,n){const r=e.config.style[n];return r&&r[t]}function Zat(t,e,n){return`item.anchor === '${gat}' ? ${t} : item.anchor === '${yat}' ? ${e} : ${n}`}const Qat=Zat(Object(Ue["W"])(fat),Object(Ue["W"])(dat),Object(Ue["W"])(pat));function tot(t){const e=t("tickBand");let n,r,i=t("tickOffset");return e?e.signal?(n={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${e.signal}) === 'extent'`},Object(Ue["D"])(i)||(i={signal:`(${e.signal}) === 'extent' ? 0 : ${i}`})):"extent"===e?(n=1,r=!0,i=0):(n=.5,r=!1):(n=t("bandPosition"),r=t("tickExtra")),{extra:r,band:n,offset:i}}function eot(t,e){return e?t?Object(Ue["D"])(t)?Object.assign({},t,{offset:eot(t.offset,e)}):{value:t,offset:e}:e:t}var not=function(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=Cnt(t.encode,e,Lat)):t.interactive=!1,t},rot=function(t,e,n,r){const i=Yat(t,n),a=i.isVertical(),o=i.gradientThickness(),s=i.gradientLength();let u,c,l,f,d;a?(c=[0,1],l=[0,0],f=o,d=s):(c=[0,0],l=[1,0],f=s,d=o);const h={enter:u={opacity:Pat,x:Pat,y:Pat,width:Ant(f),height:Ant(d)},update:Object(Ue["l"])({},u,{opacity:Uat,fill:{gradient:e,start:c,stop:l}}),exit:{opacity:Pat}};return knt(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),not({type:qat,role:Pnt,encode:h},r)},iot=function(t,e,n,r,i){const a=Yat(t,n),o=a.isVertical(),s=a.gradientThickness(),u=a.gradientLength();let c,l,f,d,h="";o?(c="y",f="y2",l="x",d="width",h="1-"):(c="x",f="x2",l="y",d="height");const p={opacity:Pat,fill:{scale:e,field:Aat}};p[c]={signal:h+"datum."+Oat,mult:u},p[l]=Pat,p[f]={signal:h+"datum."+_at,mult:u},p[d]=Ant(s);const m={enter:p,update:Object(Ue["l"])({},p,{opacity:Uat}),exit:{opacity:Pat}};return knt(m,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),not({type:qat,role:znt,key:Aat,from:i,encode:m},r)};const aot=`datum.${Oat}<=0?"${fat}":datum.${Oat}>=1?"${dat}":"${pat}"`,oot=`datum.${Oat}<=0?"${hat}":datum.${Oat}>=1?"${lat}":"${bat}"`;var sot=function(t,e,n,r){const i=Yat(t,e),a=i.isVertical(),o=Ant(i.gradientThickness()),s=i.gradientLength();let u,c,l,f,d=i("labelOverlap"),h="";const p={enter:u={opacity:Pat},update:c={opacity:Uat,text:{field:xat}},exit:{opacity:Pat}};return knt(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Frt(t.labelLimit,e.gradientLabelLimit)}),a?(u.align={value:"left"},u.baseline=c.baseline={signal:oot},l="y",f="x",h="1-"):(u.align=c.align={signal:aot},u.baseline={value:"top"},l="x",f="y"),u[l]=c[l]={signal:h+"datum."+Oat,mult:s},u[f]=c[f]=o,o.offset=Frt(t.labelOffset,e.gradientLabelOffset)||0,d=d?{separation:i("labelSeparation"),method:d,order:"datum."+vat}:void 0,not({type:Hat,role:Unt,style:jat,key:Aat,from:r,encode:p,overlap:d},n)},uot=function(t,e,n,r,i){const a=Yat(t,e),o=n.entries,s=!(!o||!o.interactive),u=o?o.name:void 0,c=a("clipHeight"),l=a("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${wat} : datum.${Nat}`,h=c?Ant(c):{field:Nat},p="datum."+vat,m=`max(1, ${i})`;let g,b,y,v,x;h.mult=.5,g={enter:b={opacity:Pat,x:{signal:d,mult:.5,offset:l},y:h},update:y={opacity:Uat,x:b.x,y:b.y},exit:{opacity:Pat}};let w=null,O=null;t.fill||(w=e.symbolBaseFillColor,O=e.symbolBaseStrokeColor),knt(g,{fill:a("symbolFillColor",w),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",O),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),zat.forEach(e=>{t[e]&&(y[e]=b[e]={scale:t[e],field:Aat})});const _=not({type:Gat,role:Wnt,key:Aat,from:f,clip:!!c||void 0,encode:g},n.symbols),A=Ant(l);A.offset=a("labelOffset"),g={enter:b={opacity:Pat,x:{signal:d,offset:A},y:h},update:y={opacity:Uat,text:{field:xat},x:b.x,y:b.y},exit:{opacity:Pat}},knt(g,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const j=not({type:Hat,role:Unt,style:jat,key:Aat,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!c},width:Pat,height:c?Ant(c):Pat,opacity:Pat},exit:{opacity:Pat},update:y={opacity:Uat,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(v=`ceil(item.mark.items.length / ${m})`,y.row.signal=`${p}%${v}`,y.column.signal=`floor(${p} / ${v})`,x={field:["row",p]}):(y.row.signal=`floor(${p} / ${m})`,y.column.signal=`${p} % ${m}`,x={field:p}),y.column.signal=`(${i})?${y.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:vat}},Xat({role:Fnt,from:r,encode:Cnt(g,o,Lat),marks:[_,j],name:u,interactive:s,sort:x})};function cot(t,e){const n=Yat(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const lot='item.orient === "left"',fot='item.orient === "right"',dot=`(${lot} || ${fot})`,hot="datum.vgrad && "+dot,pot=Zat('"top"','"bottom"','"middle"'),mot=Zat('"right"','"left"','"center"'),got=`datum.vgrad && ${fot} ? (${mot}) : (${dot} && !(datum.vgrad && ${lot})) ? "left" : ${Qat}`,bot=`item._anchor || (${dot} ? "middle" : "start")`,yot=`${hot} ? (${lot} ? -90 : 90) : 0`,vot=`${dot} ? (datum.vgrad ? (${fot} ? "bottom" : "top") : ${pot}) : "top"`;var xot=function(t,e,n,r){const i=Yat(t,e),a={enter:{opacity:Pat},update:{opacity:Uat,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Pat}};return knt(a,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:bot},angle:{signal:yot},align:{signal:got},baseline:{signal:vot},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),not({type:Hat,role:qnt,style:kat,from:r,encode:a},n)},wot=function(t,e){let n;return Object(Ue["D"])(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+Oot(t.path)+")":t.sphere&&(n="geoShape("+Oot(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t};function Oot(t){return Object(Ue["D"])(t)&&t.signal?t.signal:Object(Ue["W"])(t)}var _ot=function(t){const e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")&&e.indexOf("title")?t.type===Wat?Fnt:e||Snt:e},Aot=function(t){return{marktype:t.type,name:t.name||void 0,role:t.role||_ot(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}},jot=function(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t},kot=function(t,e){const n=Hr(t.type);n||Object(Ue["k"])("Unrecognized transform type: "+Object(Ue["W"])(t.type));const r=mrt(n.type.toLowerCase(),null,Cot(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r};function Cot(t,e,n){const r={},i=t.params.length;for(let a=0;a<i;++a){const i=t.params[a];r[i.name]=Eot(i,e,n)}return r}function Eot(t,e,n){const r=t.type,i=e[t.name];return"index"===r?Dot(t,e,n):void 0!==i?"param"===r?Fot(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!Ert(i)?i.map(e=>Sot(t,e,n)):Sot(t,i,n):void(t.required&&Object(Ue["k"])("Missing required "+Object(Ue["W"])(e.type)+" parameter: "+Object(Ue["W"])(t.name)))}function Sot(t,e,n){const r=t.type;if(Ert(e))return Rot(r)?Object(Ue["k"])("Expression references can not be signals."):$ot(r)?n.fieldRef(e):Bot(r)?n.compareRef(e):n.signalRef(e.signal);{const i=t.expr||$ot(r);return i&&Tot(e)?n.exprRef(e.expr,e.as):i&&Mot(e)?yrt(e.field,e.as):Rot(r)?JZ(e,n):Iot(r)?brt(n.getData(e).values):$ot(r)?yrt(e):Bot(r)?n.compareRef(e):e}}function Dot(t,e,n){return Object(Ue["F"])(e.from)||Object(Ue["k"])('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function Fot(t,e,n){const r=e[t.name];return t.array?(Object(Ue["x"])(r)||Object(Ue["k"])("Expected an array of sub-parameters. Instead: "+Object(Ue["W"])(r)),r.map(e=>Not(t,e,n))):Not(t,r,n)}function Not(t,e,n){const r=t.params.length;let i;for(let o=0;o<r;++o){i=t.params[o];for(const t in i.key)if(i.key[t]!==e[t]){i=null;break}if(i)break}i||Object(Ue["k"])("Unsupported parameter: "+Object(Ue["W"])(e));const a=Object(Ue["l"])(Cot(i,e,n),i.key);return brt(n.add(Fit(a)))}const Tot=t=>t&&t.expr,Mot=t=>t&&t.field,Iot=t=>"data"===t,Rot=t=>"expr"===t,$ot=t=>"field"===t,Bot=t=>"compare"===t;var zot=function(t,e,n){let r,i,a,o,s;return t?(r=t.facet)&&(e||Object(Ue["k"])("Only group marks can be faceted."),null!=r.field?o=s=Lot(r,n):(t.data?s=brt(n.getData(t.data).aggregate):(a=kot(Object(Ue["l"])({type:"aggregate",groupby:Object(Ue["e"])(r.groupby)},r.aggregate),n),a.params.key=n.keyRef(r.groupby),a.params.pulse=Lot(r,n),o=s=brt(n.add(a))),i=n.keyRef(r.groupby,!0))):o=brt(n.add(bit(null,[{}]))),o||(o=Lot(t,n)),{key:i,pulse:o,parent:s}};function Lot(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:brt(e.getData(t.data).output)}function Pot(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Uot(t){return Object(Ue["F"])(t)?t:null}function Wot(t,e,n){const r=jrt(n.op,n.field);let i;if(e.ops){for(let a=0,o=e.as.length;a<o;++a)if(e.as[a]===r)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((i=n.op.signal)?t.signalRef(i):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(r))}function qot(t,e,n,r,i,a,o){const s=e[n]||(e[n]={}),u=Art(a);let c,l,f=Uot(i);if(null!=f&&(t=e.scope,f+=u?"|"+u:"",c=s[f]),!c){const n=a?{field:vrt,pulse:e.countsRef(t,i,a)}:{field:t.fieldRef(i),pulse:brt(e.output)};u&&(n.sort=t.sortRef(a)),l=t.add(mrt(r,void 0,n)),o&&(e.index[i]=l),c=brt(l),null!=f&&(s[f]=c)}return c}Pot.fromEntries=function(t,e){const n=e.length,r=e[n-1],i=e[n-2];let a=e[0],o=null,s=1;for(a&&"load"===a.type&&(a=e[1]),t.add(e[0]);s<n;++s)e[s].params.pulse=brt(e[s-1]),t.add(e[s]),"aggregate"===e[s].type&&(o=e[s]);return new Pot(t,a,i,r,o)},Pot.prototype={countsRef(t,e,n){const r=this,i=r.counts||(r.counts={}),a=Uot(e);let o,s,u;return null!=a&&(t=r.scope,o=i[a]),o?n&&n.field&&Wot(t,o.agg.params,n):(u={groupby:t.fieldRef(e,"key"),pulse:brt(r.output)},n&&n.field&&Wot(t,u,n),s=t.add(pit(u)),o=t.add(bit({pulse:brt(s)})),o={agg:s,ref:brt(o)},null!=a&&(i[a]=o)),o.ref},tuplesRef(){return brt(this.values)},extentRef(t,e){return qot(t,this,"extent","extent",e,!1)},domainRef(t,e){return qot(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return qot(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return qot(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return qot(t,this,"indata","tupleindex",e,!0,!0)}};var Vot=function(t,e,n){const r=t.from.facet,i=r.name,a=Lot(r,e);let o;r.name||Object(Ue["k"])("Facet must have a name: "+Object(Ue["W"])(r)),r.data||Object(Ue["k"])("Facet must reference a data set: "+Object(Ue["W"])(r)),r.field?o=e.add(Nit({field:e.fieldRef(r.field),pulse:a})):r.groupby?o=e.add(Oit({key:e.keyRef(r.groupby),group:brt(e.proxy(n.parent)),pulse:a})):Object(Ue["k"])("Facet must specify groupby or field: "+Object(Ue["W"])(r));const s=e.fork(),u=s.add(bit()),c=s.add(Bit({pulse:brt(u)}));s.addData(i,new Pot(s,u,u,c)),s.addSignal("parent",null),o.params.subflow={$subflow:s.parse(t).toRuntime()}},Got=function(t,e,n){const r=e.add(Nit({pulse:n.pulse})),i=e.fork();i.add(Bit()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(t).toRuntime()}},Hot=function(t,e,n){const r=t.remove,i=t.insert,a=t.toggle,o=t.modify,s=t.values,u=e.add(grt()),c="if("+t.trigger+',modify("'+n+'",'+[i,r,a,o,s].map(t=>null==t?"null":t).join(",")+"),0)",l=JZ(c,e);u.update=l.$expr,u.params=l.$params},Xot=function(t,e){const n=_ot(t),r=t.type===Wat,i=t.from&&t.from.facet,a=t.overlap;let o,s,u,c,l,f,d,h=t.layout||n===Fnt||n===Dnt;const p=n===Snt||h||i,m=zot(t.from,r,e);s=e.add(vit({key:m.key||(t.key?yrt(t.key):void 0),pulse:m.pulse,clean:!r}));const g=brt(s);s=u=e.add(bit({pulse:g})),s=e.add(Cit({markdef:Aot(t),interactive:jot(t.interactive,e),clip:wot(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:brt(s)}));const b=brt(s);s=c=e.add(xit(ort(t.encode,t.type,n,t.style,e,{mod:!1,pulse:b}))),s.params.parent=e.encode(),t.transform&&t.transform.forEach(t=>{const n=kot(t,e),r=n.metadata;(r.generates||r.changes)&&Object(Ue["k"])("Mark transforms should not generate new data."),r.nomod||(c.params.mod=!0),n.params.pulse=brt(s),e.add(s=n)}),t.sort&&(s=e.add(zit({sort:e.compareRef(t.sort),pulse:brt(s)})));const y=brt(s);(i||h)&&(h=e.add(Lit({layout:e.objectProperty(t.layout),legends:e.legends,mark:b,pulse:y})),f=brt(h));const v=e.add(git({mark:b,pulse:f||y}));d=brt(v),r&&(p&&(o=e.operators,o.pop(),h&&o.pop()),e.pushState(y,f||d,g),i?Vot(t,e,m):p?Got(t,e,m):e.parse(t),e.popState(),p&&(h&&o.push(h),o.push(v))),a&&(d=Yot(a,d,e));const x=e.add(Rit({pulse:d})),w=e.add(Bit({pulse:brt(x)},void 0,e.parent()));null!=t.name&&(l=t.name,e.addData(l,new Pot(e,u,x,w)),t.on&&t.on.forEach(t=>{(t.insert||t.remove||t.toggle)&&Object(Ue["k"])("Marks only support modify triggers."),Hot(t,e,l)}))};function Yot(t,e,n){const r=t.method,i=t.bound,a=t.separation,o={separation:Ert(a)?n.signalRef(a.signal):a,method:Ert(r)?n.signalRef(r.signal):r,pulse:e};if(t.order&&(o.sort=n.compareRef({field:t.order})),i){const t=i.tolerance;o.boundTolerance=Ert(t)?n.signalRef(t.signal):+t,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return brt(n.add(Dit(o)))}var Kot=function(t,e){const n=e.config.legend,r=t.encode||{},i=Yat(t,n),a=r.legend||{},o=a.name||void 0,s=a.interactive,u=a.style,c={};let l,f,d,h=0;zat.forEach(e=>t[e]?(c[e]=t[e],h=h||t[e]):0),h||Object(Ue["k"])("Missing valid scale for legend.");const p=Jot(t,e.scaleType(h)),m={title:null!=t.title,scales:c,type:p,vgrad:"symbol"!==p&&i.isVertical()},g=brt(e.add(bit(null,[m]))),b={enter:{x:{value:0},y:{value:0}}},y=brt(e.add(jit(f={type:p,scale:e.scaleRef(h),count:e.objectProperty(i("tickCount")),limit:e.property(i("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return p===Dat?(d=[rot(t,h,n,r.gradient),sot(t,n,r.labels,y)],f.count=f.count||e.signalRef(`max(2,2*floor((${Nrt(i.gradientLength())})/100))`)):p===Fat?d=[iot(t,h,n,r.gradient,y),sot(t,n,r.labels,y)]:(l=cot(t,n),d=[uot(t,n,r,y,Nrt(l.columns))],f.size=tst(t,e,d[0].marks)),d=[Xat({role:Lnt,from:g,encode:b,marks:d,layout:l,interactive:s})],m.title&&d.push(xot(t,n,r.title,g)),Xot(Xat({role:Bnt,from:g,encode:Cnt(Qot(i,t,n),a,Lat),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:s,style:u}),e)};function Jot(t,e){let n=t.type||Sat;return t.type||1!==Zot(t)||!t.fill&&!t.stroke||(n=Ah(e)?Dat:kh(e)?Fat:Sat),n!==Dat?n:kh(e)?Fat:Dat}function Zot(t){return zat.reduce((e,n)=>e+(t[n]?1:0),0)}function Qot(t,e,n){const r={enter:{},update:{}};return knt(r,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),r}function tst(t,e,n){const r=Nrt(est("size",t,n)),i=Nrt(est("strokeWidth",t,n)),a=Nrt(nst(n[1].encode,e,jat));return JZ(`max(ceil(sqrt(${r})+${i}),${a})`,e)}function est(t,e,n){return e[t]?`scale("${e[t]}",datum)`:Kat(t,n[0].encode)}function nst(t,e,n){return Kat("fontSize",t)||Jat("fontSize",e,n)}const rst=`item.orient==="${fat}"?-90:item.orient==="${dat}"?90:0`;var ist=function(t,e){t=Object(Ue["F"])(t)?{text:t}:t;const n=Yat(t,e.config.title),r=t.encode||{},i=r.group||{},a=i.name||void 0,o=i.interactive,s=i.style,u=[],c={},l=brt(e.add(bit(null,[c])));return u.push(sst(t,n,ast(t),l)),t.subtitle&&u.push(ust(t,n,r.subtitle,l)),Xot(Xat({role:Vnt,from:l,encode:ost(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:o,style:s}),e)};function ast(t){const e=t.encode;return e&&e.title||Object(Ue["l"])({name:t.name,interactive:t.interactive,style:t.style},e)}function ost(t,e){const n={enter:{},update:{}};return knt(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:Qat},angle:{signal:rst},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),Cnt(n,e,Lat)}function sst(t,e,n,r){const i={value:0},a=t.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return knt(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),not({type:Hat,role:Gnt,style:Cat,from:r,encode:o},n)}function ust(t,e,n,r){const i={value:0},a=t.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return knt(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),not({type:Hat,role:Hnt,style:Eat,from:r,encode:o},n)}function cst(t,e){const n=[];t.transform&&t.transform.forEach(t=>{n.push(kot(t,e))}),t.on&&t.on.forEach(n=>{Hot(n,e,t.name)}),e.addDataPipeline(t.name,lst(t,e,n))}function lst(t,e,n){const r=[];let i,a,o,s,u,c=null,l=!1,f=!1;for(t.values?Drt(t.values)||Drt(t.format)?(r.push(dst(e,t)),r.push(c=fst())):r.push(c=fst({$ingest:t.values,$format:t.format})):t.url?Drt(t.url)||Drt(t.format)?(r.push(dst(e,t)),r.push(c=fst())):r.push(c=fst({$request:t.url,$format:t.format})):t.source&&(c=i=Object(Ue["e"])(t.source).map(t=>brt(e.getData(t).output)),r.push(null)),a=0,o=n.length;a<o;++a)s=n[a],u=s.metadata,c||u.source||r.push(c=fst()),r.push(s),u.generates&&(f=!0),u.modifies&&!f&&(l=!0),u.source?c=s:u.changes&&(c=null);return i&&(o=i.length-1,r[0]=Iit({derive:l,pulse:o?i:i[0]}),(l||o)&&r.splice(1,0,fst())),c||r.push(fst()),r.push(Bit({})),r}function fst(t){const e=bit({},t);return e.metadata={source:!0},e}function dst(t,e){return kit({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const hst=t=>t===hat||t===lat,pst=(t,e,n)=>Ert(t)?wst(t.signal,e,n):t===fat||t===lat?e:n,mst=(t,e,n)=>Ert(t)?vst(t.signal,e,n):hst(t)?e:n,gst=(t,e,n)=>Ert(t)?xst(t.signal,e,n):hst(t)?n:e,bst=(t,e,n)=>Ert(t)?Ost(t.signal,e,n):t===lat?{value:e}:{value:n},yst=(t,e,n)=>Ert(t)?_st(t.signal,e,n):t===dat?{value:e}:{value:n},vst=(t,e,n)=>Ast(`${t} === '${lat}' || ${t} === '${hat}'`,e,n),xst=(t,e,n)=>Ast(`${t} !== '${lat}' && ${t} !== '${hat}'`,e,n),wst=(t,e,n)=>kst(`${t} === '${fat}' || ${t} === '${lat}'`,e,n),Ost=(t,e,n)=>kst(`${t} === '${lat}'`,e,n),_st=(t,e,n)=>kst(`${t} === '${dat}'`,e,n),Ast=(t,e,n)=>(e=null!=e?Ant(e):e,n=null!=n?Ant(n):n,jst(e)&&jst(n)?(e=e?e.signal||Object(Ue["W"])(e.value):null,n=n?n.signal||Object(Ue["W"])(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[Object(Ue["l"])({test:t},e)].concat(n||[])),jst=t=>null==t||1===Object.keys(t).length,kst=(t,e,n)=>({signal:`${t} ? (${Est(e)}) : (${Est(n)})`}),Cst=(t,e,n,r,i)=>({signal:(null!=r?`${t} === '${fat}' ? (${Est(r)}) : `:"")+(null!=n?`${t} === '${hat}' ? (${Est(n)}) : `:"")+(null!=i?`${t} === '${dat}' ? (${Est(i)}) : `:"")+(null!=e?`${t} === '${lat}' ? (${Est(e)}) : `:"")+"(null)"}),Est=t=>Ert(t)?t.signal:null==t?null:Object(Ue["W"])(t),Sst=(t,e)=>0===e?0:Ert(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},Dst=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function Fst(t,e,n,r){let i;if(e&&Object(Ue["s"])(e,t))return e[t];if(Object(Ue["s"])(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return r[kat][i]}if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return r[jat][i]}return null}function Nst(t){const e={};for(const n of t)if(n)for(const t in n)e[t]=1;return Object.keys(e)}var Tst=function(t,e){var n,r,i,a=e.config,o=a.style,s=a.axis,u="band"===e.scaleType(t.scale)&&a.axisBand,c=t.orient;if(Ert(c)){const t=Nst([a.axisX,a.axisY]),e=Nst([a.axisTop,a.axisBottom,a.axisLeft,a.axisRight]);for(i of(n={},t))n[i]=mst(c,Fst(i,a.axisX,s,o),Fst(i,a.axisY,s,o));for(i of(r={},e))r[i]=Cst(c.signal,Fst(i,a.axisTop,s,o),Fst(i,a.axisBottom,s,o),Fst(i,a.axisLeft,s,o),Fst(i,a.axisRight,s,o))}else n=c===lat||c===hat?a.axisX:a.axisY,r=a["axis"+c[0].toUpperCase()+c.slice(1)];var l=n||r||u?Object(Ue["l"])({},s,n,r,u):s;return l},Mst=function(t,e,n,r){const i=Yat(t,e),a=t.orient;let o,s;const u={enter:o={opacity:Pat},update:s={opacity:Uat},exit:{opacity:Pat}};knt(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const c=Ist(t,0),l=Ist(t,1);return o.x=s.x=mst(a,c,Pat),o.x2=s.x2=mst(a,l),o.y=s.y=gst(a,c,Pat),o.y2=s.y2=gst(a,l),not({type:Vat,role:Tnt,from:r,encode:u},n)};function Ist(t,e){return{scale:t.scale,range:e}}var Rst=function(t,e,n,r,i){const a=Yat(t,e),o=t.orient,s=t.gridScale,u=pst(o,1,-1),c=$st(t.offset,u);let l,f,d;const h={enter:l={opacity:Pat},update:d={opacity:Uat},exit:f={opacity:Pat}};knt(h,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const p={scale:t.scale,field:Aat,band:i.band,extra:i.extra,offset:i.offset,round:a("tickRound")},m=mst(o,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:u,offset:c}:{value:0,offset:c},b=s?{scale:s,range:1,mult:u,offset:c}:Object(Ue["l"])(m,{mult:u,offset:c});return l.x=d.x=mst(o,p,g),l.y=d.y=gst(o,p,g),l.x2=d.x2=gst(o,b),l.y2=d.y2=mst(o,b),f.x=mst(o,p),f.y=gst(o,p),not({type:Vat,role:Mnt,key:Aat,from:r,encode:h},n)};function $st(t,e){if(1===e);else if(Object(Ue["D"])(t)){let n=t=Object(Ue["l"])({},t);while(null!=n.mult){if(!Object(Ue["D"])(n.mult))return n.mult=Ert(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n=n.mult=Object(Ue["l"])({},n.mult)}n.mult=e}else t=Ert(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);return t}var Bst=function(t,e,n,r,i,a){const o=Yat(t,e),s=t.orient,u=pst(s,-1,1);let c,l,f;const d={enter:c={opacity:Pat},update:f={opacity:Uat},exit:l={opacity:Pat}};knt(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Ant(i);h.mult=u;const p={scale:t.scale,field:Aat,band:a.band,extra:a.extra,offset:a.offset,round:o("tickRound")};return f.y=c.y=mst(s,Pat,p),f.y2=c.y2=mst(s,h),l.x=mst(s,p),f.x=c.x=gst(s,Pat,p),f.x2=c.x2=gst(s,h),l.y=gst(s,p),not({type:Vat,role:Rnt,key:Aat,from:r,encode:d},n)};function zst(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}var Lst=function(t,e,n,r,i,a){const o=Yat(t,e),s=t.orient,u=t.scale,c=pst(s,-1,1),l=Nrt(o("labelFlush")),f=Nrt(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p,m=0===l||!!l;const g=Ant(i);g.mult=c,g.offset=Ant(o("labelPadding")||0),g.offset.mult=c;const b={scale:u,field:Aat,band:.5,offset:eot(a.offset,o("labelOffset"))},y=mst(s,m?zst(u,l,'"left"','"right"','"center"'):{value:"center"},yst(s,"left","right")),v=mst(s,bst(s,"bottom","top"),m?zst(u,l,'"top"','"bottom"','"middle"'):{value:"middle"}),x=zst(u,l,`-(${f})`,f,0);m=m&&f;const w={opacity:Pat,x:mst(s,b,g),y:gst(s,b,g)},O={enter:w,update:p={opacity:Uat,text:{field:xat},x:w.x,y:w.y,align:y,baseline:v},exit:{opacity:Pat,x:w.x,y:w.y}};knt(O,{dx:!d&&m?mst(s,x):null,dy:!h&&m?gst(s,x):null}),knt(O,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const _=o("labelBound");let A=o("labelOverlap");return A=A||_?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:_?{scale:u,orient:s,tolerance:_}:null}:void 0,p.align!==y&&(p.align=Dst(p.align,y)),p.baseline!==v&&(p.baseline=Dst(p.baseline,v)),not({type:Hat,role:Int,style:jat,key:Aat,from:r,encode:O,overlap:A},n)},Pst=function(t,e,n,r){const i=Yat(t,e),a=t.orient,o=pst(a,-1,1);let s,u;const c={enter:s={opacity:Pat,anchor:Ant(i("titleAnchor",null)),align:{signal:Qat}},update:u=Object(Ue["l"])({},s,{opacity:Uat,text:Ant(t.title)}),exit:{opacity:Pat}},l={signal:`lerp(range("${t.scale}"), ${Zat(0,1,.5)})`};return u.x=mst(a,l),u.y=gst(a,l),s.angle=mst(a,Pat,Sst(o,90)),s.baseline=mst(a,bst(a,hat,lat),{value:hat}),u.angle=s.angle,u.baseline=s.baseline,knt(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Ust(i,a,c,n),c.update.align=Dst(c.update.align,s.align),c.update.angle=Dst(c.update.angle,s.angle),c.update.baseline=Dst(c.update.baseline,s.baseline),not({type:Hat,role:$nt,style:kat,from:r,encode:c},n)};function Ust(t,e,n,r){const i=(t,e)=>null!=t?(n.update[e]=Dst(Ant(t),n.update[e]),!1):!Ent(e,r),a=i(t("titleX"),"x"),o=i(t("titleY"),"y");n.enter.auto=o===a?Ant(o):mst(e,Ant(o),Ant(a))}var Wst=function(t,e){const n=Tst(t,e),r=t.encode||{},i=r.axis||{},a=i.name||void 0,o=i.interactive,s=i.style,u=Yat(t,n),c=tot(u),l={scale:t.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:null!=t.title},f=brt(e.add(bit({},[l]))),d=brt(e.add(mit({scale:e.scaleRef(t.scale),extra:e.property(c.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),h=[];let p;return l.grid&&h.push(Rst(t,n,r.grid,d,c)),l.ticks&&(p=u("tickSize"),h.push(Bst(t,n,r.ticks,d,p,c))),l.labels&&(p=l.ticks?p:0,h.push(Lst(t,n,r.labels,d,p,c))),l.domain&&h.push(Mst(t,n,r.domain,f)),l.title&&h.push(Pst(t,n,r.title,f)),Xot(Xat({role:Nnt,from:f,encode:Cnt(qst(u,t),i,Lat),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:a,interactive:o,style:s}),e)};function qst(t,e){const n={enter:{},update:{}};return knt(n,{orient:t("orient"),offset:t("offset")||0,position:Frt(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n}var Vst=function(t,e,n){const r=Object(Ue["e"])(t.signals),i=Object(Ue["e"])(t.scales);return n||r.forEach(t=>hrt(t,e)),Object(Ue["e"])(t.projections).forEach(t=>uat(t,e)),i.forEach(t=>qit(t,e)),Object(Ue["e"])(t.data).forEach(t=>cst(t,e)),i.forEach(t=>Vit(t,e)),(n||r).forEach(t=>dit(t,e)),Object(Ue["e"])(t.axes).forEach(t=>Wst(t,e)),Object(Ue["e"])(t.marks).forEach(t=>Xot(t,e)),Object(Ue["e"])(t.legends).forEach(t=>Kot(t,e)),t.title&&ist(t.title,e),e.parseLambdas(),e};const Gst=t=>Cnt({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function Hst(t,e){const n=e.config,r=brt(e.root=e.add(grt())),i=Yst(t,n);i.forEach(t=>hrt(t,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const a=e.add(bit()),o=e.add(xit(ort(Gst(t.encode),Wat,Dnt,t.style,e,{pulse:brt(a)}))),s=e.add(Lit({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:r,pulse:brt(o)}));e.operators.pop(),e.pushState(brt(o),brt(s),null),Vst(t,e,i),e.operators.push(s);let u=e.add(git({mark:r,pulse:brt(s)}));return u=e.add(Rit({pulse:brt(u)})),u=e.add(Bit({pulse:brt(u)})),e.addData("root",new Pot(e,a,a,u)),e}function Xst(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function Yst(t,e){const n=n=>Frt(t[n],e[n]),r=[Xst("background",n("background")),Xst("autosize",xnt(n("autosize"))),Xst("padding",_nt(n("padding"))),Xst("width",n("width")||0),Xst("height",n("height")||0)],i=r.reduce((t,e)=>(t[e.name]=e,t),{}),a={};return Object(Ue["e"])(t.signals).forEach(t=>{Object(Ue["s"])(i,t.name)?t=Object(Ue["l"])(i[t.name],t):r.push(t),a[t.name]=t}),Object(Ue["e"])(e.signals).forEach(t=>{Object(Ue["s"])(a,t.name)||Object(Ue["s"])(i,t.name)||r.push(t)}),r}function Kst(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Jst(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function Zst(t){return(Object(Ue["x"])(t)?Qst:tut)(t)}function Qst(t){const e=t.length;let n="[";for(let r=0;r<e;++r){const e=t[r];n+=(r>0?",":"")+(Object(Ue["D"])(e)?e.signal||Zst(e):Object(Ue["W"])(e))}return n+"]"}function tut(t){let e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+Object(Ue["W"])(e)+":"+(Object(Ue["D"])(n)?n.signal||Zst(n):Object(Ue["W"])(n));return r+"}"}Kst.prototype=Jst.prototype={parse(t){return Vst(t,this)},fork(){return new Jst(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof prt?brt(t):t;return this.add(Mit({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){let r,i;t&&(r=t.data||(t.data={}),i=r[e]||(r[e]=[]),i.push(n))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const r in e.index)n(e.index[r],t,"index:"+r)}return this},pushState(t,e,n){this._encode.push(brt(this.add(Bit({pulse:t})))),this._parent.push(e),this._lookup.push(n?brt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Object(Ue["S"])(this._parent)},encode(){return Object(Ue["S"])(this._encode)},lookup(){return Object(Ue["S"])(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(Object(Ue["F"])(t))return yrt(t,e);t.signal||Object(Ue["k"])("Unsupported field reference: "+Object(Ue["W"])(t));const n=t.signal;let r=this.field[n];if(!r){const t={name:this.signalRef(n)};e&&(t.as=e),this.field[n]=r=brt(this.add(_it(t)))}return r},compareRef(t){let e=!1;const n=t=>Ert(t)?(e=!0,this.signalRef(t.signal)):Srt(t)?(e=!0,this.exprRef(t.expr)):t,r=Object(Ue["e"])(t.field).map(n),i=Object(Ue["e"])(t.order).map(n);return e?brt(this.add(yit({fields:r,orders:i}))):xrt(r,i)},keyRef(t,e){let n=!1;const r=t=>Ert(t)?(n=!0,brt(i[t.signal])):t,i=this.signals;return t=Object(Ue["e"])(t).map(r),n?brt(this.add(Ait({fields:t,flat:e}))):wrt(t,e)},sortRef(t){if(!t)return t;const e=jrt(t.op,t.field),n=t.order||Ort;return n.signal?brt(this.add(yit({fields:e,orders:this.signalRef(n.signal)}))):xrt(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},hasOwnSignal(t){return Object(Ue["s"])(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&Object(Ue["k"])("Duplicate signal name: "+Object(Ue["W"])(t));const n=e instanceof prt?e:this.add(grt(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||Object(Ue["k"])("Unrecognized signal name: "+Object(Ue["W"])(t)),this.signals[t]},signalRef(t){return this.signals[t]?brt(this.signals[t]):(Object(Ue["s"])(this.lambdas,t)||(this.lambdas[t]=this.add(grt(null))),brt(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const n=t[e],r=JZ(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return t&&Object(Ue["D"])(t)?this.signalRef(t.signal||Zst(t)):t},exprRef(t,e){const n={expr:JZ(t,this)};return e&&(n.expr.$name=e),brt(this.add(wit(n)))},addBinding(t,e){this.bindings||Object(Ue["k"])("Nested signals do not support binding: "+Object(Ue["W"])(t)),this.bindings.push(Object(Ue["l"])({signal:t},e))},addScaleProj(t,e){Object(Ue["s"])(this.scales,t)&&Object(Ue["k"])("Duplicate scale or projection name: "+Object(Ue["W"])(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,$it(e))},addProjection(t,e){this.addScaleProj(t,Tit(e))},getScale(t){return this.scales[t]||Object(Ue["k"])("Unrecognized scale name: "+Object(Ue["W"])(t)),this.scales[t]},scaleRef(t){return brt(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return Object(Ue["s"])(this.data,t)&&Object(Ue["k"])("Duplicate data set name: "+Object(Ue["W"])(t)),this.data[t]=e},getData(t){return this.data[t]||Object(Ue["k"])("Undefined data set name: "+Object(Ue["W"])(t)),this.data[t]},addDataPipeline(t,e){return Object(Ue["s"])(this.data,t)&&Object(Ue["k"])("Duplicate data set name: "+Object(Ue["W"])(t)),this.addData(t,Pot.fromEntries(this,e))}};var eut=function(){const t="sans-serif",e=30,n=2,r="#4c78a8",i="#000",a="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:n},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:t,fontSize:11},trail:{fill:r,size:n},style:{"guide-label":{fill:i,font:t,fontSize:10},"guide-title":{fill:i,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:t,fontSize:12},point:{size:e,strokeWidth:n,shape:"circle"},circle:{size:e,strokeWidth:n},square:{size:e,strokeWidth:n,shape:"square"},cell:{fill:"transparent",stroke:o}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}},nut=function(t,e,n){return Object(Ue["D"])(t)||Object(Ue["k"])("Input Vega specification must be an object."),e=Object(Ue["L"])(eut(),e,t.config),Hst(t,new Kst(e,n)).toRuntime()};fe(Gr,a,s,u,c,l,f,d,h,p,m);var rut=n("a87b"),iut=function(t,e,n){return t.fields=e||[],t.fname=n,t};var aut=function(t){return 1===t.length?out(t[0]):sut(t)};const out=t=>function(e){return e[t]},sut=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};var uut=function(t){throw Error(t)},cut=function(t){var e,n,r,i=[],a=null,o=0,s=t.length,u="";function c(){i.push(u+t.substring(e,n)),u="",e=n+1}for(t+="",e=n=0;n<s;++n)if(r=t[n],"\\"===r)u+=t.substring(e,n),u+=t.substring(++n,++n),e=n;else if(r===a)c(),a=null,o=-1;else{if(a)continue;e===o&&'"'===r||e===o&&"'"===r?(e=n+1,a=r):"."!==r||o?"["===r?(n>e&&c(),o=e=n+1):"]"===r&&(o||uut("Access path missing open bracket: "+t),o>0&&c(),o=0,e=n+1):n>e?c():e=n+1}return o&&uut("Access path missing closing bracket: "+t),a&&uut("Access path missing closing quote: "+t),n>e&&(n++,c()),i},lut=function(t,e,n){const r=cut(t);return t=1===r.length?r[0]:t,iut((n&&n.get||aut)(r),[t],e||t)},fut=[],dut=(lut("id"),iut((function(t){return t}),fut,"identity"));iut((function(){return 0}),fut,"zero"),iut((function(){return 1}),fut,"one"),iut((function(){return!0}),fut,"true"),iut((function(){return!1}),fut,"false");function hut(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var put=0,mut=1,gut=2,but=3,yut=4,vut=function(t,e){var n=t||put;return{level:function(t){return arguments.length?(n=+t,this):n},error:function(){return n>=mut&&hut(e||"error","ERROR",arguments),this},warn:function(){return n>=gut&&hut(e||"warn","WARN",arguments),this},info:function(){return n>=but&&hut(e||"log","INFO",arguments),this},debug:function(){return n>=yut&&hut(e||"log","DEBUG",arguments),this}}},xut=Array.isArray,wut=function(t){return t===Object(t)};const Out=t=>"__proto__"!==t;function _ut(...t){return t.reduce((t,e)=>{for(var n in e)if("signals"===n)t.signals=jut(t.signals,e.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;Aut(t,n,e[n],r)}return t},{})}function Aut(t,e,n,r){var i,a;if(Out(e))if(wut(n)&&!xut(n))for(i in a=wut(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?Aut(a,i,n[i]):Out(i)&&(a[i]=n[i]);else t[e]=n}function jut(t,e){if(null==t)return e;const n={},r=[];function i(t){n[t.name]||(n[t.name]=1,r.push(t))}return e.forEach(i),t.forEach(i),r}var kut=function(t){return null!=t?xut(t)?t:[t]:[]},Cut=function(t){return"function"===typeof t};const Eut=Object.prototype.hasOwnProperty;var Sut=function(t,e){return Eut.call(t,e)},Dut=function(t){return"boolean"===typeof t},Fut=function(t){return"number"===typeof t},Nut=function(t){return"string"===typeof t};function Tut(t){return xut(t)?"["+t.map(Tut)+"]":wut(t)||Nut(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var Mut=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e};function Iut(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;Object.create;Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,t.call(r,e-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var Rut=n("2410"),$ut=n.n(Rut),But=n("694b"),zut=n.n(But),Lut=n("f71e"),Put=n.n(Lut);function Uut(t){return!!t.or}function Wut(t){return!!t.and}function qut(t){return!!t.not}function Vut(t,e){if(qut(t))Vut(t.not,e);else if(Wut(t))for(const n of t.and)Vut(n,e);else if(Uut(t))for(const n of t.or)Vut(n,e);else e(t)}function Gut(t,e){return qut(t)?{not:Gut(t.not,e)}:Wut(t)?{and:t.and.map(t=>Gut(t,e))}:Uut(t)?{or:t.or.map(t=>Gut(t,e))}:e(t)}const Hut=zut.a,Xut=$ut.a;function Yut(t,e){const n={};for(const r of e)Sut(t,r)&&(n[r]=t[r]);return n}function Kut(t,e){const n=Object.assign({},t);for(const r of e)delete n[r];return n}Set.prototype["toJSON"]=function(){return`Set(${[...this].map(t=>Put()(t)).join(",")})`};const Jut=Put.a;function Zut(t){if(Fut(t))return t;const e=Nut(t)?t:Put()(t);if(e.length<250)return e;let n=0;for(let r=0;r<e.length;r++){const t=e.charCodeAt(r);n=(n<<5)-n+t,n&=n}return n}function Qut(t){return!1===t||null===t}function tct(t,e){return t.indexOf(e)>-1}function ect(t,e){let n=0;for(const[r,i]of t.entries())if(e(i,r,n++))return!0;return!1}function nct(t,e){let n=0;for(const[r,i]of t.entries())if(!e(i,r,n++))return!1;return!0}function rct(t,...e){for(const n of e)ict(t,null!==n&&void 0!==n?n:{});return t}function ict(t,e){for(const n of fct(e))Aut(t,n,e[n],!0)}function act(t,e){const n=[],r={};let i;for(const a of t)i=e(a),i in r||(r[i]=1,n.push(a));return n}function oct(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function sct(t,e){for(const n of t)if(e.has(n))return!0;return!1}function uct(t){const e=new Set;for(const n of t){const t=cut(n),r=t.map((t,e)=>0===e?t:`[${t}]`),i=r.map((t,e)=>r.slice(0,e+1).join(""));for(const n of i)e.add(n)}return e}function cct(t,e){return void 0===t||void 0===e||sct(uct(t),uct(e))}function lct(t){return 0===fct(t).length}const fct=Object.keys,dct=Object.values;function hct(t){const e=[];for(const n in t)Sut(t,n)&&e.push({key:n,value:t[n]});return e}function pct(t){return!0===t||!1===t}function mct(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function gct(t,e){return qut(t)?"!("+gct(t.not,e)+")":Wut(t)?"("+t.and.map(t=>gct(t,e)).join(") && (")+")":Uut(t)?"("+t.or.map(t=>gct(t,e)).join(") || (")+")":e(t)}function bct(t,e){if(0===e.length)return!0;const n=e.shift();return n in t&&bct(t[n],e)&&delete t[n],lct(t)}function yct(t){return t.charAt(0).toUpperCase()+t.substr(1)}function vct(t,e="datum"){const n=cut(t),r=[];for(let i=1;i<=n.length;i++){const t=`[${n.slice(0,i).map(Tut).join("][")}]`;r.push(`${e}${t}`)}return r.join(" && ")}function xct(t,e="datum"){return`${e}[${Tut(cut(t).join("."))}]`}function wct(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Oct(t){return""+cut(t).map(wct).join("\\.")}function _ct(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Act(t){return""+cut(t).join(".")}function jct(t){return t?cut(t).length:0}function kct(...t){for(const e of t)if(void 0!==e)return e}let Cct=42;function Ect(t){const e=++Cct;return t?String(t)+e:e}function Sct(t){return Dct(t)?t:"__"+t}function Dct(t){return 0===t.indexOf("__")}function Fct(t){if(void 0!==t)return(t%360+360)%360}function Nct(t){return!!Fut(t)||!isNaN(t)&&!isNaN(parseFloat(t))}const Tct={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};function Mct(t){return t&&t["condition"]}const Ict=["domain","grid","labels","ticks","title"],Rct={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},$ct={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Bct=Object.assign(Object.assign({},$ct),{style:1,labelExpr:1,encoding:1});function zct(t){return!!Bct[t]}fct(Bct);const Lct={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Pct=Lct.arc,Uct=Lct.area,Wct=Lct.bar,qct=Lct.image,Vct=Lct.line,Gct=Lct.point,Hct=Lct.rect,Xct=Lct.rule,Yct=Lct.text,Kct=Lct.tick,Jct=Lct.trail,Zct=Lct.circle,Qct=Lct.square,tlt=Lct.geoshape;function elt(t){return tct(["line","area","trail"],t)}function nlt(t){return tct(["rect","bar","image","arc"],t)}const rlt=fct(Lct);function ilt(t){return t["type"]}Mut(rlt);const alt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],olt=["fill","fillOpacity"],slt=[...alt,...olt],ult={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1},clt=fct(ult),llt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},flt={color:"#4c78a8",invalid:"filter",timeUnitBand:1},dlt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},hlt=5,plt={binSpacing:1,continuousBandSize:hlt,timeUnitBandPosition:.5},mlt={binSpacing:0,continuousBandSize:hlt,timeUnitBandPosition:.5},glt={thickness:1};function blt(t){return ilt(t)?t.type:t}function ylt(t){return"mark"in t}class vlt{constructor(t,e){this.name=t,this.run=e}hasMatchingType(t){return!!ylt(t)&&blt(t.mark)===this.name}}const xlt={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},wlt={count:1,min:1,max:1};function Olt(t){return!!t&&!!t["argmin"]}function _lt(t){return!!t&&!!t["argmax"]}fct(xlt);function Alt(t){return Nut(t)&&!!xlt[t]}const jlt=["count","valid","missing","distinct"];function klt(t){return Nut(t)&&tct(jlt,t)}function Clt(t){return Nut(t)&&tct(["min","max"],t)}const Elt=["count","sum","distinct","valid","missing"],Slt=["mean","average","median","q1","q3","min","max"],Dlt=Mut(Slt),Flt="row",Nlt="column",Tlt="facet",Mlt="x",Ilt="y",Rlt="x2",$lt="y2",Blt="radius",zlt="radius2",Llt="theta",Plt="theta2",Ult="latitude",Wlt="longitude",qlt="latitude2",Vlt="longitude2",Glt="color",Hlt="fill",Xlt="stroke",Ylt="shape",Klt="size",Jlt="angle",Zlt="opacity",Qlt="fillOpacity",tft="strokeOpacity",eft="strokeWidth",nft="strokeDash",rft="text",ift="order",aft="detail",oft="key",sft="tooltip",uft="href",cft="url",lft="description",fft={x:1,y:1,x2:1,y2:1},dft={theta:1,theta2:1,radius:1,radius2:1};function hft(t){return t in dft}const pft={longitude:1,longitude2:1,latitude:1,latitude2:1};function mft(t){switch(t){case Ult:return"y";case qlt:return"y2";case Wlt:return"x";case Vlt:return"x2"}}function gft(t){return t in pft}const bft=fct(pft),yft=Object.assign(Object.assign(Object.assign(Object.assign({},fft),dft),pft),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function vft(t){return t===Glt||t===Hlt||t===Xlt}const xft={row:1,column:1,facet:1},wft=fct(xft),Oft=Object.assign(Object.assign({},yft),xft),_ft=fct(Oft),{order:Aft,detail:jft,tooltip:kft}=Oft,Cft=Iut(Oft,["order","detail","tooltip"]),{row:Eft,column:Sft,facet:Dft}=Cft,Fft=Iut(Cft,["row","column","facet"]);fct(Cft),fct(Fft);function Nft(t){return!!Fft[t]}function Tft(t){return!!Oft[t]}const Mft=[Rlt,$lt,qlt,Vlt,Plt,zlt];function Ift(t){const e=Rft(t);return e!==t}function Rft(t){switch(t){case Rlt:return Mlt;case $lt:return Ilt;case qlt:return Ult;case Vlt:return Wlt;case Plt:return Llt;case zlt:return Blt}return t}function $ft(t){if(hft(t))switch(t){case Llt:return"startAngle";case Plt:return"endAngle";case Blt:return"outerRadius";case zlt:return"innerRadius"}return t}function Bft(t){switch(t){case Mlt:return Rlt;case Ilt:return $lt;case Ult:return qlt;case Wlt:return Vlt;case Llt:return Plt;case Blt:return zlt}}function zft(t){switch(t){case Mlt:case Rlt:return"width";case Ilt:case $lt:return"height"}}function Lft(t){switch(t){case Mlt:return"xOffset";case Ilt:return"yOffset";case Rlt:return"x2Offset";case $lt:return"y2Offset";case Llt:return"thetaOffset";case Blt:return"radiusOffset";case Plt:return"theta2Offset";case zlt:return"radius2Offset"}}fct(yft);const{x:Pft,y:Uft,x2:Wft,y2:qft,latitude:Vft,longitude:Gft,latitude2:Hft,longitude2:Xft,theta:Yft,theta2:Kft,radius:Jft,radius2:Zft}=yft,Qft=Iut(yft,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),tdt=fct(Qft),edt={x:1,y:1},ndt=fct(edt);function rdt(t){return t in edt}const idt={theta:1,radius:1},adt=fct(idt);function odt(t){return"width"===t?Mlt:Ilt}const{text:sdt,tooltip:udt,href:cdt,url:ldt,description:fdt,detail:ddt,key:hdt,order:pdt}=Qft,mdt=Iut(Qft,["text","tooltip","href","url","description","detail","key","order"]),gdt=fct(mdt);function bdt(t){return!!Qft[t]}function ydt(t){switch(t){case Glt:case Hlt:case Xlt:case Klt:case Ylt:case Zlt:case eft:case nft:return!0;case Qlt:case tft:case Jlt:return!1}}const vdt=Object.assign(Object.assign(Object.assign({},edt),idt),mdt),xdt=fct(vdt);function wdt(t){return!!vdt[t]}function Odt(t,e){return kdt(t)[e]}const _dt={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Adt}=_dt,jdt=Iut(_dt,["geoshape"]);function kdt(t){switch(t){case Glt:case Hlt:case Xlt:case lft:case aft:case oft:case sft:case uft:case ift:case Zlt:case Qlt:case tft:case eft:case Tlt:case Flt:case Nlt:return _dt;case Mlt:case Ilt:case Ult:case Wlt:return jdt;case Rlt:case $lt:case qlt:case Vlt:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Klt:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case nft:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ylt:return{point:"always",geoshape:"always"};case rft:return{text:"always"};case Jlt:return{point:"always",square:"always",text:"always"};case cft:return{image:"always"};case Llt:return{text:"always",arc:"always"};case Blt:return{text:"always",arc:"always"};case Plt:case zlt:return{arc:"always"}}}function Cdt(t){switch(t){case Mlt:case Ilt:case Llt:case Blt:case Klt:case Jlt:case eft:case Zlt:case Qlt:case tft:case Rlt:case $lt:case Plt:case zlt:return;case Tlt:case Flt:case Nlt:case Ylt:case nft:case rft:case sft:case uft:case cft:case lft:return"discrete";case Glt:case Hlt:case Xlt:return"flexible";case Ult:case Wlt:case qlt:case Vlt:case aft:case oft:case ift:return}}function Edt(t){return Dut(t)&&(t=pbt(t,void 0)),"bin"+fct(t).map(e=>Ndt(t[e])?mct(`_${e}_${Object.entries(t[e])}`):mct(`_${e}_${t[e]}`)).join("")}function Sdt(t){return!0===t||Fdt(t)&&!t.binned}function Ddt(t){return"binned"===t||Fdt(t)&&!0===t.binned}function Fdt(t){return wut(t)}function Ndt(t){return null===t||void 0===t?void 0:t["selection"]}function Tdt(t){switch(t){case Flt:case Nlt:case Klt:case Glt:case Hlt:case Xlt:case eft:case Zlt:case Qlt:case tft:case Ylt:return 6;case nft:return 4;default:return 10}}function Mdt(t){return`Invalid specification ${JSON.stringify(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Idt='Autosize "fit" only works for single views and layered views.';function Rdt(t){const e="width"==t?"Width":"Height";return e+' "container" only works for single views and layered views.'}function $dt(t){const e="width"==t?"Width":"Height",n="width"==t?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${n}".`}function Bdt(t){return t?`Dropping "fit-${t}" because spec has discrete ${zft(t)}.`:'Dropping "fit" because spec has discrete size.'}function zdt(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function Ldt(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function Pdt(t){return`The "nearest" transform is not supported for ${t} marks.`}function Udt(t){return`Selection not supported for ${t} yet.`}function Wdt(t){return`Cannot find a selection named "${t}".`}const qdt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Vdt="Legend bindings are only supported for selections over an individual field or encoding channel.";function Gdt(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}function Hdt(t){return`Unknown repeated value "${t}".`}function Xdt(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const Ydt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Kdt(t){return`Unrecognized parse "${t}".`}function Jdt(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}function Zdt(t){return`Ignoring an invalid transform: ${Jut(t)}.`}const Qdt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function tht(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function eht(t){return`Layer's shared ${t.join(",")} channel ${1===t.length?"is":"are"} overriden.`}function nht(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${Jut(e)} is overridden by a child projection ${Jut(n)}.`}const rht="Arc marks uses theta channel rather than angle, replacing angle with theta.";function iht(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${Jut(n)}}.`}function aht(t){return`Invalid field type "${t}".`}function oht(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function sht(t){return`Invalid aggregation operator "${t}".`}function uht(t,e){return`Missing type for channel "${t}", using "${e}" instead.`}function cht(t,e){const{fill:n,stroke:r}=e;return`Dropping color ${t} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function lht(t,e){return`Dropping ${Jut(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}function fht(t,e,n){return`${t}-encoding with type ${e} is deprecated. Replacing with ${n}-encoding.`}const dht="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function hht(t,e,n){return`${t} dropped as it is incompatible with "${e}"${n?" when "+n:""}.`}function pht(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function mht(t){return t+" encoding should be discrete (ordinal / nominal / binned)."}function ght(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function bht(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${"ordinal"===e?"order":"magnitude"}.`}function yht(t,e){const n=t&&e?"x2 and y2":t?"x2":"y2";return`Line mark is for continuous lines and thus cannot be used with ${n}. We will use the rule mark (line segments) instead.`}function vht(t,e){return`Specified orient "${t}" overridden with "${e}".`}const xht="Custom domain scale cannot be unioned with default field-based domain.",wht='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function Oht(t){return`Cannot use the scale property "${t}" with non-color channel.`}function _ht(t){return`Using unaggregated domain with raw field has no effect (${Jut(t)}).`}function Aht(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function jht(t){return`Unaggregated domain is currently unsupported for log scale (${Jut(t)}).`}function kht(t){return`Cannot apply size to non-oriented mark "${t}".`}function Cht(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}function Eht(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function Sht(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function Dht(t,e){return`Scale type "${e}" does not work with mark "${t}".`}function Fht(t){return`The step for "${t}" is dropped because the ${"width"===t?"x":"y"} is continuous.`}function Nht(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${Jut(n)} and ${Jut(r)}). Using ${Jut(n)}.`}function Tht(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${Jut(n)} and ${Jut(r)}). Using the union of the two domains.`}function Mht(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function Iht(t){return`Dropping sort property ${Jut(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const Rht="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",$ht="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Bht="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",zht="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",Lht="Invalid channel for axis.";function Pht(t){return`Cannot stack "${t}" if there is already "${t}2".`}function Uht(t){return`Cannot stack non-linear scale (${t}).`}function Wht(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function qht(t,e){return`Invalid ${t}: ${Jut(e)}.`}function Vht(t){return`Dropping day from datetime ${Jut(t)} as day cannot be combined with other units.`}function Ght(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function Hht(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}function Xht(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function Yht(t,e){return`Center is not needed to be specified in ${e} when extent is ${t}.`}function Kht(t){return`1D error band does not support ${t}.`}function Jht(t){return`Channel ${t} is required for "binned" bin.`}function Zht(t){return`Domain for ${t} is required for threshold scale.`}const Qht=vut(gut);let tpt=Qht;function ept(t){return tpt=t,tpt}function npt(){return tpt=Qht,tpt}function rpt(...t){tpt.warn(...t)}function ipt(...t){tpt.debug(...t)}function apt(t){if(t&&wut(t))for(const e of ypt)if(e in t)return!0;return!1}const opt=["january","february","march","april","may","june","july","august","september","october","november","december"],spt=opt.map(t=>t.substr(0,3)),upt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],cpt=upt.map(t=>t.substr(0,3));function lpt(t){if(Nct(t)&&(t=+t),Fut(t))return t>4&&rpt(x.invalidTimeUnit("quarter",t)),t-1;throw new Error(x.invalidTimeUnit("quarter",t))}function fpt(t){if(Nct(t)&&(t=+t),Fut(t))return t-1;{const e=t.toLowerCase(),n=opt.indexOf(e);if(-1!==n)return n;const r=e.substr(0,3),i=spt.indexOf(r);if(-1!==i)return i;throw new Error(x.invalidTimeUnit("month",t))}}function dpt(t){if(Nct(t)&&(t=+t),Fut(t))return t%7;{const e=t.toLowerCase(),n=upt.indexOf(e);if(-1!==n)return n;const r=e.substr(0,3),i=cpt.indexOf(r);if(-1!==i)return i;throw new Error(x.invalidTimeUnit("day",t))}}function hpt(t,e){const n=[];if(e&&void 0!==t.day&&fct(t).length>1&&(rpt(x.droppedDay(t)),t=Xut(t),delete t.day),void 0!==t.year?n.push(t.year):n.push(2012),void 0!==t.month){const r=e?fpt(t.month):t.month;n.push(r)}else if(void 0!==t.quarter){const r=e?lpt(t.quarter):t.quarter;n.push(Fut(r)?3*r:r+"*3")}else n.push(0);if(void 0!==t.date)n.push(t.date);else if(void 0!==t.day){const r=e?dpt(t.day):t.day;n.push(Fut(r)?r+1:r+"+1")}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const e=t[r];n.push("undefined"===typeof e?0:e)}return n}function ppt(t){const e=hpt(t,!0),n=e.join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function mpt(t){const e=hpt(t,!1),n=e.join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function gpt(t){const e=hpt(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}const bpt={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},ypt=fct(bpt);function vpt(t){return!!bpt[t]}function xpt(t){return t.startsWith("utc")}function wpt(t){return t.substr(3)}const Opt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function _pt(t){const e=[];for(const n of ypt)Apt(t,n)&&e.push(n);return e}function Apt(t,e){const n=t.indexOf(e);return!(n<0)&&(!(n>0&&"seconds"===e&&"i"===t.charAt(n-1))&&(!(t.length>n+3&&"day"===e&&"o"===t.charAt(n+3))&&!(n>0&&"year"===e&&"f"===t.charAt(n-1))))}function jpt(t,e,{end:n}={end:!1}){const r=vct(e),i=xpt(t)?"utc":"";function a(t){return"quarter"===t?`(${i}quarter(${r})-1)`:`${i}${t}(${r})`}let o;const s={};for(const u of ypt)Apt(t,u)&&(s[u]=a(u),o=u);return n&&(s[o]+="+1"),mpt(s)}function kpt(t){if(!t)return;const e=_pt(t);return`timeUnitSpecifier(${Put()(e)}, ${Put()(Opt)})`}function Cpt(t,e,n){if(!t)return;const r=kpt(t),i=n||xpt(t);return`${i?"utc":"time"}Format(${e}, ${r})`}function Ept(t){if(!t)return;let e;return Nut(t)?e={unit:t}:wut(t)&&(e=Object.assign(Object.assign({},t),t.unit?{unit:t.unit}:{})),xpt(e.unit)&&(e.utc=!0,e.unit=wpt(e.unit)),e}function Spt(t){const e=Ept(t),{utc:n}=e,r=Iut(e,["utc"]);return r.unit?(n?"utc":"")+fct(r).map(t=>mct(`${"unit"===t?"":`_${t}_`}${r[t]}`)).join(""):(n?"utc":"")+"timeunit"+fct(r).map(t=>mct(`_${t}_${r[t]}`)).join("")}function Dpt(t){return t&&!!t["signal"]}function Fpt(t){return!!t["step"]}function Npt(t){return!xut(t)&&("fields"in t&&!("data"in t))}function Tpt(t){return!xut(t)&&("fields"in t&&"data"in t)}function Mpt(t){return!xut(t)&&("field"in t&&"data"in t)}const Ipt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1},Rpt=fct(Ipt),$pt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Bpt=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function zpt(t){return null===t||void 0===t?void 0:t["selection"]}function Lpt(t){return t&&!!t.field&&void 0!==t.equal}function Ppt(t){return t&&!!t.field&&void 0!==t.lt}function Upt(t){return t&&!!t.field&&void 0!==t.lte}function Wpt(t){return t&&!!t.field&&void 0!==t.gt}function qpt(t){return t&&!!t.field&&void 0!==t.gte}function Vpt(t){if(t&&t.field){if(xut(t.range)&&2===t.range.length)return!0;if(Dpt(t.range))return!0}return!1}function Gpt(t){return t&&!!t.field&&(xut(t.oneOf)||xut(t.in))}function Hpt(t){return t&&!!t.field&&void 0!==t.valid}function Xpt(t){return Gpt(t)||Lpt(t)||Vpt(t)||Ppt(t)||Wpt(t)||Upt(t)||qpt(t)}function Ypt(t,e){return vbt(t,{timeUnit:e,wrapTime:!0})}function Kpt(t,e){return t.map(t=>Ypt(t,e))}function Jpt(t,e=!0){var n;const{field:r}=t,i=null===(n=Ept(t.timeUnit))||void 0===n?void 0:n.unit,a=i?"time("+jpt(i,r)+")":Hgt(t,{expr:"datum"});if(Lpt(t))return a+"==="+Ypt(t.equal,i);if(Ppt(t)){const e=t.lt;return`${a}<${Ypt(e,i)}`}if(Wpt(t)){const e=t.gt;return`${a}>${Ypt(e,i)}`}if(Upt(t)){const e=t.lte;return`${a}<=${Ypt(e,i)}`}if(qpt(t)){const e=t.gte;return`${a}>=${Ypt(e,i)}`}if(Gpt(t))return`indexof([${Kpt(t.oneOf,i).join(",")}], ${a}) !== -1`;if(Hpt(t))return Zpt(a,t.valid);if(Vpt(t)){const{range:n}=t,r=Dpt(n)?{signal:n.signal+"[0]"}:n[0],o=Dpt(n)?{signal:n.signal+"[1]"}:n[1];if(null!==r&&null!==o&&e)return"inrange("+a+", ["+Ypt(r,i)+", "+Ypt(o,i)+"])";const s=[];return null!==r&&s.push(`${a} >= ${Ypt(r,i)}`),null!==o&&s.push(`${a} <= ${Ypt(o,i)}`),s.length>0?s.join(" && "):"true"}throw new Error("Invalid field predicate: "+JSON.stringify(t))}function Zpt(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function Qpt(t){var e;return Xpt(t)&&t.timeUnit?Object.assign(Object.assign({},t),{timeUnit:null===(e=Ept(t.timeUnit))||void 0===e?void 0:e.unit}):t}const tmt={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};const emt=tmt.quantitative,nmt=tmt.ordinal,rmt=tmt.temporal,imt=tmt.nominal,amt=tmt.geojson,omt=fct(tmt);function smt(t){if(t)switch(t=t.toLowerCase(),t){case"q":case emt:return"quantitative";case"t":case rmt:return"temporal";case"o":case nmt:return"ordinal";case"n":case imt:return"nominal";case amt:return"geojson"}}const umt={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},cmt={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},lmt=fct(cmt);function fmt(t,e){const n=cmt[t],r=cmt[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const dmt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function hmt(t){return dmt[t]}const pmt=["linear","log","pow","sqrt","symlog","time","utc"],mmt=Mut(pmt),gmt=["linear","log","pow","sqrt","symlog"],bmt=Mut(gmt);function ymt(t){return t in bmt}const vmt=["quantile","quantize","threshold"],xmt=Mut(vmt),wmt=pmt.concat(["quantile","quantize","threshold","sequential","identity"]),Omt=Mut(wmt),_mt=["ordinal","bin-ordinal","point","band"],Amt=Mut(_mt);function jmt(t){return t in Amt}function kmt(t){return t in Omt}function Cmt(t){return t in mmt}function Emt(t){return t in xmt}const Smt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function Dmt(t){return!Nut(t)&&!!t["name"]}function Fmt(t){return null===t||void 0===t?void 0:t["selection"]}function Nmt(t){return t&&t["unionWith"]}const Tmt={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Mmt,domain:Imt,range:Rmt,scheme:$mt}=(fct(Tmt),Tmt),Bmt=Iut(Tmt,["type","domain","range","scheme"]),zmt=fct(Bmt);qmt();function Lmt(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!tct(["point","band","identity"],t);case"bins":return!tct(["point","band","identity","ordinal"],t);case"round":return Cmt(t)||"band"===t||"point"===t;case"padding":return Cmt(t)||tct(["point","band"],t);case"paddingOuter":case"align":return tct(["point","band"],t);case"paddingInner":return"band"===t;case"domainMid":case"clamp":return Cmt(t);case"nice":return Cmt(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return kmt(t)&&!tct(["log","time","utc","threshold","quantile"],t)}}function Pmt(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return vft(t)?void 0:x.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function Umt(t,e){return tct([nmt,imt],e)?void 0===t||jmt(t):e===rmt?tct([umt.TIME,umt.UTC,void 0],t):e!==emt||tct([umt.LOG,umt.POW,umt.SQRT,umt.SYMLOG,umt.QUANTILE,umt.QUANTIZE,umt.THRESHOLD,umt.LINEAR,void 0],t)}function Wmt(t,e){if(!wdt(t))return!1;switch(t){case Mlt:case Ilt:case Llt:case Blt:return Cmt(e)||tct(["band","point"],e);case Klt:case eft:case Zlt:case Qlt:case tft:case Jlt:return Cmt(e)||Emt(e)||tct(["band","point","ordinal"],e);case Glt:case Hlt:case Xlt:return"band"!==e;case nft:return"ordinal"===e||Emt(e);case Ylt:return"ordinal"===e}}function qmt(){var t;const e={};for(const n of _ft)for(const r of omt)for(const i of lmt){const a=Vmt(n,r);Wmt(n,i)&&Umt(i,r)&&(e[a]=null!==(t=e[a])&&void 0!==t?t:[],e[a].push(i))}return e}function Vmt(t,e){return t+"_"+e}function Gmt(t){const{channel:e,channelDef:n,markDef:r,scale:i,config:a}=t,o=Qmt(t);return Mgt(n)&&!klt(n.aggregate)&&i&&Cmt(i.get("type"))&&!1===i.get("zero")?Hmt({fieldDef:n,channel:e,markDef:r,ref:o,config:a}):o}function Hmt({fieldDef:t,channel:e,markDef:n,ref:r,config:i}){if(elt(n.type))return r;const a=Sbt("invalid",n,i);return null===a?r:[Xmt(t,e),r]}function Xmt(t,e){const n=Ymt(t,!0),r=Rft(e),i="y"===r?{field:{group:"height"}}:{value:0};return Object.assign({test:n},i)}function Ymt(t,e=!0){return Zpt(Nut(t)?t:Hgt(t,{expr:"datum"}),!e)}function Kmt(t){const{datum:e}=t;return apt(e)?ppt(e):""+JSON.stringify(e)}function Jmt(t,e,n,r){const i={};if(e&&(i.scale=e),Rgt(t)){const{datum:e}=t;apt(e)?i.signal=ppt(e):Dpt(e)?i.signal=e.signal:i.value=e}else i.field=Hgt(t,n);if(r){const{offset:t,band:e}=r;t&&(i.offset=t),e&&(i.band=e)}return i}function Zmt({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:r,startSuffix:i,band:a=.5}){const o=0<a&&a<1?"datum":void 0,s=Hgt(e,{expr:o,suffix:i}),u=void 0!==n?Hgt(n,{expr:o}):Hgt(e,{suffix:"end",expr:o}),c={};if(0===a||1===a){c.scale=t;const e=0===a?s:u;c.field=e}else{const e=`${a} * ${s} + ${1-a} * ${u}`;c.signal=`scale("${t}", ${e})`}return r&&(c.offset=r),c}function Qmt({channel:t,channelDef:e,channel2Def:n,markDef:r,config:i,scaleName:a,scale:o,stack:s,offset:u,defaultRef:c,band:l}){var f;if(e){if(zgt(e)){if(Lgt(e)){l=null!==l&&void 0!==l?l:Egt({channel:t,fieldDef:e,fieldDef2:n,markDef:r,stack:s,config:i,isMidPoint:!0});const{bin:o,timeUnit:c,type:f}=e;if(Sdt(o)||l&&c&&f===rmt)return s&&s.impute?Jmt(e,a,{binSuffix:"mid"},{offset:u}):l?Zmt({scaleName:a,fieldOrDatumDef:e,band:l,offset:u}):Jmt(e,a,wbt(e,t)?{binSuffix:"range"}:{},{offset:u});if(Ddt(o)){if(Mgt(n))return Zmt({scaleName:a,fieldOrDatumDef:e,fieldOrDatumDef2:n,band:l,offset:u});{const e=t===Mlt?Rlt:$lt;rpt(x.channelRequiredForBinned(e))}}}const c=null===o||void 0===o?void 0:o.get("type");return Jmt(e,a,jmt(c)?{binSuffix:"range"}:{},{offset:u,band:"band"===c?null!==(f=null!==l&&void 0!==l?l:e.band)&&void 0!==f?f:.5:void 0})}if(Pgt(e)){const n=e.value,r=u?{offset:u}:{};return Object.assign(Object.assign({},tgt(t,n)),r)}}return Cut(c)&&(c=c()),c?Object.assign(Object.assign({},c),u?{offset:u}:{}):c}function tgt(t,e){return tct(["x","x2"],t)&&"width"===e?{field:{group:"width"}}:tct(["y","y2"],t)&&"height"===e?{field:{group:"height"}}:Abt(e)}function egt(t){return t&&"number"!==t&&"time"!==t}function ngt(t,e,n){return`${t}(${e}${n?", "+JSON.stringify(n):""})`}const rgt="  ";function igt({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:a}){var o,s;if(egt(n))return ogt({fieldOrDatumDef:t,format:e,formatType:n,expr:r,config:a});const u=agt(t,r,i);if(bbt(t)){const n=pgt(u,Mgt(t)?null===(o=Ept(t.timeUnit))||void 0===o?void 0:o.unit:void 0,e,a.timeFormat,Ugt(t)&&(null===(s=t.scale)||void 0===s?void 0:s.type)===umt.UTC);return n?{signal:n}:void 0}if(e=cgt(Igt(t),e,a),Mgt(t)&&Sdt(t.bin)){const i=Hgt(t,{expr:r,binSuffix:"end"});return{signal:hgt(u,i,e,n,a)}}return e||"quantitative"===Igt(t)?{signal:""+fgt(u,e)}:{signal:`isValid(${u}) ? ${u} : ""+${u}`}}function agt(t,e,n){return Mgt(t)?n?`${Hgt(t,{expr:e,suffix:"end"})}-${Hgt(t,{expr:e,suffix:"start"})}`:Hgt(t,{expr:e}):Kmt(t)}function ogt({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:a,field:o}){if(o=null!==o&&void 0!==o?o:agt(t,r,i),Mgt(t)&&Sdt(t.bin)){const i=Hgt(t,{expr:r,binSuffix:"end"});return{signal:hgt(o,i,e,n,a)}}return{signal:ngt(n,o,e)}}function sgt(t,e,n,r,i,a){var o;if(!egt(r)){if(bbt(t)){const e=Mgt(t)?null===(o=Ept(t.timeUnit))||void 0===o?void 0:o.unit:void 0;return lgt(n,e,i,a)}return cgt(e,n,i)}}function ugt(t,e,n){return t&&(Dpt(t)||"number"===t||"time"===t)?t:bbt(e)&&"time"!==n&&"utc"!==n?"time":void 0}function cgt(t,e,n){return Nut(e)?e:t===emt?n.numberFormat:void 0}function lgt(t,e,n,r){return t||(e?{signal:kpt(e)}:r?void 0:n.timeFormat)}function fgt(t,e){return`format(${t}, "${e||""}")`}function dgt(t,e,n,r){var i;return egt(n)?ngt(n,t,e):fgt(t,null!==(i=Nut(e)?e:void 0)&&void 0!==i?i:r.numberFormat)}function hgt(t,e,n,r,i){const a=dgt(t,n,r,i),o=dgt(e,n,r,i);return`${Zpt(t,!1)} ? "null" : ${a} + "${rgt}" + ${o}`}function pgt(t,e,n,r,i){return!e||n?(n=Nut(n)?n:r,`${i?"utc":"time"}Format(${t}, '${n}')`):Cpt(e,t,i)}const mgt="min",ggt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function bgt(t){return t in ggt}function ygt(t){return!!t&&!!t["encoding"]}function vgt(t){return!!t&&("count"===t["op"]||!!t["field"])}function xgt(t){return!!t&&xut(t)}function wgt(t){return"row"in t||"column"in t}function Ogt(t){return!!t&&"header"in t}function _gt(t){return"facet"in t}function Agt(t){return t["selection"]}function jgt(t){return t&&!Nut(t)&&"repeat"in t}function kgt(t){const{field:e,timeUnit:n,bin:r,aggregate:i}=t;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:e})}function Cgt(t){return Lgt(t)&&"sort"in t}function Egt({channel:t,fieldDef:e,fieldDef2:n,markDef:r,stack:i,config:a,isMidPoint:o}){if(zgt(e)&&void 0!==e.band)return e.band;if(Mgt(e)){const{timeUnit:t,bin:i}=e;if(t&&!n)return o?Dbt("timeUnitBandPosition",r,a):nlt(r.type)?Dbt("timeUnitBand",r,a):0;if(Sdt(i))return nlt(r.type)&&!o?1:.5}return(null===i||void 0===i?void 0:i.fieldChannel)===t&&o?.5:void 0}function Sgt(t,e,n,r,i,a){return!!(Sdt(e.bin)||e.timeUnit&&Lgt(e)&&"temporal"===e.type)&&!!Egt({channel:t,fieldDef:e,fieldDef2:n,stack:r,markDef:i,config:a})}function Dgt(t){return!!t&&"condition"in t}function Fgt(t){const e=t&&t["condition"];return!!e&&!xut(e)&&Mgt(e)}function Ngt(t){const e=t&&t["condition"];return!!e&&!xut(e)&&zgt(e)}function Tgt(t){const e=t&&t["condition"];return!!e&&(xut(e)||Pgt(e))}function Mgt(t){return!!t&&(!!t["field"]||"count"===t["aggregate"])}function Igt(t){return t&&t["type"]}function Rgt(t){return!!t&&"datum"in t}function $gt(t){return Lgt(t)&&Ygt(t)||Bgt(t)}function Bgt(t){return Rgt(t)&&Fut(t.datum)}function zgt(t){return Mgt(t)||Rgt(t)}function Lgt(t){return!!t&&("field"in t&&"type"in t||"count"===t["aggregate"])}function Pgt(t){return t&&"value"in t&&"value"in t}function Ugt(t){return!!t&&("scale"in t||"sort"in t)}function Wgt(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function qgt(t){return!!t&&"legend"in t}function Vgt(t){return!!t&&("format"in t||"formatType"in t)}function Ggt(t){return"op"in t}function Hgt(t,e={}){var n,r,i;let a=t.field;const o=e.prefix;let s=e.suffix,u="";if(Kgt(t))a=Sct("count");else{let o;if(!e.nofn)if(Ggt(t))o=t.op;else{const{bin:c,aggregate:l,timeUnit:f}=t;Sdt(c)?(o=Edt(c),s=(null!==(n=e.binSuffix)&&void 0!==n?n:"")+(null!==(r=e.suffix)&&void 0!==r?r:"")):l?_lt(l)?(u=`["${a}"]`,a="argmax_"+l.argmax):Olt(l)?(u=`["${a}"]`,a="argmin_"+l.argmin):o=String(l):f&&(o=Spt(f),s=(!tct(["range","mid"],e.binSuffix)&&e.binSuffix||"")+(null!==(i=e.suffix)&&void 0!==i?i:""))}o&&(a=a?`${o}_${a}`:o)}return s&&(a=`${a}_${s}`),o&&(a=`${o}_${a}`),e.forAs?Act(a):e.expr?xct(a,e.expr)+u:Oct(a)+u}function Xgt(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Mgt(t)&&!!t.bin;case"temporal":return!1}throw new Error(x.invalidFieldType(t.type))}function Ygt(t){return!Xgt(t)}function Kgt(t){return"count"===t.aggregate}function Jgt(t,e){var n;const{field:r,bin:i,timeUnit:a,aggregate:o}=t;if("count"===o)return e.countTitle;if(Sdt(i))return r+" (binned)";if(a){const t=null===(n=Ept(a))||void 0===n?void 0:n.unit;if(t)return`${r} (${_pt(t).join("-")})`}else if(o)return _lt(o)?`${r} for max ${o.argmax}`:Olt(o)?`${r} for min ${o.argmin}`:`${yct(o)} of ${r}`;return r}function Zgt(t){const{aggregate:e,bin:n,timeUnit:r,field:i}=t;if(_lt(e))return`${i} for argmax(${e.argmax})`;if(Olt(e))return`${i} for argmin(${e.argmin})`;const a=Ept(r),o=e||(null===a||void 0===a?void 0:a.unit)||(null===a||void 0===a?void 0:a.maxbins)&&"timeunit"||Sdt(n)&&"bin";return o?o.toUpperCase()+"("+i+")":i}const Qgt=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return Zgt(t);default:return Jgt(t,e)}};let tbt=Qgt;function ebt(t){tbt=t}function nbt(){ebt(Qgt)}function rbt(t,e,{allowDisabling:n,includeDefault:r=!0}){var i,a;const o=null!==(i=ibt(t))&&void 0!==i?i:{},s=o.title;if(!Mgt(t))return s;const u=t,c=r?abt(u,e):void 0;return n?kct(s,u.title,c):null!==(a=null!==s&&void 0!==s?s:u.title)&&void 0!==a?a:c}function ibt(t){return Wgt(t)&&t.axis?t.axis:qgt(t)&&t.legend?t.legend:Ogt(t)&&t.header?t.header:void 0}function abt(t,e){return tbt(t,e)}function obt(t){var e;if(Vgt(t)){const{format:e,formatType:n}=t;return{format:e,formatType:n}}{const n=null!==(e=ibt(t))&&void 0!==e?e:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function sbt(t,e){if(t.timeUnit)return"temporal";if(Sdt(t.bin))return"quantitative";switch(Cdt(e)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function ubt(t){return Mgt(t)?t:Fgt(t)?t.condition:void 0}function cbt(t){return zgt(t)?t:Ngt(t)?t.condition:void 0}function lbt(t,e,n){if(Nut(t)||Fut(t)||Dut(t)){const n=Nut(t)?"string":Fut(t)?"number":"boolean";return rpt(x.primitiveChannelDef(e,n,t)),{value:t}}return zgt(t)?fbt(t,e,n):Ngt(t)?Object.assign(Object.assign({},t),{condition:fbt(t.condition,e,n)}):t}function fbt(t,e,n){if(Vgt(t)){const{format:r,formatType:i}=t,a=Iut(t,["format","formatType"]);if(egt(i)&&!n.customFormatTypes)return rpt(x.customFormatTypeNotAllowed(e)),fbt(a,e,n)}else{const r=Wgt(t)?"axis":qgt(t)?"legend":Ogt(t)?"header":null;if(r&&t[r]){const i=t[r],{format:a,formatType:o}=i,s=Iut(i,["format","formatType"]);if(egt(o)&&!n.customFormatTypes)return rpt(x.customFormatTypeNotAllowed(e)),fbt(Object.assign(Object.assign({},t),{[r]:s}),e,n)}}return Mgt(t)?hbt(t,e):dbt(t)}function dbt(t){let e=t["type"];if(e)return t;const{datum:n}=t;return e=Fut(n)?"quantitative":Nut(n)?"nominal":apt(n)?"temporal":void 0,Object.assign(Object.assign({},t),{type:e})}function hbt(t,e){const{aggregate:n,timeUnit:r,bin:i,field:a}=t,o=Object.assign({},t);if(!n||Alt(n)||_lt(n)||Olt(n)||(rpt(x.invalidAggregate(n)),delete o.aggregate),r&&(o.timeUnit=Ept(r)),a&&(o.field=""+a),Sdt(i)&&(o.bin=pbt(i,e)),Ddt(i)&&!rdt(e)&&rpt(`Channel ${e} should not be used with "binned" bin.`),Lgt(o)){const{type:t}=o,e=smt(t);t!==e&&(o.type=e),"quantitative"!==t&&klt(n)&&(rpt(x.invalidFieldTypeForCountAggregate(t,n)),o.type="quantitative")}else if(!Ift(e)){const t=sbt(o,e);rpt(x.missingFieldType(e,t)),o["type"]=t}if(Lgt(o)){const{compatible:t,warning:n}=gbt(o,e);t||rpt(n)}if(Cgt(o)&&Nut(o.sort)){const{sort:t}=o;if(bgt(t))return Object.assign(Object.assign({},o),{sort:{encoding:t}});const e=t.substr(1);if("-"===t.charAt(0)&&bgt(e))return Object.assign(Object.assign({},o),{sort:{encoding:e,order:"descending"}})}if(Ogt(o)){const{header:t}=o,{orient:e}=t,n=Iut(t,["orient"]);if(e)return Object.assign(Object.assign({},o),{header:Object.assign(Object.assign({},n),{labelOrient:t.labelOrient||e,titleOrient:t.titleOrient||e})})}return o}function pbt(t,e){return Dut(t)?{maxbins:Tdt(e)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:Object.assign(Object.assign({},t),{maxbins:Tdt(e)})}const mbt={compatible:!0};function gbt(t,e){const n=t.type;if("geojson"===n&&"shape"!==e)return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case Flt:case Nlt:case Tlt:return Ygt(t)?{compatible:!1,warning:x.facetChannelShouldBeDiscrete(e)}:mbt;case Mlt:case Ilt:case Glt:case Hlt:case Xlt:case rft:case aft:case oft:case sft:case uft:case cft:case Jlt:case Llt:case Blt:case lft:return mbt;case Wlt:case Vlt:case Ult:case qlt:return n!==emt?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:mbt;case Zlt:case Qlt:case tft:case eft:case Klt:case Plt:case zlt:case Rlt:case $lt:return"nominal"!==n||t["sort"]?mbt:{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`};case nft:return tct(["ordinal","nominal"],t.type)?mbt:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case Ylt:return tct(["ordinal","nominal","geojson"],t.type)?mbt:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case ift:return"nominal"!==t.type||"sort"in t?mbt:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}function bbt(t){const{formatType:e}=obt(t);return"time"===e||!e&&ybt(t)}function ybt(t){return t&&("temporal"===t["type"]||Mgt(t)&&!!t.timeUnit)}function vbt(t,{timeUnit:e,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var a;const o=e&&(null===(a=Ept(e))||void 0===a?void 0:a.unit);let s,u=o||"temporal"===n;return Dpt(t)?s=t.signal:apt(t)?(u=!0,s=ppt(t)):(Nut(t)||Fut(t))&&u&&(s=`datetime(${JSON.stringify(t)})`,vpt(o)&&(Fut(t)&&t<1e4||Nut(t)&&isNaN(Date.parse(t)))&&(s=ppt({[o]:t}))),s?r&&u?`time(${s})`:s:i?void 0:JSON.stringify(t)}function xbt(t,e){const{type:n}=t;return e.map(e=>{const r=vbt(e,{timeUnit:Mgt(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:e})}function wbt(t,e){return Sdt(t.bin)?wdt(e)&&tct(["ordinal","nominal"],t.type):(console.warn("Only call this method for binned field defs."),!1)}function Obt(t){const{anchor:e,frame:n,offset:r,orient:i,color:a,subtitleColor:o,subtitleFont:s,subtitleFontSize:u,subtitleFontStyle:c,subtitleFontWeight:l,subtitleLineHeight:f,subtitlePadding:d}=t,h=Iut(t,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),p=Object.assign(Object.assign({},h),a?{fill:a}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign({},e?{anchor:e}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),g=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o?{subtitleColor:o}:{}),s?{subtitleFont:s}:{}),u?{subtitleFontSize:u}:{}),c?{subtitleFontStyle:c}:{}),l?{subtitleFontWeight:l}:{}),f?{subtitleLineHeight:f}:{}),d?{subtitlePadding:d}:{}),b=Yut(p,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:p,subtitleMarkConfig:b,nonMark:m,subtitle:g}}function _bt(t){return Nut(t)||xut(t)&&Nut(t[0])}function Abt(t){return Dpt(t)?t:void 0!==t?{value:t}:void 0}function jbt(t){return Dpt(t)?t.signal:Tut(t.value)}function kbt(t){return Dpt(t)?t.signal:null==t?null:Tut(t)}function Cbt(t,e,n){for(const r of n){const n=Dbt(r,e.markDef,e.config);void 0!==n&&(t[r]=Abt(n))}return t}function Ebt(t){var e;return[].concat(t.type,null!==(e=t.style)&&void 0!==e?e:[])}function Sbt(t,e,n,r={}){const{vgChannel:i,ignoreVgConfig:a}=r;return i&&void 0!==e[i]?e[i]:void 0!==e[t]?e[t]:!a||i&&i!==t?Dbt(t,e,n,r):void 0}function Dbt(t,e,n,{vgChannel:r}={}){return kct(r?Fbt(t,e,n.style):void 0,Fbt(t,e,n.style),r?n[e.type][r]:void 0,n[e.type][t],r?n.mark[r]:n.mark[t])}function Fbt(t,e,n){return Nbt(t,Ebt(e),n)}function Nbt(t,e,n){let r;e=kut(e);for(const i of e){const e=n[i];e&&void 0!==e[t]&&(r=e[t])}return r}function Tbt(t,e){return kut(t).reduce((t,n)=>{var r;return t.field.push(Hgt(n,e)),t.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),t},{field:[],order:[]})}function Mbt(t,e){const n=[...t];return e.forEach(t=>{for(const e of n)if(Hut(e,t))return;n.push(t)}),n}function Ibt(t,e){return Hut(t,e)||!e?t:t?[...kut(t),...kut(e)].join(", "):e}function Rbt(t,e){const n=t.value,r=e.value;if(null==n||null===r)return{explicit:t.explicit,value:null};if((_bt(n)||Dpt(n))&&(_bt(r)||Dpt(r)))return{explicit:t.explicit,value:Ibt(n,r)};if(_bt(n)||Dpt(n))return{explicit:t.explicit,value:n};if(_bt(r)||Dpt(r))return{explicit:t.explicit,value:r};if(!_bt(n)&&!Dpt(n)&&!_bt(r)&&!Dpt(r))return{explicit:t.explicit,value:Mbt(n,r)};throw new Error("It should never reach here")}function $bt(t,e){const n=t&&t[e];return!!n&&(xut(n)?ect(n,t=>!!t.field):Mgt(n)||Fgt(n))}function Bbt(t){return ect(_ft,e=>{if($bt(t,e)){const n=t[e];if(xut(n))return ect(n,t=>!!t.aggregate);{const t=ubt(n);return t&&!!t.aggregate}}return!1})}function zbt(t,e){const n=[],r=[],i=[],a=[],o={};return Wbt(t,(s,u)=>{if(Mgt(s)){const{field:c,aggregate:l,bin:f,timeUnit:d}=s,h=Iut(s,["field","aggregate","bin","timeUnit"]);if(l||d||f){const t=ibt(s),p=t&&t.title;let m=Hgt(s,{forAs:!0});const g=Object.assign(Object.assign(Object.assign({},p?[]:{title:rbt(s,e,{allowDisabling:!0})}),h),{field:m});if(l){let t;if(_lt(l)?(t="argmax",m=Hgt({op:"argmax",field:l.argmax},{forAs:!0}),g.field=`${m}.${c}`):Olt(l)?(t="argmin",m=Hgt({op:"argmin",field:l.argmin},{forAs:!0}),g.field=`${m}.${c}`):"boxplot"!==l&&"errorbar"!==l&&"errorband"!==l&&(t=l),t){const e={op:t,as:m};c&&(e.field=c),a.push(e)}}else if(n.push(m),Lgt(s)&&Sdt(f)){if(r.push({bin:f,field:c,as:m}),n.push(Hgt(s,{binSuffix:"end"})),wbt(s,u)&&n.push(Hgt(s,{binSuffix:"range"})),rdt(u)){const t={field:m+"_end"};o[u+"2"]=t}g.bin="binned",Ift(u)||(g["type"]=emt)}else if(d){i.push({timeUnit:d,field:c,as:m});const t=Lgt(s)&&s.type!==rmt&&"time";t&&(u===rft||u===sft?g["formatType"]=t:bdt(u)?g["legend"]=Object.assign({formatType:t},g["legend"]):rdt(u)&&(g["axis"]=Object.assign({formatType:t},g["axis"])))}o[u]=g}else n.push(c),o[u]=t[u]}else o[u]=t[u]}),{bins:r,timeUnits:i,aggregate:a,groupby:n,encoding:o}}function Lbt(t,e,n){const r=Odt(e,n);if(!r)return!1;if("binned"===r){const n=t[e===Rlt?Mlt:Ilt];return!!(Mgt(n)&&Mgt(t[e])&&Ddt(n.bin))}return!0}function Pbt(t,e,n){const r=e.type;return fct(t).reduce((i,a)=>{if(!Tft(a))return rpt(x.invalidEncodingChannel(a)),i;const o=t[a];if("angle"!==a||"arc"!==r||t.theta||(rpt(x.REPLACE_ANGLE_WITH_THETA),a=Llt),!Lbt(t,a,r))return rpt(x.incompatibleChannel(a,r)),i;if(a===Klt&&"line"===r){const e=ubt(t[a]);if(null===e||void 0===e?void 0:e.aggregate)return rpt(x.LINE_WITH_VARYING_SIZE),i}if(a===Glt&&(e.filled?"fill"in t:"stroke"in t))return rpt(x.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),i;if(a===aft||a===ift&&!xut(o)&&!Pgt(o)||a===sft&&xut(o))o&&(i[a]=kut(o).reduce((t,e)=>(Mgt(e)?t.push(hbt(e,a)):rpt(x.emptyFieldDef(e,a)),t),[]));else{if(a===sft&&null===o)i[a]=null;else if(!Mgt(o)&&!Rgt(o)&&!Pgt(o)&&!Dgt(o)&&!Dpt(o))return rpt(x.emptyFieldDef(o,a)),i;i[a]=lbt(o,a,n)}return i},{})}function Ubt(t){const e=[];for(const n of fct(t))if($bt(t,n)){const r=t[n],i=kut(r);for(const t of i)Mgt(t)?e.push(t):Fgt(t)&&e.push(t.condition)}return e}function Wbt(t,e,n){if(t)for(const r of fct(t)){const i=t[r];if(xut(i))for(const t of i)e.call(n,t,r);else e.call(n,i,r)}}function qbt(t,e,n,r){return t?fct(t).reduce((n,i)=>{const a=t[i];return xut(a)?a.reduce((t,n)=>e.call(r,t,n,i),n):e.call(r,n,a,i)},n):n}function Vbt(t,e){return fct(e).reduce((n,r)=>{switch(r){case Mlt:case Ilt:case uft:case lft:case cft:case Rlt:case $lt:case Llt:case Plt:case Blt:case zlt:case Ult:case Wlt:case qlt:case Vlt:case rft:case Ylt:case Jlt:case sft:return n;case ift:if("line"===t||"trail"===t)return n;case aft:case oft:{const t=e[r];if(xut(t)||Mgt(t))for(const e of kut(t))e.aggregate||n.push(Hgt(e,{}));return n}case Klt:if("trail"===t)return n;case Glt:case Hlt:case Xlt:case Zlt:case Qlt:case tft:case nft:case eft:{const t=ubt(e[r]);return t&&!t.aggregate&&n.push(Hgt(t,{})),n}}},[])}function Gbt(t){const{tooltip:e}=t,n=Iut(t,["tooltip"]);if(!e)return{filteredEncoding:t};let r,i;if(xut(e)){for(const t of e)t.aggregate?(r||(r=[]),r.push(t)):(i||(i=[]),i.push(t));r&&(n.tooltip=r)}else e["aggregate"]?n.tooltip=e:i=e;return xut(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function Hbt(t,e,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=t.map(({fieldPrefix:t,titlePrefix:n})=>{const i=r?" of "+e.field:"";return{field:t+e.field,type:e.type,title:Dpt(n)?{signal:n+`"${escape(i)}"`}:n+i}});return{tooltip:[...i,...Ubt(n)]}}function Xbt(t){const{axis:e,title:n,field:r}=t;return e&&void 0!==e.title?void 0:kct(n,r)}function Ybt(t,e,n,r,i){const{scale:a,axis:o}=n;return({partName:s,mark:u,positionPrefix:c,endPositionPrefix:l,aria:f,extraEncoding:d={}})=>{const h=Xbt(n);return Kbt(t,s,i,f,{mark:u,encoding:Object.assign(Object.assign(Object.assign({[e]:Object.assign(Object.assign(Object.assign({field:c+"_"+n.field,type:n.type},void 0!==h?{title:h}:{}),void 0!==a?{scale:a}:{}),void 0!==o?{axis:o}:{})},Nut(l)?{[e+"2"]:{field:l+"_"+n.field}}:{}),r),d)})}}function Kbt(t,e,n,r,i){const{clip:a,color:o,opacity:s}=t,u=t.type;return t[e]||void 0===t[e]&&n[e]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[e]),a?{clip:a}:{}),o?{color:o}:{}),s?{opacity:s}:{}),ilt(i.mark)?i.mark:{type:i.mark}),{style:`${u}-${e}`}),Dut(t[e])?{}:t[e]),!1===r?{aria:r}:{})})]:[]}function Jbt(t,e,n){const{encoding:r}=t,i="vertical"===e?"y":"x",a=r[i],o=r[i+"2"],s=r[i+"Error"],u=r[i+"Error2"];return{continuousAxisChannelDef:Zbt(a,n),continuousAxisChannelDef2:Zbt(o,n),continuousAxisChannelDefError:Zbt(s,n),continuousAxisChannelDefError2:Zbt(u,n),continuousAxis:i}}function Zbt(t,e){if(t&&t.aggregate){const{aggregate:n}=t,r=Iut(t,["aggregate"]);return n!==e&&rpt(x.errorBarContinuousAxisHasCustomizedAggregate(n,e)),r}return t}function Qbt(t,e){const{mark:n,encoding:r}=t,{x:i,y:a}=r;if($gt(i)){if($gt(a)){const t=Mgt(i)&&i.aggregate,r=Mgt(a)&&a.aggregate;if(t||r!==e){if(r||t!==e){if(t===e&&r===e)throw new Error("Both x and y cannot have aggregate");return ilt(n)&&n.orient?n.orient:"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if($gt(a))return"vertical";throw new Error("Need a valid continuous axis for "+e+"s")}const tyt="boxplot",eyt=["box","median","outliers","rule","ticks"],nyt=new vlt(tyt,iyt);function ryt(t){return Fut(t)?"tukey":t}function iyt(t,{config:e}){var n,r;const{mark:i,encoding:a,selection:o,projection:s}=t,u=Iut(t,["mark","encoding","selection","projection"]),c=ilt(i)?i:{type:i};o&&rpt(x.selectionNotSupported("boxplot"));const l=null!==(n=c.extent)&&void 0!==n?n:e.boxplot.extent,f=Sbt("size",c,e),d=ryt(l),{transform:h,continuousAxisChannelDef:p,continuousAxis:m,groupby:g,aggregate:b,encodingWithoutContinuousAxis:y,ticksOrient:v,boxOrient:w,customTooltipWithoutAggregatedField:O}=oyt(t,l,e),{color:_,size:A}=y,j=Iut(y,["color","size"]),k=t=>Ybt(c,m,p,t,e.boxplot),C=k(j),E=k(y),S=k(Object.assign(Object.assign({},j),A?{size:A}:{})),D=Hbt([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],p,y),F={type:"tick",color:"black",opacity:1,orient:v,invalid:null},N="min-max"===d?D:Hbt([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,y),T=[...C({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:N}),...C({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:N}),...C({partName:"ticks",mark:F,positionPrefix:"lower_whisker",aria:!1,extraEncoding:N}),...C({partName:"ticks",mark:F,positionPrefix:"upper_whisker",aria:!1,extraEncoding:N})],M=[..."tukey"!==d?T:[],...E({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:w,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:D}),...S({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},wut(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{}),f?{size:f}:{}),{orient:v,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:D})];let I;if("min-max"!==d){const t=`datum["lower_box_${p.field}"]`,n=`datum["upper_box_${p.field}"]`,r=`(${n} - ${t})`,i=`${t} - ${l} * ${r}`,a=`${n} + ${l} * ${r}`,o=`datum["${p.field}"]`,s={joinaggregate:ayt(p.field),groupby:g};let u=void 0;"tukey"===d&&(u={transform:[{filter:`(${i} <= ${o}) && (${o} <= ${a})`},{aggregate:[{op:"min",field:p.field,as:"lower_whisker_"+p.field},{op:"max",field:p.field,as:"upper_whisker_"+p.field},{op:"min",field:"lower_box_"+p.field,as:"lower_box_"+p.field},{op:"max",field:"upper_box_"+p.field,as:"upper_box_"+p.field},...b],groupby:g}],layer:T});const{tooltip:f}=j,h=Iut(j,["tooltip"]),{scale:y,axis:v}=p,x=Xbt(p),w=Kbt(c,"outliers",e.boxplot,!0,{transform:[{filter:`(${o} < ${i}) || (${o} > ${a})`}],mark:"point",encoding:Object.assign(Object.assign({[m]:Object.assign(Object.assign(Object.assign({field:p.field,type:p.type},void 0!==x?{title:x}:{}),void 0!==y?{scale:y}:{}),void 0!==v?{axis:v}:{})},h),O?{tooltip:O}:{})})[0];w&&u?I={transform:[s],layer:[w,u]}:w?(I=w,I.transform.unshift(s)):u&&(I=u,I.transform.unshift(s))}return I?Object.assign(Object.assign({},u),{layer:[I,{transform:h,layer:M}]}):Object.assign(Object.assign({},u),{transform:(null!==(r=u.transform)&&void 0!==r?r:[]).concat(h),layer:M})}function ayt(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}function oyt(t,e,n){const r=Qbt(t,tyt),{continuousAxisChannelDef:i,continuousAxis:a}=Jbt(t,r,tyt),o=i.field,s=ryt(e),u=[...ayt(o),{op:"median",field:o,as:"mid_box_"+o},{op:"min",field:o,as:("min-max"===s?"lower_whisker_":"min_")+o},{op:"max",field:o,as:("min-max"===s?"upper_whisker_":"max_")+o}],c="min-max"===s||"tukey"===s?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:"iqr_"+o},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${e}, datum["max_${o}"])`,as:"upper_whisker_"+o},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${e}, datum["min_${o}"])`,as:"lower_whisker_"+o}],l=t.encoding,f=a,d=(l[f],Iut(l,["symbol"===typeof f?f:f+""])),{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Gbt(d),{bins:m,timeUnits:g,aggregate:b,groupby:y,encoding:v}=zbt(p,n),x="vertical"===r?"horizontal":"vertical",w=r,O=[...m,...g,{aggregate:[...b,...u],groupby:y},...c];return{transform:O,groupby:y,aggregate:b,continuousAxisChannelDef:i,continuousAxis:a,encodingWithoutContinuousAxis:v,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:h}}const syt="errorbar",uyt=["ticks","rule"],cyt=new vlt(syt,lyt);function lyt(t,{config:e}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:a,ticksOrient:o,markDef:s,outerSpec:u,tooltipEncoding:c}=myt(t,syt,e),l=Ybt(s,i,r,a,e.errorbar),f={type:"tick",orient:o},d=[...l({partName:"ticks",mark:f,positionPrefix:"lower",aria:!1,extraEncoding:c}),...l({partName:"ticks",mark:f,positionPrefix:"upper",aria:!1,extraEncoding:c}),...l({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return Object.assign(Object.assign(Object.assign({},u),{transform:n}),d.length>1?{layer:d}:Object.assign({},d[0]))}function fyt(t,e){const{encoding:n}=t;if(dyt(n))return{orient:Qbt(t,e),inputType:"raw"};const r=hyt(n),i=pyt(n),a=n.x,o=n.y;if(r){if(i)throw new Error(e+" cannot be both type aggregated-upper-lower and aggregated-error");const t=n.x2,r=n.y2;if(zgt(t)&&zgt(r))throw new Error(e+" cannot have both x2 and y2");if(zgt(t)){if($gt(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+e)}if(zgt(r)){if($gt(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+e)}throw new Error("No ranged axis")}{const t=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(zgt(r)&&!zgt(t))throw new Error(e+" cannot have xError2 without xError");if(zgt(s)&&!zgt(i))throw new Error(e+" cannot have yError2 without yError");if(zgt(t)&&zgt(i))throw new Error(e+" cannot have both xError and yError with both are quantiative");if(zgt(t)){if($gt(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(zgt(i)){if($gt(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function dyt(t){return(zgt(t.x)||zgt(t.y))&&!zgt(t.x2)&&!zgt(t.y2)&&!zgt(t.xError)&&!zgt(t.xError2)&&!zgt(t.yError)&&!zgt(t.yError2)}function hyt(t){return zgt(t.x2)||zgt(t.y2)}function pyt(t){return zgt(t.xError)||zgt(t.xError2)||zgt(t.yError)||zgt(t.yError2)}function myt(t,e,n){var r;const{mark:i,encoding:a,selection:o,projection:s}=t,u=Iut(t,["mark","encoding","selection","projection"]),c=ilt(i)?i:{type:i};o&&rpt(x.selectionNotSupported(e));const{orient:l,inputType:f}=fyt(t,e),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:m,continuousAxis:g}=Jbt(t,l,e),{errorBarSpecificAggregate:b,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:w}=gyt(c,d,h,p,m,f,e,n),O=a,_=g,A=(O[_],"x"===g?"x2":"y2"),j=(O[A],"x"===g?"xError":"yError"),k=(O[j],"x"===g?"xError2":"yError2"),C=(O[k],Iut(O,["symbol"===typeof _?_:_+"","symbol"===typeof A?A:A+"","symbol"===typeof j?j:j+"","symbol"===typeof k?k:k+""])),{bins:E,timeUnits:S,aggregate:D,groupby:F,encoding:N}=zbt(C,n),T=[...D,...b],M="raw"!==f?[]:F,I=Hbt(v,d,N,w);return{transform:[...null!==(r=u.transform)&&void 0!==r?r:[],...E,...S,...0===T.length?[]:[{aggregate:T,groupby:M}],...y],groupby:M,continuousAxisChannelDef:d,continuousAxis:g,encodingWithoutContinuousAxis:N,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:c,outerSpec:u,tooltipEncoding:I}}function gyt(t,e,n,r,i,a,o,s){let u=[],c=[];const l=e.field;let f,d=!1;if("raw"===a){const e=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":s.errorbar.center,n=t.extent?t.extent:"mean"===e?"stderr":"iqr";if("median"===e!==("iqr"===n)&&rpt(x.errorBarCenterIsUsedWithWrongExtent(e,n,o)),"stderr"===n||"stdev"===n)u=[{op:n,field:l,as:"extent_"+l},{op:e,field:l,as:"center_"+l}],c=[{calculate:`datum["center_${l}"] + datum["extent_${l}"]`,as:"upper_"+l},{calculate:`datum["center_${l}"] - datum["extent_${l}"]`,as:"lower_"+l}],f=[{fieldPrefix:"center_",titlePrefix:yct(e)},{fieldPrefix:"upper_",titlePrefix:byt(e,n,"+")},{fieldPrefix:"lower_",titlePrefix:byt(e,n,"-")}],d=!0;else{let e,r,i;t.center&&t.extent&&rpt(x.errorBarCenterIsNotNeeded(t.extent,o)),"ci"===n?(e="mean",r="ci0",i="ci1"):(e="median",r="q1",i="q3"),u=[{op:r,field:l,as:"lower_"+l},{op:i,field:l,as:"upper_"+l},{op:e,field:l,as:"center_"+l}],f=[{fieldPrefix:"upper_",titlePrefix:rbt({field:l,aggregate:i,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:rbt({field:l,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:rbt({field:l,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&rpt(x.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),"aggregated-upper-lower"===a?(f=[],c=[{calculate:`datum["${n.field}"]`,as:"upper_"+l},{calculate:`datum["${l}"]`,as:"lower_"+l}]):"aggregated-error"===a&&(f=[{fieldPrefix:"",titlePrefix:l}],c=[{calculate:`datum["${l}"] + datum["${r.field}"]`,as:"upper_"+l}],i?c.push({calculate:`datum["${l}"] + datum["${i.field}"]`,as:"lower_"+l}):c.push({calculate:`datum["${l}"] - datum["${r.field}"]`,as:"lower_"+l}));for(const t of c)f.push({fieldPrefix:t.as.substring(0,6),titlePrefix:_ct(_ct(t.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function byt(t,e,n){return yct(t)+" "+n+" "+e}const yyt="errorband",vyt=["band","borders"],xyt=new vlt(yyt,wyt);function wyt(t,{config:e}){const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:a,markDef:o,outerSpec:s,tooltipEncoding:u}=myt(t,yyt,e),c=o,l=Ybt(c,i,r,a,e.errorband),f=void 0!==t.encoding.x&&void 0!==t.encoding.y;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p=Object.assign(Object.assign({},c.interpolate?{interpolate:c.interpolate}:{}),c.tension&&c.interpolate?{tension:c.tension}:{});return f?(d=Object.assign(Object.assign(Object.assign({},d),p),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign({},h),p)):c.interpolate?rpt(x.errorBand1DNotSupport("interpolate")):c.tension&&rpt(x.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},s),{transform:n,layer:[...l({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...l({partName:"borders",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:u}),...l({partName:"borders",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:u})]})}const Oyt={};function _yt(t,e,n){const r=new vlt(t,e);Oyt[t]={normalizer:r,parts:n}}function Ayt(){return fct(Oyt)}_yt(tyt,iyt,eyt),_yt(syt,lyt,uyt),_yt(yyt,wyt,vyt);const jyt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],kyt=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Cyt={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},Eyt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Syt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Dyt=(fct(Syt),"_vgsid_"),Fyt={single:{on:"click",fields:[Dyt],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Dyt],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Nyt(t){return!!t&&("legend"===t||!!t.legend)}function Tyt(t){return Nyt(t)&&wut(t)}function Myt(t){return Ryt(t)||$yt(t)||Iyt(t)}function Iyt(t){return"concat"in t}function Ryt(t){return"vconcat"in t}function $yt(t){return"hconcat"in t}function Byt(t){return wut(t)&&void 0!==t["step"]}function zyt(t){return t["view"]||t["width"]||t["height"]}const Lyt=20,Pyt={align:1,bounds:1,center:1,columns:1,spacing:1},Uyt=fct(Pyt);function Wyt(t,e,n){var r,i;const a=n[e],o={},{spacing:s,columns:u}=a;void 0!==s&&(o.spacing=s),void 0!==u&&(_gt(t)&&!wgt(t.facet)||Iyt(t))&&(o.columns=u),Ryt(t)&&(o.columns=1);for(const c of Uyt)if(void 0!==t[c])if("spacing"===c){const e=t[c];o[c]=Fut(e)?e:{row:null!==(r=e.row)&&void 0!==r?r:s,column:null!==(i=e.column)&&void 0!==i?i:s}}else o[c]=t[c];return o}function qyt(t,e){var n;return null!==(n=t[e])&&void 0!==n?n:t["width"===e?"continuousWidth":"continuousHeight"]}function Vyt(t,e){const n=Gyt(t,e);return Byt(n)?n.step:Hyt}function Gyt(t,e){var n;const r=null!==(n=t[e])&&void 0!==n?n:t["width"===e?"discreteWidth":"discreteHeight"];return kct(r,{step:t.step})}const Hyt=20,Xyt={continuousWidth:200,continuousHeight:200,step:Hyt};const Yyt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Xyt,mark:flt,arc:{},area:{},bar:plt,circle:{},geoshape:{},image:{},line:{},point:{},rect:mlt,rule:{color:"black"},square:{},text:{color:"black"},tick:glt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Smt,projection:{},legend:Eyt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Fyt,style:{},title:{},facet:{spacing:Lyt},concat:{spacing:Lyt}},Kyt=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Jyt={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Zyt={blue:Kyt[0],orange:Kyt[1],red:Kyt[2],teal:Kyt[3],green:Kyt[4],yellow:Kyt[5],purple:Kyt[6],pink:Kyt[7],brown:Kyt[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Qyt(t={}){return{signals:[{name:"color",value:wut(t)?Object.assign(Object.assign({},Zyt),t):Zyt}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function tvt(t){return{signals:[{name:"fontSize",value:wut(t)?Object.assign(Object.assign({},Jyt),t):Jyt}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function evt(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function nvt(t={}){const{color:e,font:n,fontSize:r}=t,i=Iut(t,["color","font","fontSize"]);return _ut({},Yyt,n?evt(n):{},e?Qyt(e):{},r?tvt(r):{},i||{})}const rvt=["view",...rlt],ivt=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],avt=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},llt);function ovt(t){t=Xut(t);for(const e of ivt)delete t[e];if(t.axis)for(const e in t.axis)Mct(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of jyt)delete t.legend[e];if(t.mark){for(const e of clt)delete t.mark[e];t.mark.tooltip&&wut(t.mark.tooltip)&&delete t.mark.tooltip}for(const e of rvt){for(const r of clt)delete t[e][r];const n=avt[e];if(n)for(const r of n)delete t[e][r];uvt(t,e)}for(const e of Ayt())delete t[e];svt(t);for(const e in t)wut(t[e])&&lct(t[e])&&delete t[e];return lct(t)?void 0:t}function svt(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:r}=Obt(t.title);lct(e)||(t.style["group-title"]=Object.assign(Object.assign({},t.style["group-title"]),e)),lct(n)||(t.style["group-subtitle"]=Object.assign(Object.assign({},t.style["group-subtitle"]),n)),lct(r)?delete t.title:t.title=r}function uvt(t,e,n,r){const i=r?t[e][r]:t[e];"view"===e&&(n="cell");const a=Object.assign(Object.assign({},i),t.style[null!==n&&void 0!==n?n:e]);lct(a)||(t.style[null!==n&&void 0!==n?n:e]=a),r||delete t[e]}function cvt(t){return"layer"in t}function lvt(t){return"repeat"in t}function fvt(t){return!xut(t.repeat)&&t.repeat["layer"]}class dvt{map(t,e){return _gt(t)?this.mapFacet(t,e):lvt(t)?this.mapRepeat(t,e):$yt(t)?this.mapHConcat(t,e):Ryt(t)?this.mapVConcat(t,e):Iyt(t)?this.mapConcat(t,e):this.mapLayerOrUnit(t,e)}mapLayerOrUnit(t,e){if(cvt(t))return this.mapLayer(t,e);if(ylt(t))return this.mapUnit(t,e);throw new Error(x.invalidSpec(t))}mapLayer(t,e){return Object.assign(Object.assign({},t),{layer:t.layer.map(t=>this.mapLayerOrUnit(t,e))})}mapHConcat(t,e){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(t=>this.map(t,e))})}mapVConcat(t,e){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(t=>this.map(t,e))})}mapConcat(t,e){const{concat:n}=t,r=Iut(t,["concat"]);return Object.assign(Object.assign({},r),{concat:n.map(t=>this.map(t,e))})}mapFacet(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}mapRepeat(t,e){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,e)})}}const hvt={zero:1,center:1,normalize:1};function pvt(t){return t in hvt}const mvt=new Set([Pct,Wct,Uct,Xct,Gct,Zct,Qct,Vct,Yct,Kct]),gvt=new Set([Wct,Uct,Pct]);function bvt(t,e){var n,r;const i="x"===e?"y":"radius",a=t[e],o=t[i];if(Mgt(a)&&Mgt(o))if("quantitative"===Igt(a)&&"quantitative"===Igt(o)){if(a.stack)return e;if(o.stack)return i;const t=Mgt(a)&&!!a.aggregate,s=Mgt(o)&&!!o.aggregate;if(t!==s)return t?e:i;{const t=null===(n=a.scale)||void 0===n?void 0:n.type,s=null===(r=o.scale)||void 0===r?void 0:r.type;if(t&&"linear"!==t)return i;if(s&&"linear"!==s)return e}}else{if("quantitative"===Igt(a))return e;if("quantitative"===Igt(o))return i}else{if("quantitative"===Igt(a))return e;if("quantitative"===Igt(o))return i}}function yvt(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function vvt(t,e,n={}){const r=ilt(t)?t.type:t;if(!mvt.has(r))return null;const i=bvt(e,"x")||bvt(e,"theta");if(!i)return null;const a=e[i],o=Mgt(a)?Hgt(a,{}):void 0;let s=yvt(i),u=e[s],c=Mgt(u)?Hgt(u,{}):void 0;c===o&&(c=void 0,u=void 0,s=void 0);const l=tdt.reduce((t,n)=>{if("tooltip"!==n&&$bt(e,n)){const r=e[n];for(const e of kut(r)){const r=ubt(e);if(r.aggregate)continue;const i=Hgt(r,{});i&&i===c||t.push({channel:n,fieldDef:r})}}return t},[]);let f;if(void 0!==a.stack?f=Dut(a.stack)?a.stack?"zero":null:a.stack:l.length>0&&gvt.has(r)&&(f="zero"),!f||!pvt(f))return null;if(Bbt(e)&&0===l.length)return null;if(a.scale&&a.scale.type&&a.scale.type!==umt.LINEAR){if(n.disallowNonLinearStack)return null;rpt(x.cannotStackNonLinearScale(a.scale.type))}return zgt(e[Bft(i)])?(void 0!==a.stack&&rpt(x.cannotStackRangedMark(i)),null):(Mgt(a)&&a.aggregate&&!tct(Elt,a.aggregate)&&rpt(x.stackNonSummativeAggregate(a.aggregate)),{groupbyChannel:u?s:void 0,groupbyField:c,fieldChannel:i,impute:null!==a.impute&&elt(r),stackBy:l,offset:f})}function xvt(t){const{point:e,line:n}=t,r=Iut(t,["point","line"]);return fct(r).length>1?r:r.type}function wvt(t){for(const e of["line","area","rule","trail"])t[e]&&(t=Object.assign(Object.assign({},t),{[e]:Kut(t[e],["point","line"])}));return t}function Ovt(t,e={},n){return"transparent"===t.point?{opacity:0}:t.point?wut(t.point)?t.point:{}:void 0!==t.point?null:e.point||n.shape?wut(e.point)?e.point:{}:void 0}function _vt(t,e={}){return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:e.line?!0===e.line?{}:e.line:void 0}class Avt{constructor(){this.name="path-overlay"}hasMatchingType(t,e){if(ylt(t)){const{mark:n,encoding:r}=t,i=ilt(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!Ovt(i,e[i.type],r);case"area":return!!Ovt(i,e[i.type],r)||!!_vt(i,e[i.type])}}return!1}run(t,e,n){const{config:r}=e,{selection:i,projection:a,encoding:o,mark:s}=t,u=Iut(t,["selection","projection","encoding","mark"]),c=ilt(s)?s:{type:s},l=Ovt(c,r[c.type],o),f="area"===c.type&&_vt(c,r[c.type]),d=[Object.assign(Object.assign({},i?{selection:i}:{}),{mark:xvt(Object.assign(Object.assign({},"area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{}),c)),encoding:Kut(o,["shape"])})],h=vvt(c,o);let p=o;if(h){const{fieldChannel:t,offset:e}=h;p=Object.assign(Object.assign({},o),{[t]:Object.assign(Object.assign({},o[t]),e?{stack:e}:{})})}return f&&d.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},Yut(c,["clip","interpolate","tension","tooltip"])),f),encoding:p})),l&&d.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},Yut(c,["clip","tooltip"])),l),encoding:p})),n(Object.assign(Object.assign({},u),{layer:d}),Object.assign(Object.assign({},e),{config:wvt(r)}))}}class jvt{constructor(){this.name="RangeStep"}hasMatchingType(t){var e;if(ylt(t)&&t.encoding)for(const n of ndt){const r=t.encoding[n];if(r&&zgt(r)&&(null===(e=null===r||void 0===r?void 0:r.scale)||void 0===e?void 0:e["rangeStep"]))return!0}return!1}run(t){var e;const n={};let r=Object.assign({},t.encoding);for(const i of ndt){const t=zft(i),a=r[i];if(a&&zgt(a)&&(null===(e=null===a||void 0===a?void 0:a.scale)||void 0===e?void 0:e["rangeStep"])){const{scale:e}=a,o=Iut(a,["scale"]),s=e,{rangeStep:u}=s,c=Iut(s,["rangeStep"]);n[t]={step:e["rangeStep"]},rpt(x.RANGE_STEP_DEPRECATED),r=Object.assign(Object.assign({},r),{[i]:Object.assign(Object.assign({},o),lct(c)?{}:{scale:c})})}}return Object.assign(Object.assign(Object.assign({},n),t),{encoding:r})}}function kvt(t,e){return e?wgt(t)?Nvt(t,e):Svt(t,e):t}function Cvt(t,e){return e?Nvt(t,e):t}function Evt(t,e,n){const r=e[t];return jgt(r)?r.repeat in n?Object.assign(Object.assign({},e),{[t]:n[r.repeat]}):void rpt(x.noSuchRepeatedValue(r.repeat)):e}function Svt(t,e){if(t=Evt("field",t,e),void 0!==t){if(null===t)return null;if(Cgt(t)&&vgt(t.sort)){const n=Evt("field",t.sort,e);t=Object.assign(Object.assign({},t),n?{sort:n}:{})}return t}}function Dvt(t,e){if(Mgt(t))return Svt(t,e);{const n=Evt("datum",t,e);return n===t||n.type||(n.type="nominal"),n}}function Fvt(t,e){if(!zgt(t)){if(Ngt(t)){const n=Dvt(t.condition,e);if(n)return Object.assign(Object.assign({},t),{condition:n});{const{condition:e}=t,n=Iut(t,["condition"]);return n}}return t}{const n=Dvt(t,e);if(n)return n;if(Dgt(t))return{condition:t.condition}}}function Nvt(t,e){const n={};for(const r in t)if(Sut(t,r)){const i=t[r];if(xut(i))n[r]=i.map(t=>Fvt(t,e)).filter(t=>t);else{const t=Fvt(i,e);void 0!==t&&(n[r]=t)}}return n}class Tvt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ylt(t)){const{encoding:e,mark:n}=t;if("line"===n)for(const t of Mft){const n=Rft(t),r=e[n];if(e[t]&&(Mgt(r)&&!Ddt(r.bin)||Rgt(r)))return!0}}return!1}run(t,e,n){const{encoding:r}=t;return rpt(x.lineWithRange(!!r.x2,!!r.y2)),n(Object.assign(Object.assign({},t),{mark:"rule"}),e)}}class Mvt extends dvt{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[nyt,cyt,xyt,new Avt,new Tvt,new jvt]}map(t,e){if(ylt(t)){const n=$bt(t.encoding,Flt),r=$bt(t.encoding,Nlt),i=$bt(t.encoding,Tlt);if(n||r||i)return this.mapFacetedUnit(t,e)}return super.map(t,e)}mapUnit(t,e){const{parentEncoding:n,parentProjection:r}=e,i=Object.assign(Object.assign({},t),{encoding:Cvt(t.encoding,e.repeater)});if(n||r)return this.mapUnitWithParentEncodingOrProjection(i,e);const a=this.mapLayerOrUnit.bind(this);for(const o of this.nonFacetUnitNormalizers)if(o.hasMatchingType(i,e.config))return o.run(i,e,a);return i}mapRepeat(t,e){return fvt(t)?this.mapLayerRepeat(t,e):this.mapNonLayerRepeat(t,e)}mapLayerRepeat(t,e){const{repeat:n,spec:r}=t,i=Iut(t,["repeat","spec"]),{row:a,column:o,layer:s}=n,{repeater:u={},repeaterPrefix:c=""}=e;return a||o?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),o?{column:o}:{}),spec:{repeat:{layer:s},spec:r}}),e):Object.assign(Object.assign({},i),{layer:s.map(t=>{const n=Object.assign(Object.assign({},u),{layer:t}),i=(r.name||"")+c+"child__layer_"+mct(t),a=this.mapLayerOrUnit(r,Object.assign(Object.assign({},e),{repeater:n,repeaterPrefix:i}));return a.name=i,a})})}mapNonLayerRepeat(t,e){var n;const{repeat:r,spec:i,data:a}=t,o=Iut(t,["repeat","spec","data"]);!xut(r)&&t.columns&&(t=Kut(t,["columns"]),rpt(x.columnsNotSupportByRowCol("repeat")));const s=[],{repeater:u={},repeaterPrefix:c=""}=e,l=!xut(r)&&r.row||[u?u.row:null],f=!xut(r)&&r.column||[u?u.column:null],d=xut(r)&&r||[u?u.repeat:null];for(const p of d)for(const t of l)for(const n of f){const a={repeat:p,row:t,column:n,layer:u.layer},o=(i.name||"")+c+"child__"+(xut(r)?""+mct(p):(r.row?"row_"+mct(t):"")+(r.column?"column_"+mct(n):"")),l=this.map(i,Object.assign(Object.assign({},e),{repeater:a,repeaterPrefix:o}));l.name=o,s.push(Kut(l,["data"]))}const h=xut(r)?t.columns:r.column?r.column.length:1;return Object.assign(Object.assign({data:null!==(n=i.data)&&void 0!==n?n:a,align:"all"},o),{columns:h,concat:s})}mapFacet(t,e){const{facet:n}=t;return wgt(n)&&t.columns&&(t=Kut(t,["columns"]),rpt(x.columnsNotSupportByRowCol("facet"))),super.mapFacet(t,e)}mapUnitWithParentEncodingOrProjection(t,e){const{encoding:n,projection:r}=t,{parentEncoding:i,parentProjection:a,config:o}=e,s=Rvt({parentProjection:a,projection:r}),u=Ivt({parentEncoding:i,encoding:Cvt(n,e.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),s?{projection:s}:{}),u?{encoding:u}:{}),{config:o})}mapFacetedUnit(t,e){const n=t.encoding,{row:r,column:i,facet:a}=n,o=Iut(n,["row","column","facet"]),{mark:s,width:u,projection:c,height:l,view:f,selection:d,encoding:h}=t,p=Iut(t,["mark","width","projection","height","view","selection","encoding"]),{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:a},e),b=Cvt(o,e.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},p),g),{facet:m,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),l?{height:l}:{}),f?{view:f}:{}),c?{projection:c}:{}),{mark:s,encoding:b}),d?{selection:d}:{})}),e)}getFacetMappingAndLayout(t,e){var n;const{row:r,column:i,facet:a}=t;if(r||i){a&&rpt(x.facetChannelDropped([...r?[Flt]:[],...i?[Nlt]:[]]));const e={},o={};for(const r of[Flt,Nlt]){const i=t[r];if(i){const{align:t,center:a,spacing:s,columns:u}=i,c=Iut(i,["align","center","spacing","columns"]);e[r]=c;for(const e of["align","center","spacing"])void 0!==i[e]&&(o[e]=null!==(n=o[e])&&void 0!==n?n:{},o[e][r]=i[e])}}return{facetMapping:e,layout:o}}{const{align:t,center:n,spacing:r,columns:i}=a,o=Iut(a,["align","center","spacing","columns"]);return{facetMapping:kvt(o,e.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},t?{align:t}:{}),n?{center:n}:{}),r?{spacing:r}:{}),i?{columns:i}:{})}}}mapLayer(t,e){var{parentEncoding:n,parentProjection:r}=e,i=Iut(e,["parentEncoding","parentProjection"]);const{encoding:a,projection:o}=t,s=Iut(t,["encoding","projection"]),u=Object.assign(Object.assign({},i),{parentEncoding:Ivt({parentEncoding:n,encoding:a}),parentProjection:Rvt({parentProjection:r,projection:o})});return super.mapLayer(s,u)}}function Ivt(t){const{parentEncoding:e,encoding:n}=t;if(e&&n){const t=fct(e).reduce((t,e)=>(n[e]&&t.push(e),t),[]);t.length>0&&rpt(x.encodingOverridden(t))}const r=Object.assign(Object.assign({},null!==e&&void 0!==e?e:{}),null!==n&&void 0!==n?n:{});return lct(r)?void 0:r}function Rvt(t){const{parentProjection:e,projection:n}=t;return e&&n&&rpt(x.projectionOverridden({parentProjection:e,projection:n})),null!==n&&void 0!==n?n:e}function $vt(t,e){void 0===e&&(e=nvt(t.config));const n=zvt(t,e),{width:r,height:i}=t,a=Pvt(n,{width:r,height:i,autosize:t.autosize},e);return Object.assign(Object.assign({},n),a?{autosize:a}:{})}const Bvt=new Mvt;function zvt(t,e={}){return Bvt.map(t,{config:e})}function Lvt(t){return Nut(t)?{type:t}:null!==t&&void 0!==t?t:{}}function Pvt(t,e,n){let{width:r,height:i}=e;const a=ylt(t)||cvt(t),o={};a?"container"==r&&"container"==i?(o.type="fit",o.contains="padding"):"container"==r?(o.type="fit-x",o.contains="padding"):"container"==i&&(o.type="fit-y",o.contains="padding"):("container"==r&&(rpt(x.containerSizeNonSingle("width")),r=void 0),"container"==i&&(rpt(x.containerSizeNonSingle("height")),i=void 0));const s=Object.assign(Object.assign(Object.assign({type:"pad"},o),n?Lvt(n.autosize):{}),Lvt(t.autosize));if("fit"!==s.type||a||(rpt(x.FIT_NON_SINGLE),s.type="pad"),"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&rpt(x.containerSizeNotCompatibleWithAutosize("width")),"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&rpt(x.containerSizeNotCompatibleWithAutosize("height")),!Hut(s,{type:"pad"}))return s}function Uvt(t){return"fit"===t||"fit-x"===t||"fit-y"===t}function Wvt(t){return t?"fit-"+odt(t):"fit"}const qvt=["background","padding"];function Vvt(t){return qvt.reduce((e,n)=>(t&&void 0!==t[n]&&(e[n]=t[n]),e),{})}class Gvt{constructor(t={},e={}){this.explicit=t,this.implicit=e}clone(){return new Gvt(Xut(this.explicit),Xut(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return kct(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,e){void 0!==e.value&&this.set(t,e.value,e.explicit)}set(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this}copyKeyFromSplit(t,e){void 0!==e.explicit[t]?this.set(t,e.explicit[t],!0):void 0!==e.implicit[t]&&this.set(t,e.implicit[t],!1)}copyKeyFromObject(t,e){void 0!==e[t]&&this.set(t,e[t],!0)}copyAll(t){for(const e of fct(t.combine())){const n=t.getWithExplicit(e);this.setWithExplicit(e,n)}}}function Hvt(t){return{explicit:!0,value:t}}function Xvt(t){return{explicit:!1,value:t}}function Yvt(t){return(e,n,r,i)=>{const a=t(e.value,n.value);return a>0?e:a<0?n:Kvt(e,n,r,i)}}function Kvt(t,e,n,r){return t.explicit&&e.explicit&&rpt(x.mergeConflictingProperty(n,r,t.value,e.value)),t}function Jvt(t,e,n,r,i=Kvt){return void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:Hut(t.value,e.value)?t:i(t,e,n,r)}class Zvt extends Gvt{constructor(t={},e={},n=!1){super(t,e),this.explicit=t,this.implicit=e,this.parseNothing=n}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Qvt(t){return"url"in t}function txt(t){return"values"in t}function ext(t){return"name"in t&&!Qvt(t)&&!txt(t)&&!nxt(t)}function nxt(t){return t&&(rxt(t)||ixt(t)||axt(t))}function rxt(t){return"sequence"in t}function ixt(t){return"sphere"in t}function axt(t){return"graticule"in t}const oxt="main",sxt="raw";function uxt(t){return"filter"in t}function cxt(t){return void 0!==(null===t||void 0===t?void 0:t["stop"])}function lxt(t){return"lookup"in t}function fxt(t){return"data"in t}function dxt(t){return"selection"in t}function hxt(t){return"pivot"in t}function pxt(t){return"density"in t}function mxt(t){return"quantile"in t}function gxt(t){return"regression"in t}function bxt(t){return"loess"in t}function yxt(t){return"sample"in t}function vxt(t){return"window"in t}function xxt(t){return"joinaggregate"in t}function wxt(t){return"flatten"in t}function Oxt(t){return"calculate"in t}function _xt(t){return"bin"in t}function Axt(t){return"impute"in t}function jxt(t){return"timeUnit"in t}function kxt(t){return"aggregate"in t}function Cxt(t){return"stack"in t}function Ext(t){return"fold"in t}function Sxt(t){return t.map(t=>uxt(t)?{filter:Gut(t.filter,Qpt)}:t)}function Dxt(t,e,n,r){const i=Dgt(e)&&e.condition,a=r(e);if(i){const e=kut(i),o=e.map(e=>{const n=r(e),i=Agt(e)?RAt(t,e.selection):zAt(t,e.test);return Object.assign({test:i},n)});return{[n]:[...o,...void 0!==a?[a]:[]]}}return void 0!==a?{[n]:a}:{}}function Fxt(t,e="text"){const n=t.encoding[e];return Dxt(t,n,e,e=>Nxt(e,t.config))}function Nxt(t,e,n="datum"){if(t){if(Pgt(t))return Abt(t.value);if(zgt(t)){const{format:r,formatType:i}=obt(t);return igt({fieldOrDatumDef:t,format:r,formatType:i,expr:n,config:e})}}}function Txt(t,e={}){const{encoding:n,markDef:r,config:i,stack:a}=t,o=n.tooltip;if(xut(o))return{tooltip:Ixt({tooltip:o},a,i,e)};{const s=e.reactiveGeom?"datum.datum":"datum";return Dxt(t,o,"tooltip",t=>{const o=Nxt(t,i,s);if(o)return o;if(null===t)return;let u=Sbt("tooltip",r,i);return!0===u&&(u={content:"encoding"}),Nut(u)?{value:u}:wut(u)?"encoding"===u.content?Ixt(n,a,i,e):{signal:s}:void 0})}}function Mxt(t,e,n,{reactiveGeom:r}={}){const i={},a=r?"datum.datum":"datum",o=[];function s(r,s){const u=Rft(s),c=Lgt(r)?r:Object.assign(Object.assign({},r),{type:t[u].type}),l=kut(rbt(c,n,{allowDisabling:!1})).join(", ");let f;if(rdt(s)){const r="x"===s?"x2":"y2",o=ubt(t[r]);if(Ddt(c.bin)&&o){const t=Hgt(c,{expr:a}),e=Hgt(o,{expr:a}),{format:s,formatType:u}=obt(c);f=hgt(t,e,s,u,n),i[r]=!0}else if(e&&e.fieldChannel===s&&"normalize"===e.offset){const{format:t,formatType:e}=obt(c);f=igt({fieldOrDatumDef:c,format:t,formatType:e,expr:a,config:n,normalizeStack:!0}).signal}}f=null!==f&&void 0!==f?f:Nxt(c,n,a).signal,o.push({channel:s,key:l,value:f})}Wbt(t,(t,e)=>{Mgt(t)?s(t,e):Fgt(t)&&s(t.condition,e)});const u={};for(const{channel:c,key:l,value:f}of o)i[c]||u[l]||(u[Tut(l)]=f);return u}function Ixt(t,e,n,{reactiveGeom:r}={}){const i=Mxt(t,e,n,{reactiveGeom:r}),a=hct(i).map(({key:t,value:e})=>`${t}: ${e}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function Rxt(t){const{markDef:e,config:n}=t,r=Sbt("aria",e,n);return!1===r?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),$xt(t)),Bxt(t))}function $xt(t){const{mark:e,markDef:n,config:r}=t;if(!1===r.aria)return{};const i=Sbt("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:e in $pt?{}:{ariaRoleDescription:{value:e}}}function Bxt(t){const{encoding:e,markDef:n,config:r,stack:i}=t,a=e.description;if(a)return Dxt(t,a,"description",e=>Nxt(e,t.config));const o=Sbt("description",n,r);if(null!=o)return{description:Abt(o)};if(!1===r.aria)return{};const s=Mxt(e,i,r);return lct(s)?void 0:{description:{signal:hct(s).map(({key:t,value:e})=>`${t} + ": " + (${e})`).join(' + "; " + ')}}}function zxt(t,e,n={}){const{markDef:r,encoding:i,config:a}=e,{vgChannel:o}=n;let{defaultRef:s,defaultValue:u}=n;void 0===s&&(u=null!==u&&void 0!==u?u:Sbt(t,r,a,{vgChannel:o,ignoreVgConfig:!0}),void 0!==u&&(s=Abt(u)));const c=i[t];return Dxt(e,c,null!==o&&void 0!==o?o:t,n=>Qmt({channel:t,channelDef:n,markDef:r,config:a,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:s}))}function Lxt(t,e={filled:void 0}){var n,r,i,a;const{markDef:o,encoding:s,config:u}=t,{type:c}=o,l=null!==(n=e.filled)&&void 0!==n?n:Sbt("filled",o,u),f=tct(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,d=null!==(i=null!==(r=Sbt(!0===l?"color":void 0,o,u,{vgChannel:"fill"}))&&void 0!==r?r:u.mark[!0===l&&"color"])&&void 0!==i?i:f,h=null!==(a=Sbt(!1===l?"color":void 0,o,u,{vgChannel:"stroke"}))&&void 0!==a?a:u.mark[!1===l&&"color"],p=l?"fill":"stroke",m=Object.assign(Object.assign({},d?{fill:Abt(d)}:{}),h?{stroke:Abt(h)}:{});return o.color&&(l?o.fill:o.stroke)&&rpt(x.droppingColor("property",{fill:"fill"in o,stroke:"stroke"in o})),Object.assign(Object.assign(Object.assign(Object.assign({},m),zxt("color",t,{vgChannel:p,defaultValue:l?d:h})),zxt("fill",t,{defaultValue:s.fill?d:void 0})),zxt("stroke",t,{defaultValue:s.stroke?h:void 0}))}function Pxt(t,e){const n=Lft(t),r=e[n];if(r)return r}function Uxt(t,e,{defaultPos:n,vgChannel:r,isMidPoint:i}){const{encoding:a,markDef:o,config:s,stack:u}=e,c=a[t],l=a[Bft(t)],f=e.scaleName(t),d=e.getScaleComponent(t),h=Pxt(t,o),p=qxt({model:e,defaultPos:n,channel:t,scaleName:f,scale:d}),m=!c&&rdt(t)&&(a.latitude||a.longitude)?{field:e.getName(t)}:Wxt({channel:t,channelDef:c,channel2Def:l,markDef:o,config:s,isMidPoint:i,scaleName:f,scale:d,stack:u,offset:h,defaultRef:p});return m?{[r||t]:m}:void 0}function Wxt(t){const{channel:e,channelDef:n,isMidPoint:r,scaleName:i,stack:a,offset:o,markDef:s,config:u}=t;if(zgt(n)&&a&&e===a.fieldChannel){if(Mgt(n)){const t=Egt({channel:e,fieldDef:n,isMidPoint:r,markDef:s,stack:a,config:u});if(void 0!==t)return Zmt({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:t,offset:o})}return Jmt(n,i,{suffix:"end"},{offset:o})}return Gmt(t)}function qxt({model:t,defaultPos:e,channel:n,scaleName:r,scale:i}){const{markDef:a,config:o}=t;return()=>{const s=Rft(n),u=$ft(n),c=Sbt(n,a,o,{vgChannel:u});if(void 0!==c)return tgt(n,c);switch(e){case"zeroOrMin":case"zeroOrMax":if(r){const t=i.get("type");if(tct([umt.LOG,umt.TIME,umt.UTC],t));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===e)return"y"===s?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const e=t[zft(n)];return Object.assign(Object.assign({},e),{mult:.5})}}}}const Vxt={left:"x",center:"xc",right:"x2"},Gxt={top:"y",middle:"yc",bottom:"y2"};function Hxt(t,e,n,r="middle"){if("radius"===t||"theta"===t)return $ft(t);const i="x"===t?"align":"baseline",a=Sbt(i,e,n);return"x"===t?Vxt[a||("top"===r?"left":"center")]:Gxt[a||r]}function Xxt(t,e,{defaultPos:n,defaultPos2:r,range:i}){return i?Yxt(t,e,{defaultPos:n,defaultPos2:r}):Uxt(t,e,{defaultPos:n})}function Yxt(t,e,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:a}=e,o=Bft(t),s=zft(t),u=Kxt(e,r,o),c=u[s]?Hxt(t,i,a):$ft(t);return Object.assign(Object.assign({},Uxt(t,e,{defaultPos:n,vgChannel:c})),u)}function Kxt(t,e,n){const{encoding:r,mark:i,markDef:a,stack:o,config:s}=t,u=Rft(n),c=zft(n),l=$ft(n),f=r[u],d=t.scaleName(u),h=t.getScaleComponent(u),p=Pxt(n in r||n in a?n:u,t.markDef);if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude))return{[l]:{field:t.getName(n)}};const m=Jxt({channel:n,channelDef:f,channel2Def:r[n],markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return void 0!==m?{[l]:m}:Zxt(n,a)||Zxt(n,{[n]:Fbt(n,a,s.style),[c]:Fbt(c,a,s.style)})||Zxt(n,s[i])||Zxt(n,s.mark)||{[l]:qxt({model:t,defaultPos:e,channel:n,scaleName:d,scale:h})()}}function Jxt({channel:t,channelDef:e,channel2Def:n,markDef:r,config:i,scaleName:a,scale:o,stack:s,offset:u,defaultRef:c}){return zgt(e)&&s&&t.charAt(0)===s.fieldChannel.charAt(0)?Jmt(e,a,{suffix:"start"},{offset:u}):Gmt({channel:t,channelDef:n,scaleName:a,scale:o,stack:s,markDef:r,config:i,offset:u,defaultRef:c})}function Zxt(t,e){const n=zft(t),r=$ft(t);return void 0!==e[r]?{[r]:tgt(t,e[r])}:void 0!==e[t]?{[r]:tgt(t,e[t])}:e[n]?{[n]:tgt(t,e[n])}:void 0}function Qxt(t,e,n){var r,i,a,o;const{config:s,encoding:u,markDef:c,stack:l}=t,f=Bft(e),d=zft(e),h=u[e],p=u[f],m=t.getScaleComponent(e),g=m?m.get("type"):void 0,b=t.scaleName(e),y=c.orient,v=null!==(i=null!==(r=u[d])&&void 0!==r?r:u.size)&&void 0!==i?i:Sbt("size",c,s,{vgChannel:d}),x="bar"===n&&("x"===e?"vertical"===y:"horizontal"===y);if(Mgt(h)&&(Sdt(h.bin)||Ddt(h.bin)||h.timeUnit&&!p)&&!v&&!jmt(g)){const n=Egt({channel:e,fieldDef:h,stack:l,markDef:c,config:s}),r=null===(a=t.component.axes[e])||void 0===a?void 0:a[0],i=null!==(o=null===r||void 0===r?void 0:r.get("translate"))&&void 0!==o?o:.5;return rwt({fieldDef:h,fieldDef2:p,channel:e,markDef:c,scaleName:b,band:n,axisTranslate:i,spacing:rdt(e)?Sbt("binSpacing",c,s):void 0,reverse:m.get("reverse"),config:s})}return(zgt(h)&&jmt(g)||x)&&!p?ewt(n,h,e,t):Yxt(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function twt(t,e,n,r,i,a){if(r){const e=r.get("type");if("point"===e||"band"===e){if(void 0!==i[t].discreteBandSize)return{value:i[t].discreteBandSize};if(e===umt.POINT){const t=r.get("range");return Fpt(t)&&Fut(t.step)?{value:t.step-2}:{value:Hyt-2}}return{scale:n,band:a}}return{value:i[t].continuousBandSize}}const o=Vyt(i.view,e),s=kct(i[t].discreteBandSize,o-2);return void 0!==s?{value:s}:void 0}function ewt(t,e,n,r){var i;const{markDef:a,encoding:o,config:s,stack:u}=r,c=a.orient,l=r.scaleName(n),f=r.getScaleComponent(n),d=zft(n),h=Bft(n),p="horizontal"===c&&"y"===n||"vertical"===c&&"x"===n,m=Sbt(p?"size":d,a,s,{vgChannel:d});let g;(o.size||void 0!==m)&&(p?g=zxt("size",r,{vgChannel:d,defaultValue:m}):rpt(x.cannotApplySizeToNonOrientedMark(a.type)));const b=null!==(i=zgt(e)?Egt({channel:n,fieldDef:e,markDef:a,stack:u,config:s}):void 0)&&void 0!==i?i:1;g=g||{[d]:twt(t,d,l,f,s,b)};const y="band"!==(null===f||void 0===f?void 0:f.get("type"))||!("band"in g[d]),v=Hxt(n,a,s,y?"middle":"top"),w=Pxt(n,a),O=Gmt({channel:n,channelDef:e,markDef:a,config:s,scaleName:l,scale:f,stack:u,offset:w,defaultRef:qxt({model:r,defaultPos:"mid",channel:n,scaleName:l,scale:f}),band:y?.5:(1-b)/2});if(d)return Object.assign({[v]:O},g);{const t=$ft(h),e=g[d],n=w?Object.assign(Object.assign({},e),{offset:w}):e;return{[v]:O,[t]:xut(O)?[O[0],Object.assign(Object.assign({},O[1]),{offset:n})]:Object.assign(Object.assign({},O),{offset:n})}}}function nwt(t,e,n,r,i){if(hft(t))return 0;const a="x"===t||"y2"===t?-e/2:e/2;if(Dpt(n)){const t=kbt(i);return{signal:`${n.signal} ? ${r-a}${t?"-"+t:""} : ${r+a}${t?"+"+t:""}`}}if(Dpt(i)){const t=r+(n?-a:a);return{signal:`${t||""}${n?" - ":t?" + ":""}${i.signal}`}}return i=i||0,r+(n?-i-a:+i+a)}function rwt({fieldDef:t,fieldDef2:e,channel:n,band:r,scaleName:i,markDef:a,spacing:o=0,axisTranslate:s,reverse:u,config:c}){const l=Bft(n),f=$ft(n),d=$ft(l),h=Pxt(n,a);if(Sdt(t.bin)||t.timeUnit)return{[d]:iwt({channel:n,fieldDef:t,scaleName:i,markDef:a,band:(1-r)/2,offset:nwt(l,o,u,s,h),config:c}),[f]:iwt({channel:n,fieldDef:t,scaleName:i,markDef:a,band:1-(1-r)/2,offset:nwt(n,o,u,s,h),config:c})};if(Ddt(t.bin)){const r=Jmt(t,i,{},{offset:nwt(l,o,u,s,h)});if(Mgt(e))return{[d]:r,[f]:Jmt(e,i,{},{offset:nwt(n,o,u,s,h)})};if(Fdt(t.bin)&&t.bin.step)return{[d]:r,[f]:{signal:`scale("${i}", ${Hgt(t,{expr:"datum"})} + ${t.bin.step})`,offset:nwt(n,o,u,s,h)}}}rpt(x.channelRequiredForBinned(l))}function iwt({channel:t,fieldDef:e,scaleName:n,markDef:r,band:i,offset:a,config:o}){const s=Zmt({scaleName:n,fieldOrDatumDef:e,band:i,offset:a});return Hmt({fieldDef:e,channel:t,markDef:r,ref:s,config:o})}const awt=new Set(["aria"]);function owt(t,e){const{fill:n,stroke:r}="include"===e.color?Lxt(t):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},uwt(t.markDef,e)),swt(t,"fill",n)),swt(t,"stroke",r)),zxt("opacity",t)),zxt("fillOpacity",t)),zxt("strokeOpacity",t)),zxt("strokeWidth",t)),zxt("strokeDash",t)),Txt(t)),Fxt(t,"href")),Rxt(t))}function swt(t,e,n){const{config:r,mark:i,markDef:a}=t,o=Sbt("invalid",a,r);if("hide"===o&&n&&!elt(i)){const r=cwt(t,{invalid:!0,channels:xdt});if(r)return{[e]:[{test:r,value:null},...kut(n)]}}return n?{[e]:n}:{}}function uwt(t,e){return Rpt.reduce((n,r)=>(awt.has(r)||void 0===t[r]||"ignore"===e[r]||(n[r]=Abt(t[r])),n),{})}function cwt(t,{invalid:e=!1,channels:n}){const r=n.reduce((e,n)=>{const r=t.getScaleComponent(n);if(r){const i=r.get("type"),a=t.vgField(n,{expr:"datum"});a&&kmt(i)&&(e[a]=!0)}return e},{}),i=fct(r);if(i.length>0){const t=e?"||":"&&";return i.map(t=>Ymt(t,e)).join(` ${t} `)}}function lwt(t){const{config:e,markDef:n}=t,r=Sbt("invalid",n,e);if(r){const e=fwt(t,{channels:ndt});if(e)return{defined:{signal:e}}}return{}}function fwt(t,{invalid:e=!1,channels:n}){const r=n.reduce((e,n)=>{const r=t.getScaleComponent(n);if(r){const i=r.get("type"),a=t.vgField(n,{expr:"datum"});a&&kmt(i)&&(e[a]=!0)}return e},{}),i=fct(r);if(i.length>0){const t=e?"||":"&&";return i.map(t=>Ymt(t,e)).join(` ${t} `)}}function dwt(t,e){if(void 0!==e)return{[t]:Abt(e)}}const hwt="voronoi",pwt={has:t=>"interval"!==t.type&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName(hwt)},marks:(t,e,n)=>{const{x:r,y:i}=e.project.hasChannel,a=t.mark;if(elt(a))return rpt(x.nearestNotSupportForContinuous(a)),n;const o={name:t.getName(hwt),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Txt(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let s=0,u=!1;return n.forEach((e,n)=>{var r;const i=null!==(r=e.name)&&void 0!==r?r:"";i===t.component.mark[0].name?s=n:i.indexOf(hwt)>=0&&(u=!0)}),u||n.splice(s+1,0,o),n}};var mwt=pwt;class gwt{constructor(t,e){this.debugName=e,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,e){this._children.indexOf(t)>-1?console.warn("Attempt to add the same child twice."):void 0!==e?this._children.splice(e,0,t):this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);return this._children.splice(e,1),e}remove(){let t=this._parent.removeChild(this);for(const e of this._children)e._parent=this._parent,this._parent.addChild(e,t++)}insertAsParentOf(t){const e=t.parent;e.removeChild(this),this.parent=e,t.parent=this}swapWithParent(){const t=this._parent,e=t.parent;for(const n of this._children)n.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=e,t.parent=this}}class bwt extends gwt{constructor(t,e,n,r){super(t,e),this.type=n,this.refCounts=r,this._source=this._name=e,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash="Output "+Ect()),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}class ywt extends gwt{constructor(t,e){super(t),this.formula=e}clone(){return new ywt(null,Xut(this.formula))}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,n,r)=>{const{field:i,timeUnit:a}=n,o=CEt(e)?e.encoding[Bft(r)]:void 0,s=CEt(e)&&Sgt(r,n,o,e.stack,e.markDef,e.config);if(a){const e=Hgt(n,{forAs:!0});t[Zut({as:e,field:i,timeUnit:a})]=Object.assign({as:e,field:i,timeUnit:a},s?{band:!0}:{})}return t},{});return lct(n)?null:new ywt(t,n)}static makeFromTransform(t,e){const n=Object.assign({},e),{timeUnit:r}=n,i=Iut(n,["timeUnit"]),a=Ept(r),o=Object.assign(Object.assign({},i),{timeUnit:a});return new ywt(t,{[Zut(o)]:o})}merge(t){this.formula=Object.assign({},this.formula);for(const e in t.formula)this.formula[e]&&!t.formula[e].band||(this.formula[e]=t.formula[e]);for(const e of t.children)t.removeChild(e),e.parent=this;t.remove()}producedFields(){return new Set(dct(this.formula).map(t=>t.as))}dependentFields(){return new Set(dct(this.formula).map(t=>t.field))}hash(){return"TimeUnit "+Zut(this.formula)}assemble(){const t=[];for(const e of dct(this.formula)){const{field:n,as:r,timeUnit:i}=e,a=Ept(i),{unit:o,utc:s}=a,u=Iut(a,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Oct(n),type:"timeunit"},o?{units:_pt(o)}:{}),s?{timezone:"utc"}:{}),u),{as:[r,r+"_end"]}))}return t}}const vwt="_tuple_fields";class xwt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const wwt={has:()=>!0,parse:(t,e,n)=>{var r,i,a;const o=e.name,s=null!==(r=e.project)&&void 0!==r?r:e.project=new xwt,u={},c={},l=new Set,f=(t,e)=>{const n="visual"===e?t.channel:t.field;let r=mct(`${o}_${n}`);for(let i=1;l.has(r);i++)r=mct(`${o}_${n}_${i}`);return l.add(r),{[e]:r}};if(!n.fields&&!n.encodings){const e=t.config.selection[n.type];if(n.init)for(const t of kut(n.init))for(const r of fct(t))Nft(r)?(n.encodings||(n.encodings=[])).push(r):"interval"===n.type?(rpt('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=e.encodings):(n.fields||(n.fields=[])).push(r);else n.encodings=e.encodings,n.fields=e.fields}for(const d of null!==(i=n.fields)&&void 0!==i?i:[]){const t={type:"E",field:d};t.signals=Object.assign({},f(t,"data")),s.items.push(t),s.hasField[d]=t}for(const d of null!==(a=n.encodings)&&void 0!==a?a:[]){const n=t.fieldDef(d);if(n){let r=n.field;if(n.aggregate){rpt(x.cannotProjectAggregate(d,n.aggregate));continue}if(!r){rpt(x.cannotProjectOnChannelWithoutField(d));continue}if(n.timeUnit){r=t.vgField(d);const e={timeUnit:n.timeUnit,as:r,field:n.field};c[Zut(e)]=e}if(!u[r]){let i="E";if("interval"===e.type){const e=t.getScaleComponent(d).get("type");kmt(e)&&(i="R")}else n.bin&&(i="R-RE");const a={field:r,channel:d,type:i};a.signals=Object.assign(Object.assign({},f(a,"data")),f(a,"visual")),s.items.push(u[r]=a),s.hasField[r]=s.hasChannel[d]=u[r]}}else rpt(x.cannotProjectOnChannelWithoutField(d))}if(n.init){const t=t=>s.items.map(e=>void 0!==t[e.channel]?t[e.channel]:t[e.field]);if("interval"===n.type)e.init=t(n.init);else{const r=kut(n.init);e.init=r.map(t)}}lct(c)||(s.timeUnit=new ywt(null,c))},signals:(t,e,n)=>{const r=e.name+vwt,i=n.filter(t=>t.name===r);return i.length>0?n:n.concat({name:r,value:e.project.items.map(t=>{const{signals:e,hasLegend:n}=t,r=Iut(t,["signals","hasLegend"]);return r.field=Oct(r.field),r})})}};var Owt=wwt;const _wt={has:t=>"single"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind&&!Nyt(t.bind),parse:(t,e,n,r)=>{r.on||delete e.events,r.clear||delete e.clear},topLevelSignals:(t,e,n)=>{const r=e.name,i=e.project,a=e.bind,o=e.init&&e.init[0],s=mwt.has(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((t,i)=>{var u,c;const l=mct(`${r}_${t.field}`),f=n.filter(t=>t.name===l);f.length||n.unshift(Object.assign(Object.assign({name:l},o?{init:Ywt(o[i])}:{value:null}),{on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Tut(t.field)}] : null`}]:[],bind:null!==(c=null!==(u=a[t.field])&&void 0!==u?u:a[t.channel])&&void 0!==c?c:a}))}),n},signals:(t,e,n)=>{const r=e.name,i=e.project,a=n.filter(t=>t.name===r+gOt)[0],o=r+vwt,s=i.items.map(t=>mct(`${r}_${t.field}`)),u=s.map(t=>t+" !== null").join(" && ");return s.length&&(a.update=`${u} ? {fields: ${o}, values: [${s.join(", ")}]} : null`),delete a.value,delete a.on,n}};var Awt=_wt;const jwt="_toggle",kwt={has:t=>"multi"===t.type&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+jwt,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+gOt,r=e.name+jwt;return`${r} ? null : ${n}, `+("global"===e.resolve?r+" ? null : true, ":`${r} ? null : {unit: ${OOt(t)}}, `)+`${r} ? ${n} : null`}};var Cwt=kwt;const Ewt={has:t=>void 0!==t.clear&&!1!==t.clear,parse:(t,e,n)=>{n.clear&&(e.clear=Nut(n.clear)?tit(n.clear,"scope"):n.clear)},topLevelSignals:(t,e,n)=>{if(Awt.has(e))for(const r of e.project.items){const t=n.findIndex(t=>t.name===mct(`${e.name}_${r.field}`));-1!==t&&n[t].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function r(t,r){-1!==t&&n[t].on&&n[t].on.push({events:e.clear,update:r})}if("interval"===e.type)for(const i of e.project.items){const t=n.findIndex(t=>t.name===i.signals.visual);if(r(t,"[0, 0]"),-1===t){const t=n.findIndex(t=>t.name===i.signals.data);r(t,"null")}}else{let t=n.findIndex(t=>t.name===e.name+gOt);r(t,"null"),Cwt.has(e)&&(t=n.findIndex(t=>t.name===e.name+jwt),r(t,"false"))}return n}};var Swt=Ewt;const Dwt={has:t=>"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind,parse:(t,e)=>{const n=e.scales=[];for(const r of e.project.items){const i=r.channel;if(!wdt(i))continue;const a=t.getScaleComponent(i),o=a?a.get("type"):void 0;if(!a||!kmt(o)){rpt(x.SCALE_BINDINGS_CONTINUOUS);continue}const s={selection:e.name,field:r.field};a.set("selectionExtent",s,!0),n.push(r)}},topLevelSignals:(t,e,n)=>{const r=e.scales.filter(t=>0===n.filter(e=>e.name===t.signals.data).length);if(!t.parent||Twt(t)||0===r.length)return n;const i=n.filter(t=>t.name===e.name)[0];let a=i.update;if(a.indexOf(yOt)>=0)i.update=`{${r.map(t=>`${Tut(t.field)}: ${t.signals.data}`).join(", ")}}`;else{for(const t of r){const e=`${Tut(t.field)}: ${t.signals.data}`;a.indexOf(e)<0&&(a=`${a.substring(0,a.length-1)}, ${e}}`)}i.update=a}return n.concat(r.map(t=>({name:t.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!Twt(t))for(const r of e.scales){const t=n.filter(t=>t.name===r.signals.data)[0];t.push="outer",delete t.value,delete t.update}return n}};var Fwt=Dwt;function Nwt(t,e){const n=Tut(t.scaleName(e));return`domain(${n})`}function Twt(t){var e;return t.parent&&DEt(t.parent)&&(null!==(e=!t.parent.parent)&&void 0!==e?e:Twt(t.parent.parent))}const Mwt={has:t=>{const e="global"===t.resolve&&t.bind&&Nyt(t.bind),n=1===t.project.items.length&&t.project.items[0].field!==Dyt;return e&&!n&&rpt(x.LEGEND_BINDINGS_PROJECT_LENGTH),e&&n},parse:(t,e,n,r)=>{var i;if(r.on||delete e.events,r.clear||delete e.clear,r.on||r.clear){const t='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of e.events)n.filter=kut(null!==(i=n.filter)&&void 0!==i?i:[]),n.filter.indexOf(t)<0&&n.filter.push(t)}const a=Tyt(e.bind)?e.bind.legend:"click",o=Nut(a)?tit(a,"view"):kut(a);e.bind={legend:{merge:o}}},topLevelSignals:(t,e,n)=>{const r=e.name,i=Tyt(e.bind)&&e.bind.legend,a=t=>e=>{const n=Xut(e);return n.markname=t,n};for(const o of e.project.items){if(!o.hasLegend)continue;const t=mct(o.field)+"_legend",s=`${r}_${t}`,u=n.filter(t=>t.name===s);if(0===u.length){const r=i.merge.map(a(t+"_symbols")).concat(i.merge.map(a(t+"_labels"))).concat(i.merge.map(a(t+"_entries")));n.unshift(Object.assign(Object.assign({name:s},e.init?{}:{value:null}),{on:[{events:r,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:"!event.item || !datum ? null : "+s,force:!0}]}))}}return n},signals:(t,e,n)=>{const r=e.name,i=e.project,a=n.find(t=>t.name===r+gOt),o=r+vwt,s=i.items.filter(t=>t.hasLegend).map(t=>mct(`${r}_${mct(t.field)}_legend`)),u=s.map(t=>t+" !== null").join(" && "),c=`${u} ? {fields: ${o}, values: [${s.join(", ")}]} : null`;e.events&&s.length>0?a.on.push({events:s.map(t=>({signal:t})),update:c}):s.length>0&&(a.update=c,delete a.value,delete a.on);const l=n.find(t=>t.name===r+jwt),f=Tyt(e.bind)&&e.bind.legend;return l&&(e.events?l.on.push(Object.assign(Object.assign({},l.on[0]),{events:f})):l.on[0].events=f),n}};var Iwt=Mwt;function Rwt(t,e,n){var r;const i=null===(r=t.fieldDef(e))||void 0===r?void 0:r.field;xOt(t,t=>{var r,a;const o=null!==(r=t.project.hasField[i])&&void 0!==r?r:t.project.hasChannel[e];if(o&&Mwt.has(t)){const e=null!==(a=n.get("selections"))&&void 0!==a?a:[];e.push(t.name),n.set("selections",e,!1),o.hasLegend=!0}})}const $wt="_translate_anchor",Bwt="_translate_delta",zwt={has:t=>"interval"===t.type&&t.translate,signals:(t,e,n)=>{const r=e.name,i=Fwt.has(e),a=r+$wt,{x:o,y:s}=e.project.hasChannel;let u=tit(e.translate,"scope");return i||(u=u.map(t=>(t.between[0].markname=r+iOt,t))),n.push({name:a,value:{},on:[{events:u.map(t=>t.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==o?", extent_x: "+(i?Nwt(t,Mlt):`slice(${o.signals.visual})`):"")+(void 0!==s?", extent_y: "+(i?Nwt(t,Ilt):`slice(${s.signals.visual})`):"")+"}"}]},{name:r+Bwt,value:{},on:[{events:u,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),void 0!==o&&Pwt(t,e,o,"width",n),void 0!==s&&Pwt(t,e,s,"height",n),n}};var Lwt=zwt;function Pwt(t,e,n,r,i){var a;const o=e.name,s=o+$wt,u=o+Bwt,c=n.channel,l=Fwt.has(e),f=i.filter(t=>t.name===n.signals[l?"data":"visual"])[0],d=t.getSizeSignalRef(r).signal,h=t.getScaleComponent(c),p=h.get("type"),m=l&&c===Mlt?"-":"",g=`${s}.extent_${c}`,b=`${m}${u}.${c} / `+(l?""+d:`span(${g})`),y=l?"log"===p?"panLog":"pow"===p?"panPow":"panLinear":"panLinear",v=`${y}(${g}, ${b}`+(l&&"pow"===p?", "+(null!==(a=h.get("exponent"))&&void 0!==a?a:1):"")+")";f.on.push({events:{signal:u},update:l?v:`clampRange(${v}, 0, ${d})`})}const Uwt="_zoom_anchor",Wwt="_zoom_delta",qwt={has:t=>"interval"===t.type&&t.zoom,signals:(t,e,n)=>{const r=e.name,i=Fwt.has(e),a=r+Wwt,{x:o,y:s}=e.project.hasChannel,u=Tut(t.scaleName(Mlt)),c=Tut(t.scaleName(Ilt));let l=tit(e.zoom,"scope");return i||(l=l.map(t=>(t.markname=r+iOt,t))),n.push({name:r+Uwt,on:[{events:l,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(t=>!!t).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:l,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==o&&Gwt(t,e,o,"width",n),void 0!==s&&Gwt(t,e,s,"height",n),n}};var Vwt=qwt;function Gwt(t,e,n,r,i){var a;const o=e.name,s=n.channel,u=Fwt.has(e),c=i.filter(t=>t.name===n.signals[u?"data":"visual"])[0],l=t.getSizeSignalRef(r).signal,f=t.getScaleComponent(s),d=f.get("type"),h=u?Nwt(t,s):c.name,p=o+Wwt,m=`${o}${Uwt}.${s}`,g=u?"log"===d?"zoomLog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear",b=`${g}(${h}, ${m}, ${p}`+(u&&"pow"===d?", "+(null!==(a=f.get("exponent"))&&void 0!==a?a:1):"")+")";c.on.push({events:{signal:p},update:u?b:`clampRange(${b}, 0, ${l})`})}const Hwt=[Owt,Cwt,Fwt,Iwt,Lwt,Vwt,Awt,mwt,Swt];function Xwt(t,e){for(const n of Hwt)n.has(t)&&e(n)}function Ywt(t,e=!0,n=dut){if(xut(t)){const r=t.map(t=>Ywt(t,e,n));return e?`[${r.join(", ")}]`:r}return apt(t)?n(e?ppt(t):gpt(t)):e?n(JSON.stringify(t)):t}function Kwt(t,e){return xOt(t,(n,r)=>{const i=n.name;let a=r.modifyExpr(t,n);e.push(...r.signals(t,n)),Xwt(n,r=>{r.signals&&(e=r.signals(t,n,e)),r.modifyExpr&&(a=r.modifyExpr(t,n,a))}),e.push({name:i+bOt,on:[{events:{signal:n.name+gOt},update:`modify(${Tut(n.name+mOt)}, ${a})`}]})}),rOt(e)}function Jwt(t,e){if(t.component.selection&&fct(t.component.selection).length){const n=Tut(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:tit("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return rOt(e)}function Zwt(t,e){let n=!1;if(xOt(t,(r,i)=>{const a=r.name,o=Tut(a+mOt),s=e.filter(t=>t.name===a);if(0===s.length){const t="global"===r.resolve?"union":r.resolve,n="multi"===r.type?", true)":")";e.push({name:r.name,update:`${yOt}(${o}, ${Tut(t)}${n}`})}n=!0,i.topLevelSignals&&(e=i.topLevelSignals(t,r,e)),Xwt(r,n=>{n.topLevelSignals&&(e=n.topLevelSignals(t,r,e))})}),n){const t=e.filter(t=>"unit"===t.name);0===t.length&&e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return rOt(e)}function Qwt(t,e){const n=[...e];return xOt(t,e=>{const r={name:e.name+mOt};if(e.init){const n=e.project.items.map(t=>{const{signals:e}=t,n=Iut(t,["signals"]);return n}),i=e.init.map(t=>Ywt(t,!1));r.values="interval"===e.type?[{unit:OOt(t,{escape:!1}),fields:n,values:i}]:i.map(e=>({unit:OOt(t,{escape:!1}),fields:n,values:e}))}const i=n.filter(t=>t.name===e.name+mOt);i.length||n.push(r)}),n}function tOt(t,e){return xOt(t,(n,r)=>{e=r.marks?r.marks(t,n,e):e,Xwt(n,r=>{r.marks&&(e=r.marks(t,n,e))})}),e}function eOt(t,e){for(const n of t.children)CEt(n)&&(e=tOt(n,e));return e}function nOt(t,e){const n=e.selection,r=t.getSelectionComponent(n,mct(n));return{signal:$At(r,e)}}function rOt(t){return t.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const iOt="_brush",aOt="_scale_trigger",oOt={signals:(t,e)=>{const n=e.name,r=n+vwt,i=Fwt.has(e),a=[],o=[],s=[];if(e.translate&&!i){const t="!event.item || event.item.mark.name !== "+Tut(n+iOt);cOt(e,(e,n)=>{var r;const i=kut(null!==(r=n.between[0].filter)&&void 0!==r?r:n.between[0].filter=[]);return i.indexOf(t)<0&&i.push(t),e})}e.project.items.forEach((n,r)=>{const i=n.channel;if(i!==Mlt&&i!==Ilt)return void rpt("Interval selections only support x and y encoding channels.");const u=e.init?e.init[r]:null,c=uOt(t,e,n,u),l=n.signals.data,f=n.signals.visual,d=Tut(t.scaleName(i)),h=t.getScaleComponent(i).get("type"),p=kmt(h)?"+":"";a.push(...c),o.push(l),s.push({scaleName:t.scaleName(i),expr:`(!isArray(${l}) || (${p}invert(${d}, ${f})[0] === ${p}${l}[0] && ${p}invert(${d}, ${f})[1] === ${p}${l}[1]))`})}),i||a.push({name:n+aOt,value:{},on:[{events:s.map(t=>({scale:t.scaleName})),update:s.map(t=>t.expr).join(" && ")+` ? ${n+aOt} : {}`}]});const u=e.init,c=`unit: ${OOt(t)}, fields: ${r}, values`;return a.concat(Object.assign(Object.assign({name:n+gOt},u?{init:`{${c}: ${Ywt(u)}}`}:{}),{on:[{events:[{signal:o.join(" || ")}],update:o.join(" && ")+` ? {${c}: [${o}]} : null`}]}))},modifyExpr:(t,e)=>{const n=e.name+gOt;return n+", "+("global"===e.resolve?"true":`{unit: ${OOt(t)}}`)},marks:(t,e,n)=>{const r=e.name,{x:i,y:a}=e.project.hasChannel,o=i&&i.signals.visual,s=a&&a.signals.visual,u=`data(${Tut(e.name+mOt)})`;if(Fwt.has(e))return n;const c={x:void 0!==i?{signal:o+"[0]"}:{value:0},y:void 0!==a?{signal:s+"[0]"}:{value:0},x2:void 0!==i?{signal:o+"[1]"}:{field:{group:"width"}},y2:void 0!==a?{signal:s+"[1]"}:{field:{group:"height"}}};if("global"===e.resolve)for(const g of fct(c))c[g]=[Object.assign({test:`${u}.length && ${u}[0].unit === ${OOt(t)}`},c[g]),{value:0}];const l=e.mark,{fill:f,fillOpacity:d,cursor:h}=l,p=Iut(l,["fill","fillOpacity","cursor"]),m=fct(p).reduce((t,e)=>(t[e]=[{test:[void 0!==i&&`${o}[0] !== ${o}[1]`,void 0!==a&&`${s}[0] !== ${s}[1]`].filter(t=>t).join(" && "),value:p[e]},{value:null}],t),{});return[{name:r+iOt+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:c}},...n,{name:r+iOt,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},c),m)}}]}};var sOt=oOt;function uOt(t,e,n,r){const i=n.channel,a=n.signals.visual,o=n.signals.data,s=Fwt.has(e),u=Tut(t.scaleName(i)),c=t.getScaleComponent(i),l=c?c.get("type"):void 0,f=t=>`scale(${u}, ${t})`,d=t.getSizeSignalRef(i===Mlt?"width":"height").signal,h=i+"(unit)",p=cOt(e,(t,e)=>[...t,{events:e.between[0],update:`[${h}, ${h}]`},{events:e,update:`[${a}[0], clamp(${h}, 0, ${d})]`}]);return p.push({events:{signal:e.name+aOt},update:kmt(l)?`[${f(o+"[0]")}, ${f(o+"[1]")}]`:"[0, 0]"}),s?[{name:o,on:[]}]:[Object.assign(Object.assign({name:a},r?{init:Ywt(r,!0,f)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:o},r?{init:Ywt(r)}:{}),{on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${u}, ${a})`}]})]}function cOt(t,e){return t.events.reduce((t,n)=>n.between?e(t,n):(rpt(n+" is not an ordered event stream for interval selections."),t),[])}function lOt(t,e){const n=e.name,r=n+vwt,i=e.project,a="(item().isVoronoi ? datum.datum : datum)",o=i.items.map(e=>{const n=t.fieldDef(e.channel);return n&&n.bin?`[${a}[${Tut(t.vgField(e.channel,{}))}], ${a}[${Tut(t.vgField(e.channel,{binSuffix:"end"}))}]]`:`${a}[${Tut(e.field)}]`}).join(", "),s=`unit: ${OOt(t)}, fields: ${r}, values`,u=e.events;return[{name:n+gOt,on:u?[{events:u,update:`datum && item().mark.marktype !== 'group' ? {${s}: [${o}]} : null`,force:!0}]:[]}]}const fOt={signals:lOt,modifyExpr:(t,e)=>{const n=e.name+gOt;return n+", "+("global"===e.resolve?"null":`{unit: ${OOt(t)}}`)}};var dOt=fOt;const hOt={signals:lOt,modifyExpr:(t,e)=>{const n=e.name+gOt;return n+", "+("global"===e.resolve?"true":`{unit: ${OOt(t)}}`)}};var pOt=hOt;const mOt="_store",gOt="_tuple",bOt="_modify",yOt="vlSelectionResolve",vOt={single:pOt,multi:dOt,interval:sOt};function xOt(t,e){const n=t.component.selection;if(n)for(const r of dct(n)){const t=e(r,vOt[r.type]);if(!0===t)break}}function wOt(t){let e=t.parent;while(e){if(EEt(e))break;e=e.parent}return e}function OOt(t,{escape:e}={escape:!0}){let n=e?Tut(t.name):t.name;const r=wOt(t);if(r){const{facet:t}=r;for(const e of wft)t[e]&&(n+=` + '__facet_${e}_' + (facet[${Tut(r.vgField(e))}])`)}return n}function _Ot(t){let e=!1;return xOt(t,t=>{e=e||t.project.items.some(t=>t.field===Dyt)}),e}const AOt="RawCode",jOt="Literal",kOt="Property",COt="Identifier",EOt="ArrayExpression",SOt="BinaryExpression",DOt="CallExpression",FOt="ConditionalExpression",NOt="LogicalExpression",TOt="MemberExpression",MOt="ObjectExpression",IOt="UnaryExpression";function ROt(t){this.type=t}function $Ot(t){switch(t.type){case EOt:return t.elements;case SOt:case NOt:return[t.left,t.right];case DOt:return[t.callee].concat(t.arguments);case FOt:return[t.test,t.consequent,t.alternate];case TOt:return[t.object,t.property];case MOt:return t.properties;case kOt:return[t.key,t.value];case IOt:return[t.argument];case COt:case jOt:case AOt:default:return[]}}var BOt,zOt,LOt,POt,UOt;ROt.prototype.visit=function(t){let e,n,r;if(t(this))return 1;for(e=$Ot(this),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1};var WOt=1,qOt=2,VOt=3,GOt=4,HOt=5,XOt=6,YOt=7,KOt=8,JOt=9;BOt={},BOt[WOt]="Boolean",BOt[qOt]="<end>",BOt[VOt]="Identifier",BOt[GOt]="Keyword",BOt[HOt]="Null",BOt[XOt]="Numeric",BOt[YOt]="Punctuator",BOt[KOt]="String",BOt[JOt]="RegularExpression";var ZOt="ArrayExpression",QOt="BinaryExpression",t_t="CallExpression",e_t="ConditionalExpression",n_t="Identifier",r_t="Literal",i_t="LogicalExpression",a_t="MemberExpression",o_t="ObjectExpression",s_t="Property",u_t="UnaryExpression",c_t="Unexpected token %0",l_t="Unexpected number",f_t="Unexpected string",d_t="Unexpected identifier",h_t="Unexpected reserved word",p_t="Unexpected end of input",m_t="Invalid regular expression",g_t="Invalid regular expression: missing /",b_t="Octal literals are not allowed in strict mode.",y_t="Duplicate data property in object literal not allowed in strict mode",v_t="ILLEGAL",x_t="Disabled.",w_t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),O_t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function __t(t,e){if(!t)throw new Error("ASSERT: "+e)}function A_t(t){return t>=48&&t<=57}function j_t(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function k_t(t){return"01234567".indexOf(t)>=0}function C_t(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function E_t(t){return 10===t||13===t||8232===t||8233===t}function S_t(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&w_t.test(String.fromCharCode(t))}function D_t(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&O_t.test(String.fromCharCode(t))}var F_t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function N_t(){var t;while(LOt<POt){if(t=zOt.charCodeAt(LOt),!C_t(t)&&!E_t(t))break;++LOt}}function T_t(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)LOt<POt&&j_t(zOt[LOt])?(r=zOt[LOt++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):sAt({},c_t,v_t);return String.fromCharCode(i)}function M_t(){var t,e,n,r;t=zOt[LOt],e=0,"}"===t&&sAt({},c_t,v_t);while(LOt<POt){if(t=zOt[LOt++],!j_t(t))break;e=16*e+"0123456789abcdef".indexOf(t.toLowerCase())}return(e>1114111||"}"!==t)&&sAt({},c_t,v_t),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function I_t(){var t,e;t=zOt.charCodeAt(LOt++),e=String.fromCharCode(t),92===t&&(117!==zOt.charCodeAt(LOt)&&sAt({},c_t,v_t),++LOt,t=T_t("u"),t&&"\\"!==t&&S_t(t.charCodeAt(0))||sAt({},c_t,v_t),e=t);while(LOt<POt){if(t=zOt.charCodeAt(LOt),!D_t(t))break;++LOt,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==zOt.charCodeAt(LOt)&&sAt({},c_t,v_t),++LOt,t=T_t("u"),t&&"\\"!==t&&D_t(t.charCodeAt(0))||sAt({},c_t,v_t),e+=t)}return e}function R_t(){var t,e;t=LOt++;while(LOt<POt){if(e=zOt.charCodeAt(LOt),92===e)return LOt=t,I_t();if(!D_t(e))break;++LOt}return zOt.slice(t,LOt)}function $_t(){var t,e,n;return t=LOt,e=92===zOt.charCodeAt(LOt)?I_t():R_t(),n=1===e.length?VOt:F_t.hasOwnProperty(e)?GOt:"null"===e?HOt:"true"===e||"false"===e?WOt:VOt,{type:n,value:e,start:t,end:LOt}}function B_t(){var t,e,n,r,i=LOt,a=zOt.charCodeAt(LOt),o=zOt[LOt];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++LOt,{type:YOt,value:String.fromCharCode(a),start:i,end:LOt};default:if(t=zOt.charCodeAt(LOt+1),61===t)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return LOt+=2,{type:YOt,value:String.fromCharCode(a)+String.fromCharCode(t),start:i,end:LOt};case 33:case 61:return LOt+=2,61===zOt.charCodeAt(LOt)&&++LOt,{type:YOt,value:zOt.slice(i,LOt),start:i,end:LOt}}}return r=zOt.substr(LOt,4),">>>="===r?(LOt+=4,{type:YOt,value:r,start:i,end:LOt}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(LOt+=3,{type:YOt,value:n,start:i,end:LOt}):(e=n.substr(0,2),o===e[1]&&"+-<>&|".indexOf(o)>=0||"=>"===e?(LOt+=2,{type:YOt,value:e,start:i,end:LOt}):"<>=!+-*%&|^/".indexOf(o)>=0?(++LOt,{type:YOt,value:o,start:i,end:LOt}):void sAt({},c_t,v_t)))}function z_t(t){var e="";while(LOt<POt){if(!j_t(zOt[LOt]))break;e+=zOt[LOt++]}return 0===e.length&&sAt({},c_t,v_t),S_t(zOt.charCodeAt(LOt))&&sAt({},c_t,v_t),{type:XOt,value:parseInt("0x"+e,16),start:t,end:LOt}}function L_t(t){var e="0"+zOt[LOt++];while(LOt<POt){if(!k_t(zOt[LOt]))break;e+=zOt[LOt++]}return(S_t(zOt.charCodeAt(LOt))||A_t(zOt.charCodeAt(LOt)))&&sAt({},c_t,v_t),{type:XOt,value:parseInt(e,8),octal:!0,start:t,end:LOt}}function P_t(){var t,e,n;if(n=zOt[LOt],__t(A_t(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=LOt,t="","."!==n){if(t=zOt[LOt++],n=zOt[LOt],"0"===t){if("x"===n||"X"===n)return++LOt,z_t(e);if(k_t(n))return L_t(e);n&&A_t(n.charCodeAt(0))&&sAt({},c_t,v_t)}while(A_t(zOt.charCodeAt(LOt)))t+=zOt[LOt++];n=zOt[LOt]}if("."===n){t+=zOt[LOt++];while(A_t(zOt.charCodeAt(LOt)))t+=zOt[LOt++];n=zOt[LOt]}if("e"===n||"E"===n)if(t+=zOt[LOt++],n=zOt[LOt],"+"!==n&&"-"!==n||(t+=zOt[LOt++]),A_t(zOt.charCodeAt(LOt)))while(A_t(zOt.charCodeAt(LOt)))t+=zOt[LOt++];else sAt({},c_t,v_t);return S_t(zOt.charCodeAt(LOt))&&sAt({},c_t,v_t),{type:XOt,value:parseFloat(t),start:e,end:LOt}}function U_t(){var t,e,n,r,i="",a=!1;t=zOt[LOt],__t("'"===t||'"'===t,"String literal must starts with a quote"),e=LOt,++LOt;while(LOt<POt){if(n=zOt[LOt++],n===t){t="";break}if("\\"===n)if(n=zOt[LOt++],n&&E_t(n.charCodeAt(0)))"\r"===n&&"\n"===zOt[LOt]&&++LOt;else switch(n){case"u":case"x":"{"===zOt[LOt]?(++LOt,i+=M_t()):i+=T_t(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:k_t(n)?(r="01234567".indexOf(n),0!==r&&(a=!0),LOt<POt&&k_t(zOt[LOt])&&(a=!0,r=8*r+"01234567".indexOf(zOt[LOt++]),"0123".indexOf(n)>=0&&LOt<POt&&k_t(zOt[LOt])&&(r=8*r+"01234567".indexOf(zOt[LOt++]))),i+=String.fromCharCode(r)):i+=n;break}else{if(E_t(n.charCodeAt(0)))break;i+=n}}return""!==t&&sAt({},c_t,v_t),{type:KOt,value:i,octal:a,start:e,end:LOt}}function W_t(t,e){var n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(t,e){if(parseInt(e,16)<=1114111)return"x";sAt({},m_t)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){sAt({},m_t)}try{return new RegExp(t,e)}catch(i){return null}}function q_t(){var t,e,n,r,i;t=zOt[LOt],__t("/"===t,"Regular expression literal must start with a slash"),e=zOt[LOt++],n=!1,r=!1;while(LOt<POt)if(t=zOt[LOt++],e+=t,"\\"===t)t=zOt[LOt++],E_t(t.charCodeAt(0))&&sAt({},g_t),e+=t;else if(E_t(t.charCodeAt(0)))sAt({},g_t);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||sAt({},g_t),i=e.substr(1,e.length-2),{value:i,literal:e}}function V_t(){var t,e,n;e="",n="";while(LOt<POt){if(t=zOt[LOt],!D_t(t.charCodeAt(0)))break;++LOt,"\\"===t&&LOt<POt?sAt({},c_t,v_t):(n+=t,e+=t)}return n.search(/[^gimuy]/g)>=0&&sAt({},m_t,n),{value:n,literal:e}}function G_t(){var t,e,n,r;return UOt=null,N_t(),t=LOt,e=q_t(),n=V_t(),r=W_t(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:LOt}}function H_t(t){return t.type===VOt||t.type===GOt||t.type===WOt||t.type===HOt}function X_t(){var t;return N_t(),LOt>=POt?{type:qOt,start:LOt,end:LOt}:(t=zOt.charCodeAt(LOt),S_t(t)?$_t():40===t||41===t||59===t?B_t():39===t||34===t?U_t():46===t?A_t(zOt.charCodeAt(LOt+1))?P_t():B_t():A_t(t)?P_t():B_t())}function Y_t(){var t;return t=UOt,LOt=t.end,UOt=X_t(),LOt=t.end,t}function K_t(){var t;t=LOt,UOt=X_t(),LOt=t}function J_t(t){var e=new ROt(ZOt);return e.elements=t,e}function Z_t(t,e,n){var r=new ROt("||"===t||"&&"===t?i_t:QOt);return r.operator=t,r.left=e,r.right=n,r}function Q_t(t,e){var n=new ROt(t_t);return n.callee=t,n.arguments=e,n}function tAt(t,e,n){var r=new ROt(e_t);return r.test=t,r.consequent=e,r.alternate=n,r}function eAt(t){var e=new ROt(n_t);return e.name=t,e}function nAt(t){var e=new ROt(r_t);return e.value=t.value,e.raw=zOt.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function rAt(t,e,n){var r=new ROt(a_t);return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function iAt(t){var e=new ROt(o_t);return e.properties=t,e}function aAt(t,e,n){var r=new ROt(s_t);return r.key=e,r.value=n,r.kind=t,r}function oAt(t,e){var n=new ROt(u_t);return n.operator=t,n.argument=e,n.prefix=!0,n}function sAt(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(function(t,e){return __t(e<r.length,"Message reference must be in range"),r[e]}));throw n=new Error(i),n.index=LOt,n.description=i,n}function uAt(t){t.type===qOt&&sAt(t,p_t),t.type===XOt&&sAt(t,l_t),t.type===KOt&&sAt(t,f_t),t.type===VOt&&sAt(t,d_t),t.type===GOt&&sAt(t,h_t),sAt(t,c_t,t.value)}function cAt(t){var e=Y_t();e.type===YOt&&e.value===t||uAt(e)}function lAt(t){return UOt.type===YOt&&UOt.value===t}function fAt(t){return UOt.type===GOt&&UOt.value===t}function dAt(){var t=[];LOt=UOt.start,cAt("[");while(!lAt("]"))lAt(",")?(Y_t(),t.push(null)):(t.push(EAt()),lAt("]")||cAt(","));return Y_t(),J_t(t)}function hAt(){var t;return LOt=UOt.start,t=Y_t(),t.type===KOt||t.type===XOt?(t.octal&&sAt(t,b_t),nAt(t)):eAt(t.value)}function pAt(){var t,e,n,r;return LOt=UOt.start,t=UOt,t.type===VOt?(n=hAt(),cAt(":"),r=EAt(),aAt("init",n,r)):t.type!==qOt&&t.type!==YOt?(e=hAt(),cAt(":"),r=EAt(),aAt("init",e,r)):void uAt(t)}function mAt(){var t,e,n,r=[],i={},a=String;LOt=UOt.start,cAt("{");while(!lAt("}"))t=pAt(),e=t.key.type===n_t?t.key.name:a(t.key.value),n="$"+e,Object.prototype.hasOwnProperty.call(i,n)?sAt({},y_t):i[n]=!0,r.push(t),lAt("}")||cAt(",");return cAt("}"),iAt(r)}function gAt(){var t;return cAt("("),t=SAt(),cAt(")"),t}var bAt={if:1};function yAt(){var t,e,n;if(lAt("("))return gAt();if(lAt("["))return dAt();if(lAt("{"))return mAt();if(t=UOt.type,LOt=UOt.start,t===VOt||bAt[UOt.value])n=eAt(Y_t().value);else if(t===KOt||t===XOt)UOt.octal&&sAt(UOt,b_t),n=nAt(Y_t());else{if(t===GOt)throw new Error(x_t);t===WOt?(e=Y_t(),e.value="true"===e.value,n=nAt(e)):t===HOt?(e=Y_t(),e.value=null,n=nAt(e)):lAt("/")||lAt("/=")?(n=nAt(G_t()),K_t()):uAt(Y_t())}return n}function vAt(){var t=[];if(cAt("("),!lAt(")"))while(LOt<POt){if(t.push(EAt()),lAt(")"))break;cAt(",")}return cAt(")"),t}function xAt(){var t;return LOt=UOt.start,t=Y_t(),H_t(t)||uAt(t),eAt(t.value)}function wAt(){return cAt("."),xAt()}function OAt(){var t;return cAt("["),t=SAt(),cAt("]"),t}function _At(){var t,e,n;for(t=yAt();;)if(lAt("."))n=wAt(),t=rAt(".",t,n);else if(lAt("("))e=vAt(),t=Q_t(t,e);else{if(!lAt("["))break;n=OAt(),t=rAt("[",t,n)}return t}function AAt(){var t=_At();if(UOt.type===YOt&&(lAt("++")||lAt("--")))throw new Error(x_t);return t}function jAt(){var t,e;if(UOt.type!==YOt&&UOt.type!==GOt)e=AAt();else{if(lAt("++")||lAt("--"))throw new Error(x_t);if(lAt("+")||lAt("-")||lAt("~")||lAt("!"))t=Y_t(),e=jAt(),e=oAt(t.value,e);else{if(fAt("delete")||fAt("void")||fAt("typeof"))throw new Error(x_t);e=AAt()}}return e}function kAt(t){var e=0;if(t.type!==YOt&&t.type!==GOt)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break;default:break}return e}function CAt(){var t,e,n,r,i,a,o,s,u,c;if(t=UOt,u=jAt(),r=UOt,i=kAt(r),0===i)return u;r.prec=i,Y_t(),e=[t,UOt],o=jAt(),a=[u,r,o];while((i=kAt(UOt))>0){while(a.length>2&&i<=a[a.length-2].prec)o=a.pop(),s=a.pop().value,u=a.pop(),e.pop(),n=Z_t(s,u,o),a.push(n);r=Y_t(),r.prec=i,a.push(r),e.push(UOt),n=jAt(),a.push(n)}c=a.length-1,n=a[c],e.pop();while(c>1)e.pop(),n=Z_t(a[c-1].value,a[c-2],n),c-=2;return n}function EAt(){var t,e,n;return t=CAt(),lAt("?")&&(Y_t(),e=EAt(),cAt(":"),n=EAt(),t=tAt(t,e,n)),t}function SAt(){var t=EAt();if(lAt(","))throw new Error(x_t);return t}var DAt=function(t){zOt=t,LOt=0,POt=zOt.length,UOt=null,K_t();var e=SAt();if(UOt.type!==qOt)throw new Error("Unexpect token after expression.");return e};function FAt(t){const e=[];return"Identifier"===t.type?[t.name]:"Literal"===t.type?[t.value]:("MemberExpression"===t.type&&(e.push(...FAt(t.object)),e.push(...FAt(t.property))),e)}function NAt(t){return"MemberExpression"===t.object.type?NAt(t.object):"datum"===t.object.name}function TAt(t){const e=DAt(t),n=new Set;return e.visit(t=>{"MemberExpression"===t.type&&NAt(t)&&n.add(FAt(t).slice(1).join("."))}),n}class MAt extends gwt{constructor(t,e,n){super(t),this.model=e,this.filter=n,this.expr=zAt(this.model,this.filter,this),this._dependentFields=TAt(this.expr)}clone(){return new MAt(null,this.model,Xut(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return"Filter "+this.expr}}function IAt(t,e){var n;const r={},i=t.config.selection;for(const a of fct(null!==e&&void 0!==e?e:{})){const o=Xut(e[a]),s=i[o.type],{fields:u,encodings:c}=s,l=Iut(s,["fields","encodings"]);for(const t in l)"encodings"===t&&o.fields||"fields"===t&&o.encodings||("mark"===t&&(o[t]=Object.assign(Object.assign({},l[t]),o[t])),void 0!==o[t]&&!0!==o[t]||(o[t]=null!==(n=l[t])&&void 0!==n?n:o[t]));const f=mct(a),d=r[f]=Object.assign(Object.assign({},o),{name:f,events:Nut(o.on)?tit(o.on,"scope"):Xut(o.on)});Xwt(d,n=>{n.has(d)&&n.parse&&n.parse(t,d,o,e[a])})}return r}function RAt(t,e,n,r="datum"){const i=[];function a(e){const a=mct(e),o=t.getSelectionComponent(a,e),s=Tut(a+mOt);if(o.project.timeUnit){const e=null!==n&&void 0!==n?n:t.component.data.raw,r=o.project.timeUnit.clone();e.parent?r.insertAsParentOf(e):e.parent=r}return"none"!==o.empty&&i.push(s),`vlSelectionTest(${s}, ${r}`+("global"===o.resolve?")":`, ${Tut(o.resolve)})`)}const o=gct(e,a);return(i.length?"!("+i.map(t=>`length(data(${t}))`).join(" || ")+") || ":"")+`(${o})`}function $At(t,e){const n=e["encoding"];let r=e["field"];if(n||r){if(n&&!r){const i=t.project.items.filter(t=>t.channel===n);!i.length||i.length>1?(r=t.project.items[0].field,rpt((i.length?"Multiple ":"No ")+`matching ${Tut(n)} encoding found for selection ${Tut(e.selection)}. `+`Using "field": ${Tut(r)}.`)):r=i[0].field}}else r=t.project.items[0].field,t.project.items.length>1&&rpt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Tut(r)}.`);return`${t.name}[${Tut(r)}]`}function BAt(t,e){xOt(t,n=>{const r=n.name,i=t.getName("lookup_"+r);t.component.data.outputNodes[i]=n.materialized=new bwt(new MAt(e,t,{selection:r}),i,"lookup",t.component.data.outputNodeRefCounts)})}function zAt(t,e,n){return gct(e,e=>Nut(e)?e:zpt(e)?RAt(t,e.selection,n):Jpt(e))}function LAt(t,e){if(t)return xut(t)&&!_bt(t)?t.map(t=>abt(t,e)).join(", "):t}function PAt(t,e,n,r){var i,a,o;t.encode=null!==(i=t.encode)&&void 0!==i?i:{},t.encode[e]=null!==(a=t.encode[e])&&void 0!==a?a:{},t.encode[e].update=null!==(o=t.encode[e].update)&&void 0!==o?o:{},t.encode[e].update[n]=r}function UAt(t,e,n,r={header:!1}){var i,a;const o=t.combine(),{disable:s,orient:u,scale:c,labelExpr:l,title:f,zindex:d}=o,h=Iut(o,["disable","orient","scale","labelExpr","title","zindex"]);if(!s){for(const t in h){const n=Rct[t],r=h[t];if(n&&n!==e&&"both"!==n)delete h[t];else if(Mct(r)){const{condition:e}=r,n=Iut(r,["condition"]),i=kut(e),a=Tct[t];if(a){const{vgProp:e,part:r}=a,o=[...i.map(t=>{const{test:e}=t,n=Iut(t,["test"]);return Object.assign({test:zAt(null,e)},n)}),n];PAt(h,r,e,o),delete h[t]}else if(null===a){const e={signal:i.map(t=>{const{test:e}=t,n=Iut(t,["test"]);return`${zAt(null,e)} ? ${jbt(n)} : `}).join("")+jbt(n)};h[t]=e}}else if(Dpt(r)){const e=Tct[t];if(e){const{vgProp:n,part:i}=e;PAt(h,i,n,r),delete h[t]}}}if("grid"===e){if(!h.grid)return;if(h.encode){const{grid:t}=h.encode;h.encode=Object.assign({},t?{grid:t}:{}),lct(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:c,orient:u},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:kct(d,0)})}{if(!r.header&&t.mainExtracted)return;if(void 0!==l){let t=l;(null===(a=null===(i=h.encode)||void 0===i?void 0:i.labels)||void 0===a?void 0:a.update)&&Dpt(h.encode.labels.update.text)&&(t=_ct(l,"datum.label",h.encode.labels.update.text.signal)),PAt(h,"labels","text",{signal:t})}if(null===h.labelAlign&&delete h.labelAlign,h.encode){for(const e of Ict)t.hasAxisPart(e)||delete h.encode[e];lct(h.encode)&&delete h.encode}const e=LAt(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:u,grid:!1},e?{title:e}:{}),h),!1===n.aria?{aria:!1}:{}),{zindex:kct(d,0)})}}}function WAt(t){const{axes:e}=t.component,n=[];for(const r of ndt)if(e[r])for(const i of e[r])if(!i.get("disable")&&!i.get("gridScale")){const e="x"===r?"height":"width",i=t.getSizeSignalRef(e).signal;e!==i&&n.push({name:e,update:i})}return n}function qAt(t,e){const{x:n=[],y:r=[]}=t;return[...n.map(t=>UAt(t,"grid",e)),...r.map(t=>UAt(t,"grid",e)),...n.map(t=>UAt(t,"main",e)),...r.map(t=>UAt(t,"main",e))].filter(t=>t)}const VAt={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},GAt={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},HAt=fct(VAt),XAt=fct(GAt);function YAt(t,e,n,r){return Object.assign.apply(null,[{},...t.map(t=>{if("axisOrient"===t){const t="x"===n?"bottom":"left",i=e["x"===n?"axisBottom":"axisLeft"]||{},a=e["x"===n?"axisTop":"axisRight"]||{},o=new Set([...fct(i),...fct(a)]),s={};for(const e of o.values())s[e]={signal:`${r["signal"]} === "${t}" ? ${kbt(i[e])} : ${kbt(a[e])}`};return s}return e[t]})])}function KAt(t,e,n,r){const i="band"===e?["axisDiscrete","axisBand"]:"point"===e?["axisDiscrete","axisPoint"]:ymt(e)?["axisQuantitative"]:"time"===e||"utc"===e?["axisTemporal"]:[],a="x"===t?"axisX":"axisY",o=Dpt(n)?"axisOrient":"axis"+yct(n),s=[...i,...i.map(t=>a+t.substr(4))],u=["axis",o,a];return{vlOnlyAxisConfig:YAt(s,r,t,n),vgAxisConfig:YAt(u,r,t,n),axisConfigStyle:JAt([...u,...s],r)}}function JAt(t,e){var n;const r=[{}];for(const i of t){let t=null===(n=e[i])||void 0===n?void 0:n.style;if(t){t=kut(t);for(const n of t)r.push(e.style[n])}}return Object.assign.apply(null,r)}function ZAt(t,e,n,r={}){var i;const a=Nbt(t,n,e.style);if(void 0!==a)return{configFrom:"style",configValue:a};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==(null===(i=r[o])||void 0===i?void 0:i[t]))return{configFrom:o,configValue:r[o][t]};return{}}const QAt={scale:({model:t,channel:e})=>t.scaleName(e),format:({fieldOrDatumDef:t,config:e,axis:n})=>{const{format:r,formatType:i}=n;return sgt(t,t.type,r,i,e,!0)},formatType:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:r}=t;return ugt(r,e,n)},grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>{var r;return(!Mgt(t)||!Ddt(t.bin))&&(null!==(r=e.grid)&&void 0!==r?r:tjt(n,t))},gridScale:({model:t,channel:e})=>ejt(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelAlign||ajt(e,n,r),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelBaseline||ijt(e,n,r),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>{var r;return null!==(r=t.labelFlush)&&void 0!==r?r:ojt(e.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{var r;return null!==(r=t.labelOverlap)&&void 0!==r?r:sjt(e.type,n)},orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var a;const o="x"===t?"width":"y"===t?"height":void 0,s=o?e.getSizeSignalRef(o):void 0;return null!==(a=n.tickCount)&&void 0!==a?a:cjt({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},title:({axis:t,model:e,channel:n})=>{if(void 0!==t.title)return t.title;const r=ljt(e,n);if(void 0!==r)return r;const i=e.typedFieldDef(n),a="x"===n?"x2":"y2",o=e.fieldDef(a);return Mbt(i?[kgt(i)]:[],Mgt(o)?[kgt(o)]:[])},values:({axis:t,fieldOrDatumDef:e})=>fjt(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>{var r;return null!==(r=t.zindex)&&void 0!==r?r:djt(n,e)}};function tjt(t,e){return!jmt(t)&&Mgt(e)&&!Sdt(null===e||void 0===e?void 0:e.bin)}function ejt(t,e){const n="x"===e?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function njt(t,e,n,r,i){const a=null===e||void 0===e?void 0:e.labelAngle;if(void 0!==a)return Dpt(a)?a:Fct(a);{const{configValue:a}=ZAt("labelAngle",t.config,null===e||void 0===e?void 0:e.style,i);return void 0!==a?Fct(a):n===Mlt&&tct([imt,nmt],r.type)?270:void 0}}function rjt(t){return`(((${t.signal} % 360) + 360) % 360)`}function ijt(t,e,n,r){if(void 0!==t){if("x"===n){if(Dpt(t)){const n=rjt(t),r=Dpt(e)?`(${e.signal} === "top")`:"top"===e;return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${r} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(Dpt(e)){const n=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${n} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)===("top"===e)?"bottom":"top"}if(Dpt(t)){const n=rjt(t),i=Dpt(e)?`(${e.signal} === "left")`:"left"===e,a=r?'"middle"':"null";return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${a} : (45 <= ${n} && ${n} <= 135) === ${i} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return r?"middle":null;if(Dpt(e)){const n=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)===("left"===e)?"top":"bottom"}}function ajt(t,e,n){if(void 0===t)return;const r="x"===n,i=r?0:90,a=r?"bottom":"left";if(Dpt(t)){const n=rjt(t),o=Dpt(e)?`(${e.signal} === "${a}")`:e===a;return{signal:`(${i?"("+n+" + 90)":n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${o} ? "left" : "right"`}}if((t+i)%180===0)return r?null:"center";if(Dpt(e)){const n=i<t&&t<180+i?"===":"!==",r=`${e.signal} ${n} "${a}"`;return{signal:r+' ? "left" : "right"'}}return(i<t&&t<180+i)===(e===a)?"left":"right"}function ojt(t,e){if("x"===e&&tct(["quantitative","temporal"],t))return!0}function sjt(t,e){if("nominal"!==t)return"log"!==e||"greedy"}function ujt(t){return"x"===t?"bottom":"left"}function cjt({fieldOrDatumDef:t,scaleType:e,size:n,values:r}){var i;if(!r&&!jmt(e)&&"log"!==e){if(Mgt(t)){if(Sdt(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&tct(["month","hours","day","quarter"],null===(i=Ept(t.timeUnit))||void 0===i?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function ljt(t,e){const n="x"===e?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),a=r?r.title:void 0,o=i?i.title:void 0;return a&&o?Ibt(a,o):a||(o||(void 0!==a?a:void 0!==o?o:void 0))}function fjt(t,e){const n=t.values;return xut(n)?xbt(e,n):Dpt(n)?n:void 0}function djt(t,e){return"rect"===t&&Xgt(e)?1:0}class hjt extends gwt{constructor(t,e){super(t),this.transform=e,this._dependentFields=TAt(this.transform.calculate)}clone(){return new hjt(null,Xut(this.transform))}static parseAllForSortIndex(t,e){return e.forEachFieldDef((e,n)=>{if(Ugt(e)&&xgt(e.sort)){const{field:r,timeUnit:i}=e,a=e.sort,o=a.map((t,e)=>`${Jpt({field:r,timeUnit:i,equal:t})} ? ${e} : `).join("")+a.length;t=new hjt(t,{calculate:o,as:pjt(e,n,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return"Calculate "+Zut(this.transform)}}function pjt(t,e,n){return Hgt(t,Object.assign({prefix:e,suffix:"sort_index"},null!==n&&void 0!==n?n:{}))}function mjt(t,e){return tct(["top","bottom"],e)?"column":tct(["left","right"],e)||"row"===t?"row":"column"}function gjt(t,e,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return kct(((null===e||void 0===e?void 0:e.header)||{})[t],i[t],n.header[t])}function bjt(t,e,n,r){const i={};for(const a of t){const t=gjt(a,e,n,r);void 0!==t&&(i[a]=t)}return i}const yjt=["row","column"],vjt=["header","footer"];function xjt(t,e){const n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:a,titleAngle:o,titleOrient:s}=bjt(["titleAnchor","titleAngle","titleOrient"],i,r,e),u=mjt(e,s),c=Fct(o);return{name:e+"-title",type:"group",role:u+"-title",title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===e?{orient:"left"}:{}),{style:"guide-title"}),Ojt(c,u)),wjt(u,c,a)),Djt(r,i,e,HAt,VAt))}}function wjt(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=ajt(e,"row"===t?"left":"top","row"===t?"y":"x");return r?{align:r}:{}}function Ojt(t,e){const n=ijt(t,"row"===e?"left":"top","row"===e?"y":"x",!0);return n?{baseline:n}:{}}function _jt(t,e){const n=t.component.layoutHeaders[e],r=[];for(const i of vjt)if(n[i])for(const a of n[i]){const o=kjt(t,e,i,n,a);null!=o&&r.push(o)}return r}function Ajt(t,e){var n;const{sort:r}=t;return vgt(r)?{field:Hgt(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:xut(r)?{field:pjt(t,e,{expr:"datum"}),order:"ascending"}:{field:Hgt(t,{expr:"datum"}),order:null!==r&&void 0!==r?r:"ascending"}}function jjt(t,e,n){const{format:r,formatType:i,labelAngle:a,labelAnchor:o,labelOrient:s,labelExpr:u}=bjt(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t,n,e),c=igt({fieldOrDatumDef:t,format:r,formatType:i,expr:"parent",config:n}).signal,l=mjt(e,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:u?_ct(_ct(u,"datum.label",c),"datum.value",Hgt(t,{expr:"parent"})):c}},"row"===e?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Ojt(a,l)),wjt(l,a,o)),Djt(n,t,e,XAt,GAt))}function kjt(t,e,n,r,i){if(i){let a=null;const{facetFieldDef:o}=r,s=t.config?t.config:void 0;if(o&&i.labels){const{labelOrient:t}=bjt(["labelOrient"],o,s,e);("row"===e&&!tct(["top","bottom"],t)||"column"===e&&!tct(["left","right"],t))&&(a=jjt(o,e,s))}const u=EEt(t)&&!wgt(t.facet),c=i.axes,l=(null===c||void 0===c?void 0:c.length)>0;if(a||l){const s="row"===e?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`},r.facetFieldDef?{from:{data:t.getName(e+"_domain")},sort:Ajt(o,e)}:{}),l&&u?{from:{data:t.getName("facet_domain_"+e)}}:{}),a?{title:a}:{}),i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{}),l?{axes:c}:{})}}return null}const Cjt={column:{start:0,end:1},row:{start:1,end:0}};function Ejt(t,e){return Cjt[e][t]}function Sjt(t,e){const n={};for(const r of wft){const i=t[r];if(null===i||void 0===i?void 0:i.facetFieldDef){const{titleAnchor:t,titleOrient:a}=bjt(["titleAnchor","titleOrient"],i.facetFieldDef,e,r),o=mjt(r,a),s=Ejt(t,o);void 0!==s&&(n[o]=s)}}return lct(n)?void 0:n}function Djt(t,e,n,r,i){const a={};for(const o of r){if(!i[o])continue;const r=gjt(o,e,t,n);void 0!==r&&(a[i[o]]=r)}return a}function Fjt(t){return[...Njt(t,"width"),...Njt(t,"height"),...Njt(t,"childWidth"),...Njt(t,"childHeight")]}function Njt(t,e){const n="width"===e?"x":"y",r=t.component.layoutSize.get(e);if(!r||"merged"===r)return[];const i=t.getSizeSignalRef(e).signal;if("step"===r){const e=t.getScaleComponent(n);if(e){const r=e.get("type"),a=e.get("range");if(jmt(r)&&Fpt(a)){const r=t.scaleName(n);if(EEt(t.parent)){const e=t.parent.component.resolve;if("independent"===e.scale[n])return[Tjt(r,a)]}return[Tjt(r,a),{name:i,update:Mjt(r,e,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const e=i.endsWith("width"),n=e?"containerSize()[0]":"containerSize()[1]",r=qyt(t.config.view,e?"width":"height"),a=`isFinite(${n}) ? ${n} : ${r}`;return[{name:i,init:a,on:[{update:a,events:"window:resize"}]}]}return[{name:i,value:r}]}function Tjt(t,e){return{name:t+"_step",value:e.step}}function Mjt(t,e,n){const r=e.get("type"),i=e.get("padding"),a=kct(e.get("paddingOuter"),i);let o=e.get("paddingInner");return o="band"===r?void 0!==o?o:i:1,`bandspace(${n}, ${o}, ${a}) * ${t}_step`}function Ijt(t){return"childWidth"===t?"width":"childHeight"===t?"height":t}function Rjt(t,e){return fct(t).reduce((n,r)=>{const i=t[r];return Object.assign(Object.assign({},n),Dxt(e,i,r,t=>Dpt(t)?t:{value:t.value}))},{})}function $jt(t,e){if(DEt(e)||EEt(e))return"shared";if(SEt(e))return rdt(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function Bjt(t,e){const n=t.scale[e],r=rdt(e)?"axis":"legend";return"independent"===n?("shared"===t[r][e]&&rpt(x.independentScaleMeansIndependentGuide(e)),"independent"):t[r][e]||"shared"}const zjt=Object.assign(Object.assign({},Syt),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),Ljt=fct(zjt);class Pjt extends Gvt{}const Ujt={symbols:Wjt,gradient:qjt,labels:Vjt,entries:Gjt};function Wjt(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i,legendType:a}){var o,s,u,c,l;if("symbol"!==a)return;const{markDef:f,encoding:d,config:h,mark:p}=n,m=f.filled&&"trail"!==p;let g=Object.assign(Object.assign({},Cbt({},n,slt)),Lxt(n,{filled:m}));const b=null!==(o=Hjt(d.opacity))&&void 0!==o?o:f.opacity;if(g.fill)if("fill"===r||m&&r===Glt)delete g.fill;else if(g.fill["field"])i.get("symbolFillColor")?delete g.fill:(g.fill=Abt(null!==(s=h.legend.symbolBaseFillColor)&&void 0!==s?s:"black"),g.fillOpacity=Abt(null!==b&&void 0!==b?b:1));else if(xut(g.fill)){const t=null!==(l=null!==(c=Xjt(null!==(u=d.fill)&&void 0!==u?u:d.color))&&void 0!==c?c:f.fill)&&void 0!==l?l:m&&f.color;t&&(g.fill=Abt(t))}if(g.stroke)if("stroke"===r||!m&&r===Glt)delete g.stroke;else if(g.stroke["field"])delete g.stroke;else if(xut(g.stroke)){const t=kct(Xjt(d.stroke||d.color),f.stroke,m?f.color:void 0);t&&(g.stroke={value:t})}if(r!==Zlt){const t=Mgt(e)&&Kjt(n,i,e);t?g.opacity=[Object.assign({test:t},Abt(null!==b&&void 0!==b?b:1)),Abt(h.legend.unselectedOpacity)]:b&&(g.opacity=Abt(b))}return g=Object.assign(Object.assign({},g),t),lct(g)?void 0:g}function qjt(t,{model:e,legendType:n}){if("gradient"!==n)return;let r={};const i=Hjt(e.encoding.opacity)||e.markDef.opacity;return i&&(r.opacity=Abt(i)),r=Object.assign(Object.assign({},r),t),lct(r)?void 0:r}function Vjt(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i}){const a=n.legend(r)||{},o=n.config,s=Mgt(e)?Kjt(n,i,e):void 0,u=s?[{test:s,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:c,formatType:l}=a,f=egt(l)?ogt({fieldOrDatumDef:e,field:"datum.value",format:c,formatType:l,config:o}):void 0,d=Object.assign(Object.assign(Object.assign({},u?{opacity:u}:{}),f?{text:f}:{}),t);return lct(d)?void 0:d}function Gjt(t,{legendCmpt:e}){const n=e.get("selections");return(null===n||void 0===n?void 0:n.length)?Object.assign(Object.assign({},t),{fill:{value:"transparent"}}):t}function Hjt(t){return Yjt(t,(t,e)=>Math.max(t,e.value))}function Xjt(t){return Yjt(t,(t,e)=>kct(t,e.value))}function Yjt(t,e){return Tgt(t)?kut(t.condition).reduce(e,t.value):Pgt(t)?t.value:void 0}function Kjt(t,e,n){const r=e.get("selections");if(!(null===r||void 0===r?void 0:r.length))return;const i=Tut(n.field);return r.map(t=>{const e=Tut(mct(t)+mOt);return`(!length(data(${e})) || (${t}[${i}] && indexof(${t}[${i}], datum.value) >= 0))`}).join(" || ")}const Jjt={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:r,formatType:i}=e;return sgt(t,t.type,r,i,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:r}=t;return ugt(r,e,n)},gradientLength:t=>{var e,n;const{legend:r,legendConfig:i}=t;return null!==(n=null!==(e=r.gradientLength)&&void 0!==e?e:i.gradientLength)&&void 0!==n?n:ikt(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>{var r,i;return null!==(i=null!==(r=t.labelOverlap)&&void 0!==r?r:e.labelOverlap)&&void 0!==i?i:okt(n)},symbolType:({legend:t,markDef:e,channel:n,encoding:r})=>{var i;return null!==(i=t.symbolType)&&void 0!==i?i:Qjt(e.type,n,r.shape,e.shape)},title:({fieldOrDatumDef:t,config:e})=>rbt(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if(vft(n)&&Cmt(e)){if("gradient"===t)return}else if("symbol"===t)return;return t},values:({fieldOrDatumDef:t,legend:e})=>Zjt(e,t)};function Zjt(t,e){const n=t.values;return xut(n)?xbt(e,n):Dpt(n)?n:void 0}function Qjt(t,e,n,r){var i;if("shape"!==e){const t=null!==(i=Xjt(n))&&void 0!==i?i:r;if(t)return t}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function tkt(t){const{legend:e}=t;return kct(e.type,ekt(t))}function ekt({channel:t,timeUnit:e,scaleType:n}){if(vft(t)){if(tct(["quarter","month","day"],e))return"symbol";if(Cmt(n))return"gradient"}return"symbol"}function nkt({legendConfig:t,legendType:e,orient:n,legend:r}){var i,a;return null!==(a=null!==(i=r.direction)&&void 0!==i?i:t[e?"gradientDirection":"symbolDirection"])&&void 0!==a?a:rkt(n,e)}function rkt(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===e?"horizontal":void 0}}function ikt({legendConfig:t,model:e,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:o,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=t;if(Cmt(i))return"horizontal"===n?"top"===r||"bottom"===r?akt(e,"width",o,a):o:akt(e,"height",u,s)}function akt(t,e,n,r){const i=t.getSizeSignalRef(e).signal;return{signal:`clamp(${i}, ${n}, ${r})`}}function okt(t){if(tct(["quantile","threshold","log"],t))return"greedy"}function skt(t){const e=CEt(t)?ukt(t):dkt(t);return t.component.legends=e,e}function ukt(t){const{encoding:e}=t,n={};for(const r of[Glt,...kyt]){const i=cbt(e[r]);i&&t.getScaleComponent(r)&&(r===Ylt&&Mgt(i)&&i.type===amt||(n[r]=fkt(t,r)))}return n}function ckt(t,e){const n=t.scaleName(e);if("trail"===t.mark){if("color"===e)return{stroke:n};if("size"===e)return{strokeWidth:n}}return"color"===e?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}function lkt(t,e,n,r){switch(e){case"disable":return void 0!==n;case"values":return!!(null===n||void 0===n?void 0:n.values);case"title":if("title"===e&&t===(null===r||void 0===r?void 0:r.title))return!0}return t===(n||{})[e]}function fkt(t,e){var n,r,i;let a=t.legend(e);const{markDef:o,encoding:s,config:u}=t,c=u.legend,l=new Pjt({},ckt(t,e));Rwt(t,e,l);const f=void 0!==a?!a:c.disable;if(l.set("disable",f,void 0!==a),f)return l;a=a||{};const d=t.getScaleComponent(e).get("type"),h=cbt(s[e]),p=Mgt(h)?null===(n=Ept(h.timeUnit))||void 0===n?void 0:n.unit:void 0,m=a.orient||u.legend.orient||"right",g=tkt({legend:a,channel:e,timeUnit:p,scaleType:d}),b=nkt({legend:a,legendType:g,orient:m,legendConfig:c}),y={legend:a,channel:e,model:t,markDef:o,encoding:s,fieldOrDatumDef:h,legendConfig:c,config:u,scaleType:d,orient:m,legendType:g,direction:b};for(const _ of Ljt){const n=_ in Jjt?Jjt[_](y):a[_];if(void 0!==n){const r=lkt(n,_,a,t.fieldDef(e));(r||void 0===u.legend[_])&&l.set(_,n,r)}}const v=null!==(r=null===a||void 0===a?void 0:a.encoding)&&void 0!==r?r:{},x=l.get("selections"),w={},O={fieldOrDatumDef:h,model:t,channel:e,legendCmpt:l,legendType:g};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const e=Rjt(null!==(i=v[_])&&void 0!==i?i:{},t),n=_ in Ujt?Ujt[_](e,O):e;void 0===n||lct(n)||(w[_]=Object.assign(Object.assign(Object.assign({},(null===x||void 0===x?void 0:x.length)&&Mgt(h)?{name:`${mct(h.field)}_legend_${_}`}:{}),(null===x||void 0===x?void 0:x.length)?{interactive:!!x}:{}),{update:n}))}return lct(w)||l.set("encode",w,!!(null===a||void 0===a?void 0:a.encoding)),l}function dkt(t){const{legends:e,resolve:n}=t.component;for(const r of t.children){skt(r);for(const i of fct(r.component.legends))n.legend[i]=Bjt(t.component.resolve,i),"shared"===n.legend[i]&&(e[i]=hkt(e[i],r.component.legends[i]),e[i]||(n.legend[i]="independent",delete e[i]))}for(const r of fct(e))for(const e of t.children)e.component.legends[r]&&"shared"===n.legend[r]&&delete e.component.legends[r];return e}function hkt(t,e){var n,r,i,a;if(!t)return e.clone();const o=t.getWithExplicit("orient"),s=e.getWithExplicit("orient");if(o.explicit&&s.explicit&&o.value!==s.value)return;let u=!1;for(const c of Ljt){const n=Jvt(t.getWithExplicit(c),e.getWithExplicit(c),c,"legend",(t,e)=>{switch(c){case"symbolType":return pkt(t,e);case"title":return Rbt(t,e);case"type":return u=!0,Xvt("symbol")}return Kvt(t,e,c,"legend")});t.setWithExplicit(c,n)}return u&&((null===(r=null===(n=t.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&bct(t.implicit,["encode","gradient"]),(null===(a=null===(i=t.explicit)||void 0===i?void 0:i.encode)||void 0===a?void 0:a.gradient)&&bct(t.explicit,["encode","gradient"])),t}function pkt(t,e){return"circle"===e.value?e:t}function mkt(t,e,n,r){var i,a,o;t.encode=null!==(i=t.encode)&&void 0!==i?i:{},t.encode[e]=null!==(a=t.encode[e])&&void 0!==a?a:{},t.encode[e].update=null!==(o=t.encode[e].update)&&void 0!==o?o:{},t.encode[e].update[n]=r}function gkt(t){const e=t.component.legends,n={};for(const i of fct(e)){const r=t.getScaleComponent(i),a=Jut(r.get("domains"));if(n[a])for(const t of n[a]){const r=hkt(t,e[i]);r||n[a].push(e[i])}else n[a]=[e[i].clone()]}const r=dct(n).flat().map(e=>bkt(e,t.config)).filter(t=>void 0!==t);return r}function bkt(t,e){var n,r,i;const a=t.combine(),{disable:o,labelExpr:s,selections:u}=a,c=Iut(a,["disable","labelExpr","selections"]);if(!o){if(!1===e.aria&&void 0==c.aria&&(c.aria=!1),null===(n=c.encode)||void 0===n?void 0:n.symbols){const t=c.encode.symbols.update;!t.fill||"transparent"===t.fill["value"]||t.stroke||c.stroke||(t.stroke={value:"transparent"});for(const e of kyt)c[e]&&delete t[e]}if(c.title||delete c.title,void 0!==s){let t=s;(null===(i=null===(r=c.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&Dpt(c.encode.labels.update.text)&&(t=_ct(s,"datum.label",c.encode.labels.update.text.signal)),mkt(c,"labels","text",{signal:t})}for(const t in c){const e=c[t];if(Dpt(e)){const n=Cyt[t];if(n){const{vgProp:r,part:i}=n;mkt(c,i,r,e),delete c[t]}}}return c}}function ykt(t){return DEt(t)||SEt(t)?vkt(t):xkt(t)}function vkt(t){return t.children.reduce((t,e)=>t.concat(e.assembleProjections()),xkt(t))}function xkt(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:r}=n;if(e.data){const i={signal:`[${e.size.map(t=>t.signal).join(", ")}]`},a=e.data.reduce((e,n)=>{const r=Dpt(n)?n.signal:`data('${t.lookupDataSource(n)}')`;return tct(e,r)||e.push(r),e},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const wkt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Okt extends Gvt{constructor(t,e,n,r){super(Object.assign({},e),{name:t}),this.specifiedProjection=e,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function _kt(t){t.component.projection=CEt(t)?Akt(t):Ckt(t)}function Akt(t){var e;if(t.hasProjection){const n=t.specifiedProjection,r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,a=r?jkt(t):void 0;return new Okt(t.projectionName(!0),Object.assign(Object.assign({},null!==(e=t.config.projection)&&void 0!==e?e:{}),null!==n&&void 0!==n?n:{}),i,a)}}function jkt(t){const e=[],{encoding:n}=t;for(const r of[[Wlt,Ult],[Vlt,qlt]])(cbt(n[r[0]])||cbt(n[r[1]]))&&e.push({signal:t.getName("geojson_"+e.length)});return t.channelHasField(Ylt)&&t.typedFieldDef(Ylt).type===amt&&e.push({signal:t.getName("geojson_"+e.length)}),0===e.length&&e.push(t.requestDataName(oxt)),e}function kkt(t,e){const n=nct(wkt,n=>!Sut(t.explicit,n)&&!Sut(e.explicit,n)||!(!Sut(t.explicit,n)||!Sut(e.explicit,n)||Jut(t.get(n))!==Jut(e.get(n)))),r=Jut(t.size)===Jut(e.size);if(r){if(n)return t;if(Jut(t.explicit)===Jut({}))return e;if(Jut(e.explicit)===Jut({}))return t}return null}function Ckt(t){if(0===t.children.length)return;let e;for(const r of t.children)_kt(r);const n=nct(t.children,t=>{const n=t.component.projection;if(n){if(e){const t=kkt(e,n);return t&&(e=t),!!t}return e=n,!0}return!0});if(e&&n){const n=t.projectionName(!0),r=new Okt(n,e.specifiedProjection,e.size,Xut(e.data));for(const e of t.children){const t=e.component.projection;t&&(t.isFit&&r.data.push(...e.component.projection.data),e.renameProjection(t.get("name"),n),t.merged=!0)}return r}}function Ekt(t,e,n,r){var i,a;if(wbt(e,n)){const o=CEt(t)&&null!==(a=null!==(i=t.axis(n))&&void 0!==i?i:t.legend(n))&&void 0!==a?a:{},s=Hgt(e,{expr:"datum"}),u=Hgt(e,{expr:"datum",binSuffix:"end"});return{formulaAs:Hgt(e,{binSuffix:"range",forAs:!0}),formula:hgt(s,u,o.format,o.formatType,r)}}return{}}function Skt(t,e){return`${Edt(t)}_${e}`}function Dkt(t,e){return{signal:t.getName(e+"_bins"),extentSignal:t.getName(e+"_extent")}}function Fkt(t,e,n){var r;const i=null!==(r=pbt(n,void 0))&&void 0!==r?r:{},a=Skt(i,e);return t.getName(a+"_bins")}function Nkt(t){return"as"in t}function Tkt(t,e,n){let r,i;r=Nkt(t)?Nut(t.as)?[t.as,t.as+"_end"]:[t.as[0],t.as[1]]:[Hgt(t,{forAs:!0}),Hgt(t,{binSuffix:"end",forAs:!0})];const a=Object.assign({},pbt(e,void 0)),o=Skt(a,t.field),{signal:s,extentSignal:u}=Dkt(n,o);if(Ndt(a.extent)){const t=a.extent,e=t.selection;i=$At(n.getSelectionComponent(mct(e),e),t),delete a.extent}const c=Object.assign(Object.assign(Object.assign({bin:a,field:t.field,as:[r]},s?{signal:s}:{}),u?{extentSignal:u}:{}),i?{span:i}:{});return{key:o,binComponent:c}}class Mkt extends gwt{constructor(t,e){super(t),this.bins=e}clone(){return new Mkt(null,Xut(this.bins))}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,n,r)=>{if(Lgt(n)&&Sdt(n.bin)){const{key:i,binComponent:a}=Tkt(n,n.bin,e);t[i]=Object.assign(Object.assign(Object.assign({},a),t[i]),Ekt(e,n,r,e.config))}return t},{});return lct(n)?null:new Mkt(t,n)}static makeFromTransform(t,e,n){const{key:r,binComponent:i}=Tkt(e,e.bin,n);return new Mkt(t,{[r]:i})}merge(t,e){for(const n of fct(t.bins))n in this.bins?(e(t.bins[n].signal,this.bins[n].signal),this.bins[n].as=act([...this.bins[n].as,...t.bins[n].as],Zut)):this.bins[n]=t.bins[n];for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}producedFields(){return new Set(dct(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(dct(this.bins).map(t=>t.field))}hash(){return"Bin "+Zut(this.bins)}assemble(){return dct(this.bins).flatMap(t=>{const e=[],[n,...r]=t.as,i=t.bin,{extent:a}=i,o=Iut(i,["extent"]),s=Object.assign(Object.assign(Object.assign({type:"bin",field:Oct(t.field),as:n,signal:t.signal},Ndt(a)?{extent:null}:{extent:a}),t.span?{span:{signal:`span(${t.span})`}}:{}),o);!a&&t.extentSignal&&(e.push({type:"extent",field:Oct(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),e.push(s);for(const u of r)for(let t=0;t<2;t++)e.push({type:"formula",expr:Hgt({field:n[t]},{expr:"datum"}),as:u[t]});return t.formula&&e.push({type:"formula",expr:t.formula,as:t.formulaAs}),e})}}class Ikt extends gwt{constructor(t){let e;if(super(null),t=null!==t&&void 0!==t?t:{name:"source"},nxt(t)||(e=t.format?Object.assign({},Kut(t.format,["parse"])):{}),txt(t))this._data={values:t.values};else if(Qvt(t)){if(this._data={url:t.url},!e.type){let n=/(?:\.([^.]+))?$/.exec(t.url)[1];tct(["json","csv","tsv","dsv","topojson"],n)||(n="json"),e.type=n}}else ixt(t)?this._data={values:[{type:"Sphere"}]}:(ext(t)||nxt(t))&&(this._data={});this._generator=nxt(t),t.name&&(this._name=t.name),e&&!lct(e)&&(this._data.format=e)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}function Rkt(t){for(const e of t){for(const t of e.children)if(t.parent!==e)return console.error("Dataflow graph is inconsistent.",e,t),!1;if(!Rkt(e.children))return!1}return!0}class $kt extends gwt{constructor(t,e){super(t),this.params=e}clone(){return new $kt(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return"Graticule "+Zut(this.params)}assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}class Bkt extends gwt{constructor(t,e){super(t),this.params=e}clone(){return new Bkt(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([null!==(t=this.params.as)&&void 0!==t?t:"data"])}hash(){return"Hash "+Zut(this.params)}assemble(){return Object.assign({type:"sequence"},this.params)}}function zkt(t){return t instanceof Ikt||t instanceof $kt||t instanceof Bkt}class Lkt{constructor(){this._mutated=!1}setMutated(){this._mutated=!0}get mutatedFlag(){return this._mutated}}class Pkt extends Lkt{constructor(){super(),this._continue=!1}setContinue(){this._continue=!0}get continueFlag(){return this._continue}get flags(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}}set flags({continueFlag:t,mutatedFlag:e}){t&&this.setContinue(),e&&this.setMutated()}reset(){}optimizeNextFromLeaves(t){if(zkt(t))return!1;const e=t.parent,{continueFlag:n}=this.run(t);return n&&this.optimizeNextFromLeaves(e),this.mutatedFlag}}class Ukt extends Lkt{}function Wkt(t,e,n,r){const i=CEt(r)?r.encoding[Bft(e)]:void 0;if(Lgt(n)&&CEt(r)&&Sgt(e,n,i,r.stack,r.markDef,r.config))t.add(Hgt(n,{})),t.add(Hgt(n,{suffix:"end"})),n.bin&&wbt(n,e)&&t.add(Hgt(n,{binSuffix:"range"}));else if(gft(e)){const n=mft(e);t.add(r.getName(n))}else t.add(Hgt(n));return t}function qkt(t,e){var n;for(const r of fct(e)){const i=e[r];for(const e of fct(i))r in t?t[r][e]=new Set([...null!==(n=t[r][e])&&void 0!==n?n:[],...i[e]]):t[r]={[e]:i[e]}}}class Vkt extends gwt{constructor(t,e,n){super(t),this.dimensions=e,this.measures=n}clone(){return new Vkt(null,new Set(this.dimensions),Xut(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,e){let n=!1;e.forEachFieldDef(t=>{t.aggregate&&(n=!0)});const r={},i=new Set;return n?(e.forEachFieldDef((t,n)=>{var a,o,s,u;const{aggregate:c,field:l}=t;if(c)if("count"===c)r["*"]=null!==(a=r["*"])&&void 0!==a?a:{},r["*"]["count"]=new Set([Hgt(t,{forAs:!0})]);else{if(Olt(c)||_lt(c)){const t=Olt(c)?"argmin":"argmax",e=c[t];r[e]=null!==(o=r[e])&&void 0!==o?o:{},r[e][t]=new Set([Hgt({op:t,field:e},{forAs:!0})])}else r[l]=null!==(s=r[l])&&void 0!==s?s:{},r[l][c]=new Set([Hgt(t,{forAs:!0})]);wdt(n)&&"unaggregated"===e.scaleDomain(n)&&(r[l]=null!==(u=r[l])&&void 0!==u?u:{},r[l]["min"]=new Set([Hgt({field:l,aggregate:"min"},{forAs:!0})]),r[l]["max"]=new Set([Hgt({field:l,aggregate:"max"},{forAs:!0})]))}else Wkt(i,n,t,e)}),i.size+fct(r).length===0?null:new Vkt(t,i,r)):null}static makeFromTransform(t,e){var n,r,i;const a=new Set,o={};for(const s of e.aggregate){const{op:t,field:e,as:i}=s;t&&("count"===t?(o["*"]=null!==(n=o["*"])&&void 0!==n?n:{},o["*"]["count"]=new Set([i||Hgt(s,{forAs:!0})])):(o[e]=null!==(r=o[e])&&void 0!==r?r:{},o[e][t]=new Set([i||Hgt(s,{forAs:!0})])))}for(const s of null!==(i=e.groupby)&&void 0!==i?i:[])a.add(s);return a.size+fct(o).length===0?null:new Vkt(t,a,o)}merge(t){return oct(this.dimensions,t.dimensions)?(qkt(this.measures,t.measures),!0):(ipt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...fct(this.measures)])}producedFields(){const t=new Set;for(const e of fct(this.measures))for(const n of fct(this.measures[e])){const r=this.measures[e][n];0===r.size?t.add(`${n}_${e}`):r.forEach(t.add,t)}return t}hash(){return"Aggregate "+Zut({dimensions:this.dimensions,measures:this.measures})}assemble(){const t=[],e=[],n=[];for(const i of fct(this.measures))for(const r of fct(this.measures[i]))for(const a of this.measures[i][r])n.push(a),t.push(r),e.push("*"===i?null:Oct(i));const r={type:"aggregate",groupby:[...this.dimensions].map(Oct),ops:t,fields:e,as:n};return r}}class Gkt extends gwt{constructor(t,e,n,r){super(t),this.model=e,this.name=n,this.data=r;for(const i of wft){const t=e.facet[i];if(t){const{bin:n,sort:r}=t;this[i]=Object.assign({name:e.getName(i+"_domain"),fields:[Hgt(t),...Sdt(n)?[Hgt(t,{binSuffix:"end"})]:[]]},vgt(r)?{sortField:r}:xut(r)?{sortIndexField:pjt(t,i)}:{})}}this.childModel=e.child}hash(){let t="Facet";for(const e of wft)this[e]&&(t+=` ${e.charAt(0)}:${Zut(this[e])}`);return t}get fields(){var t;const e=[];for(const n of wft)(null===(t=this[n])||void 0===t?void 0:t.fields)&&e.push(...this[n].fields);return e}dependentFields(){const t=new Set(this.fields);for(const e of wft)this[e]&&(this[e].sortField&&t.add(this[e].sortField.field),this[e].sortIndexField&&t.add(this[e].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const e of ndt){const n=this.childModel.component.scales[e];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(jmt(r)&&Fpt(i)){const n=UCt(this.childModel,e),r=PCt(n);r?t[e]=r:rpt(`Unknown field for ${e}. Cannot calculate view size.`)}}}return t}assembleRowColumnHeaderData(t,e,n){const r={row:"y",column:"x"}[t],i=[],a=[],o=[];n&&n[r]&&(e?(i.push("distinct_"+n[r]),a.push("max")):(i.push(n[r]),a.push("distinct")),o.push("distinct_"+n[r]));const{sortField:s,sortIndexField:u}=this[t];if(s){const{op:t=mgt,field:e}=s;i.push(e),a.push(t),o.push(Hgt(s,{forAs:!0}))}else u&&(i.push(u),a.push("max"),o.push(u));return{name:this[t].name,source:null!==e&&void 0!==e?e:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},i.length?{fields:i,ops:a,as:o}:{})]}}assembleFacetHeaderData(t){var e,n;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,a=[],o={};for(const c of yjt){for(const t of vjt){const r=null!==(e=i[c]&&i[c][t])&&void 0!==e?e:[];for(const t of r)if((null===(n=t.axes)||void 0===n?void 0:n.length)>0){o[c]=!0;break}}if(o[c]){const t=`length(data("${this.facet.name}"))`,e="row"===c?r?{signal:`ceil(${t} / ${r})`}:1:r?{signal:`min(${t}, ${r})`}:{signal:t};a.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:e}]})}}const{row:s,column:u}=o;return(s||u)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,t)),a}assemble(){var t,e;const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:a,row:o,facet:s}=this;if(a&&o&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(null!==(t=i.x)&&void 0!==t?t:[],null!==(e=i.y)&&void 0!==e?e:[]),o=a.map(()=>"distinct");n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:o}]})}for(const u of[Nlt,Flt])this[u]&&n.push(this.assembleRowColumnHeaderData(u,r,i));if(s){const t=this.assembleFacetHeaderData(i);t&&n.push(...t)}return n}}function Hkt(t){return"'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]?t.slice(1,-1):t}function Xkt(t,e){const n=vct(t);if("number"===e)return`toNumber(${n})`;if("boolean"===e)return`toBoolean(${n})`;if("string"===e)return`toString(${n})`;if("date"===e)return`toDate(${n})`;if("flatten"===e)return n;if(0===e.indexOf("date:")){const t=Hkt(e.slice(5,e.length));return`timeParse(${n},'${t}')`}if(0===e.indexOf("utc:")){const t=Hkt(e.slice(4,e.length));return`utcParse(${n},'${t}')`}return rpt(x.unrecognizedParse(e)),null}function Ykt(t){const e={};return Vut(t.filter,t=>{var n;if(Xpt(t)){let r=null;Lpt(t)?r=t.equal:Vpt(t)?r=t.range[0]:Gpt(t)&&(r=(null!==(n=t.oneOf)&&void 0!==n?n:t["in"])[0]),r&&(apt(r)?e[t.field]="date":Fut(r)?e[t.field]="number":Nut(r)&&(e[t.field]="string")),t.timeUnit&&(e[t.field]="date")}}),e}function Kkt(t){const e={};function n(t){bbt(t)?e[t.field]="date":"quantitative"===t.type&&Clt(t.aggregate)?e[t.field]="number":jct(t.field)>1?t.field in e||(e[t.field]="flatten"):Ugt(t)&&vgt(t.sort)&&jct(t.sort.field)>1&&(t.sort.field in e||(e[t.sort.field]="flatten"))}if((CEt(t)||EEt(t))&&t.forEachFieldDef((e,r)=>{if(Lgt(e))n(e);else{const i=Rft(r),a=t.fieldDef(i);n(Object.assign(Object.assign({},e),{type:a.type}))}}),CEt(t)){const{mark:n,markDef:r,encoding:i}=t;if(elt(n)&&!t.encoding.order){const t="horizontal"===r.orient?"y":"x",n=i[t];Mgt(n)&&"quantitative"===n.type&&!(n.field in e)&&(e[n.field]="number")}}return e}function Jkt(t){const e={};if(CEt(t)&&t.component.selection)for(const n of fct(t.component.selection)){const r=t.component.selection[n];for(const t of r.project.items)!t.channel&&jct(t.field)>1&&(e[t.field]="flatten")}return e}class Zkt extends gwt{constructor(t,e){super(t),this._parse=e}clone(){return new Zkt(null,Xut(this._parse))}hash(){return"Parse "+Zut(this._parse)}static makeExplicit(t,e,n){let r={};const i=e.data;return!nxt(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(t,r,{},n)}static makeWithAncestors(t,e,n,r){for(const o of fct(n)){const t=r.getWithExplicit(o);void 0!==t.value&&(t.explicit||t.value===n[o]||"derived"===t.value||"flatten"===n[o]?delete n[o]:rpt(x.differentParse(o,n[o],t.value)))}for(const o of fct(e)){const t=r.get(o);void 0!==t&&(t===e[o]?delete e[o]:rpt(x.differentParse(o,e[o],t)))}const i=new Gvt(e,n);r.copyAll(i);const a={};for(const o of fct(i.combine())){const t=i.get(o);null!==t&&(a[o]=t)}return 0===fct(a).length||r.parseNothing?null:new Zkt(t,a)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const e of fct(this._parse)){const n=this._parse[e];1===jct(e)&&(t[e]=n)}return t}producedFields(){return new Set(fct(this._parse))}dependentFields(){return new Set(fct(this._parse))}assembleTransforms(t=!1){return fct(this._parse).filter(e=>!t||jct(e)>1).map(t=>{const e=Xkt(t,this._parse[t]);if(!e)return null;const n={type:"formula",expr:e,as:Act(t)};return n}).filter(t=>null!==t)}}class Qkt extends gwt{clone(){return new Qkt(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Dyt])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Dyt}}}class tCt extends gwt{constructor(t,e){super(t),this.transform=e}clone(){return new tCt(null,Xut(this.transform))}addDimensions(t){this.transform.groupby=act(this.transform.groupby.concat(t),t=>t)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(t=>t.field).filter(t=>void 0!==t).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:Hgt(t)}hash(){return"JoinAggregateTransform "+Zut(this.transform)}assemble(){const t=[],e=[],n=[];for(const i of this.transform.joinaggregate)e.push(i.op),n.push(this.getDefaultName(i)),t.push(void 0===i.field?null:i.field);const r=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:e,fields:t},void 0!==r?{groupby:r}:{})}}function eCt(t){return t.stack.stackBy.reduce((t,e)=>{const n=e.fieldDef,r=Hgt(n);return r&&t.push(r),t},[])}function nCt(t){return xut(t)&&t.every(t=>Nut(t))&&t.length>1}class rCt extends gwt{constructor(t,e){super(t),this._stack=e}clone(){return new rCt(null,Xut(this._stack))}static makeFromTransform(t,e){const{stack:n,groupby:r,as:i,offset:a="zero"}=e,o=[],s=[];if(void 0!==e.sort)for(const l of e.sort)o.push(l.field),s.push(kct(l.order,"ascending"));const u={field:o,order:s};let c;return c=nCt(i)?i:Nut(i)?[i,i+"_end"]:[e.stack+"_start",e.stack+"_end"],new rCt(t,{stackField:n,groupby:r,offset:a,sort:u,facetby:[],as:c})}static makeFromEncoding(t,e){const n=e.stack,{encoding:r}=e;if(!n)return null;const{groupbyChannel:i,fieldChannel:a,offset:o,impute:s}=n;let u;if(i){const t=r[i];u=ubt(t)}const c=eCt(e),l=e.encoding.order;let f;return f=xut(l)||Mgt(l)?Tbt(l):c.reduce((t,e)=>(t.field.push(e),t.order.push("y"===a?"descending":"ascending"),t),{field:[],order:[]}),new rCt(t,{dimensionFieldDef:u,stackField:e.vgField(a),facetby:[],stackby:c,sort:f,offset:o,impute:s,as:[e.vgField(a,{suffix:"start",forAs:!0}),e.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return"Stack "+Zut(this._stack)}getGroupbyFields(){const{dimensionFieldDef:t,impute:e,groupby:n}=this._stack;return t?t.bin?e?[Hgt(t,{binSuffix:"mid"})]:[Hgt(t,{}),Hgt(t,{binSuffix:"end"})]:[Hgt(t)]:null!==n&&void 0!==n?n:[]}assemble(){const t=[],{facetby:e,dimensionFieldDef:n,stackField:r,stackby:i,sort:a,offset:o,impute:s,as:u}=this._stack;if(s&&n){const{band:a=.5,bin:o}=n;o&&t.push({type:"formula",expr:a+"*"+Hgt(n,{expr:"datum"})+`+${1-a}*`+Hgt(n,{expr:"datum",binSuffix:"end"}),as:Hgt(n,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:r,groupby:[...i,...e],key:Hgt(n,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...e],field:r,sort:a,as:u,offset:o}),t}}class iCt extends gwt{constructor(t,e){super(t),this.transform=e}clone(){return new iCt(null,Xut(this.transform))}addDimensions(t){this.transform.groupby=act(this.transform.groupby.concat(t),t=>t)}dependentFields(){var t,e;const n=new Set;return(null!==(t=this.transform.groupby)&&void 0!==t?t:[]).forEach(n.add,n),(null!==(e=this.transform.sort)&&void 0!==e?e:[]).forEach(t=>n.add(t.field)),this.transform.window.map(t=>t.field).filter(t=>void 0!==t).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:Hgt(t)}hash(){return"WindowTransform "+Zut(this.transform)}assemble(){var t;const e=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(void 0===f.param?null:f.param),e.push(void 0===f.field?null:f.field);const a=this.transform.frame,o=this.transform.groupby;if(a&&null===a[0]&&null===a[1]&&n.every(t=>Alt(t)))return Object.assign({type:"joinaggregate",as:r,ops:n,fields:e},void 0!==o?{groupby:o}:{});const s=[],u=[];if(void 0!==this.transform.sort)for(const f of this.transform.sort)s.push(f.field),u.push(null!==(t=f.order)&&void 0!==t?t:"ascending");const c={field:s,order:u},l=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:i,as:r,ops:n,fields:e,sort:c},void 0!==l?{ignorePeers:l}:{}),void 0!==o?{groupby:o}:{}),void 0!==a?{frame:a}:{})}}class aCt extends Pkt{run(t){const e=t.parent;if(t instanceof Zkt){if(zkt(e))return this.flags;if(e.numChildren()>1)return this.setContinue(),this.flags;if(e instanceof Zkt)this.setMutated(),e.merge(t);else{if(cct(e.producedFields(),t.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),t.swapWithParent()}}return this.setContinue(),this.flags}}class oCt extends Ukt{mergeNodes(t,e){const n=e.shift();for(const r of e)t.removeChild(r),r.parent=n,r.remove()}run(t){const e=t.children.map(t=>t.hash()),n={};for(let r=0;r<e.length;r++)void 0===n[e[r]]?n[e[r]]=[t.children[r]]:n[e[r]].push(t.children[r]);for(const r of fct(n))n[r].length>1&&(this.setMutated(),this.mergeNodes(t,n[r]));for(const r of t.children)this.run(r);return this.mutatedFlag}}class sCt extends Pkt{run(t){return t instanceof bwt||t.numChildren()>0||t instanceof Gkt||(this.setMutated(),t.remove()),this.flags}}class uCt extends Pkt{constructor(){super(...arguments),this.fields=new Set,this.prev=null}run(t){if(this.setContinue(),t instanceof ywt){const e=t.producedFields();sct(e,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([...this.fields,...e]),this.prev=t}return this.flags}reset(){this.fields.clear()}}class cCt extends Pkt{run(t){this.setContinue();const e=t.parent,n=e.children.filter(t=>t instanceof ywt),r=n.pop();for(const i of n)this.setMutated(),r.merge(i);return this.flags}}function lCt(t){function e(n){if(!(n instanceof Gkt)){const r=n.clone();if(r instanceof bwt){const e=vCt+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof Vkt||r instanceof rCt||r instanceof iCt||r instanceof tCt)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}return e}function fCt(t){if(t instanceof Gkt)if(1!==t.numChildren()||t.children[0]instanceof bwt){const e=t.model.component.data.main;dCt(e);const n=lCt(t),r=t.children.map(n).flat();for(const t of r)t.parent=e}else{const e=t.children[0];(e instanceof Vkt||e instanceof rCt||e instanceof iCt||e instanceof tCt)&&e.addDimensions(t.fields),e.swapWithParent(),fCt(t)}else t.children.map(fCt)}function dCt(t){if(t instanceof bwt&&t.type===oxt&&1===t.numChildren()){const e=t.children[0];e instanceof Gkt||(e.swapWithParent(),dCt(t))}}class hCt extends Ukt{constructor(){super()}run(t){t instanceof bwt&&!t.isRequired()&&(this.setMutated(),t.remove());for(const e of t.children)this.run(e);return this.mutatedFlag}}class pCt extends Ukt{constructor(t){super(),this.requiresSelectionId=t&&_Ot(t)}run(t){t instanceof Qkt&&(this.requiresSelectionId&&(zkt(t.parent)||t.parent instanceof Vkt||t.parent instanceof Zkt)||(this.setMutated(),t.remove()));for(const e of t.children)this.run(e);return this.mutatedFlag}}class mCt extends Pkt{run(t){const e=t.parent,n=[...e.children],r=e.children.filter(t=>t instanceof Zkt);if(e.numChildren()>1&&r.length>=1){const t={},i=new Set;for(const e of r){const n=e.parse;for(const e of fct(n))e in t?t[e]!==n[e]&&i.add(e):t[e]=n[e]}for(const e of i)delete t[e];if(!lct(t)){this.setMutated();const r=new Zkt(e,t);for(const i of n){if(i instanceof Zkt)for(const e of fct(t))delete i.parse[e];e.removeChild(i),i.parent=r,i instanceof Zkt&&0===fct(i.parse).length&&i.remove()}}}return this.setContinue(),this.flags}}class gCt extends Pkt{run(t){const e=t.parent,n=e.children.filter(t=>t instanceof Vkt),r={};for(const i of n){const t=Zut(i.groupBy);t in r||(r[t]=[]),r[t].push(i)}for(const i of fct(r)){const t=r[i];if(t.length>1){const n=t.pop();for(const r of t)n.merge(r)&&(e.removeChild(r),r.parent=n,r.remove(),this.setMutated())}}return this.setContinue(),this.flags}}class bCt extends Pkt{constructor(t){super(),this.model=t}run(t){const e=t.parent,n=!(zkt(e)||e instanceof MAt||e instanceof Zkt||e instanceof Qkt),r=[],i=[];for(const a of e.children)a instanceof Mkt&&(n&&!cct(e.producedFields(),a.dependentFields())?r.push(a):i.push(a));if(r.length>0){const t=r.pop();for(const e of r)t.merge(e,this.model.renameSignal.bind(this.model));this.setMutated(),e instanceof Mkt?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(i.length>1){const t=i.pop();for(const e of i)t.merge(e,this.model.renameSignal.bind(this.model));this.setMutated()}return this.setContinue(),this.flags}}class yCt extends Pkt{run(t){const e=t.parent,n=[...e.children],r=ect(n,t=>t instanceof bwt);if(!r||e.numChildren()<=1)return this.setContinue(),this.flags;const i=[];let a;for(const o of n)if(o instanceof bwt){let t=o;while(1===t.numChildren()){const e=t.children[0];if(!(e instanceof bwt))break;t=e}i.push(...t.children),a?(e.removeChild(o),o.parent=a.parent,a.parent.removeChild(a),a.parent=t,this.setMutated()):a=t}else i.push(o);if(i.length){this.setMutated();for(const t of i)t.parent.removeChild(t),t.parent=a}return this.setContinue(),this.flags}}const vCt="scale_",xCt=5;function wCt(t){const e=[];function n(t){if(0===t.numChildren())e.push(t);else for(const e of t.children)n(e)}for(const r of t)n(r);return e}function OCt(t){return t}function _Ct(t,e){const n=e.map(e=>{if(t instanceof Pkt){const n=t.optimizeNextFromLeaves(e);return t.reset(),n}return t.run(e)});return n.some(OCt)}function ACt(t,e){let n=t.sources;const r=new Set;return r.add(_Ct(new hCt,n)),r.add(_Ct(new pCt(e),n)),n=n.filter(t=>t.numChildren()>0),r.add(_Ct(new sCt,wCt(n))),n=n.filter(t=>t.numChildren()>0),r.add(_Ct(new aCt,wCt(n))),r.add(_Ct(new bCt(e),wCt(n))),r.add(_Ct(new uCt,wCt(n))),r.add(_Ct(new mCt,wCt(n))),r.add(_Ct(new gCt,wCt(n))),r.add(_Ct(new cCt,wCt(n))),r.add(_Ct(new oCt,n)),r.add(_Ct(new yCt,wCt(n))),t.sources=n,r.has(!0)}function jCt(t,e){Rkt(t.sources);let n=0,r=0;for(let i=0;i<xCt;i++){if(!ACt(t,e))break;n++}t.sources.map(fCt);for(let i=0;i<xCt;i++){if(!ACt(t,e))break;r++}Rkt(t.sources),Math.max(n,r)===xCt&&rpt(`Maximum optimization runs(${xCt}) reached.`)}class kCt{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,e){return new kCt(()=>t(e))}}function CCt(t){CEt(t)?ECt(t):SCt(t)}function ECt(t){const e=t.component.scales;for(const n of fct(e)){const r=FCt(t,n),i=e[n];if(i.setWithExplicit("domains",r),RCt(t,n),t.component.data.isFaceted){let e=t;while(!EEt(e)&&e.parent)e=e.parent;const i=e.component.resolve.scale[n];if("shared"===i)for(const t of r.value)Mpt(t)&&(t.data=vCt+t.data.replace(vCt,""))}}}function SCt(t){for(const n of t.children)CCt(n);const e=t.component.scales;for(const n of fct(e)){let r,i=null;for(const e of t.children){const t=e.component.scales[n];if(t){r=void 0===r?t.getWithExplicit("domains"):Jvt(r,t.getWithExplicit("domains"),"domains","scale",zCt);const e=t.get("selectionExtent");i&&e&&i.selection!==e.selection&&rpt("The same selection must be used to override scale domains in a layered view."),i=e}}e[n].setWithExplicit("domains",r),i&&e[n].set("selectionExtent",i,!0)}}function DCt(t,e,n,r){if("unaggregated"===t){const{valid:t,reason:r}=BCt(e,n);if(!t)return void rpt(r)}else if(void 0===t&&r.useUnaggregatedDomain){const{valid:t}=BCt(e,n);if(t)return"unaggregated"}return t}function FCt(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:r}=t,i=DCt(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return i!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign(Object.assign({},t.specifiedScales[e]),{domain:i})),"x"===e&&cbt(r.x2)?cbt(r.x)?Jvt(MCt(n,i,t,"x"),MCt(n,i,t,"x2"),"domain","scale",zCt):MCt(n,i,t,"x2"):"y"===e&&cbt(r.y2)?cbt(r.y)?Jvt(MCt(n,i,t,"y"),MCt(n,i,t,"y2"),"domain","scale",zCt):MCt(n,i,t,"y2"):MCt(n,i,t,e)}function NCt(t,e,n){return t.map(t=>{const r=vbt(t,{timeUnit:n,type:e});return{signal:`{data: ${r}}`}})}function TCt(t,e,n){var r;const i=null===(r=Ept(n))||void 0===r?void 0:r.unit;return"temporal"===e||i?NCt(t,e,i):[t]}function MCt(t,e,n,r){const{encoding:i}=n,a=cbt(i[r]),{type:o}=a,s=a["timeUnit"];if(Nmt(e)){const i=MCt(t,void 0,n,r),a=TCt(e.unionWith,o,s);return Hvt([...i.value,...a])}if(Dpt(e))return Hvt([e]);if(e&&"unaggregated"!==e&&!Fmt(e))return Hvt(TCt(e,o,s));const u=n.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return Xvt([[0,1]]);const t=n.requestDataName(oxt);return Xvt([{data:t,field:n.vgField(r,{suffix:"start"})},{data:t,field:n.vgField(r,{suffix:"end"})}])}const c=wdt(r)&&Mgt(a)?$Ct(n,r,t):void 0;if(Rgt(a)){const t=TCt([a.datum],o,s);return Xvt(t)}const l=a;if("unaggregated"===e){const t=n.requestDataName(oxt),{field:e}=a;return Xvt([{data:t,field:Hgt({field:e,aggregate:"min"})},{data:t,field:Hgt({field:e,aggregate:"max"})}])}if(Sdt(l.bin)){if(jmt(t))return Xvt("bin-ordinal"===t?[]:[{data:pct(c)?n.requestDataName(oxt):n.requestDataName(sxt),field:n.vgField(r,wbt(l,r)?{binSuffix:"range"}:{}),sort:!0!==c&&wut(c)?c:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:t}=l;if(Sdt(t)){const e=Fkt(n,l.field,t);return Xvt([new kCt(()=>{const t=n.getSignalName(e);return`[${t}.start, ${t}.stop]`})])}return Xvt([{data:n.requestDataName(oxt),field:n.vgField(r,{})}])}}if(l.timeUnit&&tct(["time","utc"],t)&&Sgt(r,l,CEt(n)?n.encoding[Bft(r)]:void 0,n.stack,n.markDef,n.config)){const t=n.requestDataName(oxt);return Xvt([{data:t,field:n.vgField(r)},{data:t,field:n.vgField(r,{suffix:"end"})}])}return Xvt(c?[{data:pct(c)?n.requestDataName(oxt):n.requestDataName(sxt),field:n.vgField(r),sort:c}]:[{data:n.requestDataName(oxt),field:n.vgField(r)}])}function ICt(t,e){const{op:n,field:r,order:i}=t;return Object.assign(Object.assign({op:null!==n&&void 0!==n?n:e?"sum":mgt},r?{field:Oct(r)}:{}),i?{order:i}:{})}function RCt(t,e){var n;const r=t.component.scales[e],i=t.specifiedScales[e].domain,a=null===(n=t.fieldDef(e))||void 0===n?void 0:n.bin,o=Fmt(i)&&i,s=Fdt(a)&&Ndt(a.extent)&&a.extent;(o||s)&&r.set("selectionExtent",null!==o&&void 0!==o?o:s,!0)}function $Ct(t,e,n){if(!jmt(n))return;const r=t.fieldDef(e),i=r.sort;if(xgt(i))return{op:"min",field:pjt(r,e),order:"ascending"};const{stack:a}=t,o=a?[...a.groupbyField?[a.groupbyField]:[],...a.stackBy.map(t=>t.fieldDef.field)]:void 0;if(vgt(i)){const t=a&&!tct(o,i.field);return ICt(i,t)}if(ygt(i)){const{encoding:e,order:n}=i,r=t.fieldDef(e),{aggregate:s,field:u}=r,c=a&&!tct(o,u);if(Olt(s)||_lt(s))return ICt({field:Hgt(r),order:n},c);if(Alt(s)||!s)return ICt({op:s,field:u,order:n},c)}else{if("descending"===i)return{op:"min",field:t.vgField(e),order:"descending"};if(tct(["ascending",void 0],i))return!0}}function BCt(t,e){const{aggregate:n,type:r}=t;return n?Nut(n)&&!Dlt[n]?{valid:!1,reason:x.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===e?{valid:!1,reason:x.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:x.unaggregateDomainHasNoEffectForRawField(t)}}function zCt(t,e,n,r){return t.explicit&&e.explicit&&rpt(x.mergeConflictingDomainProperty(n,r,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function LCt(t){const e=act(t.map(t=>{if(Mpt(t)){const{sort:e}=t,n=Iut(t,["sort"]);return n}return t}),Zut),n=act(t.map(t=>{if(Mpt(t)){const e=t.sort;return void 0===e||pct(e)||("op"in e&&"count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}}).filter(t=>void 0!==t),Zut);if(0===e.length)return;if(1===e.length){const e=t[0];if(Mpt(e)&&n.length>0){let t=n[0];if(n.length>1)rpt(x.MORE_THAN_ONE_SORT),t=!0;else if(wut(t)&&"field"in t){const n=t.field;e.field===n&&(t=!t.order||{order:t.order})}return Object.assign(Object.assign({},e),{sort:t})}return e}const r=act(n.map(t=>pct(t)||!("op"in t)||t.op in wlt?t:(rpt(x.domainSortDropped(t)),!0)),Zut);let i;1===r.length?i=r[0]:r.length>1&&(rpt(x.MORE_THAN_ONE_SORT),i=!0);const a=act(t.map(t=>Mpt(t)?t.data:null),t=>t);if(1===a.length&&null!==a[0]){const t=Object.assign({data:a[0],fields:e.map(t=>t.field)},i?{sort:i}:{});return t}return Object.assign({fields:e},i?{sort:i}:{})}function PCt(t){if(Mpt(t)&&Nut(t.field))return t.field;if(Npt(t)){let e;for(const n of t.fields)if(Mpt(n)&&Nut(n.field))if(e){if(e!==n.field)return rpt(x.FACETED_INDEPENDENT_DIFFERENT_SOURCES),e}else e=n.field;return rpt(x.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),e}if(Tpt(t)){rpt(x.FACETED_INDEPENDENT_SAME_SOURCE);const e=t.fields[0];return Nut(e)?e:void 0}}function UCt(t,e){const n=t.component.scales[e],r=n.get("domains").map(e=>(Mpt(e)&&(e.data=t.lookupDataSource(e.data)),e));return LCt(r)}function WCt(t){return DEt(t)||SEt(t)?t.children.reduce((t,e)=>t.concat(WCt(e)),qCt(t)):qCt(t)}function qCt(t){return fct(t.component.scales).reduce((e,n)=>{const r=t.component.scales[n];if(r.merged)return e;const i=r.combine(),{name:a,type:o,selectionExtent:s,domains:u,range:c,reverse:l}=i,f=Iut(i,["name","type","selectionExtent","domains","range","reverse"]),d=VCt(i.range,a,n);let h;s&&(h=nOt(t,s));const p=UCt(t,n);return e.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:a,type:o},p?{domain:p}:{}),h?{domainRaw:h}:{}),{range:d}),void 0!==l?{reverse:l}:{}),f)),e},[])}function VCt(t,e,n){return rdt(n)&&Fpt(t)?{step:{signal:e+"_step"}}:t}class GCt extends Gvt{constructor(t,e){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",e)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||ect(this.get("domains"),t=>xut(t)&&2===t.length&&t[0]<=0&&t[1]>=0)}}const HCt=["range","scheme"];function XCt(t){return"x"===t?"width":"y"===t?"height":void 0}function YCt(t){const e=t.component.scales;for(const n of xdt){const r=e[n];if(!r)continue;const i=JCt(n,t);r.setWithExplicit("range",i)}}function KCt(t,e){const n=t.fieldDef(e);if(n&&n.bin&&Sdt(n.bin)){const r=Fkt(t,n.field,n.bin),i=XCt(e),a=t.getName(i);return new kCt(()=>{const e=t.getSignalName(r),n=`(${e}.stop - ${e}.start) / ${e}.step`;return`${t.getSignalName(a)} / (${n})`})}}function JCt(t,e){const n=e.specifiedScales[t],{size:r}=e,i=e.getScaleComponent(t),a=i.get("type");for(const o of HCt)if(void 0!==n[o]){const r=Lmt(a,o),i=Pmt(t,o);if(r)if(i)rpt(i);else switch(o){case"range":return xut(n.range)&&rdt(t)?Hvt(n.range.map(t=>{if("width"===t||"height"===t){const n=e.getName(t),r=e.getSignalName.bind(e);return kCt.fromName(r,n)}return t})):Hvt(n.range);case"scheme":return Hvt(ZCt(n[o]))}else rpt(x.scalePropertyNotWorkWithScaleType(a,o,t))}if(t===Mlt||t===Ilt){const e=t===Mlt?"width":"height",n=r[e];if(Byt(n)){if(jmt(a))return Hvt({step:n.step});rpt(x.stepDropped(e))}}return Xvt(QCt(t,e))}function ZCt(t){return Dmt(t)?Object.assign({scheme:t.name},Kut(t,["name"])):{scheme:t}}function QCt(t,e){const{size:n,config:r,mark:i,encoding:a}=e,o=e.getSignalName.bind(e),{type:s}=cbt(a[t]),u=e.getScaleComponent(t),c=u.get("type"),{domain:l,domainMid:f}=e.specifiedScales[t];switch(t){case Mlt:case Ilt:{if(tct(["point","band"],c))if(t!==Mlt||n.width){if(t===Ilt&&!n.height){const t=Gyt(r.view,"height");if(Byt(t))return t}}else{const t=Gyt(r.view,"width");if(Byt(t))return t}const i=XCt(t),a=e.getName(i);return t===Ilt&&kmt(c)?[kCt.fromName(o,a),0]:[0,kCt.fromName(o,a)]}case Klt:{const a=e.component.scales[t].get("zero"),o=nEt(i,a,r),s=iEt(i,n,e,r);return Emt(c)?eEt(o,s,tEt(c,r,l,t)):[o,s]}case Llt:return[0,2*Math.PI];case Jlt:return[0,360];case Blt:return[0,new kCt(()=>{const t=e.getSignalName("width"),n=e.getSignalName("height");return`min(${t},${n})/2`})];case eft:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case nft:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ylt:return"symbol";case Glt:case Hlt:case Xlt:return"ordinal"===c?"nominal"===s?"category":"ordinal":void 0!==f?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case Zlt:case Qlt:case tft:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel "+t)}function tEt(t,e,n,r){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return void 0!==n&&xut(n)?n.length+1:(rpt(x.domainRequiredForThresholdScale(r)),3)}}function eEt(t,e,n){const r=()=>{const r=kbt(e),i=kbt(t),a=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${a}, ${a})`};return Dpt(e)?new kCt(r):{signal:r()}}function nEt(t,e,n){if(e)return Dpt(e)?{signal:`${e.signal} ? 0 : ${nEt(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(x.incompatibleChannel("size",t))}const rEt=.95;function iEt(t,e,n,r){const i={x:KCt(n,"x"),y:KCt(n,"y")};switch(t){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const t=aEt(e,i,r.view);return Fut(t)?t-1:new kCt(()=>t.signal+" - 1")}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const t=aEt(e,i,r.view);return Fut(t)?Math.pow(rEt*t,2):new kCt(()=>`pow(${rEt} * ${t.signal}, 2)`)}}throw new Error(x.incompatibleChannel("size",t))}function aEt(t,e,n){const r=Byt(t.width)?t.width.step:Vyt(n,"width"),i=Byt(t.height)?t.height.step:Vyt(n,"height");return e.x||e.y?new kCt(()=>{const t=[e.x?e.x.signal:r,e.y?e.y.signal:i];return`min(${t.join(", ")})`}):Math.min(r,i)}function oEt(t,e){CEt(t)?sEt(t,e):lEt(t,e)}function sEt(t,e){const n=t.component.scales,{config:r,encoding:i,markDef:a,specifiedScales:o}=t;for(const s of fct(n)){const u=o[s],c=n[s],l=t.getScaleComponent(s),f=cbt(i[s]),d=u[e],h=l.get("type"),p=l.get("padding"),m=l.get("paddingInner"),g=Lmt(h,e),b=Pmt(s,e);if(void 0!==d&&(g?b&&rpt(b):rpt(x.scalePropertyNotWorkWithScaleType(h,e,s))),g&&void 0===b)if(void 0!==d)c.copyKeyFromObject(e,u);else{const n=e in uEt?uEt[e]({model:t,channel:s,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,markDef:a,config:r}):r.scale[e];void 0!==n&&c.set(e,n,!1)}}}const uEt={bins:({model:t,fieldOrDatumDef:e})=>Mgt(e)?fEt(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>dEt(t,e.type),nice:({scaleType:t,channel:e,fieldOrDatumDef:n})=>hEt(t,e,n),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:r,config:i})=>pEt(t,e,i.scale,n,r,i.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,config:r})=>mEt(t,e,n.type,r.scale),paddingOuter:({scalePadding:t,channel:e,scaleType:n,markDef:r,scalePaddingInner:i,config:a})=>gEt(t,e,n,r.type,i,a.scale),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:r})=>{const i=Mgt(t)?t.sort:void 0;return bEt(e,i,n,r.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:n,markDef:r,scaleType:i})=>yEt(t,e,n,r,i)};function cEt(t){CEt(t)?YCt(t):lEt(t,"range")}function lEt(t,e){const n=t.component.scales;for(const r of t.children)"range"===e?cEt(r):oEt(r,e);for(const r of fct(n)){let i;for(const n of t.children){const t=n.component.scales[r];if(t){const n=t.getWithExplicit(e);i=Jvt(i,n,e,"scale",Yvt((t,n)=>{switch(e){case"range":return t.step&&n.step?t.step-n.step:0}return 0}))}}n[r].setWithExplicit(e,i)}}function fEt(t,e){const n=e.bin;if(Sdt(n)){const r=Fkt(t,e.field,n);return new kCt(()=>t.getSignalName(r))}if(Ddt(n)&&Fdt(n)&&void 0!==n.step)return{step:n.step}}function dEt(t,e){if(tct([Glt,Hlt,Xlt],t)&&"nominal"!==e)return"hcl"}function hEt(t,e,n){var r;if(!(null===(r=ubt(n))||void 0===r?void 0:r.bin)&&!tct([umt.TIME,umt.UTC],t))return e in edt||void 0}function pEt(t,e,n,r,i,a){if(t in edt){if(Cmt(e)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:e,orient:o}=i;if("bar"===e&&(!Mgt(r)||!r.bin&&!r.timeUnit)&&("vertical"===o&&"x"===t||"horizontal"===o&&"y"===t))return a.continuousBandSize}if(e===umt.POINT)return n.pointPadding}}function mEt(t,e,n,r){if(void 0===t&&e in edt){const{bandPaddingInner:t,barBandPaddingInner:e,rectBandPaddingInner:i}=r;return kct(t,"bar"===n?e:i)}}function gEt(t,e,n,r,i,a){if(void 0===t&&e in edt&&n===umt.BAND){const{bandPaddingOuter:t}=a;return kct(t,Dpt(i)?{signal:i.signal+"/2"}:i/2)}}function bEt(t,e,n,r){return"x"===n&&void 0!==r.xReverse?kmt(t)&&"descending"===e?Dpt(r.xReverse)?{signal:"!"+r.xReverse.signal}:!r.xReverse:r.xReverse:!(!kmt(t)||"descending"!==e)||void 0}function yEt(t,e,n,r,i){const a=!!n&&"unaggregated"!==n;if(a&&kmt(i)){if(xut(n)){const t=n[0],e=n[n.length-1];if(t<=0&&e>=0)return!0}return!1}if("size"===t&&"quantitative"===e.type&&!Emt(i))return!0;if((!Mgt(e)||!e.bin)&&tct([...ndt,...adt],t)){const{orient:e,type:n}=r;return!tct(["bar","area","line","trail"],n)||!("horizontal"===e&&"y"===t||"vertical"===e&&"x"===t)}return!1}function vEt(t,e,n,r){const i=xEt(e,n,r),{type:a}=t;return wdt(e)?void 0!==a?Wmt(e,a)?Mgt(n)&&!Umt(a,n.type)?(rpt(x.scaleTypeNotWorkWithFieldDef(a,i)),i):a:(rpt(x.scaleTypeNotWorkWithChannel(e,a,i)),i):i:null}function xEt(t,e,n){var r;switch(e.type){case"nominal":case"ordinal":if(vft(t)||"discrete"===Cdt(t))return"shape"===t&&"ordinal"===e.type&&rpt(x.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(t in edt){if(tct(["rect","bar","image","rule"],n))return"band"}else if("arc"===n&&t in idt)return"band";return void 0!==e.band||Wgt(e)&&(null===(r=e.axis)||void 0===r?void 0:r.tickBand)?"band":"point";case"temporal":return vft(t)?"time":"discrete"===Cdt(t)?(rpt(x.discreteChannelCannotEncode(t,"temporal")),"ordinal"):Mgt(e)&&e.timeUnit&&Ept(e.timeUnit).utc?"utc":"time";case"quantitative":return vft(t)?Mgt(e)&&Sdt(e.bin)?"bin-ordinal":"linear":"discrete"===Cdt(t)?(rpt(x.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(x.invalidFieldType(e.type))}function wEt(t,{ignoreRange:e}={}){OEt(t),CCt(t);for(const n of zmt)oEt(t,n);e||cEt(t)}function OEt(t){CEt(t)?t.component.scales=_Et(t):t.component.scales=jEt(t)}function _Et(t){const{encoding:e,mark:n}=t;return xdt.reduce((r,i)=>{const a=cbt(e[i]);if(a&&n===tlt&&i===Ylt&&a.type===amt)return r;let o=a&&a["scale"];if(a&&null!==o&&!1!==o){o=null!==o&&void 0!==o?o:{};const e=vEt(o,i,a,n);r[i]=new GCt(t.scaleName(i+"",!0),{value:e,explicit:o.type===e})}return r},{})}const AEt=Yvt((t,e)=>hmt(t)-hmt(e));function jEt(t){var e;const n=t.component.scales={},r={},i=t.component.resolve;for(const a of t.children){OEt(a);for(const n of fct(a.component.scales))if(i.scale[n]=null!==(e=i.scale[n])&&void 0!==e?e:$jt(n,t),"shared"===i.scale[n]){const t=r[n],e=a.component.scales[n].getWithExplicit("type");t?fmt(t.value,e.value)?r[n]=Jvt(t,e,"type","scale",AEt):(i.scale[n]="independent",delete r[n]):r[n]=e}}for(const a of fct(r)){const e=t.scaleName(a,!0),i=r[a];n[a]=new GCt(e,i);for(const n of t.children){const t=n.component.scales[a];t&&(n.renameScale(t.get("name"),e),t.merged=!0)}}return n}class kEt{constructor(){this.nameMap={}}rename(t,e){this.nameMap[t]=e}has(t){return void 0!==this.nameMap[t]}get(t){while(this.nameMap[t]&&t!==this.nameMap[t])t=this.nameMap[t];return t}}function CEt(t){return"unit"===(null===t||void 0===t?void 0:t.type)}function EEt(t){return"facet"===(null===t||void 0===t?void 0:t.type)}function SEt(t){return"concat"===(null===t||void 0===t?void 0:t.type)}function DEt(t){return"layer"===(null===t||void 0===t?void 0:t.type)}class FEt{constructor(t,e,n,r,i,a,o){var s,u;this.type=e,this.parent=n,this.config=i,this.view=o,this.children=[],this.correctDataNames=t=>(t.from&&t.from.data&&(t.from.data=this.lookupDataSource(t.from.data)),t.from&&t.from.facet&&t.from.facet.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t),this.parent=n,this.config=i,this.name=null!==(s=t.name)&&void 0!==s?s:r,this.title=_bt(t.title)?{text:t.title}:t.title,this.scaleNameMap=n?n.scaleNameMap:new kEt,this.projectionNameMap=n?n.projectionNameMap:new kEt,this.signalNameMap=n?n.signalNameMap:new kEt,this.data=t.data,this.description=t.description,this.transforms=Sxt(null!==(u=t.transform)&&void 0!==u?u:[]),this.layout="layer"===e||"unit"===e?{}:Wyt(t,e,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:_gt(t)||n&&n.component.data.isFaceted&&void 0===t.data},layoutSize:new Gvt,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?Xut(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){wEt(this)}parseProjection(){_kt(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){skt(this)}assembleGroupStyle(){var t,e;if("unit"===this.type||"layer"===this.type)return null!==(e=null===(t=this.view)||void 0===t?void 0:t.style)&&void 0!==e?e:"cell"}assembleEncodeFromView(t){const{style:e}=t,n=Iut(t,["style"]),r={};for(const i of fct(n)){const t=n[i];void 0!==t&&(r[i]=Abt(t))}return r}assembleGroupEncodeEntry(t){let e={};return this.view&&(e=this.assembleEncodeFromView(this.view)),t||(this.description&&(e["description"]=Abt(this.description)),"unit"!==this.type&&"layer"!==this.type)?lct(e)?void 0:e:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==e&&void 0!==e?e:{})}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:e}=t,n=Iut(t,["spacing"]),{component:r,config:i}=this,a=Sjt(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:e},this.assembleDefaultLayout()),n),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let e=[];for(const n of wft)t[n].title&&e.push(xjt(this,n));for(const n of yjt)e=e.concat(_jt(this,n));return e}assembleAxes(){return qAt(this.component.axes,this.config)}assembleLegends(){return gkt(this)}assembleProjections(){return ykt(this)}assembleTitle(){var t,e,n;const r=null!==(t=this.title)&&void 0!==t?t:{},{encoding:i}=r,a=Iut(r,["encoding"]),o=Object.assign(Object.assign(Object.assign({},Obt(this.config.title).nonMark),a),i?{encode:{update:i}}:{});if(o.text)return tct(["unit","layer"],this.type)?tct(["middle",void 0],o.anchor)&&(o.frame=null!==(e=o.frame)&&void 0!==e?e:"group"):o.anchor=null!==(n=o.anchor)&&void 0!==n?n:"start",lct(o)?void 0:o}assembleGroup(t=[]){const e={};t=t.concat(this.assembleSignals()),t.length>0&&(e.signals=t);const n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||EEt(this.parent)?WCt(this):[];r.length>0&&(e.scales=r);const i=this.assembleAxes();i.length>0&&(e.axes=i);const a=this.assembleLegends();return a.length>0&&(e.legends=a),e}getName(t){return mct((this.name?this.name+"_":"")+t)}requestDataName(t){var e;const n=this.getName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(null!==(e=r[n])&&void 0!==e?e:0)+1,n}getSizeSignalRef(t){if(EEt(this.parent)){const e=Ijt(t),n=odt(e),r=this.component.scales[n];if(r&&!r.merged){const t=r.get("type"),e=r.get("range");if(jmt(t)&&Fpt(e)){const t=r.get("name"),e=UCt(this,n),i=PCt(e);if(i){const e=Hgt({aggregate:"distinct",field:i},{expr:"datum"});return{signal:Mjt(t,r,e)}}return rpt(`Unknown field for ${n}. Cannot calculate view size.`),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const e=this.component.data.outputNodes[t];return e?e.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,e){this.signalNameMap.rename(t,e)}renameScale(t,e){this.scaleNameMap.rename(t,e)}renameProjection(t,e){this.projectionNameMap.rename(t,e)}scaleName(t,e){return e?this.getName(t):Tft(t)&&wdt(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,e){let n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error(x.selectionNotFound(e));return n}hasAxisOrientSignalRef(){var t,e;return(null===(t=this.component.axes.x)||void 0===t?void 0:t.some(t=>t.hasOrientSignalRef()))||(null===(e=this.component.axes.y)||void 0===e?void 0:e.some(t=>t.hasOrientSignalRef()))}}class NEt extends FEt{vgField(t,e={}){const n=this.fieldDef(t);if(n)return Hgt(n,e)}reduceFieldDef(t,e){return qbt(this.getMapping(),(e,n,r)=>{const i=ubt(n);return i?t(e,i,r):e},e)}forEachFieldDef(t,e){Wbt(this.getMapping(),(e,n)=>{const r=ubt(e);r&&t(r,n)},e)}}class TEt extends gwt{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=Xut(e);const a=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=a[0])&&void 0!==r?r:"value",null!==(i=a[1])&&void 0!==i?i:"density"]}clone(){return new TEt(null,Xut(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"DensityTransform "+Zut(this.transform)}assemble(){const t=this.transform,{density:e}=t,n=Iut(t,["density"]),r=Object.assign({type:"kde",field:e},n);return r}}class MEt extends gwt{constructor(t,e){super(t),this.filter=e}clone(){return new MEt(null,Object.assign({},this.filter))}static make(t,e){const{config:n,mark:r,markDef:i}=e,a=Sbt("invalid",i,n);if("filter"!==a)return null;const o=e.reduceFieldDef((t,n,i)=>{const a=wdt(i)&&e.getScaleComponent(i);if(a){const e=a.get("type");kmt(e)&&"count"!==n.aggregate&&!elt(r)&&(t[n.field]=n)}return t},{});return fct(o).length?new MEt(t,o):null}dependentFields(){return new Set(fct(this.filter))}producedFields(){return new Set}hash(){return"FilterInvalid "+Zut(this.filter)}assemble(){const t=fct(this.filter).reduce((t,e)=>{const n=this.filter[e],r=Hgt(n,{expr:"datum"});return null!==n&&("temporal"===n.type?t.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(t.push(`isValid(${r})`),t.push(`isFinite(+${r})`))),t},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class IEt extends gwt{constructor(t,e){super(t),this.transform=e,this.transform=Xut(e);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map((t,e)=>{var n;return null!==(n=r[e])&&void 0!==n?n:t})}clone(){return new IEt(this.parent,Xut(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return"FlattenTransform "+Zut(this.transform)}assemble(){const{flatten:t,as:e}=this.transform,n={type:"flatten",fields:t,as:e};return n}}class REt extends gwt{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=Xut(e);const a=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=a[0])&&void 0!==r?r:"key",null!==(i=a[1])&&void 0!==i?i:"value"]}clone(){return new REt(null,Xut(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return"FoldTransform "+Zut(this.transform)}assemble(){const{fold:t,as:e}=this.transform,n={type:"fold",fields:t,as:e};return n}}class $Et extends gwt{constructor(t,e,n,r){super(t),this.fields=e,this.geojson=n,this.signal=r}clone(){return new $Et(null,Xut(this.fields),this.geojson,this.signal)}static parseAll(t,e){if(e.component.projection&&!e.component.projection.isFit)return t;let n=0;for(const r of[[Wlt,Ult],[Vlt,qlt]]){const i=r.map(t=>{const n=cbt(e.encoding[t]);return Mgt(n)?n.field:Rgt(n)?{expr:""+n.datum}:Pgt(n)?{expr:""+n["value"]}:void 0});(i[0]||i[1])&&(t=new $Et(t,i,null,e.getName("geojson_"+n++)))}if(e.channelHasField(Ylt)){const r=e.typedFieldDef(Ylt);r.type===amt&&(t=new $Et(t,null,r.field,e.getName("geojson_"+n++)))}return t}dependentFields(){var t;const e=(null!==(t=this.fields)&&void 0!==t?t:[]).filter(Nut);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Zut(this.fields)}`}assemble(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}class BEt extends gwt{constructor(t,e,n,r){super(t),this.projection=e,this.fields=n,this.as=r}clone(){return new BEt(null,this.projection,Xut(this.fields),Xut(this.as))}static parseAll(t,e){if(!e.projectionName())return t;for(const n of[[Wlt,Ult],[Vlt,qlt]]){const r=n.map(t=>{const n=cbt(e.encoding[t]);return Mgt(n)?n.field:Rgt(n)?{expr:""+n.datum}:Pgt(n)?{expr:""+n["value"]}:void 0}),i=n[0]===Vlt?"2":"";(r[0]||r[1])&&(t=new BEt(t,e.projectionName(),r,[e.getName("x"+i),e.getName("y"+i)]))}return t}dependentFields(){return new Set(this.fields.filter(Nut))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Zut(this.fields)} ${Zut(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class zEt extends gwt{constructor(t,e){super(t),this.transform=e}clone(){return new zEt(null,Xut(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:e=0,stop:n,step:r}=t,i=[e,n,...r?[r]:[]].join(",");return{signal:`sequence(${i})`}}static makeFromTransform(t,e){return new zEt(t,e)}static makeFromEncoding(t,e){const n=e.encoding,r=n.x,i=n.y;if(Mgt(r)&&Mgt(i)){const a=r.impute?r:i.impute?i:void 0;if(void 0===a)return;const o=r.impute?i:i.impute?r:void 0,{method:s,value:u,frame:c,keyvals:l}=a.impute,f=Vbt(e.mark,n);return new zEt(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:o.field},s?{method:s}:{}),void 0!==u?{value:u}:{}),c?{frame:c}:{}),void 0!==l?{keyvals:l}:{}),f.length?{groupby:f}:{}))}return null}hash(){return"Impute "+Zut(this.transform)}assemble(){const{impute:t,key:e,keyvals:n,method:r,groupby:i,value:a,frame:o=[null,null]}=this.transform,s=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:e},n?{keyvals:cxt(n)?this.processSequence(n):n}:{}),{method:"value"}),i?{groupby:i}:{}),{value:r&&"value"!==r?null:a});if(r&&"value"!==r){const e=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1},i?{groupby:i}:{}),n={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[s,e,n]}return[s]}}class LEt extends gwt{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=Xut(e);const a=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=a[0])&&void 0!==r?r:e.on,null!==(i=a[1])&&void 0!==i?i:e.loess]}clone(){return new LEt(null,Xut(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"LoessTransform "+Zut(this.transform)}assemble(){const t=this.transform,{loess:e,on:n}=t,r=Iut(t,["loess","on"]),i=Object.assign({type:"loess",x:n,y:e},r);return i}}class PEt extends gwt{constructor(t,e,n){super(t),this.transform=e,this.secondary=n}clone(){return new PEt(null,Xut(this.transform),this.secondary)}static make(t,e,n,r){const i=e.component.data.sources,{from:a}=n;let o=null;if(fxt(a)){let t=cSt(a.data,i);t||(t=new Ikt(a.data),i.push(t));const n=e.getName("lookup_"+r);o=new bwt(t,n,"lookup",e.component.data.outputNodeRefCounts),e.component.data.outputNodes[n]=o}else if(dxt(a)){const t=a.selection;if(n=Object.assign({as:t},n),o=e.getSelectionComponent(mct(t),t).materialized,!o)throw new Error(x.noSameUnitLookup(t))}return new PEt(t,n,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?kut(this.transform.as):this.transform.from.fields)}hash(){return"Lookup "+Zut({transform:this.transform,secondary:this.secondary})}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:kut(this.transform.as)}:{});else{let e=this.transform.as;Nut(e)||(rpt(x.NO_FIELDS_NEEDS_AS),e="_lookup"),t={as:[e]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}class UEt extends gwt{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=Xut(e);const a=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=a[0])&&void 0!==r?r:"prob",null!==(i=a[1])&&void 0!==i?i:"value"]}clone(){return new UEt(null,Xut(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"QuantileTransform "+Zut(this.transform)}assemble(){const t=this.transform,{quantile:e}=t,n=Iut(t,["quantile"]),r=Object.assign({type:"quantile",field:e},n);return r}}class WEt extends gwt{constructor(t,e){var n,r,i;super(t),this.transform=e,this.transform=Xut(e);const a=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=a[0])&&void 0!==r?r:e.on,null!==(i=a[1])&&void 0!==i?i:e.regression]}clone(){return new WEt(null,Xut(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"RegressionTransform "+Zut(this.transform)}assemble(){const t=this.transform,{regression:e,on:n}=t,r=Iut(t,["regression","on"]),i=Object.assign({type:"regression",x:n,y:e},r);return i}}class qEt extends gwt{constructor(t,e){super(t),this.transform=e}clone(){return new qEt(null,Xut(this.transform))}addDimensions(t){var e;this.transform.groupby=act((null!==(e=this.transform.groupby)&&void 0!==e?e:[]).concat(t),t=>t)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}hash(){return"PivotTransform "+Zut(this.transform)}assemble(){const{pivot:t,value:e,groupby:n,limit:r,op:i}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:e},void 0!==r?{limit:r}:{}),void 0!==i?{op:i}:{}),void 0!==n?{groupby:n}:{})}}class VEt extends gwt{constructor(t,e){super(t),this.transform=e}clone(){return new VEt(null,Xut(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return"SampleTransform "+Zut(this.transform)}assemble(){return{type:"sample",size:this.transform.sample}}}function GEt(t){let e=0;function n(r,i){var a;if(r instanceof Ikt&&!r.isGenerator&&!Qvt(r.data)){t.push(i);const e={name:null,source:i.name,transform:[]};i=e}if(r instanceof Zkt&&(r.parent instanceof Ikt&&!i.source?(i.format=Object.assign(Object.assign({},null!==(a=i.format)&&void 0!==a?a:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Gkt){i.name||(i.name="data_"+e++),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source;for(const e of r.assemble())t.push(e)}else{if((r instanceof $kt||r instanceof Bkt||r instanceof MEt||r instanceof MAt||r instanceof hjt||r instanceof BEt||r instanceof $Et||r instanceof Vkt||r instanceof PEt||r instanceof iCt||r instanceof tCt||r instanceof REt||r instanceof IEt||r instanceof TEt||r instanceof LEt||r instanceof UEt||r instanceof WEt||r instanceof Qkt||r instanceof VEt||r instanceof qEt)&&i.transform.push(r.assemble()),(r instanceof Mkt||r instanceof ywt||r instanceof zEt||r instanceof rCt)&&i.transform.push(...r.assemble()),r instanceof bwt)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof bwt)r.setSource(i.name);else if(i.name||(i.name="data_"+e++),r.setSource(i.name),1===r.numChildren()){t.push(i);const e={name:null,source:i.name,transform:[]};i=e}switch(r.numChildren()){case 0:r instanceof bwt&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+e++);let a=i.name;!i.source||i.transform.length>0?t.push(i):a=i.source;for(const t of r.children){const e={name:null,source:a,transform:[]};n(t,e)}break}}}}return n}function HEt(t){const e=[],n=GEt(e);for(const r of t.children)n(r,{source:t.name,name:null,transform:[]});return e}function XEt(t,e){var n,r;const i=[],a=GEt(i);let o=0;for(const u of t.sources){u.hasName()||(u.dataName="source_"+o++);const t=u.assemble();a(u,t)}for(const u of i)0===u.transform.length&&delete u.transform;let s=0;for(const[u,c]of i.entries())0!==(null!==(n=c.transform)&&void 0!==n?n:[]).length||c.source||i.splice(s++,0,i.splice(u,1)[0]);for(const u of i)for(const e of null!==(r=u.transform)&&void 0!==r?r:[])"lookup"===e.type&&(e.from=t.outputNodes[e.from].getSource());for(const u of i)u.name in e&&(u.values=e[u.name]);return i}function YEt(t){return"top"===t||"left"===t||Dpt(t)?"header":"footer"}function KEt(t){for(const e of wft)JEt(t,e);QEt(t,"x"),QEt(t,"y")}function JEt(t,e){var n;const{facet:r,config:i,child:a,component:o}=t;if(t.channelHasField(e)){const s=r[e],u=gjt("title",null,i,e);let c=rbt(s,i,{allowDisabling:!0,includeDefault:void 0===u||!!u});a.component.layoutHeaders[e].title&&(c=xut(c)?c.join(", "):c,c+=" / "+a.component.layoutHeaders[e].title,a.component.layoutHeaders[e].title=null);const l=gjt("labelOrient",s,i,e),f=null!==(n=s.header)&&void 0!==n?n:{},d=kct(f.labels,i.header.labels,!0),h=tct(["bottom","right"],l)?"footer":"header";o.layoutHeaders[e]={title:c,facetFieldDef:s,[h]:"facet"===e?[]:[ZEt(t,e,d)]}}}function ZEt(t,e,n){const r="row"===e?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function QEt(t,e){var n;const{child:r}=t;if(r.component.axes[e]){const{layoutHeaders:i,resolve:a}=t.component;if(a.axis[e]=Bjt(a,e),"shared"===a.axis[e]){const a="x"===e?"column":"row",o=i[a];for(const i of r.component.axes[e]){const e=YEt(i.get("orient"));o[e]=null!==(n=o[e])&&void 0!==n?n:[ZEt(t,a,!1)];const r=UAt(i,"main",t.config,{header:!0});r&&o[e][0].axes.push(r),i.mainExtracted=!0}}}}function tSt(t){nSt(t),rSt(t,"width"),rSt(t,"height")}function eSt(t){nSt(t);const e=1===t.layout.columns?"width":"childWidth",n=void 0===t.layout.columns?"height":"childHeight";rSt(t,e),rSt(t,n)}function nSt(t){for(const e of t.children)e.parseLayoutSize()}function rSt(t,e){const n=Ijt(e),r=odt(n),i=t.component.resolve,a=t.component.layoutSize;let o;for(const s of t.children){const t=s.component.layoutSize.getWithExplicit(n),e=i.scale[r];if("independent"===e&&"step"===t.value){o=void 0;break}if(o){if("independent"===e&&o.value!==t.value){o=void 0;break}o=Jvt(o,t,n,"")}else o=t}if(o){for(const r of t.children)t.renameSignal(r.getName(n),t.getName(e)),r.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(e,o)}else a.setWithExplicit(e,{explicit:!1,value:void 0})}function iSt(t){const{size:e,component:n}=t;for(const r of ndt){const i=zft(r);if(e[i]){const t=e[i];n.layoutSize.set(i,Byt(t)?"step":t,!0)}else{const e=aSt(t,i);n.layoutSize.set(i,e,!1)}}}function aSt(t,e){const n="width"===e?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){const t=i.get("type"),n=i.get("range");if(jmt(t)){const t=Gyt(r.view,e);return Fpt(n)||Byt(t)?"step":t}return qyt(r.view,e)}if(t.hasProjection||"arc"===t.mark)return qyt(r.view,e);{const t=Gyt(r.view,e);return Byt(t)?t.step:t}}function oSt(t,e,n){return Hgt(e,Object.assign({suffix:"by_"+Hgt(t)},null!==n&&void 0!==n?n:{}))}class sSt extends NEt{constructor(t,e,n,r){super(t,"facet",e,n,r,t.resolve),this.child=fDt(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet,r)}initFacet(t,e){return wgt(t)?qbt(t,(t,n,r)=>tct([Flt,Nlt],r)?void 0===n.field?(rpt(x.emptyFieldDef(n,r)),t):(t[r]=lbt(n,r,e),t):(rpt(x.incompatibleChannel(r,"facet")),t),{}):{facet:lbt(t,"facet",e)}}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=dSt(this),this.child.parseData()}parseLayoutSize(){nSt(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),KEt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,e,n;const r={};for(const i of wft)for(const a of vjt){const o=this.component.layoutHeaders[i],s=o[a],{facetFieldDef:u}=o;if(u){const e=gjt("titleOrient",u,this.config,i);if(tct(["right","bottom"],e)){const n=mjt(i,e);r.titleAnchor=null!==(t=r.titleAnchor)&&void 0!==t?t:{},r.titleAnchor[n]="end"}}if(null===s||void 0===s?void 0:s[0]){const t="row"===i?"height":"width",s="header"===a?"headerBand":"footerBand";"facet"===i||this.child.component.layoutSize.get(t)||(r[s]=null!==(e=r[s])&&void 0!==e?e:{},r[s][i]=.5),o.title&&(r.offset=null!==(n=r.offset)&&void 0!==n?n:{},r.offset["row"===i?"rowTitle":"columnTitle"]=10)}}return r}assembleDefaultLayout(){const{column:t,row:e}=this.facet,n=t?this.columnDistinctSignal():e?1:void 0;let r="all";return(e||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(r="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),n?{columns:n}:{}),{bounds:"full",align:r})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof sSt)){const t=this.getName("column_domain");return{signal:`length(data('${t}'))`}}}assembleGroup(t){return this.parent&&this.parent instanceof sSt?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:Hgt(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],e=[],n=[];if(this.child instanceof sSt){if(this.child.channelHasField("column")){const r=Hgt(this.child.facet.column);t.push(r),e.push("distinct"),n.push("distinct_"+r)}}else for(const r of ndt){const i=this.child.component.scales[r];if(i&&!i.merged){const a=i.get("type"),o=i.get("range");if(jmt(a)&&Fpt(o)){const i=UCt(this.child,r),a=PCt(i);a?(t.push(a),e.push("distinct"),n.push("distinct_"+a)):rpt(`Unknown field for ${r}. Cannot calculate view size.`)}}}return{fields:t,ops:e,as:n}}assembleFacet(){const{name:t,data:e}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:a,as:o}=this.getCardinalityAggregateForChild(),s=[];for(const c of wft){const t=this.facet[c];if(t){s.push(Hgt(t));const{bin:e,sort:u}=t;if(Sdt(e)&&s.push(Hgt(t,{binSuffix:"end"})),vgt(u)){const{field:e,op:s=mgt}=u,c=oSt(t,u);n&&r?(i.push(c),a.push("max"),o.push(c)):(i.push(e),a.push(s),o.push(c))}else if(xut(u)){const e=pjt(t,c);i.push(e),a.push("max"),o.push(e)}}}const u=!!n&&!!r;return Object.assign({name:t,data:e,groupby:s},u||i.length>0?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),i.length?{fields:i,ops:a,as:o}:{})}:{})}facetSortFields(t){const{facet:e}=this,n=e[t];return n?vgt(n.sort)?[oSt(n,n.sort,{expr:"datum"})]:xut(n.sort)?[pjt(n,t,{expr:"datum"})]:[Hgt(n,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:e}=this,n=e[t];if(n){const{sort:t}=n,e=(vgt(t)?t.order:!xut(t)&&t)||"ascending";return[e]}return[]}assembleLabelTitle(){const{facet:t,config:e}=this;if(t.facet)return jjt(t.facet,"facet",e);const n={row:["top","bottom"],column:["left","right"]};for(const r of yjt)if(t[r]){const i=gjt("labelOrient",t[r],e,r);if(tct(n[r],i))return jjt(t[r],r,e)}}assembleMarks(){const{child:t}=this,e=this.component.data.facetRoot,n=HEt(e),r=t.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle(),o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:wft.map(t=>this.facetSortFields(t)).flat(),order:wft.map(t=>this.facetSortOrder(t)).flat()}}),n.length>0?{data:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(Jwt(this,[])));return[o]}getMapping(){return this.facet}}function uSt(t,e){const{row:n,column:r}=e;if(n&&r){let e=null;for(const i of[n,r])if(vgt(i.sort)){const{field:n,op:r=mgt}=i.sort;t=e=new tCt(t,{joinaggregate:[{op:r,field:n,as:oSt(i,i.sort,{forAs:!0})}],groupby:[Hgt(i)]})}return e}return null}function cSt(t,e){var n,r,i,a,o,s,u,c,l,f;for(const d of e){const e=d.data;if((!t.name||!d.hasName()||t.name===d.dataName)&&((!(null===(n=t["format"])||void 0===n?void 0:n.mesh)||!(null===(r=e.format)||void 0===r?void 0:r.feature))&&(!(null===(i=t["format"])||void 0===i?void 0:i.feature)&&!(null===(a=e.format)||void 0===a?void 0:a.feature)||(null===(o=t["format"])||void 0===o?void 0:o.feature)===(null===(s=e.format)||void 0===s?void 0:s.feature))&&(!(null===(u=t["format"])||void 0===u?void 0:u.mesh)&&!(null===(c=e.format)||void 0===c?void 0:c.mesh)||(null===(l=t["format"])||void 0===l?void 0:l.mesh)===(null===(f=e.format)||void 0===f?void 0:f.mesh))))if(txt(t)&&txt(e)){if(Hut(t.values,e.values))return d}else if(Qvt(t)&&Qvt(e)){if(t.url===e.url)return d}else if(ext(t)&&t.name===d.dataName)return d}return null}function lSt(t,e){if(t.data||!t.parent){if(null===t.data){const t=new Ikt({values:[]});return e.push(t),t}const n=cSt(t.data,e);if(n)return nxt(t.data)||(n.data.format=rct({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const n=new Ikt(t.data);return e.push(n),n}}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function fSt(t,e,n){var r,i;let a=0;for(const o of e.transforms){let s,u=void 0;if(Oxt(o))s=t=new hjt(t,o),u="derived";else if(uxt(o)){const i=Ykt(o);s=t=null!==(r=Zkt.makeWithAncestors(t,{},i,n))&&void 0!==r?r:t,t=new MAt(t,e,o.filter)}else if(_xt(o))s=t=Mkt.makeFromTransform(t,o,e),u="number";else if(jxt(o)){u="date";const e=n.getWithExplicit(o.field);void 0===e.value&&(t=new Zkt(t,{[o.field]:u}),n.set(o.field,u,!1)),s=t=ywt.makeFromTransform(t,o)}else if(kxt(o))s=t=Vkt.makeFromTransform(t,o),u="number",_Ot(e)&&(t=new Qkt(t));else if(lxt(o))s=t=PEt.make(t,e,o,a++),u="derived";else if(vxt(o))s=t=new iCt(t,o),u="number";else if(xxt(o))s=t=new tCt(t,o),u="number";else if(Cxt(o))s=t=rCt.makeFromTransform(t,o),u="derived";else if(Ext(o))s=t=new REt(t,o),u="derived";else if(wxt(o))s=t=new IEt(t,o),u="derived";else if(hxt(o))s=t=new qEt(t,o),u="derived";else if(yxt(o))t=new VEt(t,o);else if(Axt(o))s=t=zEt.makeFromTransform(t,o),u="derived";else if(pxt(o))s=t=new TEt(t,o),u="derived";else if(mxt(o))s=t=new UEt(t,o),u="derived";else if(gxt(o))s=t=new WEt(t,o),u="derived";else{if(!bxt(o)){rpt(x.invalidTransformIgnored(o));continue}s=t=new LEt(t,o),u="derived"}if(s&&void 0!==u)for(const t of null!==(i=s.producedFields())&&void 0!==i?i:[])n.set(t,u,!1)}return t}function dSt(t){var e,n,r,i,a,o,s,u,c,l;let f=lSt(t,t.component.data.sources);const{outputNodes:d,outputNodeRefCounts:h}=t.component.data,p=t.parent?t.parent.component.data.ancestorParse.clone():new Zvt,m=t.data;nxt(m)?(rxt(m)?f=new Bkt(f,m.sequence):axt(m)&&(f=new $kt(f,m.graticule)),p.parseNothing=!0):null===(null===(e=null===m||void 0===m?void 0:m.format)||void 0===e?void 0:e.parse)&&(p.parseNothing=!0),f=null!==(n=Zkt.makeExplicit(f,t,p))&&void 0!==n?n:f,f=new Qkt(f);const g=t.parent&&DEt(t.parent);(CEt(t)||EEt(t))&&g&&(f=null!==(r=Mkt.makeFromEncoding(f,t))&&void 0!==r?r:f),t.transforms.length>0&&(f=fSt(f,t,p));const b=Jkt(t),y=Kkt(t);f=null!==(i=Zkt.makeWithAncestors(f,{},Object.assign(Object.assign({},b),y),p))&&void 0!==i?i:f,CEt(t)&&(f=$Et.parseAll(f,t),f=BEt.parseAll(f,t)),(CEt(t)||EEt(t))&&(g||(f=null!==(a=Mkt.makeFromEncoding(f,t))&&void 0!==a?a:f),f=null!==(o=ywt.makeFromEncoding(f,t))&&void 0!==o?o:f,f=hjt.parseAllForSortIndex(f,t));const v=t.getName(sxt),x=new bwt(f,v,sxt,h);if(d[v]=x,f=x,CEt(t)){const e=Vkt.makeFromEncoding(f,t);e&&(f=e,_Ot(t)&&(f=new Qkt(f))),f=null!==(s=zEt.makeFromEncoding(f,t))&&void 0!==s?s:f,f=null!==(u=rCt.makeFromEncoding(f,t))&&void 0!==u?u:f}CEt(t)&&(f=null!==(c=MEt.make(f,t))&&void 0!==c?c:f);const w=t.getName(oxt),O=new bwt(f,w,oxt,h);d[w]=O,f=O,CEt(t)&&BAt(t,O);let _=null;if(EEt(t)){const e=t.getName("facet");f=null!==(l=uSt(f,t.facet))&&void 0!==l?l:f,_=new Gkt(f,t,e,O.getSource()),d[e]=_}return Object.assign(Object.assign({},t.component.data),{outputNodes:d,outputNodeRefCounts:h,raw:x,main:O,facetRoot:_,ancestorParse:p})}class hSt extends FEt{constructor(t,e,n,r){var i,a,o,s;super(t,"concat",e,n,r,t.resolve),"shared"!==(null===(a=null===(i=t.resolve)||void 0===i?void 0:i.axis)||void 0===a?void 0:a.x)&&"shared"!==(null===(s=null===(o=t.resolve)||void 0===o?void 0:o.axis)||void 0===s?void 0:s.y)||rpt(x.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(t).map((t,e)=>fDt(t,this,this.getName("concat_"+e),void 0,r))}parseData(){this.component.data=dSt(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of fct(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Ryt(t)?t.vconcat:$yt(t)?t.hconcat:t.concat}parseLayoutSize(){eSt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Fjt(this);for(const e of this.children)t.push(...e.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleMarks(){return this.children.map(t=>{const e=t.assembleTitle(),n=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},e?{title:e}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())})}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},null!=t?{columns:t}:{}),{bounds:"full",align:"each"})}}function pSt(t){return!1===t||null===t}const mSt=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},$ct),{labelExpr:1,encode:1}),gSt=fct(mSt);class bSt extends Gvt{constructor(t={},e={},n=!1){super(),this.explicit=t,this.implicit=e,this.mainExtracted=n}clone(){return new bSt(Xut(this.explicit),Xut(this.implicit),this.mainExtracted)}hasAxisPart(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!pSt(this.get(t)))}hasOrientSignalRef(){return Dpt(this.explicit.orient)}}function ySt(t,e,n){var r;const{encoding:i,config:a}=t,o=null!==(r=cbt(i[e]))&&void 0!==r?r:cbt(i[Bft(e)]),s=t.axis(e)||{},{format:u,formatType:c}=s;return egt(c)?Object.assign({text:ogt({fieldOrDatumDef:o,field:"datum.value",format:u,formatType:c,config:a})},n):n}function vSt(t){return ndt.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[kSt(n,t)]),e),{})}const xSt={bottom:"top",top:"bottom",left:"right",right:"left"};function wSt(t){var e;const{axes:n,resolve:r}=t.component,i={top:0,bottom:0,right:0,left:0};for(const a of t.children){a.parseAxesAndHeaders();for(const e of fct(a.component.axes))r.axis[e]=Bjt(t.component.resolve,e),"shared"===r.axis[e]&&(n[e]=OSt(n[e],a.component.axes[e]),n[e]||(r.axis[e]="independent",delete n[e]))}for(const a of ndt){for(const o of t.children)if(o.component.axes[a]){if("independent"===r.axis[a]){n[a]=(null!==(e=n[a])&&void 0!==e?e:[]).concat(o.component.axes[a]);for(const t of o.component.axes[a]){const{value:e,explicit:n}=t.getWithExplicit("orient");if(!Dpt(e)){if(i[e]>0&&!n){const n=xSt[e];i[e]>i[n]&&t.set("orient",n,!1)}i[e]++}}}delete o.component.axes[a]}if("independent"===r.axis[a]&&n[a]&&n[a].length>1)for(const t of n[a])t.get("grid")&&!t.explicit.grid&&(t.implicit.grid=!1)}}function OSt(t,e){if(!t)return e.map(t=>t.clone());{if(t.length!==e.length)return;const n=t.length;for(let r=0;r<n;r++){const n=t[r],i=e[r];if(!!n!==!!i)return;if(n&&i){const e=n.getWithExplicit("orient"),a=i.getWithExplicit("orient");if(e.explicit&&a.explicit&&e.value!==a.value)return;t[r]=_St(n,i)}}}return t}function _St(t,e){for(const n of gSt){const r=Jvt(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(t,e)=>{switch(n){case"title":return Rbt(t,e);case"gridScale":return{explicit:t.explicit,value:kct(t.value,e.value)}}return Kvt(t,e,n,"axis")});t.setWithExplicit(n,r)}return t}function ASt(t,e,n,r,i){if("disable"===e)return void 0!==n;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(Dpt(n.labelAngle)?n.labelAngle:Fct(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===ljt(r,i))return!0}return t===n[e]}const jSt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function kSt(t,e){var n,r,i;let a=e.axis(t);const o=new bSt,s=cbt(e.encoding[t]),{mark:u,config:c}=e,l=(null===a||void 0===a?void 0:a.orient)||(null===(n=c["x"===t?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=c.axis)||void 0===r?void 0:r.orient)||ujt(t),f=e.getScaleComponent(t).get("type"),d=KAt(t,f,l,e.config),h=void 0!==a?!a:ZAt("disable",c,null===a||void 0===a?void 0:a.style,d).configValue;if(o.set("disable",h,void 0!==a),h)return o;a=a||{};const p=njt(e,a,t,s,d),m={fieldOrDatumDef:s,axis:a,channel:t,model:e,scaleType:f,orient:l,labelAngle:p,mark:u,config:c};for(const y of gSt){const n=y in QAt?QAt[y](m):zct(y)?a[y]:void 0,r=void 0!==n,i=ASt(n,y,a,e,t);if(r&&i)o.set(y,n,i);else{const{configValue:t,configFrom:s}=zct(y)&&"values"!==y?ZAt(y,e.config,a.style,d):{},u=void 0!==t;r&&!u?o.set(y,n,i):("vgAxisConfig"!==s||jSt.has(y)&&u||Mct(t)||Dpt(t))&&o.set(y,t,!1)}}const g=null!==(i=a.encoding)&&void 0!==i?i:{},b=Ict.reduce((n,r)=>{var i;if(!o.hasAxisPart(r))return n;const a=Rjt(null!==(i=g[r])&&void 0!==i?i:{},e),s="labels"===r?ySt(e,t,a):a;return void 0===s||lct(s)||(n[r]={update:s}),n},{});return lct(b)||o.set("encode",b,!!a.encoding||void 0!==a.labelAngle),o}function CSt({encoding:t,size:e}){for(const n of ndt){const r=zft(n);Byt(e[r])&&$gt(t[n])&&(delete e[r],rpt(x.stepDropped(r)))}return e}function ESt(t,e,n,{graticule:r}){const i=ilt(t)?Object.assign({},t):{type:t},a=Sbt("orient",i,n);if(i.orient=NSt(i.type,e,a),void 0!==a&&a!==i.orient&&rpt(x.orientOverridden(i.orient,a)),"bar"===i.type&&i.orient){const t=Sbt("cornerRadiusEnd",i,n);if(void 0!==t){const n="horizontal"===i.orient&&e.x2||"vertical"===i.orient&&e.y2?["cornerRadius"]:dlt[i.orient];for(const e of n)i[e]=t;void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}const o=Sbt("opacity",i,n);void 0===o&&(i.opacity=DSt(i.type,e));const s=i.filled;void 0===s&&(i.filled=!r&&FSt(i,n));const u=Sbt("cursor",i,n);return void 0===u&&(i.cursor=SSt(i,e,n)),i}function SSt(t,e,n){return e.href||t.href||Sbt("href",t,n)?"pointer":t.cursor}function DSt(t,e){if(tct([Gct,Kct,Zct,Qct],t)&&!Bbt(e))return.7}function FSt(t,e){const n=Dbt("filled",t,e),r=t.type;return kct(n,r!==Gct&&r!==Vct&&r!==Xct)}function NSt(t,e,n){switch(t){case Gct:case Zct:case Qct:case Yct:case Hct:case qct:return}const{x:r,y:i,x2:a,y2:o}=e;switch(t){case Wct:if(Mgt(r)&&(Ddt(r.bin)||Mgt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Mgt(i)&&(Ddt(i.bin)||Mgt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||a){if(n)return n;if(!a&&(Mgt(r)&&r.type===emt&&!Sdt(r.bin)||Bgt(r)))return"horizontal";if(!o&&(Mgt(i)&&i.type===emt&&!Sdt(i.bin)||Bgt(i)))return"vertical"}case Xct:if(a&&(!Mgt(r)||!Ddt(r.bin))&&o&&(!Mgt(i)||!Ddt(i.bin)))return;case Uct:if(o)return Mgt(i)&&Ddt(i.bin)?"horizontal":"vertical";if(a)return Mgt(r)&&Ddt(r.bin)?"vertical":"horizontal";if(t===Xct){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Vct:case Kct:{const e=$gt(r),a=$gt(i);if(e&&!a)return"tick"!==t?"horizontal":"vertical";if(!e&&a)return"tick"!==t?"vertical":"horizontal";if(e&&a){const e=r,a=i,o=e.type===rmt,s=a.type===rmt;return o&&!s?"tick"!==t?"vertical":"horizontal":!o&&s?"tick"!==t?"horizontal":"vertical":!e.aggregate&&a.aggregate?"tick"!==t?"vertical":"horizontal":e.aggregate&&!a.aggregate?"tick"!==t?"horizontal":"vertical":n||"vertical"}return n||void 0}}return"vertical"}const TSt={vgMark:"arc",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Uxt("x",t,{defaultPos:"mid"})),Uxt("y",t,{defaultPos:"mid"})),Qxt(t,"radius","arc")),Qxt(t,"theta","arc"))},MSt={vgMark:"area",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),Xxt("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===t.markDef.orient})),Xxt("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===t.markDef.orient})),lwt(t))},ISt={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Qxt(t,"x","bar")),Qxt(t,"y","bar"))},RSt={vgMark:"shape",encodeEntry:t=>Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape,r=Object.assign({type:"geoshape",projection:t.projectionName()},n&&Mgt(n)&&n.type===amt?{field:Hgt(n,{expr:"datum"})}:{});return[r]}},$St={vgMark:"image",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Qxt(t,"x","image")),Qxt(t,"y","image")),Fxt(t,"url"))},BSt={vgMark:"line",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Uxt("x",t,{defaultPos:"mid"})),Uxt("y",t,{defaultPos:"mid"})),zxt("size",t,{vgChannel:"strokeWidth"})),lwt(t))},zSt={vgMark:"trail",encodeEntry:t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Uxt("x",t,{defaultPos:"mid"})),Uxt("y",t,{defaultPos:"mid"})),zxt("size",t)),lwt(t))};function LSt(t,e){const{config:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Uxt("x",t,{defaultPos:"mid"})),Uxt("y",t,{defaultPos:"mid"})),zxt("size",t)),zxt("angle",t)),PSt(t,n,e))}function PSt(t,e,n){return n?{shape:{value:n}}:zxt("shape",t)}const USt={vgMark:"symbol",encodeEntry:t=>LSt(t)},WSt={vgMark:"symbol",encodeEntry:t=>LSt(t,"circle")},qSt={vgMark:"symbol",encodeEntry:t=>LSt(t,"square")},VSt={vgMark:"rect",encodeEntry:t=>Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Qxt(t,"x","rect")),Qxt(t,"y","rect"))},GSt={vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Xxt("x",t,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n})),Xxt("y",t,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n})),zxt("size",t,{vgChannel:"strokeWidth"})):{}}},HSt={vgMark:"text",encodeEntry:t=>{const{config:e,encoding:n}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},owt(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Uxt("x",t,{defaultPos:"mid"})),Uxt("y",t,{defaultPos:"mid"})),Fxt(t)),zxt("size",t,{vgChannel:"fontSize"})),zxt("angle",t)),dwt("align",XSt(t.markDef,n,e))),dwt("baseline",YSt(t.markDef,n,e))),Uxt("radius",t,{defaultPos:null,isMidPoint:!0})),Uxt("theta",t,{defaultPos:null,isMidPoint:!0}))}};function XSt(t,e,n){const r=Sbt("align",t,n);if(void 0===r)return"center"}function YSt(t,e,n){const r=Sbt("baseline",t,n);if(void 0===r)return"middle"}const KSt={vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,r=n.orient,i="horizontal"===r?"width":"height",a="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},owt(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Uxt("x",t,{defaultPos:"mid",vgChannel:"xc"})),Uxt("y",t,{defaultPos:"mid",vgChannel:"yc"})),zxt("size",t,{defaultValue:JSt(t),vgChannel:i})),{[a]:Abt(Sbt("thickness",n,e))})}};function JSt(t){var e;const{config:n,markDef:r}=t,{orient:i}=r,a="horizontal"===i?"width":"height",o=t.getScaleComponent("horizontal"===i?"x":"y"),s=null!==(e=Sbt("size",r,n,{vgChannel:a}))&&void 0!==e?e:n.tick.bandSize;if(void 0!==s)return s;{const t=o?o.get("range"):void 0;if(t&&Fpt(t)&&Fut(t.step))return 3*t.step/4;const e=Vyt(n.view,a);return 3*e/4}}const ZSt={arc:TSt,area:MSt,bar:ISt,circle:WSt,geoshape:RSt,image:$St,line:BSt,point:USt,rect:VSt,rule:GSt,square:qSt,text:HSt,tick:KSt,trail:zSt};function QSt(t){return tct([Vct,Uct,Jct],t.mark)?eDt(t):tct([Wct],t.mark)?rDt(t):aDt(t)}const tDt="faceted_path_";function eDt(t){const e=Vbt(t.mark,t.encoding),n=aDt(t,{fromPrefix:e.length>0?tDt:""});return e.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:tDt+t.requestDataName(oxt),data:t.requestDataName(oxt),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}const nDt="stack_group_";function rDt(t){const e=Bpt.some(e=>Sbt(e,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e){const[e]=aDt(t,{fromPrefix:nDt}),n=t.scaleName(t.stack.fieldChannel),r=(e={})=>t.vgField(t.stack.fieldChannel,e),i=(t,e)=>{const i=[r({prefix:"min",suffix:"start",expr:e}),r({prefix:"max",suffix:"start",expr:e}),r({prefix:"min",suffix:"end",expr:e}),r({prefix:"max",suffix:"end",expr:e})];return`${t}(${i.map(t=>`scale('${n}',${t})`).join(",")})`};let a,o;"x"===t.stack.fieldChannel?(a=Object.assign(Object.assign({},Yut(e.encode.update,["y","yc","y2","height",...Bpt])),{x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}}),o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update=Object.assign(Object.assign({},Kut(e.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},Yut(e.encode.update,["x","xc","x2","width"])),{y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}}),o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update=Object.assign(Object.assign({},Kut(e.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const l of Bpt){const n=Dbt(l,t.markDef,t.config);e.encode.update[l]?(a[l]=e.encode.update[l],delete e.encode.update[l]):n&&(a[l]=Abt(n)),n&&(e.encode.update[l]={value:0})}const s=t.fieldDef(t.stack.groupbyChannel),u=Hgt(s)?[Hgt(s)]:[];((null===s||void 0===s?void 0:s.bin)||(null===s||void 0===s?void 0:s.timeUnit))&&u.push(Hgt(s,{binSuffix:"end"}));const c=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"];return a=c.reduce((n,r)=>{if(e.encode.update[r])return Object.assign(Object.assign({},n),{[r]:e.encode.update[r]});{const e=Dbt(r,t.markDef,t.config);return void 0!==e?Object.assign(Object.assign({},n),{[r]:Abt(e)}):n}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(oxt),name:nDt+t.requestDataName(oxt),groupby:u,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:o},marks:[e]}]}]}return aDt(t)}function iDt(t){const{encoding:e,stack:n,mark:r,markDef:i,config:a}=t,o=e.order;if(!(!xut(o)&&Pgt(o)&&Qut(o.value)||!o&&Qut(Sbt("order",i,a)))){if((xut(o)||Mgt(o))&&!n)return Tbt(o,{expr:"datum"});if(elt(r)){const n="horizontal"===i.orient?"y":"x",r=e[n];if(Mgt(r)){const e=r.sort;if(xut(e))return{field:Hgt(r,{prefix:n,suffix:"sort_index",expr:"datum"})};if(vgt(e))return{field:Hgt({aggregate:Bbt(t.encoding)?e.op:void 0,field:e.field},{expr:"datum"})};if(ygt(e)){const n=t.fieldDef(e.encoding);return{field:Hgt(n,{expr:"datum"}),order:e.order}}return null===e?void 0:{field:Hgt(r,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}function aDt(t,e={fromPrefix:""}){const{mark:n,markDef:r,config:i}=t,a=kct(r.clip,oDt(t),sDt(t)),o=Ebt(r),s=t.encoding.key,u=iDt(t),c=uDt(t),l=Sbt("aria",r,i),f=ZSt[n].postEncodingTransform?ZSt[n].postEncodingTransform(t):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:t.getName("marks"),type:ZSt[n].vgMark},a?{clip:!0}:{}),o?{style:o}:{}),s?{key:s.field}:{}),u?{sort:u}:{}),c||{}),!1===l?{aria:l}:{}),{from:{data:e.fromPrefix+t.requestDataName(oxt)},encode:{update:ZSt[n].encodeEntry(t)}}),f?{transform:f}:{})]}function oDt(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!!(e&&e.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}function sDt(t){const e=t.component.projection;return!(!e||e.isFit)||void 0}function uDt(t){if(!t.component.selection)return null;const e=fct(t.component.selection).length;let n=e,r=t.parent;while(r&&0===n)n=fct(r.component.selection).length,r=r.parent;return n?{interactive:e>0}:null}class cDt extends NEt{constructor(t,e,n,r={},i){var a,o;super(t,"unit",e,n,i,void 0,zyt(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection={},this.children=[];const s=ilt(t.mark)?t.mark.type:t.mark;this.markDef=ESt(t.mark,null!==(a=t.encoding)&&void 0!==a?a:{},i,{graticule:t.data&&axt(t.data)});const u=this.encoding=Pbt(null!==(o=t.encoding)&&void 0!==o?o:{},this.markDef,i);this.size=CSt({encoding:u,size:zyt(t)?Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):r}),this.stack=vvt(s,u),this.specifiedScales=this.initScales(s,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegend(u),this.specifiedProjection=t.projection,this.selection=t.selection}get hasProjection(){const{encoding:t}=this,e=this.mark===tlt,n=t&&bft.some(e=>zgt(t[e]));return e||n}scaleDomain(t){const e=this.specifiedScales[t];return e?e.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,e){return xdt.reduce((t,n)=>{var r;const i=cbt(e[n]);return i&&(t[n]=null!==(r=i.scale)&&void 0!==r?r:{}),t},{})}initAxes(t){return ndt.reduce((e,n)=>{const r=t[n];if(zgt(r)||n===Mlt&&zgt(t.x2)||n===Ilt&&zgt(t.y2)){const t=zgt(r)?r.axis:void 0;e[n]=t?Object.assign({},t):t}return e},{})}initLegend(t){return gdt.reduce((e,n)=>{const r=cbt(t[n]);if(r&&ydt(n)){const t=r.legend;e[n]=t?Object.assign({},t):t}return e},{})}parseData(){this.component.data=dSt(this)}parseLayoutSize(){iSt(this)}parseSelections(){this.component.selection=IAt(this,this.selection)}parseMarkGroup(){this.component.mark=QSt(this)}parseAxesAndHeaders(){this.component.axes=vSt(this)}assembleSelectionTopLevelSignals(t){return Zwt(this,t)}assembleSignals(){return[...WAt(this),...Kwt(this,[])]}assembleSelectionData(t){return Qwt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Fjt(this)}assembleMarks(){var t;let e=null!==(t=this.component.mark)&&void 0!==t?t:[];return this.parent&&DEt(this.parent)||(e=tOt(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return $bt(this.encoding,t)}fieldDef(t){const e=this.encoding[t];return ubt(e)}typedFieldDef(t){const e=this.fieldDef(t);return Lgt(e)?e:null}}class lDt extends FEt{constructor(t,e,n,r,i){super(t,"layer",e,n,i,t.resolve,t.view);const a=Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((t,e)=>{if(cvt(t))return new lDt(t,this,this.getName("layer_"+e),a,i);if(ylt(t))return new cDt(t,this,this.getName("layer_"+e),a,i);throw new Error(x.invalidSpec(t))})}parseData(){this.component.data=dSt(this);for(const t of this.children)t.parseData()}parseLayoutSize(){tSt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of fct(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){wSt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleSignals()),WAt(this))}assembleLayoutSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleLayoutSignals()),Fjt(this))}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const e of this.children)if(t=e.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return eOt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,e)=>t.concat(e.assembleLegends()),gkt(this))}}function fDt(t,e,n,r,i){if(_gt(t))return new sSt(t,e,n,i);if(cvt(t))return new lDt(t,e,n,r,i);if(ylt(t))return new cDt(t,e,n,r,i);if(Myt(t))return new hSt(t,e,n,i);throw new Error(x.invalidSpec(t))}function dDt(t,e={}){e.logger&&ept(e.logger),e.fieldTitle&&ebt(e.fieldTitle);try{const n=nvt(_ut(e.config,t.config)),r=$vt(t,n),i=fDt(r,null,"",void 0,n);i.parse(),jCt(i.component.data,i);const a=pDt(i,hDt(t,r.autosize,n,i),t.datasets,t.usermeta);return{spec:a,normalized:r}}finally{e.logger&&npt(),e.fieldTitle&&nbt()}}function hDt(t,e,n,r){const i=r.component.layoutSize.get("width"),a=r.component.layoutSize.get("height");if(void 0===e?(e={type:"pad"},r.hasAxisOrientSignalRef()&&(e.resize=!0)):Nut(e)&&(e={type:e}),i&&a&&Uvt(e.type))if("step"===i&&"step"===a)rpt(x.droppingFit()),e.type="pad";else if("step"===i||"step"===a){const t="step"===i?"width":"height";rpt(x.droppingFit(odt(t)));const n="width"===t?"height":"width";e.type=Wvt(n)}return Object.assign(Object.assign(Object.assign({},1===fct(e).length&&e.type?"pad"===e.type?{}:{autosize:e.type}:{autosize:e}),Vvt(n)),Vvt(t))}function pDt(t,e,n={},r){const i=t.config?ovt(t.config):void 0,a=[].concat(t.assembleSelectionData([]),XEt(t.component.data,n)),o=t.assembleProjections(),s=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0);let l=t.assembleLayoutSignals();return l=l.filter(t=>"width"!==t.name&&"height"!==t.name||void 0===t.value||(e[t.name]=+t.value,!1)),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{}),e),s?{title:s}:{}),u?{style:u}:{}),c?{encode:{update:c}}:{}),{data:a}),o.length>0?{projections:o}:{}),t.assembleGroup([...l,...t.assembleSelectionTopLevelSignals([])])),i?{config:i}:{}),r?{usermeta:r}:{})}class mDt extends dvt{mapUnit(t,{config:e}){if(t.encoding){const{encoding:n,transform:r}=t,{bins:i,timeUnits:a,aggregate:o,groupby:s,encoding:u}=zbt(n,e),c=[...r||[],...i,...a,...0===o.length?[]:[{aggregate:o,groupby:s}]];return Object.assign(Object.assign(Object.assign({},t),c.length>0?{transform:c}:{}),{encoding:u})}return t}}const gDt=new mDt;function bDt(t,e){return gDt.map(t,{config:e})}const yDt=rut.version;var vDt=n("81ab"),xDt=n.n(vDt),wDt="vega-themes",ODt="2.9.1",_Dt="Themes for stylized Vega and Vega-Lite visualizations.",ADt=["vega","vega-lite","themes","style"],jDt="BSD-3-Clause",kDt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},CDt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],EDt="build/vega-themes.js",SDt="build/vega-themes.module.js",DDt="build/vega-themes.min.js",FDt="build/vega-themes.min.js",NDt="build/vega-themes.module.d.ts",TDt={type:"git",url:"https://github.com/vega/vega-themes.git"},MDt=["src","build"],IDt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",prepare:"beemo create-config",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix",lint:"yarn eslintbase"},RDt={"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^9.0.0","@wessberg/rollup-plugin-ts":"^1.3.4","browser-sync":"^2.26.12",concurrently:"^5.3.0","gh-pages":"^3.1.0",rollup:"^2.26.11","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"^4.0.2",vega:"^5.10.0","vega-lite":"^4.8.1","vega-lite-dev-config":"^0.14.6"},$Dt={vega:"*","vega-lite":"*"},BDt={module:"vega-lite-dev-config",drivers:["typescript","prettier","eslint"]},zDt={name:wDt,version:ODt,description:_Dt,keywords:ADt,license:jDt,author:kDt,contributors:CDt,main:EDt,module:SDt,unpkg:DDt,jsdelivr:FDt,types:NDt,repository:TDt,files:MDt,scripts:IDt,devDependencies:RDt,peerDependencies:$Dt,beemo:BDt};const LDt="#fff",PDt="#888",UDt={background:"#333",title:{color:LDt},style:{"guide-label":{fill:LDt},"guide-title":{fill:LDt}},axis:{domainColor:LDt,gridColor:PDt,tickColor:LDt}},WDt="#4572a7",qDt={background:"#fff",arc:{fill:WDt},area:{fill:WDt},line:{stroke:WDt,strokeWidth:2},path:{stroke:WDt},rect:{fill:WDt},shape:{stroke:WDt},symbol:{fill:WDt,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},VDt="#30a2da",GDt="#cbcbcb",HDt="#999",XDt="#333",YDt="#f0f0f0",KDt="#333",JDt={arc:{fill:VDt},area:{fill:VDt},axis:{domainColor:GDt,grid:!0,gridColor:GDt,gridWidth:1,labelColor:HDt,labelFontSize:10,titleColor:XDt,tickColor:GDt,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:YDt,group:{fill:YDt},legend:{labelColor:KDt,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:KDt,titleFontSize:14,titlePadding:10},line:{stroke:VDt,strokeWidth:2},path:{stroke:VDt,strokeWidth:.5},rect:{fill:VDt},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:VDt},bar:{binSpacing:2,fill:VDt,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ZDt="#000",QDt={group:{fill:"#e5e5e5"},arc:{fill:ZDt},area:{fill:ZDt},line:{stroke:ZDt},path:{stroke:ZDt},rect:{fill:ZDt},shape:{stroke:ZDt},symbol:{fill:ZDt,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},tFt=22,eFt="normal",nFt="Benton Gothic, sans-serif",rFt=11.5,iFt="normal",aFt="#82c6df",oFt="Benton Gothic Bold, sans-serif",sFt="normal",uFt=13,cFt={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},lFt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:oFt,fontSize:tFt,fontWeight:eFt},arc:{fill:aFt},area:{fill:aFt},line:{stroke:aFt,strokeWidth:2},path:{stroke:aFt},rect:{fill:aFt},shape:{stroke:aFt},symbol:{fill:aFt,size:30},axis:{labelFont:nFt,labelFontSize:rFt,labelFontWeight:iFt,titleFont:oFt,titleFontSize:uFt,titleFontWeight:sFt},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:nFt,labelFontSize:rFt,symbolType:"square",titleFont:oFt,titleFontSize:uFt,titleFontWeight:sFt},range:{category:cFt["category-6"],diverging:cFt["fireandice-6"],heatmap:cFt["fire-7"],ordinal:cFt["fire-7"],ramp:cFt["fire-7"]}},fFt="#ab5787",dFt="#979797",hFt={background:"#f9f9f9",arc:{fill:fFt},area:{fill:fFt},line:{stroke:fFt},path:{stroke:fFt},rect:{fill:fFt},shape:{stroke:fFt},symbol:{fill:fFt,size:30},axis:{domainColor:dFt,domainWidth:.5,gridWidth:.2,labelColor:dFt,tickColor:dFt,tickWidth:.2,titleColor:dFt},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},pFt="#3e5c69",mFt={background:"#fff",arc:{fill:pFt},area:{fill:pFt},line:{stroke:pFt},path:{stroke:pFt},rect:{fill:pFt},shape:{stroke:pFt},symbol:{fill:pFt},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},gFt="#1696d2",bFt="#000000",yFt="#FFFFFF",vFt="Lato",xFt="Lato",wFt="Lato",OFt="#DEDDDD",_Ft=18,AFt={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},jFt={background:yFt,title:{anchor:"start",fontSize:_Ft,font:vFt},axisX:{domain:!0,domainColor:bFt,domainWidth:1,grid:!1,labelFontSize:12,labelFont:xFt,labelAngle:0,tickColor:bFt,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:vFt},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:OFt,gridWidth:1,labelFontSize:12,labelFont:xFt,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:vFt,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:xFt,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:vFt,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:AFt["six-groups-cat-1"],diverging:AFt["diverging-colors"],heatmap:AFt["diverging-colors"],ordinal:AFt["six-groups-seq"],ramp:AFt["shades-blue"]},area:{fill:gFt},rect:{fill:gFt},line:{color:gFt,stroke:gFt,strokeWidth:5},trail:{color:gFt,stroke:gFt,strokeWidth:0,size:1},path:{stroke:gFt,strokeWidth:.5},point:{filled:!0},text:{font:wFt,color:gFt,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:gFt,stroke:null}},arc:{fill:gFt},shape:{stroke:gFt},symbol:{fill:gFt,size:30}},kFt="#3366CC",CFt="#ccc",EFt="Arial, sans-serif",SFt={arc:{fill:kFt},area:{fill:kFt},path:{stroke:kFt},rect:{fill:kFt},shape:{stroke:kFt},symbol:{stroke:kFt},circle:{fill:kFt},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:EFt,fontSize:12},"guide-title":{font:EFt,fontSize:12},"group-title":{font:EFt,fontSize:12}},title:{font:EFt,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:CFt,tickColor:CFt,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},DFt=zDt.version;var FFt=n("de20"),NFt="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const TFt="vg-tooltip-element",MFt={offsetX:10,offsetY:10,id:TFt,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:IFt,maxDepth:2};function IFt(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function RFt(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return NFt.toString().replace(TFt,t)}var $Ft=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function BFt(t,e,n){if(Object(Ue["x"])(t))return`[${t.map(t=>e(Object(Ue["F"])(t)?t:LFt(t,n))).join(", ")}]`;if(Object(Ue["D"])(t)){let r="";const i=t,{title:a,image:o}=i,s=$Ft(i,["title","image"]);a&&(r+=`<h2>${e(a)}</h2>`),o&&(r+=`<img src="${e(o)}">`);const u=Object.keys(s);if(u.length>0){r+="<table>";for(const t of u){let i=s[t];void 0!==i&&(Object(Ue["D"])(i)&&(i=LFt(i,n)),r+=`<tr><td class="key">${e(t)}:</td><td class="value">${e(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return e(t)}function zFt(t){const e=[];return function(n,r){if("object"!==typeof r||null===r)return r;const i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}function LFt(t,e){return JSON.stringify(t,zFt(e))}function PFt(t,e,n,r){let i=t.clientX+n;i+e.width>window.innerWidth&&(i=+t.clientX-n-e.width);let a=t.clientY+r;return a+e.height>window.innerHeight&&(a=+t.clientY-r-e.height),{x:i,y:a}}class UFt{constructor(t){this.options=Object.assign(Object.assign({},MFt),t);const e=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const t=document.createElement("style");t.setAttribute("id",this.options.styleId),t.innerHTML=RFt(e);const n=document.head;n.childNodes.length>0?n.insertBefore(t,n.childNodes[0]):n.appendChild(t)}this.el=document.getElementById(e),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",e),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(t,e,n,r){if(null==r||""===r)return void this.el.classList.remove("visible",this.options.theme+"-theme");this.el.innerHTML=BFt(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",this.options.theme+"-theme");const{x:i,y:a}=PFt(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${a}px; left: ${i}px`)}}FFt.version;var WFt,qFt=function(t,e,n){const r=t.open(e),i=1e4,a=250,{origin:o}=new URL(e);let s=~~(i/a);function u(e){e.source===r&&(s=0,t.removeEventListener("message",u,!1))}function c(){s<=0||(r.postMessage(n,o),setTimeout(c,a),s-=1)}t.addEventListener("message",u,!1),setTimeout(c,a)},VFt='.vega-embed {\n  position: relative;\n  display: inline-block; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function GFt(t,...e){for(const n of e)HFt(t,n);return t}function HFt(t,e){for(const n of Object.keys(e))Tt(t,n,e[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});const XFt=v;let YFt=w;const KFt="undefined"!==typeof window?window:void 0;void 0===YFt&&(null===(WFt=null===KFt||void 0===KFt?void 0:KFt["vl"])||void 0===WFt?void 0:WFt.compile)&&(YFt=KFt["vl"]);const JFt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},ZFt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},QFt={vega:"Vega","vega-lite":"Vega-Lite"},tNt={vega:XFt.version,"vega-lite":YFt?YFt.version:"not available"},eNt={vega:t=>t,"vega-lite":(t,e)=>YFt.compile(t,{config:e}).spec},nNt='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function rNt(t){return"function"===typeof t}function iNt(t,e,n,r){const i=`<html><head>${e}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+t+a),o.document.title=QFt[r]+" JSON Source"}function aNt(t,e){var n;if(t.$schema){const r=xDt()(t.$schema);e&&e!==r.library&&console.warn(`The given visualization spec is written in ${QFt[r.library]}, but mode argument sets ${null!==(n=QFt[e])&&void 0!==n?n:e}.`);const i=r.library;return Object(at["satisfies"])(tNt[i],"^"+r.version.slice(1))||console.warn(`The input spec uses ${QFt[i]} ${r.version}, but the current version of ${QFt[i]} is v${tNt[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":null!==e&&void 0!==e?e:"vega"}function oNt(t){return!(!t||!("load"in t))}function sNt(t,e,n={}){var r,i,a;return _(this,void 0,void 0,(function*(){const o=oNt(n.loader)?n.loader:XFt.loader(n.loader),s=Object(Ue["F"])(e)?JSON.parse(yield o.load(e)):e,u=yield uNt(null!==(r=s.usermeta&&s.usermeta["embedOptions"])&&void 0!==r?r:{},o),c=yield uNt(n,o),l=Object.assign(Object.assign({},GFt(c,u)),{config:Object(Ue["L"])(null!==(i=c.config)&&void 0!==i?i:{},null!==(a=u.config)&&void 0!==a?a:{})});return yield cNt(t,s,l,o)}))}function uNt(t,e){var n;return _(this,void 0,void 0,(function*(){const r=Object(Ue["F"])(t.config)?JSON.parse(yield e.load(t.config)):null!==(n=t.config)&&void 0!==n?n:{},i=Object(Ue["F"])(t.patch)?JSON.parse(yield e.load(t.patch)):t.patch;return Object.assign(Object.assign(Object.assign({},t),i?{patch:i}:{}),r?{config:r}:{})}))}function cNt(t,e,n={},r){var i,a,o,s,u,c;return _(this,void 0,void 0,(function*(){const l=n.theme?Object(Ue["L"])(O[n.theme],null!==(i=n.config)&&void 0!==i?i:{}):n.config,f=Object(Ue["y"])(n.actions)?n.actions:GFt({},JFt,null!==(a=n.actions)&&void 0!==a?a:{}),d=Object.assign(Object.assign({},ZFt),n.i18n),h=null!==(o=n.renderer)&&void 0!==o?o:"canvas",p=null!==(s=n.logLevel)&&void 0!==s?s:XFt.Warn,m=null!==(u=n.downloadFileName)&&void 0!==u?u:"visualization";if(!1!==n.defaultStyle){const t="vega-embed-style";if(!document.getElementById(t)){const e=document.createElement("style");e.id=t,e.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?(null!==VFt&&void 0!==VFt?VFt:"").toString():n.defaultStyle,document.head.appendChild(e)}}const g=aNt(e,n.mode);let b=eNt[g](e,l);if("vega-lite"===g&&b.$schema){const t=xDt()(b.$schema);Object(at["satisfies"])(tNt.vega,"^"+t.version.slice(1))||console.warn(`The compiled spec uses Vega ${t.version}, but current version is v${tNt.vega}.`)}const y="string"===typeof t?document.querySelector(t):t;if(!y)throw Error(t+" does not exist");y.classList.add("vega-embed"),f&&y.classList.add("has-actions"),y.innerHTML="";const v=n.patch;v&&(b=v instanceof Function?v(b):P(b,v,!0,!1).newDocument),n.formatLocale&&XFt.formatLocale(n.formatLocale),n.timeFormatLocale&&XFt.timeFormatLocale(n.timeFormatLocale);const x=XFt.parse(b,"vega-lite"===g?{}:l),w=new XFt.View(x,{loader:r,logLevel:p,renderer:h});if(!1!==n.tooltip){let t;t=rNt(n.tooltip)?n.tooltip:new UFt(!0===n.tooltip?{}:n.tooltip).call,w.tooltip(t)}let A,{hover:j}=n;if(void 0===j&&(j="vega"===g),j){const{hoverSet:t,updateSet:e}="boolean"===typeof j?{}:j;w.hover(t,e)}if(n&&(null!=n.width&&w.width(n.width),null!=n.height&&w.height(n.height),null!=n.padding&&w.padding(n.padding)),yield w.initialize(t).runAsync(),!1!==f){let t=y;if(!1!==n.defaultStyle){const e=document.createElement("details");e.title=d.CLICK_TO_VIEW_ACTIONS,y.append(e),t=e;const n=document.createElement("summary");n.innerHTML=nNt,e.append(n),A=t=>{e.contains(t.target)||e.removeAttribute("open")},document.addEventListener("click",A)}const r=document.createElement("div");if(t.append(r),r.classList.add("vega-actions"),!0===f||!1!==f.export)for(const e of["svg","png"])if(!0===f||!0===f.export||f.export[e]){const t=d[e.toUpperCase()+"_ACTION"],i=document.createElement("a");i.text=t,i.href="#",i.target="_blank",i.download=`${m}.${e}`,i.addEventListener("mousedown",(function(t){return _(this,void 0,void 0,(function*(){t.preventDefault();const r=yield w.toImageURL(e,n.scaleFactor);this.href=r}))})),r.append(i)}if(!0===f||!1!==f.source){const t=document.createElement("a");t.text=d.SOURCE_ACTION,t.href="#",t.addEventListener("click",(function(t){var r,i;iNt(it()(e),null!==(r=n.sourceHeader)&&void 0!==r?r:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",g),t.preventDefault()})),r.append(t)}if("vega-lite"===g&&(!0===f||!1!==f.compiled)){const t=document.createElement("a");t.text=d.COMPILED_ACTION,t.href="#",t.addEventListener("click",(function(t){var e,r;iNt(it()(b),null!==(e=n.sourceHeader)&&void 0!==e?e:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),t.preventDefault()})),r.append(t)}if(!0===f||!1!==f.editor){const t=null!==(c=n.editorUrl)&&void 0!==c?c:"https://vega.github.io/editor/",i=document.createElement("a");i.text=d.EDITOR_ACTION,i.href="#",i.addEventListener("click",(function(n){qFt(window,t,{config:l,mode:g,renderer:h,spec:it()(e)}),n.preventDefault()})),r.append(i)}}function k(){A&&document.removeEventListener("click",A),w.finalize()}return{view:w,spec:e,vgSpec:b,finalize:k}}))}},"7aec":function(t,e,n){(function(t){var r;(function(t,i,a){function o(t){var e=this;function n(t,e){var n,r,i,a,o,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,a=-32;a<u;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,n=s[127&a]^=r+o,i=0==n?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;t.w=o,t.X=s,t.i=i}e.next=function(){var t,n,r=e.w,i=e.X,a=e.i;return e.w=r=r+1640531527|0,n=i[a+34&127],t=i[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[a]=n^t,e.i=a,n+(r^r>>>16)|0},n(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xor4096=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7b9e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=["Webkit"],i=["Moz"],a=["ms"],o=["Webkit","Moz"],s=["Webkit","ms"],u=["Webkit","Moz","ms"];e.default={plugins:[],prefixMap:{appearance:o,userSelect:u,textEmphasisPosition:r,textEmphasis:r,textEmphasisStyle:r,textEmphasisColor:r,boxDecorationBreak:r,clipPath:r,maskImage:r,maskMode:r,maskRepeat:r,maskPosition:r,maskClip:r,maskOrigin:r,maskSize:r,maskComposite:r,mask:r,maskBorderSource:r,maskBorderMode:r,maskBorderSlice:r,maskBorderWidth:r,maskBorderOutset:r,maskBorderRepeat:r,maskBorder:r,maskType:r,textDecorationStyle:r,textDecorationSkip:r,textDecorationLine:r,textDecorationColor:r,filter:r,fontFeatureSettings:r,breakAfter:u,breakBefore:u,breakInside:u,columnCount:o,columnFill:o,columnGap:o,columnRule:o,columnRuleColor:o,columnRuleStyle:o,columnRuleWidth:o,columns:o,columnSpan:o,columnWidth:o,writingMode:s,flex:r,flexBasis:r,flexDirection:r,flexGrow:r,flexFlow:r,flexShrink:r,flexWrap:r,alignContent:r,alignItems:r,alignSelf:r,justifyContent:r,order:r,transform:r,transformOrigin:r,transformOriginX:r,transformOriginY:r,backfaceVisibility:r,perspective:r,perspectiveOrigin:r,transformStyle:r,transformOriginZ:r,animation:r,animationDelay:r,animationDirection:r,animationFillMode:r,animationDuration:r,animationIterationCount:r,animationName:r,animationPlayState:r,animationTimingFunction:r,backdropFilter:r,fontKerning:r,scrollSnapType:s,scrollSnapPointsX:s,scrollSnapPointsY:s,scrollSnapDestination:s,scrollSnapCoordinate:s,shapeImageThreshold:r,shapeImageMargin:r,shapeImageOutside:r,hyphens:u,flowInto:s,flowFrom:s,regionFragment:s,textAlignLast:i,tabSize:i,wrapFlow:a,wrapThrough:a,wrapMargin:a,gridTemplateColumns:a,gridTemplateRows:a,gridTemplateAreas:a,gridTemplate:a,gridAutoColumns:a,gridAutoRows:a,gridAutoFlow:a,grid:a,gridRowStart:a,gridColumnStart:a,gridRowEnd:a,gridRow:a,gridColumn:a,gridColumnEnd:a,gridColumnGap:a,gridRowGap:a,gridArea:a,gridGap:a,textSizeAdjust:s,borderImage:r,borderImageOutset:r,borderImageRepeat:r,borderImageSlice:r,borderImageSource:r,borderImageWidth:r,transitionDelay:r,transitionDuration:r,transitionProperty:r,transitionTimingFunction:r}},t.exports=e["default"]},"7c73":function(t,e,n){var r,i=n("825a"),a=n("37e8"),o=n("7839"),s=n("d012"),u=n("1be4"),c=n("cc12"),l=n("f772"),f=">",d="<",h="prototype",p="script",m=l("IE_PROTO"),g=function(){},b=function(t){return d+p+f+t+d+"/"+p+f},y=function(t){t.write(b("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){var t,e=c("iframe"),n="java"+p+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(b("document.F=Object")),t.close(),t.F},x=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}x=r?y(r):v();var t=o.length;while(t--)delete x[h][o[t]];return x()};s[m]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(g[h]=i(t),n=new g,g[h]=null,n[m]=t):n=x(),void 0===e?n:a(n,e)}},"7d63":function(t,e,n){const r=n("3fce"),i=(t,e)=>new r(t,e).set.map(t=>t.map(t=>t.value).join(" ").trim().split(" "));t.exports=i},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),i=n("9ed3"),a=n("e163"),o=n("d2bb"),s=n("d44e"),u=n("9112"),c=n("6eeb"),l=n("b622"),f=n("c430"),d=n("3f8c"),h=n("ae93"),p=h.IteratorPrototype,m=h.BUGGY_SAFARI_ITERATORS,g=l("iterator"),b="keys",y="values",v="entries",x=function(){return this};t.exports=function(t,e,n,l,h,w,O){i(n,e,l);var _,A,j,k=function(t){if(t===h&&F)return F;if(!m&&t in S)return S[t];switch(t){case b:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this)}},C=e+" Iterator",E=!1,S=t.prototype,D=S[g]||S["@@iterator"]||h&&S[h],F=!m&&D||k(h),N="Array"==e&&S.entries||D;if(N&&(_=a(N.call(new t)),p!==Object.prototype&&_.next&&(f||a(_)===p||(o?o(_,p):"function"!=typeof _[g]&&u(_,g,x)),s(_,C,!0,!0),f&&(d[C]=x))),h==y&&D&&D.name!==y&&(E=!0,F=function(){return D.call(this)}),f&&!O||S[g]===F||u(S,g,F),d[e]=F,h)if(A={values:k(y),keys:w?F:k(b),entries:k(v)},O)for(j in A)(m||E||!(j in S))&&c(S,j,A[j]);else r({target:e,proto:!0,forced:m||E},A);return A}},"7e36":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","atan"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.atan(e);return n([e]),r},n,null,i["l"])}const u=Object(o["b"])({atan_:s})},"7e6a":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("043e"),i=n("54ef"),a=n("d4e4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=0,n=1,i,o){if(null!=i&&"bool"===i)throw new Error("Unsupported data type $ { dtype }");const s=new a["a"](e,n,i,!0,o),u=Object(r["a"])(t,i);for(let r=0;r<u.values.length;r++)u.values[r]=s.nextValue();return u.toTensor()}const s=Object(i["b"])({truncatedNormal_:o})},"7e8e":function(t,e){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function r(t){return n.test(t)}t.exports=r},"7ed6":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function r(){return"undefined"!==typeof navigator&&null!=navigator}function i(){if(r()){const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function a(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}n.r(e),n.d(e,"isMobile",(function(){return i})),n.d(e,"isBrowser",(function(){return a}))},"7f9a":function(t,e,n){var r=n("da84"),i=n("8925"),a=r.WeakMap;t.exports="function"===typeof a&&/native code/.test(i(a))},"804a":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("deb3"),s=n("4f20"),u=n("1359"),c=n("c021"),l=n("54ef"),f=n("a009"),d=n("e053");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function h(t,e=-1){const n=Object(a["a"])(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);const l=(n,r)=>{const i=!0,a=Object(c["a"])(t,e,!0),l=Object(f["a"])(t,a),h=Object(f["a"])(Object(o["a"])(l,"float32"),Object(u["a"])(Object(d["a"])(Object(s["a"])(l),e,i)));return r([h]),h},h={logits:n},p={axis:e};return r["a"].runKernelFunc(l,h,null,i["zb"],p)}const p=Object(l["b"])({logSoftmax_:h})},8103:function(t,e,n){var r=n("d194"),i=r("toUpperCase");t.exports=i},"81ab":function(t,e,n){"use strict";function r(t){var e=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g,n=e.exec(t).slice(1,3),r=n[0],i=n[1];return{library:r,version:i}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},8389:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return f}));var r=n("015f"),i=n("960f");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e,n){const r=o(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function o(t,e,n){return u(t,e,n||s)}function s(t,e){return t>e?1:t<e?-1:0}function u(t,e,n){let r=0,i=t.length,a=0,o=!1;while(r<i){a=r+(i-r>>>1);const s=n(e,t[a]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c(t,e,n,r,i){return d(t,e,n,r,i,0).selectedIndices}function l(t,e,n,r,i,a){return d(t,e,n,r,i,0,!1,a,!0)}function f(t,e,n,r,i,a){return d(t,e,n,r,i,a,!0)}function d(t,e,n,o,s,u,c=!1,l=!1,f=!1){const d=[];for(let r=0;r<e.length;r++)e[r]>s&&d.push({score:e[r],boxIndex:r,suppressBeginIndex:0});d.sort(m);const g=u>0?-.5/u:0,b=[],y=[];while(b.length<n&&d.length>0){const e=d.pop(),{score:n,boxIndex:r,suppressBeginIndex:i}=e;if(n<s)break;let u=!1;for(let a=b.length-1;a>=i;--a){const n=h(t,r,b[a]);if(n>=o){u=!0;break}if(e.score=e.score*p(o,g,n),e.score<=s)break}e.suppressBeginIndex=b.length,u||(e.score===n?(b.push(r),y.push(e.score)):e.score>s&&a(d,e,m))}const v=b.length,x=n-v;l&&x>0&&(b.push(...new Array(x).fill(0)),y.push(...new Array(x).fill(0)));const w={selectedIndices:Object(i["a"])(b,"int32")};return c&&(w["selectedScores"]=Object(i["a"])(y,"float32")),f&&(w["validOutputs"]=Object(r["a"])(v,"int32")),w}function h(t,e,n){const r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),h=(s-a)*(u-o),p=(f-c)*(d-l);if(h<=0||p<=0)return 0;const m=Math.max(a,c),g=Math.max(o,l),b=Math.min(s,f),y=Math.min(u,d),v=Math.max(b-m,0)*Math.max(y-g,0);return v/(h+p-v)}function p(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function m(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}},"838f":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("b818"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n,u,l="NHWC",f=[1,1],d){const h=Object(a["a"])(t,"x","depthwiseConv2d"),p=Object(a["a"])(e,"filter","depthwiseConv2d");let m=h,g=!1;3===h.rank&&(g=!0,m=Object(c["a"])(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o["assert"](4===m.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),o["assert"](4===p.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+p.rank+"."),o["assert"](m.shape[3]===p.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),null!=d&&o["assert"](o["isInt"](u),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${d} but got pad ${u}.`);const b=(t,e)=>{null==f&&(f=[1,1]),o["assert"](s["h"](n,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${f}'`);const r=s["a"](m.shape,p.shape,n,f,u,d,!0),i=t.depthwiseConv2D(m,p,r);return e([m,p]),i},y={x:m,filter:p},v={strides:n,pad:u,dataFormat:l,dilations:f,dimRoundingMode:d},x=r["a"].runKernelFunc(b,y,null,i["L"],v);return g?Object(c["a"])(x,[x.shape[1],x.shape[2],x.shape[3]]):x}const f=Object(u["b"])({depthwiseConv2d_:l})},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"840c":function(t,e,n){"use strict";function r(t,e){if("position"===t&&"sticky"===e)return["-webkit-sticky","sticky"]}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e["default"]},8418:function(t,e,n){"use strict";var r=n("c04ea"),i=n("9bf2"),a=n("5c6c");t.exports=function(t,e,n){var o=r(e);o in t?i.f(t,o,a(0,n)):t[o]=n}},"84d6":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("eb7e"),o=n("960f"),s=n("5a2c");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n=1,u="float32"){if(0===n)throw new Error("Cannot have a step of zero");const c=()=>{const r=t===e,i=t<e&&n<0,c=e<t&&n>1;if(r||i||c)return Object(s["a"])([0],u);const l=Math.abs(Math.ceil((e-t)/n)),f=Object(a["makeZerosTypedArray"])(l,u);e<t&&1===n&&(n=-1),f[0]=t;for(let t=1;t<f.length;t++)f[t]=f[t-1]+n;return Object(o["a"])(f,u)},l={start:t,stop:e,step:n,dtype:u};return r["a"].runKernelFunc(c,{},null,i["bc"],l)}},"853e":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=0){const n=Object(a["a"])(t,"x","unique",null);Object(o["assert"])(n.rank>0,()=>"The input tensor must be at least 1D");const s={x:n},u={axis:e},[c,l]=r["a"].runKernel(i["Oc"],s,u);return{values:c,indices:l}}const c=Object(s["b"])({unique_:u})},"857a":function(t,e,n){var r=n("1d80"),i=/"/g;t.exports=function(t,e,n,a){var o=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(a).replace(i,"&quot;")+'"'),s+">"+o+"</"+e+">"}},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8629:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("043e"),i=n("54ef"),a=n("d4e4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e=0,n=1,i="float32",o){const s=Object(r["a"])(t,i),u=new a["c"](e,n,null,o);for(let r=0;r<s.values.length;r++)s.values[r]=u.nextValue();return s.toTensor()}const s=Object(i["b"])({randomUniform_:o})},8689:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=["-webkit-","-moz-",""],i={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function a(t,e){if("cursor"===t&&i.hasOwnProperty(e))return r.map((function(t){return t+e}))}t.exports=e["default"]},"86d4":function(t,e,n){const r=n("bbfd"),i=n("3fce"),a=n("bac4"),o=(t,e)=>{t=new i(t,e);let n=new r("0.0.0");if(t.test(n))return n;if(n=new r("0.0.0-0"),t.test(n))return n;n=null;for(let i=0;i<t.set.length;++i){const e=t.set[i];e.forEach(t=>{const e=new r(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":n&&!a(n,e)||(n=e);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+t.operator)}})}return n&&t.test(n)?n:null};t.exports=o},8756:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=n("ffc3"),o=i(n("7ad3")),s=n("1309"),u=n("4149"),c=n("5629"),l={maxBins:12,fontSize:11};function f(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=h(e),i=Object.assign({},l,n),a={actions:!1,mode:"vega-lite",defaultStyle:!1},c=s.subSurface(t,"histogram");if(!1!==n.stats){const e=s.subSurface(t,"stats",{prepend:!0});let a;a=n.stats?n.stats:u.arrayStats(r.map(t=>t.value)),d(a,e,{fontSize:i.fontSize})}if(0===r.length)return;const f=[];for(let t=0;t<r.length;t++){const e=r[t].value;null!=e&&isFinite(e)&&f.push(r[t])}const p={width:i.width||s.getDefaultWidth(c),height:i.height||s.getDefaultHeight(c),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:f},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:i.fontSize,titleFontSize:i.fontSize},text:{fontSize:i.fontSize},legend:{labelFontSize:i.fontSize,titleFontSize:i.fontSize}},encoding:{x:{bin:{maxbins:i.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:i.color||"#001B44"}}};return o.default(c,p,a)}))}function d(t,e,n){const r=a.format(",.4~f"),i=a.format(".4~p"),o=[],s=[];if(null!=t.numVals&&(o.push("Num Vals"),s.push(r(t.numVals))),null!=t.min&&(o.push("Min"),s.push(r(t.min))),null!=t.max&&(o.push("Max"),s.push(r(t.max))),null!=t.numZeros){o.push("# Zeros");let e="";t.numVals&&(e=t.numZeros>0?`(${i(t.numZeros/t.numVals)})`:""),s.push(`${r(t.numZeros)} ${e}`)}if(null!=t.numNans){o.push("# NaNs");let e="";t.numVals&&(e=t.numNans>0?`(${i(t.numNans/t.numVals)})`:""),s.push(`${r(t.numNans)} ${e}`)}if(null!=t.numInfs){o.push("# Infinity");let e="";t.numVals&&(e=t.numInfs>0?`(${i(t.numInfs/t.numVals)})`:""),s.push(`${r(t.numInfs)} ${e}`)}c.table(e,{headers:o,values:[s]},n)}function h(t){if(null==t.length)throw new Error("input data must be an array");if(0===t.length)return[];if("object"===typeof t[0]){if(null==t[0].value)throw new Error("input data must have a value field");return t}{const e=Array(t.length);for(let n=0;n<t.length;n++)e[n]={value:t[n]};return e}}e.histogram=f},8888:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","tanh"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.tanh(e);return n([r]),r},n,null,i["Kc"])}const u=Object(o["b"])({tanh_:s})},8925:function(t,e,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},8970:function(t,e,n){const r=n("a236"),i=(t,e)=>{const n=r(t,e);return n&&n.prerelease.length?n.prerelease:null};t.exports=i},"89ed":function(t,e,n){(function(t){var r;(function(t,i,a){function o(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.tychei=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"8ae0":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","abs"),n={x:e};return r["a"].runKernelFunc((t,n)=>(n([e]),"complex64"===e.dtype?t.complexAbs(e):t.abs(e)),n,null,i["a"])}const u=Object(o["b"])({abs_:s})},"8b87":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=1e-7,i=1e-4;class a{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class o{time(t){return s("time")}read(t){return s("read")}readSync(t){return s("readSync")}numDataIds(){return s("numDataIds")}disposeData(t){return s("disposeData")}write(t,e,n){return s("write")}move(t,e,n,r){return s("move")}memory(){return s("memory")}floatPrecision(){return s("floatPrecision")}epsilon(){return 32===this.floatPrecision()?r:i}batchMatMul(t,e,n,r){return s("batchMatMul")}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:a,preluActivationWeights:o}){return s("fusedBatchMatMul")}slice(t,e,n){return s("slice")}stridedSlice(t,e,n,r){return s("stridedSlice")}unstack(t,e){return s("unstack")}reverse(t,e){return s("reverse")}concat(t,e){return s("concat")}neg(t){return s("neg")}add(t,e){return s("add")}addN(t){return s("addN")}subtract(t,e){return s("subtract")}multiply(t,e){return s("multiply")}realDivide(t,e){return s("realDivide")}floorDiv(t,e){return s("floorDiv")}sum(t,e){return s("sum")}prod(t,e){return s("prod")}unsortedSegmentSum(t,e,n){return s("unsortedSegmentSum")}argMin(t,e){return s("argMin")}argMax(t,e){return s("argMax")}equal(t,e){return s("equal")}notEqual(t,e){return s("notEqual")}less(t,e){return s("less")}lessEqual(t,e){return s("lessEqual")}greater(t,e){return s("greater")}greaterEqual(t,e){return s("greaterEqual")}logicalNot(t){return s("logicalNot")}logicalAnd(t,e){return s("logicalAnd")}logicalOr(t,e){return s("logicalOr")}where(t){return s("where")}select(t,e,n){return s("select")}topk(t,e,n){return s("topk")}min(t,e){return s("min")}minimum(t,e){return s("minimum")}mod(t,e){return s("mod")}max(t,e){return s("max")}maximum(t,e){return s("maximum")}all(t,e){return s("all")}any(t,e){return s("any")}squaredDifference(t,e){return s("squaredDifference")}ceil(t){return s("ceil")}floor(t){return s("floor")}round(t){return s("round")}sign(t){return s("sign")}isNaN(t){return s("isNaN")}isInf(t){return s("isInf")}isFinite(t){return s("isFinite")}pow(t,e){return s("pow")}exp(t){return s("exp")}expm1(t){return s("expm1")}softmax(t,e){return s("softmax")}log(t){return s("log")}log1p(t){return s("log1p")}sqrt(t){return s("sqrt")}rsqrt(t){return s("rsqrt")}square(t){return s("square")}reciprocal(t){return s("reciprocal")}relu(t){return s("relu")}relu6(t){return s("relu6")}prelu(t,e){return s("prelu")}elu(t){return s("elu")}eluDer(t,e){return s("eluDer")}selu(t){return s("selu")}int(t){return s("int")}clip(t,e,n){return s("clip")}abs(t){return s("abs")}complexAbs(t){return s("complexAbs")}sigmoid(t){return s("sigmoid")}softplus(t){return s("softplus")}sin(t){return s("sin")}cos(t){return s("cos")}tan(t){return s("tan")}asin(t){return s("asin")}acos(t){return s("acos")}atan(t){return s("atan")}atan2(t,e){return s("atan2")}sinh(t){return s("sinh")}cosh(t){return s("cosh")}tanh(t){return s("tanh")}asinh(t){return s("asinh")}acosh(t){return s("acosh")}atanh(t){return s("atanh")}erf(t){return s("erf")}step(t,e){return s("step")}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:a}){return s("fusedConv2d")}conv2d(t,e,n){return s("conv2d")}conv2dDerInput(t,e,n){return s("conv2dDerInput")}conv2dDerFilter(t,e,n){return s("conv2dDerFilter")}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:a}){return s("fusedDepthwiseConv2D")}depthwiseConv2D(t,e,n){return s("depthwiseConv2D")}depthwiseConv2DDerInput(t,e,n){return s("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(t,e,n){return s("depthwiseConv2DDerFilter")}conv3d(t,e,n){return s("conv3d")}conv3dDerInput(t,e,n){return s("conv3dDerInput")}conv3dDerFilter(t,e,n){return s("conv3dDerFilter")}maxPool(t,e){return s("maxPool")}maxPoolBackprop(t,e,n,r){return s("maxPoolBackprop")}avgPool(t,e){return s("avgPool")}avgPoolBackprop(t,e,n){return s("avgPoolBackprop")}avgPool3d(t,e){return s("avgPool3d")}avgPool3dBackprop(t,e,n){return s("avgPool3dBackprop")}maxPool3d(t,e){return s("maxPool3d")}maxPool3dBackprop(t,e,n,r){return s("maxPool3dBackprop")}reshape(t,e){return s("reshape")}cast(t,e){return s("cast")}tile(t,e){return s("tile")}pad(t,e,n){return s("pad")}transpose(t,e){return s("transpose")}gather(t,e,n){return s("gather")}gatherND(t,e){return s("gatherND")}scatterND(t,e,n){return s("scatterND")}batchToSpaceND(t,e,n){return s("batchToSpaceND")}spaceToBatchND(t,e,n){return s("spaceToBatchND")}resizeBilinear(t,e,n,r){return s("resizeBilinear")}resizeBilinearBackprop(t,e,n){return s("resizeBilinearBackprop")}resizeNearestNeighbor(t,e,n,r){return s("resizeNearestNeighbor")}resizeNearestNeighborBackprop(t,e,n){return s("resizeNearestNeighborBackprop")}batchNorm(t,e,n,r,i,a){return s("batchNorm")}localResponseNormalization4D(t,e,n,r,i){return s("localResponseNormalization4D")}LRNGrad(t,e,n,r,i,a,o){return s("LRNGrad")}multinomial(t,e,n,r){return s("multinomial")}oneHot(t,e,n,r){return s("oneHot")}cumsum(t,e,n,r){return s("cumsum")}nonMaxSuppression(t,e,n,r,i){return s("nonMaxSuppression")}fft(t){return s("fft")}ifft(t){return s("ifft")}complex(t,e){return s("complex")}real(t){return s("real")}imag(t){return s("imag")}cropAndResize(t,e,n,r,i,a){return s("cropAndResize")}depthToSpace(t,e,n){return s("depthToSpace")}split(t,e,n){return s("split")}sparseToDense(t,e,n,r){return s("sparseToDense")}diag(t){return s("diag")}fill(t,e,n){return s("fill")}onesLike(t){return s("onesLike")}zerosLike(t){return s("zerosLike")}linspace(t,e,n){return s("linspace")}dispose(){return s("dispose")}}function s(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},"8bc9":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e,n,o,s=!1){const u=Object(a["a"])(t,"x","maxPoolWithArgmax"),c={x:u},l={filterSize:e,strides:n,pad:o,includeBatchInIndex:s},f=r["a"].runKernel(i["Ib"],c,l);return{result:f[0],indexes:f[1]}}const u=Object(o["b"])({maxPoolWithArgmax_:s})},"8bd6":function(t,e,n){const r=n("38cb"),i=(t,e,n)=>r(t,e,">",n);t.exports=i},"8bfa":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef"),s=n("a34f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){const o=Object(a["a"])(t,"indices","scatterND","int32"),u=Object(a["a"])(e,"updates","scatterND");s["validateInput"](u,o,n);const c=t=>t.scatterND(o,u,n),l={indices:o,updates:u},f={shape:n};return r["a"].runKernelFunc(c,l,null,i["pc"],f)}const c=Object(o["b"])({scatterND_:u})},"8cb0":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("54ef"),o=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e,n,a){let s=e,u=!1;3===e.rank&&(u=!0,s=Object(o["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c=t=>t.depthwiseConv2DDerInput(s,n,a),l={dy:s},f=r["a"].runKernelFunc(c,l,null,i["N"]);return u?Object(o["a"])(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const u=Object(a["b"])({depthwiseConv2dNativeBackpropInput_:s})},"8cb5":function(t,e,n){const{MAX_SAFE_COMPONENT_LENGTH:r}=n("b15c"),i=n("b802");e=t.exports={};const a=e.re=[],o=e.src=[],s=e.t={};let u=0;const c=(t,e,n)=>{const r=u++;i(r,e),s[t]=r,o[r]=e,a[r]=new RegExp(e,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),c("FULL",`^${o[s.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),c("LOOSE",`^${o[s.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",o[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),c("XRANGEIDENTIFIER",o[s.NUMERICIDENTIFIER]+"|x|X|\\*"),c("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),c("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),c("COERCERTL",o[s.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",c("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",c("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},"8d71":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=null,s=Object(a["a"])(t,"x","tile",n);o["assert"](s.rank===e.length,()=>`Error in transpose: rank of input ${s.rank} must match length of reps ${e}.`);const u=(t,n)=>{const r=t.tile(s,e);return n([s]),r},c=[s],l={x:s},f={reps:e};return r["a"].runKernelFunc(u,l,null,i["Lc"],f,c)}const c=Object(s["b"])({tile_:u})},"8e05":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("deb3"),u=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t){let e=Object(a["a"])(t,"x","erf");o["assert"]("int32"===e.dtype||"float32"===e.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=Object(s["a"])(e,"float32"));const n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.erf(e);return n([e]),r},n,null,i["W"])}const l=Object(u["b"])({erf_:c})},"8e47":function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("b7e4"),a=n("2f09");function o(t){if(t instanceof HTMLElement)return t;if(i.isSurface(t))return t.drawArea;if(i.isSurfaceInfo(t)){const e=a.visor().surface({name:t.name,tab:t.tab,styles:t.styles});return e.drawArea}throw new Error("Not a drawable")}function s(t,e){const n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(t[r]!==e[r])return!1}return!0}function u(){return r(this,void 0,void 0,(function*(){yield new Promise(t=>requestAnimationFrame(t))}))}e.getDrawArea=o,e.shallowEquals=s,e.nextFrame=u},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),a=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},9117:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(o["a"])(t,"a","add"),s=Object(o["a"])(e,"b","add");[n,s]=Object(a["makeTypesMatch"])(n,s);const u=(t,e)=>{const r=t.add(n,s);return e([n,s]),r},c={a:n,b:s};return r["a"].runKernelFunc(u,c,null,i["d"])}const c=Object(s["b"])({add_:u})},9152:function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,a=h&(1<<-l)-1,h>>=-l,l+=s;l>0;a=256*a+t[e+f],f+=d,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+t[e+f],f+=d,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=c}return(h?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),e+=o+f>=1?d/u:d*Math.pow(2,1-f),e*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+h]=255&o,h+=p,o/=256,c-=8);t[n+h-p]|=128*m}},"917a":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef"),s=n("deb3");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t){const e=Object(a["a"])(t,"x","relu"),n=(t,n)=>(n([e]),"bool"===e.dtype?Object(s["a"])(e,"int32"):t.relu(e)),o={x:e};return r["a"].runKernelFunc(n,o,null,i["ec"])}const c=Object(o["b"])({relu_:u})},"91a3":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef"),u=n("35c9"),c=n("d3ee");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n=0){const s=Object(a["a"])(t,"x","gather"),l=Object(a["a"])(e,"indices","gather","int32"),f={x:s,indices:l},d={axis:n},h=(t,e)=>{const r=Object(o["parseAxisParam"])(n,s.shape)[0],i=Object(c["collectGatherOpShapeInfo"])(s,l,r),a=t.gather(s,Object(u["a"])(l,[l.size]),r);return e([s,l]),Object(u["a"])(a,i.outputShape)};return r["a"].runKernelFunc(h,f,null,i["jb"],d)}const f=Object(s["b"])({gather_:l})},9263:function(t,e,n){"use strict";var r=n("ad6d"),i=n("9f7f"),a=RegExp.prototype.exec,o=String.prototype.replace,s=a,u=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],f=u||l||c;f&&(s=function(t){var e,n,i,s,f=this,d=c&&f.sticky,h=r.call(f),p=f.source,m=0,g=t;return d&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),g=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,m++),n=new RegExp("^(?:"+p+")",h)),l&&(n=new RegExp("^"+p+"$(?!\\s)",h)),u&&(e=f.lastIndex),i=a.call(d?n:f,g),d?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:u&&i&&(f.lastIndex=f.global?i.index+i[0].length:e),l&&i&&i.length>1&&o.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),t.exports=s},"93b2":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("6ae2"),i=n("a3f7"),a=n("54ef");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t){const e=Object(i["a"])(t,"x","square"),n={},a=[e],o=[];return r["a"].runKernelFunc((t,n)=>(n([e]),t.square(e)),{x:e},null,"Square",n,a,o)}const s=Object(a["b"])({square_:o})},9443:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a}));var r=n("a912");function i(e){return!("function"!==typeof t||!Object(r["j"])(t.isBuffer))&&t.isBuffer(e)}function a(t,e){const n=e&&e.property?Object(r["e"])(e.property):r["g"];return Object(r["m"])(t)&&!i(t)?o(n(t),e):n(JSON.parse(t))}function o(t,e){return!Object(r["i"])(t)&&Object(r["k"])(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}a.responseType="json"}).call(this,n("b639").Buffer)},9489:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},"94ca":function(t,e,n){var r=n("d039"),i=/#|\.prototype\./,a=function(t,e){var n=s[o(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},o=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},"959d":function(t,e,n){"use strict";var r=n("3601"),i=/^-ms-/;function a(t){return r(t.replace(i,"ms-"))}t.exports=a},9603:function(t,e,n){"use strict";var r=n("18e2"),i=Object(r["a"])((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));e["a"]=i;i.range},"960f":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("a3f7"),i=n("eb7e"),a=n("5959");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function o(t,e){Object(i["assertNonNull"])(t);const n=Object(r["c"])(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");const o=null;return Object(a["a"])(t,o,n,e)}},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(N){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=j(t,n,o),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=c;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",m={};function g(){}function b(){}function y(){}var v={};v[a]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(D([])));w&&w!==n&&r.call(w,a)&&(v=w);var O=y.prototype=g.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(i,a,o,s){var u=l(t[i],t,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(f).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}var i;function a(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}this._invoke=a}function j(t,e,n){var r=f;return function(i,a){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return F()}n.method=i,n.arg=a;while(1){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function D(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:F}}function F(){return{value:e,done:!0}}return b.prototype=O.constructor=y,y.constructor=b,b.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},_(A.prototype),A.prototype[o]=function(){return this},t.AsyncIterator=A,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new A(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(O),u(O,s,"Generator"),O[a]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=D,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},9748:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("deb3"),u=n("b818"),c=n("54ef"),l=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t,e,n,c,f){const d=Object(a["a"])(t,"x","avgPool","float32"),h=1;o["assert"](u["h"](n,h),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${h}'`);let p=d,m=!1;3===d.rank&&(m=!0,p=Object(l["a"])(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o["assert"](4===p.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${p.rank}.`),null!=f&&o["assert"](o["isInt"](c),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${f} but got pad ${c}.`);const g=(t,r)=>{const i=u["e"](p.shape,e,n,1,c,f);return r([p]),1===i.filterWidth&&1===i.filterHeight&&o["arraysEqual"](i.inShape,i.outShape)?p.clone():t.avgPool(p,i)},b={x:p},y={filterSize:e,strides:n,pad:c,dimRoundingMode:f};let v=r["a"].runKernelFunc(g,b,null,i["o"],y);return v=Object(s["a"])(v,d.dtype),m?Object(l["a"])(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const d=Object(c["b"])({avgPool_:f})},9847:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},"99d0":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("eb7e"),o=n("b818"),s=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n,s,c){a["assert"](t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let l=t,f=e,d=!1;4===e.rank&&(d=!0,f=Object(u["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),l=[1,t[0],t[1],t[2],t[3]]);const h=l[4],p=f.shape[4];a["assert"](5===l.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+l.length+"."),a["assert"](5===f.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank "+f.rank),a["assert"](5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank),a["assert"](h===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[3]}.`),a["assert"](p===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${p}) must match output depth for filter ${n.shape[4]}.`);const m=t=>{const e=1,r=o["b"](l,n.shape,s,e,c);return t.conv3dDerInput(f,n,r)},g={dy:f},b={pad:c},y=r["a"].runKernelFunc(m,g,null,i["F"],b);return d?Object(u["a"])(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const l=Object(s["b"])({conv3DBackpropInput_:c})},"9ac2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processStyleName=void 0,e.createMarkupForStyles=h;var r=n("959d"),i=(f(r),n("d260")),a=f(i),o=n("fbc0"),s=f(o),u=n("ad65"),c=f(u),l=n("da67");f(l);function f(t){return t&&t.__esModule?t:{default:t}}var d=e.processStyleName=(0,c.default)(s.default);function h(t,e){var n="";for(var r in t){var i=0===r.indexOf("--");if(t.hasOwnProperty(r)&&"label"!==r){var o=t[r];0,null!=o&&(i?n+=r+":"+o+";":(n+=d(r)+":",n+=(0,a.default)(r,o,e)+";"))}}return n||null}},"9b0d":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a}));var r=n("fc17");function i(e){return!("function"!==typeof t||!Object(r["A"])(t.isBuffer))&&t.isBuffer(e)}function a(t,e){const n=e&&e.property?Object(r["q"])(e.property):r["u"];return Object(r["D"])(t)&&!i(t)?o(n(t),e):n(JSON.parse(t))}function o(t,e){return!Object(r["x"])(t)&&Object(r["B"])(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}a.responseType="json"}).call(this,n("b639").Buffer)},"9b6c":function(t,e,n){const r=n("38cb"),i=(t,e,n)=>r(t,e,"<",n);t.exports=i},"9bdd":function(t,e,n){var r=n("825a");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t["return"];throw void 0!==a&&r(a.call(t)),o}}},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),a=n("825a"),o=n("c04ea"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(a(t),e=o(e,!0),a(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9e38":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","elu"),n=(t,n)=>{const r=t.elu(e);return n([r]),r},o={x:e};return r["a"].runKernelFunc(n,o,null,i["T"])}const u=Object(o["b"])({elu_:s})},"9e69":function(t,e,n){var r=n("2b3e"),i=r.Symbol;t.exports=i},"9e7b":function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}]},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),a=n("5c6c"),o=n("d44e"),s=n("3f8c"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:a(1,n)}),o(t,c,!1,!0),s[c]=u,t}},"9f7f":function(t,e,n){"use strict";var r=n("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},"9fe6":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("b818"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n,u,l){const f=Object(a["a"])(t,"x","maxPool"),d=1;let h=f,p=!1;3===f.rank&&(p=!0,h=Object(c["a"])(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o["assert"](4===h.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${h.rank}.`),o["assert"](s["h"](n,d),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${d}'`),null!=l&&o["assert"](o["isInt"](u),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${l} but got pad ${u}.`);const m=(t,r)=>{const i=s["e"](h.shape,e,n,1,u,l);let a;return a=1===i.filterWidth&&1===i.filterHeight&&o["arraysEqual"](i.inShape,i.outShape)?h.clone():t.maxPool(h,i),r([h,a]),a},g={x:h},b={filterSize:e,strides:n,pad:u,dimRoundingMode:l},y=r["a"].runKernelFunc(m,g,null,i["Eb"],b);return p?Object(c["a"])(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const f=Object(u["b"])({maxPool_:l})},"9ff4":function(t,e,n){"use strict";(function(t){function r(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return A})),n.d(e,"e",(function(){return K})),n.d(e,"f",(function(){return Q})),n.d(e,"g",(function(){return rt})),n.d(e,"h",(function(){return S})),n.d(e,"i",(function(){return ot})),n.d(e,"j",(function(){return et})),n.d(e,"k",(function(){return N})),n.d(e,"l",(function(){return Z})),n.d(e,"m",(function(){return nt})),n.d(e,"n",(function(){return T})),n.d(e,"o",(function(){return $})),n.d(e,"p",(function(){return a})),n.d(e,"q",(function(){return m})),n.d(e,"r",(function(){return G})),n.d(e,"s",(function(){return M})),n.d(e,"t",(function(){return E})),n.d(e,"u",(function(){return L})),n.d(e,"v",(function(){return C})),n.d(e,"w",(function(){return P})),n.d(e,"x",(function(){return H})),n.d(e,"y",(function(){return g})),n.d(e,"z",(function(){return I})),n.d(e,"A",(function(){return s})),n.d(e,"B",(function(){return B})),n.d(e,"C",(function(){return z})),n.d(e,"D",(function(){return y})),n.d(e,"E",(function(){return v})),n.d(e,"F",(function(){return r})),n.d(e,"G",(function(){return d})),n.d(e,"H",(function(){return u})),n.d(e,"I",(function(){return D})),n.d(e,"J",(function(){return x})),n.d(e,"K",(function(){return tt})),n.d(e,"L",(function(){return it})),n.d(e,"M",(function(){return q}));const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl",a=r(i);const o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s=r(o);function u(t){if(T(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=u(B(r)?f(r):r);if(i)for(const t in i)e[t]=i[t]}return e}if(L(t))return t}const c=/;(?![^(]*\))/g,l=/:(.+)/;function f(t){const e={};return t.split(c).forEach(t=>{if(t){const n=t.split(l);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function d(t){let e="";if(B(t))e=t;else if(T(t))for(let n=0;n<t.length;n++)e+=d(t[n])+" ";else if(L(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const h="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",p="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",m=r(h),g=r(p);function b(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=y(t[r],e[r]);return n}function y(t,e){if(t===e)return!0;let n=R(t),r=R(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=T(t),r=T(e),n||r)return!(!n||!r)&&b(t,e);if(n=L(t),r=L(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,a=Object.keys(e).length;if(i!==a)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!y(t[n],e[n]))return!1}}return String(t)===String(e)}function v(t,e){return t.findIndex(t=>y(t,e))}const x=t=>null==t?"":L(t)?JSON.stringify(t,w,2):String(t),w=(t,e)=>M(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[e,n])=>(t[e+" =>"]=n,t),{})}:I(e)?{[`Set(${e.size})`]:[...e.values()]}:!L(e)||T(e)||V(e)?e:String(e),O={},_=[],A=()=>{},j=()=>!1,k=/^on[^a-z]/,C=t=>k.test(t),E=t=>t.startsWith("onUpdate:"),S=Object.assign,D=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},F=Object.prototype.hasOwnProperty,N=(t,e)=>F.call(t,e),T=Array.isArray,M=t=>"[object Map]"===W(t),I=t=>"[object Set]"===W(t),R=t=>t instanceof Date,$=t=>"function"===typeof t,B=t=>"string"===typeof t,z=t=>"symbol"===typeof t,L=t=>null!==t&&"object"===typeof t,P=t=>L(t)&&$(t.then)&&$(t.catch),U=Object.prototype.toString,W=t=>U.call(t),q=t=>W(t).slice(8,-1),V=t=>"[object Object]"===W(t),G=t=>B(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,H=r(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),X=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},Y=/-(\w)/g,K=X(t=>t.replace(Y,(t,e)=>e?e.toUpperCase():"")),J=/\B([A-Z])/g,Z=X(t=>t.replace(J,"-$1").toLowerCase()),Q=X(t=>t.charAt(0).toUpperCase()+t.slice(1)),tt=X(t=>t?"on"+Q(t):""),et=(t,e)=>t!==e&&(t===t||e===e),nt=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},rt=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},it=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let at;const ot=()=>at||(at="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{})}).call(this,n("c8ba"))},"9ffd":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","softplus"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.softplus(e);return n([e]),r},n,null,i["yc"])}const u=Object(o["b"])({softplus_:s})},a009:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(o["a"])(t,"a","sub"),s=Object(o["a"])(e,"b","sub");[n,s]=Object(a["makeTypesMatch"])(n,s);const u=(t,e)=>{const r=t.subtract(n,s);return e([n,s]),r},c={a:n,b:s};return r["a"].runKernelFunc(u,c,null,i["Hc"])}const c=Object(s["b"])({sub_:u})},a09b:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","zerosLike"),n={x:e};return r["a"].runKernelFunc(t=>t.zerosLike(e),n,null,i["Rc"])}const u=Object(o["b"])({zerosLike_:s})},a15a:function(t,e,n){"use strict";var r=n("18e2"),i=Object(r["a"])((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Object(r["a"])((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null},e["a"]=i;i.range},a15b:function(t,e,n){"use strict";var r=n("23e7"),i=n("44ad"),a=n("fc6a"),o=n("a640"),s=[].join,u=i!=Object,c=o("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(t){return s.call(a(this),void 0===t?",":t)}})},a211:function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},a236:function(t,e,n){const{MAX_LENGTH:r}=n("b15c"),{re:i,t:a}=n("8cb5"),o=n("bbfd"),s=(t,e)=>{if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof o)return t;if("string"!==typeof t)return null;if(t.length>r)return null;const n=e.loose?i[a.LOOSE]:i[a.FULL];if(!n.test(t))return null;try{return new o(t,e)}catch(s){return null}};t.exports=s},a2a3:function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)>=0;t.exports=i},a2ec:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("30bf"),i=n("01de");class a extends r.Component{componentDidMount(){const{name:t,tab:e}=this.props;this.props.registerSurface(t,e,this)}componentDidUpdate(){return!1}render(){const{name:t,visible:e,styles:n}=this.props,o=Object.assign({},a.defaultStyles,n),{width:s,height:u}=o;let{maxHeight:c,maxWidth:l}=o;c=u===a.defaultStyles.height?c:u,l=s===a.defaultStyles.width?l:s;const f=i.css({display:e?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:u,width:s,maxHeight:c,maxWidth:l,overflow:"auto"}),d=i.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),h=i.css({boxSizing:"border-box"});return r.h("div",{className:f+" tf-surface",ref:t=>this.container=t,"data-visible":e},r.h("div",{className:d+" tf-label",ref:t=>this.label=t},t),r.h("div",{className:h+" tf-draw-area",ref:t=>this.drawArea=t}))}}a.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},e.SurfaceComponent=a},a34f:function(t,e,n){"use strict";n.r(e),n.d(e,"validateUpdateShape",(function(){return i})),n.d(e,"validateInput",(function(){return a})),n.d(e,"calculateShapes",(function(){return o}));var r=n("eb7e");function i(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+`, indices.shape: ${e.shape}, shape: ${t}`+`, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(a+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(a+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(a+" update.rank != "+(i+t.length-r));for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(a+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(a+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function a(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}i(n,e,t)}function o(t,e,n){const i=e.shape.length,a=i>1?e.shape[i-1]:1,o=n.length;let s=1;for(let r=a;r<o;++r)s*=n[r];const u=a<1?1:a,c=Object(r["sizeFromShape"])(e.shape)/u,l=[...Object(r["computeStrides"])(n.slice(0,a)),1],f=Object(r["sizeFromShape"])(n);return{sliceRank:a,numUpdates:c,sliceSize:s,strides:l,outputSize:f}}},a374:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","acos"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.acos(e);return n([e]),r},n,null,i["b"])}const u=Object(o["b"])({acos_:s})},a3f7:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f}));var r=n("6ae2"),i=n("b333"),a=n("34d7"),o=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e){let n=t;if(Object(o["isTypedArray"])(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];const r=[];while(Array.isArray(n)||Object(o["isTypedArray"])(n)&&"string"!==e)r.push(n.length),n=n[0];return Array.isArray(t)&&Object(i["c"])().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&u(t,r,[]),r}function u(t,e,n){if(n=n||[],!Array.isArray(t)&&!Object(o["isTypedArray"])(t))return void Object(o["assert"])(0===e.length,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);Object(o["assert"])(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Object(o["assert"])(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)u(t[i],r,n.concat(i))}function c(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}function l(t,e,n,i="numeric"){if(t instanceof a["a"])return c(i,t.dtype,e,n),t;let u=Object(o["inferDtype"])(t);if("string"!==u&&["bool","int32","float32"].indexOf(i)>=0&&(u=i),c(i,u,e,n),null==t||!Object(o["isTypedArray"])(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t){const r=null==t?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const l=s(t,u);Object(o["isTypedArray"])(t)||Array.isArray(t)||(t=[t]);const f=!0,d="string"!==u?Object(o["toTypedArray"])(t,u):Object(o["flatten"])(t,[],f);return r["a"].makeTensor(d,l,u)}function f(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);const i=t;return i.map((t,r)=>l(t,`${e}[${r}]`,n),r)}},a49d:function(t,e,n){var r;(function(i,a){var o,s=this,u=256,c=6,l=52,f="random",d=a.pow(u,c),h=a.pow(2,l),p=2*h,m=u-1;function g(t,e,n){var r=[];e=1==e?{entropy:!0}:e||{};var o=x(v(e.entropy?[t,O(i)]:null==t?w():t,3),r),s=new b(r),l=function(){var t=s.g(c),e=d,n=0;while(t<h)t=(t+n)*u,e*=u,n=s.g(1);while(t>=p)t/=2,e/=2,n>>>=1;return(t+n)/e};return l.int32=function(){return 0|s.g(4)},l.quick=function(){return s.g(4)/4294967296},l.double=l,x(O(s.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&y(r,s),t.state=function(){return y(s,{})}),n?(a[f]=t,e):t})(l,o,"global"in e?e.global:this==a,e.state)}function b(t){var e,n=t.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];n||(t=[n++]);while(i<u)o[i]=i++;for(i=0;i<u;i++)o[i]=o[a=m&a+t[i%n]+(e=o[i])],o[a]=e;(r.g=function(t){var e,n=0,i=r.i,a=r.j,o=r.S;while(t--)e=o[i=m&i+1],n=n*u+o[m&(o[i]=o[a=m&a+e])+(o[a]=e)];return r.i=i,r.j=a,n})(u)}function y(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function v(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(v(t[n],e-1))}catch(a){}return r.length?r:"string"==i?t:t+"\0"}function x(t,e){var n,r=t+"",i=0;while(i<r.length)e[m&i]=m&(n^=19*e[m&i])+r.charCodeAt(i++);return O(e)}function w(){try{var t;return o&&(t=o.randomBytes)?t=t(u):(t=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(t)),O(t)}catch(r){var e=s.navigator,n=e&&e.plugins;return[+new Date,s,n,s.screen,O(i)]}}function O(t){return String.fromCharCode.apply(0,t)}if(a["seed"+f]=g,x(a.random(),i),t.exports){t.exports=g;try{o=n(3)}catch(_){}}else r=function(){return g}.call(e,n,e,t),void 0===r||(t.exports=r)})([],Math)},a49e:function(t,e,n){(function(t){var r;(function(t,i,a){function o(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xorwow=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("d066"),o=n("c430"),s=n("83ab"),u=n("4930"),c=n("fdbf"),l=n("d039"),f=n("5135"),d=n("e8b5"),h=n("861d"),p=n("825a"),m=n("7b0b"),g=n("fc6a"),b=n("c04ea"),y=n("5c6c"),v=n("7c73"),x=n("df75"),w=n("241c"),O=n("057f"),_=n("7418"),A=n("06cf"),j=n("9bf2"),k=n("d1e7"),C=n("9112"),E=n("6eeb"),S=n("5692"),D=n("f772"),F=n("d012"),N=n("90e3"),T=n("b622"),M=n("e538"),I=n("746f"),R=n("d44e"),$=n("69f3"),B=n("b727").forEach,z=D("hidden"),L="Symbol",P="prototype",U=T("toPrimitive"),W=$.set,q=$.getterFor(L),V=Object[P],G=i.Symbol,H=a("JSON","stringify"),X=A.f,Y=j.f,K=O.f,J=k.f,Z=S("symbols"),Q=S("op-symbols"),tt=S("string-to-symbol-registry"),et=S("symbol-to-string-registry"),nt=S("wks"),rt=i.QObject,it=!rt||!rt[P]||!rt[P].findChild,at=s&&l((function(){return 7!=v(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=X(V,e);r&&delete V[e],Y(t,e,n),r&&t!==V&&Y(V,e,r)}:Y,ot=function(t,e){var n=Z[t]=v(G[P]);return W(n,{type:L,tag:t,description:e}),s||(n.description=e),n},st=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},ut=function(t,e,n){t===V&&ut(Q,e,n),p(t);var r=b(e,!0);return p(n),f(Z,r)?(n.enumerable?(f(t,z)&&t[z][r]&&(t[z][r]=!1),n=v(n,{enumerable:y(0,!1)})):(f(t,z)||Y(t,z,y(1,{})),t[z][r]=!0),at(t,r,n)):Y(t,r,n)},ct=function(t,e){p(t);var n=g(e),r=x(n).concat(pt(n));return B(r,(function(e){s&&!ft.call(n,e)||ut(t,e,n[e])})),t},lt=function(t,e){return void 0===e?v(t):ct(v(t),e)},ft=function(t){var e=b(t,!0),n=J.call(this,e);return!(this===V&&f(Z,e)&&!f(Q,e))&&(!(n||!f(this,e)||!f(Z,e)||f(this,z)&&this[z][e])||n)},dt=function(t,e){var n=g(t),r=b(e,!0);if(n!==V||!f(Z,r)||f(Q,r)){var i=X(n,r);return!i||!f(Z,r)||f(n,z)&&n[z][r]||(i.enumerable=!0),i}},ht=function(t){var e=K(g(t)),n=[];return B(e,(function(t){f(Z,t)||f(F,t)||n.push(t)})),n},pt=function(t){var e=t===V,n=K(e?Q:g(t)),r=[];return B(n,(function(t){!f(Z,t)||e&&!f(V,t)||r.push(Z[t])})),r};if(u||(G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=N(t),n=function(t){this===V&&n.call(Q,t),f(this,z)&&f(this[z],e)&&(this[z][e]=!1),at(this,e,y(1,t))};return s&&it&&at(V,e,{configurable:!0,set:n}),ot(e,t)},E(G[P],"toString",(function(){return q(this).tag})),E(G,"withoutSetter",(function(t){return ot(N(t),t)})),k.f=ft,j.f=ut,A.f=dt,w.f=O.f=ht,_.f=pt,M.f=function(t){return ot(T(t),t)},s&&(Y(G[P],"description",{configurable:!0,get:function(){return q(this).description}}),o||E(V,"propertyIsEnumerable",ft,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:G}),B(x(nt),(function(t){I(t)})),r({target:L,stat:!0,forced:!u},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=G(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:lt,defineProperty:ut,defineProperties:ct,getOwnPropertyDescriptor:dt}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ht,getOwnPropertySymbols:pt}),r({target:"Object",stat:!0,forced:l((function(){_.f(1)}))},{getOwnPropertySymbols:function(t){return _.f(m(t))}}),H){var mt=!u||l((function(){var t=G();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}));r({target:"JSON",stat:!0,forced:mt},{stringify:function(t,e,n){var r,i=[t],a=1;while(arguments.length>a)i.push(arguments[a++]);if(r=e,(h(e)||void 0!==t)&&!st(t))return d(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,H.apply(null,i)}})}G[P][U]||C(G[P],U,G[P].valueOf),R(G,L),F[z]=!0},a591:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("2739"),i=n("6eb2"),a=n("b14c"),o=n("742c"),s=n("a15a"),u=n("77ae");function c(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function l(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function f(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function d(t){var e=t.dateTime,n=t.date,s=t.time,u=t.periods,d=t.days,p=t.shortDays,m=t.months,g=t.shortMonths,b=v(u),y=x(u),Z=v(d),yt=x(d),Dt=v(p),Ft=x(p),Nt=v(m),Tt=x(m),Mt=v(g),It=x(g),Rt={a:Kt,A:Jt,b:Zt,B:Qt,c:null,d:P,e:P,f:G,g:rt,G:at,H:U,I:W,j:q,L:V,m:H,M:X,p:te,q:ee,Q:Et,s:St,S:Y,u:K,U:J,V:Q,w:tt,W:et,x:null,X:null,y:nt,Y:it,Z:ot,"%":Ct},$t={a:ne,A:re,b:ie,B:ae,c:null,d:st,e:st,f:dt,g:_t,G:jt,H:ut,I:ct,j:lt,L:ft,m:ht,M:pt,p:oe,q:se,Q:Et,s:St,S:mt,u:gt,U:bt,V:vt,w:xt,W:wt,x:null,X:null,y:Ot,Y:At,Z:kt,"%":Ct},Bt={a:Wt,A:qt,b:Vt,B:Gt,c:Ht,d:F,e:F,f:$,g:C,G:k,H:T,I:T,j:N,L:R,m:D,M:M,p:Ut,q:S,Q:z,s:L,S:I,u:O,U:_,V:A,w:w,W:j,x:Xt,X:Yt,y:C,Y:k,Z:E,"%":B};function zt(t,e){return function(n){var r,i,a,o=[],s=-1,u=0,c=t.length;n instanceof Date||(n=new Date(+n));while(++s<c)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=h[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(t.slice(u,s)),o.join("")}}function Lt(t,e){return function(n){var s,u,d=f(1900,void 0,1),h=Pt(d,t,n+="",0);if(h!=n.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(e&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(s=l(f(d.y,0,1)),u=s.getUTCDay(),s=u>4||0===u?r["a"].ceil(s):Object(r["a"])(s),s=i["a"].offset(s,7*(d.V-1)),d.y=s.getUTCFullYear(),d.m=s.getUTCMonth(),d.d=s.getUTCDate()+(d.w+6)%7):(s=c(f(d.y,0,1)),u=s.getDay(),s=u>4||0===u?a["a"].ceil(s):Object(a["a"])(s),s=o["a"].offset(s,7*(d.V-1)),d.y=s.getFullYear(),d.m=s.getMonth(),d.d=s.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),u="Z"in d?l(f(d.y,0,1)).getUTCDay():c(f(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(u+5)%7:d.w+7*d.U-(u+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,l(d)):c(d)}}function Pt(t,e,n,r){var i,a,o=0,s=e.length,u=n.length;while(o<s){if(r>=u)return-1;if(i=e.charCodeAt(o++),37===i){if(i=e.charAt(o++),a=Bt[i in h?e.charAt(o++):i],!a||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function Ut(t,e,n){var r=b.exec(e.slice(n));return r?(t.p=y.get(r[0].toLowerCase()),n+r[0].length):-1}function Wt(t,e,n){var r=Dt.exec(e.slice(n));return r?(t.w=Ft.get(r[0].toLowerCase()),n+r[0].length):-1}function qt(t,e,n){var r=Z.exec(e.slice(n));return r?(t.w=yt.get(r[0].toLowerCase()),n+r[0].length):-1}function Vt(t,e,n){var r=Mt.exec(e.slice(n));return r?(t.m=It.get(r[0].toLowerCase()),n+r[0].length):-1}function Gt(t,e,n){var r=Nt.exec(e.slice(n));return r?(t.m=Tt.get(r[0].toLowerCase()),n+r[0].length):-1}function Ht(t,n,r){return Pt(t,e,n,r)}function Xt(t,e,r){return Pt(t,n,e,r)}function Yt(t,e,n){return Pt(t,s,e,n)}function Kt(t){return p[t.getDay()]}function Jt(t){return d[t.getDay()]}function Zt(t){return g[t.getMonth()]}function Qt(t){return m[t.getMonth()]}function te(t){return u[+(t.getHours()>=12)]}function ee(t){return 1+~~(t.getMonth()/3)}function ne(t){return p[t.getUTCDay()]}function re(t){return d[t.getUTCDay()]}function ie(t){return g[t.getUTCMonth()]}function ae(t){return m[t.getUTCMonth()]}function oe(t){return u[+(t.getUTCHours()>=12)]}function se(t){return 1+~~(t.getUTCMonth()/3)}return Rt.x=zt(n,Rt),Rt.X=zt(s,Rt),Rt.c=zt(e,Rt),$t.x=zt(n,$t),$t.X=zt(s,$t),$t.c=zt(e,$t),{format:function(t){var e=zt(t+="",Rt);return e.toString=function(){return t},e},parse:function(t){var e=Lt(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=zt(t+="",$t);return e.toString=function(){return t},e},utcParse:function(t){var e=Lt(t+="",!0);return e.toString=function(){return t},e}}}var h={"-":"",_:" ",0:"0"},p=/^\s*\d+/,m=/^%/,g=/[\\^$*+?|[\]().{}]/g;function b(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function y(t){return t.replace(g,"\\$&")}function v(t){return new RegExp("^(?:"+t.map(y).join("|")+")","i")}function x(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function w(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function O(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function _(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function A(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function j(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function k(t,e,n){var r=p.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function C(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function E(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function S(t,e,n){var r=p.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function D(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function F(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function N(t,e,n){var r=p.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function T(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function M(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function I(t,e,n){var r=p.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function R(t,e,n){var r=p.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function $(t,e,n){var r=p.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function B(t,e,n){var r=m.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function z(t,e,n){var r=p.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function L(t,e,n){var r=p.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function P(t,e){return b(t.getDate(),e,2)}function U(t,e){return b(t.getHours(),e,2)}function W(t,e){return b(t.getHours()%12||12,e,2)}function q(t,e){return b(1+o["a"].count(Object(s["a"])(t),t),e,3)}function V(t,e){return b(t.getMilliseconds(),e,3)}function G(t,e){return V(t,e)+"000"}function H(t,e){return b(t.getMonth()+1,e,2)}function X(t,e){return b(t.getMinutes(),e,2)}function Y(t,e){return b(t.getSeconds(),e,2)}function K(t){var e=t.getDay();return 0===e?7:e}function J(t,e){return b(a["b"].count(Object(s["a"])(t)-1,t),e,2)}function Z(t){var e=t.getDay();return e>=4||0===e?Object(a["c"])(t):a["c"].ceil(t)}function Q(t,e){return t=Z(t),b(a["c"].count(Object(s["a"])(t),t)+(4===Object(s["a"])(t).getDay()),e,2)}function tt(t){return t.getDay()}function et(t,e){return b(a["a"].count(Object(s["a"])(t)-1,t),e,2)}function nt(t,e){return b(t.getFullYear()%100,e,2)}function rt(t,e){return t=Z(t),b(t.getFullYear()%100,e,2)}function it(t,e){return b(t.getFullYear()%1e4,e,4)}function at(t,e){var n=t.getDay();return t=n>=4||0===n?Object(a["c"])(t):a["c"].ceil(t),b(t.getFullYear()%1e4,e,4)}function ot(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+b(e/60|0,"0",2)+b(e%60,"0",2)}function st(t,e){return b(t.getUTCDate(),e,2)}function ut(t,e){return b(t.getUTCHours(),e,2)}function ct(t,e){return b(t.getUTCHours()%12||12,e,2)}function lt(t,e){return b(1+i["a"].count(Object(u["a"])(t),t),e,3)}function ft(t,e){return b(t.getUTCMilliseconds(),e,3)}function dt(t,e){return ft(t,e)+"000"}function ht(t,e){return b(t.getUTCMonth()+1,e,2)}function pt(t,e){return b(t.getUTCMinutes(),e,2)}function mt(t,e){return b(t.getUTCSeconds(),e,2)}function gt(t){var e=t.getUTCDay();return 0===e?7:e}function bt(t,e){return b(r["b"].count(Object(u["a"])(t)-1,t),e,2)}function yt(t){var e=t.getUTCDay();return e>=4||0===e?Object(r["c"])(t):r["c"].ceil(t)}function vt(t,e){return t=yt(t),b(r["c"].count(Object(u["a"])(t),t)+(4===Object(u["a"])(t).getUTCDay()),e,2)}function xt(t){return t.getUTCDay()}function wt(t,e){return b(r["a"].count(Object(u["a"])(t)-1,t),e,2)}function Ot(t,e){return b(t.getUTCFullYear()%100,e,2)}function _t(t,e){return t=yt(t),b(t.getUTCFullYear()%100,e,2)}function At(t,e){return b(t.getUTCFullYear()%1e4,e,4)}function jt(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Object(r["c"])(t):r["c"].ceil(t),b(t.getUTCFullYear()%1e4,e,4)}function kt(){return"+0000"}function Ct(){return"%"}function Et(t){return+t}function St(t){return Math.floor(+t/1e3)}},a5aa:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(o["a"])(t,"a","mul"),s=Object(o["a"])(e,"b","mul");[n,s]=Object(a["makeTypesMatch"])(n,s);const u=(t,e)=>{const r=t.multiply(n,s);return e([n,s]),r},c={a:n,b:s};return r["a"].runKernelFunc(u,c,null,i["Ob"])}const c=Object(s["b"])({mul_:u})},a630:function(t,e,n){var r=n("23e7"),i=n("4df4"),a=n("1c7e"),o=!a((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:i})},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a780:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("0280"),i=n("a3f7");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function a(t){const e=Object(i["a"])(t,"condition","whereAsync","bool"),n=await e.data(),a=Object(r["a"])(e.shape,n);return t!==e&&e.dispose(),a}const o=a},a79d:function(t,e,n){"use strict";var r=n("23e7"),i=n("c430"),a=n("fea9"),o=n("d039"),s=n("d066"),u=n("4840"),c=n("cdf9"),l=n("6eeb"),f=!!a&&o((function(){a.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:f},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof a||a.prototype["finally"]||l(a.prototype,"finally",s("Promise").prototype["finally"])},a7fd:function(t,e,n){"use strict";var r=n("aa74");e["a"]=function(t){return t=Object(r["b"])(Math.abs(t)),t?t[1]:NaN}},a80f:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},a87b:function(t){t.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"4.13.1","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"changelog":"conventional-changelog -p angular -r 2","build":"yarn build:only","build:only":"yarn tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup \'yarn tsc:src -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'yarn tsc:site -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2","ajv":"^6.12.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.3","codecov":"^3.7.0","concurrently":"^5.2.0","conventional-changelog-cli":"^2.0.34","d3":"^5.16.0","eslint":"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3","jest":"^26.0.1","jest-puppeteer":"^4.4.0","mkdirp":"^1.0.4","prettier":"^2.0.5","puppeteer":"^3.1.0","rollup":"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7","terser":"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1","typescript":"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0","yargs":"~15.3.1"},"peerDependencies":{"vega":"^5.12.1"},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},a912:function(t,e,n){"use strict";function r(t,e,n){return t.fields=e||[],t.fname=n,t}function i(t){return 1===t.length?a(t[0]):o(t)}n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return w})),n.d(e,"g",(function(){return l})),n.d(e,"h",(function(){return O})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return b})),n.d(e,"k",(function(){return A})),n.d(e,"l",(function(){return j})),n.d(e,"m",(function(){return h})),n.d(e,"n",(function(){return k})),n.d(e,"o",(function(){return E})),n.d(e,"p",(function(){return p})),n.d(e,"q",(function(){return S})),n.d(e,"r",(function(){return D})),n.d(e,"s",(function(){return F})),n.d(e,"t",(function(){return T})),n.d(e,"u",(function(){return m})),n.d(e,"v",(function(){return I})),n.d(e,"w",(function(){return M})),n.d(e,"x",(function(){return f}));const a=t=>function(e){return e[t]},o=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};function s(t){throw Error(t)}function u(t){const e=[],n=t.length;let r,i,a,o=null,u=0,c="";function l(){e.push(c+t.substring(r,i)),c="",r=i+1}for(t+="",r=i=0;i<n;++i)if(a=t[i],"\\"===a)c+=t.substring(r,i),c+=t.substring(++i,++i),r=i;else if(a===o)l(),o=null,u=-1;else{if(o)continue;r===u&&'"'===a||r===u&&"'"===a?(r=i+1,o=a):"."!==a||u?"["===a?(i>r&&l(),u=r=i+1):"]"===a&&(u||s("Access path missing open bracket: "+t),u>0&&l(),u=0,r=i+1):i>r?l():r=i+1}return u&&s("Access path missing closing bracket: "+t),o&&s("Access path missing closing quote: "+t),i>r&&(i++,l()),e}function c(t,e,n){const a=u(t);return t=1===a.length?a[0]:t,r((n&&n.get||i)(a),[t],e||t)}c("id");const l=r(t=>t,[],"identity"),f=(r(()=>0,[],"zero"),r(()=>1,[],"one"),r(()=>!0,[],"true"));r(()=>!1,[],"false");var d=Array.isArray;function h(t){return t===Object(t)}function p(t){return t[t.length-1]}function m(t){return null==t||""===t?null:+t}function g(t){return null!=t?d(t)?t:[t]:[]}function b(t){return"function"===typeof t}function y(t){return b(t)?t:()=>t}function v(t){for(let e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r],e)t[n]=e[n];return t}const x=Object.prototype.hasOwnProperty;function w(t,e){return x.call(t,e)}function O(t,e,n){const r=t.prototype=Object.create(e.prototype);return r.constructor=t,v(r,n)}function _(t){return"[object Date]"===Object.prototype.toString.call(t)}function A(t){return t&&b(t[Symbol.iterator])}function j(t){return"number"===typeof t}function k(t){return"string"===typeof t}const C=1e4;function E(t){let e,n,r;t=+t||C;const i=()=>{e={},n={},r=0},a=(i,a)=>(++r>t&&(n=e,e={},r=1),e[i]=a);return i(),{clear:i,has:t=>w(e,t)||w(n,t),get:t=>w(e,t)?e[t]:w(n,t)?a(t,n[t]):void 0,set:(t,n)=>w(e,t)?e[t]=n:a(t,n)}}function S(t){return t&&p(t)-t[0]||0}function D(t){return d(t)?"["+t.map(D)+"]":h(t)||k(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function F(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t}const N=t=>j(t)||_(t)?t:Date.parse(t);function T(t,e){return e=e||N,null==t||""===t?null:e(t)}function M(t){return null==t||""===t?null:t+""}function I(t){const e={},n=t.length;for(let r=0;r<n;++r)e[t[r]]=!0;return e}},a919:function(t,e,n){var r=n("ddc6"),i={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},a=r(i);t.exports=a},a9e3:function(t,e,n){"use strict";var r=n("83ab"),i=n("da84"),a=n("94ca"),o=n("6eeb"),s=n("5135"),u=n("c6b6"),c=n("7156"),l=n("c04ea"),f=n("d039"),d=n("7c73"),h=n("241c").f,p=n("06cf").f,m=n("9bf2").f,g=n("58a8").trim,b="Number",y=i[b],v=y.prototype,x=u(d(v))==b,w=function(t){var e,n,r,i,a,o,s,u,c=l(t,!1);if("string"==typeof c&&c.length>2)if(c=g(c),e=c.charCodeAt(0),43===e||45===e){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=c.slice(2),o=a.length,s=0;s<o;s++)if(u=a.charCodeAt(s),u<48||u>i)return NaN;return parseInt(a,r)}return+c};if(a(b,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var O,_=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof _&&(x?f((function(){v.valueOf.call(n)})):u(n)!=b)?c(new y(w(e)),n,_):w(e)},A=r?h(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;A.length>j;j++)s(y,O=A[j])&&!s(_,O)&&m(_,O,p(y,O));_.prototype=v,v.constructor=_,o(i,b,_)}},aa74:function(t,e,n){"use strict";function r(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}n.d(e,"b",(function(){return r})),e["a"]=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}},aaec:function(t,e){var n="\\ud800-\\udfff",r="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",o=r+i+a,s="\\ufe0e\\ufe0f",u="\\u200d",c=RegExp("["+u+n+o+s+"]");function l(t){return c.test(t)}t.exports=l},aaf9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=n("b14b"),i=a(r);function a(t){return t&&t.__esModule?t:{default:t}}var o=["-webkit-",""];function s(t,e){if("string"===typeof e&&!(0,i.default)(e)&&e.indexOf("cross-fade(")>-1)return o.map((function(t){return e.replace(/cross-fade\(/g,t+"cross-fade(")}))}t.exports=e["default"]},ac1f:function(t,e,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},acef:function(t,e,n){const r=n("a236"),i=(t,e)=>{const n=r(t,e);return n?n.version:null};t.exports=i},ad65:function(t,e,n){"use strict";function r(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=r},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae40:function(t,e,n){var r=n("83ab"),i=n("d039"),a=n("5135"),o=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(a(s,t))return s[t];e||(e={});var n=[][t],c=!!a(e,"ACCESSORS")&&e.ACCESSORS,l=a(e,0)?e[0]:u,f=a(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?o(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,f)}))}},ae6d:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("36e5"),u=n("54ef"),c=n("35c9"),l=n("c912");function f(t,e=null,n=!1){const u=Object(a["a"])(t,"x","min"),f=(t,r)=>{const i=Object(o["parseAxisParam"])(e,u.shape);let a=i;const f=s["f"](a,u.rank);let d=u;null!=f&&(d=Object(l["a"])(u,f),a=s["g"](a.length,u.rank));const h=t.min(d,a);null!=f&&d.dispose();let p=h;if(n){const t=s["e"](p.shape,i);p=Object(c["a"])(h,t),h.dispose()}return r([u,p]),p},d={x:u},h={axis:e,keepDims:n};return r["a"].runKernelFunc(f,d,null,i["Lb"],h)}const d=Object(u["b"])({min_:f})},ae93:function(t,e,n){"use strict";var r,i,a,o=n("e163"),s=n("9112"),u=n("5135"),c=n("b622"),l=n("c430"),f=c("iterator"),d=!1,h=function(){return this};[].keys&&(a=[].keys(),"next"in a?(i=o(o(a)),i!==Object.prototype&&(r=i)):d=!0),void 0==r&&(r={}),l||u(r,f)||s(r,f,h),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},aeab:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},aed4:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Object.defineProperty(e,"__esModule",{value:!0});const r=n("30bf"),i=n("01de"),a=n("a2ec"),o=n("1334");class s extends r.Component{static render(t,e,n){return r.render(r.h(s,Object.assign({},n)),t,e)}constructor(t){super(t),this.surfaces=new Map;const e=null==t.startOpen||t.startOpen;this.state={isOpen:e,isFullscreen:!1,activeTab:null,tabs:new Set},this.keyHandler=this.keyHandler.bind(this)}close(){this.setState({isOpen:!1})}open(){this.setState({isOpen:!0})}toggle(){this.setState({isOpen:!this.state.isOpen})}toggleFullScreen(){this.setState({isFullscreen:!this.state.isFullscreen})}isOpen(){return this.state.isOpen}isFullscreen(){return this.state.isFullscreen}getSurface(t,e){const n=this.surfaceId(t,e);let r;if(!this.surfaces.has(n))throw Error("Surface not found with id: "+n);return r=this.surfaces.get(n),{container:r.container,label:r.label,drawArea:r.drawArea}}bindKeys(){document.addEventListener("keydown",this.keyHandler,!1)}unbindKeys(){document.removeEventListener("keydown",this.keyHandler)}surfaceId(t,e){return t+e}setTabs(t){const e=t.map(t=>t.tab),n=this.state.tabs;let r;for(const i of e)n.has(i)||(n.add(i),r=i);null!=r&&this.setState({tabs:n,activeTab:r})}getTabs(){return this.state.tabs}registerSurface(t,e,n){const r=this.surfaceId(t,e);this.surfaces.set(r,n)}keyHandler(t){const e=192;t.keyCode===e&&(t.shiftKey?this.toggleFullScreen():this.toggle())}setActiveTab(t){this.setState({activeTab:t})}componentDidMount(){this.bindKeys()}componentWillMount(){this.setTabs(this.props.surfaceList)}componentWillReceiveProps(t){this.setTabs(t.surfaceList)}render(){const{isOpen:t,isFullscreen:e,activeTab:n}=this.state,{surfaceList:s}=this.props,c=Array.from(this.getTabs().values()),l="550px",f="90vw",d=e?f:l,h=i.css({width:d,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),p=i.css({right:"0"}),m=i.css({right:`calc(-${d} - 10px)`}),g=t?p:m,b=i.css({});return r.h("div",{className:`${h} ${g} visor`,"data-isopen":t,"data-isfullscreen":e},r.h(u,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:e}),r.h(o.Tabs,{tabNames:c,activeTab:n,handleClick:this.setActiveTab.bind(this)}),r.h("div",{className:b+" visor-surfaces"},s.map(t=>r.h(a.SurfaceComponent,{key:t.name+t.tab,name:t.name,tab:t.tab,styles:t.styles,registerSurface:this.registerSurface.bind(this),visible:n===t.tab}))))}}function u(t){const{isFullScreen:e,fullScreenHandler:n,closeHandler:a}=t,o=i.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),s=i.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),u=i.css({marginLeft:"auto"});return r.h("div",{className:o+" visor-controls"},r.h("button",{className:""+s,onClick:n},e?"Minimize":"Maximize"),r.h("button",{className:`${s} ${u}`,onClick:a},"Hide"))}e.VisorComponent=s},af03:function(t,e,n){var r=n("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},afda:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("a3f7"),i=n("eb7e"),a=n("9117"),o=n("36e5"),s=n("4f20"),u=n("1359"),c=n("c021"),l=n("54ef"),f=n("35c9"),d=n("a009"),h=n("e053");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function p(t,e=null,n=!1){const l=Object(r["a"])(t,"x","logSumExp"),p=Object(i["parseAxisParam"])(e,l.shape),m=Object(c["a"])(l,p,!0),g=Object(d["a"])(l,m),b=Object(s["a"])(g),y=Object(h["a"])(b,p),v=Object(u["a"])(y),x=Object(a["a"])(Object(f["a"])(m,v.shape),v);if(n){const t=Object(o["e"])(x.shape,p);return Object(f["a"])(x,t)}return x}const m=Object(l["b"])({logSumExp_:p})},b00b:function(t,e,n){const r=n("3034"),i=(t,e)=>r(t,e,!0);t.exports=i},b041:function(t,e,n){"use strict";var r=n("00ee"),i=n("f5df");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,a=Function.prototype,o=a.toString,s=/^\s*function ([^ (]*)/,u="name";r&&!(u in a)&&i(a,u,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},b14b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=/-webkit-|-moz-|-ms-/;function i(t){return"string"===typeof t&&r.test(t)}t.exports=e["default"]},b14c:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return l}));var r=n("18e2"),i=n("1738");function a(t){return Object(r["a"])((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*i["c"])/i["e"]}))}var o=a(0),s=a(1),u=a(2),c=a(3),l=a(4),f=a(5),d=a(6);o.range,s.range,u.range,c.range,l.range,f.range,d.range},b15c:function(t,e){const n="2.0.0",r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,a=16;t.exports={SEMVER_SPEC_VERSION:n,MAX_LENGTH:r,MAX_SAFE_INTEGER:i,MAX_SAFE_COMPONENT_LENGTH:a}},b170:function(t,e,n){"use strict";var r,i=n("a7fd"),a=function(t,e){return function(n,r){var i=n.length,a=[],o=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[o=(o+1)%t.length]}return a.reverse().join(e)}},o=function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}},s=n("09b8"),u=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(e+1):t},c=n("aa74"),l=function(t,e){var n=Object(c["b"])(t,e);if(!n)return t+"";var i=n[0],a=n[1],o=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Object(c["b"])(t,Math.max(0,e+o-1))[0]},f=function(t,e){var n=Object(c["b"])(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},d={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:c["a"],e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>f(100*t,e),r:f,s:l,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},h=function(t){return t},p=Array.prototype.map,m=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];e["a"]=function(t){var e=void 0===t.grouping||void 0===t.thousands?h:a(p.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",c=void 0===t.currency?"":t.currency[1]+"",l=void 0===t.decimal?".":t.decimal+"",f=void 0===t.numerals?h:o(p.call(t.numerals,String)),g=void 0===t.percent?"%":t.percent+"",b=void 0===t.minus?"":t.minus+"",y=void 0===t.nan?"NaN":t.nan+"";function v(t){t=Object(s["a"])(t);var i=t.fill,a=t.align,o=t.sign,h=t.symbol,p=t.zero,v=t.width,x=t.comma,w=t.precision,O=t.trim,_=t.type;"n"===_?(x=!0,_="g"):d[_]||(void 0===w&&(w=12),O=!0,_="g"),(p||"0"===i&&"="===a)&&(p=!0,i="0",a="=");var A="$"===h?n:"#"===h&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",j="$"===h?c:/[%p]/.test(_)?g:"",k=d[_],C=/[defgprs%]/.test(_);function E(t){var n,s,c,d=A,h=j;if("c"===_)h=k(t)+h,t="";else{t=+t;var g=t<0||1/t<0;if(t=isNaN(t)?y:k(Math.abs(t),w),O&&(t=u(t)),g&&0===+t&&"+"!==o&&(g=!1),d=(g?"("===o?o:b:"-"===o||"("===o?"":o)+d,h=("s"===_?m[8+r/3]:"")+h+(g&&"("===o?")":""),C){n=-1,s=t.length;while(++n<s)if(c=t.charCodeAt(n),48>c||c>57){h=(46===c?l+t.slice(n+1):t.slice(n))+h,t=t.slice(0,n);break}}}x&&!p&&(t=e(t,1/0));var E=d.length+t.length+h.length,S=E<v?new Array(v-E+1).join(i):"";switch(x&&p&&(t=e(S+t,S.length?v-h.length:1/0),S=""),a){case"<":t=d+t+h+S;break;case"=":t=d+S+t+h;break;case"^":t=S.slice(0,E=S.length>>1)+d+t+h+S.slice(E);break;default:t=S+d+t+h;break}return f(t)}return w=void 0===w?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),E.toString=function(){return t+""},E}function x(t,e){var n=v((t=Object(s["a"])(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Object(i["a"])(e)/3))),a=Math.pow(10,-r),o=m[8+r/3];return function(t){return n(a*t)+o}}return{format:v,formatPrefix:x}}},b20a:function(t,e,n){var r=n("6ac0"),i=n("4caa"),a=n("ea72"),o="[']",s=RegExp(o,"g");function u(t){return function(e){return r(a(i(e).replace(s,"")),t,"")}}t.exports=u},b21c:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(o["a"])(t,"a","lessEqual"),u=Object(o["a"])(e,"b","lessEqual");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(s["a"])(n.shape,u.shape);const c=(t,e)=>{const r=t.lessEqual(n,u);return e([n,u]),r},l={a:n,b:u};return r["a"].runKernelFunc(c,l,null,i["vb"])}const l=Object(u["b"])({lessEqual_:c})},b333:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return l}));
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r="tfjsflags";class i{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags||(this.flags[t]=await this.evaluateFlag(t)),this.flags[t]}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(e instanceof Promise)throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const t=a(this.global.location.search);if(r in t){const e=t[r].split(",");e.forEach(t=>{const[e,n]=t.split(":");this.urlFlags[e]=s(e,n)})}}}function a(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...n)=>(o(e,n[0],n[1]),n.join("="))),e}function o(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function s(t,e){if(e=e.toLowerCase(),"true"===e||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function u(){return c}let c=null;function l(t){c=t}},b39e:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","selu"),n=(t,n)=>{const r=t.selu(e);return n([e]),r},o={x:e};return r["a"].runKernelFunc(n,o,null,i["rc"])}const u=Object(o["b"])({selu_:s})},b3c3:function(t,e,n){"use strict";var r=n("18e2"),i=n("1738"),a=Object(r["a"])((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i["d"]-t.getMinutes()*i["c"])}),(function(t,e){t.setTime(+t+e*i["b"])}),(function(t,e){return(e-t)/i["b"]}),(function(t){return t.getHours()}));e["a"]=a;a.range},b4db:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n("7ad3")),o=n("1309"),s=n("8e47");function u(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=s.getDrawArea(t),i=e,u=Object.assign({},c,n);if(l.has(r)){const t=l.get(r);if(s.shallowEquals(u,t.lastOptions)){yield s.nextFrame();const e=t.view,n=e.changeset().remove(()=>!0).insert(i);return void(yield e.change("values",n).runAsync())}}const{xLabel:f,yLabel:d,xType:h,yType:p}=u;let m=null;null!=f&&(m={title:f});let g=null;null!=d&&(g={title:d});const b={actions:!1,mode:"vega-lite",defaultStyle:!1};let y;y=null!=u.color?Array.isArray(u.color)?{field:"index",type:"nominal",scale:{range:u.color}}:{value:u.color}:{value:"#4C78A0"};const v={width:u.width||o.getDefaultWidth(r),height:u.height||o.getDefaultHeight(r),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:u.fontSize,titleFontSize:u.fontSize},text:{fontSize:u.fontSize},legend:{labelFontSize:u.fontSize,titleFontSize:u.fontSize}},data:{values:i,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:h,axis:m},y:{field:"value",type:p,axis:g},color:y}};yield s.nextFrame();const x=yield a.default(r,v,b);l.set(r,{view:x.view,lastOptions:u})}))}e.barchart=u;const c={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},l=new Map},b500:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","reciprocal"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.reciprocal(e);return n([e]),r},n,null,i["dc"])}const u=Object(o["b"])({reciprocal_:s})},b575:function(t,e,n){var r,i,a,o,s,u,c,l,f=n("da84"),d=n("06cf").f,h=n("c6b6"),p=n("2cf4").set,m=n("1cdc"),g=f.MutationObserver||f.WebKitMutationObserver,b=f.process,y=f.Promise,v="process"==h(b),x=d(f,"queueMicrotask"),w=x&&x.value;w||(r=function(){var t,e;v&&(t=b.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?o():a=void 0,n}}a=void 0,t&&t.enter()},v?o=function(){b.nextTick(r)}:g&&!m?(s=!0,u=document.createTextNode(""),new g(r).observe(u,{characterData:!0}),o=function(){u.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),l=c.then,o=function(){l.call(c,r)}):o=function(){p.call(f,r)}),t.exports=w||function(t){var e={fn:t,next:void 0};a&&(a.next=e),i||(i=e,o()),a=e}},b5db:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){return null===t||void 0===t||!1===t||"object"===("undefined"===typeof t?"undefined":r(t))&&0===Object.keys(t).length}function a(t){if(i(t))return null;if("object"!==("undefined"===typeof t?"undefined":r(t)))return t;for(var e={},n=Object.keys(t),a=!1,o=0;o<n.length;o++){var u=t[n[o]],c=s(u);null!==c&&c===u||(a=!0),null!==c&&(e[n[o]]=c)}return 0===Object.keys(e).length?null:a?e:t}function o(t){var e=!1,n=[];return t.forEach((function(t){var r=s(t);null!==r&&r===t||(e=!0),null!==r&&n.push(r)})),0==n.length?null:e?n:t}function s(t){return Array.isArray(t)?o(t):a(t)}e.default=s},b61d:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n("eb7e"),i=n("0777"),a=n("649e"),o=n("24b0"),s=n("54ef"),u=n("d7b0"),c=n("35c9"),l=n("6d3c"),f=n("45bb"),d=n("5a2c"),h=n("a09b"),p=n("1ab7");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function m(t,e){Object(r["assert"])("float32"===t.dtype,()=>"The dtype for rfft() must be real value but got "+t.dtype);let n=t.shape[t.shape.length-1];const s=t.size/n;let m;if(null!=e&&e<n){const r=t.shape.map(t=>0),i=t.shape.map(t=>t);i[t.shape.length-1]=e,m=Object(l["a"])(t,r,i),n=e}else if(null!=e&&e>n){const r=t.shape.map(t=>t);r[t.shape.length-1]=e-n,m=Object(a["a"])([t,Object(d["a"])(r)],t.shape.length-1),n=e}else m=t;const g=Object(h["a"])(m),b=Object(c["a"])(Object(i["a"])(m,g),[s,n]),y=Object(p["a"])(b),v=Math.floor(n/2)+1,x=Object(u["a"])(y),w=Object(o["a"])(y),O=Object(f["a"])(x,[v,n-v],x.shape.length-1),_=Object(f["a"])(w,[v,n-v],w.shape.length-1),A=m.shape.slice();return A[m.shape.length-1]=v,Object(c["a"])(Object(i["a"])(O[0],_[0]),A)}const g=Object(s["b"])({rfft_:m})},b622:function(t,e,n){var r=n("da84"),i=n("5692"),a=n("5135"),o=n("90e3"),s=n("4930"),u=n("fdbf"),c=i("wks"),l=r.Symbol,f=u?l:l&&l.withoutSetter||o;t.exports=function(t){return a(c,t)||(s&&a(l,t)?c[t]=l[t]:c[t]=f("Symbol."+t)),c[t]}},b639:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),a=n("e3db");function o(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=c.prototype):(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?g(t,e,n,r):"string"===typeof e?p(t,e,n):b(t,e)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e,n,r){return f(e),e<=0?u(t,e):void 0!==n?"string"===typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}function h(t,e){if(f(e),t=u(t,e<0?0:0|y(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|x(e,n);t=u(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function m(t,e){var n=e.length<0?0:0|y(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function g(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=c.prototype):t=m(t,e),t}function b(t,e){if(c.isBuffer(e)){var n=0|y(e.length);return t=u(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?u(t,0):m(t,e);if("Buffer"===e.type&&a(e.data))return m(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),c.alloc(+t)}function x(t,e){if(c.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(t).length;default:if(r)return K(t).length;e=(""+e).toLowerCase(),r=!0}}function w(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return $(this,e,n);case"utf8":case"utf-8":return N(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return F(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function O(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:A(t,e,n,r,i);if("number"===typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):A(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function A(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(t,a)===c(e,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,d=0;d<u;d++)if(c(t,a+d)!==c(e,d)){f=!1;break}if(f)return a}return-1}function j(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function k(t,e,n,r){return tt(K(e,t.length-n),t,n,r)}function C(t,e,n,r){return tt(J(e),t,n,r)}function E(t,e,n,r){return C(t,e,n,r)}function S(t,e,n,r){return tt(Q(e),t,n,r)}function D(t,e,n,r){return tt(Z(e,t.length-n),t,n,r)}function F(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function N(t,e,n){n=Math.min(t.length,n);var r=[],i=e;while(i<n){var a,o,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:a=t[i+1],128===(192&a)&&(u=(31&c)<<6|63&a,u>127&&(l=u));break;case 3:a=t[i+1],o=t[i+2],128===(192&a)&&128===(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o,u>2047&&(u<55296||u>57343)&&(l=u));break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s,u>65535&&u<1114112&&(l=u))}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return M(r)}e.Buffer=c,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:o(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return d(null,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},c.byteLength=x,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)O(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)O(this,e,e+3),O(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)O(this,e,e+7),O(this,e+1,e+6),O(this,e+2,e+5),O(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?N(this,0,t):w.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,o=n-e,s=Math.min(a,o),u=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(u[f]!==l[f]){a=u[f],o=l[f];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return j(this,t,e,n);case"utf8":case"utf-8":return k(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return E(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function M(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function $(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=Y(t[a]);return i}function B(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function z(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,r,i,a){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function W(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function q(t,e,n,r,a){return a||W(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function V(t,e,n,r,a){return a||W(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var r=this[t],i=1,a=0;while(++a<e&&(i*=256))r+=this[t+a]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var r=this[t+--e],i=1;while(e>0&&(i*=256))r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||z(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||z(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||z(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||z(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var r=this[t],i=1,a=0;while(++a<e&&(i*=256))r+=this[t+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||z(t,e,this.length);var r=e,i=1,a=this[t+--r];while(r>0&&(i*=256))a+=this[t+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*e)),a},c.prototype.readInt8=function(t,e){return e||z(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||z(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||z(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||z(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||z(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||z(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||z(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,t,e,n,i,0)}var a=1,o=0;this[e]=255&t;while(++o<n&&(a*=256))this[e+o]=t/a&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,t,e,n,i,0)}var a=n-1,o=1;this[e+a]=255&t;while(--a>=0&&(o*=256))this[e+a]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;this[e]=255&t;while(++a<n&&(o*=256))t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;this[e+a]=255&t;while(--a>=0&&(o*=256))t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return q(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return q(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return V(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return V(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},c.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=c.isBuffer(t)?t:K(new c(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function H(t){if(t=X(t).replace(G,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function X(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function J(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Z(t,e){for(var n,r,i,a=[],o=0;o<t.length;++o){if((e-=2)<0)break;n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r)}return a}function Q(t){return r.toByteArray(H(t))}function tt(t,e,n,r){for(var i=0;i<r;++i){if(i+n>=e.length||i>=t.length)break;e[i+n]=t[i]}return i}function et(t){return t!==t}}).call(this,n("c8ba"))},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),a=n("df75"),o=n("d039"),s=o((function(){a(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return a(i(t))}})},b727:function(t,e,n){var r=n("0366"),i=n("44ad"),a=n("7b0b"),o=n("50c4"),s=n("65f0"),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,f=6==t,d=5==t||f;return function(h,p,m,g){for(var b,y,v=a(h),x=i(v),w=r(p,m,3),O=o(x.length),_=0,A=g||s,j=e?A(h,O):n?A(h,0):void 0;O>_;_++)if((d||_ in x)&&(b=x[_],y=w(b,_,v),t))if(e)j[_]=y;else if(y)switch(t){case 3:return!0;case 5:return b;case 6:return _;case 2:u.call(j,b)}else if(l)return!1;return f?-1:c||l?l:j}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},b7e4:function(t,e,n){"use strict";function r(t){return null!=t.name}function i(t){return t.drawArea instanceof HTMLElement}Object.defineProperty(e,"__esModule",{value:!0}),e.isSurfaceInfo=r,e.isSurface=i},b802:function(t,e,n){(function(e){const n="object"===typeof e&&Object({NODE_ENV:"production",BASE_URL:"/"})&&Object({NODE_ENV:"production",BASE_URL:"/"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",BASE_URL:"/"}).NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};t.exports=n}).call(this,n("4362"))},b805:function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(e,t,n);t.exports=i},b818:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return f})),n.d(e,"i",(function(){return y})),n.d(e,"h",(function(){return v})),n.d(e,"g",(function(){return x}));var r=n("eb7e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e,n,r,i="NHWC",a){const o=t[3],u=[...e,o],c=x(i);return s(t,u,n,a,r,null,null,c)}function a(t,e,n,r,i,a,o="channelsLast"){const[u,c]=d(e);let l;if("channelsLast"===o)l=[u,c,t[3],t[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);l=[u,c,t[1],t[1]]}return s(t,l,n,r,i,a,!1,o)}function o(t,e,n,r,i,a,o="NDHWC"){const[s,c,l]=h(e);let f,d;if("NDHWC"===o)d="channelsLast",f=[s,c,l,t[4],t[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);d="channelsFirst",f=[s,c,l,t[1],t[1]]}return u(t,f,n,r,i,!1,d,a)}function s(t,e,n,r,i,a,o=!1,s="channelsLast"){let[u,c,l,f]=[-1,-1,-1,-1];if("channelsLast"===s)[u,c,l,f]=t;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);[u,f,c,l]=t}const[h,g,,b]=e,[y,v]=d(n),[x,w]=d(r),O=p(h,x),_=p(g,w),{padInfo:A,outHeight:j,outWidth:k}=m(i,c,l,y,v,O,_,a,s),C=o?b*f:b;let E;return"channelsFirst"===s?E=[u,C,j,k]:"channelsLast"===s&&(E=[u,j,k,C]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:f,outHeight:j,outWidth:k,outChannels:C,padInfo:A,strideHeight:y,strideWidth:v,filterHeight:h,filterWidth:g,effectiveFilterHeight:O,effectiveFilterWidth:_,dilationHeight:x,dilationWidth:w,inShape:t,outShape:E,filterShape:e}}function u(t,e,n,r,i,a=!1,o="channelsLast",s){let[u,c,l,f,d]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[u,c,l,f,d]=t;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);[u,d,c,l,f]=t}const[m,b,y,,v]=e,[x,w,O]=h(n),[_,A,j]=h(r),k=p(m,_),C=p(b,A),E=p(y,j),{padInfo:S,outDepth:D,outHeight:F,outWidth:N}=g(i,c,l,f,x,w,O,k,C,E,s),T=a?v*d:v;let M;return"channelsFirst"===o?M=[u,T,D,F,N]:"channelsLast"===o&&(M=[u,D,F,N,T]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:f,inChannels:d,outDepth:D,outHeight:F,outWidth:N,outChannels:T,padInfo:S,strideDepth:x,strideHeight:w,strideWidth:O,filterDepth:m,filterHeight:b,filterWidth:y,effectiveFilterDepth:k,effectiveFilterHeight:C,effectiveFilterWidth:E,dilationDepth:_,dilationHeight:A,dilationWidth:j,inShape:t,outShape:M,filterShape:e}}function c(t,e,n,i,a){null==i&&(i=f(t,e,n));const o=t[0],s=t[1],u=b((o-e+2*i)/n+1,a);r["assert"](r["isInt"](u),()=>`The output # of rows (${u}) must be an integer. Change the stride and/or zero pad parameters`);const c=b((s-e+2*i)/n+1,a);return r["assert"](r["isInt"](c),()=>`The output # of columns (${c}) must be an integer. Change the stride and/or zero pad parameters`),[u,c]}function l(t,e,n,i,a,o){null==a&&(a=f(t,e,i));const s=t[0],u=t[1],c=t[2],l=b((s-e+2*a)/i+1,o);r["assert"](r["isInt"](l),()=>`The output # of depths (${l}) must be an integer. Change the stride and/or zero pad parameters`);const d=b((u-e+2*a)/i+1,o);r["assert"](r["isInt"](d),()=>`The output # of rows (${d}) must be an integer. Change the stride and/or zero pad parameters`);const h=b((c-e+2*a)/i+1,o);return r["assert"](r["isInt"](h),()=>`The output # of columns (${h}) must be an integer. Change the stride and/or zero pad parameters`),[l,d,h,n]}function f(t,e,n,r=1){const i=p(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function d(t){return"number"===typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function h(t){return"number"===typeof t?[t,t,t]:t}function p(t,e){return e<=1?t:t+(t-1)*(e-1)}function m(t,e,n,r,i,a,o,s,u){let l,f,d;if("number"===typeof t){const i=0===t?"VALID":"NUMBER";l={top:t,bottom:t,left:t,right:t,type:i};const o=c([e,n],a,r,t,s);f=o[0],d=o[1]}else if("same"===t){f=Math.ceil(e/r),d=Math.ceil(n/i);const t=Math.max(0,(f-1)*r+a-e),s=Math.max(0,(d-1)*i+o-n),u=Math.floor(t/2),c=t-u,h=Math.floor(s/2),p=s-h;l={top:u,bottom:c,left:h,right:p,type:"SAME"}}else if("valid"===t)l={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((e-a+1)/r),d=Math.ceil((n-o+1)/i);else{if("object"!==typeof t)throw Error("Unknown padding parameter: "+t);{const c="channelsLast"===u?t[1][0]:t[2][0],h="channelsLast"===u?t[1][1]:t[2][1],p="channelsLast"===u?t[2][0]:t[3][0],m="channelsLast"===u?t[2][1]:t[3][1],g=0===c&&0===h&&0===p&&0===m?"VALID":"EXPLICIT";l={top:c,bottom:h,left:p,right:m,type:g},f=b((e-a+c+h)/r+1,s),d=b((n-o+p+m)/i+1,s)}}return{padInfo:l,outHeight:f,outWidth:d}}function g(t,e,n,r,i,a,o,s,u,c,f){let d,h,p,m;if("number"===typeof t){const a=0===t?"VALID":"NUMBER";d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:a};const o=l([e,n,r,1],s,1,i,t,f);h=o[0],p=o[1],m=o[2]}else if("same"===t){h=Math.ceil(e/i),p=Math.ceil(n/a),m=Math.ceil(r/o);const t=(h-1)*i+s-e,l=(p-1)*a+u-n,f=(m-1)*o+c-r,g=Math.floor(t/2),b=t-g,y=Math.floor(l/2),v=l-y,x=Math.floor(f/2),w=f-x;d={top:y,bottom:v,left:x,right:w,front:g,back:b,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((e-s+1)/i),p=Math.ceil((n-u+1)/a),m=Math.ceil((r-c+1)/o)}return{padInfo:d,outDepth:h,outHeight:p,outWidth:m}}function b(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function y(t){const[e,n,r]=d(t);return 1===e&&1===n&&1===r}function v(t,e){return y(t)||y(e)}function x(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}},b838:function(t,e,n){(function(t){var r;(function(t,i,a){function o(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xor128=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},b86c:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=N;var r=n("7b9e"),i=S(r),a=n("7638"),o=S(a),s=n("3e9f"),u=S(s),c=n("8689"),l=S(c),f=n("aaf9"),d=S(f),h=n("ed91"),p=S(h),m=n("f5ea"),g=S(m),b=n("cada"),y=S(b),v=n("e9fa"),x=S(v),w=n("d8a1"),O=S(w),_=n("840c"),A=S(_),j=n("b953"),k=S(j),C=n("734c"),E=S(C);function S(t){return t&&t.__esModule?t:{default:t}}var D=[d.default,l.default,p.default,y.default,x.default,O.default,A.default,k.default,E.default,g.default],F=i.default.prefixMap;function N(t){for(var e in t){var n=t[e],r=(0,u.default)(D,e,n,t,F);r&&(t[e]=r),(0,o.default)(F,e,t)}return t}},b953:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=["-webkit-","-moz-",""],i={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},a={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function o(t,e){if(i.hasOwnProperty(t)&&a.hasOwnProperty(e))return r.map((function(t){return t+e}))}t.exports=e["default"]},b9b9:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(o["a"])(t,"a","equal"),u=Object(o["a"])(e,"b","equal");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(s["a"])(n.shape,u.shape);const c=t=>t.equal(n,u),l={a:n,b:u};return r["a"].runKernelFunc(c,l,null,i["V"])}const l=Object(u["b"])({equal_:c})},ba40:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e){const n=Object(a["a"])(e,"indices","gatherND","int32"),o=Object(a["a"])(t,"x","gatherND"),s=t=>t.gatherND(o,n),u={params:o,indices:n};return r["a"].runKernelFunc(s,u,null,i["ib"])}const u=Object(o["b"])({gatherND_:s})},ba53:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("6ae2"),i=n("c04e"),a=n("c05b"),o=n("a3f7"),s=n("eb7e"),u=n("deb3"),c=n("b818"),l=n("54ef"),f=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function d(t,e,n,l,d,h="NDHWC",p){null==p?p=[1,1,1]:Object(i["b"])("dilations is deprecated, this field will be gone in v3.0.0.");const m=Object(o["a"])(t,"x","avgPool3d","float32");let g=m,b=!1;4===m.rank&&(b=!0,g=Object(f["a"])(m,[1,m.shape[0],m.shape[1],m.shape[2],m.shape[3]])),s["assert"](5===g.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${g.rank}.`),s["assert"]("NDHWC"===h,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+h),s["assert"](c["h"](n,p),()=>`Error in avgPool3d: Either strides or dilations must be 1. Got strides ${n} and dilations '${p}'`),null!=d&&s["assert"](s["isInt"](l),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${d} but got pad ${l}.`);const y=(t,r)=>{null==p&&(p=[1,1,1]);const i=c["f"](g.shape,e,n,p,l,d,h);return r([g]),t.avgPool3d(g,i)},v={x:g},x={filterSize:e,strides:n,pad:l,dimRoundingMode:d,dataFormat:h,dilations:p};let w=r["a"].runKernelFunc(y,v,null,a["p"],x);return w=Object(u["a"])(w,g.dtype),b?Object(f["a"])(w,[w.shape[1],w.shape[2],w.shape[3],w.shape[4]]):w}const h=Object(l["b"])({avgPool3d_:d})},bac4:function(t,e,n){const r=n("3034"),i=(t,e,n)=>r(t,e,n)>0;t.exports=i},bb2d:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(o["a"])(t,"a","greaterEqual"),u=Object(o["a"])(e,"b","greaterEqual");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(s["a"])(n.shape,u.shape);const c=(t,e)=>{const r=t.greaterEqual(n,u);return e([n,u]),r},l={a:n,b:u};return r["a"].runKernelFunc(c,l,null,i["lb"])}const l=Object(u["b"])({greaterEqual_:c})},bba4:function(t,e,n){var r=n("e9a7"),i=n("b20a"),a=i((function(t,e,n){return e=e.toLowerCase(),t+(n?r(e):e)}));t.exports=a},bbfd:function(t,e,n){const r=n("b802"),{MAX_LENGTH:i,MAX_SAFE_INTEGER:a}=n("b15c"),{re:o,t:s}=n("8cb5"),{compareIdentifiers:u}=n("2cdf");class c{constructor(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof c){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!==typeof t)throw new TypeError("Invalid Version: "+t);if(t.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?o[s.LOOSE]:o[s.FULL]);if(!n)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<a)return e}return t}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(t){if(r("SemVer.compare",this.version,this.options,t),!(t instanceof c)){if("string"===typeof t&&t===this.version)return 0;t=new c(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof c||(t=new c(t,this.options)),u(this.major,t.major)||u(this.minor,t.minor)||u(this.patch,t.patch)}comparePre(t){if(t instanceof c||(t=new c(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],i=t.prerelease[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++e)}compareBuild(t){t instanceof c||(t=new c(t,this.options));let e=0;do{const n=this.build[e],i=t.build[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++e)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let t=this.prerelease.length;while(--t>=0)"number"===typeof this.prerelease[t]&&(this.prerelease[t]++,t=-2);-1===t&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this}}t.exports=c},bc62:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b");function a(t,e,n,r){if("int32"!==t.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const i=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);const o=e.size;if(0!==e.rank&&(1!==e.rank||o!==i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n,s=0){const u=Object(o["a"])(t,"sparseIndices","sparseToDense","int32"),c=Object(o["a"])(e,"sparseValues","sparseToDense"),l=Object(o["a"])(s,"defaultValue","sparseToDense",c.dtype);a(u,c,n,l);const f={sparseIndices:u,sparseValues:c,defaultValue:l},d={outputShape:n};return r["a"].runKernelFunc(t=>t.sparseToDense(u,c,n,l),f,null,i["Ac"],d)}const c=Object(s["b"])({sparseToDense_:u})},bd67:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(n("ce1a")),s=a(n("7ad3")),u=n("1309"),c=n("6180"),l=n("8e47");function f(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=Object.assign({},p,n),i=l.getDrawArea(t);let a=e.values;r.rowMajor&&(a=yield d(e.values));const{xTickLabels:f,yTickLabels:m}=e;if(null!=f){const t=0;h(a,f,t)}if(null!=m){const t=1;h(a,m,t)}const g="@tfidx@",b=[];if(a instanceof o.Tensor){c.assert(2===a.rank,"Input to renderHeatmap must be a 2d array or Tensor2d");const t=yield a.data(),[e,n]=a.shape;for(let r=0;r<e;r++){const e=f?`${f[r]}${g}${r}`:r;for(let i=0;i<n;i++){const a=m?`${m[i]}${g}${i}`:i,o=r*n+i,s=t[o];b.push({x:e,y:a,value:s})}}}else{const t=a;for(let e=0;e<t.length;e++){const n=f?`${f[e]}${g}${e}`:e;for(let r=0;r<t[e].length;r++){const i=m?`${m[r]}${g}${r}`:r,a=t[e][r];b.push({x:n,y:i,value:a})}}}const y={actions:!1,mode:"vega-lite",defaultStyle:!1},v={width:r.width||u.getDefaultWidth(i),height:r.height||u.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:b},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:r.xType,title:r.xLabel,sort:"x"},y:{field:"y",type:r.yType,title:r.yLabel,sort:"y"},fill:{field:"value",type:"quantitative"}}},x=g+"\\d+$",w=new RegExp(x);let O;switch(f&&(v.encoding.x.axis={labelExpr:`replace(datum.value, regexp(/${x}/), '')`}),m&&(v.encoding.y.axis={labelExpr:`replace(datum.value, regexp(/${x}/), '')`}),(f||m)&&(y.tooltip={sanitize:t=>{const e=String(t);return e.replace(w,"")}}),r.colorMap){case"blues":O=["#f7fbff","#4292c6"];break;case"greyscale":O=["#000000","#ffffff"];break;case"viridis":default:O="viridis";break}if("viridis"!==O){const t=v.encoding.fill;t.scale={range:O}}if(r.domain){const t=v.encoding.fill;null!=t.scale?t.scale=Object.assign({},t.scale,{domain:r.domain}):t.scale={domain:r.domain}}yield s.default(i,v,y)}))}function d(t){return r(this,void 0,void 0,(function*(){let e,n;t instanceof o.Tensor?(e=t.shape,n=t.transpose()):(e=[t.length,t[0].length],n=o.tidy(()=>o.tensor2d(t).transpose())),c.assert(2===n.rank,"Input to renderHeatmap must be a 2d array or Tensor2d");const r=yield n.array();n.dispose();const i=[r.length,r[0].length];return c.assert(e[0]===i[1]&&e[1]===i[0],`Unexpected transposed shape. Original ${e} : Transposed ${i}`),r}))}function h(t,e,n){const r=t instanceof o.Tensor?t.shape:[t.length,t[0].length];0===n?c.assert(r[0]===e.length,`Length of xTickLabels (${e.length}) must match number of rows (${r[0]})`):1===n&&c.assert(r[1]===e.length,`Length of yTickLabels (${e.length}) must match number of columns (${r[1]})`)}e.heatmap=f;const p={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}},bdcf:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"f",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return f}));var r=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function i(t,e){return a(t,e)}function a(t,e,n=new Map,r=new Set){if(null==t)return null;if(r.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);const i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(l(t)){const i=Array.isArray(t)?[]:{};r.add(t);for(const o in t){const s=t[o],u=a(s,e,n,r);i[o]=u}return r.delete(t),i}throw new Error("Can't recurse into non-iterable type: "+t)}return n.set(t,i.value),i.value}function o(t,e=u){return s(t,e)}function s(t,e,n=new Set){const r=t[0];if(n.has(r))throw new Error("Circular references are not supported.");const i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(l(r)){const i=Array.isArray(r)?[]:{};n.add(r);for(const a in r){const r=t.map(t=>t[a]),o=s(r,e,n);i[a]=o}return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: "+r)}return i.value}function u(t){return null===t?null:l(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}async function c(t,e){const n=new Map;a(t,e,n);for(const i of Array.from(n.keys())){const t=n.get(i);if(t instanceof Promise){const e=await t;n.set(i,e)}}const r=a(t,e,n);return r}function l(t){return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"===typeof t&&!(t instanceof r["ad"]))}function f(t){return null==t||d(t)||Array.isArray(t)||"object"===typeof t&&t instanceof r["ad"]||r["fi"].isTypedArray(t)}function d(t){return null===t||"object"!==typeof t&&"function"!==typeof t}},bf6d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.PluginSet=f,e.fallbacks=d,e.contentWrap=p,e.prefixes=m;var i=n("320c"),a=c(i),o=n("9ac2"),s=n("b86c"),u=c(s);function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){return"development"===t||!t}("production");function f(t){this.fns=t||[]}function d(t){var e=Object.keys(t.style).map((function(e){return Array.isArray(t.style[e])})).indexOf(!0)>=0;if(e){var n=t.style,r=Object.keys(n).reduce((function(t,e){return t[e]=Array.isArray(n[e])?n[e].join("; "+(0,o.processStyleName)(e)+": "):n[e],t}),{});return(0,a.default)({},t,{style:r})}return t}(0,a.default)(f.prototype,{add:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){t.fns.indexOf(e)>=0?l&&console.warn("adding the same plugin again, ignoring"):t.fns=[e].concat(t.fns)}))},remove:function(t){this.fns=this.fns.filter((function(e){return e!==t}))},clear:function(){this.fns=[]},transform:function(t){return this.fns.reduce((function(t,e){return e(t)}),t)}});var h=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"];function p(t){if(t.style.content){var e=t.style.content;return h.indexOf(e)>=0||/^(attr|calc|counters?|url)\(/.test(e)?t:e.charAt(0)!==e.charAt(e.length-1)||'"'!==e.charAt(0)&&"'"!==e.charAt(0)?r({},t,{style:r({},t.style,{content:'"'+e+'"'})}):t}return t}function m(t){return(0,a.default)({},t,{style:(0,u.default)(r({},t.style))})}},c021:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("36e5"),u=n("54ef"),c=n("35c9"),l=n("c912");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t,e=null,n=!1){const u=Object(a["a"])(t,"x","max"),f=(t,r)=>{const i=o["parseAxisParam"](e,u.shape);let a=i;const f=s["f"](a,u.rank);let d=u;null!=f&&(d=Object(l["a"])(u,f),a=s["g"](a.length,d.rank));const h=t.max(d,a);null!=f&&d.dispose();let p=h;if(n){const t=s["e"](p.shape,o["parseAxisParam"](e,u.shape));p=Object(c["a"])(p,t),h.dispose()}return r([u,p]),p},d={x:u},h={reductionIndices:e,keepDims:n};return r["a"].runKernelFunc(f,d,null,i["Db"],h)}const d=Object(u["b"])({max_:f})},c04e:function(t,e,n){"use strict";n.d(e,"g",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"m",(function(){return h})),n.d(e,"n",(function(){return p})),n.d(e,"t",(function(){return m})),n.d(e,"d",(function(){return g})),n.d(e,"l",(function(){return b})),n.d(e,"u",(function(){return y})),n.d(e,"r",(function(){return v})),n.d(e,"o",(function(){return x})),n.d(e,"k",(function(){return w})),n.d(e,"q",(function(){return O})),n.d(e,"i",(function(){return _})),n.d(e,"j",(function(){return A})),n.d(e,"p",(function(){return j})),n.d(e,"a",(function(){return k})),n.d(e,"s",(function(){return C}));var r=n("6ae2"),i=n("b333"),a=n("34d7"),o=n("76c2");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(){Object(i["c"])().set("PROD",!0)}function u(){Object(i["c"])().set("DEBUG",!0)}function c(){Object(i["c"])().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(t){Object(i["c"])().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function f(){r["a"].disposeVariables()}function d(){return r["a"]}function h(){return r["a"].memory()}function p(t){return r["a"].profile(t)}function m(t,e){return r["a"].tidy(t,e)}function g(t){const e=Object(o["getTensorsInContainer"])(t);e.forEach(t=>t.dispose())}function b(t){return r["a"].keep(t)}function y(t){return r["a"].time(t)}function v(t){return r["a"].setBackend(t)}function x(){return r["a"].ready()}function w(){return r["a"].backendName}function O(t){r["a"].removeBackend(t)}function _(t){return r["a"].findBackend(t)}function A(t){return r["a"].findBackendFactory(t)}function j(t,e,n=1){return r["a"].registerBackend(t,e,n)}function k(){return r["a"].backend}function C(t,e){Object(i["c"])().setPlatform(t,e)}Object(a["d"])(l)},c04ea:function(t,e,n){var r=n("861d");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c05b:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return f})),n.d(e,"j",(function(){return d})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return p})),n.d(e,"n",(function(){return m})),n.d(e,"m",(function(){return g})),n.d(e,"o",(function(){return b})),n.d(e,"r",(function(){return y})),n.d(e,"p",(function(){return v})),n.d(e,"q",(function(){return x})),n.d(e,"s",(function(){return w})),n.d(e,"t",(function(){return O})),n.d(e,"u",(function(){return _})),n.d(e,"v",(function(){return A})),n.d(e,"w",(function(){return j})),n.d(e,"x",(function(){return k})),n.d(e,"y",(function(){return C})),n.d(e,"z",(function(){return E})),n.d(e,"A",(function(){return S})),n.d(e,"B",(function(){return D})),n.d(e,"C",(function(){return F})),n.d(e,"D",(function(){return N})),n.d(e,"E",(function(){return T})),n.d(e,"F",(function(){return M})),n.d(e,"G",(function(){return I})),n.d(e,"H",(function(){return R})),n.d(e,"J",(function(){return $})),n.d(e,"I",(function(){return B})),n.d(e,"K",(function(){return z})),n.d(e,"L",(function(){return L})),n.d(e,"M",(function(){return P})),n.d(e,"N",(function(){return U})),n.d(e,"O",(function(){return W})),n.d(e,"P",(function(){return q})),n.d(e,"R",(function(){return V})),n.d(e,"Q",(function(){return G})),n.d(e,"S",(function(){return H})),n.d(e,"T",(function(){return X})),n.d(e,"U",(function(){return Y})),n.d(e,"W",(function(){return K})),n.d(e,"V",(function(){return J})),n.d(e,"X",(function(){return Z})),n.d(e,"Y",(function(){return Q})),n.d(e,"Z",(function(){return tt})),n.d(e,"ab",(function(){return et})),n.d(e,"bb",(function(){return nt})),n.d(e,"cb",(function(){return rt})),n.d(e,"db",(function(){return it})),n.d(e,"fb",(function(){return at})),n.d(e,"jb",(function(){return ot})),n.d(e,"ib",(function(){return st})),n.d(e,"kb",(function(){return ut})),n.d(e,"lb",(function(){return ct})),n.d(e,"nb",(function(){return lt})),n.d(e,"mb",(function(){return ft})),n.d(e,"ob",(function(){return dt})),n.d(e,"pb",(function(){return ht})),n.d(e,"qb",(function(){return pt})),n.d(e,"rb",(function(){return mt})),n.d(e,"ub",(function(){return gt})),n.d(e,"vb",(function(){return bt})),n.d(e,"wb",(function(){return yt})),n.d(e,"xb",(function(){return vt})),n.d(e,"yb",(function(){return xt})),n.d(e,"Ab",(function(){return wt})),n.d(e,"Bb",(function(){return Ot})),n.d(e,"Cb",(function(){return _t})),n.d(e,"zb",(function(){return At})),n.d(e,"sb",(function(){return jt})),n.d(e,"tb",(function(){return kt})),n.d(e,"Db",(function(){return Ct})),n.d(e,"Jb",(function(){return Et})),n.d(e,"Eb",(function(){return St})),n.d(e,"Hb",(function(){return Dt})),n.d(e,"Fb",(function(){return Ft})),n.d(e,"Gb",(function(){return Nt})),n.d(e,"Ib",(function(){return Tt})),n.d(e,"Kb",(function(){return Mt})),n.d(e,"Lb",(function(){return It})),n.d(e,"Mb",(function(){return Rt})),n.d(e,"Nb",(function(){return $t})),n.d(e,"Ob",(function(){return Bt})),n.d(e,"Pb",(function(){return zt})),n.d(e,"Tb",(function(){return Lt})),n.d(e,"Qb",(function(){return Pt})),n.d(e,"Rb",(function(){return Ut})),n.d(e,"Sb",(function(){return Wt})),n.d(e,"Vb",(function(){return qt})),n.d(e,"Ub",(function(){return Vt})),n.d(e,"Wb",(function(){return Gt})),n.d(e,"Xb",(function(){return Ht})),n.d(e,"Yb",(function(){return Xt})),n.d(e,"Zb",(function(){return Yt})),n.d(e,"ac",(function(){return Kt})),n.d(e,"bc",(function(){return Jt})),n.d(e,"cc",(function(){return Zt})),n.d(e,"dc",(function(){return Qt})),n.d(e,"ec",(function(){return te})),n.d(e,"gc",(function(){return ee})),n.d(e,"jc",(function(){return ne})),n.d(e,"kc",(function(){return re})),n.d(e,"hc",(function(){return ie})),n.d(e,"ic",(function(){return ae})),n.d(e,"fc",(function(){return oe})),n.d(e,"lc",(function(){return se})),n.d(e,"nc",(function(){return ue})),n.d(e,"oc",(function(){return ce})),n.d(e,"pc",(function(){return le})),n.d(e,"qc",(function(){return fe})),n.d(e,"rc",(function(){return de})),n.d(e,"wc",(function(){return he})),n.d(e,"uc",(function(){return pe})),n.d(e,"vc",(function(){return me})),n.d(e,"tc",(function(){return ge})),n.d(e,"sc",(function(){return be})),n.d(e,"yc",(function(){return ye})),n.d(e,"Cc",(function(){return ve})),n.d(e,"Ic",(function(){return xe})),n.d(e,"zc",(function(){return we})),n.d(e,"Bc",(function(){return Oe})),n.d(e,"xc",(function(){return _e})),n.d(e,"Ec",(function(){return Ae})),n.d(e,"Dc",(function(){return je})),n.d(e,"Hc",(function(){return ke})),n.d(e,"Ac",(function(){return Ce})),n.d(e,"Gc",(function(){return Ee})),n.d(e,"Jc",(function(){return Se})),n.d(e,"Kc",(function(){return De})),n.d(e,"Lc",(function(){return Fe})),n.d(e,"Mc",(function(){return Ne})),n.d(e,"Nc",(function(){return Te})),n.d(e,"Oc",(function(){return Me})),n.d(e,"Pc",(function(){return Ie})),n.d(e,"Qc",(function(){return Re})),n.d(e,"Rc",(function(){return $e})),n.d(e,"Fc",(function(){return Be})),n.d(e,"eb",(function(){return ze})),n.d(e,"mc",(function(){return Le})),n.d(e,"Sc",(function(){return Pe})),n.d(e,"gb",(function(){return Ue})),n.d(e,"hb",(function(){return We}));const r="Abs",i="Acos",a="Acosh",o="Add",s="AddN",u="All",c="Any",l="ArgMax",f="ArgMin",d="Asin",h="Asinh",p="Atan",m="Atanh",g="Atan2",b="AvgPool",y="AvgPoolBackprop",v="AvgPool3D",x="AvgPool3DBackprop",w="BatchMatMul",O="BatchToSpaceND",_="BroadcastTo",A="Cast",j="Ceil",k="ClipByValue",C="Complex",E="Concat",S="Conv2D",D="Conv2DBackpropFilter",F="Conv2DBackpropInput",N="Conv3D",T="Conv3DBackpropFilterV2",M="Conv3DBackpropInputV2",I="Cos",R="Cosh",$="Cumsum",B="CropAndResize",z="DepthToSpace",L="DepthwiseConv2dNative",P="DepthwiseConv2dNativeBackpropFilter",U="DepthwiseConv2dNativeBackpropInput",W="Diag",q="Dilation2D",V="Dilation2DBackpropInput",G="Dilation2DBackpropFilter",H="Div",X="Elu",Y="EluGrad",K="Erf",J="Equal",Z="Exp",Q="Expm1",tt="FFT",et="Fill",nt="FlipLeftRight",rt="Floor",it="FloorDiv",at="FusedBatchNorm",ot="GatherV2",st="GatherNd",ut="Greater",ct="GreaterEqual",lt="Identity",ft="IFFT",dt="Imag",ht="IsFinite",pt="IsInf",mt="IsNan",gt="Less",bt="LessEqual",yt="LinSpace",vt="Log",xt="Log1p",wt="LogicalAnd",Ot="LogicalNot",_t="LogicalOr",At="LogSoftmax",jt="LRN",kt="LRNBackprop",Ct="Max",Et="Maximum",St="MaxPool",Dt="MaxPoolBackprop",Ft="MaxPool3D",Nt="MaxPool3DBackprop",Tt="MaxPoolWithArgmax",Mt="Mean",It="Min",Rt="Minimum",$t="Mod",Bt="Multiply",zt="Negate",Lt="NotEqual",Pt="NonMaxSuppressionV3",Ut="NonMaxSuppressionV4",Wt="NonMaxSuppressionV5",qt="OnesLike",Vt="OneHot",Gt="PadV2",Ht="Pool",Xt="Pow",Yt="Prelu",Kt="Prod",Jt="Range",Zt="Real",Qt="Reciprocal",te="Relu",ee="Reshape",ne="ResizeNearestNeighbor",re="ResizeNearestNeighborGrad",ie="ResizeBilinear",ae="ResizeBilinearGrad",oe="Relu6",se="Reverse",ue="Round",ce="Rsqrt",le="ScatterNd",fe="SelectV2",de="Selu",he="Slice",pe="Sin",me="Sinh",ge="Sign",be="Sigmoid",ye="Softplus",ve="Sqrt",xe="Sum",we="SpaceToBatchND",Oe="SplitV",_e="Softmax",Ae="SquaredDifference",je="Square",ke="Sub",Ce="SparseToDense",Ee="StridedSlice",Se="Tan",De="Tanh",Fe="Tile",Ne="TopK",Te="Transpose",Me="Unique",Ie="Unpack",Re="UnsortedSegmentSum",$e="ZerosLike",Be="Step",ze="FromPixels",Le="RotateWithOffset",Pe="_FusedMatMul",Ue="FusedConv2D",We="FusedDepthwiseConv2D"},c08f:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n){const s=Object(a["a"])(t,"x","clipByValue");o["assert"](e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`);const u={x:s},c={clipValueMin:e,clipValueMax:n};return r["a"].runKernelFunc((t,r)=>{const i=t.clip(s,e,n);return r([s]),i},u,null,i["x"],c)}const c=Object(s["b"])({clipByValue_:u})},c092:function(t,e,n){"use strict";n.d(e,"a",(function(){return D})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return O})),n.d(e,"d",(function(){return F})),n.d(e,"e",(function(){return C}));var r=n("eecb"),i=n("09b8"),a=n("d933"),o=n("d989"),s=n("dad1"),u=n("1231"),c=n("b170"),l=n("de28"),f=n("fc17"),d=n("4c23"),h=n("a591");function p(t){const e={};return n=>e[n]||(e[n]=t(n))}function m(t,e){return n=>{const r=t(n),i=r.indexOf(e);if(i<0)return r;let a=g(r,i);const o=a<r.length?r.slice(a):"";while(--a>i)if("0"!==r[a]){++a;break}return r.slice(0,a)+o}}function g(t,e){let n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if(n=t.charCodeAt(r),n>=48&&n<=57)return r+1}function b(t){const e=p(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(t){const n=Object(i["a"])(t||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1;break}return m(e(n),e(".1f")(1)[1])}return e(n)},formatSpan(t,u,c,l){l=Object(i["a"])(null==l?",f":l);const f=Object(r["c"])(t,u,c),d=Math.max(Math.abs(t),Math.abs(u));let h;if(null==l.precision)switch(l.type){case"s":return isNaN(h=Object(a["a"])(f,d))||(l.precision=h),n(l,d);case"":case"e":case"g":case"p":case"r":isNaN(h=Object(o["a"])(f,d))||(l.precision=h-("e"===l.type));break;case"f":case"%":isNaN(h=Object(s["a"])(f))||(l.precision=h-2*("%"===l.type));break}return e(l)}}}let y,v;function x(){return y=b({format:u["a"],formatPrefix:u["b"]})}function w(t){return b(Object(c["a"])(t))}function O(t){return arguments.length?y=w(t):y}function _(t,e,n){n=n||{},Object(f["D"])(n)||Object(f["k"])("Invalid time multi-format specifier: ".concat(n));const r=e(l["i"]),i=e(l["f"]),a=e(l["d"]),o=e(l["a"]),s=e(l["k"]),u=e(l["g"]),c=e(l["h"]),d=e(l["l"]),h=t(n[l["e"]]||".%L"),p=t(n[l["i"]]||":%S"),m=t(n[l["f"]]||"%I:%M"),g=t(n[l["d"]]||"%I %p"),b=t(n[l["a"]]||n[l["b"]]||"%a %d"),y=t(n[l["k"]]||"%b %d"),v=t(n[l["g"]]||"%B"),x=t(n[l["h"]]||"%B"),w=t(n[l["l"]]||"%Y");return t=>(r(t)<t?h:i(t)<t?p:a(t)<t?m:o(t)<t?g:u(t)<t?s(t)<t?b:y:d(t)<t?c(t)<t?v:x:w)(t)}function A(t){const e=p(t.format),n=p(t.utcFormat);return{timeFormat:t=>Object(f["F"])(t)?e(t):_(e,l["p"],t),utcFormat:t=>Object(f["F"])(t)?n(t):_(n,l["v"],t),timeParse:p(t.parse),utcParse:p(t.utcParse)}}function j(){return v=A({format:d["a"],parse:d["b"],utcFormat:d["c"],utcParse:d["d"]})}function k(t){return A(Object(h["a"])(t))}function C(t){return arguments.length?v=k(t):v}x(),j();const E=(t,e)=>Object(f["l"])({},t,e);function S(t,e){const n=t?w(t):O(),r=e?k(e):C();return E(n,r)}function D(t,e){const n=arguments.length;return n&&2!==n&&Object(f["k"])("defaultLocale expects either zero or two arguments."),n?E(O(t),C(e)):E(O(),C())}function F(){return x(),j(),D()}},c170:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e,n,s,c=[1,1],l="NHWC"){const f=Object(a["a"])(t,"x","dilation2d"),d=Object(a["a"])(e,"filter","dilation2d");o["assert"](3===f.rank||4===f.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+f.rank+"."),o["assert"](3===d.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+d.rank+"."),o["assert"]("NHWC"===l,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+l);let h=f,p=!1;3===f.rank&&(h=Object(u["a"])(f,[1,f.shape[0],f.shape[1],f.shape[2]]),p=!0);const m={x:h,filter:d},g={strides:n,pad:s,dilations:c},b=r["a"].runKernel(i["P"],m,g);return p?Object(u["a"])(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const l=Object(s["b"])({dilation2d_:c})},c1a2:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","cosh"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.cosh(e);return n([e]),r},n,null,i["H"])}const u=Object(o["b"])({cosh_:s})},c22a:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("6ae2"),i=n("eb7e"),a=n("0777"),o=n("5a2c");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e="float32"){if("complex64"===e){const e=s(t,"float32"),n=Object(o["a"])(t,"float32");return Object(a["a"])(e,n)}const n=Object(i["makeOnesTypedArray"])(Object(i["sizeFromShape"])(t),e);return r["a"].makeTensor(n,t,e)}},c2d5:function(t,e,n){const r=n("bbfd"),i=(t,e)=>new r(t,e).minor;t.exports=i},c314:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("538e"),i=n("a3f7"),a=n("a5aa"),o=n("3bb7"),s=n("54ef"),u=n("ffb3"),c=n("9ffd");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t){const e=Object(i["a"])(t,"x","logSigmoid"),n=Object(r["a"])(t=>{const e=Object(o["a"])(Object(c["a"])(Object(o["a"])(t))),n=e=>{const n=Object(a["a"])(e,Object(u["a"])(Object(o["a"])(t)));return n};return{value:e,gradFunc:n}});return n(e)}const f=Object(s["b"])({logSigmoid_:l})},c32f:function(t,e,n){var r=n("2b10");function i(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}t.exports=i},c388:function(t,e,n){"use strict";n.d(e,"f",(function(){return f})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return h})),n.d(e,"g",(function(){return p})),n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return r}));var r,i=n("fa11"),a=n("6125"),o=n("bdcf");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
function s(t){return Object(o["b"])(t,u)}function u(t){return t instanceof i["ad"]?{value:t.clone(),recurse:!1}:Object(o["e"])(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class c{constructor(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}wrap(t){while(t<0)t+=this.doubledCapacity;return t%this.doubledCapacity}get(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}set(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e}length(){let t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}pushAll(t){for(const e of t)this.push(e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const t=this.get(this.end);return this.set(this.end,void 0),t}unshift(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}shuffleExcise(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class l extends c{constructor(){super(l.INITIAL_CAPACITY)}isFull(){return!1}push(t){super.isFull()&&this.expand(),super.push(t)}unshift(t){super.isFull()&&this.expand(),super.unshift(t)}expand(){const t=2*this.capacity,e=new Array(t),n=this.length();for(let r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
function f(t){return new g(t)}function d(t){return new b(t)}function h(t,e){return new E(t,e)}function p(t,e=r.FAIL){return new S(t,e)}l.INITIAL_CAPACITY=32;class m{async toArray(){const t=[];let e=await this.next();while(!e.done)t.push(e.value),e=await this.next();return t}async toArrayForTest(){const t=this.prefetch(100),e=[];let n=await t.next();while(!n.done)e.push(n.value),n=await t.next();return e}async resolveFully(){let t=await this.next();while(!t.done)t=await this.next()}async resolveWhile(t){let e=await this.next(),n=t(e.value);while(!e.done&&n)e=await this.next(),n=t(e.value)}handleErrors(t){return new A(this,t)}filter(t){return new O(this,t)}map(t){return new _(this,t)}mapAsync(t){return new j(this,t)}serialMapAsync(t){return new j(this,t).serial()}flatmap(t){return new C(this,t)}async forEachAsync(t){return this.map(t).resolveFully()}async serialForEach(t){return this.serialMapAsync(t).resolveWhile(t=>!0===t)}rowMajorBatch(t,e=!0){return new w(this,t,e)}columnMajorBatch(t,e=!0,n=o["f"]){const r=this.rowMajorBatch(t,e);return r.map(t=>Object(o["d"])(t,n))}concatenate(t,e){return new E(f([this,t]),e)}take(t){return t<0||null==t?this:new x(this,t)}skip(t){return t<0||null==t?this:new v(this,t)}prefetch(t){return new D(this,t)}shuffle(t,e){return new F(this,t,e)}serial(){return new y(this)}}class g extends m{constructor(t){super(),this.items=t,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const t=this.items[this.trav];return this.trav++,{value:s(t),done:!1}}}class b extends m{constructor(t){super(),this.nextFn=t}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(t){throw t.message="Error thrown while iterating through a dataset: "+t.message,t}}}class y extends m{constructor(t){super(),this.upstream=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Serial"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class v extends m{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Skip"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(this.count++<this.maxCount){const t=await this.upstream.next();if(t.done)return t;i["qe"](t.value)}return this.upstream.next()}}class x extends m{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0}summary(){return this.upstream.summary()+" -> Take"}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class w extends m{constructor(t,e,n=!0){super(),this.upstream=t,this.batchSize=e,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> RowMajorBatch"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const t=[];while(t.length<this.batchSize){const e=await this.upstream.next();if(e.done)return this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0};t.push(e.value)}return{value:t,done:!1}}}class O extends m{constructor(t,e){super(),this.upstream=t,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Filter"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(1){const t=await this.upstream.next();if(t.done||this.predicate(t.value))return t;i["qe"](t.value)}}}class _ extends m{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> Map"}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i["Qh"].getTensorsInContainer(t.value),n=this.transform(t.value),r=i["Qh"].getTensorsInContainer(n);for(const a of e)i["Qh"].isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}}class A extends m{constructor(t,e){super(),this.upstream=t,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> handleErrors"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(1)try{return await this.upstream.next()}catch(t){if(!this.handler(t))return{value:null,done:!0}}}}class j extends m{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> AsyncMap"}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i["Qh"].getTensorsInContainer(t.value),n=await this.transform(t.value),r=i["Qh"].getTensorsInContainer(n);for(const a of e)i["Qh"].isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}}class k extends m{constructor(){super(),this.outputQueue=new l,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){while(0===this.outputQueue.length())if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class C extends k{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return this.upstream.summary()+" -> Flatmap"}async pump(){const t=await this.upstream.next();if(t.done)return!1;const e=i["Qh"].getTensorsInContainer(t.value),n=this.transform(t.value),r=i["Qh"].getTensorsInContainer(n);this.outputQueue.pushAll(n);for(const a of e)i["Qh"].isTensorInList(a,r)||a.dispose();return!0}}class E extends m{constructor(t,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=t}summary(){const t="TODO: fill in upstream of chained summaries";return t+" -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(t){if(await t,null==this.iterator){const t=await this.moreIterators.next();if(t.done)return{value:null,done:!0};this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const e=await this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(t)):e}}(function(t){t[t["FAIL"]=0]="FAIL",t[t["SHORTEST"]=1]="SHORTEST",t[t["LONGEST"]=2]="LONGEST"})(r||(r={}));class S extends m{constructor(t,e=r.FAIL){super(),this.iterators=t,this.mismatchMode=e,this.count=0,this.currentPromise=null}summary(){const t="TODO: fill in upstream of zip summaries";return`{${t}} -> Zip`}async nextState(t){await t;let e=0,n=0;function i(t){if(t instanceof m){const r=t.next();return{value:r.then(t=>(e++,t.done&&n++,t.value)),recurse:!1}}return{value:null,recurse:!0}}const a=await Object(o["c"])(this.iterators,i);if(e===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case r.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case r.SHORTEST:return{value:null,done:!0};case r.LONGEST:default:}return this.count++,{value:a,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class D extends m{constructor(t,e){super(),this.upstream=t,this.bufferSize=e,this.buffer=new c(e)}summary(){return this.upstream.summary()+" -> Prefetch"}refill(){while(!this.buffer.isFull()){const t=this.upstream.next();this.buffer.push(t)}}next(){return this.refill(),this.buffer.shift()}}class F extends D{constructor(t,e,n){super(t,e),this.upstream=t,this.windowSize=e,this.upstreamExhausted=!1,this.random=a["alea"](n||i["fi"].now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(t){return Math.floor(this.random()*t)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){this.upstreamExhausted||this.refill();while(!this.buffer.isEmpty()){const t=this.chooseIndex(),e=await this.buffer.shuffleExcise(t);if(!e.done)return this.refill(),e;this.upstreamExhausted=!0}return{value:null,done:!0}}}},c430:function(t,e){t.exports=!1},c4be:function(t,e,n){const r=n("4392"),i=n("f195"),a=n("bac4"),o=n("a2a3"),s=n("38fa"),u=n("68d3"),c=(t,e,n,c)=>{switch(e){case"===":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t===n;case"!==":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return r(t,n,c);case"!=":return i(t,n,c);case">":return a(t,n,c);case">=":return o(t,n,c);case"<":return s(t,n,c);case"<=":return u(t,n,c);default:throw new TypeError("Invalid operator: "+e)}};t.exports=c},c628:function(t,e,n){const r=n("3fce"),{ANY:i}=n("6d43"),a=n("2a86"),o=n("3034"),s=(t,e,n)=>{t=new r(t,n),e=new r(e,n);let i=!1;t:for(const r of t.set){for(const t of e.set){const e=u(r,t,n);if(i=i||null!==e,e)continue t}if(i)return!1}return!0},u=(t,e,n)=>{if(1===t.length&&t[0].semver===i)return 1===e.length&&e[0].semver===i;const r=new Set;let s,u,f,d,h,p,m;for(const i of t)">"===i.operator||">="===i.operator?s=c(s,i,n):"<"===i.operator||"<="===i.operator?u=l(u,i,n):r.add(i.semver);if(r.size>1)return null;if(s&&u){if(f=o(s.semver,u.semver,n),f>0)return null;if(0===f&&(">="!==s.operator||"<="!==u.operator))return null}for(const i of r){if(s&&!a(i,String(s),n))return null;if(u&&!a(i,String(u),n))return null;for(const t of e)if(!a(i,String(t),n))return!1;return!0}for(const i of e){if(m=m||">"===i.operator||">="===i.operator,p=p||"<"===i.operator||"<="===i.operator,s)if(">"===i.operator||">="===i.operator){if(d=c(s,i,n),d===i)return!1}else if(">="===s.operator&&!a(s.semver,String(i),n))return!1;if(u)if("<"===i.operator||"<="===i.operator){if(h=l(u,i,n),h===i)return!1}else if("<="===u.operator&&!a(u.semver,String(i),n))return!1;if(!i.operator&&(u||s)&&0!==f)return!1}return!(s&&p&&!u&&0!==f)&&!(u&&m&&!s&&0!==f)},c=(t,e,n)=>{if(!t)return e;const r=o(t.semver,e.semver,n);return r>0?t:r<0||">"===e.operator&&">="===t.operator?e:t},l=(t,e,n)=>{if(!t)return e;const r=o(t.semver,e.semver,n);return r<0?t:r>0||"<"===e.operator&&"<="===t.operator?e:t};t.exports=s},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("ce4e"),a="__core-js_shared__",o=r[a]||i(a,{});t.exports=o},c77c:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("508f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(o["a"])(t,"a","div"),u=Object(o["a"])(e,"b","div");if([n,u]=Object(a["makeTypesMatch"])(n,u),"int32"===n.dtype&&"int32"===u.dtype)return Object(s["a"])(n,u);const c=(t,e)=>{const r=t.realDivide(n,u);return e([n,u]),r},l={a:n,b:u},f={};return r["a"].runKernelFunc(c,l,null,i["S"],f)}const l=Object(u["b"])({div_:c})},c8ad:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},c912:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"x","transpose");if(null==e&&(e=n.shape.map((t,e)=>e).reverse()),o["assert"](n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${e}.`),e.forEach(t=>{o["assert"](t>=0&&t<n.rank,()=>"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e)}),n.rank<=1)return n.clone();const s={x:n},u={perm:e};return r["a"].runKernelFunc(t=>t.transpose(n,e),s,null,i["Nc"],u)}const c=Object(s["b"])({transpose_:u})},c9f1:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){let n=Object(o["a"])(t,"base","pow"),s=Object(o["a"])(e,"exp","pow");[n,s]=Object(a["makeTypesMatch"])(n,s);const u={a:n,b:s},c=(t,e)=>{const r=t.pow(n,s);return e([n,s,r]),r};return r["a"].runKernelFunc(c,u,null,i["Yb"])}const c=Object(s["b"])({pow_:u})},ca84:function(t,e,n){var r=n("5135"),i=n("fc6a"),a=n("4d64").indexOf,o=n("d012");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(o,n)&&r(s,n)&&c.push(n);while(e.length>u)r(s,n=e[u++])&&(~a(c,n)||c.push(n));return c}},cada:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},i={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};function a(t,e,n){"flexDirection"===t&&"string"===typeof e&&(e.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",e.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal"),i.hasOwnProperty(t)&&(n[i[t]]=r[e]||e)}t.exports=e["default"]},cae0:function(t,e,n){(function(t){var r;(function(t,i,a){function o(t){var e=this;function n(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;while(r.length<8)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],t^=t>>>7,n=t^t<<24,t=r[i+1&7],n^=t^t>>>10,t=r[i+3&7],n^=t^t>>>3,t=r[i+4&7],n^=t^t<<7,t=r[i+7&7],t^=t<<13,n^=t^t<<9,r[i]=n,e.i=i+1&7,n},n(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=n.next()>>>11,e=(n.next()>>>0)/4294967296,r=(t+e)/(1<<21)}while(0===r);return r},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("07d6")&&n("3c35")?(r=function(){return u}.call(e,n,e,i),void 0===r||(i.exports=r)):this.xorshift7=u})(0,t,n("07d6"))}).call(this,n("62e4")(t))},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),a=r.document,o=i(a)&&i(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},cca6:function(t,e,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},ccb1:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return k})),n.d(e,"c",(function(){return C})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return D})),n.d(e,"g",(function(){return F})),n.d(e,"h",(function(){return N})),n.d(e,"i",(function(){return T}));var r=n("c04e"),i=n("a3f7"),a=n("eb7e"),o=n("9117"),s=n("c77c"),u=n("09f4"),c=n("f0e5"),l=n("4611"),f=n("a5aa"),d=n("54ef"),h=n("c9f1"),p=n("4184"),m=n("a009");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function g(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","addStrict"),s=Object(i["a"])(e,"b","addStrict");return a["assertShapesMatch"](n.shape,s.shape,"Error in addStrict: "),Object(o["a"])(n,s)}function b(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","subStrict"),o=Object(i["a"])(e,"b","subStrict");return a["assertShapesMatch"](n.shape,o.shape,"Error in subStrict: "),Object(m["a"])(n,o)}function y(t,e){return Object(r["b"])("strict variants of ops have been deprecated and will be removed in future"),a["assertShapesMatch"](t.shape,e.shape,"Error in powStrict: "),Object(h["a"])(t,e)}function v(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","mul"),o=Object(i["a"])(e,"b","mul");return a["assertShapesMatch"](n.shape,o.shape,"Error in multiplyStrict: "),Object(f["a"])(n,o)}function x(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","div"),o=Object(i["a"])(e,"b","div");return a["assertShapesMatch"](n.shape,o.shape,"Error in divideStrict: "),Object(s["a"])(n,o)}function w(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","modStrict"),o=Object(i["a"])(e,"b","modStrict");return a["assertShapesMatch"](n.shape,o.shape,"Error in modStrict: "),Object(l["a"])(n,o)}function O(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","minimumStrict"),o=Object(i["a"])(e,"b","minimumStrict");return a["assertShapesMatch"](n.shape,o.shape,"Error in minimumStrict: "),Object(c["a"])(n,o)}function _(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","maximumStrict"),o=Object(i["a"])(e,"b","maximumStrict");return a["assertShapesMatch"](n.shape,o.shape,"Error in maximumStrict: "),Object(u["a"])(n,o)}function A(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","squaredDifferenceStrict"),o=Object(i["a"])(e,"b","squaredDifferenceStrict");return a["assertShapesMatch"](n.shape,o.shape,"Error in squaredDifferenceStrict: "),Object(p["a"])(n,o)}const j=Object(d["b"])({addStrict_:g}),k=Object(d["b"])({divStrict_:x}),C=Object(d["b"])({maximumStrict_:_}),E=Object(d["b"])({minimumStrict_:O}),S=Object(d["b"])({modStrict_:w}),D=Object(d["b"])({mulStrict_:v}),F=Object(d["b"])({powStrict_:y}),N=Object(d["b"])({squaredDifferenceStrict_:A}),T=Object(d["b"])({subStrict_:b})},cd1f:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("a3f7"),i=n("73d3"),a=n("54ef");function o(t,e,n,a,o,s){const u=Object(r["a"])(t,"x","conv2dTranspose"),c=Object(r["a"])(e,"filter","conv2dTranspose");return Object(i["a"])(n,u,c,a,o,"NHWC",s)}const s=Object(a["b"])({conv2dTranspose_:o})},cdf9:function(t,e,n){var r=n("825a"),i=n("861d"),a=n("f069");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=a.f(t),o=n.resolve;return o(e),n.promise}},ce1a:function(t,e,n){"use strict";n.r(e),n.d(e,"AdadeltaOptimizer",(function(){return f["d"]})),n.d(e,"AdagradOptimizer",(function(){return f["e"]})),n.d(e,"AdamOptimizer",(function(){return f["f"]})),n.d(e,"AdamaxOptimizer",(function(){return f["g"]})),n.d(e,"MomentumOptimizer",(function(){return f["Wb"]})),n.d(e,"Optimizer",(function(){return f["gc"]})),n.d(e,"RMSPropOptimizer",(function(){return f["mc"]})),n.d(e,"SGDOptimizer",(function(){return f["Dc"]})),n.d(e,"Tensor",(function(){return f["ad"]})),n.d(e,"TensorBuffer",(function(){return f["bd"]})),n.d(e,"Variable",(function(){return f["id"]})),n.d(e,"Rank",(function(){return f["oc"]})),n.d(e,"sumOutType",(function(){return f["Gh"]})),n.d(e,"upcastType",(function(){return f["ei"]})),n.d(e,"abs",(function(){return f["ld"]})),n.d(e,"acos",(function(){return f["md"]})),n.d(e,"acosh",(function(){return f["nd"]})),n.d(e,"add",(function(){return f["od"]})),n.d(e,"addN",(function(){return f["pd"]})),n.d(e,"all",(function(){return f["rd"]})),n.d(e,"any",(function(){return f["sd"]})),n.d(e,"argMax",(function(){return f["td"]})),n.d(e,"argMin",(function(){return f["ud"]})),n.d(e,"asin",(function(){return f["vd"]})),n.d(e,"asinh",(function(){return f["wd"]})),n.d(e,"atan",(function(){return f["xd"]})),n.d(e,"atan2",(function(){return f["yd"]})),n.d(e,"atanh",(function(){return f["zd"]})),n.d(e,"avgPool",(function(){return f["Ad"]})),n.d(e,"avgPool3d",(function(){return f["Bd"]})),n.d(e,"basicLSTMCell",(function(){return f["Ed"]})),n.d(e,"batchToSpaceND",(function(){return f["Jd"]})),n.d(e,"batchNorm",(function(){return f["Fd"]})),n.d(e,"batchNorm2d",(function(){return f["Gd"]})),n.d(e,"batchNorm3d",(function(){return f["Hd"]})),n.d(e,"batchNorm4d",(function(){return f["Id"]})),n.d(e,"broadcastTo",(function(){return f["Ld"]})),n.d(e,"buffer",(function(){return f["Nd"]})),n.d(e,"cast",(function(){return f["Od"]})),n.d(e,"ceil",(function(){return f["Pd"]})),n.d(e,"clipByValue",(function(){return f["Qd"]})),n.d(e,"clone",(function(){return f["Rd"]})),n.d(e,"complex",(function(){return f["Sd"]})),n.d(e,"concat",(function(){return f["Td"]})),n.d(e,"concat1d",(function(){return f["Ud"]})),n.d(e,"concat2d",(function(){return f["Vd"]})),n.d(e,"concat3d",(function(){return f["Wd"]})),n.d(e,"concat4d",(function(){return f["Xd"]})),n.d(e,"conv1d",(function(){return f["Yd"]})),n.d(e,"conv2d",(function(){return f["Zd"]})),n.d(e,"conv2dTranspose",(function(){return f["ae"]})),n.d(e,"conv3d",(function(){return f["be"]})),n.d(e,"conv3dTranspose",(function(){return f["ce"]})),n.d(e,"cos",(function(){return f["ee"]})),n.d(e,"cosh",(function(){return f["fe"]})),n.d(e,"cumsum",(function(){return f["he"]})),n.d(e,"depthToSpace",(function(){return f["ke"]})),n.d(e,"depthwiseConv2d",(function(){return f["le"]})),n.d(e,"diag",(function(){return f["ne"]})),n.d(e,"dilation2d",(function(){return f["oe"]})),n.d(e,"div",(function(){return f["se"]})),n.d(e,"divNoNan",(function(){return f["te"]})),n.d(e,"dot",(function(){return f["ve"]})),n.d(e,"elu",(function(){return f["xe"]})),n.d(e,"equal",(function(){return f["De"]})),n.d(e,"erf",(function(){return f["Fe"]})),n.d(e,"exp",(function(){return f["Ge"]})),n.d(e,"expandDims",(function(){return f["He"]})),n.d(e,"expm1",(function(){return f["Ie"]})),n.d(e,"eye",(function(){return f["Je"]})),n.d(e,"fill",(function(){return f["Le"]})),n.d(e,"floor",(function(){return f["Oe"]})),n.d(e,"floorDiv",(function(){return f["Pe"]})),n.d(e,"gather",(function(){return f["Re"]})),n.d(e,"greater",(function(){return f["af"]})),n.d(e,"greaterEqual",(function(){return f["bf"]})),n.d(e,"imag",(function(){return f["ff"]})),n.d(e,"isFinite",(function(){return f["kf"]})),n.d(e,"isInf",(function(){return f["lf"]})),n.d(e,"isNaN",(function(){return f["mf"]})),n.d(e,"leakyRelu",(function(){return f["pf"]})),n.d(e,"less",(function(){return f["qf"]})),n.d(e,"lessEqual",(function(){return f["rf"]})),n.d(e,"linspace",(function(){return f["vf"]})),n.d(e,"localResponseNormalization",(function(){return f["wf"]})),n.d(e,"log",(function(){return f["xf"]})),n.d(e,"log1p",(function(){return f["yf"]})),n.d(e,"logSigmoid",(function(){return f["zf"]})),n.d(e,"logSoftmax",(function(){return f["Af"]})),n.d(e,"logSumExp",(function(){return f["Bf"]})),n.d(e,"logicalAnd",(function(){return f["Cf"]})),n.d(e,"logicalNot",(function(){return f["Df"]})),n.d(e,"logicalOr",(function(){return f["Ef"]})),n.d(e,"logicalXor",(function(){return f["Ff"]})),n.d(e,"matMul",(function(){return f["Hf"]})),n.d(e,"max",(function(){return f["Jf"]})),n.d(e,"maxPool",(function(){return f["Kf"]})),n.d(e,"maxPool3d",(function(){return f["Lf"]})),n.d(e,"maxPoolWithArgmax",(function(){return f["Mf"]})),n.d(e,"maximum",(function(){return f["Nf"]})),n.d(e,"mean",(function(){return f["Pf"]})),n.d(e,"min",(function(){return f["Rf"]})),n.d(e,"minimum",(function(){return f["Sf"]})),n.d(e,"mod",(function(){return f["Uf"]})),n.d(e,"moments",(function(){return f["Wf"]})),n.d(e,"mul",(function(){return f["Yf"]})),n.d(e,"multiRNNCell",(function(){return f["ag"]})),n.d(e,"multinomial",(function(){return f["bg"]})),n.d(e,"neg",(function(){return f["cg"]})),n.d(e,"notEqual",(function(){return f["fg"]})),n.d(e,"oneHot",(function(){return f["hg"]})),n.d(e,"ones",(function(){return f["ig"]})),n.d(e,"onesLike",(function(){return f["jg"]})),n.d(e,"outerProduct",(function(){return f["lg"]})),n.d(e,"pad",(function(){return f["mg"]})),n.d(e,"pad1d",(function(){return f["ng"]})),n.d(e,"pad2d",(function(){return f["og"]})),n.d(e,"pad3d",(function(){return f["pg"]})),n.d(e,"pad4d",(function(){return f["qg"]})),n.d(e,"pool",(function(){return f["rg"]})),n.d(e,"pow",(function(){return f["sg"]})),n.d(e,"prelu",(function(){return f["ug"]})),n.d(e,"print",(function(){return f["vg"]})),n.d(e,"prod",(function(){return f["wg"]})),n.d(e,"rand",(function(){return f["yg"]})),n.d(e,"randomGamma",(function(){return f["zg"]})),n.d(e,"randomNormal",(function(){return f["Ag"]})),n.d(e,"randomUniform",(function(){return f["Bg"]})),n.d(e,"range",(function(){return f["Cg"]})),n.d(e,"real",(function(){return f["Eg"]})),n.d(e,"reciprocal",(function(){return f["Fg"]})),n.d(e,"relu",(function(){return f["Jg"]})),n.d(e,"relu6",(function(){return f["Kg"]})),n.d(e,"reshape",(function(){return f["Mg"]})),n.d(e,"reverse",(function(){return f["Ng"]})),n.d(e,"reverse1d",(function(){return f["Og"]})),n.d(e,"reverse2d",(function(){return f["Pg"]})),n.d(e,"reverse3d",(function(){return f["Qg"]})),n.d(e,"reverse4d",(function(){return f["Rg"]})),n.d(e,"round",(function(){return f["Tg"]})),n.d(e,"rsqrt",(function(){return f["Ug"]})),n.d(e,"scalar",(function(){return f["Vg"]})),n.d(e,"selu",(function(){return f["Yg"]})),n.d(e,"separableConv2d",(function(){return f["Zg"]})),n.d(e,"setdiff1dAsync",(function(){return f["dh"]})),n.d(e,"sigmoid",(function(){return f["eh"]})),n.d(e,"sign",(function(){return f["fh"]})),n.d(e,"sin",(function(){return f["hh"]})),n.d(e,"sinh",(function(){return f["ih"]})),n.d(e,"slice",(function(){return f["jh"]})),n.d(e,"slice1d",(function(){return f["kh"]})),n.d(e,"slice2d",(function(){return f["lh"]})),n.d(e,"slice3d",(function(){return f["mh"]})),n.d(e,"slice4d",(function(){return f["nh"]})),n.d(e,"softmax",(function(){return f["ph"]})),n.d(e,"softplus",(function(){return f["qh"]})),n.d(e,"spaceToBatchND",(function(){return f["rh"]})),n.d(e,"fft",(function(){return f["Ke"]})),n.d(e,"ifft",(function(){return f["ef"]})),n.d(e,"irfft",(function(){return f["jf"]})),n.d(e,"rfft",(function(){return f["Sg"]})),n.d(e,"split",(function(){return f["uh"]})),n.d(e,"sqrt",(function(){return f["vh"]})),n.d(e,"square",(function(){return f["wh"]})),n.d(e,"squaredDifference",(function(){return f["xh"]})),n.d(e,"squeeze",(function(){return f["zh"]})),n.d(e,"stack",(function(){return f["Ah"]})),n.d(e,"step",(function(){return f["Bh"]})),n.d(e,"stridedSlice",(function(){return f["Ch"]})),n.d(e,"sub",(function(){return f["Dh"]})),n.d(e,"sum",(function(){return f["Fh"]})),n.d(e,"tan",(function(){return f["Hh"]})),n.d(e,"tanh",(function(){return f["Ih"]})),n.d(e,"tensor",(function(){return f["Jh"]})),n.d(e,"tensor1d",(function(){return f["Kh"]})),n.d(e,"tensor2d",(function(){return f["Lh"]})),n.d(e,"tensor3d",(function(){return f["Mh"]})),n.d(e,"tensor4d",(function(){return f["Nh"]})),n.d(e,"tensor5d",(function(){return f["Oh"]})),n.d(e,"tensor6d",(function(){return f["Ph"]})),n.d(e,"tile",(function(){return f["Th"]})),n.d(e,"topk",(function(){return f["Vh"]})),n.d(e,"truncatedNormal",(function(){return f["Yh"]})),n.d(e,"unique",(function(){return f["Zh"]})),n.d(e,"unsortedSegmentSum",(function(){return f["ci"]})),n.d(e,"unstack",(function(){return f["di"]})),n.d(e,"variable",(function(){return f["ii"]})),n.d(e,"where",(function(){return f["li"]})),n.d(e,"whereAsync",(function(){return f["mi"]})),n.d(e,"zeros",(function(){return f["ni"]})),n.d(e,"zerosLike",(function(){return f["oi"]})),n.d(e,"booleanMaskAsync",(function(){return f["Kd"]})),n.d(e,"equalStrict",(function(){return f["Ee"]})),n.d(e,"greaterEqualStrict",(function(){return f["cf"]})),n.d(e,"greaterStrict",(function(){return f["df"]})),n.d(e,"lessEqualStrict",(function(){return f["sf"]})),n.d(e,"lessStrict",(function(){return f["tf"]})),n.d(e,"notEqualStrict",(function(){return f["gg"]})),n.d(e,"addStrict",(function(){return f["qd"]})),n.d(e,"divStrict",(function(){return f["ue"]})),n.d(e,"maximumStrict",(function(){return f["Of"]})),n.d(e,"minimumStrict",(function(){return f["Tf"]})),n.d(e,"modStrict",(function(){return f["Vf"]})),n.d(e,"mulStrict",(function(){return f["Zf"]})),n.d(e,"powStrict",(function(){return f["tg"]})),n.d(e,"squaredDifferenceStrict",(function(){return f["yh"]})),n.d(e,"subStrict",(function(){return f["Eh"]})),n.d(e,"transpose",(function(){return f["Xh"]})),n.d(e,"norm",(function(){return f["eg"]})),n.d(e,"movingAverage",(function(){return f["Xf"]})),n.d(e,"scatterND",(function(){return f["Wg"]})),n.d(e,"sparseToDense",(function(){return f["sh"]})),n.d(e,"gatherND",(function(){return f["Se"]})),n.d(e,"dropout",(function(){return f["we"]})),n.d(e,"enclosingPowerOfTwo",(function(){return f["Ae"]})),n.d(e,"cosineWindow",(function(){return f["ge"]})),n.d(e,"inTopKAsync",(function(){return f["hf"]})),n.d(e,"op",(function(){return f["kg"]})),n.d(e,"OP_SCOPE_SUFFIX",(function(){return f["dc"]})),n.d(e,"image",(function(){return f["gf"]})),n.d(e,"linalg",(function(){return f["uf"]})),n.d(e,"losses",(function(){return f["Gf"]})),n.d(e,"spectral",(function(){return f["th"]})),n.d(e,"fused",(function(){return f["Qe"]})),n.d(e,"signal",(function(){return f["gh"]})),n.d(e,"Reduction",(function(){return f["rc"]})),n.d(e,"train",(function(){return f["Wh"]})),n.d(e,"enableProdMode",(function(){return f["ze"]})),n.d(e,"enableDebugMode",(function(){return f["ye"]})),n.d(e,"disableDeprecationWarnings",(function(){return f["pe"]})),n.d(e,"deprecationWarn",(function(){return f["je"]})),n.d(e,"disposeVariables",(function(){return f["re"]})),n.d(e,"engine",(function(){return f["Be"]})),n.d(e,"memory",(function(){return f["Qf"]})),n.d(e,"profile",(function(){return f["xg"]})),n.d(e,"tidy",(function(){return f["Sh"]})),n.d(e,"dispose",(function(){return f["qe"]})),n.d(e,"keep",(function(){return f["nf"]})),n.d(e,"time",(function(){return f["Uh"]})),n.d(e,"setBackend",(function(){return f["bh"]})),n.d(e,"ready",(function(){return f["Dg"]})),n.d(e,"getBackend",(function(){return f["Ue"]})),n.d(e,"removeBackend",(function(){return f["Lg"]})),n.d(e,"findBackend",(function(){return f["Me"]})),n.d(e,"findBackendFactory",(function(){return f["Ne"]})),n.d(e,"registerBackend",(function(){return f["Gg"]})),n.d(e,"backend",(function(){return f["Cd"]})),n.d(e,"setPlatform",(function(){return f["ch"]})),n.d(e,"getKernel",(function(){return f["We"]})),n.d(e,"getGradient",(function(){return f["Ve"]})),n.d(e,"getKernelsForBackend",(function(){return f["Xe"]})),n.d(e,"registerKernel",(function(){return f["Ig"]})),n.d(e,"registerGradient",(function(){return f["Hg"]})),n.d(e,"unregisterKernel",(function(){return f["bi"]})),n.d(e,"unregisterGradient",(function(){return f["ai"]})),n.d(e,"copyRegisteredKernels",(function(){return f["de"]})),n.d(e,"customGrad",(function(){return f["ie"]})),n.d(e,"grad",(function(){return f["Ye"]})),n.d(e,"grads",(function(){return f["Ze"]})),n.d(e,"valueAndGrad",(function(){return f["gi"]})),n.d(e,"valueAndGrads",(function(){return f["hi"]})),n.d(e,"variableGrads",(function(){return f["ji"]})),n.d(e,"Environment",(function(){return f["bb"]})),n.d(e,"env",(function(){return f["Ce"]})),n.d(e,"ENV",(function(){return f["Y"]})),n.d(e,"version_core",(function(){return f["ki"]})),n.d(e,"nextFrame",(function(){return f["dg"]})),n.d(e,"browser",(function(){return f["Md"]})),n.d(e,"io",(function(){return f["if"]})),n.d(e,"math",(function(){return f["If"]})),n.d(e,"serialization",(function(){return f["ah"]})),n.d(e,"test_util",(function(){return f["Rh"]})),n.d(e,"util",(function(){return f["fi"]})),n.d(e,"backend_util",(function(){return f["Dd"]})),n.d(e,"tensor_util",(function(){return f["Qh"]})),n.d(e,"slice_util",(function(){return f["oh"]})),n.d(e,"gather_util",(function(){return f["Te"]})),n.d(e,"scatter_util",(function(){return f["Xg"]})),n.d(e,"device_util",(function(){return f["me"]})),n.d(e,"kernel_impls",(function(){return f["of"]})),n.d(e,"KernelBackend",(function(){return f["zb"]})),n.d(e,"DataStorage",(function(){return f["O"]})),n.d(e,"Abs",(function(){return f["a"]})),n.d(e,"Acos",(function(){return f["b"]})),n.d(e,"Acosh",(function(){return f["c"]})),n.d(e,"Add",(function(){return f["h"]})),n.d(e,"AddN",(function(){return f["i"]})),n.d(e,"All",(function(){return f["j"]})),n.d(e,"Any",(function(){return f["k"]})),n.d(e,"ArgMax",(function(){return f["l"]})),n.d(e,"ArgMin",(function(){return f["m"]})),n.d(e,"Asin",(function(){return f["n"]})),n.d(e,"Asinh",(function(){return f["o"]})),n.d(e,"Atan",(function(){return f["p"]})),n.d(e,"Atanh",(function(){return f["r"]})),n.d(e,"Atan2",(function(){return f["q"]})),n.d(e,"AvgPool",(function(){return f["s"]})),n.d(e,"AvgPoolBackprop",(function(){return f["v"]})),n.d(e,"AvgPool3D",(function(){return f["t"]})),n.d(e,"AvgPool3DBackprop",(function(){return f["u"]})),n.d(e,"BatchMatMul",(function(){return f["w"]})),n.d(e,"BatchToSpaceND",(function(){return f["x"]})),n.d(e,"BroadcastTo",(function(){return f["y"]})),n.d(e,"Cast",(function(){return f["z"]})),n.d(e,"Ceil",(function(){return f["A"]})),n.d(e,"ClipByValue",(function(){return f["B"]})),n.d(e,"Complex",(function(){return f["C"]})),n.d(e,"Concat",(function(){return f["D"]})),n.d(e,"Conv2D",(function(){return f["E"]})),n.d(e,"Conv2DBackpropFilter",(function(){return f["F"]})),n.d(e,"Conv2DBackpropInput",(function(){return f["G"]})),n.d(e,"Conv3D",(function(){return f["H"]})),n.d(e,"Conv3DBackpropFilterV2",(function(){return f["I"]})),n.d(e,"Conv3DBackpropInputV2",(function(){return f["J"]})),n.d(e,"Cos",(function(){return f["K"]})),n.d(e,"Cosh",(function(){return f["L"]})),n.d(e,"Cumsum",(function(){return f["N"]})),n.d(e,"CropAndResize",(function(){return f["M"]})),n.d(e,"DepthToSpace",(function(){return f["P"]})),n.d(e,"DepthwiseConv2dNative",(function(){return f["Q"]})),n.d(e,"DepthwiseConv2dNativeBackpropFilter",(function(){return f["R"]})),n.d(e,"DepthwiseConv2dNativeBackpropInput",(function(){return f["S"]})),n.d(e,"Diag",(function(){return f["T"]})),n.d(e,"Dilation2D",(function(){return f["U"]})),n.d(e,"Dilation2DBackpropInput",(function(){return f["W"]})),n.d(e,"Dilation2DBackpropFilter",(function(){return f["V"]})),n.d(e,"Div",(function(){return f["X"]})),n.d(e,"Elu",(function(){return f["Z"]})),n.d(e,"EluGrad",(function(){return f["ab"]})),n.d(e,"Erf",(function(){return f["db"]})),n.d(e,"Equal",(function(){return f["cb"]})),n.d(e,"Exp",(function(){return f["eb"]})),n.d(e,"Expm1",(function(){return f["fb"]})),n.d(e,"FFT",(function(){return f["gb"]})),n.d(e,"Fill",(function(){return f["hb"]})),n.d(e,"FlipLeftRight",(function(){return f["ib"]})),n.d(e,"Floor",(function(){return f["jb"]})),n.d(e,"FloorDiv",(function(){return f["kb"]})),n.d(e,"FusedBatchNorm",(function(){return f["mb"]})),n.d(e,"GatherV2",(function(){return f["qb"]})),n.d(e,"GatherNd",(function(){return f["pb"]})),n.d(e,"Greater",(function(){return f["rb"]})),n.d(e,"GreaterEqual",(function(){return f["sb"]})),n.d(e,"Identity",(function(){return f["ub"]})),n.d(e,"IFFT",(function(){return f["tb"]})),n.d(e,"Imag",(function(){return f["vb"]})),n.d(e,"IsFinite",(function(){return f["wb"]})),n.d(e,"IsInf",(function(){return f["xb"]})),n.d(e,"IsNan",(function(){return f["yb"]})),n.d(e,"Less",(function(){return f["Cb"]})),n.d(e,"LessEqual",(function(){return f["Db"]})),n.d(e,"LinSpace",(function(){return f["Eb"]})),n.d(e,"Log",(function(){return f["Fb"]})),n.d(e,"Log1p",(function(){return f["Gb"]})),n.d(e,"LogicalAnd",(function(){return f["Ib"]})),n.d(e,"LogicalNot",(function(){return f["Jb"]})),n.d(e,"LogicalOr",(function(){return f["Kb"]})),n.d(e,"LogSoftmax",(function(){return f["Hb"]})),n.d(e,"LRN",(function(){return f["Ab"]})),n.d(e,"LRNBackprop",(function(){return f["Bb"]})),n.d(e,"Max",(function(){return f["Lb"]})),n.d(e,"Maximum",(function(){return f["Rb"]})),n.d(e,"MaxPool",(function(){return f["Mb"]})),n.d(e,"MaxPoolBackprop",(function(){return f["Pb"]})),n.d(e,"MaxPool3D",(function(){return f["Nb"]})),n.d(e,"MaxPool3DBackprop",(function(){return f["Ob"]})),n.d(e,"MaxPoolWithArgmax",(function(){return f["Qb"]})),n.d(e,"Mean",(function(){return f["Sb"]})),n.d(e,"Min",(function(){return f["Tb"]})),n.d(e,"Minimum",(function(){return f["Ub"]})),n.d(e,"Mod",(function(){return f["Vb"]})),n.d(e,"Multiply",(function(){return f["Xb"]})),n.d(e,"Negate",(function(){return f["Yb"]})),n.d(e,"NotEqual",(function(){return f["cc"]})),n.d(e,"NonMaxSuppressionV3",(function(){return f["Zb"]})),n.d(e,"NonMaxSuppressionV4",(function(){return f["ac"]})),n.d(e,"NonMaxSuppressionV5",(function(){return f["bc"]})),n.d(e,"OnesLike",(function(){return f["fc"]})),n.d(e,"OneHot",(function(){return f["ec"]})),n.d(e,"PadV2",(function(){return f["hc"]})),n.d(e,"Pool",(function(){return f["ic"]})),n.d(e,"Pow",(function(){return f["jc"]})),n.d(e,"Prelu",(function(){return f["kc"]})),n.d(e,"Prod",(function(){return f["lc"]})),n.d(e,"Range",(function(){return f["nc"]})),n.d(e,"Real",(function(){return f["pc"]})),n.d(e,"Reciprocal",(function(){return f["qc"]})),n.d(e,"Relu",(function(){return f["sc"]})),n.d(e,"Reshape",(function(){return f["uc"]})),n.d(e,"ResizeNearestNeighbor",(function(){return f["xc"]})),n.d(e,"ResizeNearestNeighborGrad",(function(){return f["yc"]})),n.d(e,"ResizeBilinear",(function(){return f["vc"]})),n.d(e,"ResizeBilinearGrad",(function(){return f["wc"]})),n.d(e,"Relu6",(function(){return f["tc"]})),n.d(e,"Reverse",(function(){return f["zc"]})),n.d(e,"Round",(function(){return f["Bc"]})),n.d(e,"Rsqrt",(function(){return f["Cc"]})),n.d(e,"ScatterNd",(function(){return f["Ec"]})),n.d(e,"SelectV2",(function(){return f["Fc"]})),n.d(e,"Selu",(function(){return f["Gc"]})),n.d(e,"Slice",(function(){return f["Lc"]})),n.d(e,"Sin",(function(){return f["Jc"]})),n.d(e,"Sinh",(function(){return f["Kc"]})),n.d(e,"Sign",(function(){return f["Ic"]})),n.d(e,"Sigmoid",(function(){return f["Hc"]})),n.d(e,"Softplus",(function(){return f["Nc"]})),n.d(e,"Sqrt",(function(){return f["Rc"]})),n.d(e,"Sum",(function(){return f["Xc"]})),n.d(e,"SpaceToBatchND",(function(){return f["Oc"]})),n.d(e,"SplitV",(function(){return f["Qc"]})),n.d(e,"Softmax",(function(){return f["Mc"]})),n.d(e,"SquaredDifference",(function(){return f["Tc"]})),n.d(e,"Square",(function(){return f["Sc"]})),n.d(e,"Sub",(function(){return f["Wc"]})),n.d(e,"SparseToDense",(function(){return f["Pc"]})),n.d(e,"StridedSlice",(function(){return f["Vc"]})),n.d(e,"Tan",(function(){return f["Yc"]})),n.d(e,"Tanh",(function(){return f["Zc"]})),n.d(e,"Tile",(function(){return f["cd"]})),n.d(e,"TopK",(function(){return f["dd"]})),n.d(e,"Transpose",(function(){return f["ed"]})),n.d(e,"Unique",(function(){return f["fd"]})),n.d(e,"Unpack",(function(){return f["gd"]})),n.d(e,"UnsortedSegmentSum",(function(){return f["hd"]})),n.d(e,"ZerosLike",(function(){return f["jd"]})),n.d(e,"Step",(function(){return f["Uc"]})),n.d(e,"FromPixels",(function(){return f["lb"]})),n.d(e,"RotateWithOffset",(function(){return f["Ac"]})),n.d(e,"_FusedMatMul",(function(){return f["kd"]})),n.d(e,"FusedConv2D",(function(){return f["nb"]})),n.d(e,"FusedDepthwiseConv2D",(function(){return f["ob"]})),n.d(e,"CallbackList",(function(){return un})),n.d(e,"CustomCallback",(function(){return fn})),n.d(e,"History",(function(){return ln})),n.d(e,"Callback",(function(){return su})),n.d(e,"callbacks",(function(){return du})),n.d(e,"EarlyStopping",(function(){return lu})),n.d(e,"InputSpec",(function(){return Ve})),n.d(e,"SymbolicTensor",(function(){return Ge})),n.d(e,"LayersModel",(function(){return ei})),n.d(e,"input",(function(){return fi})),n.d(e,"loadLayersModel",(function(){return li})),n.d(e,"model",(function(){return ui})),n.d(e,"registerCallbackConstructor",(function(){return di})),n.d(e,"sequential",(function(){return ci})),n.d(e,"RNN",(function(){return ha})),n.d(e,"Sequential",(function(){return si})),n.d(e,"LayerVariable",(function(){return Pe})),n.d(e,"version_layers",(function(){return pr})),n.d(e,"constraints",(function(){return r})),n.d(e,"initializers",(function(){return i})),n.d(e,"layers",(function(){return a})),n.d(e,"metrics",(function(){return o})),n.d(e,"models",(function(){return s})),n.d(e,"regularizers",(function(){return u})),n.d(e,"GraphModel",(function(){return Af})),n.d(e,"loadGraphModel",(function(){return jf})),n.d(e,"deregisterOp",(function(){return gu["a"]})),n.d(e,"registerOp",(function(){return gu["c"]})),n.d(e,"version_converter",(function(){return kf})),n.d(e,"data",(function(){return c})),n.d(e,"version",(function(){return y_}));var r={};n.r(r),n.d(r,"maxNorm",(function(){return J})),n.d(r,"unitNorm",(function(){return Z})),n.d(r,"nonNeg",(function(){return Q})),n.d(r,"minMaxNorm",(function(){return tt}));var i={};n.r(i),n.d(i,"zeros",(function(){return ge})),n.d(i,"ones",(function(){return be})),n.d(i,"constant",(function(){return ye})),n.d(i,"randomUniform",(function(){return ve})),n.d(i,"randomNormal",(function(){return xe})),n.d(i,"truncatedNormal",(function(){return we})),n.d(i,"identity",(function(){return Oe})),n.d(i,"varianceScaling",(function(){return _e})),n.d(i,"glorotUniform",(function(){return Ae})),n.d(i,"glorotNormal",(function(){return je})),n.d(i,"heNormal",(function(){return ke})),n.d(i,"heUniform",(function(){return Ce})),n.d(i,"leCunNormal",(function(){return Ee})),n.d(i,"leCunUniform",(function(){return Se})),n.d(i,"orthogonal",(function(){return De}));var a={};n.r(a),n.d(a,"inputLayer",(function(){return Co})),n.d(a,"elu",(function(){return Eo})),n.d(a,"reLU",(function(){return So})),n.d(a,"leakyReLU",(function(){return Do})),n.d(a,"prelu",(function(){return Fo})),n.d(a,"softmax",(function(){return No})),n.d(a,"thresholdedReLU",(function(){return To})),n.d(a,"conv1d",(function(){return Mo})),n.d(a,"conv2d",(function(){return Io})),n.d(a,"conv2dTranspose",(function(){return Ro})),n.d(a,"conv3d",(function(){return $o})),n.d(a,"separableConv2d",(function(){return Bo})),n.d(a,"cropping2D",(function(){return zo})),n.d(a,"upSampling2d",(function(){return Lo})),n.d(a,"depthwiseConv2d",(function(){return Po})),n.d(a,"activation",(function(){return Uo})),n.d(a,"dense",(function(){return Wo})),n.d(a,"dropout",(function(){return qo})),n.d(a,"spatialDropout1d",(function(){return Vo})),n.d(a,"flatten",(function(){return Go})),n.d(a,"repeatVector",(function(){return Ho})),n.d(a,"reshape",(function(){return Xo})),n.d(a,"permute",(function(){return Yo})),n.d(a,"embedding",(function(){return Ko})),n.d(a,"add",(function(){return Jo})),n.d(a,"average",(function(){return Zo})),n.d(a,"concatenate",(function(){return Qo})),n.d(a,"maximum",(function(){return ts})),n.d(a,"minimum",(function(){return es})),n.d(a,"multiply",(function(){return ns})),n.d(a,"dot",(function(){return rs})),n.d(a,"batchNormalization",(function(){return is})),n.d(a,"layerNormalization",(function(){return as})),n.d(a,"zeroPadding2d",(function(){return os})),n.d(a,"averagePooling1d",(function(){return ss})),n.d(a,"avgPool1d",(function(){return us})),n.d(a,"avgPooling1d",(function(){return cs})),n.d(a,"averagePooling2d",(function(){return ls})),n.d(a,"avgPool2d",(function(){return fs})),n.d(a,"avgPooling2d",(function(){return ds})),n.d(a,"averagePooling3d",(function(){return hs})),n.d(a,"avgPool3d",(function(){return ps})),n.d(a,"avgPooling3d",(function(){return ms})),n.d(a,"globalAveragePooling1d",(function(){return gs})),n.d(a,"globalAveragePooling2d",(function(){return bs})),n.d(a,"globalMaxPooling1d",(function(){return ys})),n.d(a,"globalMaxPooling2d",(function(){return vs})),n.d(a,"maxPooling1d",(function(){return xs})),n.d(a,"maxPooling2d",(function(){return ws})),n.d(a,"maxPooling3d",(function(){return Os})),n.d(a,"gru",(function(){return _s})),n.d(a,"gruCell",(function(){return As})),n.d(a,"lstm",(function(){return js})),n.d(a,"lstmCell",(function(){return ks})),n.d(a,"simpleRNN",(function(){return Cs})),n.d(a,"simpleRNNCell",(function(){return Es})),n.d(a,"convLstm2d",(function(){return Ss})),n.d(a,"convLstm2dCell",(function(){return Ds})),n.d(a,"rnn",(function(){return Fs})),n.d(a,"stackedRNNCells",(function(){return Ns})),n.d(a,"bidirectional",(function(){return Ts})),n.d(a,"timeDistributed",(function(){return Ms})),n.d(a,"globalMaxPool1d",(function(){return Is})),n.d(a,"globalMaxPool2d",(function(){return Rs})),n.d(a,"maxPool1d",(function(){return $s})),n.d(a,"maxPool2d",(function(){return Bs})),n.d(a,"Layer",(function(){return Ke})),n.d(a,"RNN",(function(){return ha})),n.d(a,"RNNCell",(function(){return pa})),n.d(a,"input",(function(){return fi})),n.d(a,"gaussianNoise",(function(){return zs})),n.d(a,"gaussianDropout",(function(){return Ls})),n.d(a,"alphaDropout",(function(){return Ps})),n.d(a,"masking",(function(){return Us}));var o={};n.r(o),n.d(o,"binaryAccuracy",(function(){return Ws})),n.d(o,"binaryCrossentropy",(function(){return qs})),n.d(o,"sparseCategoricalAccuracy",(function(){return Vs})),n.d(o,"categoricalAccuracy",(function(){return Gs})),n.d(o,"categoricalCrossentropy",(function(){return Hs})),n.d(o,"precision",(function(){return Xs})),n.d(o,"recall",(function(){return Ys})),n.d(o,"cosineProximity",(function(){return Ks})),n.d(o,"meanAbsoluteError",(function(){return Js})),n.d(o,"meanAbsolutePercentageError",(function(){return Zs})),n.d(o,"MAPE",(function(){return Qs})),n.d(o,"mape",(function(){return tu})),n.d(o,"meanSquaredError",(function(){return eu})),n.d(o,"MSE",(function(){return nu})),n.d(o,"mse",(function(){return ru}));var s={};n.r(s),n.d(s,"modelFromJSON",(function(){return ri}));var u={};n.r(u),n.d(u,"l1l2",(function(){return iu})),n.d(u,"l1",(function(){return au})),n.d(u,"l2",(function(){return ou}));var c={};n.r(c),n.d(c,"array",(function(){return Nf})),n.d(c,"Dataset",(function(){return Df})),n.d(c,"zip",(function(){return Tf})),n.d(c,"CSVDataset",(function(){return Wf})),n.d(c,"TextLineDataset",(function(){return Rf})),n.d(c,"csv",(function(){return td})),n.d(c,"func",(function(){return ed})),n.d(c,"generator",(function(){return nd})),n.d(c,"microphone",(function(){return id})),n.d(c,"webcam",(function(){return rd})),n.d(c,"FileDataSource",(function(){return Zf})),n.d(c,"URLDataSource",(function(){return Qf})),n.d(c,"version_data",(function(){return ad}));var l={};n.r(l),n.d(l,"simpleAbsImpl",(function(){return md})),n.d(l,"addImpl",(function(){return Id})),n.d(l,"ceilImpl",(function(){return nh})),n.d(l,"expImpl",(function(){return Th})),n.d(l,"expm1Impl",(function(){return Rh})),n.d(l,"floorImpl",(function(){return ip})),n.d(l,"logImpl",(function(){return mp})),n.d(l,"maxImpl",(function(){return Op})),n.d(l,"multiplyImpl",(function(){return zh})),n.d(l,"rsqrtImpl",(function(){return Vp})),n.d(l,"sliceImpl",(function(){return Wh})),n.d(l,"subImpl",(function(){return Gh})),n.d(l,"transposeImpl",(function(){return _p})),n.d(l,"uniqueImpl",(function(){return km}));var f=n("fa11");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let d;function h(){return null==d&&(d=Object(f["Cd"])().epsilon()),d}function p(){return"channelsLast"}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class m extends Error{constructor(t){super(t),Object.setPrototypeOf(this,m.prototype)}}class g extends Error{constructor(t){super(t),Object.setPrototypeOf(this,g.prototype)}}class b extends Error{constructor(t){super(t),Object.setPrototypeOf(this,b.prototype)}}class y extends Error{constructor(t){super(t),Object.setPrototypeOf(this,y.prototype)}}class v extends Error{constructor(t){super(t),Object.setPrototypeOf(this,v.prototype)}}Error;
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}{const n=new Array(e);return n.fill(t),n}}function w(t,e){if(!t)throw new v(e)}function O(t,e){let n=0;for(const r of t)r===e&&n++;return n}function _(t){return 1===t.length?t[0]:t}function A(t){return Array.isArray(t)?t:[t]}function j(t){const e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2"),n=e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==n[0]?n:"private"+n}function k(t){return t.length<=1||-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(t,e)=>e.toUpperCase())}let C={};function E(t){if(null===t||void 0===t)return null;const e={};return e["className"]=t.getClassName(),e["config"]=t.getConfig(),e}function S(t){if(null!=t&&"object"===typeof t)if(Array.isArray(t))t.forEach(t=>S(t));else{const e=Object.keys(t);for(const n of e){const e=t[n];null!=e&&"object"===typeof e&&(Array.isArray(e)||"ndarray"!==e["type"]||"number"!==typeof e["value"]?S(e):t[n]=e["value"])}}}function D(t,e={},n={},r="object",i=!1){if("string"===typeof t){const i=t;let a;if(i in n)a=n[i];else if(i in C)a=C[i];else if(a=e[i],null==a)throw new b(`Unknown ${r}: ${t}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}{const a=t;if(null==a["className"]||null==a["config"])throw new b(r+": Improper config format: "+JSON.stringify(a)+".\n'className' and 'config' must set.");const o=a["className"];let s,u;if(o in n?[s,u]=n[o]:o in C?[s,u]=C["className"]:o in e&&([s,u]=e[o]),null==s)throw new b(`Unknown ${r}: ${o}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=u){const t={};for(const n of Object.keys(C))t[n]=C[n];for(const i of Object.keys(n))t[i]=n[i];const e=a["config"];e["customObjects"]=t;const r=Object.assign({},C);for(const i of Object.keys(n))C[i]=n[i];S(a["config"]);const o=u(s,a["config"],n,i);return C=Object.assign({},r),o}{const t=Object.assign({},C);for(const r of Object.keys(n))C[r]=n[r];const e=new s(a["config"]);return C=Object.assign({},t),e}}}function F(t,e){return t<e?-1:t>e?1:0}function N(t,e){return-1*F(t,e)}function T(t){if(null==t)return t;const e=[];for(const n of t)-1===e.indexOf(n)&&e.push(n);return e}function M(t){if(null==t)throw new b("Invalid value in obj: "+JSON.stringify(t));for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function I(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new b(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function R(t,e,n=0,r=1/0){return w(n>=0),w(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(t=>typeof t===e)}function $(t,e){Array.isArray(t)?(f["fi"].assert(t.length>0,()=>e+" is unexpectedly an empty array."),t.forEach((t,n)=>$(t,`element ${n+1} of ${e}`))):f["fi"].assert(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got `+B(t)+".")}function B(t){return null===t?"null":Array.isArray(t)?"["+t.map(t=>B(t)).join(",")+"]":"string"===typeof t?`"${t}"`:""+t}function z(t,e){let n,r=f["fi"].now();const i=(...i)=>{const a=f["fi"].now();return a-r<e||(r=a,n=t(...i)),n};return i}function L(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function P(t,e){return Object(f["Sh"])(()=>f["vh"](f["Fh"](f["Yf"](t,t),e,!0)))}class U extends f["ah"].Serializable{getConfig(){return{}}}class W extends U{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Object(f["Sh"])(()=>{const e=P(t,this.axis),n=f["Qd"](e,0,this.maxValue);return f["Yf"](t,f["se"](n,f["od"](h(),e)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}W.className="MaxNorm",f["ah"].registerClass(W);class q extends U{constructor(t){super(),this.defaultAxis=0,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Object(f["Sh"])(()=>f["se"](t,f["od"](h(),P(t,this.axis))))}getConfig(){return{axis:this.axis}}}q.className="UnitNorm",f["ah"].registerClass(q);class V extends U{apply(t){return f["Jg"](t)}}V.className="NonNeg",f["ah"].registerClass(V);class G extends U{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=t.minValue?t.minValue:this.defaultMinValue,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.rate=null!=t.rate?t.rate:this.defaultRate,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Object(f["Sh"])(()=>{const e=P(t,this.axis),n=f["od"](f["Yf"](this.rate,f["Qd"](e,this.minValue,this.maxValue)),f["Yf"](1-this.rate,e));return f["Yf"](t,f["se"](n,f["od"](h(),e)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}G.className="MinMaxNorm",f["ah"].registerClass(G);const H={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function X(t){return E(t)}function Y(t,e={}){return D(t,f["ah"].SerializationMap.getMap().classNameMap,e,"constraint")}function K(t){if(null==t)return null;if("string"===typeof t){const e=t in H?H[t]:t,n={className:e,config:{}};return Y(n)}return t instanceof U?t:Y(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function J(t){return new W(t)}function Z(t){return new q(t)}function Q(){return new V}function tt(t){return new G(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const et=["channelsFirst","channelsLast"],nt=["valid","same","causal"],rt=["max","avg"],it=["sum","mul","concat","ave"],at=new Map;function ot(t){I(et,"DataFormat",t)}function st(t){I(nt,"PaddingMode",t)}function ut(t){I(rt,"PoolMode",t)}const ct=[],lt="/";function ft(t,e){ct.push(t);try{const t=e();return ct.pop(),t}catch(n){throw ct.pop(),n}}function dt(){return 0===ct.length?"":ct.join(lt)+lt}function ht(t){if(!gt(t))throw new Error("Not a valid tensor name: '"+t+"'");return dt()+t}function pt(t){if(!gt(t))throw new Error("Not a valid tensor name: '"+t+"'");at.has(t)||at.set(t,0);const e=at.get(t);if(at.set(t,at.get(t)+1),e>0){const n=`${t}_${e}`;return at.set(n,1),n}return t}const mt=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function gt(t){return!!t.match(mt)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bt(t){return t===parseInt(t.toString(),10)}function yt(t,e,n){null==e&&(e=0),null==n&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function vt(t){return t=Array.isArray(t)?new Float32Array(t):t,Object(f["Kh"])(t)}function xt(t){return f["Rf"](vt(t)).dataSync()[0]}function wt(t){return f["Jf"](vt(t)).dataSync()[0]}function Ot(t,e){if(e<t)throw new b(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _t(t,e){return t.asType(e)}function At(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function jt(t,e){return Object(f["Sh"])(()=>{if(2!==t.shape.length)throw new b(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=At(t,1);return Tt(n,[1,e,1])})}function kt(t){const e=[yt(t.shape)];return t.reshape(e)}function Ct(t){if(t.rank<=1)throw new b(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],yt(t.shape,1)];return t.reshape(e)}function Et(t,e,n){return Object(f["Sh"])(()=>{switch(t.rank){case 1:return f["kh"](t,e,n);case 2:return f["lh"](t,[e,0],[n,t.shape[1]]);case 3:return f["mh"](t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return f["nh"](t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return f["jh"](t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return f["jh"](t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new b("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}})}function St(t,e,n){return Object(f["Sh"])(()=>{switch(t.rank){case 1:return f["kh"](t,e,n);case 2:return f["lh"](t,[0,e],[t.shape[0],n]);case 3:return f["mh"](t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return f["nh"](t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new b("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function Dt(t,e,n,r){return Object(f["Sh"])(()=>{switch(t.rank){case 1:return f["kh"](t,e,n);case 2:switch(r){case 1:return Et(t,e,n);case 2:return St(t,e,n);default:throw new b("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return Et(t,e,n);case 2:return f["mh"](t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return St(t,e,n);default:throw new b("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return Et(t,e,n);case 2:return f["nh"](t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return f["nh"](t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return St(t,e,n);default:throw new b("The axis is not within the rank of the tensor "+r)}default:throw new b("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function Ft(t,e=-1){let n;return e<0&&(n=t[0].rank,e=0!==n?n:0),e===t[0].rank&&(e=-1),f["Td"](t,e)}function Nt(t,e){switch(t.rank){case 1:return f["Ud"]([t,e]);case 2:return f["Vd"]([t,e],0);case 3:return f["Wd"]([t,e],0);case 4:return f["Xd"]([t,e],0);default:throw new b("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function Tt(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new b(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return f["Th"](t,e)}function Mt(t,e=0,n=1,r,i){return f["Ag"](t,e,n,r,i)}function It(t,e,n,r){if(t.rank<2||e.rank<2)throw new y(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const n=t.shape.slice(-1)[0],r=e.shape.slice(-2)[0];if(n!==r)throw new y(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = `+e.shape)}if(2===t.rank&&2===e.rank){const i=!1,a=!1;return f["Qe"].matMul({a:t,b:e,transposeA:i,transposeB:a,bias:r?Bt(t.rank,r,p()):null,activation:n})}{const i=t.shape.slice(),a=i.pop();t=t.reshape([-1,a]);const o=e.shape.slice(),s=o.pop(),u=o.pop(),c=[...o,s],l=Array.from({length:e.rank},(t,n)=>0===n?e.rank-2:n<=e.rank-2?n-1:n);e=e.transpose(l).reshape([u,-1]);const d=[...i,...c],h=!1,m=!1;return f["Qe"].matMul({a:t,b:e,transposeA:h,transposeB:m,bias:r?Bt(t.rank,r,p()):null,activation:n}).reshape(d)}}function Rt(t,e,n){return Object(f["Sh"])(()=>(e=Array.isArray(e)?Object(f["Kh"])(e,"int32"):e.toInt(),f["Re"](t,e,n)))}function $t(t){return f["Yf"](t,t)}function Bt(t,e,n){const r=e.shape;if(1!==e.rank&&e.rank!==t)throw new b("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+t);if(5===t){if("channelsFirst"===n)return 1===r.length?e.reshape([1,r[0],1,1,1]):e.reshape([1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?e.reshape([1,1,1,1,r[0]]):e.reshape([1].concat(r))}else if(4===t){if("channelsFirst"===n)return 1===r.length?e.reshape([1,r[0],1,1]):e.reshape([1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?e.reshape([1,1,1,r[0]]):e.reshape([1].concat(r))}else if(3===t){if("channelsFirst"===n)return 1===r.length?e.reshape([1,r[0],1]):e.reshape([1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?e.reshape([1,1,r[0]]):e.reshape([1].concat(r))}else if(t<3)return e;throw new b("Unsupported input rank by biasAdd: "+e.rank)}function zt(t,e,n){return Object(f["Sh"])(()=>(null==n&&(n=p()),ot(n),t.add(Bt(t.rank,e,n))))}function Lt(t,e=1){if(1!==e)throw new y(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return f["xe"](t)}function Pt(t){return Object(f["Sh"])(()=>f["se"](t,f["ld"](t).add(1)))}function Ut(t,e,n,r){return Object(f["Sh"])(()=>f["we"](t,e,n,r))}function Wt(t){return Object(f["Sh"])(()=>{const e=f["od"](.5,f["Yf"](.2,t));return f["Qd"](e,0,1)})}function qt(t,e,n=!1){return n?t():e()}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Vt=["fanIn","fanOut","fanAvg"],Gt=["normal","uniform","truncatedNormal"];
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Ht(t){I(Vt,"FanMode",t)}function Xt(t){I(Gt,"Distribution",t)}class Yt extends f["ah"].Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Kt extends Yt{apply(t,e){return Object(f["ni"])(t,e)}}Kt.className="Zeros",f["ah"].registerClass(Kt);class Jt extends Yt{apply(t,e){return Object(f["ig"])(t,e)}}Jt.className="Ones",f["ah"].registerClass(Jt);class Zt extends Yt{constructor(t){if(super(),"object"!==typeof t)throw new b("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new b("config must have value set but got "+t);this.value=t.value}apply(t,e){return Object(f["Sh"])(()=>Object(f["Yf"])(Object(f["Vg"])(this.value),Object(f["ig"])(t,e)))}getConfig(){return{value:this.value}}}Zt.className="Constant",f["ah"].registerClass(Zt);class Qt extends Yt{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,e){return Object(f["Bg"])(t,this.minval,this.maxval,e)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Qt.className="RandomUniform",f["ah"].registerClass(Qt);class te extends Yt{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if(e=e||"float32","float32"!==e&&"int32"!==e)throw new y(`randomNormal does not support dType ${e}.`);return Mt(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}te.className="RandomNormal",f["ah"].registerClass(te);class ee extends Yt{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if(e=e||"float32","float32"!==e&&"int32"!==e)throw new y(`truncatedNormal does not support dType ${e}.`);return Object(f["Yh"])(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}ee.className="TruncatedNormal",f["ah"].registerClass(ee);class ne extends Yt{constructor(t){super(),this.gain=null!=t.gain?t.gain:1}apply(t,e){return Object(f["Sh"])(()=>{if(2!==t.length||t[0]!==t[1])throw new b("Identity matrix initializer can only be used for 2D square matrices.");return Object(f["Yf"])(this.gain,Object(f["Je"])(t[0]))})}getConfig(){return{gain:this.gain}}}function re(t,e="channelsLast"){let n,r;if(ot(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length)){if("channelsFirst"===e){const e=yt(t,2);n=t[1]*e,r=t[0]*e}else if("channelsLast"===e){const e=yt(t,0,t.length-2);n=t[t.length-2]*e,r=t[t.length-1]*e}}else{const e=yt(t);n=Math.sqrt(e),r=Math.sqrt(e)}return[n,r]}ne.className="Identity",f["ah"].registerClass(ne);class ie extends Yt{constructor(t){if(super(),t.scale<0)throw new b("scale must be a positive float. Got: "+t.scale);this.scale=null==t.scale?1:t.scale,this.mode=null==t.mode?"fanIn":t.mode,Ht(this.mode),this.distribution=null==t.distribution?"normal":t.distribution,Xt(this.distribution),this.seed=t.seed}apply(t,e){const n=re(t),r=n[0],i=n[1];let a=this.scale;if("fanIn"===this.mode?a/=Math.max(1,r):"fanOut"===this.mode?a/=Math.max(1,i):a/=Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(a);if(e=e||"float32","float32"!==e&&"int32"!==e)throw new y(`${this.getClassName()} does not support dType ${e}.`);return Object(f["Yh"])(t,0,n,e,this.seed)}{const n=Math.sqrt(3*a);return Object(f["Bg"])(t,-n,n,e)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ie.className="VarianceScaling",f["ah"].registerClass(ie);class ae extends ie{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return ie.className}}ae.className="GlorotUniform",f["ah"].registerClass(ae);class oe extends ie{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return ie.className}}oe.className="GlorotNormal",f["ah"].registerClass(oe);class se extends ie{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return ie.className}}se.className="HeNormal",f["ah"].registerClass(se);class ue extends ie{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return ie.className}}ue.className="HeUniform",f["ah"].registerClass(ue);class ce extends ie{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return ie.className}}ce.className="LeCunNormal",f["ah"].registerClass(ce);class le extends ie{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return ie.className}}le.className="LeCunNormal",f["ah"].registerClass(le);class fe extends Yt{constructor(t){if(super(),this.DEFAULT_GAIN=1,this.gain=null==t.gain?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,null!=this.seed)throw new y("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,e){return Object(f["Sh"])(()=>{if(t.length<2)throw new y("Shape must be at least 2D.");t[0]*t[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${t[0]*t[1]}) elements: Slowness may result.`);const e=t[0]>t[1]?[t[1],t[0]]:t,n=Mt(e,0,1,"float32");let r=f["uf"].gramSchmidt(n);return t[0]>t[1]&&(r=r.transpose()),Object(f["Yf"])(this.gain,r)})}getConfig(){return{gain:this.gain,seed:this.seed}}}fe.className="Orthogonal",f["ah"].registerClass(fe);const de={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function he(t,e={}){return D(t,f["ah"].SerializationMap.getMap().classNameMap,e,"initializer")}function pe(t){return E(t)}function me(t){if("string"===typeof t){const e=t in de?de[t]:t;if("GlorotNormal"===e)return new oe;if("GlorotUniform"===e)return new ae;if("HeNormal"===e)return new se;if("HeUniform"===e)return new ue;if("LeCunNormal"===e)return new ce;if("LeCunUniform"===e)return new le;{const t={};return t["className"]=e,t["config"]={},he(t)}}return t instanceof Yt?t:he(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ge(){return new Kt}function be(){return new Jt}function ye(t){return new Zt(t)}function ve(t){return new Qt(t)}function xe(t){return new te(t)}function we(t){return new ee(t)}function Oe(t){return new ne(t)}function _e(t){return new ie(t)}function Ae(t){return new ae(t)}function je(t){return new oe(t)}function ke(t){return new se(t)}function Ce(t){return new ue(t)}function Ee(t){return new ce(t)}function Se(t){return new le(t)}function De(t){return new fe(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Fe=0;function Ne(){return Fe++}const Te={};function Me(t=""){return t in Te||(Te[t]=0),Te[t]+=1,t+Te[t].toString()}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ie(t){return Array.isArray(t)&&Array.isArray(t[0])}function Re(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function $e(t){let e;if(Array.isArray(t)){if(1!==t.length)throw new b("Expected Tensor length to be 1; got "+t.length);e=t[0]}else e=t;return e}function Be(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return t=t,t[0];throw new b("Expected exactly 1 Shape; got "+t.length)}return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ze(t){let e=0;for(const n of t)0===n.shape.length?e+=1:e+=n.shape.reduce((t,e)=>t*e);return e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Le="Variable";class Pe{constructor(t,e="float32",n=Le,r=!0,i=null){this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=Ne(),n=null==n?Le:n,this.originalName=ht(n),this.name=pt(this.originalName),this.trainable_=r,this.constraint=i,this.val=f["ii"](t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),Ue(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function Ue(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function We(t){return t.map(t=>t.read())}function qe(t){t.forEach(t=>{const e=t[0];e.write(t[1])})}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Ve{constructor(t){this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class Ge{constructor(t,e,n,r,i,a,o){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=o,this.id=Ne(),null!=a&&(this.originalName=ht(a),this.name=pt(this.originalName)),this.rank=e.length}}let He=0;class Xe{constructor(t,e){this.callArgs=e,this.id=He++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const n of t.inboundLayers)null!=n&&n.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)null!=e?t.push(e.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Ye=0;class Ke extends f["ah"].Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Ye++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=t.name;if(!e){const t=this.getClassName();e=j(t)+"_"+Me(t)}if(this.name=e,this.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){let e;if(null!=t.batchInputShape)e=t.batchInputShape;else if(null!=t.inputShape){let n=null;null!=t.batchSize&&(n=t.batchSize),e=[n].concat(t.inputShape)}this.batchInputShape=e;let n=t.dtype;null==n&&(n=t.inputDType),null==n&&(n="float32"),this.dtype=n}null!=t.weights?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(0===this.inboundNodes.length)throw new g(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new b(`Asked to get ${e} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return _(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return _(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new m("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new m("Layer "+this.name+" is not connected, no input to return.");return _(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new m("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new m("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return _(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=A(t),null==this.inputSpec||0===this.inputSpec.length)return;const e=A(this.inputSpec);if(t.length!==e.length)throw new b(`Layer ${this.name} expects ${e.length} inputs, but it received ${t.length} input tensors. Input received: `+t);for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(null==i)continue;const a=r.rank;if(null!=i.ndim&&a!==i.ndim)throw new b(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(null!=i.maxNDim&&a>i.maxNDim)throw new b(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(null!=i.minNDim&&a<i.minNDim)throw new b(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new b(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const t=r.shape;for(const e in i.axes){const r=Number(e),a=i.axes[e],o=r>=0?t[r]:t[t.length+r];if(null!=a&&-1===[a,null].indexOf(o))throw new b(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${a} but got shape ${t}.`)}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){const e=i.shape[t],a=r.shape[t];if(null!=e&&null!=a&&e!==a)throw new b(`Input ${n} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){null!=this._callHook&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const n=A(t);let r=!0;for(const a of n)if(!(a instanceof Ge)){r=!1;break}let i=!0;for(const a of n)if(a instanceof Ge){i=!1;break}if(r===i)throw new b("Arguments to apply() must be all SymbolicTensors or all Tensors");return ft(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const e=[];for(const n of A(t))e.push(n.shape);this.build(_(e)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(t),i){let r=this.call(t,e);const i=A(r),a=[];for(let t of i)-1!==n.indexOf(t)&&(t=t.clone()),a.push(t);if(r=_(a),null!=this.activityRegularizer)throw new y("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=Je(t),r=this.computeOutputShape(n);let i;const a=Ze(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new Ge(a,n,this,A(t),e,this.name,r)):new Ge(a,r,this,A(t),e,this.name),this.addInboundNode(t,i,null,null,n,r,e),this._refCount++,null!=this.activityRegularizer)throw new y("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}})}warnOnIncompatibleInputShape(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the "+`batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer `+this.name);else{let e=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: `+JSON.stringify(this.batchInputShape))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new m(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const e of this.inboundNodes){const n=JSON.stringify(e.outputShapes);-1===t.indexOf(n)&&t.push(n)}if(1===t.length){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&1===t.length?t[0]:t}throw new m(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new g(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return ze(this.weights)}build(t){this.built=!0}getWeights(t=!1){return We(t?this.trainableWeights:this.weights)}setWeights(t){Object(f["Sh"])(()=>{const e=this.weights;if(e.length!==t.length)throw new b(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${e.length} weights. Provided weights: ${t}...`);if(0===e.length)return;const n=[],r=We(e);for(let i=0;i<r.length;++i){const a=r[i],o=e[i],s=t[i];if(!f["fi"].arraysEqual(a.shape,s.shape))throw new b(`Layer weight shape ${a.shape} not compatible with provided weight shape `+s.shape);n.push([o,s])}qe(n)})}addWeight(t,e,n,r,i,a,o){if(-1!==this._addedWeightNames.indexOf(t))throw new b(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=me("zeros"));const s=r.apply(e,n),u=new Pe(s,n,t,a,o);return s.dispose(),null!=i&&this.addLoss(()=>i.apply(u.read())),null==a&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){null==t||Array.isArray(t)&&0===t.length||(t=A(t),void 0!==this._losses&&null!==this._losses&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);e.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return e}addInboundNode(t,e,n,r,i,a,o=null){const s=A(t);e=A(e),n=A(n),r=A(r),i=Re(i),a=Re(a);const u=[],c=[],l=[];for(const f of s)u.push(f.sourceLayer),c.push(f.nodeIndex),l.push(f.tensorIndex);new Xe({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:l,inputTensors:s,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:a},o);for(let f=0;f<e.length;f++)e[f].sourceLayer=this,e[f].nodeIndex=this.inboundNodes.length-1,e[f].tensorIndex=f}getConfig(){const t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t["batchInputShape"]=this.batchInputShape),null!=this.dtype&&(t["dtype"]=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return 0===--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function Je(t){t=A(t);const e=[];for(const n of t)e.push(n.shape);return _(e)}function Ze(t){return"float32"}function Qe(t,e,n){if((null==e||null!=n&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),0===e.inboundNodes.length)return[t];{const t=e.inboundNodes[n];if(0===t.inboundLayers.length)return t.inputTensors;{const e=[];for(let n=0;n<t.inboundLayers.length;n++){const r=t.inputTensors[n],i=t.inboundLayers[n],a=t.nodeIndices[n],o=Qe(r,i,a);for(const t of o)-1===e.indexOf(t)&&e.push(t)}return e}}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tn extends Ke{constructor(t){if(super({dtype:t.dtype,name:null!=t.name?t.name:Me("input").toString()}),null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new b("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let e=t.batchInputShape;if(null==e){if(null==t.inputShape)throw new b("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");e=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new b("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=t.dtype||"float32";this.batchInputShape=e,this.dtype=n,this.inputSpec=[{shape:e}];const r=new Ge(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Xe({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[e],outputShapes:[e]})}apply(t,e){throw new b("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function en(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new b("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));let n=t.dtype;null==n&&(n="float32");const r=new tn({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}),i=r.inboundNodes[0].outputTensors;return i[0]}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function nn(t){if(null==t)return;const e=[],n=[],r=[];for(const i in t){const a=t[i];if("number"!==typeof a){const t=a;e.push(t.data()),n.push(i),r.push(t)}}if(e.length>0){const i=await Promise.all(e);for(let e=0;e<i.length;++e)t[n[e]]=i[e][0];Object(f["qe"])(r)}}function rn(t){if(null!=t)for(const e in t){const n=t[e];"number"!==typeof n&&n.dispose()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var an;tn.className="InputLayer",f["ah"].registerClass(tn),function(t){t[t["SILENT"]=0]="SILENT",t[t["VERBOSE"]=1]="VERBOSE"}(an||(an={}));const on=125;class sn{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,e){}async onEpochEnd(t,e){}async onBatchBegin(t,e){}async onBatchEnd(t,e){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class un{constructor(t,e=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=e}append(t){this.callbacks.push(t)}setParams(t){for(const e of this.callbacks)e.setParams(t)}setModel(t){for(const e of this.callbacks)e.setModel(t)}async onEpochBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochBegin(t,e)}async onEpochEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochEnd(t,e)}async onBatchBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchBegin(t,e)}async onBatchEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchEnd(t,e)}async onTrainBegin(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainEnd(t)}}class cn extends sn{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,e){null==e&&(e={});const n=null==e["size"]?0:e["size"];this.seen+=n;for(const r in e){const t=e[r];if("number"===typeof t)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+t*n;else{let e;r in this.totals?e=this.totals[r]:this.totals[r]=0;const i=Object(f["Sh"])(()=>Object(f["od"])(this.totals[r],Object(f["Yf"])(t,n)));this.totals[r]=i,null!=e&&e.dispose()}}}async onEpochEnd(t,e){if(null!=e)for(const n of this.params["metrics"])null!=this.totals[n]&&("number"===typeof this.totals[n]?e[n]=this.totals[n]/this.seen:Object(f["Sh"])(()=>{const t=Object(f["Yf"])(Object(f["se"])(1,this.seen),this.totals[n]);e[n]=t,this.totals[n].dispose(),Object(f["nf"])(e[n])}))}}class ln extends sn{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,e){null==e&&(e={}),this.epoch.push(t);for(const n in e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n])}async syncData(){const t=[],e=[],n=[];for(const i in this.history){const r=this.history[i];for(let a=0;a<r.length;++a)if("number"!==typeof r[a]){const o=r[a];t.push(o.data()),e.push(i),n.push(a)}}const r=await Promise.all(t);for(let i=0;i<r.length;++i){const t=this.history[e[i]][n[i]];t.dispose(),this.history[e[i]][n[i]]=r[i][0]}}}class fn extends sn{constructor(t,e){if(super(),this.currentEpoch=0,this.yieldEvery=e||"auto","auto"===this.yieldEvery&&(this.yieldEvery=on),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");f["fi"].isNumber(this.yieldEvery)&&(this.maybeWait=z(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,e,n){const r=[];null!=this.yield&&(await nn(n),r.push(this.yield(t,e,n))),r.push(Object(f["dg"])()),await Promise.all(r)}async onEpochBegin(t,e){this.currentEpoch=t,null!=this.epochBegin&&(await nn(e),await this.epochBegin(t,e))}async onEpochEnd(t,e){const n=[];null!=this.epochEnd&&(await nn(e),n.push(this.epochEnd(t,e))),"epoch"===this.yieldEvery&&n.push(Object(f["dg"])()),await Promise.all(n)}async onBatchBegin(t,e){null!=this.batchBegin&&(await nn(e),await this.batchBegin(t,e))}async onBatchEnd(t,e){const n=[];null!=this.batchEnd&&(await nn(e),n.push(this.batchEnd(t,e))),"batch"===this.yieldEvery?n.push(Object(f["dg"])()):f["fi"].isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,t,e)),await Promise.all(n)}async onTrainBegin(t){null!=this.trainBegin&&(await nn(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await nn(t),await this.trainEnd(t))}}function dn(t,e){if(null==t&&(t={}),t instanceof sn)return[t];if(Array.isArray(t)&&t[0]instanceof sn)return t;const n=A(t);return n.map(t=>new fn(t,e))}class hn{constructor(){}static registerCallbackConstructor(t,e){f["fi"].assert(t>=0&&Number.isInteger(t),()=>"Verbosity level is expected to be an integer >= 0, but got "+t),hn.checkForDuplicate(e),null==hn.constructors[t]&&(hn.constructors[t]=[]),hn.constructors[t].push(e)}static checkForDuplicate(t){for(const e in hn.constructors){const n=hn.constructors[+e];n.forEach(e=>{if(e===t)throw new b("Duplicate callback constructor.")})}}static clear(){hn.constructors={}}static createCallbacks(t){const e=[];for(const n in hn.constructors){const r=+n;t>=r&&e.push(...hn.constructors[r])}return e.map(t=>new t)}}function pn(t,e,n,r,i,a,o,s,u){const c=new ln,l=[new cn,...hn.createCallbacks(e)];null!=t&&l.push(...t),l.push(c);const f=new un(l);return f.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:e,doValidation:s,metrics:u}),{callbackList:f,history:c}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mn(t,e={},n=!1){return D(t,f["ah"].SerializationMap.getMap().classNameMap,e,"layer",n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gn(t,e){return Object(f["Sh"])(()=>{"float32"!==t.dtype&&(t=t.asType("float32"));const n=f["Fh"]($t(t),e,!0),r=f["Le"](n.shape,h()),i=f["vh"](f["Nf"](n,r));return f["se"](t,i)})}function bn(t,e){return Object(f["Sh"])(()=>f["Pf"]($t(f["Dh"](e,t)),-1))}function yn(t,e){return Object(f["Sh"])(()=>f["Pf"](f["ld"](f["Dh"](e,t)),-1))}function vn(t,e){return Object(f["Sh"])(()=>{const n=f["Dh"](t,e),r=f["Qd"](f["ld"](t),h(),Number.MAX_VALUE),i=f["ld"](f["se"](n,r));return f["Yf"](100,f["Pf"](i,-1))})}function xn(t,e){return Object(f["Sh"])(()=>{const n=f["Qd"](e,h(),Number.MAX_VALUE),r=f["xf"](f["od"](1,n)),i=f["Qd"](t,h(),Number.MAX_VALUE),a=f["xf"](f["od"](1,i));return f["Pf"]($t(f["Dh"](r,a)),-1)})}function wn(t,e){return Object(f["Sh"])(()=>{const n=f["Nf"](0,f["Dh"](1,f["Yf"](t,e)));return f["Pf"]($t(n),-1)})}function On(t,e){return Object(f["Sh"])(()=>{const n=f["Nf"](0,f["Dh"](1,f["Yf"](t,e)));return f["Pf"](n,-1)})}function _n(t,e){return Object(f["Sh"])(()=>{const n=f["Fh"](f["Yf"](t,e),-1),r=f["Jf"](f["Yf"](f["Dh"](1,t),e),-1);return f["Nf"](0,f["od"](1,f["Dh"](r,n)))})}function An(t,e){return Object(f["Sh"])(()=>{const n=Math.log(2),r=f["Dh"](e,t),i=f["Dh"](f["od"](r,f["qh"](f["Yf"](-2,r))),n);return f["Pf"](i,-1)})}function jn(t,e,n=!1){return Object(f["Sh"])(()=>{if(n)e=f["ph"](e);else{const t=f["Fh"](e,e.shape.length-1,!0);e=f["se"](e,t)}return e=f["Qd"](e,h(),1-h()),f["cg"](f["Fh"](f["Yf"](t.toFloat(),f["xf"](e)),e.shape.length-1))})}function kn(t,e,n=!1){return Object(f["Sh"])(()=>{const r=f["Oe"](kt(t)).toInt();e=f["Qd"](e,h(),1-h());const i=e.shape,a=f["hg"](r,i[i.length-1]).reshape(i);return jn(a,e,n)})}function Cn(t,e){if(!f["fi"].arraysEqual(t.shape,e.shape))throw new b(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Object(f["Sh"])(()=>{const n=e.relu(),r=e.abs().neg();return n.sub(e.mul(t)).add(r.exp().log1p())})}function En(t,e){return Object(f["Sh"])(()=>{let n;return n=f["Qd"](e,h(),1-h()),n=f["xf"](f["se"](n,f["Dh"](1,n))),f["Pf"](Cn(t,n),-1)})}function Sn(t,e){return Object(f["Sh"])(()=>{const n=f["Qd"](t,h(),1),r=f["Qd"](e,h(),1);return f["Fh"](f["Yf"](t,f["xf"](f["se"](n,r))),-1)})}function Dn(t,e){return Object(f["Sh"])(()=>{const n=f["xf"](f["od"](h(),e));return f["Pf"](f["Dh"](e,f["Yf"](t,n)),-1)})}function Fn(t,e){return Object(f["Sh"])(()=>{const n=gn(t,-1),r=gn(e,-1),i=f["Yf"](n,r);return f["cg"](f["Fh"](i,-1))})}hn.constructors={};const Nn={meanSquaredError:bn,meanAbsoluteError:yn,meanAbsolutePercentageError:vn,meanSquaredLogarithmicError:xn,squaredHinge:wn,hinge:On,categoricalHinge:_n,logcosh:An,categoricalCrossentropy:jn,sparseCategoricalCrossentropy:kn,binaryCrossentropy:En,kullbackLeiblerDivergence:Sn,poisson:Dn,cosineProximity:Fn};function Tn(t){if("string"===typeof t){if(t in Nn)return Nn[t];let e="Unknown loss "+t;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new b(e)}return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mn(t,e){return Object(f["Sh"])(()=>{const n=f["Yf"](.5,f["jg"](e)),r=_t(f["af"](e,n),t.dtype);return f["Pf"](f["De"](t,r),-1)})}function In(t,e){return Object(f["Sh"])(()=>_t(f["De"](f["td"](t,-1),f["td"](e,-1)),"float32"))}function Rn(t,e){return Object(f["Sh"])(()=>f["Cf"](t.equal(1),e.equal(1)).sum().cast("float32"))}function $n(t,e){return Object(f["Sh"])(()=>f["Cf"](t.equal(1),e.equal(0)).sum().cast("float32"))}function Bn(t,e){return Object(f["Sh"])(()=>f["Cf"](t.equal(0),e.equal(1)).sum().cast("float32"))}function zn(t,e){return Object(f["Sh"])(()=>{const n=Rn(t,e),r=Bn(t,e),i=n.add(r);return f["li"](f["af"](i,0),n.div(i),0).cast("float32")})}function Ln(t,e){return Object(f["Sh"])(()=>{const n=Rn(t,e),r=$n(t,e),i=n.add(r);return f["li"](f["af"](i,0),n.div(i),0).cast("float32")})}function Pn(t,e){return En(t,e)}function Un(t,e){return t.rank===e.rank&&(t=t.squeeze([t.rank-1])),e=e.argMax(-1),e.dtype!==t.dtype&&(e=e.asType(t.dtype)),f["De"](t,e).asType("float32")}const Wn=bn,qn=bn,Vn=yn,Gn=yn,Hn=vn,Xn=vn,Yn=jn,Kn=Fn,Jn=kn,Zn={binaryAccuracy:Mn,categoricalAccuracy:In,precision:zn,categoricalCrossentropy:Yn,sparseCategoricalCrossentropy:Jn,mse:Wn,MSE:qn,mae:Vn,MAE:Gn,mape:Hn,MAPE:Xn,cosine:Kn};function Qn(t){if("string"===typeof t&&t in Zn)return Zn[t];if("string"!==typeof t&&null!=t)return t;throw new b("Unknown metric "+t)}function tr(t){if(w(null!==t,"Unknown LossOrMetricFn "+t),"string"===typeof t)return t;{let e;for(const n of Object.keys(Nn))if(Nn[n]===t){e=n;break}if(void 0!==e)return e;for(const n of Object.keys(Zn))if(Zn[n]===t){e=n;break}return void 0!==e?e:t.name}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function er(t){const e={Adagrad:()=>f["Wh"].adagrad(.01),Adadelta:()=>f["Wh"].adadelta(1,.95,h()),Adam:()=>f["Wh"].adam(.001,.9,.999,h()),Adamax:()=>f["Wh"].adamax(.002,.9,.999,h(),0),RMSProp:()=>f["Wh"].rmsprop(.001,.9,0,h()),SGD:()=>f["Wh"].sgd(.01)};if(e["adagrad"]=e["Adagrad"],e["adadelta"]=e["Adadelta"],e["adam"]=e["Adam"],e["adamax"]=e["Adamax"],e["rmsprop"]=e["RMSProp"],e["sgd"]=e["SGD"],t in e)return e[t]();throw new b("Unknown Optimizer "+t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nr=1048576;function rr(t,e,n=!1){if(null==t||"object"!==typeof t||Object.getPrototypeOf(t)!==Object.prototype||!ir(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(t);n.length>nr&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= `+nr+".")}}function ir(t){if(null===t)return!0;if("object"===typeof t){if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e){if("string"!==typeof n)return!1;if(!ir(t[n]))return!1}return!0}if(Array.isArray(t)){for(const e of t)if(!ir(e))return!1;return!0}return!1}{const e=typeof t;return"string"===e||"number"===e||"boolean"===e}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ar(t,e,n,r=console.log){const i=sr(t),a=["Layer (type)","Output shape","Param #"];let o;if(i?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(t=>Math.floor(e*t))),!i){a.push("Receives inputs"),o=[];for(const e in t.nodesByDepth)o.push(...t.nodesByDepth[e])}r("_".repeat(e)),ur(a,n,r),r("=".repeat(e));const s=t.layers;for(let l=0;l<s.length;++l)i?cr(s[l],n,r):lr(s[l],n,o,r),r((l===s.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const u=or(t),c=ze(t.nonTrainableWeights);r("Total params: "+(u+c)),r("Trainable params: "+u),r("Non-trainable params: "+c),r("_".repeat(e))}function or(t){let e;return e=null!=t.collectedTrainableWeights?ze(t.collectedTrainableWeights):ze(t.trainableWeights),e}function sr(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let t=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(t){e=!1;break}t=!0}if(!e)break}return e}function ur(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function cr(t,e,n){let r;try{r=JSON.stringify(t.outputShape)}catch(s){r="multiple"}const i=t.name,a=t.getClassName(),o=[`${i} (${a})`,r,t.countParams().toString()];ur(o,e,n)}function lr(t,e,n,r){let i;try{i=JSON.stringify(t.outputShape)}catch(l){i="multiple"}const a=[];for(const f of t.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(f)))for(let t=0;t<f.inboundLayers.length;++t){const e=f.inboundLayers[t].name,n=f.nodeIndices[t],r=f.tensorIndices[t];a.push(`${e}[${n}][${r}]`)}const o=t.name,s=t.getClassName(),u=0===a.length?"":a[0],c=[`${o} (${s})`,i,t.countParams().toString(),u];ur(c,e,r);for(let f=1;f<a.length;++f)ur(["","","",a[f]],e,r)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fr(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"===typeof n}function dr(t,e){if(null===t)return null;if("string"===typeof t)return k(t);if("number"===typeof t||"boolean"===typeof t)return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const r=t[i];fr(e,i,r)?n.push(r):n.push(dr(r,e))}return n}{const e={};for(const n of Object.keys(t)){const r=t[n];if("name"===n&&"string"===typeof r)e[n]=r;else{const t=k(n);e[t]=dr(r,t)}}return e}}function hr(t,e){if(null===t||void 0===t)return null;if("string"===typeof t)return j(t);if("number"===typeof t||"boolean"===typeof t)return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const r=t[i];fr(e,i,r)?n.push(r):n.push(hr(r,e))}return n}{const e={};for(const n of Object.keys(t)){const r=t[n],i=j(n);e[i]="name"!==n&&"className"!==n||"string"!==typeof r?hr(r,n):r}return e}}
/** @license See the LICENSE file. */const pr="2.6.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mr(t,e){if(null==t.dtype||t.dtype===e.dtype)return e;try{return Object(f["Od"])(e,t.dtype)}catch(n){throw new b(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class gr{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof gr)for(const e in t.id2Value)this.id2Value[e]=t.id2Value[e],e in t.id2Mask&&(this.id2Mask[e]=t.id2Mask[e]);else{if(null==t)return;for(const e of t)this.add(e.key,e.value)}}add(t,e,n){if(null!=this.id2Value[t.id])throw new b(`Duplicate key: name=${t.name}, id=${t.id}`);return this.id2Value[t.id]=mr(t,e),this.name2Id[t.name]=t.id,null!=n&&(this.id2Mask[t.id]=n),this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return null!=this.id2Value[t.id]}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Ge){if(null==this.id2Value[t.id])throw new b("Nonexistent key: "+t.name);return this.id2Value[t.id]}{const e=this.name2Id[t];if(null==e)throw new b("Feed dict has no SymbolicTensor name: "+t);return this.id2Value[e]}}getMask(t){if(t instanceof Ge){if(null==this.id2Value[t.id])throw new b("Nonexistent key: "+t.name);return this.id2Mask[t.id]}{const e=this.name2Id[t];if(null==e)throw new b("Feed dict has no SymbolicTensor name: "+t);return this.id2Mask[e]}}disposeMasks(){null!=this.id2Mask&&Object(f["qe"])(this.id2Mask)}}const br={},yr={};function vr(t,e,n,r){const i=null!=n&&n["training"],a=Array.isArray(t),o=a?t:[t],s=o.map(t=>t.name),u=[],c=e.names();for(const f of s)-1!==c.indexOf(f)?u.push(e.getValue(f)):u.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const l=s.join(",")+"|"+e.names().join(",");let d,h;if(null==br[l]){const t=xr(o,e);d=t.sorted,h=t.recipientCounts,br[l]=d,yr[l]=h}d=br[l],h={},i||Object.assign(h,yr[l]);const p=new gr(e);for(let m=0;m<d.length;++m){if(null!=r){const t=Object(f["Qf"])().numTensors;t>r.maxNumTensors&&(r.maxNumTensors=t),t<r.minNumTensors&&(r.minNumTensors=t)}const t=d[m],a=t.sourceLayer;if(a instanceof tn)continue;const o=[],c=[],l=[];let g=!1;for(const n of t.inputs){const t=p.getValue(n),r=p.getMask(n);o.push(t),c.push(r),null!=r&&(g=!0),i||(h[n.name]--,0!==h[n.name]||e.hasKey(n)||-1!==s.indexOf(n.name)||t.isDisposed||!0===n.sourceLayer.stateful||l.push(t))}g&&(n=n||{},n["mask"]=c[0]);const b=A(a.apply(o,n));let y=null;a.supportsMasking&&(y=a.computeMask(o,c));const v=_r(t),x=Array.isArray(v)?v:[v];for(let e=0;e<x.length;++e){p.hasKey(x[e])||p.add(x[e],b[e],Array.isArray(y)?y[0]:y);const t=s.indexOf(x[e].name);-1!==t&&(u[t]=b[e])}i||Object(f["qe"])(l)}return p.disposeMasks(),a?u:u[0]}function xr(t,e){f["fi"].assert(null!=t&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===t.length){const i=Or(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const a of t){const{sorted:t,recipientMap:o}=Or(a,e);for(const e of t)i.has(e.name)||(n.push(e),i.add(e.name));for(const e in o)null==r[e]&&(r[e]=new Set),o[e].forEach(t=>r[e].add(t))}}return{sorted:n,recipientCounts:wr(r)}}function wr(t){const e={};for(const n in t)e[n]=t[n].size;return e}function Or(t,e){const n=new Set,r=[],i={};for(const s of e.names())n.add(s);const a=[],o=[];a.push(t);while(a.length>0){const t=a[a.length-1];if(n.has(t.name)){a.pop();continue}const e=o[o.length-1]===a.length-1;if(0===t.inputs.length||e)a.pop(),r.push(t),n.add(t.name),e&&o.pop();else{o.push(a.length-1);for(const e of t.inputs)null==i[e.name]&&(i[e.name]=new Set),i[e.name].add(t.name),n.has(e.name)||a.push(e)}}return{sorted:r,recipientMap:i}}function _r(t){let e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{let n=null;for(let e=0;e<t.sourceLayer.inboundNodes.length;++e)for(const r of t.sourceLayer.inboundNodes[e].outputTensors)if(r.id===t.id){n=e;break}e=t.sourceLayer.getOutputAt(n)}return e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ar extends Ke{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){const t=this.getClassName().toLowerCase();this.name=Me(t)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],T(this.inputs).length!==this.inputs.length)throw new b("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+this.inputs.map(t=>t.name));T(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+this.outputs.map(t=>t.name)),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const g of this.outputs){const t=g.sourceLayer,e=g.nodeIndex,n=g.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(e),this.outputLayersTensorIndices.push(n)}for(const g of this.inputs){const t=g.sourceLayer,e=g.nodeIndex,n=g.tensorIndex;w(0===e,"input layer has >1 nodes"),w(0===n,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(e),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let g=0;g<this.inputLayers.length;g++){const e=this.inputLayers[g];if(!(e instanceof tn))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${g} (0-based) originates from layer type ${e.getClassName()}.`);this.inputNames.push(e.name),this.feedInputShapes.push(e.batchInputShape),this.feedInputNames.push(e.name)}for(const g of this.outputLayers)this.outputNames.push(g.name);this.internalInputShapes=this.inputs.map(t=>t.shape),this.internalOutputShapes=this.outputs.map(t=>t.shape);const e={},n={},r={},i={},a={},o=[],s=(t,e,n,r,i,u)=>{null!=r&&null!=i&&null!=u||(r=t.sourceLayer,i=t.nodeIndex,u=t.tensorIndex);const c=r.inboundNodes[i];if(-1!==n.indexOf(c))throw new g(`The tensor ${t.name} at layer "${r.name}" is part of a cycle.`);if(-1!==e.indexOf(c))return;this.containerNodes.add(Ar.nodeKey(r,i)),r.id in a||(a[r.id]=Object.keys(a).length),-1===n.indexOf(c)&&n.push(c);const l=c.inboundLayers.length;for(let a=0;a<l;a++){const t=c.inputTensors[a],r=c.inboundLayers[a],i=c.nodeIndices[a],o=c.tensorIndices[a];s(t,e,n,r,i,o)}e.push(c);while(n.indexOf(c)>=0)n.splice(n.indexOf(c),1);o.push(c)},u=[],c=[];for(const g of this.outputs)s(g,u,c);const l=o.slice().reverse();for(const g of l){n[g.id]=g,g.id in e||(e[g.id]=0);let t=e[g.id];const a=null==r[g.outboundLayer.id]?0:r[g.outboundLayer.id];t=Math.max(t,a),r[g.outboundLayer.id]=t,i[g.outboundLayer.id]=g.outboundLayer,e[g.id]=t;for(let r=0;r<g.inboundLayers.length;r++){const i=g.inboundLayers[r],a=g.nodeIndices[r],o=i.inboundNodes[a],s=null==e[o.id]?0:e[o.id];e[o.id]=Math.max(t+1,s),n[o.id]=o}}const f={};for(const g in e){const t=e[g];t in f||(f[t]=[]),f[t].push(n[g])}const d={};for(const g in r){const t=r[g];t in d||(d[t]=[]),d[t].push(i[g])}let h=Object.keys(d).map(t=>parseInt(t,10)).sort(N);this.layers=[];for(const g of h){const t=d[g];t.sort((t,e)=>{const n=a[t.id],r=a[e.id];return n<r?-1:n>r?1:0});for(const e of t)e instanceof Ar&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=d,h=Object.keys(f).map(t=>parseInt(t,10)).sort(N);const p=this.inputs.slice(),m=[];for(const b of h)for(const t of f[b]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===p.indexOf(n))throw new g("Graph disconnected: cannot obtain value for tensor "+n+` at layer "${e.name}". The following previous layers were accessed without issue: `+m);for(const e of t.outputTensors)p.push(e);m.push(e.name)}}this.nodesByDepth=f;const y=this.layers.map(t=>t.name);for(const b of y){const t=y.filter(t=>t===b).length;if(1!==t)throw new g(`The name "${b}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new Xe({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(t=>null),outputMasks:this.outputs.map(t=>null),inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs.map(t=>t.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(e=>e.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new b("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.layers)e.push(...t.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const n={};let r=0;for(const a of this.layers)for(const t of a.weights){if(null!=n[t.originalName])throw new b("Duplicate weight name: "+t.originalName);n[t.originalName]=t,r++}const i=[];for(const a in t){let r=a;if(null==n[a]){const t=a.split("/"),e=t.slice(0,-2).concat([t[t.length-1]]);r=e.join("/")}if(null!=n[r])i.push([n[r],t[a]]);else if(e)throw new b("Provided weight data has no target variable: "+a);delete n[r]}if(e){const t=[];for(const e in n)t.push(e);if(t.length>0)throw new b(`${t.length} of ${r} weights are not set: `+t)}qe(i)}updatedConfig(){const t=this.getConfig(),e={};return e["className"]=this.getClassName(),e["config"]=t,e["kerasVersion"]="tfjs-layers "+pr,e["backend"]="TensorFlow.js",e}toJSON(t,e=!0){const n=hr(this.updatedConfig());return e?JSON.stringify(n):n}call(t,e){return Object(f["Sh"])(()=>{t=A(t);const n=new gr;for(let e=0;e<this.inputs.length;++e)n.add(this.inputs[e],t[e]);return vr(this.outputs,n,e)})}computeMask(t,e){return Object(f["Sh"])(()=>{let n;return t=A(t),n=null==e?x(null,t.length):A(e),this.runInternalGraph(t,n)[1]})}computeOutputShape(t){const e=Re(t);if(e.length!==this.inputLayers.length)throw new b(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let o=0;o<e.length;o++){const t=this.inputLayers[o],r=e[o],i=t.name+"_0_0";n[i]=r}const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(N);if(r.length>1)for(const o of r){const t=this.nodesByDepth[o];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map(t=>t.id).indexOf(t.id))continue;const r=[];for(let s=0;s<e.inboundLayers.length;s++){const t=e.inboundLayers[s],i=e.nodeIndices[s],a=e.tensorIndices[s],o=`${t.name}_${i}_${a}`,u=n[o];r.push(u)}const i=t.computeOutputShape(_(r)),a=Re(i),o=t.inboundNodes.indexOf(e);for(let e=0;e<a.length;e++){const r=`${t.name}_${o}_${e}`;n[r]=a[e]}}}const i=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const t=this.outputLayers[o],e=this.outputLayersNodeIndices[o],n=this.outputLayersTensorIndices[o],r=`${t.name}_${e}_${n}`;a.push(r)}for(let o=0;o<a.length;o++){const t=a[o];w(t in n),i.push(n[t])}return _(i)}runInternalGraph(t,e){null==e&&(e=x(null,t.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],i=t[s],a=e[s];n[r.id]=[i,a]}const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(N);for(const s of r){const t=this.nodesByDepth[s];for(const e of t){const t=e.outboundLayer,r=e.inputTensors,i=e.outputTensors,a=new Array;for(const e of r)e.id in n&&a.push(n[e.id]);if(a.length===r.length){let r,o,s,u,c={};if(null!=e.callArgs&&(c=e.callArgs),1===a.length){const[e,n]=a[0];null==c["mask"]&&(c["mask"]=n),s=A(t.call(e,c)),u=A(t.computeMask(e,n)),r=[e],o=[n]}else r=a.map(t=>t[0]),o=a.map(t=>t[1]),null==c["mask"]&&(c["mask"]=o),s=A(t.call(r,c)),u=A(t.computeMask(r,o));if(t.activityRegularizer)throw new y("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let t=0;t<i.length;++t){const e=i[t],r=s[t],a=u[t];n[e.id]=[r,a]}}}}const i=[],a=[],o=[];for(const s of this.outputs){w(s.id in n,`Could not compute output ${s.name} : ${s.id}`);const[t,e]=n[s.id];o.push(t.shape),i.push(t),a.push(e)}return[i,a,o]}buildNodeConversionMap(t){const e={};let n;for(const r of this.layers){n=r instanceof Ar?1:0;for(let t=0;t<r.inboundNodes.length;t++){const i=Ar.nodeKey(r,t);this.containerNodes.has(i)&&(e[i]=n,n+=1)}}return e}getLayer(t,e){if(null!=e){if(this.layers.length<=e)throw new b(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}if(null==t)throw new b("Provide either a layer name or layer index");for(const n of this.layers)if(n.name===t)return n;throw new b("No such layer: "+t)}calculateLosses(){return Object(f["Sh"])(()=>{const t=[];for(const e of this.layers)for(let n=0;n<e.inboundNodes.length;++n){const r=Ar.nodeKey(e,n);this.containerNodes.has(r)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),n=[];for(const o of this.layers){const t=o.getClassName(),r=o.getConfig(),i=[];for(let n=0;n<o.inboundNodes.length;n++){const t=o.inboundNodes[n],r=Ar.nodeKey(o,n);let s={};if(this.containerNodes.has(r)){if(t.callArgs)try{JSON.stringify(t.callArgs),s=t.callArgs}catch(a){console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: `+t.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),s={}}if(t.inboundLayers.length>0){const n=[];for(let r=0;r<t.inboundLayers.length;r++){const i=t.inboundLayers[r],a=t.nodeIndices[r],o=t.tensorIndices[r],u=Ar.nodeKey(i,a);let c=e[u];null==c&&(c=0),n.push([i.name,c,o,s])}i.push(n)}}}const s={};s["name"]=o.name,s["className"]=t,s["config"]=r,s["inboundNodes"]=i,n.push(s)}t["layers"]=n;const r=[];for(let o=0;o<this.inputLayers.length;o++){const t=this.inputLayers[o],n=this.inputLayersNodeIndices[o],i=Ar.nodeKey(t,n);if(!this.containerNodes.has(i))continue;let a=e[i];null!==a&&void 0!==a||(a=0);const s=this.inputLayersTensorIndices[o];r.push([t.name,a,s])}t["inputLayers"]=r;const i=[];for(let o=0;o<this.outputLayers.length;o++){const t=this.outputLayers[o],n=this.outputLayersNodeIndices[o],r=Ar.nodeKey(t,n);if(!this.containerNodes.has(r))continue;let a=e[r];null!==a&&void 0!==a||(a=0);const s=this.outputLayersTensorIndices[o];i.push([t.name,a,s])}return t["outputLayers"]=i,t}static fromConfig(t,e,n={},r=!1){const i={},a={};function o(t,e){t.name in a?a[t.name].push(e):a[t.name]=[e]}function s(t,e){const n=[];let r;for(const a of e){const s=a[0],u=a[1],c=a[2];if(r=null==a[3]?{}:a[3],!(s in i))return void o(t,e);const l=i[s];if(l.inboundNodes.length<=u)return void o(t,e);const f=l.inboundNodes[u];n.push(f.outputTensors[c])}n.length>0&&t.apply(_(n),r)}function u(t){const n=t["name"],a=mn(t,null!=e["customObjects"]?e["customObjects"]:{});a.setFastWeightInitDuringBuild(r),i[n]=a;const s=t["inboundNodes"];s.forEach(t=>{if(!(t instanceof Array))throw new b("Corrupted configuration, expected array for nodeData: "+t);o(a,t)})}const c=e["name"],l=e["layers"];for(const m of l)u(m);while(!M(a))for(const t of l){const e=i[t["name"]];if(e.name in a){const t=a[e.name];delete a[e.name];for(const n of t)s(e,n)}}const f=[],d=[],h=e["inputLayers"];for(const m of h){const t=m[0],e=m[1],n=m[2];w(t in i);const r=i[t],a=r.inboundNodes[e].outputTensors;f.push(a[n])}const p=e["outputLayers"];for(const m of p){const t=m[0],e=m[1],n=m[2];w(t in i);const r=i[t],a=r.inboundNodes[e].outputTensors;d.push(a[n])}return new t({inputs:f,outputs:d,name:c})}get stateful(){if(this._stateful)throw new b("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Object(f["Sh"])(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jr(t,e,n){const r=e.length;if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>null);if(1===r)return Array.isArray(t)&&1===t.length?t:"object"===typeof t&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}if("object"===typeof t&&Object.keys(t).length>0&&"object"===typeof t[Object.keys(t)[0]]){const n=[];return e.forEach(e=>{e in t?n.push(t[e]):n.push(null)}),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function kr(t,e){return jr(t,e,"classWeight")}async function Cr(t,e,n,r){if(null!=e||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const e=Object(f["Sh"])(()=>{if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1){const e=1;return t.argMax(e)}if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await e.data());Object(f["qe"])(e);const i=[];return r.forEach(t=>{if(null==n[t])throw new Error(`classWeight must contain all classes in the training data. The class ${t} exists in the data but not in classWeight`);i.push(n[t])}),Object(f["Kh"])(i,"float32")}return null}function Er(t,e){return Object(f["Yf"])(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Sr=32;function Dr(t,e){let n,r;const i=e;n=i["xs"],r=i["ys"],f["fi"].assert(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+e);const a=Fr("input",t.inputNames,n),o=Fr("output",t.outputNames,r),s=a[0].shape[0];f["fi"].assert(a.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: `+JSON.stringify(t.inputNames)+")"),f["fi"].assert(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: `+JSON.stringify(t.outputNames)+")");for(let u=0;u<a.length;u++)f["fi"].assert(a[u].shape[0]===s,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${a[u].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);for(let u=0;u<o.length;u++)f["fi"].assert(o[u].shape[0]===s,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${o[u].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);return{xs:a,ys:o}}function Fr(t,e,n){if(n instanceof f["ad"])return[n];if(Array.isArray(n))return f["fi"].assert(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(null==n[i])throw new b(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function Nr(t){if(3===t.length)throw new y("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Tr(t,e,n){const r=null!=n.batchesPerEpoch;if(f["fi"].assert(null!=t.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),f["fi"].assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),f["fi"].assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got "+n.epochs),f["fi"].assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+n.batchesPerEpoch),f["fi"].assert(null==n["validationSplit"],()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=null!=n.validationData;let a,o;if(i)if(Ir(n.validationData))f["fi"].assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+n.validationBatches);else{const t=Nr(n.validationData);a=t.xs,o=t.ys}const s=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let c;c=i?u.slice().concat(u.map(t=>"val_"+t)):u.slice();const l=dn(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:h,history:p}=pn(l,d,n.epochs,null,null,Mr(e,n),null,i,c);h.setModel(t),t.history=p,await h.onTrainBegin(),t.stopTraining_=!1;let m=null==n.initialEpoch?0:n.initialEpoch,g=await e.iterator();while(m<n.epochs){const c={};await h.onEpochBegin(m);let l=0,d=0;r||(g=await e.iterator());while(!r||l<n.batchesPerEpoch){const e=await g.next();if(r&&e.done){console.warn("You provided `batchesPerEpoch` as "+n.batchesPerEpoch+", but your dataset iterator ran out of data after "+l+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=e.value){const{xs:r,ys:i}=Dr(t,e.value),a={};a["batch"]=d,a["size"]=r[0].shape[0],await h.onBatchBegin(d,a);const o=[];if(null!=n.classWeight){const e=kr(n.classWeight,t.outputNames);for(let t=0;t<e.length;++t)o.push(await Cr(i[t],null,e[t]))}const c=r.concat(i).concat(o),p=s(c);f["qe"](c);for(let t=0;t<u.length;++t){const e=u[t],n=p[t];a[e]=n,f["nf"](n)}await h.onBatchEnd(d,a),rn(a),d++,l++}if(r?l>=n.batchesPerEpoch:e.done){if(i){let e;e=Ir(n.validationData)?A(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):A(t.evaluate(a,o,{batchSize:null==n.validationBatchSize?Sr:n.validationBatchSize,verbose:0}));for(let n=0;n<t.metricsNames.length;++n)c["val_"+t.metricsNames[n]]=e[n]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(m,c),m++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Mr(t,e){let n=null;return null!=e.batchesPerEpoch?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function Ir(t){return"function"===typeof t.iterator}function Rr(t){return"function"===typeof t.next}async function $r(t,e,n){n=n||{};const r=null!=n.batches,i=t.testFunction;let a=[];if(n.verbose>0)throw new y("Verbose mode is not implemented yet.");f["fi"].assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(n.batches));const o=Rr(e)?e:await e.iterator();let s=0,u=0;while(!r||u<n.batches){const e=await o.next();if(a=f["Sh"](()=>{if(e.value){const{xs:n,ys:r}=Dr(t,e.value),o=n.concat(r),c=f["Sh"](()=>i(o));if(f["qe"](o),0===u)for(let t=0;t<c.length;++t)a.push(Object(f["Vg"])(0));const l=o[0].shape[0];for(let t=0;t<c.length;++t){const e=c[t],n=a[t];a[t]=f["Sh"](()=>f["od"](a[t],f["Yf"](l,e))),u>0&&f["qe"](n)}f["qe"](c),s+=l,++u}return a}),e.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<a.length;++c){const t=a[c];a[c]=f["se"](a[c],s),f["qe"](t)}return _(a)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Br(t){f["fi"].assert(t>0&&Number.isInteger(t),()=>"batchSize is required to be a positive integer, but got "+t)}function zr(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(t=>Et(t,e,n-e)):Et(t,e,n-e)}function Lr(t,e){return f["Sh"](()=>null==t?null:Array.isArray(t)?t.map(t=>Lr(t,e)):Rt(t,"int32"===e.dtype?e:e.toInt()))}function Pr(t,e){const n=[];let r=0,i=null;while(r<t)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}async function Ur(t,e,n,r,i,a,o,s,u,c,l,d,h,p,m){null==i&&(i=32),null==a&&(a=1),null==l&&(l=!0),null==h&&(h=0);let g=!1;if(null!=u&&null!=c&&(g=!0),null!=m&&(g=!0,null==p))throw new b("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const v=t.checkNumSamples(n,i,p,"steps_per_epoch");let x;null!=v&&(x=Ot(0,v)),null==o&&(o=1);const{callbackList:w,history:O}=pn(s,o,a,h,v,p,i,g,d);w.setModel(t),t.history=O,await w.onTrainBegin(),t.stopTraining_=!1;for(let b=h;b<a;++b){await w.onEpochBegin(b);const a={};if(null!=p)throw new y("stepsPerEpoch mode is not implemented yet.");{if("batch"===l)throw new y("batch shuffling is not implemneted yet");l&&f["fi"].shuffle(x);const o=Object(f["Kh"])(x),s=Pr(v,i);for(let l=0;l<s.length;++l){const d={};if(await w.onBatchBegin(l,d),f["Sh"](()=>{const h=s[l][0],p=s[l][1],m=Et(o,h,p-h);d["batch"]=l,d["size"]=p-h;const b=Lr(n,m),y=e(b);for(let t=0;t<r.length;++t){const e=r[t],n=y[t];d[e]=n,f["nf"](n)}if(l===s.length-1&&g){const e=t.testLoop(u,c,i);for(let t=0;t<r.length;++t){const n=r[t],i=e[t];f["nf"](i),a["val_"+n]=i}}}),await w.onBatchEnd(l,d),rn(d),t.stopTraining_)break}o.dispose()}if(await w.onEpochEnd(b,a),t.stopTraining_)break}return await w.onTrainEnd(),await t.history.syncData(),t.history}async function Wr(t,e,n,r={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let i,a,o,s,u,c,l;t.isTraining=!0;try{const d=null==r.batchSize?32:r.batchSize;Br(d);const h=!1,p=await t.standardizeUserData(e,n,r.sampleWeight,r.classWeight,h,d);i=p[0],a=p[1],l=p[2];let m,g=!1;if(null!=r.validationData&&r.validationData.length>0){if(g=!0,2!==r.validationData.length)throw 3===r.validationData.length?new y("validationData including sample weights is not supported yet."):new b("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+r.validationData+" is invalid.");o=r.validationData[0],s=r.validationData[1];const e=!0,n=await t.standardizeUserData(o,s,null,null,e,d);u=n[0],c=n[1],m=u.concat(c)}else if(null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1){g=!0;const t=Math.floor(i[0].shape[0]*(1-r.validationSplit)),e=i[0].shape[0];u=zr(i,t,e),i=zr(i,0,t),c=zr(a,t,e),a=zr(a,0,t),m=u.concat(c)}else null!=r.validationSteps&&(g=!0);const v=i.concat(a).concat(l);t.checkTrainableWeightsConsistency();const x=t.makeTrainFunction(),w=t.getDedupedMetricsNames();let O,_;g?(t.makeTestFunction(),O=t.testFunction,_=w.slice().concat(w.map(t=>"val_"+t))):(O=null,m=[],_=w.slice());const A=dn(r.callbacks,r.yieldEvery),j=await Ur(t,x,v,w,d,r.epochs,r.verbose,A,O,m,r.shuffle,_,r.initialEpoch,null,null);return j}finally{t.isTraining=!1,Vr(i,e),Vr(a,n),Vr(u,o),Vr(c,s),null!=l&&f["qe"](l)}}function qr(t){const e=[];t instanceof f["ad"]&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(1===r.rank)e.push(At(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Vr(t,e){if(null==t)return;const n=[];if(e instanceof f["ad"])n.push(e.id);else if(Array.isArray(e))e.forEach(t=>n.push(t.id));else if(null!=e)for(const i in e){const t=e[i];n.push(t.id)}const r=[];if(t instanceof f["ad"])-1===n.indexOf(t.id)&&r.push(t);else if(Array.isArray(t))t.forEach(t=>{-1===n.indexOf(t.id)&&r.push(t)});else if(null!=t)for(const i in t){const e=t[i];-1===n.indexOf(e.id)&&r.push(e)}r.forEach(t=>{t.isDisposed||t.dispose()})}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gr(t){return t instanceof f["ad"]}function Hr(t){return Array.isArray(t)}function Xr(t){return!Gr(t)&&!Hr(t)}function Yr(t,e,n,r=!0,i=""){if(null==e||0===e.length){if(null!=t){let e=!1;if(Hr(t)&&t.length>0)e=!0;else if(Xr(t)){for(const n in t)if(t.hasOwnProperty(n)){e=!0;break}}else e=!0;if(e)throw new b(`Error when checking model ${i} expected no data, but got `+t)}return[]}if(null==t)return e.map(t=>null);let a;if(Xr(t)){t=t,a=[];for(const n of e){if(null==t[n])throw new b(`No data provided for "${n}". Need data for each key in: `+e);a.push(t[n])}}else if(Hr(t)){if(t=t,t.length!==e.length)throw new b(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): `+t);a=t}else{if(t=t,e.length>1)throw new b(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape `+t.shape);a=[t]}if(a=qr(a),null!=n)for(let o=0;o<e.length;++o){if(null==n[o])continue;const t=a[o];if(t.shape.length!==n[o].length)throw new b(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape `+t.shape);for(let a=0;a<n[o].length;++a){if(0===a&&!r)continue;const s=t.shape[a],u=n[o][a];if(null!=u&&u>=0&&s!==u)throw new b(`Error when checking ${i}: expected ${e[o]} to have shape [${n[o]}], but got array with shape [${t.shape}].`)}}return a}function Kr(t,e,n){const r=T(t.map(t=>t.shape[0]));r.sort();const i=T(e.map(t=>t.shape[0]));if(i.sort(),r.length>1)throw new b("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(t=>t.shape)));if(i.length>1)throw new b("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(t=>t.shape)));if(r.length>0&&i.length>0&&!f["fi"].arraysEqual(r,i))throw new b(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function Jr(t,e,n){const r=[bn,En,jn];for(let i=0;i<t.length;++i){const a=t[i],o=e[i],s=n[i];if(null!=o){if(o===jn&&1===a.shape[a.shape.length-1])throw new b(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(o)){const t=a.shape.slice(1),e=s.slice(1);for(let n=0;n<t.length;++n){const r=t[n],i=e[n];if(null!=i&&r!==i)throw new b(`A target Tensor with shape ${a.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function Zr(t,e,n,r=!0,i=""){let a;if(Array.isArray(t)){if(t.length!==e.length)throw new b(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);a=t}else{if(e.length>1)throw new b(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape `+JSON.stringify(t.shape)+".");a=[t]}if(null!=n)for(let o=0;o<e.length;++o){if(null==n[o])continue;const t=a[o];if(t.shape.length!==n[o].length)throw new b(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape `+JSON.stringify(t.shape));for(let a=0;a<n[o].length;++a){if(0===a&&!r)continue;const s=t.shape[a],u=n[o][a];if(null!=u&&u!==s)throw new b(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(t.shape)}.`)}}}function Qr(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>[]);let n;if("string"===typeof t||"function"===typeof t)n=[t];else{if(!Array.isArray(t)&&"object"!==typeof t)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+t);n=t}if(Array.isArray(n))return e.map(t=>n);{const t=[];for(const r of e){let e=n.hasOwnProperty(r)?n[r]:[];Array.isArray(e)||(e=[e]),t.push(e)}return t}}const ti="layers-model";class ei extends Ar{constructor(t){super(t),this.isTraining=!1}summary(t,e,n=console.log){if(!this.built)throw new b("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");ar(this,t,e,n)}compile(t){if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"===typeof t.optimizer)this.optimizer_=er(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof f["gc"]))throw new b("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let e=[];if(Array.isArray(t.loss)||"string"===typeof t.loss||"function"===typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new b(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);const n=t.loss;e=n.map(t=>Tn(t))}else{const n=Tn(t.loss);this.outputs.forEach(t=>{e.push(n)})}else{t.loss=t.loss;for(const e in t.loss)if(-1===this.outputNames.indexOf(e))throw new b(`Unknown entry in loss dictionary: "${e}". Only expected the following keys: `+this.outputNames);for(const n of this.outputNames)null==t.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),e.push(Tn(t.loss[n]))}this.lossFunctions=e,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const t=this.internalOutputShapes[a],e=this.outputNames[a];this.feedOutputNames.push(e),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[a])}const n=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ft("loss",()=>{for(let t=0;t<this.outputs.length;++t){if(-1!==n.indexOf(t))continue;const e=this.lossFunctions[t];this.outputs.length>1&&(this.metricsTensors.push([e,t]),this.metricsNames.push(this.outputNames[t]+"_loss"))}});const r=Qr(t.metrics,this.outputNames),i=(t,e,n)=>{this.outputNames.length>1&&(e=this.outputNames[t]+"_"+e),this.metricsNames.push(e),this.metricsTensors.push([n,t])};ft("metric",()=>{for(let t=0;t<this.outputs.length;++t){if(-1!==n.indexOf(t))continue;const e=r[t],a=e=>{const n="";let r,a,o;for(const s of e){if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){const e=this.internalOutputShapes[t];let i;1===e[e.length-1]||this.lossFunctions[t]===En?-1!==["accuracy","acc"].indexOf(s)?a=Mn:-1!==["crossentropy","ce"].indexOf(s)&&(a=Pn):this.lossFunctions[t]===kn?-1!==["accuracy","acc"].indexOf(s)?a=Un:-1!==["crossentropy","ce"].indexOf(s)&&(a=Jn):-1!==["accuracy","acc"].indexOf(s)?a=In:-1!==["crossentropy","ce"].indexOf(s)&&(a=Yn),-1!==["accuracy","acc"].indexOf(s)?i="acc":-1!==["crossentropy","ce"].indexOf(s)&&(i="ce"),o=a,r=n+i}else{const t=Qn(s);o=t,r=n+tr(s)}let e;ft(r,()=>{e=o}),i(t,r,e)}};a(e)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,e,n={}){const r=null==n.batchSize?32:n.batchSize;Br(r);const i=!0,a=this.standardizeUserDataXY(t,e,i,r);try{const i=a[0].concat(a[1]);this.makeTestFunction();const o=this.testFunction,s=this.testLoop(o,i,r,n.verbose,n.steps);return _(s)}finally{Vr(a[0],t),Vr(a[1],e)}}async evaluateDataset(t,e){return this.makeTestFunction(),$r(this,t,e)}checkNumSamples(t,e,n,r="steps"){let i;if(null!=n){if(i=null,null!=e)throw new b(`If ${r} is set, batchSize must be null or undefined.Got batchSize = `+e)}else{if(null==t)throw new b("Either the input data should have a defined shape, or "+r+" shoud be specified.");i=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return i}execute(t,e){if(Array.isArray(e)&&0===e.length)throw new b("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(e),r=n?e:[e],i=this.retrieveSymbolicTensors(r),a=new gr;if(t instanceof f["ad"]&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new b(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)a.add(this.inputs[e],t[e])}else for(const s of this.inputs){const e=t[s.name];if(null==e)throw new b("No value is provided for the model's input "+s.name);a.add(s,e)}const o=vr(i,a);return n?o:o[0]}retrieveSymbolicTensors(t){const e=x(null,t.length);let n=t.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],a=i.map(t=>t.name);for(let r=0;r<t.length;++r){const o=a.indexOf(t[r]);if(-1!==o&&(e[r]=i[o],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw e.forEach((e,r)=>{null==e&&n.push(t[r])}),new b("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(n))}return e}predictLoop(t,e=32,n=!1){return f["Sh"](()=>{const r=this.checkNumSamples(t);if(n)throw new y("Verbose predictLoop() is not implemented yet.");const i=Pr(r,e),a=this.outputs.map(t=>[]);for(let e=0;e<i.length;++e){const n=f["Sh"](()=>{const n=i[e][0],r=i[e][1],a=zr(t,n,r),o=[];if(Array.isArray(a))for(let t=0;t<a.length;++t)o.push({key:this.inputs[t],value:a[t]});else o.push({key:this.inputs[0],value:a});const s=new gr(o);return vr(this.outputs,s)});n.forEach((t,e)=>a[e].push(t))}return _(a.map(t=>f["Td"](t,0)))})}predict(t,e={}){const n=qr(t);Zr(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==e.batchSize?32:e.batchSize;return Br(r),this.predictLoop(n,r)}finally{Vr(n,t)}}predictOnBatch(t){Zr(t,this.inputNames,this.feedInputShapes,!0);const e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)}standardizeUserDataXY(t,e,n=!0,r){if(null==this.optimizer_)throw new g("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let a=0;a<this.feedOutputShapes.length;++a){const t=this.feedOutputShapes[a],e=this.feedLossFns[a];e===kn?i.push(t.slice(0,t.length-1).concat([1])):i.push(t)}if(t=Yr(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=Yr(e,this.feedOutputNames,i,!1,"target"),Kr(t,e,null),Jr(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&t[0].shape[0]%r!==0)throw new b(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${t[0].shape[0]} sample(s).`);return[t,e]}async standardizeUserData(t,e,n,r,i=!0,a){const[o,s]=this.standardizeUserDataXY(t,e,i,a);if(null!=n)throw new Error("sample weight is not supported yet.");let u=null;if(null!=r){const t=kr(r,this.outputNames);u=[];for(let e=0;e<t.length;++e)u.push(await Cr(s[e],null,t[e]))}return[o,s,u]}testLoop(t,e,n,r=0,i){return f["Sh"](()=>{const a=this.checkNumSamples(e,n,i,"steps"),o=[];if(r>0)throw new y("Verbose mode is not implemented yet.");if(null!=i)throw new y("steps mode in testLoop() is not implemented yet");{const r=Pr(a,n),i=Object(f["Kh"])(Ot(0,a));for(let n=0;n<r.length;++n){const a=r[n][0],s=r[n][1],u=Et(i,a,s-a),c=Lr(e,u),l=t(c);if(0===n)for(let t=0;t<l.length;++t)o.push(Object(f["Vg"])(0));for(let t=0;t<l.length;++t){const e=l[t];o[t]=f["od"](o[t],f["Yf"](s-a,e))}}for(let t=0;t<o.length;++t)o[t]=f["se"](o[t],a)}return o})}getDedupedMetricsNames(){const t=this.metricsNames,e=[];for(let n=0;n<t.length;++n){const r=t[n];let i=r;if(O(t,r)>1){const e=O(t.slice(0,n),r);i+="_"+e}e.push(i)}return e}makeTrainFunction(){return t=>{const e=[],n=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],o=()=>{const t=[];for(let e=0;e<this.inputs.length;++e)t.push({key:this.inputs[e],value:n[e]});const o=new gr(t),s=vr(this.outputs,o,{training:!0});let u;for(let n=0;n<this.lossFunctions.length;++n){const t=this.lossFunctions[n];let a=t(r[n],s[n]);null!=i[n]&&(a=Er(a,i[n]));const o=f["Pf"](a);e.push(o),u=0===n?a:f["od"](u,a)}for(let n=0;n<this.metricsTensors.length;++n){let t;if(this.outputs.length>1&&n<this.outputs.length)t=e[n];else{const e=this.metricsTensors[n][0],i=this.metricsTensors[n][1];t=f["Pf"](e(r[i],s[i]))}f["nf"](t),a.push(t)}return u=f["Pf"](u),this.calculateLosses().forEach(t=>{u=f["od"](u,t)}),u},s=this.collectedTrainableWeights.map(t=>t.read()),u=!0,c=this.optimizer_.minimize(o,u,s);return[c].concat(a)}}makeTestFunction(){this.testFunction=t=>f["Sh"](()=>{const e=[];let n;const r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let t=0;t<this.inputs.length;++t)a.push({key:this.inputs[t],value:r[t]});const o=new gr(a),s=vr(this.outputs,o);for(let t=0;t<this.lossFunctions.length;++t){const r=this.lossFunctions[t],a=f["Pf"](r(i[t],s[t]));n=0===t?a:f["od"](n,a),e.push(n)}for(let t=0;t<this.metricsTensors.length;++t){const n=this.metricsTensors[t][0],r=this.metricsTensors[t][1],a=f["Pf"](n(i[r],s[r]));e.push(a)}return e})}async fit(t,e,n={}){return Wr(this,t,e,n)}async fitDataset(t,e){return Tr(this,t,e)}async trainOnBatch(t,e){const n=await this.standardizeUserData(t,e),r=n[0],i=n[1],a=this.makeTrainFunction(),o=a(r.concat(i)),s=[];for(const u of o){const t=await u.data();s.push(t[0])}return f["qe"](o),_(s)}getNamedWeights(t){const e=[],n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let a=0;a<r.length;++a)n&&!r[a].trainable||e.push({name:r[a].originalName,tensor:i[a]});return e}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const e=f["Qf"]().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=e-f["Qf"]().numTensors}return t}getLossIdentifiers(){let t;if("string"===typeof this.loss)t=j(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if("string"!==typeof t)throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(t=>j(t))}else{const e=Object.keys(this.loss);t={};const n=this.loss;for(const r of e){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");t[r]=j(n[r])}}return t}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[j(tr(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>j(tr(t)));{const t={};for(const e in this.metrics)t[e]=j(tr(this.metrics[e]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(null!=t.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=t.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=t.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const e=dr(t.optimizer_config),n=mn(e);let r,i;if("string"===typeof t.loss)r=k(t.loss);else if(Array.isArray(t.loss))r=t.loss.map(t=>k(t));else if(null!=t.loss){r={};for(const e in t.loss)r[e]=k(t.loss[e])}if(Array.isArray(t.metrics))i=t.metrics.map(t=>k(t));else if(null!=t.metrics){i={};for(const e in t.metrics)i[e]=k(t.metrics[e])}this.compile({loss:r,metrics:i,optimizer:n})}async save(t,e){if("string"===typeof t){const e=f["if"].getSaveHandlers(t);if(0===e.length)throw new b(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new b(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new b("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await f["if"].encodeWeights(this.getNamedWeights(e)),r=!1,i=null,a=this.toJSON(i,r),o={modelTopology:a,format:ti,generatedBy:"TensorFlow.js tfjs-layers v"+pr,convertedBy:null},s=null!=e&&e.includeOptimizer;if(s&&null!=this.optimizer){o.trainingConfig=this.getTrainingConfig();const t="optimizer",{data:e,specs:r}=await f["if"].encodeWeights(await this.optimizer.getWeights(),t);n.specs.push(...r),n.data=f["if"].concatenateArrayBuffers([n.data,e])}if(null!=this.userDefinedMetadata){const t=!0;rr(this.userDefinedMetadata,this.name,t),o.userDefinedMetadata=this.userDefinedMetadata}return o.weightData=n.data,o.weightSpecs=n.specs,t.save(o)}setUserDefinedMetadata(t){rr(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}ei.className="Model",f["ah"].registerClass(ei);class ni extends ei{}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
async function ri(t,e){"modelTopology"in t||(t={modelTopology:t}),t=t;let n=t.modelTopology;null!=n["model_config"]&&(n=n["model_config"]);const r=dr(n),i=mn(r,e);if(null!=t.weightsManifest){const e=await f["if"].loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map(t=>t.originalName)),n={};for(const t of i.weights)n[t.originalName]=e[t.originalName];i.loadWeights(n),Object(f["qe"])(e)}return i}async function ii(t,e){if(null==e&&(e={}),"string"===typeof t){const n=f["if"].getLoadHandlers(t,e);if(0===n.length)n.push(f["if"].browserHTTPRequest(t,e));else if(n.length>1)throw new b(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return ai(t,void 0,e)}async function ai(t,e,n){if(null==n&&(n={}),null==t.load)throw new b("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;null!=i["model_config"]&&(i=i["model_config"]);const a=null==n.strict||n.strict,o=null!=r.weightData&&null!=r.weightSpecs&&a,s=mn(dr(i),e,o),u=r.trainingConfig;if(null!=u&&s.loadTrainingConfig(u),null!=r.userDefinedMetadata&&s.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new b("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:t,optimizerWeights:e}=oi(r.weightData,r.weightSpecs);s.loadWeights(t,a),null!=s.optimizer&&e.length>0&&await s.optimizer.setWeights(e),Object(f["qe"])(t),Object(f["qe"])(e.map(t=>t.tensor))}return s}function oi(t,e){const n=f["if"].decodeWeights(t,e),r={},i=[];return e.forEach(t=>{"optimizer"===t.group?i.push({name:t.name,tensor:n[t.name]}):r[t.name]=n[t.name]}),{modelWeights:r,optimizerWeights:i}}ni.className="Functional",f["ah"].registerClass(ni);class si extends ei{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=null!=t.name?t.name:Me("sequential_"),null!=t.layers)for(const e of t.layers)this.add(e)}checkShape(t){const e=t.inboundNodes[0].outputTensors[0].shape;if(e.some(t=>t<0))throw new b("Negative dimension size caused by adding layer "+t.name+" with input shape ["+t.inboundNodes[0].inputTensors[0].shape+"]")}add(t){const e=t instanceof si||t instanceof ei;let n;if(e){if(n=t,1!==n.outputs.length)throw new b("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new b("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new b("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const e=en({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(e)}if(e)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new b(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(1!==t.inboundNodes[0].outputTensors.length)throw new b("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=Qe(this.outputs[0])}this.inboundNodes=[],new Xe({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:x(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs[0].shape})}else{const e=t.apply(this.outputs[0]);if(Array.isArray(e))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[e],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,e){return null==this.model&&this.build(),this.model.call(t,e)}build(t){if(Be(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ei({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,e,n=console.log){this.built||this.build(),super.summary(t,e,n)}setWeights(t){null==this.model&&this.build(),this.model.setWeights(t)}evaluate(t,e,n={}){if(!this.built)throw new g("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)}async evaluateDataset(t,e){if(!this.built)throw new g("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,e)}predict(t,e={}){return null==this.model&&this.build(),this.model.predict(t,e)}predictOnBatch(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,e,n={}){if(!this.built)throw new g("The model needs to be compiled before being used.");return this.model.fit(t,e,n)}async fitDataset(t,e){if(!this.built)throw new g("The model needs to be compiled before being used.");return this.model.fitDataset(t,e)}async trainOnBatch(t,e){return this.model.trainOnBatch(t,e)}static fromConfig(t,e,n={},r=!1){let i,a={};if(e instanceof Array){if(null==e[0].className||"Merge"===e[0]["className"])throw new b("Legacy serialization format not supported yet.");i=e}else f["fi"].assert(null!=e["layers"],()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=e["layers"],delete e["layers"],a=e;const o=new t(a);if(!(o instanceof si))throw new y("Sequential.fromConfig called on non-Sequential input: "+o);for(const s of i){const t=void 0,e=mn(s,t,r);r&&e.setFastWeightInitDuringBuild(!0),o.add(e)}return o}set stopTraining(t){if(null==this.model)throw new b("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(null==this.model)throw new b("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const e of this.layers){const n={};n["className"]=e.getClassName(),n["config"]=e.getConfig(),t.push(n)}return{name:this.name,layers:t}}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function ui(t){return new ei(t)}function ci(t){return new si(t)}function li(t,e){return null==e&&(e={}),ii(t,e)}function fi(t){return en(t)}function di(t,e){hn.registerCallbackConstructor(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */si.className="Sequential",f["ah"].registerClass(si);class hi extends f["ah"].Serializable{getConfig(){return{}}}class pi extends hi{apply(t,e=1){return Lt(t,e)}}pi.className="elu",f["ah"].registerClass(pi);class mi extends hi{apply(t){return f["Yg"](t)}}mi.className="selu",f["ah"].registerClass(mi);class gi extends hi{apply(t){return f["Jg"](t)}}gi.className="relu",f["ah"].registerClass(gi);class bi extends hi{apply(t){return Object(f["Sh"])(()=>f["Sf"](6,f["Jg"](t)))}}bi.className="relu6",f["ah"].registerClass(bi);class yi extends hi{apply(t){return t}}yi.className="linear",f["ah"].registerClass(yi);class vi extends hi{apply(t){return f["eh"](t)}}vi.className="sigmoid",f["ah"].registerClass(vi);class xi extends hi{apply(t){return Wt(t)}}xi.className="hardSigmoid",f["ah"].registerClass(xi);class wi extends hi{apply(t){return f["qh"](t)}}wi.className="softplus",f["ah"].registerClass(wi);class Oi extends hi{apply(t){return Pt(t)}}Oi.className="softsign",f["ah"].registerClass(Oi);class _i extends hi{apply(t){return f["Ih"](t)}}_i.className="tanh",f["ah"].registerClass(_i);class Ai extends hi{apply(t,e=-1){return f["ph"](t,e)}}Ai.className="softmax",f["ah"].registerClass(Ai);class ji extends hi{apply(t,e=-1){return f["Af"](t,e)}}ji.className="logSoftmax",f["ah"].registerClass(ji);class ki extends hi{apply(t,e=1){return Object(f["Sh"])(()=>f["eh"](t.mul(e)).mul(t))}}function Ci(t){return t.getClassName()}function Ei(t,e={}){return D(t,f["ah"].SerializationMap.getMap().classNameMap,e,"activation")}function Si(t){if(null==t){const t={className:"linear",config:{}};return Ei(t)}if("string"===typeof t){const e={};return e["className"]=t,e["config"]={},Ei(e)}return t instanceof hi?t:Ei(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Di(t){if(null!=t&&"object"!==typeof t)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+t)}ki.className="swish",f["ah"].registerClass(ki);class Fi extends f["ah"].Serializable{}class Ni extends Fi{constructor(t){super(),Di(t),this.l1=null==t||null==t.l1?.01:t.l1,this.l2=null==t||null==t.l2?.01:t.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(t){return Object(f["Sh"])(()=>{let e=Object(f["ni"])([1]);return this.hasL1&&(e=Object(f["od"])(e,Object(f["Fh"])(f["Yf"](this.l1,Object(f["ld"])(t))))),this.hasL2&&(e=Object(f["od"])(e,Object(f["Fh"])(f["Yf"](this.l2,$t(t))))),e.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,e){return new t({l1:e["l1"],l2:e["l2"]})}}function Ti(t){return Di(t),new Ni({l1:null!=t?t.l1:null,l2:0})}function Mi(t){return Di(t),new Ni({l2:null!=t?t.l2:null,l1:0})}Ni.className="L1L2",f["ah"].registerClass(Ni);const Ii={l1l2:"L1L2"};function Ri(t){return E(t)}function $i(t,e={}){return D(t,f["ah"].SerializationMap.getMap().classNameMap,e,"regularizer")}function Bi(t){if(null==t)return null;if("string"===typeof t){const e=t in Ii?Ii[t]:t,n={className:e,config:{}};return $i(n)}return t instanceof Fi?t:$i(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zi extends Ke{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,null!=t&&(this.maxValue=t.maxValue)}call(t,e){t=$e(t);let n=Object(f["Jg"])(t);return null!=this.maxValue&&(n=Object(f["Qd"])(n,0,this.maxValue)),n}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},e=super.getConfig();return Object.assign(t,e),t}}zi.className="ReLU",f["ah"].registerClass(zi);class Li extends Ke{constructor(t){super(null==t?{}:t),this.DEFAULT_ALPHA=.3,null==t&&(t={}),this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=$e(t);return Object(f["pf"])(n,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}Li.className="LeakyReLU",f["ah"].registerClass(Li);class Pi extends Ke{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),this.supportsMasking=!0,this.alphaInitializer=me(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Bi(t.alphaRegularizer),this.alphaConstraint=K(t.alphaConstraint),null==t.sharedAxes)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else{if("number"!==typeof t.sharedAxes)throw new b("Expected sharedAxes to be a number or an array of numbers, but got "+t.sharedAxes);this.sharedAxes=[t.sharedAxes]}}build(t){t=Be(t);const e=t.slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)e[r-1]=1;this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<t.length;++r)n[r]=t[r];this.inputSpec=[new Ve({ndim:t.length,axes:n})],this.built=!0}call(t,e){return t=$e(t),Object(f["ug"])(t,this.alpha.read())}getConfig(){const t={alphaInitializer:pe(this.alphaInitializer),alphaRegularizer:Ri(this.alphaRegularizer),alphaConstraint:X(this.alphaConstraint),sharedAxes:this.sharedAxes},e=super.getConfig();return Object.assign(t,e),t}}Pi.className="PReLU",f["ah"].registerClass(Pi);class Ui extends Ke{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==this.DEFAULT_ALPHA)throw new y(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=$e(t);return Object(f["xe"])(n)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}Ui.className="ELU",f["ah"].registerClass(Ui);class Wi extends Ke{constructor(t){super(null==t?{}:t),this.DEFAULT_THETA=1,null==t&&(t={}),this.theta=null==t.theta?this.DEFAULT_THETA:t.theta}call(t,e){const n=$e(t);return n.mul(_t(n.greater(this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},e=super.getConfig();return Object.assign(t,e),t}}Wi.className="ThresholdedReLU",f["ah"].registerClass(Wi);class qi extends Ke{constructor(t){super(null==t?{}:t),this.DEFAULT_AXIS=1,null==t&&(t={}),this.softmax=(new Ai).apply,this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis}call(t,e){const n=$e(t);return this.softmax(n,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Vi(t,e,n){if("number"===typeof t)return x(t,e);if(t.length!==e)throw new b(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!bt(i))throw new b(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number `+i)}return t}function Gi(t,e,n,r,i=1){if(null==t)return t;const a=e+(e-1)*(i-1);let o;return o="same"===n?t:t-a+1,Math.floor((o+r-1)/r)}function Hi(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+wt([n-e,0]);else{if("same"!==r)throw new b(`Unsupport padding mode: ${r}.`);t*=e}return t}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xi(t,e){return Object(f["Sh"])(()=>(ot(e),"channelsFirst"===e?f["Xh"](t,[0,2,3,1]):t))}function Yi(t,e){return Object(f["Sh"])(()=>(ot(e),"channelsFirst"===e?f["Xh"](t,[0,2,3,4,1]):t))}function Ki(t,e,n,r=1,i="valid",a,o=1){return Object(f["Sh"])(()=>{if(null==a&&(a=p()),ot(a),3!==t.shape.length)throw new b("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(3!==e.shape.length)throw new b("The kernel for a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new b("The bias for a conv1dWithBias operation should be 1, but is "+e.shape.length+" instead");if("channelsFirst"===a&&(t=f["Xh"](t,[0,2,1])),"causal"===i)throw new y("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=f["Yd"](t,e,r,"same"===i?"same":"valid","NWC",o);return null!=n&&(s=zt(s,n)),s})}function Ji(t,e,n,r=[1,1],i="valid",a,o,s=null){return Object(f["Sh"])(()=>{if(null==a&&(a=p()),ot(a),3!==t.rank&&4!==t.rank)throw new b(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(3!==e.rank&&4!==e.rank)throw new b(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=Xi(t,a);if("causal"===i)throw new y("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=f["Qe"].conv2d({x:u,filter:e,strides:r,pad:"same"===i?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===a&&(u=f["Xh"](u,[0,3,1,2])),u})}function Zi(t,e,n,r=[1,1,1],i="valid",a,o){return Object(f["Sh"])(()=>{if(null==a&&(a=p()),ot(a),4!==t.rank&&5!==t.rank)throw new b("conv3dWithBias expects input to be of rank 4 or 5, but received "+t.rank+".");if(4!==e.rank&&5!==e.rank)throw new b("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+t.rank+".");let s=Yi(t,a);if("causal"===i)throw new y("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=f["be"](s,e,r,"same"===i?"same":"valid","NDHWC",o),null!=n&&(s=zt(s,n)),"channelsFirst"===a&&(s=f["Xh"](s,[0,4,1,2,3])),s})}qi.className="Softmax",f["ah"].registerClass(qi);class Qi extends Ke{constructor(t,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Qi.verifyArgs(e),this.rank=t,$(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new y(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Vi(e.kernelSize,t,"kernelSize"),this.strides=Vi(null==e.strides?1:e.strides,t,"strides"),this.padding=null==e.padding?"valid":e.padding,st(this.padding),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,ot(this.dataFormat),this.activation=Si(e.activation),this.useBias=null==e.useBias||e.useBias,this.biasInitializer=me(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=K(e.biasConstraint),this.biasRegularizer=Bi(e.biasRegularizer),this.activityRegularizer=Bi(e.activityRegularizer),this.dilationRate=Vi(null==e.dilationRate?1:e.dilationRate,t,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new b("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(this.dilationRate));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new b("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(this.dilationRate))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new b("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(this.dilationRate))}static verifyArgs(t){if(w("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!==typeof t.kernelSize&&!R(t.kernelSize,"number",1,3))throw new b(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ci(this.activation),useBias:this.useBias,biasInitializer:pe(this.biasInitializer),biasRegularizer:Ri(this.biasRegularizer),activityRegularizer:Ri(this.activityRegularizer),biasConstraint:X(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}class ta extends Qi{constructor(t,e){super(t,e),this.kernel=null,ta.verifyArgs(e),this.filters=e.filters,$(this.filters,"filters"),this.kernelInitializer=me(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=K(e.kernelConstraint),this.kernelRegularizer=Bi(e.kernelRegularizer)}build(t){t=Be(t);const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new b("The channel dimension of the input should be defined. Found "+t[e]);const n=t[e],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:n}}],this.built=!0}call(t,e){return Object(f["Sh"])(()=>{let e;t=$e(t);const n=null==this.bias?null:this.bias.read(),r=L(this.activation.getClassName());if(null!=r&&2===this.rank)e=Ji(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)e=Ki(t,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)e=Ji(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new y("convolutions greater than 3D are not implemented yet.");e=Zi(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(e=this.activation.apply(e))}return e})}computeOutputShape(t){t=Be(t);const e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2);for(let i=0;i<n.length;++i){const t=Gi(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);e.push(t)}let r=[t[0]];return"channelsLast"===this.dataFormat?(r=r.concat(e),r.push(this.filters)):(r.push(this.filters),r=r.concat(e)),r}getConfig(){const t={filters:this.filters,kernelInitializer:pe(this.kernelInitializer),kernelRegularizer:Ri(this.kernelRegularizer),kernelConstraint:X(this.kernelConstraint)},e=super.getConfig();return Object.assign(t,e),t}static verifyArgs(t){if(!("filters"in t)||"number"!==typeof t.filters||t.filters<1)throw new b("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))}}class ea extends ta{constructor(t){super(2,t),ea.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t["rank"],t}static verifyArgs(t){if("number"!==typeof t.kernelSize&&!R(t.kernelSize,"number",1,2))throw new b(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}ea.className="Conv2D",f["ah"].registerClass(ea);class na extends ta{constructor(t){super(3,t),na.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t["rank"],t}static verifyArgs(t){if("number"!==typeof t.kernelSize&&(!Array.isArray(t.kernelSize)||1!==t.kernelSize.length&&3!==t.kernelSize.length))throw new b(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}na.className="Conv3D",f["ah"].registerClass(na);class ra extends ea{constructor(t){if(super(t),this.inputSpec=[new Ve({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new b("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(t){if(t=Be(t),4!==t.length)throw new b("Input should have rank 4; Received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new b("The channel dimension of the inputs should be defined. Found `None`.");const n=t[e],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ve({ndim:4,axes:{[e]:n}})],this.built=!0}call(t,e){return f["Sh"](()=>{let e=$e(t);if(4!==e.shape.length)throw new b("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+e.shape.length);const n=e.shape,r=n[0];let i,a;"channelsFirst"===this.dataFormat?(i=2,a=3):(i=1,a=2);const o=n[i],s=n[a],u=this.kernelSize[0],c=this.kernelSize[1],l=this.strides[0],d=this.strides[1],h=Hi(o,l,u,this.padding),p=Hi(s,d,c,this.padding),m=[r,h,p,this.filters];"channelsLast"!==this.dataFormat&&(e=f["Xh"](e,[0,2,3,1]));let g=f["ae"](e,this.kernel.read(),m,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(g=f["Xh"](g,[0,3,1,2])),null!=this.bias&&(g=zt(g,this.bias.read(),this.dataFormat)),null!=this.activation&&(g=this.activation.apply(g)),g})}computeOutputShape(t){t=Be(t);const e=t.slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const a=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return e[n]=this.filters,e[r]=Hi(e[r],s,a,this.padding),e[i]=Hi(e[i],u,o,this.padding),e}getConfig(){const t=super.getConfig();return delete t["dilationRate"],t}}ra.className="Conv2DTranspose",f["ah"].registerClass(ra);class ia extends ta{constructor(t,e){if(super(t,e),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==e.filters)throw new b("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=e.kernelInitializer||null!=e.kernelRegularizer||null!=e.kernelConstraint)throw new b("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=e.padding&&"same"!==e.padding&&"valid"!==e.padding)throw new b(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received `+JSON.stringify(e.padding));this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=me(e.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Bi(e.depthwiseRegularizer),this.depthwiseConstraint=K(e.depthwiseConstraint),this.pointwiseInitializer=me(e.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Bi(e.pointwiseRegularizer),this.pointwiseConstraint=K(e.pointwiseConstraint)}build(t){if(t=Be(t),t.length<this.rank+2)throw new b(`Inputs to SeparableConv${this.rank}D should have rank `+(this.rank+2)+", but received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e]||t[e]<0)throw new b("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[e]));const n=t[e],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let o=0;o<this.rank;++o)i.push(1);i.push(n*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Ve({ndim:this.rank+2,axes:{[e]:n}})],this.built=!0}call(t,e){return Object(f["Sh"])(()=>{let e;if(t=$e(t),1===this.rank)throw new y("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(t=f["Xh"](t,[0,2,3,1])),e=f["Zg"](t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(e=zt(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),"channelsFirst"===this.dataFormat&&(e=f["Xh"](e,[0,3,1,2])),e})}getConfig(){const t=super.getConfig();return delete t["rank"],delete t["kernelInitializer"],delete t["kernelRegularizer"],delete t["kernelConstraint"],t["depthwiseInitializer"]=pe(this.depthwiseInitializer),t["pointwiseInitializer"]=pe(this.pointwiseInitializer),t["depthwiseRegularizer"]=Ri(this.depthwiseRegularizer),t["pointwiseRegularizer"]=Ri(this.pointwiseRegularizer),t["depthwiseConstraint"]=X(this.depthwiseConstraint),t["pointwiseConstraint"]=X(this.pointwiseConstraint),t}}ia.className="SeparableConv";class aa extends ia{constructor(t){super(2,t)}}aa.className="SeparableConv2D",f["ah"].registerClass(aa);class oa extends ta{constructor(t){super(1,t),oa.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t["rank"],delete t["dataFormat"],t}static verifyArgs(t){if("number"!==typeof t.kernelSize&&!R(t.kernelSize,"number",1,1))throw new b(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}oa.className="Conv1D",f["ah"].registerClass(oa);class sa extends Ke{constructor(t){super(t),"number"===typeof t.cropping?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"===typeof t.cropping[0]?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,e){return Object(f["Sh"])(()=>{if(t=$e(t),"channelsLast"===this.dataFormat){const e=Dt(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Dt(e,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const e=Dt(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Dt(e,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}sa.className="Cropping2D",f["ah"].registerClass(sa);class ua extends Ke{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==t.size?this.DEFAULT_SIZE:t.size,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat}computeOutputShape(t){if("channelsFirst"===this.dataFormat){const e=null==t[2]?null:this.size[0]*t[2],n=null==t[3]?null:this.size[1]*t[3];return[t[0],t[1],e,n]}{const e=null==t[1]?null:this.size[0]*t[1],n=null==t[2]?null:this.size[1]*t[2];return[t[0],e,n,t[3]]}}call(t,e){return f["Sh"](()=>{let e=$e(t);const n=e.shape;if("channelsFirst"===this.dataFormat){e=f["Xh"](e,[0,2,3,1]);const t=this.size[0]*n[2],r=this.size[1]*n[3],i=e.resizeNearestNeighbor([t,r]);return f["Xh"](i,[0,3,1,2])}{const t=this.size[0]*n[1],r=this.size[1]*n[2];return e.resizeNearestNeighbor([t,r])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function ca(t,e,n=[1,1],r="valid",i,a){return Object(f["Sh"])(()=>{null==i&&(i=p()),ot(i);let o=Xi(t,i);if(4!==t.rank)throw new b("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(4!==e.rank)throw new b("depthwiseKernel is required to be 4-D, but is instead "+e.rank+"-D");return o=f["le"](o,e,n,"same"===r?"same":"valid","NHWC",a),"channelsFirst"===i&&(o=f["Xh"](o,[0,3,1,2])),o})}ua.className="UpSampling2D",f["ah"].registerClass(ua);class la extends Qi{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=me(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=K(t.depthwiseConstraint),this.depthwiseRegularizer=Bi(t.depthwiseRegularizer)}build(t){if(t=Be(t),t.length<4)throw new b(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new b(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[e]}).`);const n=t[e],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return Object(f["Sh"])(()=>{t=$e(t);let e=ca(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(e=zt(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),e})}computeOutputShape(t){t=Be(t);const e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,i=Gi(e,this.kernelSize[0],this.padding,this.strides[0]),a=Gi(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],r,i,a]:[t[0],i,a,r]}getConfig(){const t=super.getConfig();return t["depthMultiplier"]=this.depthMultiplier,t["depthwiseInitializer"]=pe(this.depthwiseInitializer),t["depthwiseRegularizer"]=Ri(this.depthwiseRegularizer),t["depthwiseConstraint"]=X(this.depthwiseRegularizer),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function fa(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new b("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(t){return null==t||Array.isArray(t)?t:[t]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function da(t,e,n,r=!1,i,a,o=!1,s=!1){return f["Sh"](()=>{const u=e.shape.length;if(u<3)throw new b(`Input should be at least 3D, but is ${u}D.`);const c=[1,0].concat(Ot(2,u));if(e=f["Xh"](e,c),null!=a)throw new y("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&(i=i.asType("bool").asType("float32"),i.rank===u-1&&(i=f["He"](i,-1)),i=f["Xh"](i,c)),r&&(e=f["Ng"](e,0),null!=i&&(i=f["Ng"](i,0)));const l=[];let d,h=n;const p=e.shape[0],m=f["di"](e);let g,v;null!=i&&(g=f["di"](i));for(let e=0;e<p;++e){const n=m[e],r=f["Sh"](()=>t(n,h));if(null==i)d=r[0],h=r[1];else{const t=f["Sh"](()=>{const t=g[e],n=f["jg"](t).sub(t),i=r[0].mul(t).add(h[0].mul(n)),a=h.map((e,i)=>r[1][i].mul(t).add(e.mul(n)));return{output:i,newStates:a}});d=t.output,h=t.newStates}s&&l.push(d)}if(s){const t=1;v=f["Ah"](l,t)}return[d,v,h]})}la.className="DepthwiseConv2D",f["ah"].registerClass(la);class ha extends Ke{constructor(t){let e;if(super(t),null==t.cell)throw new b("cell property is missing for the constructor of RNN.");if(e=Array.isArray(t.cell)?new wa({cells:t.cell}):t.cell,null==e.stateSize)throw new b("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=null!=t.returnSequences&&t.returnSequences,this.returnState=null!=t.returnState&&t.returnState,this.goBackwards=null!=t.goBackwards&&t.goBackwards,this._stateful=null!=t.stateful&&t.stateful,this.unroll=null!=t.unroll&&t.unroll,this.supportsMasking=!0,this.inputSpec=[new Ve({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ot(0,t).map(t=>null)}return this.states_}setStates(t){this.states_=t}computeOutputShape(t){Ie(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const n=e[0];let r;if(r=this.returnSequences?[t[0],t[1],n]:[t[0],n],this.returnState){const n=[];for(const r of e)n.push([t[0],r]);return[r].concat(n)}return r}computeMask(t,e){return f["Sh"](()=>{Array.isArray(e)&&(e=e[0]);const t=this.returnSequences?e:null;if(this.returnState){const e=this.states.map(t=>null);return[t].concat(e)}return t})}get states(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let n=0;n<t;++n)e.push(null);return e}return this.states_}set states(t){this.states_=t}build(t){const e=null;if(null!=this.numConstants)throw new y("Constants support is not implemented in RNN yet.");Ie(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,r=t.slice(2);this.inputSpec[0]=new Ve({shape:[n,null,...r]});const i=[t[0]].concat(t.slice(2));if(null!=e)throw new y("Constants support is not implemented in RNN yet.");let a;if(this.cell.build(i),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!f["fi"].arraysEqual(this.stateSpec.map(t=>t.shape[t.shape.length-1]),a))throw new b(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is `+this.cell.stateSize)}else this.stateSpec=a.map(t=>new Ve({shape:[null,t]}));this.stateful&&this.resetStates()}resetStates(t,e=!1){Object(f["Sh"])(()=>{if(!this.stateful)throw new m("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new b("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(t=>f["ni"]([n,t])):this.states_=[f["ni"]([n,this.cell.stateSize])];else if(null==t)f["qe"](this.states_),null!=this.keptStates&&(f["qe"](this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(t=>f["ni"]([n,t])):this.states_[0]=f["ni"]([n,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new b(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: `+t);!0===e?this.keptStates.push(this.states_.slice()):f["qe"](this.states_);for(let e=0;e<this.states_.length;++e){const r=t[e],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[e]:this.cell.stateSize,a=[n,i];if(!f["fi"].arraysEqual(r.shape,a))throw new b(`State ${e} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[e]=r}}this.states_=this.states_.map(t=>f["nf"](t.clone()))})}apply(t,e){let n=null==e?null:e["initialState"],r=null==e?null:e["constants"];null==e&&(e={});const i=fa(t,n,r,this.numConstants);t=i.inputs,n=i.initialState,r=i.constants;let a=[],o=[];if(null!=n){e["initialState"]=n,a=a.concat(n),this.stateSpec=[];for(const t of n)this.stateSpec.push(new Ve({shape:t.shape}));o=o.concat(this.stateSpec)}null!=r&&(e["constants"]=r,a=a.concat(r),this.numConstants=r.length);const s=a[0]instanceof Ge;if(s){const n=[t].concat(a),r=this.inputSpec.concat(o),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,e);return this.inputSpec=i,s}return super.apply(t,e)}call(t,e){return Object(f["Sh"])(()=>{const n=null==e?null:e["mask"],r=null==e?null:e["training"];let i=null==e?null:e["initialState"];t=$e(t),null==i&&(i=this.stateful?this.states_:this.getInitialState(t));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new b(`RNN Layer has ${a} state(s) but was passed `+i.length+" initial state(s).");this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:r},s=(t,e)=>{const n=this.cell.call([t].concat(e),o);return[n[0],n.slice(1)]},u=da(s,t,i,this.goBackwards,n,null,this.unroll,this.returnSequences),c=u[0],l=u[1],f=u[2];this.stateful&&this.resetStates(f,r);const d=this.returnSequences?l:c;return this.returnState?[d].concat(f):d})}getInitialState(t){return Object(f["Sh"])(()=>{let e=f["ni"](t.shape);return e=f["Fh"](e,[1,2]),e=At(e),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>t>1?Tt(e,[1,t]):e):this.cell.stateSize>1?[Tt(e,[1,this.cell.stateSize])]:[e]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e["numConstants"]=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===ha.className&&(e["cell"]={className:this.cell.getClassName(),config:n}),Object.assign({},n,t,e)}static fromConfig(t,e,n={}){const r=e["cell"],i=mn(r,n);return new t(Object.assign(e,{cell:i}))}}ha.className="RNN",f["ah"].registerClass(ha);class pa extends Ke{}class ma extends pa{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,$(this.units,"units"),this.activation=Si(null==t.activation?this.DEFAULT_ACTIVATION:t.activation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=me(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=me(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=me(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Bi(t.kernelRegularizer),this.recurrentRegularizer=Bi(t.recurrentRegularizer),this.biasRegularizer=Bi(t.biasRegularizer),this.kernelConstraint=K(t.kernelConstraint),this.recurrentConstraint=K(t.recurrentConstraint),this.biasConstraint=K(t.biasConstraint),this.dropout=xt([1,wt([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=xt([1,wt([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Be(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return Object(f["Sh"])(()=>{if(t=t,2!==t.length)throw new b(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let n=t[1];t=t[0];const r=null!=e["training"]&&e["training"];let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Oa({ones:()=>f["jg"](t),rate:this.dropout,training:r})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Oa({ones:()=>f["jg"](n),rate:this.recurrentDropout,training:r}));const a=this.dropoutMask,o=this.recurrentDropoutMask;i=It(null!=a?f["Yf"](t,a):t,this.kernel.read()),null!=this.bias&&(i=zt(i,this.bias.read())),null!=o&&(n=f["Yf"](n,o));let s=f["od"](i,It(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:Ci(this.activation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),recurrentInitializer:pe(this.recurrentInitializer),biasInitializer:pe(this.biasInitializer),kernelRegularizer:Ri(this.kernelRegularizer),recurrentRegularizer:Ri(this.recurrentRegularizer),biasRegularizer:Ri(this.biasRegularizer),activityRegularizer:Ri(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),recurrentConstraint:X(this.recurrentConstraint),biasConstraint:X(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,e)}}ma.className="SimpleRNNCell",f["ah"].registerClass(ma);class ga extends ha{constructor(t){t.cell=new ma(t),super(t)}call(t,e){return Object(f["Sh"])(()=>{null!=this.cell.dropoutMask&&(f["qe"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(f["qe"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}static fromConfig(t,e){return new t(e)}}ga.className="SimpleRNN",f["ah"].registerClass(ga);class ba extends pa{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new b("GRUCell does not support reset_after parameter set to true.");this.units=t.units,$(this.units,"units"),this.activation=Si(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Si(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=me(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=me(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=me(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Bi(t.kernelRegularizer),this.recurrentRegularizer=Bi(t.recurrentRegularizer),this.biasRegularizer=Bi(t.biasRegularizer),this.kernelConstraint=K(t.kernelConstraint),this.recurrentConstraint=K(t.recurrentConstraint),this.biasConstraint=K(t.biasConstraint),this.dropout=xt([1,wt([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=xt([1,wt([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Be(t);const e=t[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return Object(f["Sh"])(()=>{if(t=t,2!==t.length)throw new b("GRUCell expects 2 input Tensors (inputs, h, c), got "+t.length+".");const n=null!=e["training"]&&e["training"];let r=t[1];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Oa({ones:()=>f["jg"](t),rate:this.dropout,training:n,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Oa({ones:()=>f["jg"](r),rate:this.recurrentDropout,training:n,count:3}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let o,s,u;0<this.dropout&&this.dropout<1&&(t=f["Yf"](t,i[0]));let c=It(t,this.kernel.read());this.useBias&&(c=zt(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=f["Yf"](r,a[0]));const l=this.recurrentKernel.read(),[d,h]=f["uh"](l,[2*this.units,this.units],l.rank-1),p=It(r,d),[m,g,y]=f["uh"](c,3,c.rank-1),[v,x]=f["uh"](p,2,p.rank-1);o=this.recurrentActivation.apply(f["od"](m,v)),s=this.recurrentActivation.apply(f["od"](g,x));const w=It(f["Yf"](s,r),h);u=this.activation.apply(f["od"](y,w));const O=f["od"](f["Yf"](o,r),f["Yf"](f["od"](1,f["cg"](o)),u));return[O,O]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:Ci(this.activation),recurrentActivation:Ci(this.recurrentActivation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),recurrentInitializer:pe(this.recurrentInitializer),biasInitializer:pe(this.biasInitializer),kernelRegularizer:Ri(this.kernelRegularizer),recurrentRegularizer:Ri(this.recurrentRegularizer),biasRegularizer:Ri(this.biasRegularizer),activityRegularizer:Ri(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),recurrentConstraint:X(this.recurrentConstraint),biasConstraint:X(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,e)}}ba.className="GRUCell",f["ah"].registerClass(ba);class ya extends ha{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new ba(t),super(t)}call(t,e){return Object(f["Sh"])(()=>{null!=this.cell.dropoutMask&&(f["qe"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(f["qe"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}static fromConfig(t,e){return 0===e["implmentation"]&&(e["implementation"]=1),new t(e)}}ya.className="GRU",f["ah"].registerClass(ya);class va extends pa{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,$(this.units,"units"),this.activation=Si(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Si(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=me(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=me(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=me(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Bi(t.kernelRegularizer),this.recurrentRegularizer=Bi(t.recurrentRegularizer),this.biasRegularizer=Bi(t.biasRegularizer),this.kernelConstraint=K(t.kernelConstraint),this.recurrentConstraint=K(t.recurrentConstraint),this.biasConstraint=K(t.biasConstraint),this.dropout=xt([1,wt([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=xt([1,wt([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;t=Be(t);const n=t[t.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const t=this.biasInitializer,n=this.units;r=new(e=class extends Yt{apply(e,r){const i=t.apply([n]),a=(new Jt).apply([n]),o=t.apply([2*n]);return Nt(Nt(i,a),o)}},e.className="CustomInit",e)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,e){return Object(f["Sh"])(()=>{const n=null!=e["training"]&&e["training"];if(t=t,3!==t.length)throw new b("LSTMCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");let r=t[1];const i=t[2];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Oa({ones:()=>f["jg"](t),rate:this.dropout,training:n,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Oa({ones:()=>f["jg"](r),rate:this.recurrentDropout,training:n,count:4}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let s,u,c,l;0<this.dropout&&this.dropout<1&&(t=f["Yf"](t,a[0]));let d=It(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=f["Yf"](r,o[0])),d=f["od"](d,It(r,this.recurrentKernel.read())),this.useBias&&(d=zt(d,this.bias.read()));const[h,p,m,g]=f["uh"](d,4,d.rank-1);s=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),c=f["od"](f["Yf"](u,i),f["Yf"](s,this.activation.apply(m))),l=this.recurrentActivation.apply(g);const y=f["Yf"](l,this.activation.apply(c));return[y,y,c]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:Ci(this.activation),recurrentActivation:Ci(this.recurrentActivation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),recurrentInitializer:pe(this.recurrentInitializer),biasInitializer:pe(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ri(this.kernelRegularizer),recurrentRegularizer:Ri(this.recurrentRegularizer),biasRegularizer:Ri(this.biasRegularizer),activityRegularizer:Ri(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),recurrentConstraint:X(this.recurrentConstraint),biasConstraint:X(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,e)}}va.className="LSTMCell",f["ah"].registerClass(va);class xa extends ha{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new va(t),super(t)}call(t,e){return Object(f["Sh"])(()=>{null!=this.cell.dropoutMask&&(f["qe"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(f["qe"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}static fromConfig(t,e){return 0===e["implmentation"]&&(e["implementation"]=1),new t(e)}}xa.className="LSTM",f["ah"].registerClass(xa);class wa extends pa{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(t,e){return Object(f["Sh"])(()=>{t=t;let n=t.slice(1);const r=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?r.push(n.splice(0,t.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let a;for(let o=0;o<this.cells.length;++o){const s=this.cells[o];n=r[o],a=0===o?[t[0]].concat(n):[a[0]].concat(n),a=s.call(a,e),i.push(a.slice(1))}n=[];for(const t of i.slice().reverse())n.push(...t);return[a[0]].concat(n)})}build(t){let e;Ie(t)&&(t=t[0]),t=t,this.cells.forEach((n,r)=>{ft("RNNCell_"+r,()=>{n.build(t),e=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=super.getConfig(),e=t=>({className:t.getClassName(),config:t.getConfig()}),n=this.cells.map(e),r={cells:n};return Object.assign({},t,r)}static fromConfig(t,e,n={}){const r=[];for(const i of e["cells"])r.push(mn(i,n));return new t({cells:r})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return We(t)}setWeights(t){const e=[];for(const n of this.cells){const r=n.weights.length,i=t.splice(r);for(let t=0;t<n.weights.length;++t)e.push([n.weights[t],i[t]])}qe(e)}}function Oa(t){const{ones:e,rate:n,training:r=!1,count:i=1}=t,a=()=>Ut(e(),n),o=()=>qt(a,e,r);if(!i||i<=1)return f["nf"](o().clone());const s=Array(i).fill(void 0).map(o);return s.map(t=>f["nf"](t.clone()))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */wa.className="StackedRNNCells",f["ah"].registerClass(wa);var _a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};class Aa extends ha{constructor(t){if(t.unroll)throw new y("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new y("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new Ve({ndim:5})]}call(t,e){return f["Sh"](()=>{if(null!=this.cell.dropoutMask&&(f["qe"](this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(f["qe"](this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),e&&e["constants"])throw new b("ConvRNN2D cell does not support constants");const n=null==e?null:e["mask"],r=null==e?null:e["training"],i=null==e?null:e["initialState"];return super.call(t,{mask:n,training:r,initialState:i})})}computeOutputShape(t){let e=this.computeSingleOutputShape(t);return this.returnSequences||(e=[e[0],...e.slice(2)]),this.returnState&&(e=[e,...Array(2).fill([t[0],...e.slice(-3)])]),e}getInitialState(t){return f["Sh"](()=>{const{stateSize:e}=this.cell,n=t.shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)],a=f["ni"](i);return Array.isArray(e)?Array(e.length).fill(a):[a]})}resetStates(t,e=!1){f["Sh"](()=>{if(!this.stateful)throw new m("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)],a=n[0];if(null==a)throw new b("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>f["ni"](i)):this.states_=[f["ni"](i)];else if(null==t)f["qe"](this.states_),null!=this.keptStates&&(f["qe"](this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>f["ni"](i)):this.states_[0]=f["ni"](i);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new b(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: `+t);e?this.keptStates.push(this.states_.slice()):f["qe"](this.states_);for(let e=0;e<this.states_.length;++e){const n=t[e],r=i;if(!f["fi"].arraysEqual(n.shape,r))throw new b(`State ${e} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[e]=n}}this.states_=this.states_.map(t=>f["nf"](t.clone()))})}computeSingleOutputShape(t){const{dataFormat:e,filters:n,kernelSize:r,padding:i,strides:a,dilationRate:o}=this.cell,s="channelsFirst"===e,u=t[s?3:2],c=t[s?4:3],l=Gi(u,r[0],i,a[0],o[0]),f=Gi(c,r[1],i,a[1],o[1]),d=[...t.slice(0,2),...s?[n,l,f]:[l,f,n]];return d}}Aa.className="ConvRNN2D";class ja extends va{constructor(t){const{filters:e,kernelSize:n,strides:r,padding:i,dataFormat:a,dilationRate:o}=t;super(Object.assign({},t,{units:e})),this.filters=e,$(this.filters,"filters"),this.kernelSize=Vi(n,2,"kernelSize"),this.kernelSize.forEach(t=>$(t,"kernelSize")),this.strides=Vi(r||1,2,"strides"),this.strides.forEach(t=>$(t,"strides")),this.padding=i||"valid",st(this.padding),this.dataFormat=a||"channelsLast",ot(this.dataFormat),this.dilationRate=Vi(o||1,2,"dilationRate"),this.dilationRate.forEach(t=>$(t,"dilationRate"))}build(t){var e;t=Be(t);const n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n])throw new b("The channel dimension of the input should be defined. Found "+t[n]);const r=t[n],i=4,a=this.kernelSize.concat([r,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let t;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;t=new(e=class extends Yt{apply(t,e){const i=n.apply([r]),a=f["ig"]([r]),o=n.apply([2*r]);return Ft([i,a,o])}},e.className="CustomInit",e)}else t=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,t,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,e){return f["Sh"](()=>{if(3!==t.length)throw new b("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");const n=e["training"]||!1,r=t[0],i=t[1],a=t[2],o=4;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Oa({ones:()=>f["jg"](r),rate:this.dropout,training:n,count:o}));const s=this.dropoutMask,u=(t,e,n)=>e&&e[n]?f["Yf"](e[n],t):t;let c=u(r,s,0),l=u(r,s,1),d=u(r,s,2),h=u(r,s,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Oa({ones:()=>f["jg"](i),rate:this.recurrentDropout,training:n,count:o}));const p=this.recurrentDropoutMask;let m=u(i,p,0),g=u(i,p,1),y=u(i,p,2),v=u(i,p,3);const x=3,[w,O,_,A]=f["uh"](this.kernel.read(),o,x),[j,k,C,E]=this.useBias?f["uh"](this.bias.read(),o):[null,null,null,null];c=this.inputConv(c,w,j,this.padding),l=this.inputConv(l,O,k,this.padding),d=this.inputConv(d,_,C,this.padding),h=this.inputConv(h,A,E,this.padding);const[S,D,F,N]=f["uh"](this.recurrentKernel.read(),o,x);m=this.recurrentConv(m,S),g=this.recurrentConv(g,D),y=this.recurrentConv(y,F),v=this.recurrentConv(v,N);const T=this.recurrentActivation.apply(f["od"](c,m)),M=this.recurrentActivation.apply(f["od"](l,g)),I=f["od"](f["Yf"](M,a),f["Yf"](T,this.activation.apply(f["od"](d,y)))),R=f["Yf"](this.recurrentActivation.apply(f["od"](h,v)),this.activation.apply(I));return[R,R,I]})}getConfig(){const t=super.getConfig(),{units:e}=t,n=_a(t,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,r)}inputConv(t,e,n,r){const i=f["Zd"](t,e,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?zt(i,n,this.dataFormat):i}recurrentConv(t,e){const n=1;return f["Zd"](t,e,n,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}ja.className="ConvLSTM2DCell",f["ah"].registerClass(ja);class ka extends Aa{constructor(t){const e=new ja(t);super(Object.assign({},t,{cell:e}))}static fromConfig(t,e){return new t(e)}}ka.className="ConvLSTM2D",f["ah"].registerClass(ka);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Ca extends Ke{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(null==this.noiseShape)return this.noiseShape;const e=t.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e);const n=$e(t);if(0<this.rate&&this.rate<1){const t=null!=e["training"]&&e["training"],r=this.getNoiseShape(n),i=qt(()=>Ut(n,this.rate,r,this.seed),()=>n,t);return i}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}Ca.className="Dropout",f["ah"].registerClass(Ca);class Ea extends Ca{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}Ea.className="SpatialDropout1D",f["ah"].registerClass(Ea);class Sa extends Ke{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,$(this.units,"units"),this.activation=Si(t.activation),null!=t.useBias&&(this.useBias=t.useBias),this.kernelInitializer=me(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=me(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=K(t.kernelConstraint),this.biasConstraint=K(t.biasConstraint),this.kernelRegularizer=Bi(t.kernelRegularizer),this.biasRegularizer=Bi(t.biasRegularizer),this.activityRegularizer=Bi(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=Be(t);const e=t[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){t=Be(t);const e=t.slice();return e[e.length-1]=this.units,e}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e);const n=$e(t),r=L(this.activation.getClassName());let i;return null!=r?i=It(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=It(n,this.kernel.read()),null!=this.bias&&(i=zt(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i})}getConfig(){const t={units:this.units,activation:Ci(this.activation),useBias:this.useBias,kernelInitializer:pe(this.kernelInitializer),biasInitializer:pe(this.biasInitializer),kernelRegularizer:Ri(this.kernelRegularizer),biasRegularizer:Ri(this.biasRegularizer),activityRegularizer:Ri(this.activityRegularizer),kernelConstraint:X(this.kernelConstraint),biasConstraint:X(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}Sa.className="Dense",f["ah"].registerClass(Sa);class Da extends Ke{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Be(t);for(const e of t.slice(1))if(null==e)throw new b(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],yt(t,1)]}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e);let n=$e(t);if("channelsFirst"===this.dataFormat&&n.rank>1){const t=[0];for(let e=2;e<n.rank;++e)t.push(e);t.push(1),n=n.transpose(t)}return Ct(n)})}getConfig(){const t={};null!=this.dataFormat&&(t["dataFormat"]=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}Da.className="Flatten",f["ah"].registerClass(Da);class Fa extends Ke{constructor(t){super(t),this.supportsMasking=!0,this.activation=Si(t.activation)}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e);const n=$e(t);return this.activation.apply(n)})}getConfig(){const t={activation:Ci(this.activation)},e=super.getConfig();return Object.assign(t,e),t}}Fa.className="Activation",f["ah"].registerClass(Fa);class Na extends Ke{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,e){return Object(f["Sh"])(()=>(t=$e(t),jt(t,this.n)))}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}Na.className="RepeatVector",f["ah"].registerClass(Na);class Ta extends Ke{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||null==t}fixUnknownDimension(t,e){const n="Total size of new array must be unchanged.",r=e.slice();let i=1,a=null;for(let s=0;s<r.length;++s){const t=r[s];if(this.isUnknown(t)){if(null!==a)throw new b("Can only specifiy one unknown dimension.");a=s}else i*=t}const o=yt(t);if(null!==a){if(0===i||o%i!==0)throw new b(n);r[a]=o/i}else if(o!==i)throw new b(n);return r}computeOutputShape(t){let e=!1;for(let n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e);const n=$e(t),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return n.reshape(i)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}Ta.className="Reshape",f["ah"].registerClass(Ta);class Ma extends Ke{constructor(t){if(super(t),null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+t.dims+" instead.");const e=Ot(1,t.dims.length+1);if(!f["fi"].arraysEqual(t.dims.slice().sort(),e))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ve({ndim:this.dims.length+1})]}computeOutputShape(t){t=Be(t);const e=t.slice();return this.dims.forEach((n,r)=>{e[r+1]=t[n]}),e}call(t,e){return Object(f["Xh"])($e(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}Ma.className="Permute",f["ah"].registerClass(Ma);class Ia extends Ke{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,this.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(t,e){const n=$e(t),r=-1;return Object(f["sd"])(Object(f["fg"])(n,this.maskValue),r)}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e);const n=$e(t),r=-1,i=!0,a=Object(f["sd"])(Object(f["fg"])(n,this.maskValue),r,i),o=n.mul(a.asType(n.dtype));return o})}}Ia.className="Masking",f["ah"].registerClass(Ia);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Ra extends Ke{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){let e=null;null!=t.batchSize&&(e=t.batchSize),null==t.inputLength?this.batchInputShape=[e,null]:this.batchInputShape=[e].concat(A(t.inputLength))}this.inputDim=t.inputDim,$(this.inputDim,"inputDim"),this.outputDim=t.outputDim,$(this.outputDim,"outputDim"),this.embeddingsInitializer=me(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Bi(t.embeddingsRegularizer),this.activityRegularizer=Bi(t.activityRegularizer),this.embeddingsConstraint=K(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,e){return Object(f["Sh"])(()=>this.maskZero?(t=$e(t),Object(f["fg"])(t,Object(f["oi"])(t))):null)}computeOutputShape(t){if(t=Be(t),null==this.inputLength)return[...t,this.outputDim];const e=A(this.inputLength);if(e.length!==t.length-1)throw new b(`"inputLength" is ${this.inputLength}, but received input shape has shape `+t);{let n=0;for(let r=0;r<e.length;++r){const i=e[r],a=t[r+1];if(null!=i&&null!=a&&i!==a)throw new b(`"inputLength" is ${this.inputLength}, but received input shape has shape `+t);null==i&&(e[n]=a),n++}}return[t[0],...e,this.outputDim]}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e);let n=$e(t);"int32"!==n.dtype&&(n=_t(n,"int32"));const r=Rt(this.embeddings.read(),n.as1D());return r.reshape(Be(this.computeOutputShape(n.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:pe(this.embeddingsInitializer),embeddingsRegularizer:Ri(this.embeddingsRegularizer),activityRegularizer:Ri(this.activityRegularizer),embeddingsConstraint:X(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},e=super.getConfig();return Object.assign(t,e),t}}Ra.className="Embedding",f["ah"].registerClass(Ra);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class $a extends Ke{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new y}computeElementwiseOpOutputShape(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;const n=t.slice(0,t.length-e.length);for(let r=0;r<e.length;++r){const i=t[t.length-e.length+r],a=e[r];if(null==i||null==a||i<0||a<0)n.push(null);else if(1===i)n.push(a);else if(1===a)n.push(i);else{if(i!==a)throw new b("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(i)}}return n}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Be(t)]),t=t,t.length<2)throw new b(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let e=[];for(const i of t)null!=i&&null!==i[0]&&e.push(i[0]);if(e=T(e),e.length>1)throw new b(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let n=null==t[0]?null:t[0].slice(1);for(let i=1;i<t.length;++i){const e=null==t[i]?null:t[i].slice(1);n=this.computeElementwiseOpOutputShape(n,e)}const r=t.map(t=>t.length);-1===t.indexOf(null)&&1===T(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,e){return Object(f["Sh"])(()=>{if(t=t,this.reshapeRequired){const e=[],n=t.map(t=>t.rank);if(-1===n.indexOf(null)){const r=wt(n);for(let n of t){const t=n.rank;for(let e=0;e<r-t;++e)n=At(n,1);e.push(n)}return this.mergeFunction(e)}{let n=!1;for(const a of t){const t=a.rank;if(null==t){const t=a.shape,r=t[0],i=t.slice(1).concat([r]);let o=a.reshape([r].concat(yt(t.slice(1))));o=f["Xh"](o,[1,0]),o=o.reshape(i),e.push(o),n=!0}else if(t>1){const r=Ot(1,t).concat([0]);e.push(f["Xh"](a,r)),n=!0}else e.push(a)}let r=this.mergeFunction(e);const i=r.rank;if(n)if(null==i){const t=r.shape,e=t.length,n=t[e-1],i=[n].concat(t.slice(0,t.length-1));r=f["Xh"](r.reshape([-1,n]),[1,0]).reshape(i)}else if(i>1){const t=[i-1].concat(Ot(0,i-1));r=f["Xh"](r,t)}return r}}return this.mergeFunction(t)})}computeOutputShape(t){let e;t=t,e=null==t[0]?null:t[0].slice(1);for(let r=1;r<t.length;++r){const n=null==t[r]?null:t[r].slice(1);e=this.computeElementwiseOpOutputShape(e,n)}let n=[];for(const r of t)null!=r&&null!==r[0]&&n.push(r[0]);return n=T(n),e=1===n.length?n.concat(e):[null].concat(e),e}computeMask(t,e){return f["Sh"](()=>{if(null==e)return null;if(!Array.isArray(e))throw new b("`mask` should be an Array");if(!Array.isArray(t))throw new b("`inputs` should be an Array");if(e.length!==t.length)throw new b(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${e.length})`);if(e.every(t=>null==t))return null;e=e.map(t=>null==t?t:f["He"](t,0));let n=e[0];for(let t=1;t<e.length-1;++t)n=f["Cf"](n,e[t]);return n})}}class Ba extends $a{constructor(t){super(t)}mergeFunction(t){return Object(f["Sh"])(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=f["od"](e,t[n]);return e})}}Ba.className="Add",f["ah"].registerClass(Ba);class za extends $a{constructor(t){super(t)}mergeFunction(t){return Object(f["Sh"])(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=f["Yf"](e,t[n]);return e})}}za.className="Multiply",f["ah"].registerClass(za);class La extends $a{constructor(t){super(t)}mergeFunction(t){return Object(f["Sh"])(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=f["od"](e,t[n]);return f["Yf"](1/t.length,e)})}}La.className="Average",f["ah"].registerClass(La);class Pa extends $a{constructor(t){super(t)}mergeFunction(t){return Object(f["Sh"])(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=f["Nf"](e,t[n]);return e})}}Pa.className="Maximum",f["ah"].registerClass(Pa);class Ua extends $a{constructor(t){super(t)}mergeFunction(t){return Object(f["Sh"])(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=f["Sf"](e,t[n]);return e})}}Ua.className="Minimum",f["ah"].registerClass(Ua);class Wa extends $a{constructor(t){super(t),this.DEFAULT_AXIS=-1,null==t&&(t={}),this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new b("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let e=!0;for(const r of t)if(null!=r){e=!1;break}if(e)return;const n=[];for(let r=0;r<t.length;++r){const e=t[r].slice();e.splice(this.axis,1);let i=!1;for(const t of n)if(f["fi"].arraysEqual(t,e)){i=!0;break}i||n.push(e)}if(n.length>1)throw new b("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Object(f["Sh"])(()=>Ft(t,this.axis))}computeOutputShape(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new b("A `Concatenate` layer should be called on a list of inputs.");const e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of e.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(t,e){if(null==e)return null;if(!Array.isArray(e))throw new b("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new b("`inputs` should be an array for Concatenate");if(e.length!==t.length)throw new b(`Mismatch in the length of mask (${e.length}) and the legnth of inputs (${t.length})`);return f["Sh"](()=>{let n=!0;if(e.forEach(t=>{null==t||(n=!1)}),n)return null;const r=[];for(let a=0;a<t.length;++a)null==e[a]?r.push(f["jg"](t[a]).asType("bool")):e[a].rank<t[a].rank?r.push(f["He"](e[a],-1)):r.push(e[a]);const i=f["Td"](r,this.axis);return f["rd"](i,-1,!1)})}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}function qa(t,e){while(t<0)t+=e;return t}function Va(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new y("batchDot is not implemented for tensors of 4D or higher rank yet");if(f["fi"].assert(t.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got "+t.shape.length),f["fi"].assert(t.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got "+e.shape.length),"number"===typeof n&&(n=[n,n]),"complex64"===t.dtype||"complex64"===e.dtype)throw new y("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;null==n&&(n=[r-1,i-2]);const a=n;return f["Sh"](()=>{let n,o;if(r>i){n=r-i;const t=[];for(let e=0;e<n;++e)t.push(1);e=e.reshape(e.shape.concat(t))}else if(i>r){n=i-r;const e=[];for(let t=0;t<n;++t)e.push(1);t=t.reshape(t.shape.concat(e))}else n=0;if(2===t.shape.length&&2===e.shape.length)o=a[0]===a[1]?t.mul(e).sum(a[0]):t.transpose([1,0]).mul(e).sum(a[1]);else{const n=a[0]!==t.shape.length-1,r=a[1]===e.shape.length-1;o=t.matMul(e,n,r)}if(n>0){let t;t=r>i?r+i-3:r-1;const e=[];for(let r=t;r<t+n;++r)e.push(r);o=o.squeeze(e)}return 1===o.shape.length&&(o=o.expandDims(1)),o})}Wa.className="Concatenate",f["ah"].registerClass(Wa);class Ga extends $a{constructor(t){super(t),this.axes=t.axes,this.normalize=null!=t.normalize&&t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){f["fi"].assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0],n=t[1];if(e.length>3||n.length>3)throw new y("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(e,n);if(e[r[0]]!==n[r[1]])throw new b(`Dimension incompatibility: ${e[r[0]]} !== ${n[r[1]]}`)}mergeFunction(t){if(2!==t.length)throw new b(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let e,n=t[0],r=t[1];return e=Array.isArray(this.axes)?this.axes.map((e,n)=>qa(e,t[n].shape.length)):[qa(this.axes,n.shape.length),qa(this.axes,r.shape.length)],this.normalize&&(n=gn(n,e[0]),r=gn(r,e[1])),Va(n,r,e)}interpretAxes(t,e){let n;return n=Array.isArray(this.axes)?this.axes:[qa(this.axes,t.length),qa(this.axes,e.length)],n}computeOutputShape(t){f["fi"].assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0].slice(),n=t[1].slice();if(e.length>3||n.length>3)throw new y("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(e,n);e.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const i=e.concat(n);return 1===i.length&&i.push(1),i}computeMask(t,e){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},e=super.getConfig();return Object.assign(t,e),t}}Ga.className="Dot",f["ah"].registerClass(Ga);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Ha extends Ke{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e);const n=$e(t),r=()=>Mt(n.shape,0,this.stddev).add(n),i=qt(r,()=>n,e["training"]||!1);return i})}}Ha.className="GaussianNoise",f["ah"].registerClass(Ha);class Xa extends Ke{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e);const n=$e(t);if(this.rate>0&&this.rate<1){const t=()=>{const t=Math.sqrt(this.rate/(1-this.rate));return n.mul(Mt(n.shape,1,t))};return qt(t,()=>n,e["training"]||!1)}return n})}}Xa.className="GaussianDropout",f["ah"].registerClass(Xa);class Ya extends Ke{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||$e(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Object(f["Sh"])(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(t),r=()=>{const e=$e(t),r=1.6732632423543772,i=1.0507009873554805,a=-r*i;let o=Object(f["bf"])(Object(f["Bg"])(n),this.rate);o=_t(o,"float32");const s=((1-this.rate)*(1+this.rate*a**2))**-.5,u=-s*a*this.rate,c=e.mul(o).add(o.add(-1).mul(a));return c.mul(s).add(u)};return qt(r,()=>$e(t),e["training"]||!1)}return t})}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Ka(t,e,n,r,i,a=.001){let o;if(2===t.rank)o=f["Gd"](t,e,n,r,i,a);else if(3===t.rank)o=f["Hd"](t,e,n,r,i,a);else{if(4!==t.rank)throw new y(`batchNormalization is not implemented for array of rank ${t.rank} yet`);o=f["Id"](t,e,n,r,i,a)}return o}function Ja(t,e,n,r,i=.001){return Object(f["Sh"])(()=>{const a=f["Wf"](t,r),o=a.mean,s=a.variance,u=Ka(t,o,s,n,e,i);return[u,o,s]})}function Za(t,e,n,r,i=.001){return Object(f["Sh"])(()=>{const a=f["Wf"](t,r),o=a.mean,s=a.variance,u=[];for(const e of Ot(0,t.rank))-1!==r.indexOf(e)?u.push(1):u.push(t.shape[e]);const c=o.reshape(u),l=s.reshape(u),d=null==e?null:e.reshape(u),h=null==n?null:n.reshape(u),p=Ka(t,c,l,h,d,i);return[p,o,s]})}function Qa(t,e,n,r,i=.001){return f["fi"].arraysEqual(r.slice().sort(),Ot(0,t.rank-1))?Ja(t,e,n,r,i):Za(t,e,n,r,i)}Ya.className="AlphaDropout",f["ah"].registerClass(Ya);class to extends Ke{constructor(t){null==t&&(t={}),super(t),this.supportsMasking=!0,this.axis=null==t.axis?-1:t.axis,this.momentum=null==t.momentum?.99:t.momentum,this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=me(t.betaInitializer||"zeros"),this.gammaInitializer=me(t.gammaInitializer||"ones"),this.movingMeanInitializer=me(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=me(t.movingVarianceInitializer||"ones"),this.betaConstraint=K(t.betaConstraint),this.gammaConstraint=K(t.gammaConstraint),this.betaRegularizer=Bi(t.betaRegularizer),this.gammaRegularizer=Bi(t.gammaRegularizer)}build(t){t=Be(t);const e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new b(`Axis ${e} of input tensor should have a defined dimension but the layer received an input with shape `+JSON.stringify(t)+".");this.inputSpec=[new Ve({ndim:t.length,axes:{[e]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,e){return Object(f["Sh"])(()=>{const n=null!=e["training"]&&e["training"],r=$e(t),i=r.shape,a=i.length,o=Ot(0,a),s=this.axis>=0?this.axis:this.axis+a;o.splice(s,1);const u=x(1,a);u[s]=i[s];const c=o.slice();c.sort();const l=!f["fi"].arraysEqual(c,Ot(0,a).slice(0,a-1)),d=()=>{if(l){const t=this.movingMean.read().reshape(u),e=this.movingVariance.read().reshape(u),n=this.center?this.beta.read().reshape(u):null,i=this.scale?this.gamma.read().reshape(u):null;return Ka(r,t,e,n,i,this.epsilon)}return Ka(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)};if(!n)return d();const[h,p,m]=Qa(r,this.gamma.read(),this.beta.read(),o,this.epsilon),g=(t,e,n)=>{f["Sh"](()=>{const r=1-n,i=t.read(),a=i.sub(e).mul(r);t.write(i.sub(a))})},b=()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)};return b(),h})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:pe(this.betaInitializer),gammaInitializer:pe(this.gammaInitializer),movingMeanInitializer:pe(this.movingMeanInitializer),movingVarianceInitializer:pe(this.movingVarianceInitializer),betaRegularizer:Ri(this.betaRegularizer),gammaRegularizer:Ri(this.gammaRegularizer),betaConstraint:X(this.betaConstraint),gammaConstraint:X(this.gammaConstraint)},e=super.getConfig();return Object.assign(t,e),t}}to.className="BatchNormalization",f["ah"].registerClass(to);class eo extends Ke{constructor(t){if(null==t&&(t={}),super(t),this.axis=null==t.axis?-1:t.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received "+this.axis)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(this.axis));for(const t of this.axis)if(!Number.isInteger(t))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(this.axis))}this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=me(t.betaInitializer||"zeros"),this.gammaInitializer=me(t.gammaInitializer||"ones"),this.betaRegularizer=Bi(t.betaRegularizer),this.gammaRegularizer=Bi(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=Be(t);const e=t.length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=e);for(const i of this.axis)if(i<0||i>=e)throw new Error("Invalid axis: "+i);if(this.axis.length!==T(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);const n=this.axis.map(e=>t[e]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(t,e){const n=$e(t),r=n.shape,i=r.length;return Object(f["Sh"])(()=>{const t=!0;let{mean:e,variance:a}=Object(f["Wf"])(n,this.axis,t);const o=x(1,i);for(const n of this.axis)o[n]=r[n];const s=t=>null!=t&&t.shape.length!==i&&this.axis!==[i-1]?t.reshape(o):t;let u=s(this.gamma.read()),c=s(this.beta.read());const l=[],d=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(l.push(r[n]),d.push(1)):(l.push(1),d.push(r[n]));return e=e.tile(l),a=a.tile(l),u=u.tile(d),c=c.tile(d),Ka(n,e,a,c,u,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:pe(this.betaInitializer),gammaInitializer:pe(this.gammaInitializer),betaRegularizer:Ri(this.betaRegularizer),gammaRegularizer:Ri(this.gammaRegularizer)},e=super.getConfig();return Object.assign(t,e),t}}function no(t,e,n){return Object(f["Sh"])(()=>{if(4!==t.rank)throw new b("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(null==e&&(e=[[1,1],[1,1]]),2!==e.length||2!==e[0].length||2!==e[1].length)throw new b("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n=p()),"channelsLast"!==n&&"channelsFirst"!==n)throw new b(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],e[0],e[1]]:[[0,0],e[0],e[1],[0,0]],f["mg"](t,r)})}eo.className="LayerNormalization",f["ah"].registerClass(eo);class ro extends Ke{constructor(t){if(null==t&&(t={}),super(t),this.dataFormat=null==t.dataFormat?p():t.dataFormat,null==t.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof t.padding)this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new b(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let e,n;if("number"===typeof t.padding[0])e=[t.padding[0],t.padding[0]],n=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new b(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(e=t.padding[0],2!==t.padding[1].length)throw new b(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);n=t.padding[1]}this.padding=[e,n]}this.inputSpec=[new Ve({ndim:4})]}computeOutputShape(t){let e,n;return t=Be(t),"channelsFirst"===this.dataFormat?(e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],e,n]):(e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],e,n,t[3]])}call(t,e){return Object(f["Sh"])(()=>no($e(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function io(t,e,n,r,i,a){return Object(f["Sh"])(()=>{let o;ot(i),ut(a),st(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i=p()),null==a&&(a="max"),t=Xi(t,i);const s="same"===r?"same":"valid";return o="max"===a?f["Kf"](t,e,n,s):f["Ad"](t,e,n,s),"channelsFirst"===i&&(o=f["Xh"](o,[0,3,1,2])),o})}function ao(t,e,n,r,i,a){return Object(f["Sh"])(()=>{let o;ot(i),ut(a),st(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i=p()),null==a&&(a="max"),t=Yi(t,i);const s="same"===r?"same":"valid";return o="max"===a?f["Lf"](t,e,n,s):f["Bd"](t,e,n,s),"channelsFirst"===i&&(o=f["Xh"](o,[0,4,1,2,3])),o})}ro.className="ZeroPadding2D",f["ah"].registerClass(ro);class oo extends Ke{constructor(t){if(null==t.poolSize&&(t.poolSize=2),super(t),"number"===typeof t.poolSize)this.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!==typeof t.poolSize[0])throw new b("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));this.poolSize=t.poolSize}if($(this.poolSize,"poolSize"),null==t.strides)this.strides=this.poolSize;else if("number"===typeof t.strides)this.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!==typeof t.strides[0])throw new b("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));this.strides=t.strides}$(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,st(this.padding),this.inputSpec=[new Ve({ndim:3})]}computeOutputShape(t){t=Be(t);const e=Gi(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}call(t,e){return Object(f["Sh"])(()=>{this.invokeCallHook(t,e),t=At($e(t),2);const n=this.poolingFunction($e(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return f["zh"](n,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(t,e),t}}class so extends oo{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return ot(i),st(r),io(t,e,n,r,i,"max")}}so.className="MaxPooling1D",f["ah"].registerClass(so);class uo extends oo{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return ot(i),st(r),io(t,e,n,r,i,"avg")}}uo.className="AveragePooling1D",f["ah"].registerClass(uo);class co extends Ke{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new b("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");this.strides=t.strides}else this.strides=[t.strides,t.strides];$(this.poolSize,"poolSize"),$(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,ot(this.dataFormat),st(this.padding),this.inputSpec=[new Ve({ndim:4})]}computeOutputShape(t){t=Be(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=Gi(e,this.poolSize[0],this.padding,this.strides[0]),n=Gi(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]}call(t,e){return Object(f["Sh"])(()=>(this.invokeCallHook(t,e),this.poolingFunction($e(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class lo extends co{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return ot(i),st(r),io(t,e,n,r,i,"max")}}lo.className="MaxPooling2D",f["ah"].registerClass(lo);class fo extends co{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return ot(i),st(r),io(t,e,n,r,i,"avg")}}fo.className="AveragePooling2D",f["ah"].registerClass(fo);class ho extends Ke{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new b("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+t.strides.length+".");this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];$(this.poolSize,"poolSize"),$(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,ot(this.dataFormat),st(this.padding),this.inputSpec=[new Ve({ndim:5})]}computeOutputShape(t){t=Be(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[4]:t[3];return e=Gi(e,this.poolSize[0],this.padding,this.strides[0]),n=Gi(n,this.poolSize[1],this.padding,this.strides[1]),r=Gi(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n,r]:[t[0],e,n,r,t[4]]}call(t,e){return Object(f["Sh"])(()=>(this.invokeCallHook(t,e),this.poolingFunction($e(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class po extends ho{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return ot(i),st(r),ao(t,e,n,r,i,"max")}}po.className="MaxPooling3D",f["ah"].registerClass(po);class mo extends ho{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return ot(i),st(r),ao(t,e,n,r,i,"avg")}}mo.className="AveragePooling3D",f["ah"].registerClass(mo);class go extends Ke{constructor(t){super(t),this.inputSpec=[new Ve({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,e){throw new y}}class bo extends go{constructor(t){super(t||{})}call(t,e){return Object(f["Sh"])(()=>{const e=$e(t);return f["Pf"](e,1)})}}bo.className="GlobalAveragePooling1D",f["ah"].registerClass(bo);class yo extends go{constructor(t){super(t||{})}call(t,e){return Object(f["Sh"])(()=>{const e=$e(t);return f["Jf"](e,1)})}}yo.className="GlobalMaxPooling1D",f["ah"].registerClass(yo);class vo extends Ke{constructor(t){super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,ot(this.dataFormat),this.inputSpec=[new Ve({ndim:4})]}computeOutputShape(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]}call(t,e){throw new y}getConfig(){const t={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class xo extends vo{call(t,e){return Object(f["Sh"])(()=>{const e=$e(t);return"channelsLast"===this.dataFormat?f["Pf"](e,[1,2]):f["Pf"](e,[2,3])})}}xo.className="GlobalAveragePooling2D",f["ah"].registerClass(xo);class wo extends vo{call(t,e){return Object(f["Sh"])(()=>{const e=$e(t);return"channelsLast"===this.dataFormat?f["Jf"](e,[1,2]):f["Jf"](e,[2,3])})}}wo.className="GlobalMaxPooling2D",f["ah"].registerClass(wo);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
class Oo extends Ke{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(t){null!=this.layer&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(t,e),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,e,n={}){const r=e["layer"],i=mn(r,n);delete e["layer"];const a={layer:i};return Object.assign(a,e),new t(a)}}class _o extends Oo{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=Be(t),t.length<3)throw new b("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];const e=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(e),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=Be(t);const e=[t[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e),r=t[1];return[n[0],r].concat(n.slice(1))}call(t,e){return Object(f["Sh"])(()=>{t=$e(t);const n=(t,n)=>{const r=$e(this.layer.call(t,e));return[r,[]]},r=da(n,t,[],!1,null,null,!1,!0),i=r[1];return i})}}function Ao(t){I(it,"BidirectionalMergeMode",t)}_o.className="TimeDistributed",f["ah"].registerClass(_o);const jo="concat";class ko extends Oo{constructor(t){super(t);const e=t.layer.getConfig(),n={};n["className"]=t.layer.getClassName(),n["config"]=e,this.forwardLayer=mn(n),e["goBackwards"]=!0!==e["goBackwards"];const r={};if(r["className"]=t.layer.getClassName(),r["config"]=e,this.backwardLayer=mn(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===t.mergeMode?jo:t.mergeMode,Ao(this.mergeMode),t.weights)throw new y("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const e=t.length,n=Math.floor(e/2);this.forwardLayer.setWeights(t.slice(0,n)),this.backwardLayer.setWeights(t.slice(n))}computeOutputShape(t){let e,n,r,i=this.forwardLayer.computeOutputShape(t);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),e=i[0]):e=i[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):_(n)}apply(t,e){let n=null==e?null:e["initialState"],r=null==e?null:e["constants"];null==e&&(e={});const i=fa(t,n,r,this.numConstants);if(t=i.inputs,n=i.initialState,r=i.constants,Array.isArray(t)&&(n=t.slice(1),t=t[0]),(null==n||0===n.length)&&null==r)return super.apply(t,e);const a=[],o=[];if(null!=n){const t=n.length;if(t%2>0)throw new b("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");e["initialState"]=n,a.push(...n);const r=n.map(t=>new Ve({shape:t.shape}));this.forwardLayer.stateSpec=r.slice(0,t/2),this.backwardLayer.stateSpec=r.slice(t/2),o.push(...r)}if(null!=r)throw new y("Support for constants in Bidirectional layers is not implemented yet.");const s=a[0]instanceof Ge;for(const u of a)if(u instanceof Ge!==s)throw new b("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[t].concat(a),r=this.inputSpec.concat(o),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,e);return this.inputSpec=i,s}return super.apply(t,e)}call(t,e){return Object(f["Sh"])(()=>{const n=e["initialState"];let r,i,a,o;if(null==n)r=this.forwardLayer.call(t,e),i=this.backwardLayer.call(t,e);else{const a=n.slice(0,n.length/2),o=n.slice(n.length/2);r=this.forwardLayer.call(t,Object.assign(e,{initialState:a})),i=this.backwardLayer.call(t,Object.assign(e,{initialState:o}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=f["Ng"](i,1)),"concat"===this.mergeMode?o=Ft([r,i]):"sum"===this.mergeMode?o=f["od"](r,i):"ave"===this.mergeMode?o=f["Yf"](.5,f["od"](r,i)):"mul"===this.mergeMode?o=f["Yf"](r,i):null==this.mergeMode&&(o=[r,i]),this.returnState?null==this.mergeMode?o.concat(a):[o].concat(a):o})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){ft(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),ft(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,e){let n;if(Array.isArray(e)&&(e=e[0]),n=this.returnSequences?null==this.mergeMode?[e,e]:e:null==this.mergeMode?[null,null]:null,this.returnState){const t=this.forwardLayer.states,e=t.map(t=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},e=super.getConfig();return Object.assign(t,e),t}static fromConfig(t,e){const n=mn(e["layer"]);if(delete e["layer"],null!=e["numConstants"])throw new y("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=e;return r["layer"]=n,new t(r)}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
function Co(t){return new tn(t)}function Eo(t){return new Ui(t)}function So(t){return new zi(t)}function Do(t){return new Li(t)}function Fo(t){return new Pi(t)}function No(t){return new qi(t)}function To(t){return new Wi(t)}function Mo(t){return new oa(t)}function Io(t){return new ea(t)}function Ro(t){return new ra(t)}function $o(t){return new na(t)}function Bo(t){return new aa(t)}function zo(t){return new sa(t)}function Lo(t){return new ua(t)}function Po(t){return new la(t)}function Uo(t){return new Fa(t)}function Wo(t){return new Sa(t)}function qo(t){return new Ca(t)}function Vo(t){return new Ea(t)}function Go(t){return new Da(t)}function Ho(t){return new Na(t)}function Xo(t){return new Ta(t)}function Yo(t){return new Ma(t)}function Ko(t){return new Ra(t)}function Jo(t){return new Ba(t)}function Zo(t){return new La(t)}function Qo(t){return new Wa(t)}function ts(t){return new Pa(t)}function es(t){return new Ua(t)}function ns(t){return new za(t)}function rs(t){return new Ga(t)}function is(t){return new to(t)}function as(t){return new eo(t)}function os(t){return new ro(t)}function ss(t){return new uo(t)}function us(t){return ss(t)}function cs(t){return ss(t)}function ls(t){return new fo(t)}function fs(t){return ls(t)}function ds(t){return ls(t)}function hs(t){return new mo(t)}function ps(t){return hs(t)}function ms(t){return hs(t)}function gs(t){return new bo(t)}function bs(t){return new xo(t)}function ys(t){return new yo(t)}function vs(t){return new wo(t)}function xs(t){return new so(t)}function ws(t){return new lo(t)}function Os(t){return new po(t)}function _s(t){return new ya(t)}function As(t){return new ba(t)}function js(t){return new xa(t)}function ks(t){return new va(t)}function Cs(t){return new ga(t)}function Es(t){return new ma(t)}function Ss(t){return new ka(t)}function Ds(t){return new ja(t)}function Fs(t){return new ha(t)}function Ns(t){return new wa(t)}function Ts(t){return new ko(t)}function Ms(t){return new _o(t)}ko.className="Bidirectional",f["ah"].registerClass(ko);const Is=ys,Rs=vs,$s=xs,Bs=ws;function zs(t){return new Ha(t)}function Ls(t){return new Xa(t)}function Ps(t){return new Ya(t)}function Us(t){return new Ia(t)}function Ws(t,e){return Mn(t,e)}function qs(t,e){return Pn(t,e)}function Vs(t,e){return Un(t,e)}function Gs(t,e){return In(t,e)}function Hs(t,e){return Yn(t,e)}function Xs(t,e){return zn(t,e)}function Ys(t,e){return Ln(t,e)}function Ks(t,e){return Fn(t,e)}function Js(t,e){return yn(t,e)}function Zs(t,e){return vn(t,e)}function Qs(t,e){return vn(t,e)}function tu(t,e){return vn(t,e)}function eu(t,e){return bn(t,e)}function nu(t,e){return bn(t,e)}function ru(t,e){return bn(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iu(t){return new Ni(t)}function au(t){return Ti(t)}function ou(t){return Mi(t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class su extends sn{constructor(){super(...arguments),this.model=null}setModel(t){if(!(t instanceof ei))throw new Error("model must be a LayersModel, not some other Container");this.model=t}}function uu(t,e){return t<e}function cu(t,e){return t>e}class lu extends su{constructor(t){if(super(),null==t&&(t={}),t.restoreBestWeights)throw new y("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=t.monitor||"val_loss",this.minDelta=Math.abs(t.minDelta||0),this.patience=t.patience||0,this.verbose=t.verbose||0,this.mode=t.mode||"auto",this.baseline=t.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),"min"===this.mode?this.monitorFunc=uu:"max"===this.mode||-1!==this.monitor.indexOf("acc")?this.monitorFunc=cu:this.monitorFunc=uu,this.monitorFunc===uu&&(this.minDelta*=-1)}async onTrainBegin(t){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===uu?1/0:-1/0}async onEpochEnd(t,e){await nn(e);const n=this.getMonitorValue(e);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)))}async onTrainEnd(t){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(t){null==t&&(t={});const e=t[this.monitor];return null==e&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: `+Object.keys(t)),e}}function fu(t){return new lu(t)}const du={earlyStopping:fu};
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var hu=n("f8bb"),pu=n("526c");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class mu{constructor(t,e,n){this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(t=>this.getInput(t)),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((t,e)=>(t[e]=this.getAttr(e),t),{}))}getInput(t){return Object(pu["e"])(t,this.tensorMap,this.context)}getAttr(t,e){const n=this.node.rawAttrs[t];if(null!=n.tensor)return Object(pu["e"])(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Object(hu["f"])(this.node.rawAttrs,t,e);if(null!=n.s)return Object(hu["i"])(this.node.rawAttrs,t,e);if(null!=n.b)return Object(hu["c"])(this.node.rawAttrs,t,e);if(null!=n.shape)return Object(hu["k"])(this.node.rawAttrs,t,e);if(null!=n.type)return Object(hu["e"])(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Object(hu["g"])(this.node.rawAttrs,t,e);if(null!=n.list.s)return Object(hu["h"])(this.node.rawAttrs,t,e);if(null!=n.list.shape)return Object(hu["j"])(this.node.rawAttrs,t,e);if(null!=n.list.b)return Object(hu["b"])(this.node.rawAttrs,t,e);if(null!=n.list.type)return Object(hu["d"])(this.node.rawAttrs,t,e)}return e}}var gu=n("d303"),bu=n("9117"),yu=n("4850"),vu=n("4611"),xu=n("a5aa"),wu=n("c77c"),Ou=n("011b"),_u=n("508f"),Au=n("a009"),ju=n("f0e5"),ku=n("09f4"),Cu=n("c9f1"),Eu=n("4184");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Su=(t,e,n)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[bu["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"AddN":return[yu["a"](Object(pu["d"])("tensors",t,e,n))];case"FloorMod":case"Mod":return[vu["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"Mul":return[xu["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"RealDiv":case"Div":return[wu["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"DivNoNan":return[Ou["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"FloorDiv":return[_u["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"Sub":return[Au["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"Minimum":return[ju["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"Maximum":return[ku["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"Pow":return[Cu["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"SquaredDifference":return[Eu["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Du=n("8ae0"),Fu=n("a374"),Nu=n("4615"),Tu=n("220f"),Mu=n("dc59"),Iu=n("7e36"),Ru=n("6002"),$u=n("d1a8"),Bu=n("5960"),zu=n("0777"),Lu=n("eff7"),Pu=n("c1a2"),Uu=n("9e38"),Wu=n("8e05"),qu=n("4f20"),Vu=n("1ba2"),Gu=n("d369"),Hu=n("1359"),Xu=n("46b1"),Yu=n("24b0"),Ku=n("3bb7"),Ju=n("b500"),Zu=n("d7b0"),Qu=n("917a"),tc=n("08a9"),ec=n("b39e"),nc=n("ffb3"),rc=n("6932"),ic=n("1df6"),ac=n("5dc4"),oc=n("9ffd"),sc=n("163a"),uc=n("93b2"),cc=n("8888"),lc=n("d30a"),fc=n("c08f"),dc=n("5f2a"),hc=n("f3ae"),pc=n("6f37"),mc=n("520f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const gc=(t,e,n)=>{switch(t.op){case"Abs":case"ComplexAbs":return[Du["a"](Object(pu["d"])("x",t,e,n))];case"Acos":return[Fu["a"](Object(pu["d"])("x",t,e,n))];case"Acosh":return[Nu["a"](Object(pu["d"])("x",t,e,n))];case"Asin":return[Tu["a"](Object(pu["d"])("x",t,e,n))];case"Asinh":return[Mu["a"](Object(pu["d"])("x",t,e,n))];case"Atan":return[Iu["a"](Object(pu["d"])("x",t,e,n))];case"Atan2":return[Ru["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("y",t,e,n))];case"Atanh":return[$u["a"](Object(pu["d"])("x",t,e,n))];case"Ceil":return[Bu["a"](Object(pu["d"])("x",t,e,n))];case"Complex":return[zu["a"](Object(pu["d"])("real",t,e,n),Object(pu["d"])("imag",t,e,n))];case"Cos":return[Lu["a"](Object(pu["d"])("x",t,e,n))];case"Cosh":return[Pu["a"](Object(pu["d"])("x",t,e,n))];case"Elu":return[Uu["a"](Object(pu["d"])("x",t,e,n))];case"Erf":return[Wu["a"](Object(pu["d"])("x",t,e,n))];case"Exp":return[qu["a"](Object(pu["d"])("x",t,e,n))];case"Expm1":return[Vu["a"](Object(pu["d"])("x",t,e,n))];case"Floor":return[Gu["a"](Object(pu["d"])("x",t,e,n))];case"Log":return[Hu["a"](Object(pu["d"])("x",t,e,n))];case"Log1p":return[Xu["a"](Object(pu["d"])("x",t,e,n))];case"Imag":return[Yu["a"](Object(pu["d"])("x",t,e,n))];case"Neg":return[Ku["a"](Object(pu["d"])("x",t,e,n))];case"Reciprocal":return[Ju["a"](Object(pu["d"])("x",t,e,n))];case"Real":return[Zu["a"](Object(pu["d"])("x",t,e,n))];case"Relu":return[Qu["a"](Object(pu["d"])("x",t,e,n))];case"Round":return[tc["a"](Object(pu["d"])("x",t,e,n))];case"Selu":return[ec["a"](Object(pu["d"])("x",t,e,n))];case"Sigmoid":return[nc["a"](Object(pu["d"])("x",t,e,n))];case"Sin":return[rc["a"](Object(pu["d"])("x",t,e,n))];case"Sign":return[ic["a"](Object(pu["d"])("x",t,e,n))];case"Sinh":return[ac["a"](Object(pu["d"])("x",t,e,n))];case"Softplus":return[oc["a"](Object(pu["d"])("x",t,e,n))];case"Sqrt":return[sc["a"](Object(pu["d"])("x",t,e,n))];case"Square":return[uc["a"](Object(pu["d"])("x",t,e,n))];case"Tanh":return[cc["a"](Object(pu["d"])("x",t,e,n))];case"Tan":return[lc["a"](Object(pu["d"])("x",t,e,n))];case"Relu6":case"ClipByValue":return[fc["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("clipValueMin",t,e,n),Object(pu["d"])("clipValueMax",t,e,n))];case"Rsqrt":return[dc["a"](Object(pu["e"])(t.inputNames[0],e,n))];case"Prod":return[hc["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("axes",t,e,n))];case"LeakyRelu":return[pc["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("alpha",t,e,n))];case"Prelu":return[mc["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("alpha",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function bc(t,e,n=""){f["fi"].assert(yc(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function yc(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(-1!==t[n]&&-1!==e[n]&&t[n]!==e[n])return!1;return!0}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vc{constructor(t,e,n,r,i,a,o){this.name=t,this.dtype=e,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=Object(f["Vg"])(0),Object(f["nf"])(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(e=>{null!=t&&t.has(e.tensor.id)||e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const e=this.tensors[t];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(t){return t.map(t=>this.read(t))}write(t,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},\n          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),bc(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);n.tensor=e,Object(f["nf"])(e),n.written=!0,this.tensors[t]=n}writeMany(t,e){if(t.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${e.length}.`);t.forEach((t,n)=>this.write(t,e[n]))}gather(t,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(t)t=t.slice(0,this.size());else{t=[];for(let e=0;e<this.size();e++)t.push(e)}if(0===t.length)return Object(f["Jh"])([],[0].concat(this.elementShape));const n=this.readMany(t);return bc(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Object(f["Ah"])(n,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(0===this.size())return Object(f["Jh"])([],[0].concat(this.elementShape));const e=[];for(let r=0;r<this.size();r++)e.push(r);const n=this.readMany(e);return bc(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Object(f["Td"])(n,0)}scatter(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const n=Math.max(...t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(t,Object(f["di"])(e,0))}split(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let n=0;const r=t.map(t=>(n+=t,n));if(n!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const i=0===n?0:e.size/n,a=[];Object(f["Sh"])(()=>{e=Object(f["Mg"])(e,[1,n,i]);for(let n=0;n<t.length;++n){const o=0===n?0:r[n-1],s=[0,o,0],u=[1,t[n],i];a[n]=Object(f["Mg"])(Object(f["jh"])(e,s,u),this.elementShape)}return a});const o=[];for(let s=0;s<t.length;s++)o[s]=s;this.writeMany(o,a)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xc{constructor(t,e,n,r=-1){this.tensors=t,this.elementShape=e,this.elementDtype=n,null!=t&&t.forEach(t=>{if(n!==t.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${t.dtype}`);bc(e,t.shape,"TensorList shape mismatch: "),Object(f["nf"])(t)}),this.idTensor=Object(f["Vg"])(0),this.maxNumElements=r,Object(f["nf"])(this.idTensor)}get id(){return this.idTensor.id}copy(){return new xc([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(e=>{null!=t&&t.has(e.id)||e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,e,n=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);return bc(t,this.elementShape,"TensorList shape mismatch: "),Object(f["Sh"])(()=>{const e=this.tensors.map(e=>Object(f["Mg"])(e,t));return Object(f["Ah"])(e,0)})}popBack(t,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=this.tensors.pop();return bc(n.shape,t,"TensorList shape mismatch: "),Object(f["Mg"])(n,t)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(bc(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Object(f["nf"])(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+t);if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=t}getItem(t,e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[t])throw new Error(`element at index ${t} is null.`);return bc(this.tensors[t].shape,e,"TensorList shape mismatch: "),this.tensors[t]}setItem(t,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(t<0||-1!==this.maxNumElements&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);bc(this.elementShape,e.shape,"TensorList shape mismatch: "),Object(f["nf"])(e),this.tensors[t]=e}gather(t,e,n){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);return bc(this.elementShape,n,"TensorList shape mismatch: "),t=t.slice(0,this.size()),0===t.length?Object(f["Jh"])([],[0].concat(this.elementShape)):Object(f["Sh"])(()=>{const e=t.map(t=>Object(f["Mg"])(this.tensors[t],n));return Object(f["Ah"])(e,0)})}concat(t,e){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);return bc(this.elementShape,e,"TensorList shape mismatch: "),0===this.size()?Object(f["Jh"])([],[0].concat(this.elementShape)):Object(f["Sh"])(()=>{const t=this.tensors.map(t=>Object(f["Mg"])(t,e));return Object(f["Td"])(t,0)})}}function wc(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+t.shape);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const i=t.shape.slice(1);bc(i,e,"TensorList shape mismatch: ");const a=Object(f["di"])(t);return new xc(a,e,r)}function Oc(t,e,n){return new xc([],t,e,n)}function _c(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const a=new xc([],n,t.dtype,r),o=Object(f["di"])(t,0);return e.forEach((t,e)=>{a.setItem(t,o[e])}),a}function Ac(t,e,n){let r=0;const i=e.map(t=>(r+=t,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${t.shape}`);const a=0===r?0:t.size/r,o=Object(f["Sh"])(()=>{const o=[];t=Object(f["Mg"])(t,[1,r,a]);for(let r=0;r<e.length;++r){const s=0===r?0:i[r-1],u=[0,s,0],c=[1,e[r],a];o[r]=Object(f["Mg"])(Object(f["jh"])(t,u,c),n)}return t.dispose(),o}),s=new xc([],n,t.dtype,e.length);for(let u=0;u<o.length;u++)s.setItem(u,o[u]);return s}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jc=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=Object(pu["d"])("thenBranch",t,e,n),i=Object(pu["d"])("elseBranch",t,e,n),a=Object(pu["d"])("cond",t,e,n),o=Object(pu["d"])("args",t,e,n),s=await a.data();return s[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=Object(pu["d"])("body",t,e,n),i=Object(pu["d"])("cond",t,e,n),a=Object(pu["d"])("args",t,e,n),o=await n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),s=a.map(t=>t.id);let u=await o[0].data();o.forEach(t=>{t.kept||-1!==s.indexOf(t.id)||t.dispose()});let c=a;while(u[0]){const t=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const e=c.map(t=>t.id);t.forEach(t=>{t.kept||-1!==s.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()});const a=await n.functionMap[i].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);u=await a[0].data(),a.forEach(t=>{t.kept||-1!==s.indexOf(t.id)||-1!==e.indexOf(t.id)||t.dispose()})}return c}case"LoopCond":{const r=Object(pu["d"])("pred",t,e,n);return[Object(pu["a"])(r)]}case"Switch":{const r=Object(pu["d"])("pred",t,e,n);let i=Object(pu["d"])("data",t,e,n);return i.kept||(i=Object(pu["a"])(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=t.inputNames.find(t=>void 0!==Object(pu["e"])(t,e,n));if(r){const t=Object(pu["e"])(r,e,n);return[Object(pu["a"])(t)]}return}case"Enter":{const r=Object(pu["d"])("frameName",t,e,n),i=Object(pu["d"])("tensor",t,e,n);return n.enterFrame(r),[Object(pu["a"])(i)]}case"Exit":{const r=Object(pu["d"])("tensor",t,e,n);return n.exitFrame(),[Object(pu["a"])(r)]}case"NextIteration":{const r=Object(pu["d"])("tensor",t,e,n);return n.nextIteration(),[Object(pu["a"])(r)]}case"TensorArrayV3":{const r=Object(pu["d"])("size",t,e,n),i=Object(pu["d"])("dtype",t,e,n),a=Object(pu["d"])("elementShape",t,e,n),o=Object(pu["d"])("dynamicSize",t,e,n),s=Object(pu["d"])("clearAfterRead",t,e,n),u=Object(pu["d"])("identicalElementShapes",t,e,n),c=Object(pu["d"])("name",t,e,n),l=new vc(c,i,r,a,u,o,s);return n.addTensorArray(l),[l.idTensor,Object(f["Vg"])(1)]}case"TensorArrayWriteV3":{const r=Object(pu["d"])("tensorArrayId",t,e,n),i=Object(pu["d"])("index",t,e,n),a=Object(pu["d"])("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(i,a),[o.idTensor]}case"TensorArrayReadV3":{const r=Object(pu["d"])("tensorArrayId",t,e,n),i=Object(pu["d"])("index",t,e,n),a=n.getTensorArray(r.id);return[a.read(i)]}case"TensorArrayGatherV3":{const r=Object(pu["d"])("tensorArrayId",t,e,n),i=Object(pu["d"])("indices",t,e,n),a=Object(pu["d"])("dtype",t,e,n),o=n.getTensorArray(r.id);return[o.gather(i,a)]}case"TensorArrayScatterV3":{const r=Object(pu["d"])("tensorArrayId",t,e,n),i=Object(pu["d"])("indices",t,e,n),a=Object(pu["d"])("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(i,a),[o.idTensor]}case"TensorArrayConcatV3":{const r=Object(pu["d"])("tensorArrayId",t,e,n),i=n.getTensorArray(r.id),a=Object(pu["d"])("dtype",t,e,n);return[i.concat(a)]}case"TensorArraySplitV3":{const r=Object(pu["d"])("tensorArrayId",t,e,n),i=Object(pu["d"])("tensor",t,e,n),a=Object(pu["d"])("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(a,i),[o.idTensor]}case"TensorArraySizeV3":{const r=Object(pu["d"])("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return[Object(f["Vg"])(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=Object(pu["d"])("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=Object(pu["d"])("tensorListId",t,e,n),i=Object(pu["d"])("index",t,e,n),a=Object(pu["d"])("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(i,a),[o.idTensor]}case"TensorListGetItem":{const r=Object(pu["d"])("tensorListId",t,e,n),i=Object(pu["d"])("index",t,e,n),a=Object(pu["d"])("elementShape",t,e,n),o=Object(pu["d"])("elementDType",t,e,n),s=n.getTensorList(r.id);return[s.getItem(i,a,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=Object(pu["d"])("indices",t,e,n),i=Object(pu["d"])("tensor",t,e,n),a=Object(pu["d"])("elementShape",t,e,n),o=Object(pu["d"])("numElements",t,e,n),s=_c(i,r,a,o);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":{const r=Object(pu["d"])("elementShape",t,e,n),i=Object(pu["d"])("elementDType",t,e,n),a=Object(pu["d"])("numElements",t,e,n),o=Oc(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListGather":{const r=Object(pu["d"])("tensorListId",t,e,n),i=Object(pu["d"])("indices",t,e,n),a=Object(pu["d"])("elementShape",t,e,n),o=Object(pu["d"])("elementDType",t,e,n),s=n.getTensorList(r.id);return[s.gather(i,o,a)]}case"TensorListStack":{const r=Object(pu["d"])("tensorListId",t,e,n),i=Object(pu["d"])("elementShape",t,e,n),a=Object(pu["d"])("elementDType",t,e,n),o=Object(pu["d"])("numElements",t,e,n),s=n.getTensorList(r.id);return[s.stack(i,a,o)]}case"TensorListFromTensor":{const r=Object(pu["d"])("tensor",t,e,n),i=Object(pu["d"])("elementShape",t,e,n),a=Object(pu["d"])("elementDType",t,e,n),o=wc(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":{const r=Object(pu["d"])("tensorListId",t,e,n),i=n.getTensorList(r.id),a=Object(pu["d"])("dtype",t,e,n),o=Object(pu["d"])("elementShape",t,e,n);return[i.concat(a,o)]}case"TensorListPushBack":{const r=Object(pu["d"])("tensorListId",t,e,n),i=Object(pu["d"])("tensor",t,e,n),a=n.getTensorList(r.id);return a.pushBack(i),[a.idTensor]}case"TensorListPopBack":{const r=Object(pu["d"])("tensorListId",t,e,n),i=Object(pu["d"])("elementShape",t,e,n),a=Object(pu["d"])("elementDType",t,e,n),o=n.getTensorList(r.id);return[o.popBack(i,a)]}case"TensorListSplit":{const r=Object(pu["d"])("tensor",t,e,n),i=Object(pu["d"])("elementShape",t,e,n),a=Object(pu["d"])("lengths",t,e,n),o=Ac(r,a,i);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var kc=n("7675"),Cc=n("dd7e"),Ec=n("132b"),Sc=n("cd1f"),Dc=n("838f"),Fc=n("1590"),Nc=n("9748"),Tc=n("9fe6"),Mc=n("8bc9"),Ic=n("ba53"),Rc=n("53fd"),$c=n("c170");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Bc(t,e,n){const[r,i]=Object(pu["d"])("fusedOps",t,e,n),a="biasadd"===r,o="prelu"===i,s="fusedbatchnorm"===r,u=Object(pu["d"])("numArgs",t,e,n);if(a){if(o&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(s)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const c=Object(pu["d"])("strides",t,e,n),l=Object(pu["c"])(t,e,n),f=Object(pu["d"])("dataFormat",t,e,n).toUpperCase(),d=Object(pu["d"])("dilations",t,e,n),[h,p]=Object(pu["d"])("args",t,e,n);return{stride:c,pad:l,dataFormat:f,dilations:d,biasArg:h,preluArg:p,activationFunc:i}}const zc=(t,e,n)=>{switch(t.op){case"Conv1D":{const r=Object(pu["d"])("stride",t,e,n),i=Object(pu["d"])("pad",t,e,n),a=Object(pu["d"])("dataFormat",t,e,n).toUpperCase(),o=Object(pu["d"])("dilation",t,e,n);return[kc["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("filter",t,e,n),r,i,a,o)]}case"Conv2D":{const r=Object(pu["d"])("strides",t,e,n),i=Object(pu["c"])(t,e,n),a=Object(pu["d"])("dataFormat",t,e,n).toUpperCase(),o=Object(pu["d"])("dilations",t,e,n);return[Cc["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("filter",t,e,n),[r[1],r[2]],i,a,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:r,pad:i,dataFormat:a,dilations:o,biasArg:s,preluArg:u,activationFunc:c}=Bc(t,e,n);return[Ec["qb"].conv2d({x:Object(pu["d"])("x",t,e,n),filter:Object(pu["d"])("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:a,dilations:[o[1],o[2]],bias:s,activation:c,preluActivationWeights:u})]}case"FusedDepthwiseConv2dNative":{const{stride:r,pad:i,dataFormat:a,dilations:o,biasArg:s,preluArg:u,activationFunc:c}=Bc(t,e,n);return[Ec["qb"].depthwiseConv2d({x:Object(pu["d"])("x",t,e,n),filter:Object(pu["d"])("filter",t,e,n),strides:[r[1],r[2]],pad:i,dataFormat:a,dilations:[o[1],o[2]],bias:s,activation:c,preluActivationWeights:u})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=Object(pu["d"])("outputShape",t,e,n),i=Object(pu["d"])("strides",t,e,n),a=Object(pu["c"])(t,e,n);return[Sc["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("filter",t,e,n),r,[i[1],i[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=Object(pu["d"])("strides",t,e,n),i=Object(pu["c"])(t,e,n),a=Object(pu["d"])("dilations",t,e,n),o=Object(pu["d"])("dataFormat",t,e,n).toUpperCase();return[Dc["a"](Object(pu["d"])("input",t,e,n),Object(pu["d"])("filter",t,e,n),[r[1],r[2]],i,o,[a[1],a[2]])]}case"Conv3D":{const r=Object(pu["d"])("strides",t,e,n),i=Object(pu["d"])("pad",t,e,n),a=Object(pu["d"])("dataFormat",t,e,n).toUpperCase(),o=Object(pu["d"])("dilations",t,e,n);return[Fc["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("filter",t,e,n),[r[1],r[2],r[3]],i,a,[o[1],o[2],o[3]])]}case"AvgPool":{const r=Object(pu["d"])("strides",t,e,n),i=Object(pu["d"])("pad",t,e,n),a=Object(pu["d"])("kernelSize",t,e,n);return[Nc["a"](Object(pu["d"])("x",t,e,n),[a[1],a[2]],[r[1],r[2]],i)]}case"MaxPool":{const r=Object(pu["d"])("strides",t,e,n),i=Object(pu["d"])("pad",t,e,n),a=Object(pu["d"])("kernelSize",t,e,n);return[Tc["a"](Object(pu["d"])("x",t,e,n),[a[1],a[2]],[r[1],r[2]],i)]}case"MaxPoolWithArgmax":{const r=Object(pu["d"])("strides",t,e,n),i=Object(pu["d"])("pad",t,e,n),a=Object(pu["d"])("kernelSize",t,e,n),o=Object(pu["d"])("includeBatchInIndex",t,e,n),{result:s,indexes:u}=Mc["a"](Object(pu["d"])("x",t,e,n),[a[1],a[2]],[r[1],r[2]],i,o);return[s,u]}case"AvgPool3D":{const r=Object(pu["d"])("strides",t,e,n),i=Object(pu["d"])("pad",t,e,n),a=Object(pu["d"])("kernelSize",t,e,n);return[Ic["a"](Object(pu["d"])("x",t,e,n),[a[1],a[2],a[3]],[r[1],r[2],r[3]],i)]}case"MaxPool3D":{const r=Object(pu["d"])("strides",t,e,n),i=Object(pu["d"])("pad",t,e,n),a=Object(pu["d"])("kernelSize",t,e,n);return[Rc["a"](Object(pu["d"])("x",t,e,n),[a[1],a[2],a[3]],[r[1],r[2],r[3]],i)]}case"Dilation2D":{const r=Object(pu["d"])("strides",t,e,n),i=Object(pu["d"])("pad",t,e,n),a=Object(pu["d"])("dilations",t,e,n),o=r[1],s=r[2],u=a[1],c=a[2];return[$c["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("filter",t,e,n),[o,s],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Lc=n("46b8"),Pc=n("5894"),Uc=n("3efc"),Wc=n("e22c"),qc=n("c22a"),Vc=n("0db5"),Gc=n("8629"),Hc=n("84d6"),Xc=n("7e6a"),Yc=n("5a2c"),Kc=n("a09b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Jc=(t,e,n)=>{switch(t.op){case"Fill":{const r=Object(pu["d"])("shape",t,e,n),i=Object(pu["d"])("dtype",t,e,n),a=Object(pu["d"])("value",t,e,n);return[Lc["a"](r,a,i)]}case"LinSpace":{const r=Object(pu["d"])("start",t,e,n),i=Object(pu["d"])("stop",t,e,n),a=Object(pu["d"])("num",t,e,n);return[Pc["a"](r,i,a)]}case"Multinomial":{const r=Object(pu["d"])("logits",t,e,n),i=Object(pu["d"])("numSamples",t,e,n),a=Object(pu["d"])("seed",t,e,n);return[Uc["a"](r,i,a)]}case"OneHot":{const r=Object(pu["d"])("indices",t,e,n),i=Object(pu["d"])("depth",t,e,n),a=Object(pu["d"])("onValue",t,e,n),o=Object(pu["d"])("offValue",t,e,n);return[Wc["a"](r,i,a,o)]}case"Ones":return[qc["a"](Object(pu["d"])("shape",t,e,n),Object(pu["d"])("dtype",t,e,n))];case"OnesLike":return[Vc["a"](Object(pu["d"])("x",t,e,n))];case"RandomUniform":return[Gc["a"](Object(pu["d"])("shape",t,e,n),Object(pu["d"])("minval",t,e,n),Object(pu["d"])("maxval",t,e,n),Object(pu["d"])("dtype",t,e,n))];case"Range":{const r=Object(pu["d"])("start",t,e,n),i=Object(pu["d"])("stop",t,e,n),a=Object(pu["d"])("step",t,e,n);return[Hc["a"](r,i,a,Object(pu["d"])("dtype",t,e,n))]}case"TruncatedNormal":{const r=Object(pu["d"])("shape",t,e,n),i=Object(pu["d"])("mean",t,e,n),a=Object(pu["d"])("stdDev",t,e,n),o=Object(pu["d"])("seed",t,e,n);return[Xc["a"](r,i,a,Object(pu["d"])("dtype",t,e,n),o)]}case"Zeros":return[Yc["a"](Object(pu["d"])("shape",t,e,n),Object(pu["d"])("dtype",t,e,n))];case"ZerosLike":return[Kc["a"](Object(pu["d"])("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Zc=n("deb3"),Qc=n("a780"),tl=n("f74c");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function el(t,e,n){const r=Object(pu["d"])("boxes",t,e,n),i=Object(pu["d"])("scores",t,e,n),a=Object(pu["d"])("maxOutputSize",t,e,n),o=Object(pu["d"])("iouThreshold",t,e,n),s=Object(pu["d"])("scoreThreshold",t,e,n),u=Object(pu["d"])("softNmsSigma",t,e,n);return{boxes:r,scores:i,maxOutputSize:a,iouThreshold:o,scoreThreshold:s,softNmsSigma:u}}const nl=async(t,e,n)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:i,maxOutputSize:a,iouThreshold:o,scoreThreshold:s,softNmsSigma:u}=el(t,e,n),c=await Ec["zb"].nonMaxSuppressionWithScoreAsync(r,i,a,o,s,u);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:i,maxOutputSize:a,iouThreshold:o,scoreThreshold:s}=el(t,e,n),u=Object(pu["d"])("padToMaxOutputSize",t,e,n),c=await Ec["zb"].nonMaxSuppressionPaddedAsync(r,i,a,o,s,u);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:i,maxOutputSize:a,iouThreshold:o,scoreThreshold:s}=el(t,e,n);return[await Ec["zb"].nonMaxSuppressionAsync(r,i,a,o,s)]}case"Where":{const r=Zc["a"](Object(pu["d"])("condition",t,e,n),"bool"),i=[await Qc["a"](r)];return r.dispose(),i}case"ListDiff":return tl["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};var rl=n("5616"),il=n("853e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const al=(t,e,n)=>{switch(t.op){case"TopKV2":{const r=Object(pu["d"])("x",t,e,n),i=Object(pu["d"])("k",t,e,n),a=Object(pu["d"])("sorted",t,e,n),o=rl["a"](r,i,a);return[o.values,o.indices]}case"Unique":{const r=Object(pu["d"])("x",t,e,n),i=il["a"](r);return[i.values,i.indices]}case"UniqueV2":{const r=Object(pu["d"])("x",t,e,n),i=Object(pu["d"])("axis",t,e,n),a=il["a"](r,i);return[a.values,a.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var ol=n("960f"),sl=n("015f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ul=(t,e,n)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const r=Object(pu["d"])("default",t,e,n);return[Object(pu["e"])(t.name,e,n)||r];case"Placeholder":return[Object(pu["e"])(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const r=Object(pu["d"])("x",t,e,n);return[Object(pu["a"])(r)]}case"IdentityN":return Object(pu["d"])("x",t,e,n).map(t=>Object(pu["a"])(t));case"Snapshot":const i=Object(pu["d"])("x",t,e,n);return[Object(pu["a"])(i)];case"Shape":return[ol["a"](Object(pu["d"])("x",t,e,n).shape,"int32")];case"ShapeN":return Object(pu["d"])("x",t,e,n).map(t=>ol["a"](t.shape));case"Size":return[sl["a"](Object(pu["d"])("x",t,e,n).size,"int32")];case"Rank":return[sl["a"](Object(pu["d"])("x",t,e,n).rank,"int32")];case"NoOp":return[sl["a"](1)];case"Print":const a=Object(pu["d"])("x",t,e,n),o=Object(pu["d"])("data",t,e,n),s=Object(pu["d"])("message",t,e,n),u=Object(pu["d"])("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let t=0;t<o.length;t++)console.log(Array.prototype.slice.call(o[t].dataSync()).slice(0,u));return[a];default:throw TypeError(`Node type ${t.op} is not implemented`)}},cl=(t,e,n)=>{switch(t.op){case"ResizeBilinear":{const r=Object(pu["d"])("images",t,e,n),i=Object(pu["d"])("size",t,e,n),a=Object(pu["d"])("alignCorners",t,e,n);return[Ec["zb"].resizeBilinear(r,[i[0],i[1]],a)]}case"ResizeNearestNeighbor":{const r=Object(pu["d"])("images",t,e,n),i=Object(pu["d"])("size",t,e,n),a=Object(pu["d"])("alignCorners",t,e,n);return[Ec["zb"].resizeNearestNeighbor(r,[i[0],i[1]],a)]}case"CropAndResize":{const r=Object(pu["d"])("image",t,e,n),i=Object(pu["d"])("boxes",t,e,n),a=Object(pu["d"])("boxInd",t,e,n),o=Object(pu["d"])("cropSize",t,e,n),s=Object(pu["d"])("method",t,e,n),u=Object(pu["d"])("extrapolationValue",t,e,n);return[Ec["zb"].cropAndResize(r,i,a,o,s,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var ll=n("b9b9"),fl=n("d4de"),dl=n("cef0"),hl=n("bb2d"),pl=n("e1fd"),ml=n("b21c"),gl=n("e333"),bl=n("ef00"),yl=n("f183"),vl=n("6791");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const xl=(t,e,n)=>{switch(t.op){case"Equal":return[ll["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"NotEqual":return[fl["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"Greater":return[dl["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"GreaterEqual":return[hl["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"Less":return[pl["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"LessEqual":return[ml["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"LogicalAnd":return[gl["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"LogicalNot":return[bl["a"](Object(pu["d"])("a",t,e,n))];case"LogicalOr":return[yl["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];case"Select":case"SelectV2":return[vl["a"](Object(pu["d"])("condition",t,e,n),Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var wl=n("487b"),Ol=n("c912");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const _l=(t,e,n)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[wl["a"](Object(pu["d"])("a",t,e,n),Object(pu["d"])("b",t,e,n),Object(pu["d"])("transposeA",t,e,n),Object(pu["d"])("transposeB",t,e,n))];case"Transpose":return[Ol["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("perm",t,e,n))];case"_FusedMatMul":const[r,i]=Object(pu["d"])("fusedOps",t,e,n),a="biasadd"===r,o="prelu"===i,s=Object(pu["d"])("numArgs",t,e,n);if(a){if(o&&2!==s)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==s)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,c]=Object(pu["d"])("args",t,e,n);return[Ec["qb"].matMul({a:Object(pu["d"])("a",t,e,n),b:Object(pu["d"])("b",t,e,n),transposeA:Object(pu["d"])("transposeA",t,e,n),transposeB:Object(pu["d"])("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:c})];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Al=n("71db"),jl=n("e101"),kl=n("5f87"),Cl=n("804a"),El=n("bc62");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Sl=(t,e,n)=>{switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":return[Al["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("mean",t,e,n),Object(pu["d"])("variance",t,e,n),Object(pu["d"])("offset",t,e,n),Object(pu["d"])("scale",t,e,n),Object(pu["d"])("epsilon",t,e,n))];case"FusedBatchNormV3":return[Al["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("mean",t,e,n),Object(pu["d"])("variance",t,e,n),Object(pu["d"])("offset",t,e,n),Object(pu["d"])("scale",t,e,n),Object(pu["d"])("epsilon",t,e,n))];case"LRN":return[jl["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("radius",t,e,n),Object(pu["d"])("bias",t,e,n),Object(pu["d"])("alpha",t,e,n),Object(pu["d"])("beta",t,e,n))];case"Softmax":return[kl["a"](Object(pu["d"])("x",t,e,n))];case"LogSoftmax":return[Cl["a"](Object(pu["d"])("x",t,e,n))];case"SparseToDense":return[El["a"](Object(pu["d"])("sparseIndices",t,e,n),Object(pu["d"])("outputShape",t,e,n),Object(pu["d"])("sparseValues",t,e,n),Object(pu["d"])("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Dl=n("c021"),Fl=n("122e"),Nl=n("ae6d"),Tl=n("e053"),Ml=n("df81"),Il=n("4516"),Rl=n("e89f"),$l=n("db49"),Bl=n("1e68");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const zl=(t,e,n)=>{switch(t.op){case"Max":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("keepDims",t,e,n);return[Dl["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"Mean":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("keepDims",t,e,n);return[Fl["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"Min":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("keepDims",t,e,n);return[Nl["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"Sum":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("keepDims",t,e,n);return[Tl["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"All":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("keepDims",t,e,n);return[Ml["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"Any":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("keepDims",t,e,n);return[Il["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"ArgMax":{const r=Object(pu["d"])("axis",t,e,n);return[Rl["a"](Object(pu["d"])("x",t,e,n),r)]}case"ArgMin":{const r=Object(pu["d"])("axis",t,e,n);return[$l["a"](Object(pu["d"])("x",t,e,n),r)]}case"Prod":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("keepDims",t,e,n);return[hc["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"Cumsum":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("exclusive",t,e,n),a=Object(pu["d"])("reverse",t,e,n);return[Bl["a"](Object(pu["d"])("x",t,e,n),r,i,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Ll=n("649e"),Pl=n("91a3"),Ul=n("d08e"),Wl=n("6d3c"),ql=n("de1a"),Vl=n("d1f4"),Gl=n("35c9"),Hl=n("d54d"),Xl=n("3a44"),Yl=n("8d71"),Kl=n("45bb"),Jl=n("8bfa"),Zl=n("ba40");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Ql=(t,e,n)=>{switch(t.op){case"ConcatV2":case"Concat":{const r=Object(pu["d"])("n",t,e,n),i=Object(pu["d"])("axis",t,e,n);let a=Object(pu["d"])("tensors",t,e,n);return a=a.slice(0,r),[Ll["a"](a,i)]}case"GatherV2":case"Gather":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("x",t,e,n),a=Object(pu["d"])("indices",t,e,n);return[Pl["a"](i,Zc["a"](a,"int32"),r)]}case"ReverseV2":case"Reverse":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("x",t,e,n);return[Ul["a"](i,r)]}case"Slice":{const r=Object(pu["d"])("begin",t,e,n),i=Object(pu["d"])("size",t,e,n);return[Wl["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"StridedSlice":{const r=Object(pu["d"])("begin",t,e,n),i=Object(pu["d"])("end",t,e,n),a=Object(pu["d"])("strides",t,e,n),o=Object(pu["d"])("beginMask",t,e,n),s=Object(pu["d"])("endMask",t,e,n),u=Object(pu["d"])("ellipsisMask",t,e,n),c=Object(pu["d"])("newAxisMask",t,e,n),l=Object(pu["d"])("shrinkAxisMask",t,e,n),f=Object(pu["d"])("x",t,e,n);return[ql["a"](f,r,i,a,o,s,u,c,l)]}case"Pack":return Object(f["Sh"])(()=>{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("tensors",t,e,n),a=i[0].shape,o=Vl["a"](i[0]).shape,s=i.map(t=>{const e=f["fi"].arraysEqual(t.shape,a);if(!e&&!f["fi"].arraysEqual(Vl["a"](t).shape,o))throw new Error("the input tensors shape does not match");return e?t:Gl["a"](t,a)});return[Hl["a"](s,r)]});case"Unpack":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("tensor",t,e,n);return Xl["a"](i,r)}case"Tile":{const r=Object(pu["d"])("reps",t,e,n);return[Yl["a"](Object(pu["d"])("x",t,e,n),r)]}case"Split":case"SplitV":{const r=Object(pu["d"])("axis",t,e,n),i=Object(pu["d"])("numOrSizeSplits",t,e,n),a=Object(pu["d"])("x",t,e,n);return Kl["a"](a,i,r)}case"ScatterNd":{const r=Object(pu["d"])("indices",t,e,n),i=Object(pu["d"])("values",t,e,n),a=Object(pu["d"])("shape",t,e,n);return[Jl["a"](r,i,a)]}case"GatherNd":{const r=Object(pu["d"])("x",t,e,n),i=Object(pu["d"])("indices",t,e,n);return[Zl["a"](r,i)]}case"SparseToDense":{const r=Object(pu["d"])("sparseIndices",t,e,n),i=Object(pu["d"])("outputShape",t,e,n),a=Object(pu["d"])("sparseValues",t,e,n),o=Object(pu["d"])("defaultValue",t,e,n);return[El["a"](r,a,i,a.dtype===o.dtype?o:Zc["a"](o,a.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var tf=n("1ab7"),ef=n("4c7a"),nf=n("b61d"),rf=n("69dc");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const af=(t,e,n)=>{switch(t.op){case"FFT":return[tf["a"](Object(pu["d"])("x",t,e,n))];case"IFFT":return[ef["a"](Object(pu["d"])("x",t,e,n))];case"RFFT":return[nf["a"](Object(pu["d"])("x",t,e,n))];case"IRFFT":return[rf["a"](Object(pu["d"])("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var of=n("dae8"),sf=n("0eb5"),uf=n("7580"),cf=n("3b28"),lf=n("364e"),ff=n("48db");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const df=(t,e,n)=>{switch(t.op){case"Cast":return[Zc["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("dtype",t,e,n))];case"ExpandDims":{const r=Object(pu["d"])("axis",t,e,n);return[of["a"](Object(pu["d"])("x",t,e,n),r)]}case"Squeeze":{const r=Object(pu["d"])("axis",t,e,n);return[Vl["a"](Object(pu["d"])("x",t,e,n),r)]}case"Reshape":return[Gl["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("shape",t,e,n))];case"PadV2":case"Pad":return[sf["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("padding",t,e,n),Object(pu["d"])("constantValue",t,e,n))];case"SpaceToBatchND":{const r=Object(pu["d"])("blockShape",t,e,n),i=Object(pu["d"])("paddings",t,e,n);return[uf["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"BatchToSpaceND":{const r=Object(pu["d"])("blockShape",t,e,n),i=Object(pu["d"])("crops",t,e,n);return[cf["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"DepthToSpace":{const r=Object(pu["d"])("blockSize",t,e,n),i=Object(pu["d"])("dataFormat",t,e,n).toUpperCase();return[lf["a"](Object(pu["d"])("x",t,e,n),r,i)]}case"BroadcastTo":return[ff["a"](Object(pu["d"])("x",t,e,n),Object(pu["d"])("shape",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function hf(t,e,n){const r=((t,e,n)=>{switch(t.category){case"arithmetic":return f["Sh"](()=>Su(t,e,n));case"basic_math":return f["Sh"](()=>gc(t,e,n));case"control":return jc(t,e,n);case"convolution":return f["Sh"](()=>zc(t,e,n));case"creation":return f["Sh"](()=>Jc(t,e,n));case"dynamic":return nl(t,e,n);case"evaluation":return f["Sh"](()=>al(t,e,n));case"image":return f["Sh"](()=>cl(t,e,n));case"graph":return f["Sh"](()=>ul(t,e,n));case"logical":return f["Sh"](()=>xl(t,e,n));case"matrices":return f["Sh"](()=>_l(t,e,n));case"normalization":return f["Sh"](()=>Sl(t,e,n));case"reduction":return f["Sh"](()=>zl(t,e,n));case"slice_join":return f["Sh"](()=>Ql(t,e,n));case"spectral":return f["Sh"](()=>af(t,e,n));case"transformation":return f["Sh"](()=>df(t,e,n));case"custom":const r=Object(gu["b"])(t.op);if(r&&r.customExecutor)return r.customExecutor(new mu(t,e,n));throw TypeError(`Custom op ${t.op} is not registered.`);default:throw TypeError(`Unknown op '${t.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return r instanceof Promise?r.then(t=>[].concat(t)):[].concat(r)}class pf{constructor(t={},e={},n={},r={}){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(t=>0===t.id&&0===t.iterationId?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(const e in this.tensorListMap)this.tensorListMap[e].clearAndClose(t)}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mf(t,e,n,r){const i=new Set,a=[];let o=null,s=null;const u=new Set,c=Object.keys(t).map(t=>Object(pu["g"])(t)[0]);let l=[];null!=r&&(l=r.map(t=>Object(pu["g"])(t.name)[0]));const f=[...e];while(f.length>0){const t=f.pop();(vf(t)||xf(t))&&null==o&&(o=t,s=o.children.map(t=>t.name).filter(t=>i.has(t))),i.add(t.name),null==n[t.name]&&(-1===c.indexOf(t.name)&&-1===l.indexOf(t.name)&&(0!==t.inputs.length?t.inputs.forEach(t=>{u.has(t.name)||(u.add(t.name),f.push(t))}):a.push(t.name)))}return{inputs:t,outputs:e,usedNodes:i,missingInputs:a,dynamicNode:o,syncInputs:s}}function gf(t,e,n){const{usedNodes:r,inputs:i}=n,a=[],o=Object.keys(i).map(t=>Object(pu["g"])(t)[0]).map(e=>t.nodes[e]),s=t.initNodes;o.forEach(t=>{r.has(t.name)&&a.push(t)}),t.weights.forEach(t=>{r.has(t.name)&&a.push(t)}),null!=s&&s.forEach(t=>{r.has(t.name)&&a.push(t)});const u=new Set,c=[];while(a.length>0){const t=a.pop();u.add(t.name),e[t.name]||c.push(t),t.children.forEach(t=>{!u.has(t.name)&&r.has(t.name)&&t.inputs.every(t=>u.has(t.name))&&a.push(t)})}return c}const bf=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],yf=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"];function vf(t){return bf.indexOf(t.op)>=0}function xf(t){return yf.indexOf(t.op)>=0}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wf{constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(e=>{this._functionExecutorMap[e]=new wf(t.functions[e],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map(e=>t[e].map(t=>t.id));this._weightIds=[].concat(...e),this._weightMap=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams["shape"]?t.attrParams["shape"].value:void 0,dtype:t.attrParams["dtype"]?t.attrParams["dtype"].value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams["shape"]?t.attrParams["shape"].value:void 0,dtype:t.attrParams["dtype"]?t.attrParams["dtype"].value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}getCompilationKey(t,e){const n=t.map(t=>t.name).sort(),r=e.map(t=>t.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(t,e){const n=mf(t,e,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:a}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(r.length>0){const n=e.map(t=>t.name),i=Object.keys(t);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${i}]. Missing the following inputs: [${r}]`)}return gf(this.graph,this.weightMap,n)}execute(t,e){t=this.mapInputs(t);const n=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);const r=n.map(t=>this.graph.nodes[Object(pu["g"])(t)[0]]),i=e.map(t=>Object(pu["g"])(t)[0]);let a=i.map(t=>this.graph.nodes[t]);0===a.length&&(a=this._outputs);const o=this.getCompilationKey(r,a);let s=this.compiledMap.get(o);null==s&&(s=this.compile(t,a),this.compiledMap.set(o,s));const u={},c={};return Object(f["Sh"])(()=>{const n=new pf(this.weightMap,u,c,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(t).forEach(e=>{const[n,i]=Object(pu["g"])(e),a=[];a[i]=t[e],r[n]=a});const a=this.getFrozenTensorIds(r),o={};for(let t=0;t<s.length;t++){const e=s[t];if(!r[e.name]){const t=hf(e,r,n);if(t instanceof Promise)throw new Error(`The execution of the op '${e.op}' returned a promise. Please use model.executeAsync() instead.`);r[e.name]=t,this.checkTensorForDisposal(e.name,e,r,n,a,i,o)}}return null==this.parent&&n.dispose(a),e.map(t=>Object(pu["e"])(t,r,n))})}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map(e=>t[e]).map(t=>t.map(t=>t.id)));return new Set(e)}checkTensorForDisposal(t,e,n,r,i,a,o){"control"!==e.category&&-1===a.indexOf(t)&&(n[t].forEach(t=>{null!=t&&(o[t.id]=(o[t.id]||0)+e.children.length)}),e.inputs.forEach(t=>{if("control"!==t.category){const e=Object(pu["f"])(t.name,n,r);null!=e&&e.forEach(t=>{if(t&&!i.has(t.id)){const e=o[t.id];1===e?(t.dispose(),delete o[t.id]):null!=e&&o[t.id]--}})}}))}async executeAsync(t,e){return this._executeAsync(t,e)}async _executeAsync(t,e,n=!1,r={},i={}){n||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e));const a=new pf(this.weightMap,r,i,this.functionExecutorMap),o=await this.executeWithControlFlow(t,a,e,n),s=e.map(t=>Object(pu["e"])(t,o,a)),u=s.map(t=>t.id),c=Object.keys(t).map(e=>t[e].id),l=new Set([...u,...c,...this.weightIds]);return Object.keys(o).forEach(t=>{const e=o[t];e.forEach(t=>{!t||t.isDisposed||l.has(t.id)||t.dispose()})}),null==this.parent&&a.dispose(l),s}async executeFunctionAsync(t,e,n){const r=t.reduce((t,e,n)=>(t[this.inputs[n].name]=e,t),{});return this._executeAsync(r,this.outputNodes,!0,e,n)}async executeWithControlFlow(t,e,n,r){const i=Object.keys(t),a=i.map(t=>this.graph.nodes[Object(pu["g"])(t)[0]]),o=n.map(t=>Object(pu["g"])(t)[0]),s=o.map(t=>this.graph.nodes[t]),{usedNodes:u,missingInputs:c,dynamicNode:l,syncInputs:f}=mf(t,s,this.weightMap),d=[...a,...this.graph.weights].map(t=>({node:t,contexts:e.currentContext})),h=Object.assign({},this.weightMap);Object.keys(t).forEach(e=>{const[n,r]=Object(pu["g"])(e),i=[];i[r]=t[e],h[n]=i});const p={},m=this.getFrozenTensorIds(h),g={};while(d.length>0){const t=this.processStack(a,d,e,h,g,m,o,p,u);await Promise.all(t)}null!=l||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=s.filter(t=>!vf(t)&&!Object(pu["e"])(t.name,h,e)).map(t=>t.name);if(b.length>0){let t="";throw null!=l&&(t=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${t}`)}return h}processStack(t,e,n,r,i,a,o,s,u){const c=[];while(e.length>0){const l=e.pop();n.currentContext=l.contexts;let f="";if("Enter"===l.node.op&&Object(pu["d"])("isConstant",l.node,r,n)&&([f]=Object(pu["b"])(l.node.name,n)),-1===t.indexOf(l.node)){const t=hf(l.node,r,n);f||([f]=Object(pu["b"])(l.node.name,n));const d=n.currentContext;t instanceof Promise?c.push(t.then(t=>(r[f]=t,n.currentContext=d,this.checkTensorForDisposal(f,l.node,r,n,a,o,s),this.processChildNodes(l.node,e,n,r,i,u),t))):(r[f]=t,this.checkTensorForDisposal(f,l.node,r,n,a,o,s),this.processChildNodes(l.node,e,n,r,i,u))}else this.processChildNodes(l.node,e,n,r,i,u)}return c}processChildNodes(t,e,n,r,i,a){t.children.forEach(t=>{const[o]=Object(pu["b"])(t.name,n);!i[o]&&a.has(t.name)&&("Merge"===t.op?t.inputNames.some(t=>!!Object(pu["e"])(t,r,n))&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every(t=>!!Object(pu["e"])(t,r,n))&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(t=>t.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(e=>{const n=t[e],[r]=Object(pu["g"])(e),i=this.graph.nodes[r];if(i.attrParams["shape"]&&i.attrParams["shape"].value){const t=i.attrParams["shape"].value,e=t.length===n.shape.length&&n.shape.every((e,n)=>-1===t[n]||t[n]===e);f["fi"].assert(e,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${t}], but was [${n.shape}]`)}i.attrParams["dtype"]&&i.attrParams["dtype"].value&&f["fi"].assert(n.dtype===i.attrParams["dtype"].value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams["dtype"].value}, but was ${n.dtype}`)})}mapInputs(t){const e={};for(const n in t)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]){const r=this._signature.inputs[n];e[r.name]=t[n]}else e[n]=t[n];return e}checkInputs(t){const e=Object.keys(t).filter(t=>{const[e]=Object(pu["g"])(t);return null==this.graph.nodes[e]});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(t){return t.map(t=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[t]){const e=this._signature.outputs[t];return e.name}return t},{})}checkOutputs(t){t.forEach(t=>{const[e]=Object(pu["g"])(t);if(!this.graph.nodes[e])throw new Error(`The output '${t}' is not found in the graph`)})}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Of="?tfjs-format=file",_f="model.json";class Af{constructor(t,e={}){this.modelUrl=t,this.loadOptions=e,this.version="n/a",null==e&&(this.loadOptions={})}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=f["if"].browserHTTPRequest(t,this.loadOptions);else{const e=f["if"].getLoadHandlers(t,this.loadOptions);if(0===e.length)e.push(f["if"].browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[t]}'`);this.handler=e[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=await this.handler.load();return this.loadSync(t)}loadSync(t){this.artifacts=t;const e=this.artifacts.modelTopology;let n={};null!=this.artifacts.userDefinedMetadata&&(n=this.artifacts.userDefinedMetadata.signature),this.version=`${e.versions.producer}.${e.versions.minConsumer}`;const r=f["if"].decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new wf(hu["a"].Instance.transformGraph(e,n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),null!=t.modelInitializer){const e=hu["a"].Instance.transformGraph(t.modelInitializer);this.initializer=new wf(e),this.initializer.weightMap=this.executor.weightMap,this.initializer.execute({},[])}return!0}async save(t,e){if("string"===typeof t){const e=f["if"].getSaveHandlers(t);if(0===e.length)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new Error(`Found more than one (${e.length}) save handlers for URL '${t}'`);t=e[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}predict(t,e){return this.execute(t,this.outputNodes)}normalizeInputs(t){if(!(t instanceof f["ad"])&&!Array.isArray(t))return t;if(t=Array.isArray(t)?t:[t],t.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${t.length} input tensors.`);return this.inputNodes.reduce((e,n,r)=>(e[n]=t[r],e),{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}execute(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=this.executor.execute(t,e);return n.length>1?n:n[0]}async executeAsync(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=await this.executor.executeAsync(t,e);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((e,n)=>(e[n]=[t[n]],e),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose()}}async function jf(t,e={}){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==e&&(e={}),e.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t=`${t}${_f}${Of}`);const n=new Af(t,e);return await n.load(),n}
/** @license See the LICENSE file. */const kf="2.6.0";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Cf=n("6125"),Ef=n("c388"),Sf=n("bdcf");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
class Df{constructor(){this.size=null}batch(t,e=!0){const n=this;let r;return f["fi"].assert(t>0,()=>"batchSize needs to be positive, but it is\n      "+t),r=this.size===1/0||null==this.size?this.size:e?Math.ceil(this.size/t):Math.floor(this.size/t),Ff(async()=>(await n.iterator()).columnMajorBatch(t,e,Mf),r)}concatenate(t){const e=this;let n;return n=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null,Ff(async()=>(await e.iterator()).concatenate(await t.iterator()),n)}filter(t){const e=this;let n;return n=this.size===1/0?1/0:null,Ff(async()=>(await e.iterator()).filter(e=>f["Sh"](()=>t(e))),n)}async forEachAsync(t){return(await this.iterator()).forEachAsync(t)}map(t){const e=this;return Ff(async()=>(await e.iterator()).map(e=>f["Sh"](()=>t(e))),this.size)}mapAsync(t){const e=this;return Ff(async()=>(await e.iterator()).mapAsync(t),this.size)}prefetch(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const e=this;return Ff(async()=>(await e.iterator()).prefetch(t),this.size)}repeat(t){const e=this;let n;return n=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null,Ff(async()=>{const n=Object(Ef["e"])(async()=>({value:await e.iterator(),done:!1}));return Object(Ef["d"])(n.take(t))},n)}skip(t){const e=this;let n;return n=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null,Ff(async()=>(await e.iterator()).skip(t),n)}shuffle(t,e,n=!0){if(null==t||t<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,i=Cf["alea"](e||f["fi"].now().toString());return Ff(async()=>{let e=i.int32();return n&&(e+=i.int32()),(await r.iterator()).shuffle(t,e.toString())},this.size)}take(t){const e=this;let n;return n=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null,Ff(async()=>(await e.iterator()).take(t),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function Ff(t,e=null){return new class extends Df{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function Nf(t){return Ff(async()=>Object(Ef["f"])(t),t.length)}function Tf(t){if(!Object(Sf["e"])(t))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(t))for(let n=0;n<t.length;n++)e=null==e?t[n].size:Math.min(e,t[n].size);else if(t instanceof Object)for(const n in t)e=null==e?t[n].size:Math.min(e,t[n].size);return Ff(async()=>{const e=await Object(Sf["c"])(t,t=>{if(t instanceof Df)return{value:t.iterator(),recurse:!1};if(Object(Sf["e"])(t))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return Object(Ef["g"])(e,Ef["c"].SHORTEST)},e)}function Mf(t){if(null===t)return null;const e=t[0];if(Object(Sf["a"])(e)){const e=If(t);return{value:e,recurse:!1}}return{value:null,recurse:!0}}function If(t){if(0===t.length)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof f["ad"]?f["Ah"](t):f["Jh"](t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */Df.MAX_BUFFER_SIZE=1e4;class Rf extends Df{constructor(t){super(),this.input=t}async iterator(){const t=await this.input.iterator(),e=t.decodeUTF8(),n=e.split("\n").map(t=>(t.endsWith("\r")&&(t=t.slice(0,-1)),t));return n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */const $f='"',Bf=Symbol("out"),zf=Symbol("field"),Lf=Symbol("quote"),Pf=Symbol("quoteafterquote"),Uf=Symbol("quoteinquote");class Wf extends Df{constructor(t,e){super(),this.input=t,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new Rf(t),e||(e={}),this.hasHeader=!1!==e.hasHeader,this.fullColumnNames=e.columnNames,this.columnConfigs=e.columnConfigs,this.configuredColumnsOnly=e.configuredColumnsOnly,e.delimWhitespace?(f["fi"].assert(null==e.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=e.delimiter?e.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const t=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&t&&f["fi"].assert(t.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=t);const e=this.fullColumnNames.reduce((t,e)=>(t[e]=t[e]+1||1,t),{}),n=Object.keys(e).filter(t=>e[t]>1);if(f["fi"].assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(const r of Object.keys(this.columnConfigs)){const t=this.fullColumnNames.indexOf(r);if(-1===t)throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const t=await this.base.iterator(),e=await t.next();if(e.done)throw new Error("No data was found for CSV parsing.");const n=e.value,r=this.parseRow(n,!1);return r}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let t=await this.base.iterator();return this.hasHeader&&(t=t.skip(1)),t.map(t=>this.makeDataElement(t))}makeDataElement(t){const e=this.parseRow(t),n={},r={};for(let i=0;i<this.fullColumnNames.length;i++){const a=this.fullColumnNames[i],o=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||o){const s=e[i];let u=null;if(""===s)if(o&&void 0!==o.default)u=o.default;else{if(o&&(o.required||o.isLabel))throw new Error(`Required column ${a} is empty in this line: ${t}`);u=void 0}else{const t=Number(s);if(isNaN(t))u=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":u=t;break;case"int32":u=Math.floor(t);break;case"bool":u=this.getBoolean(s);break;default:u=t}else u=t}o&&o.isLabel?r[a]=u:n[a]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(t){return"1"===t||"true"===t.toLowerCase()?1:0}parseRow(t,e=!0){const n=[];let r=0;const i=t.length;let a=Bf;for(let o=0;o<i;o++)switch(a){case Bf:switch(t.charAt(o)){case $f:r=o+1,a=Lf;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),a=Bf;break;default:a=zf,r=o;break}break;case zf:switch(t.charAt(o)){case this.delimiter:n.push(t.substring(r,o)),a=Bf,r=o+1;break;default:}break;case Lf:switch(t.charAt(o)){case $f:a=Pf;break;default:}break;case Pf:switch(t.charAt(o)){case this.delimiter:n.push(t.substring(r,o-1)),a=Bf,r=o+1;break;case $f:a=Lf;break;default:a=Uf;break}break;case Uf:switch(t.charAt(o)){case $f:a=Lf;break;default:}break;default:}if(a===Pf?n.push(t.substring(r,i-1)):n.push(t.substring(r)),e&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class qf extends Ef["a"]{constructor(t){super(),this.microphoneConfig=t,this.isClosed=!1,this.fftSize=t.fftSize||1024;const e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+this.fftSize);if(this.numFrames=t.numFramesPerSpectrogram||43,this.sampleRateHz=t.sampleRateHz,this.columnTruncateLength=t.columnTruncateLength||this.fftSize,this.audioTrackConstraints=t.audioTrackConstraints,this.smoothingTimeConstant=t.smoothingTimeConstant||0,this.includeSpectrogram=!1!==t.includeSpectrogram,this.includeWaveform=!0===t.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(t={}){if(Object(f["Ce"])().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");const e=new qf(t);return await e.start(),e}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(n){throw new Error("Error thrown while initializing video stream: "+n.message)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: `+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let t,e;const n=await this.getAudioData();if(this.includeSpectrogram){const e=this.flattenQueue(n.freqDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const t=this.flattenQueue(n.timeDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:t,waveform:e},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const t=[],e=[];let n=0;return new Promise(r=>{const i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:t,timeDataQueue:e}),t.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(i),r({freqDataQueue:t,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(t){const e=t[0].length,n=new Float32Array(t.length*e);return t.forEach((t,r)=>n.set(t,r*e)),n}getTensorFromAudioDataArray(t,e){const n=new Float32Array(f["fi"].sizeFromShape(e));return n.set(t,n.length-t.length),Object(f["Jh"])(n,e)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Vf extends Ef["a"]{constructor(t,e){if(super(),this.webcamVideoElement=t,this.webcamConfig=e,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Object(f["Kh"])([0],"int32"),this.webcamConfig.centerCrop){const t=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,e=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-t)/2,r=(1-e)/2,i=n+t,a=e+r;this.cropBox=Object(f["Lh"])([r,n,a,i],[1,4])}else this.cropBox=Object(f["Lh"])([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(t,e={}){if(Object(f["Ce"])().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!e.resizeWidth||!e.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=e.resizeWidth,t.height=e.resizeHeight}const n=new Vf(t,e);return await n.start(),n}async start(){this.webcamConfig.facingMode&&f["fi"].assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(t){throw t.message="Error thrown while initializing video stream: "+t.message,t}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(t=>{this.webcamVideoElement.onloadedmetadata=()=>{t()}})}async next(){if(this.isClosed)return{value:null,done:!0};let t;try{t=f["Md"].fromPixels(this.webcamVideoElement)}catch(e){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(e))}if(!this.resize)return{value:t,done:!1};try{return{value:this.cropAndResizeFrame(t),done:!1}}catch(e){throw new Error("Error thrown cropping the video: "+e.message)}finally{t.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(t){return Object(f["Sh"])(()=>{const e=t.toFloat().expandDims(0);let n;n=f["gf"].cropAndResize(e,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");const r=n.shape;return n.reshape(r.slice(1))})}async capture(){return(await this.next()).value}stop(){const t=this.stream.getTracks();t.forEach(t=>t.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Gf{}var Hf=n("dc14");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Xf extends Hf["a"]{constructor(t,e={}){super(),this.file=t,this.options=e,f["fi"].assert(t instanceof Uint8Array||!!Object(f["Ce"])().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=e.offset||0,this.chunkSize=e.chunkSize||1048576}summary(){return"FileChunks "+this.file}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const t=new Promise((t,e)=>{const n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)t(new Uint8Array(this.file.slice(this.offset,n)));else{const r=new FileReader;r.onload=n=>{let i=r.result;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),!(i instanceof Uint8Array))return e(new TypeError("FileReader returned unknown type."));t(i)},r.onabort=t=>e(new Error("Aborted")),r.onerror=t=>e(new Error(t.type));const i=this.file.slice(this.offset,n);r.readAsArrayBuffer(i)}this.offset=n});return{value:await t,done:!1}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */async function Yf(t,e={}){let n,r;"string"===typeof t?n=t:(n=t.url,r=Kf(t));const i=await f["fi"].fetch(n,r);if(i.ok){const t=new Uint8Array(await i.arrayBuffer());return new Xf(t,e)}throw new Error(i.statusText)}const Kf=t=>{const e={method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity};return e};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function Jf(t){return"string"===typeof t&&"file://"===t.substr(0,7)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Zf extends Gf{constructor(t,e={}){super(),this.input=t,this.options=e}async iterator(){if(Jf(this.input)&&Object(f["Ce"])().get("IS_NODE")){const t=n(5);this.input=t.readFileSync(this.input.substr(7))}return new Xf(this.input,this.options)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Qf extends Gf{constructor(t,e={}){super(),this.url=t,this.fileOptions=e}async iterator(){return Jf(this.url)?new Zf(this.url,this.fileOptions).iterator():Yf(this.url,this.fileOptions)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function td(t,e={}){return new Wf(new Qf(t),e)}function ed(t){const e=Object(Ef["e"])(t);return Ff(async()=>e)}function nd(t){return Ff(async()=>{const e=await t();return Object(Ef["e"])(()=>e.next())})}async function rd(t,e){return Vf.create(t,e)}async function id(t){return qf.create(t)}
/** @license See the LICENSE file. */const ad="2.6.0";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function od(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{null!=t&&f["fi"].assert("complex64"!==t.dtype,()=>e+" does not support complex64 tensors in the CPU backend.")})}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sd=f["of"].nonMaxSuppressionV3Impl,ud=f["of"].split,cd=f["of"].tile,ld=f["of"].topkImpl,fd=f["of"].whereImpl;function dd(t,e,n,r){if("linear"===n)return t.linear(e);if("relu"===n)return t.relu(e);if("elu"===n)return f["xe"](e);if("relu6"===n)return t.relu6(e);if("prelu"===n)return t.prelu(e,r);throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}class hd extends f["zb"]{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new f["O"](this,Object(f["Be"])())}write(t,e,n){this.firstUse&&(this.firstUse=!1,Object(f["Ce"])().get("IS_NODE")&&f["Dd"].warn("\n============================\nHi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const r={};return this.data.set(r,{values:t,dtype:n,refCount:1}),r}makeTensorInfo(t,e,n){const r=this.write(n,t,e);return{dataId:r,shape:t,dtype:e}}incRef(t){const e=this.data.get(t);e.refCount++}decRef(t){if(this.data.has(t)){const e=this.data.get(t);e.refCount--}}move(t,e,n,r){this.data.set(t,{values:e,dtype:r,refCount:1})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:e,complexTensorInfos:n}=this.data.get(t);if("complex64"===e){const t=this.readSync(n.real.dataId),e=this.readSync(n.imag.dataId);return f["Dd"].mergeRealAndImagArrays(t,e)}return this.data.get(t).values}bufferSync(t){const e=this.readSync(t.dataId);let n=e;if("string"===t.dtype)try{n=e.map(t=>f["fi"].decodeString(t))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return f["Nd"](t.shape,t.dtype,n)}makeOutput(t,e,n){const r=this.write(t,e,n);return Object(f["Be"])().makeTensorFromDataId(r,e,n,this)}disposeData(t){if(this.data.has(t)){const{complexTensorInfos:e}=this.data.get(t);null!=e&&(this.disposeData(e.real.dataId),this.disposeData(e.imag.dataId)),this.data.delete(t)}}disposeIntermediateTensorInfo(t){const e=t.dataId;if(this.data.has(e)){const t=this.data.get(e);t.refCount--,t.refCount<1&&this.disposeData(e)}}async time(t){const e=f["fi"].now();t();const n=f["fi"].now()-e;return{kernelMs:n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}stridedSlice(t,e,n,r){od(t,"stridedSlice");const i=f["oh"].computeOutShape(e,n,r);if(i.some(t=>0===t))return f["Jh"]([],i);const a=f["Nd"](i,t.dtype),o=this.bufferSync(t);for(let s=0;s<a.size;s++){const t=a.indexToLoc(s),n=new Array(t.length);for(let i=0;i<n.length;i++)n[i]=t[i]*r[i]+e[i];a.set(o.get(...n),...t)}return a.toTensor()}diag(t){const e=this.readSync(t.dataId),n=f["Nd"]([t.size,t.size],t.dtype),r=n.values;for(let i=0;i<e.length;i++)r[i*t.size+i]=e[i];return n.toTensor()}unstack(t,e){const n=t.shape[e],r=new Array(t.rank-1);let i=0;for(let u=0;u<t.rank;u++)u!==e&&(r[i++]=t.shape[u]);const a=new Array(t.rank).fill(0),o=t.shape.slice();o[e]=1;const s=new Array(n);for(let u=0;u<s.length;u++)a[e]=u,s[u]=f["jh"](t,a,o).reshape(r);return s}reverse(t,e){od(t,"reverse");const n=f["Nd"](t.shape,t.dtype),r=this.bufferSync(t);for(let i=0;i<n.size;i++){const a=n.indexToLoc(i),o=a.slice();e.forEach(e=>o[e]=t.shape[e]-1-o[e]),n.set(r.get(...o),...a)}return n.toTensor()}neg(t){return od(t,"neg"),f["Yf"](f["Vg"](-1),t)}addN(t){od(t,"addN");const e=t.map(t=>this.readSync(t.dataId)),n=f["Nd"](t[0].shape,t[0].dtype),r=n.values;for(let i=0;i<t.length;i++){const t=e[i];for(let e=0;e<r.length;e++)r[e]+=t[e]}return n.toTensor()}softmax(t,e){const n=f["fi"].parseAxisParam([e],t.shape),r=Object(f["Jf"])(t,n),i=f["Dd"].expandShapeToKeepDim(r.shape,n),a=f["Dh"](t,r.reshape(i)),o=f["Ge"](a),s=this.sum(o,n).reshape(i);return f["se"](o,s)}pow(t,e){return od([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.pow(t,e))}batchMatMul(t,e,n,r){od([t,e],"matMul");const i=n?t.shape[1]:t.shape[2],a=n?t.shape[2]:t.shape[1],o=r?e.shape[1]:e.shape[2],s=t.shape[0],u=this.readSync(t.dataId),c=this.readSync(e.dataId),[l,d,h]=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],[p,m,g]=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],b=a*o,y=f["Nd"]([s,a,o],t.dtype),v=y.values,x=this.blockSize;for(let f=0;f<s;f++)for(let t=0;t<a;t+=x)for(let e=0;e<o;e+=x)for(let n=0;n<i;n+=x){const r=Math.min(t+x,a),s=Math.min(e+x,o),y=Math.min(n+x,i);for(let i=t;i<r;i++)for(let t=e;t<s;t++){let e=0;for(let r=n;r<y;r++)e+=u[f*l+i*d+r*h]*c[r*p+t*m+f*g];v[f*b+(i*o+t)]+=e}}return y.toTensor()}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:a,preluActivationWeights:o}){let s=this.batchMatMul(t,e,n,r);return i&&(s=f["od"](s,i)),a&&(s=dd(this,s,a,o)),s}floorDiv(t,e){od([t,e],"floorDiv");const n=(t,e)=>Math.floor(t/e),r="int32";return this.broadcastedBinaryOp(t,e,r,n)}sum(t,e){od(t,"sum"),f["Dd"].assertAxesAreInnerMostDims("sum",e,t.rank);const[n,r]=f["Dd"].computeOutAndReduceShapes(t.shape,e),i=Object(f["ei"])(t.dtype,"int32"),a=f["ni"](n,i),o=f["fi"].sizeFromShape(r),s=this.readSync(a.dataId),u=this.readSync(t.dataId);for(let c=0;c<s.length;++c){const t=c*o;let e=0;for(let n=0;n<o;++n)e+=u[t+n];s[c]=e}return a}prod(t,e){od(t,"sum");const[n,r]=f["Dd"].computeOutAndReduceShapes(t.shape,e),i=Object(f["ei"])(t.dtype,"int32"),a=f["ni"](n,i),o=f["fi"].sizeFromShape(r),s=this.readSync(a.dataId),u=this.readSync(t.dataId);for(let c=0;c<s.length;++c){const t=c*o;let e=1;for(let n=0;n<o;++n)e*=u[t+n];s[c]=e}return a}unsortedSegmentSum(t,e,n){od(t,"unsortedSegmentSum");const r=[],i=t.rank-e.rank;for(let a=0;a<i;++a)e=e.expandDims(a+1);for(let a=0;a<n;++a){const n=f["Vg"](a,"int32"),i=f["De"](n,e).asType("float32"),o=i.mul(t).sum(0);r.push(o)}return f["Ah"](r)}argMin(t,e){od(t,"argMin");const n=[e];f["Dd"].assertAxesAreInnerMostDims("argMin",n,t.rank);const[r,i]=f["Dd"].computeOutAndReduceShapes(t.shape,n),a=f["ni"](r,"int32"),o=f["fi"].sizeFromShape(i),s=this.readSync(a.dataId),u=this.readSync(t.dataId);for(let c=0;c<s.length;++c){const t=c*o;let e=u[t],n=0;for(let r=0;r<o;++r){const i=u[t+r];i<e&&(e=i,n=r)}s[c]=n}return a}argMax(t,e){od(t,"argMax");const n=[e];f["Dd"].assertAxesAreInnerMostDims("argMax",n,t.rank);const[r,i]=f["Dd"].computeOutAndReduceShapes(t.shape,n),a=f["ni"](r,"int32"),o=f["fi"].sizeFromShape(i),s=this.readSync(a.dataId),u=this.readSync(t.dataId);for(let c=0;c<s.length;++c){const t=c*o;let e=u[t],n=0;for(let r=0;r<o;++r){const i=u[t+r];i>e&&(e=i,n=r)}s[c]=n}return a}cumsum(t,e,n,r){if(od(t,"cumsum"),e!==t.rank-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${t.rank-1} but got axis=`+e);const i=Object(f["ei"])(t.dtype,"int32"),a=f["ni"](t.shape,i),o=this.readSync(a.dataId),s=this.readSync(t.dataId),u=t.shape[t.rank-1],c=r?(t,e)=>t+u-e-1:(t,e)=>t+e;for(let l=0;l<s.length;l+=u)for(let t=0;t<u;t++){const e=c(l,t);if(0===t)o[e]=n?0:s[e];else{const r=c(l,t-1);o[e]=n?s[r]+o[r]:s[e]+o[r]}}return a}equal(t,e){return od([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t===e?1:0)}notEqual(t,e){return od([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t!==e?1:0)}less(t,e){return od([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<e?1:0)}lessEqual(t,e){return od([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<=e?1:0)}greater(t,e){return od([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>e?1:0)}greaterEqual(t,e){return od([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>=e?1:0)}logicalAnd(t,e){return od([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t&&e)}logicalOr(t,e){return od([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t||e)}select(t,e,n){od([t,e,n],"select");const r=this.readSync(t.dataId),i=this.readSync(e.dataId),a=this.readSync(n.dataId),o=f["ni"](e.shape,Object(f["ei"])(e.dtype,n.dtype)),s=this.readSync(o.dataId);let u=0;const c=0===t.rank||t.rank>1||1===e.rank?1:f["fi"].sizeFromShape(e.shape.slice(1));for(let l=0;l<r.length;l++)for(let t=0;t<c;t++)1===r[l]?s[u++]=i[l]:s[u++]=a[l];return o}where(t){od([t],"where");const e=this.readSync(t.dataId);return fd(t.shape,e)}topk(t,e,n){od(t,"topk");const r=this.readSync(t.dataId);return ld(r,t.shape,t.dtype,e,n)}min(t,e){od(t,"min"),f["Dd"].assertAxesAreInnerMostDims("min",e,t.rank);const[n,r]=f["Dd"].computeOutAndReduceShapes(t.shape,e),i=f["ni"](n,t.dtype),a=f["fi"].sizeFromShape(r),o=this.readSync(i.dataId),s=this.readSync(t.dataId);for(let u=0;u<o.length;++u){const t=u*a;let e=s[t];for(let n=0;n<a;++n){const r=s[t+n];r<e&&(e=r)}o[u]=e}return i}minimum(t,e){return od([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.min(t,e))}mod(t,e){return od([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})}maximum(t,e){return od([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.max(t,e))}all(t,e){od(t,"all"),f["Dd"].assertAxesAreInnerMostDims("all",e,t.rank);const[n,r]=f["Dd"].computeOutAndReduceShapes(t.shape,e),i=f["ni"](n,t.dtype),a=f["fi"].sizeFromShape(r),o=this.readSync(i.dataId),s=this.readSync(t.dataId);for(let u=0;u<o.length;++u){const t=u*a;let e=s[t];for(let n=0;n<a;++n){const r=s[t+n];e=e&&r}o[u]=e}return i}any(t,e){od(t,"any"),f["Dd"].assertAxesAreInnerMostDims("any",e,t.rank);const[n,r]=f["Dd"].computeOutAndReduceShapes(t.shape,e),i=f["ni"](n,t.dtype),a=f["fi"].sizeFromShape(r),o=this.readSync(i.dataId),s=this.readSync(t.dataId);for(let u=0;u<o.length;++u){const t=u*a;let e=s[t];for(let n=0;n<a;++n){const r=s[t+n];e=e||r}o[u]=e}return i}squaredDifference(t,e){return od([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const n=t-e;return n*n})}linear(t){return t}relu(t){od(t,"relu");const e=f["ni"](t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return e}relu6(t){od(t,"relu");const e=f["ni"](t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return e}prelu(t,e){return od([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>t<0?e*t:t)}eluDer(t,e){od([t,e],"eluDer");const n=new Float32Array(e.size),r=this.readSync(e.dataId),i=this.readSync(t.dataId);for(let a=0;a<r.length;++a){const t=r[a];n[a]=t>=1?i[a]:i[a]*(t+1)}return this.makeOutput(n,e.shape,"float32")}atan2(t,e){return od([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.atan2(t,e))}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:a}){let o=this.conv2d(t,e,n);return r&&(o=f["od"](o,r)),i&&(o=dd(this,o,i,a)),o}conv2d(t,e,n){od([t,e],"conv2d");const r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c="channelsLast"===n.dataFormat,l=f["Nd"](n.outShape,t.dtype),d=t.strides[0],h=c?t.strides[1]:t.strides[2],p=c?t.strides[2]:1,m=c?1:t.strides[1],g=l.strides[0],b=c?l.strides[1]:l.strides[2],y=c?l.strides[2]:1,v=c?1:l.strides[1],x=this.readSync(t.dataId),w=this.readSync(e.dataId),O=l.values;for(let f=0;f<n.batchSize;++f){const t=f*d,c=f*g;for(let l=0;l<n.outHeight;++l){const f=c+l*b,d=l*n.strideHeight-u;for(let u=0;u<r;u++){const r=d+u*a;if(r<0||r>=n.inHeight)continue;const c=u*e.strides[0],l=t+r*h;for(let t=0;t<n.outWidth;++t){const r=f+t*y,a=t*n.strideWidth-s;for(let t=0;t<i;t++){const i=a+t*o;if(i<0||i>=n.inWidth)continue;const s=c+t*e.strides[1],u=l+i*p;let f=s;for(let t=0;t<n.inChannels;++t){const e=x[u+t*m];for(let t=0;t<n.outChannels;++t)O[r+t*v]+=e*w[f+t];f+=n.outChannels}}}}}}return l.toTensor()}conv3d(t,e,n){const r=n.filterDepth,i=n.filterHeight,a=n.filterWidth,o=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,d=n.padInfo.top,h=f["Nd"](n.outShape,t.dtype),p=this.readSync(t.dataId),m=this.readSync(e.dataId),g=h.values;for(let f=0;f<n.batchSize;++f){const b=f*t.strides[0],y=f*h.strides[0];for(let f=0;f<n.outDepth;++f){const v=y+f*h.strides[1],x=f*n.strideDepth-c;for(let c=0;c<r;c++){const r=x+c*o;if(r<0||r>=n.inDepth)continue;const f=c*e.strides[0],y=b+r*t.strides[1];for(let o=0;o<n.outHeight;++o){const r=v+o*h.strides[2],c=o*n.strideHeight-d;for(let o=0;o<i;o++){const i=c+o*s;if(i<0||i>=n.inHeight)continue;const d=f+o*e.strides[1],h=y+i*t.strides[2];for(let t=0;t<n.outWidth;++t){const i=r+t*n.outChannels,o=t*n.strideWidth-l;for(let t=0;t<a;t++){const r=o+t*u;if(r<0||r>=n.inWidth)continue;const a=d+t*e.strides[2],s=h+r*n.inChannels;let c=a;for(let t=0;t<n.inChannels;++t){const e=p[s+t];for(let t=0;t<n.outChannels;++t)g[i+t]+=e*m[c+t];c+=n.outChannels}}}}}}}}return h.toTensor()}conv2dDerInput(t,e,n){od([t,e],"conv2dDerInput");const r=f["Nd"](n.inShape,"float32"),i=r.values,a=this.readSync(t.dataId),o=this.readSync(e.dataId),[s,u,c]=e.strides,{batchSize:l,filterHeight:d,filterWidth:h,inChannels:p,inHeight:m,inWidth:g,outChannels:b,outHeight:y,outWidth:v,strideHeight:x,strideWidth:w,dataFormat:O}=n,_=d-1-n.padInfo.top,A=h-1-n.padInfo.left,j="channelsLast"===O,k=r.strides[0],C=j?r.strides[1]:r.strides[2],E=j?r.strides[2]:1,S=j?1:r.strides[1],D=t.strides[0],F=j?t.strides[1]:t.strides[2],N=j?t.strides[2]:1,T=j?1:t.strides[1];for(let f=0;f<l;++f)for(let t=0;t<p;++t)for(let e=0;e<m;++e){const n=e-_,r=Math.max(0,Math.ceil(n/x)),l=Math.min(y,(d+n)/x);for(let p=0;p<g;++p){const m=p-A,g=Math.max(0,Math.ceil(m/w)),y=Math.min(v,(h+m)/w);let O=0;for(let e=r;e<l;++e){const r=e*x-n;for(let n=g;n<y;++n){const i=n*w-m,l=D*f+F*e+N*n,p=s*(d-1-r)+u*(h-1-i)+c*t;for(let t=0;t<b;++t){const e=a[l+T*t],n=o[p+t];O+=e*n}}}const _=k*f+C*e+E*p+S*t;i[_]=O}}return r.toTensor()}conv3dDerInput(t,e,n){const r=f["Nd"](n.inShape,"float32"),i=r.values,[a,o,s,u]=r.strides,c=this.readSync(t.dataId),[l,d,h,p]=t.strides,m=this.readSync(e.dataId),[g,b,y,v]=e.strides,{batchSize:x,filterDepth:w,filterHeight:O,filterWidth:_,inChannels:A,inDepth:j,inHeight:k,inWidth:C,outChannels:E,outDepth:S,outHeight:D,outWidth:F,strideDepth:N,strideHeight:T,strideWidth:M}=n,I=w-1-n.padInfo.front,R=O-1-n.padInfo.top,$=_-1-n.padInfo.left;for(let f=0;f<x;++f)for(let t=0;t<A;++t)for(let e=0;e<j;++e){const n=e-I,r=Math.max(0,Math.ceil(n/N)),x=Math.min(S,(w+n)/N);for(let A=0;A<k;++A){const j=A-R,k=Math.max(0,Math.ceil(j/T)),S=Math.min(D,(O+j)/T);for(let D=0;D<C;++D){const C=D-$,I=Math.max(0,Math.ceil(C/M)),R=Math.min(F,(_+C)/M);let B=0;for(let e=r;e<x;++e){const r=e*N-n;for(let n=k;n<S;++n){const i=n*T-j;for(let a=I;a<R;++a){const o=a*M-C,s=l*f+d*e+h*n+p*a,u=g*(w-1-r)+b*(O-1-i)+y*(_-1-o)+v*t;for(let t=0;t<E;++t){const e=c[s+t],n=m[u+t];B+=e*n}}}}i[a*f+o*e+s*A+u*D+t]=B}}}return r.toTensor()}conv2dDerFilter(t,e,n){od([t,e],"conv2dDerFilter");const r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s="channelsLast"===n.dataFormat,u=f["Nd"](n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,d=this.bufferSync(t),h=this.bufferSync(e);for(let f=0;f<a;++f){const t=Math.max(0,Math.ceil((l-f)/r)),e=Math.min(n.outHeight,(n.inHeight+l-f)/r);for(let a=0;a<o;++a){const o=Math.max(0,Math.ceil((c-a)/i)),p=Math.min(n.outWidth,(n.inWidth+c-a)/i);for(let m=0;m<n.inChannels;++m)for(let g=0;g<n.outChannels;++g){let b=0;for(let u=0;u<n.batchSize;++u)for(let n=t;n<e;++n){const t=f+n*r-l;for(let e=o;e<p;++e){const r=a+e*i-c;b+=s?d.get(u,t,r,m)*h.get(u,n,e,g):d.get(u,m,t,r)*h.get(u,g,n,e)}}u.set(b,f,a,m,g)}}}return u.toTensor()}conv3dDerFilter(t,e,n){const r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=f["Nd"](n.filterShape,"float32"),l=c.values,[d,h,p,m]=c.strides,g=this.readSync(e.dataId),[b,y,v,x]=e.strides,w=this.readSync(t.dataId),[O,_,A,j]=t.strides,k=n.padInfo.front,C=n.padInfo.left,E=n.padInfo.top;for(let f=0;f<o;++f){const t=Math.max(0,Math.ceil((k-f)/r)),e=Math.min(n.outDepth,(n.inDepth+k-f)/r),o=f*d;for(let c=0;c<s;++c){const s=Math.max(0,Math.ceil((E-c)/i)),d=Math.min(n.outHeight,(n.inHeight+E-c)/i),S=c*h+o;for(let o=0;o<u;++o){const u=Math.max(0,Math.ceil((C-o)/a)),h=Math.min(n.outWidth,(n.inWidth+C-o)/a),D=o*p+S;for(let p=0;p<n.inChannels;++p){const S=p*m+D;for(let m=0;m<n.outChannels;++m){let D=0;for(let l=0;l<n.batchSize;++l){const n=l*O,S=l*b;for(let l=t;l<e;++l){const t=f+l*r-k,e=t*_+n,b=l*y+S;for(let n=s;n<d;++n){const t=c+n*i-E,r=t*A+e,s=n*v+b;for(let e=u;e<h;++e){const t=o+e*a-C,n=t*j+r,i=e*x+s;D+=w[n+p]*g[i+m]}}}}l[S+m]=D}}}}}return c.toTensor()}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:a}){let o=this.depthwiseConv2D(t,e,n);return r&&(o=f["od"](o,r)),i&&(o=dd(this,o,i,a)),o}depthwiseConv2D(t,e,n){od([t,e],"depthwiseConv2D");const r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=f["Nd"](n.outShape,t.dtype),d=this.readSync(t.dataId),h=this.readSync(e.dataId),p=l.values;for(let f=0;f<n.batchSize;++f){const m=f*t.strides[0],g=f*l.strides[0];for(let f=0;f<n.outHeight;++f){const b=g+f*l.strides[1],y=f*n.strideHeight-s;for(let s=0;s<r;++s){const r=y+s*a;if(r<0||r>=n.inHeight)continue;const f=s*e.strides[0],g=m+r*t.strides[1];for(let t=0;t<n.outWidth;++t){const r=b+t*l.strides[2],a=t*n.strideWidth-u;for(let t=0;t<i;++t){const i=a+t*o;if(i<0||i>=n.inWidth)continue;const s=f+t*e.strides[1],u=g+i*n.inChannels;let l=r,m=s;for(let t=0;t<n.inChannels;++t){const e=d[u+t];for(let t=0;t<c;++t)p[l+t]+=e*h[m+t];l+=c,m+=c}}}}}}return l.toTensor()}depthwiseConv2DDerInput(t,e,n){od([t,e],"depthwiseConv2DDerInput");const r=f["Nd"](n.inShape,"float32"),i=r.values,[a,o,s]=r.strides,u=this.readSync(t.dataId),[c,l,d]=t.strides,h=this.readSync(e.dataId),[p,m,g]=e.strides,{batchSize:b,filterHeight:y,filterWidth:v,inChannels:x,inHeight:w,inWidth:O,outChannels:_,outHeight:A,outWidth:j,strideHeight:k,strideWidth:C}=n,E=y-1-n.padInfo.top,S=v-1-n.padInfo.left,D=_/x;for(let f=0;f<b;++f)for(let t=0;t<x;++t)for(let e=0;e<w;++e){const n=e-E,r=Math.max(0,Math.ceil(n/k)),b=Math.min(A,(y+n)/k);for(let x=0;x<O;++x){const w=x-S,O=Math.max(0,Math.ceil(w/C)),_=Math.min(j,(v+w)/C);let A=0;for(let e=r;e<b;++e){const r=e*k-n;for(let n=O;n<_;++n){const i=n*C-w,a=c*f+l*e+d*n,o=p*(y-1-r)+m*(v-1-i)+g*t;for(let e=0;e<D;++e){const n=t*D+e,r=u[a+n],i=h[o+e];A+=r*i}}}i[a*f+o*e+s*x+t]=A}}return r.toTensor()}depthwiseConv2DDerFilter(t,e,n){od([t,e],"depthwiseConv2DDerFilter");const r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=f["Nd"](n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,d=this.bufferSync(t),h=this.bufferSync(e);for(let f=0;f<a;++f){const t=Math.max(0,Math.ceil((c-f)/r)),e=Math.min(n.outHeight,(n.inHeight+c-f)/r);for(let a=0;a<o;++a){const o=Math.max(0,Math.ceil((u-a)/i)),p=Math.min(n.outWidth,(n.inWidth+u-a)/i);for(let m=0;m<n.outChannels;++m){const g=Math.trunc(m/l),b=m%l;let y=0;for(let s=0;s<n.batchSize;++s)for(let n=t;n<e;++n){const t=f+n*r-c;for(let e=o;e<p;++e){const r=a+e*i-u;y+=d.get(s,t,r,g)*h.get(s,n,e,m)}}s.set(y,f,a,g,b)}}}return s.toTensor()}tile(t,e){return od(t,"tile"),cd(this.bufferSync(t),e)}gather(t,e,n){od([t,e],"gather");const r=t.shape.slice(),i=this.readSync(e.dataId);r[n]=i.length;const a=f["Nd"](r,t.dtype),o=this.bufferSync(t);for(let s=0;s<a.size;++s){const t=a.indexToLoc(s),e=t.slice();e[n]=i[t[n]];const r=o.locToIndex(e);a.values[s]=o.values[r]}return a.toTensor()}batchToSpaceND(t,e,n){od([t],"batchToSpaceND");const r=e.reduce((t,e)=>t*e),i=f["Dd"].getReshaped(t.shape,e,r),a=f["Dd"].getPermuted(i.length,e.length),o=f["Dd"].getReshapedPermuted(t.shape,e,r),s=f["Dd"].getSliceBeginCoords(n,e.length),u=f["Dd"].getSliceSize(o,n,e.length);return f["Xh"](t.reshape(i),a).reshape(o).slice(s,u)}pool3d(t,e,n){od(t,"pool3d");const r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left,g="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=this.readSync(t.dataId),y=f["Nd"](e.outShape,t.dtype),v=y.values,x=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],w=e.outShape[2]*e.outShape[3]*e.outShape[4],O=e.outShape[3]*e.outShape[4],_=e.outShape[4];for(let f=0;f<e.batchSize;++f){const y=f*x,A=f*t.strides[0];for(let f=0;f<e.inChannels;++f)for(let x=0;x<e.outDepth;++x){const j=x*r-h;let k=j;while(k<0)k+=o;const C=Math.min(e.inDepth,c+j),E=y+x*w;for(let r=0;r<e.outHeight;++r){const c=r*i-p;let h=c;while(h<0)h+=s;const y=Math.min(e.inHeight,l+c),x=E+r*O;for(let r=0;r<e.outWidth;++r){const i=r*a-m;let c=i;while(c<0)c+=u;const l=Math.min(e.inWidth,d+i),p=x+r*_;let w=g,O=0,j=0;for(let e=k;e<C;e+=o){const r=A+e*t.strides[1];for(let e=h;e<y;e+=s){const i=r+e*t.strides[2];for(let e=c;e<l;e+=u){const r=i+e*t.strides[3],a=b[r+f];if("max"===n&&a>w?w=a:"avg"===n&&(O+=a,j++),isNaN(w))break}if(isNaN(w))break}if(isNaN(w))break}const E=p+f;v[E]="avg"===n?O/j:w}}}}return y.toTensor()}avgPool3d(t,e){return od(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()}avgPool3dBackprop(t,e,n){od([t,e],"avgPool3dBackprop");const r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,d=n.dilationWidth,h=n.effectiveFilterDepth,p=n.effectiveFilterHeight,m=n.effectiveFilterWidth,g=h-1-n.padInfo.front,b=m-1-n.padInfo.left,y=p-1-n.padInfo.top,v=f["Nd"](e.shape,"float32"),x=1/(o*s*u),w=this.bufferSync(t);for(let f=0;f<n.batchSize;++f)for(let t=0;t<n.inChannels;++t)for(let e=0;e<n.inDepth;++e)for(let o=0;o<n.inHeight;++o)for(let s=0;s<n.inWidth;++s){const u=e-g,O=o-y,_=s-b;let A=0;for(let e=0;e<h;e+=c){const o=(u+e)/r;if(!(o<0||o>=n.outDepth||Math.floor(o)!==o))for(let e=0;e<p;e+=l){const r=(O+e)/i;if(!(r<0||r>=n.outHeight||Math.floor(r)!==r))for(let e=0;e<m;e+=d){const i=(_+e)/a;if(i<0||i>=n.outWidth||Math.floor(i)!==i)continue;const s=w.get(f,o,r,i,t);A+=s}}}v.set(A*x,f,e,o,s,t)}return v.toTensor()}maxPool3d(t,e){return od(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()}maxPool3dPositions(t,e){const n=f["Nd"](e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left,g=this.bufferSync(t);for(let f=0;f<e.batchSize;++f)for(let t=0;t<e.inChannels;++t)for(let b=0;b<e.outDepth;++b){const y=b*r-h;let v=y;while(v<0)v+=o;const x=Math.min(e.inDepth,c+y);for(let r=0;r<e.outHeight;++r){const c=r*i-p;let h=c;while(h<0)h+=s;const w=Math.min(e.inHeight,l+c);for(let i=0;i<e.outWidth;++i){const p=i*a-m;let O=p;while(O<0)O+=u;const _=Math.min(e.inWidth,d+p);let A=Number.NEGATIVE_INFINITY,j=-1;for(let e=v;e<x;e+=o){const n=e-y;for(let r=h;r<w;r+=s){const i=r-c;for(let a=O;a<_;a+=u){const o=a-p,s=g.get(f,e,r,a,t);s>=A&&(A=s,j=n*l*d+i*l+o)}}}n.set(j,f,b,r,i,t)}}}return n.toTensor()}maxPool3dBackprop(t,e,n,r){od([e,n],"maxPool3dBackprop");const i=this.maxPool3dPositions(e,r),a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterDepth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,m=d-1-r.padInfo.front,g=p-1-r.padInfo.left,b=h-1-r.padInfo.top,y=f["Nd"](e.shape,"float32"),v=this.bufferSync(i),x=this.bufferSync(t);for(let f=0;f<r.batchSize;++f)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.inDepth;++e)for(let n=0;n<r.inHeight;++n)for(let i=0;i<r.inWidth;++i){const w=e-m,O=n-b,_=i-g;let A=0;for(let e=0;e<d;e+=u){const n=(w+e)/a;if(!(n<0||n>=r.outDepth||Math.floor(n)!==n))for(let i=0;i<h;i+=c){const a=(O+i)/o;if(!(a<0||a>=r.outHeight||Math.floor(a)!==a))for(let o=0;o<p;o+=l){const u=(_+o)/s;if(u<0||u>=r.outWidth||Math.floor(u)!==u)continue;const c=d*h*p-1-v.get(f,n,a,u,t),l=e*h*p+i*p+o,m=c===l?1:0;if(0===m)continue;const g=x.get(f,n,a,u,t);A+=g*m}}}y.set(A,f,e,n,i,t)}return y.toTensor()}resizeBilinear(t,e,n,r){od(t,"resizeBilinear");const[i,a,o,s]=t.shape,u=this.readSync(t.dataId),c=new Float32Array(f["fi"].sizeFromShape([i,e,n,s])),l=[r&&e>1?a-1:a,r&&n>1?o-1:o],d=[r&&e>1?e-1:e,r&&n>1?n-1:n];let h=0;const p=l[0]/d[0],m=l[1]/d[1];for(let f=0;f<i;f++)for(let r=0;r<e;r++){const e=p*r,i=Math.floor(e),l=e-i,d=Math.min(a-1,Math.ceil(e)),g=f*t.strides[0]+i*t.strides[1],b=f*t.strides[0]+d*t.strides[1];for(let r=0;r<n;r++){const e=m*r,n=Math.floor(e),i=e-n,a=Math.min(o-1,Math.ceil(e)),f=g+n*t.strides[2],d=b+n*t.strides[2],p=g+a*t.strides[2],y=b+a*t.strides[2];for(let t=0;t<s;t++){const e=u[f+t],n=u[d+t],r=u[p+t],a=u[y+t],o=e+(r-e)*i,s=n+(a-n)*i,m=o+(s-o)*l;c[h++]=m}}}return f["Jh"](c,[i,e,n,s])}resizeBilinearBackprop(t,e,n){od([t,e],"resizeBilinearBackprop");const[r,i,a,o]=e.shape,[,s,u]=t.shape,c=new Float32Array(r*i*a*o),l=[n&&s>1?i-1:i,n&&u>1?a-1:a],d=[n&&s>1?s-1:s,n&&u>1?u-1:u],h=l[0]/d[0],p=l[1]/d[1],m=this.readSync(t.dataId);let g=0;for(let f=0;f<r;f++){const t=f*e.strides[0];for(let n=0;n<s;n++){const r=n*h,s=Math.floor(r),l=Math.min(Math.ceil(r),i-1),f=t+s*e.strides[1],d=t+l*e.strides[1],b=r-s,y=1-b;for(let t=0;t<u;t++){const n=t*p,r=Math.floor(n),i=Math.min(Math.ceil(n),a-1),s=n-r,u=1-s,l=f+r*e.strides[2],h=f+i*e.strides[2],v=d+r*e.strides[2],x=d+i*e.strides[2],w=y*u,O=y*s,_=b*u,A=b*s;for(let t=0;t<o;t++){const e=m[g++];c[l+t]+=e*w,c[h+t]+=e*O,c[v+t]+=e*_,c[x+t]+=e*A}}}}return f["Nh"](c,[r,a,i,o],e.dtype)}resizeNearestNeighbor(t,e,n,r){od(t,"resizeNearestNeighbor");const[i,a,o,s]=t.shape,u=this.readSync(t.dataId),c=new Float32Array(i*e*n*s),l=[r&&e>1?a-1:a,r&&n>1?o-1:o],d=[r&&e>1?e-1:e,r&&n>1?n-1:n],h=l[0]/d[0],p=l[1]/d[1];let m=0;for(let f=0;f<i;f++){const i=f*t.strides[0];for(let l=0;l<e;l++){const e=h*l,f=Math.min(a-1,r?Math.round(e):Math.floor(e)),d=i+f*t.strides[1];for(let i=0;i<n;i++){const e=p*i,n=Math.min(o-1,r?Math.round(e):Math.floor(e)),a=d+n*t.strides[2];for(let t=0;t<s;t++){const e=u[a+t];c[m++]=e}}}}return f["Jh"](c,[i,e,n,s],t.dtype)}resizeNearestNeighborBackprop(t,e,n){od([t,e],"resizeNearestNeighborBackprop");const[r,i,a,o]=e.shape,[,s,u]=t.shape,c=new Float32Array(r*i*a*o),l=this.readSync(t.dataId),d=[n&&s>1?i-1:i,n&&u>1?a-1:a],h=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=d[0]/h[0],m=d[1]/h[1],g=1/p,b=1/m,y=2*Math.ceil(g)+2,v=2*Math.ceil(b)+2;for(let f=0;f<r;f++){const r=f*e.strides[0];for(let f=0;f<i;f++){const d=r+f*e.strides[1],h=Math.floor(f*g),x=Math.floor(h-y/2);for(let g=0;g<a;g++){const h=d+g*e.strides[2],w=Math.floor(g*b),O=Math.floor(w-v/2);for(let e=0;e<o;e++){let o=0;for(let c=0;c<y;c++){const d=c+x;if(d<0||d>=s)continue;const h=r+d*t.strides[1],b=d*p,y=Math.min(i-1,n?Math.round(b):Math.floor(b));if(f===y)for(let r=0;r<v;r++){const i=r+O;if(i<0||i>=u)continue;const s=h+i*t.strides[2],c=i*m,f=Math.min(a-1,n?Math.round(c):Math.floor(c));g===f&&(o+=l[s+e])}}c[h+e]=o}}}}return f["Nh"](c,e.shape,e.dtype)}localResponseNormalization4D(t,e,n,r,i){od(t,"localResponseNormalization4D");const a=t.shape[3],o=a-1,s=this.readSync(t.dataId),u=t.size,c=new Float32Array(u);function l(t){const n=t%a;let r=t-n+Math.max(0,n-e);const i=t-n+Math.min(n+e,o);let u=0;for(;r<=i;r++){const t=s[r];u+=t*t}return u}for(let f=0;f<u;f++){const t=l(f),e=s[f]*Math.pow(n+r*t,-i);c[f]=e}return f["Nh"](c,t.shape)}LRNGrad(t,e,n,r,i,a,o){od(t,"LRNGrad");const s=t.shape[3],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=this.readSync(n.dataId),d=new Float32Array(t.size),h=t.size;for(let f=0;f<h;f++){const t=f%s,e=f-t+Math.max(0,t-r),n=f-t+Math.min(s,t+r+1);let h=0;for(let r=e;r<n;r++)h+=Math.pow(c[r],2);h=a*h+i;for(let r=e;r<n;r++){let t=-2*a*o*c[r]*l[f]/h;f===r&&(t+=Math.pow(h,-o)),t*=u[f],d[r]+=t}}return f["Nh"](d,t.shape)}multinomial(t,e,n,r){od(t,"multinomial");const i=e?t:f["ph"](t),a=i.shape[0],o=i.shape[1],s=f["ni"]([a,n],"int32"),u=this.readSync(s.dataId),c=this.readSync(i.dataId);for(let l=0;l<a;++l){const t=l*o,e=new Float32Array(o-1);e[0]=c[t];for(let n=1;n<e.length;++n)e[n]=e[n-1]+c[t+n];const i=Cf["alea"](r.toString()),a=l*n;for(let r=0;r<n;++r){const t=i();u[a+r]=e.length;for(let n=0;n<e.length;n++)if(t<e[n]){u[a+r]=n;break}}}return s}oneHot(t,e,n,r){od(t,"oneHot");const i=new Float32Array(t.size*e);i.fill(r);const a=this.readSync(t.dataId);for(let o=0;o<t.size;++o)a[o]>=0&&a[o]<e&&(i[o*e+a[o]]=n);return f["Lh"](i,[t.size,e],"int32")}nonMaxSuppression(t,e,n,r,i){od(t,"nonMaxSuppression");const a=this.readSync(t.dataId),o=this.readSync(e.dataId);return sd(a,o,n,r,i)}depthToSpace(t,e,n){f["fi"].assert("NHWC"===n,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n),f["fi"].assert(e>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+e);const r=t.shape[0],i=t.shape[1],a=t.shape[2],o=t.shape[3],s=i*e,u=a*e,c=o/(e*e),l=this.readSync(t.dataId),d=new Float32Array(r*s*u*c);let h=0;for(let f=0;f<r;++f)for(let t=0;t<s;++t){const n=Math.floor(t/e),r=t%e;for(let t=0;t<u;++t){const s=Math.floor(t/e),u=t%e,p=(r*e+u)*c;for(let t=0;t<c;++t){const e=t+p,r=e+o*(s+a*(n+i*f));d[h++]=l[r]}}}return f["Nh"](d,[r,s,u,c])}broadcastedBinaryOp(t,e,n,r){const i=f["Dd"].assertAndGetBroadcastShape(t.shape,e.shape),a=f["Nd"](i,n),o=this.readSync(t.dataId),s=this.readSync(e.dataId),u=f["Dd"].getBroadcastDims(t.shape,i),c=f["Dd"].getBroadcastDims(e.shape,i),l=a.values;if(u.length+c.length===0)for(let f=0;f<l.length;++f)l[f]=r(o[f%o.length],s[f%s.length]);else{const n=this.bufferSync(t),i=this.bufferSync(e);for(let f=0;f<l.length;++f){const d=a.indexToLoc(f),h=d.slice(-t.rank);u.forEach(t=>h[t]=0);const p=n.locToIndex(h),m=d.slice(-e.rank);c.forEach(t=>m[t]=0);const g=i.locToIndex(m);l[f]=r(o[p],s[g])}}return a.toTensor()}split(t,e,n){return ud(t,e,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}cropAndResize(t,e,n,r,i,a){const[o,s,u,c]=t.shape,l=e.shape[0],[d,h]=r,p=f["Nd"]([l,d,h,c],"float32"),m=this.readSync(e.dataId),g=this.readSync(n.dataId),b=this.readSync(t.dataId),y=t.strides,v=p.strides;for(let f=0;f<l;f++){const t=4*f,e=m[t],n=m[t+1],r=m[t+2],l=m[t+3],x=g[f];if(x>=o)continue;const w=d>1?(r-e)*(s-1)/(d-1):0,O=h>1?(l-n)*(u-1)/(h-1):0;for(let o=0;o<d;o++){const t=d>1?e*(s-1)+o*w:.5*(e+r)*(s-1);if(t<0||t>s-1)for(let e=0;e<h;e++)for(let t=0;t<c;t++){const n=t+e*v[2]+o*v[1]+f*v[0];p.values[n]=a}else if("bilinear"===i){const e=Math.floor(t),r=Math.ceil(t),i=t-e;for(let t=0;t<h;t++){const s=h>1?n*(u-1)+t*O:.5*(n+l)*(u-1);if(s<0||s>u-1){for(let e=0;e<c;e++){const n=e+t*v[2]+o*v[1]+f*v[0];p.values[n]=a}continue}const d=Math.floor(s),m=Math.ceil(s),g=s-d;for(let n=0;n<c;n++){let a=n+d*y[2]+e*y[1]+x*y[0];const s=b[a];a=n+m*y[2]+e*y[1]+x*y[0];const u=b[a];a=n+d*y[2]+r*y[1]+x*y[0];const c=b[a];a=n+m*y[2]+r*y[1]+x*y[0];const l=b[a],h=s+(u-s)*g,w=c+(l-c)*g;a=n+t*v[2]+o*v[1]+f*v[0],p.values[a]=h+(w-h)*i}}}else for(let e=0;e<h;++e){const r=h>1?n*(u-1)+e*O:.5*(n+l)*(u-1);if(r<0||r>u-1){for(let t=0;t<c;t++){const n=t+e*v[2]+o*v[1]+f*v[0];p.values[n]=a}continue}const i=Math.round(r),s=Math.round(t);for(let t=0;t<c;t++){const n=t+i*y[2]+s*y[1]+x*y[0],r=t+e*v[2]+o*v[1]+f*v[0];p.values[r]=b[n]}}}}return p.toTensor()}sparseToDense(t,e,n,r){const{sliceRank:i,numUpdates:a,sliceSize:o,strides:s,outputSize:u}=f["Dd"].calculateShapes(e,t,n),c=!1;return this.scatter(t,e,n,u,o,a,i,s,r,c)}gatherND(t,e){const n=e.shape,r=n[n.length-1],[i,a,o,s]=f["Dd"].prepareAndValidate(t,e);if(0===a)return f["Jh"]([],i,t.dtype);const u=new f["bd"]([a,o],t.dtype),c=this.readSync(e.dataId),l=this.readSync(t.dataId);for(let f=0;f<a;f++){const e=[];let n=0;for(let t=0;t<r;t++){const i=c[f*r+t];n+=i*s[t],e.push(i)}if(n<0||n>=t.size/o)throw new Error(`Invalid indices: ${e} does not index into ${t.shape}`);for(let t=0;t<o;t++)u.values[f*o+t]=l[n*o+t]}return u.toTensor().reshape(i)}scatterND(t,e,n){const{sliceRank:r,numUpdates:i,sliceSize:a,strides:o,outputSize:s}=f["Dd"].calculateShapes(e,t,n),u=f["Vg"](0),c=!0;return this.scatter(t,e,n,s,a,i,r,o,u,c)}fill(t,e,n){n=n||f["fi"].inferDtype(e);const r=f["fi"].getArrayFromDType(n,f["fi"].sizeFromShape(t));return r.fill(e),Object(f["Be"])().makeTensor(r,t,n,this)}onesLike(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)}zerosLike(t){const e=f["fi"].getArrayFromDType(t.dtype,f["fi"].sizeFromShape(t.shape));return this.makeOutput(e,t.shape,t.dtype)}linspace(t,e,n){return f["Dd"].linspaceImpl(t,e,n)}scatter(t,e,n,r,i,a,o,s,u,c){const l=[r/i,i],d=this.readSync(t.dataId),h=this.readSync(e.dataId);if(0===r)return f["Jh"]([],n,e.dtype);const p=new f["bd"](l,e.dtype);p.values.fill(this.readSync(u.dataId)[0]);for(let f=0;f<a;f++){const t=[];let a=0;for(let e=0;e<o;e++){const n=d[f*o+e];t.push(n),a+=n*s[e]}if(a<0||a>=r/i)throw new Error(`Invalid indices: ${t} does not index into ${n}`);for(let n=0;n<i;n++)c?p.values[a*i+n]+=h[f*i+n]:p.values[a*i+n]=0===e.rank?h[0]:h[f*i+n]}return p.toTensor().reshape(n)}}
/** @license See the LICENSE file. */const pd="2.6.0";
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function md(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}Object(f["Gg"])("cpu",()=>new hd,1);const gd=t=>{const{x:e}=t.inputs,n=t.backend;let r=new Float32Array(f["fi"].sizeFromShape(e.shape));if("complex64"!==e.dtype){const t=n.data.get(e.dataId).values;r=md(t)}else{const t=n.data.get(e.dataId),i=t.complexTensorInfos.real,a=t.complexTensorInfos.imag,o=n.data.get(i.dataId).values,s=n.data.get(a.dataId).values;for(let e=0;e<o.length;e++){const t=o[e],n=s[e];r[e]=Math.hypot(t,n)}}return n.makeOutput(r,e.shape,"float32")},bd={kernelName:f["a"],backendName:"cpu",kernelFunc:gd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function yd(t,e,n){return({inputs:r,attrs:i,backend:a})=>{const{x:o}=r;if(od(o,t),"string"===o.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const s=a,u=s.data.get(o.dataId).values,c=f["fi"].sizeFromShape(o.shape),l=n||o.dtype,d=f["fi"].getArrayFromDType(l,c);for(let t=0;t<c;++t)d[t]=e(u[t],i);return s.makeTensorInfo(o.shape,l,d)}}function vd(t,e,n){return({inputs:r,attrs:i,backend:a})=>{const{x:o}=r;if(od(o,t),"string"===o.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const s=a,u=s.data.get(o.dataId).values,c=n||o.dtype,l=e(u,c,i);return s.makeTensorInfo(o.shape,c,l)}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xd=yd(f["b"],t=>Math.acos(t)),wd={kernelName:f["b"],backendName:"cpu",kernelFunc:xd},Od=yd(f["c"],t=>Math.acosh(t)),_d={kernelName:f["c"],backendName:"cpu",kernelFunc:Od};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Ad(t){return(e,n,r,i,a)=>{const o=f["Dd"].assertAndGetBroadcastShape(e,n),s=o.length,u=f["fi"].computeStrides(o),c=f["fi"].sizeFromShape(o),l=f["fi"].getTypedArrayFromDType(a,c),d=e.length,h=n.length,p=f["fi"].computeStrides(e),m=f["fi"].computeStrides(n),g=f["Dd"].getBroadcastDims(e,o),b=f["Dd"].getBroadcastDims(n,o);if(g.length+b.length===0)for(let f=0;f<l.length;++f)l[f]=t(r[f%r.length],i[f%i.length]);else for(let y=0;y<l.length;++y){const e=f["fi"].indexToLoc(y,s,u),n=e.slice(-d);g.forEach(t=>n[t]=0);const a=f["fi"].locToIndex(n,d,p),o=e.slice(-h);b.forEach(t=>o[t]=0);const c=f["fi"].locToIndex(o,h,m);l[y]=t(r[a],i[c])}return[l,o]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jd(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(s.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",o)},s}const kd={kernelName:f["C"],backendName:"cpu",kernelFunc:jd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cd(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Ed={kernelName:f["ub"],backendName:"cpu",kernelFunc:Cd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sd(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const Dd={kernelName:f["pc"],backendName:"cpu",kernelFunc:Sd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fd(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if("complex64"===a){if("complex64"===i.dtype)return Cd({inputs:{x:i},backend:n});const t=f["ni"](i.shape),e=Fd({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=jd({inputs:{real:e,imag:t},backend:n});return t.dispose(),n.disposeIntermediateTensorInfo(e),r}if("complex64"===i.dtype){const t=Sd({inputs:{input:i},backend:n}),e=Fd({inputs:{x:t},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(t),e}if(!f["fi"].hasEncodingLoss(i.dtype,a)){const t=Cd({inputs:{x:i},backend:n});return{dataId:t.dataId,shape:t.shape,dtype:a}}if("int32"===a){const t=n.data.get(i.dataId).values,e=Int32Array.from(t);return n.makeTensorInfo(i.shape,"int32",e)}if("bool"===a){const t=n.data.get(i.dataId).values,e=f["fi"].toTypedArray([0],i.dtype),[r,a]=Ad((t,e)=>t!==e?1:0)(i.shape,[],t,e,"bool");return n.makeTensorInfo(a,"bool",r)}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}const Nd={kernelName:f["z"],backendName:"cpu",kernelFunc:Fd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Td(t,e,n,r){return null==n?({inputs:n,backend:i})=>{const{a:a,b:o}=n,s=i;od([a,o],t);const u=s.data.get(a.dataId).values,c=s.data.get(o.dataId).values,l=r||a.dtype,[f,d]=e(a.shape,o.shape,u,c,l);return s.makeTensorInfo(d,l,f)}:({inputs:t,backend:i})=>{const{a:a,b:o}=t,s=i;if("complex64"===a.dtype||"complex64"===o.dtype){const t=Fd({inputs:{x:a},backend:s,attrs:{dtype:"complex64"}}),e=s.data.get(t.dataId),r=e.complexTensorInfos.real,i=e.complexTensorInfos.imag,u=s.data.get(r.dataId).values,c=s.data.get(i.dataId).values,l=Fd({inputs:{x:o},backend:s,attrs:{dtype:"complex64"}}),f=s.data.get(l.dataId),d=f.complexTensorInfos.real,h=f.complexTensorInfos.imag,p=s.data.get(d.dataId).values,m=s.data.get(h.dataId).values,[g,b,y]=n(a.shape,o.shape,u,c,p,m),v=s.makeTensorInfo(y,"float32",g),x=s.makeTensorInfo(y,"float32",b),w=jd({inputs:{real:v,imag:x},backend:s});return s.disposeIntermediateTensorInfo(t),s.disposeIntermediateTensorInfo(l),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(x),w}{const t=s.data.get(a.dataId).values,n=s.data.get(o.dataId).values,i=r||a.dtype,[u,c]=e(a.shape,o.shape,t,n,i);return s.makeTensorInfo(c,i,u)}}}function Md(t){return(e,n,r,i,a,o)=>{const s=f["Dd"].assertAndGetBroadcastShape(e,n),u=f["fi"].sizeFromShape(s),c=s.length,l=f["fi"].computeStrides(s),d=f["fi"].getTypedArrayFromDType("float32",u),h=f["fi"].getTypedArrayFromDType("float32",u),p=f["Dd"].getBroadcastDims(e,s),m=f["Dd"].getBroadcastDims(n,s),g=f["Dd"].mergeRealAndImagArrays(r,i),b=f["Dd"].mergeRealAndImagArrays(a,o),y=e.length,v=f["fi"].computeStrides(e),x=n.length,w=f["fi"].computeStrides(n);if(p.length+m.length===0)for(let f=0;f<d.length;f++){const e=f%g.length,n=f%b.length,r=t(g[2*e],g[2*e+1],b[2*n],b[2*n+1]);d[f]=r.real,h[f]=r.imag}else for(let O=0;O<d.length;O++){const e=f["fi"].indexToLoc(O,c,l),n=e.slice(-y);p.forEach(t=>n[t]=0);const r=f["fi"].locToIndex(n,y,v),i=e.slice(-x);m.forEach(t=>i[t]=0);const a=f["fi"].locToIndex(i,x,w),o=t(g[2*r],g[2*r+1],b[2*a],b[2*a+1]);d[O]=o.real,h[O]=o.imag}return[d,h,s]}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Id=Ad((t,e)=>t+e),Rd=Md((t,e,n,r)=>({real:t+n,imag:e+r})),$d=Td(f["h"],Id,Rd),Bd={kernelName:f["h"],backendName:"cpu",kernelFunc:$d},zd=yd(f["n"],t=>Math.asin(t)),Ld={kernelName:f["n"],backendName:"cpu",kernelFunc:zd},Pd=yd(f["o"],t=>Math.asinh(t)),Ud={kernelName:f["o"],backendName:"cpu",kernelFunc:Pd},Wd=yd(f["p"],t=>Math.atan(t)),qd={kernelName:f["p"],backendName:"cpu",kernelFunc:Wd},Vd=yd(f["r"],t=>Math.atanh(t)),Gd={kernelName:f["r"],backendName:"cpu",kernelFunc:Vd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Hd(t,e,n,r,i,a){const o=i.strideHeight,s=i.strideWidth,u=i.dilationHeight,c=i.dilationWidth,l=i.effectiveFilterHeight,d=i.effectiveFilterWidth,h=i.padInfo.top,p=i.padInfo.left,m="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Object(f["Nd"])(i.outShape,n),b=g.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],x=i.outShape[3];for(let f=0;f<i.batchSize;++f){const e=f*y,n=f*r[0];for(let f=0;f<i.inChannels;++f)for(let g=0;g<i.outHeight;++g){const y=g*o-h,w=Math.max(0,y),O=Math.min(i.inHeight,l+y),_=e+g*v;for(let e=0;e<i.outWidth;++e){const o=e*s-p,l=Math.max(0,o),h=Math.min(i.inWidth,d+o);let g=m,y=0,v=0;for(let e=w;e<O;e+=u){const i=n+e*r[1];for(let e=l;e<h;e+=c){const n=i+e*r[2],o=t[n+f];"max"===a&&o>g?g=o:"avg"===a&&(y+=o,v++)}if(isNaN(g))break}const A=_+e*x+f;b[A]="avg"===a?y/v:g}}}return g}function Xd(t,e,n,r,i=!1,a=!1){const o=Object(f["Nd"])(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,m=r.padInfo.left,g=Object(f["Nd"])(e,n,t);for(let f=0;f<r.batchSize;++f)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.outHeight;++e){const n=e*s-p;let b=n;while(b<0)b+=c;const y=Math.min(r.inHeight,d+n);for(let s=0;s<r.outWidth;++s){const d=s*u-m;let p=d;while(p<0)p+=l;const v=Math.min(r.inWidth,h+d);let x=Number.NEGATIVE_INFINITY,w=-1;for(let e=b;e<y;e+=c){const o=e-n;for(let n=p;n<v;n+=l){const s=n-d,u=g.get(f,e,n,t);u>x&&(x=u,w=i?a?((f*r.inHeight+e)*r.inWidth+n)*r.inChannels+t:(e*r.inWidth+n)*r.inChannels+t:o*h+s)}}o.set(w,f,e,s,t)}}return o}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yd(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;od(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,c=1;f["fi"].assert(f["Dd"].eitherStridesOrDilationsAreOne(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const l=f["Dd"].computePool2DInfo(i.shape,a,o,c,s,u);let d;if(1===l.filterWidth&&1===l.filterHeight&&f["fi"].arraysEqual(l.inShape,l.outShape))d=Cd({inputs:{x:i},backend:n});else{const t=n.data.get(i.dataId).values,e=f["fi"].computeStrides(i.shape),r=Hd(t,i.shape,i.dtype,e,l,"avg");d=n.makeTensorInfo(l.outShape,i.dtype,r.values)}return d}const Kd={kernelName:f["s"],backendName:"cpu",kernelFunc:Yd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jd(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;od([i,a],"avgPoolBackprop");const{filterSize:s,strides:u,pad:c}=r,l=f["Dd"].computePool2DInfo(o.shape,s,u,1,c),d=l.strideHeight,h=l.strideWidth,p=l.filterHeight,m=l.filterWidth,g=l.dilationHeight,b=l.dilationWidth,y=l.effectiveFilterHeight,v=l.effectiveFilterWidth,x=v-1-l.padInfo.left,w=y-1-l.padInfo.top,O=Object(f["Nd"])(o.shape,"float32"),_=1/(p*m),A=n.data.get(i.dataId).values,j=Object(f["Nd"])(i.shape,"float32",A);for(let f=0;f<l.batchSize;++f)for(let t=0;t<l.inChannels;++t)for(let e=0;e<l.inHeight;++e)for(let n=0;n<l.inWidth;++n){const r=e-w,i=n-x;let a=0;for(let e=0;e<y;e+=g){const n=(r+e)/d;if(!(n<0||n>=l.outHeight||Math.floor(n)!==n))for(let e=0;e<v;e+=b){const r=(i+e)/h;if(r<0||r>=l.outWidth||Math.floor(r)!==r)continue;const o=j.get(f,n,r,t);a+=o}}O.set(a*_,f,e,n,t)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const Zd={kernelName:f["v"],backendName:"cpu",kernelFunc:Jd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qd(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:a,offset:o,mean:s,variance:u}=e;f["fi"].assert(s.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),f["fi"].assert(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),f["fi"].assert(null==a||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),od([i,s,u,a,o],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);const l=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(u.dataId).values,p=a?n.data.get(a.dataId).values:new Float32Array([1]),m=o?n.data.get(o.dataId).values:new Float32Array([0]),g=new Float32Array(l.length),b=m.length,y=p.length,v=h.length,x=d.length;let w=0,O=0,_=0,A=0;for(let f=0;f<l.length;++f)g[f]=m[w++]+(l[f]-d[O++])*p[_++]/Math.sqrt(h[A++]+c),w>=b&&(w=0),O>=x&&(O=0),_>=y&&(_=0),A>=v&&(A=0);return n.makeTensorInfo(i.shape,i.dtype,g)}const th={kernelName:f["mb"],backendName:"cpu",kernelFunc:Qd};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eh(t){return(e,n,r)=>{const i=f["fi"].getTypedArrayFromDType(n,e.length);for(let a=0;a<e.length;++a)i[a]=t(e[a],r);return i}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nh=eh(t=>Math.ceil(t)),rh=vd(f["A"],nh),ih={kernelName:f["A"],backendName:"cpu",kernelFunc:rh},ah=yd(f["B"],(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),oh={kernelName:f["B"],backendName:"cpu",kernelFunc:ah};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sh(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const uh={kernelName:f["vb"],backendName:"cpu",kernelFunc:sh};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ch(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=f["fi"].sizeFromShape(i.shape),s=f["fi"].inferFromImplicitShape(a,o),u=f["fi"].sizeFromShape(s);f["fi"].assert(o===u,()=>`The new shape (${s}) has ${u} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(null!=c.complexTensorInfos){const t=c.complexTensorInfos.real,e=c.complexTensorInfos.imag;t.shape=s,e.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const lh={kernelName:f["uc"],backendName:"cpu",kernelFunc:ch};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fh(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=f["fi"].parseAxisParam(i,e[0].shape)[0];let o=f["Dd"].computeOutShape(e.map(t=>t.shape),a);if(0===f["fi"].sizeFromShape(o))return n.makeTensorInfo(o,e[0].dtype,[]);const s=e.filter(t=>f["fi"].sizeFromShape(t.shape)>0);if(1===s.length)return s[0];const u=s.map(t=>t.shape);if(f["Dd"].assertParamsConsistent(u,a),"complex64"===s[0].dtype){const t=s.map(t=>Sd({inputs:{input:t},backend:n})),e=s.map(t=>sh({inputs:{input:t},backend:n})),r=fh({inputs:t,backend:n,attrs:{axis:i}}),a=fh({inputs:e,backend:n,attrs:{axis:i}}),o=jd({inputs:{real:r,imag:a},backend:n});return t.forEach(t=>n.disposeIntermediateTensorInfo(t)),e.forEach(t=>n.disposeIntermediateTensorInfo(t)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),o}const c=s.map(t=>{const e=f["fi"].sizeFromShape(t.shape.slice(a)),r=[-1,e];return ch({inputs:{x:t},backend:n,attrs:{shape:r}})});o=f["Dd"].computeOutShape(c.map(t=>t.shape),1);const l=f["fi"].getTypedArrayFromDType(s[0].dtype,f["fi"].sizeFromShape(o));if(1===c[0].shape[0]){let t=0;c.forEach(e=>{const r=n.data.get(e.dataId).values,i=f["fi"].sizeFromShape(e.shape);l.set(r,t),t+=i})}else{let t=0;c.forEach(e=>{const r=n.data.get(e.dataId).values;let i=0;for(let n=0;n<e.shape[0];++n){const a=n*o[1]+t;for(let t=0;t<e.shape[1];++t)l[a+t]=r[i++]}t+=e.shape[1]})}const d=f["Dd"].computeOutShape(s.map(t=>t.shape),a),h=n.makeTensorInfo(d,e[0].dtype,l);return c.forEach(t=>n.disposeIntermediateTensorInfo(t)),h}const dh={kernelName:f["D"],backendName:"cpu",kernelFunc:fh},hh=yd(f["K"],t=>Math.cos(t)),ph={kernelName:f["K"],backendName:"cpu",kernelFunc:hh},mh=yd(f["L"],t=>Math.cosh(t)),gh={kernelName:f["L"],backendName:"cpu",kernelFunc:mh},bh={kernelName:f["U"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:a,pad:o,dilations:s}=n,u=e,c=u.data.get(r.dataId).values,l=r.shape.length,d=u.data.get(i.dataId).values,h=i.shape.length,{batchSize:p,inHeight:m,inWidth:g,inChannels:b,outHeight:y,outWidth:v,padInfo:x,strideHeight:w,strideWidth:O,filterHeight:_,filterWidth:A,dilationHeight:j,dilationWidth:k,outShape:C}=f["Dd"].computeDilation2DInfo(r.shape,i.shape,a,o,"NHWC",s),E=f["fi"].sizeFromShape(C),S=C.length,D=f["fi"].getArrayFromDType(r.dtype,E);for(let N=0;N<p;++N)for(let t=0;t<y;++t){const e=t*w-x.top;for(let n=0;n<v;++n){const a=n*O-x.left;for(let o=0;o<b;++o){let s=Number.MIN_SAFE_INTEGER;for(let t=0;t<_;++t){const n=e+t*j;if(n>=0&&n<m)for(let e=0;e<A;++e){const u=a+e*k;if(u>=0&&u<g){const a=f["fi"].locToIndex([N,n,u,o],l,f["fi"].computeStrides(r.shape)),p=f["fi"].locToIndex([t,e,o],h,f["fi"].computeStrides(i.shape)),m=c[a]+d[p];m>s&&(s=m)}}}const u=f["fi"].locToIndex([N,t,n,o],S,f["fi"].computeStrides(C));D[u]=s}}}const F=u.write(f["fi"].toTypedArray(D,r.dtype),C,r.dtype);return{dataId:F,shape:C,dtype:r.dtype}}},yh={kernelName:f["V"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:u}=n,c=e,l=f["fi"].toNestedArray(r.shape,c.data.get(r.dataId).values),d=f["fi"].toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:b,outWidth:y,padInfo:v,strideHeight:x,strideWidth:w,filterHeight:O,filterWidth:_,dilationHeight:A,dilationWidth:j,outShape:k}=f["Dd"].computeDilation2DInfo(r.shape,i.shape,o,s,"NHWC",u);f["fi"].assert(a.rank===k.length,()=>`Error in ${f["V"]}, dy must have the same rank as output ${k.length}, but got `+a.rank);const C=f["fi"].toNestedArray(k,c.data.get(a.dataId).values),E=f["fi"].makeZerosNestedTypedArray(i.shape,i.dtype);for(let f=0;f<h;++f)for(let t=0;t<b;++t){const e=t*x-v.top;for(let n=0;n<y;++n){const r=n*w-v.left;for(let i=0;i<g;++i){let a=Number.MIN_SAFE_INTEGER,o=0,s=0;for(let t=0;t<O;++t){const n=e+t*A;if(n>=0&&n<p)for(let e=0;e<_;++e){const u=r+e*j;if(u>=0&&u<m){const r=l[f][n][u][i]+d[t][e][i];r>a&&(a=r,o=t,s=e)}}}E[o][s][i]+=C[f][t][n][i]}}}const S=c.write(f["fi"].toTypedArray(E,r.dtype),i.shape,i.dtype);return{dataId:S,shape:i.shape,dtype:i.dtype}}},vh={kernelName:f["W"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:u}=n,c=e,l=f["fi"].toNestedArray(r.shape,c.data.get(r.dataId).values),d=f["fi"].toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:b,outWidth:y,padInfo:v,strideHeight:x,strideWidth:w,filterHeight:O,filterWidth:_,dilationHeight:A,dilationWidth:j,outShape:k}=f["Dd"].computeDilation2DInfo(r.shape,i.shape,o,s,"NHWC",u);f["fi"].assert(a.rank===k.length,()=>`Error in ${f["W"]}, dy must have the same rank as output ${k.length}, but got `+a.rank);const C=f["fi"].toNestedArray(k,c.data.get(a.dataId).values),E=f["fi"].makeZerosNestedTypedArray(r.shape,r.dtype);for(let f=0;f<h;++f)for(let t=0;t<b;++t){const e=t*x-v.top;for(let n=0;n<y;++n){const r=n*w-v.left;for(let i=0;i<g;++i){let a=Number.MIN_SAFE_INTEGER,o=e<0?0:e,s=r<0?0:r;for(let t=0;t<O;++t){const n=e+t*A;if(n>=0&&n<p)for(let e=0;e<_;++e){const u=r+e*j;if(u>=0&&u<m){const r=l[f][n][u][i]+d[t][e][i];r>a&&(a=r,o=n,s=u)}}}E[f][o][s][i]+=C[f][t][n][i]}}}const S=c.write(f["fi"].toTypedArray(E,r.dtype),r.shape,r.dtype);return{dataId:S,shape:r.shape,dtype:r.dtype}}},xh=Ad((t,e)=>t/e),wh=Td(f["X"],xh),Oh={kernelName:f["X"],backendName:"cpu",kernelFunc:wh},_h=yd(f["Z"],t=>t>=0?t:Math.exp(t)-1),Ah={kernelName:f["Z"],backendName:"cpu",kernelFunc:_h},jh=f["Dd"].ERF_P,kh=f["Dd"].ERF_A1,Ch=f["Dd"].ERF_A2,Eh=f["Dd"].ERF_A3,Sh=f["Dd"].ERF_A4,Dh=f["Dd"].ERF_A5,Fh=yd(f["db"],t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+jh*n);return e*(1-((((Dh*r+Sh)*r+Eh)*r+Ch)*r+kh)*r*Math.exp(-n*n))}),Nh={kernelName:f["db"],backendName:"cpu",kernelFunc:Fh},Th=eh(t=>Math.exp(t)),Mh=vd(f["eb"],Th),Ih={kernelName:f["eb"],backendName:"cpu",kernelFunc:Mh},Rh=eh(t=>Math.expm1(t)),$h=vd(f["fb"],Rh),Bh={kernelName:f["fb"],backendName:"cpu",kernelFunc:$h},zh=Ad((t,e)=>t*e),Lh=Md((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),Ph=Td(f["Xb"],zh,Lh),Uh={kernelName:f["Xb"],backendName:"cpu",kernelFunc:Ph};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Wh(t,e,n,r,i){const a=f["oh"].isSliceContinous(r,e,n),o=f["fi"].sizeFromShape(n),s=f["fi"].computeStrides(r);if(a){const n=f["oh"].computeFlatOffset(e,s);return t.subarray(n,n+o)}const u=f["fi"].getTypedArrayFromDType(i,o);for(let c=0;c<o;++c){const i=n.length,a=f["fi"].computeStrides(n),o=f["fi"].indexToLoc(c,i,a),l=o.map((t,n)=>t+e[n]),d=f["fi"].locToIndex(l,r.length,s);u[c]=t[d]}return u}function qh(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:o}=r;od(i,"slice");const[s,u]=f["oh"].parseSliceParams(i,a,o);f["oh"].assertParamsValid(i,s,u);const c=n.data.get(i.dataId).values,l=Wh(c,s,u,i.shape,i.dtype);return n.makeTensorInfo(u,i.dtype,l)}const Vh={kernelName:f["Lc"],backendName:"cpu",kernelFunc:qh},Gh=Ad((t,e)=>t-e),Hh=Md((t,e,n,r)=>({real:t-n,imag:e-r})),Xh=Td(f["Wc"],Gh,Hh),Yh={kernelName:f["Wc"],backendName:"cpu",kernelFunc:Xh};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Kh(t,e,n){const r=t.shape,i=r[0],a=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,c=[i,a],l=f["fi"].sizeFromShape(c),d=f["fi"].getTypedArrayFromDType("float32",l),h=f["fi"].getTypedArrayFromDType("float32",l);for(let b=0;b<i;b++){const t=qh({inputs:{x:s},backend:n,attrs:{begin:[b,0],size:[1,a]}}),r=qh({inputs:{x:u},backend:n,attrs:{begin:[b,0],size:[1,a]}}),i=jd({inputs:{real:t,imag:r},backend:n}),{real:o,imag:c}=Jh(i,e,n),l=f["Dd"].mergeRealAndImagArrays(o,c);for(let e=0;e<a;e++){const t=f["Dd"].getComplexWithIndex(l,e);d[b*a+e]=t.real,h[b*a+e]=t.imag}n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i)}const p=n.makeTensorInfo(c,"float32",d),m=n.makeTensorInfo(c,"float32",h),g=jd({inputs:{real:p,imag:m},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}function Jh(t,e,n){const r=f["fi"].sizeFromShape(t.shape),i=n.data.get(t.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(Zh(r)){const i=Qh(a,o,r,e,n),s=[t.shape[0],t.shape[1]];if(e){const t=n.makeTensorInfo(s,"float32",i.real),e=n.makeTensorInfo(s,"float32",i.imag),a=n.makeTensorInfo([],"float32",f["fi"].createScalarValue(r,"float32")),o=Cd({inputs:{x:a},backend:n}),u=Oh.kernelFunc({inputs:{a:t,b:a},backend:n}),c=Oh.kernelFunc({inputs:{a:e,b:o},backend:n}),l=n.data.get(u.dataId).values,d=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),{real:l,imag:d}}return i}{const t=f["Dd"].mergeRealAndImagArrays(a,o),n=tp(t,r,e);return f["Dd"].splitRealAndImagArrays(n)}}function Zh(t){return 0===(t&t-1)}function Qh(t,e,n,r,i){if(1===n)return{real:t,imag:e};const a=f["Dd"].mergeRealAndImagArrays(t,e),o=n/2,s=f["Dd"].complexWithEvenIndex(a),u=s.real,c=s.imag,l=[u.length],d=i.makeTensorInfo(l,"float32",u),h=i.makeTensorInfo(l,"float32",c),p=jd({inputs:{real:d,imag:h},backend:i}),m=f["Dd"].complexWithOddIndex(a),g=m.real,b=m.imag,y=[g.length],v=i.makeTensorInfo(y,"float32",g),x=i.makeTensorInfo(y,"float32",b),w=jd({inputs:{real:v,imag:x},backend:i}),O=Qh(u,c,o,r,i),_=O.real,A=O.imag,j=[_.length],k=i.makeTensorInfo(j,"float32",_),C=i.makeTensorInfo(j,"float32",A),E=jd({inputs:{real:k,imag:C},backend:i}),S=Qh(g,b,o,r,i),D=S.real,F=S.imag,N=[D.length],T=i.makeTensorInfo(N,"float32",D),M=i.makeTensorInfo(N,"float32",F),I=jd({inputs:{real:T,imag:M},backend:i}),R=f["Dd"].exponents(n,r),$=[R.real.length],B=i.makeTensorInfo($,"float32",R.real),z=i.makeTensorInfo($,"float32",R.imag),L=jd({inputs:{real:B,imag:z},backend:i}),P=Ph({inputs:{a:L,b:I},backend:i}),U=$d({inputs:{a:E,b:P},backend:i}),W=Xh({inputs:{a:E,b:P},backend:i}),q=Sd({inputs:{input:U},backend:i}),V=Sd({inputs:{input:W},backend:i}),G=sh({inputs:{input:U},backend:i}),H=sh({inputs:{input:W},backend:i}),X=fh({inputs:[q,V],backend:i,attrs:{axis:0}}),Y=fh({inputs:[G,H],backend:i,attrs:{axis:0}}),K=i.data.get(X.dataId).values,J=i.data.get(Y.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(Y),{real:K,imag:J}}function tp(t,e,n){const r=new Float32Array(2*e);for(let i=0;i<e;i++){let a=0,o=0;for(let r=0;r<e;r++){const s=f["Dd"].exponent(i*r,e,n),u=f["Dd"].getComplexWithIndex(t,r);a+=u.real*s.real-u.imag*s.imag,o+=u.real*s.imag+u.imag*s.real}n&&(a/=e,o/=e),f["Dd"].assignToTypedArray(r,a,o,i)}return r}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ep(t){const{inputs:e,backend:n}=t,{input:r}=e,i=f["fi"].sizeFromShape(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=ch({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),u=Kh(s,!1,n),c=ch({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}const np={kernelName:f["gb"],backendName:"cpu",kernelFunc:ep},rp={kernelName:f["ib"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,a=f["fi"].getTypedArrayFromDType(r.dtype,f["fi"].sizeFromShape(r.shape)),[o,s,u,c]=r.shape,l=i.data.get(r.dataId).values;for(let f=0;f<o;f++){const t=f*u*s*c;for(let e=0;e<s;e++){const n=e*(u*c);for(let r=0;r<u;r++){const i=r*c;for(let s=0;s<c;s++){const f=[o,e,r,s],d=f[2],h=Math.round(u-d),p=t+n+i+s;let m=l[p];if(h>=0&&h<u){const e=h*c,r=t+n+e+s;m=l[r]}a[p]=m}}}}const d=i.write(a,r.shape,r.dtype);return{dataId:d,shape:r.shape,dtype:r.dtype}}},ip=eh(t=>Math.floor(t)),ap=vd(f["jb"],ip),op={kernelName:f["jb"],backendName:"cpu",kernelFunc:ap};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sp(t){const{inputs:e,backend:n}=t,{input:r}=e,i=f["fi"].sizeFromShape(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=ch({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),u=Kh(s,!0,n),c=ch({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}const up={kernelName:f["tb"],backendName:"cpu",kernelFunc:sp},cp=yd(f["wb"],t=>Number.isFinite(t)?1:0,"bool"),lp={kernelName:f["wb"],backendName:"cpu",kernelFunc:cp},fp=yd(f["xb"],t=>Math.abs(t)===1/0?1:0,"bool"),dp={kernelName:f["xb"],backendName:"cpu",kernelFunc:fp},hp=yd(f["yb"],t=>Number.isNaN(t)?1:0,"bool"),pp={kernelName:f["yb"],backendName:"cpu",kernelFunc:hp},mp=eh(t=>Math.log(t)),gp=vd(f["Fb"],mp),bp={kernelName:f["Fb"],backendName:"cpu",kernelFunc:gp},yp=yd(f["Gb"],t=>Math.log1p(t)),vp={kernelName:f["Gb"],backendName:"cpu",kernelFunc:yp},xp=yd(f["Jb"],t=>t?0:1,"bool"),wp={kernelName:f["Jb"],backendName:"cpu",kernelFunc:xp};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Op(t,e,n,r){const i=f["fi"].getTypedArrayFromDType(r,f["fi"].sizeFromShape(n));for(let a=0;a<i.length;++a){const n=a*e;let r=t[n];for(let i=0;i<e;++i){const e=t[n+i];e>r&&(r=e)}i[a]=r}return i}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _p(t,e,n,r,i){const a=e.length,o=f["fi"].sizeFromShape(e),s=f["fi"].computeStrides(e),u=f["fi"].computeStrides(i),c=f["fi"].getTypedArrayFromDType(n,f["fi"].sizeFromShape(i));for(let l=0;l<o;++l){const e=f["fi"].indexToLoc(l,a,s),n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=e[r[t]];const i=f["fi"].locToIndex(n,a,u);c[i]=t[l]}return c}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ap={kernelName:f["Lb"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{reductionIndices:i,keepDims:a}=e,o=n;let s=r.shape;const u=s.length,c=f["fi"].parseAxisParam(i,s);let l=c;const d=f["Dd"].getAxesPermutation(l,u);let h=o.data.get(r.dataId).values;if(null!=d){const t=new Array(u);for(let e=0;e<t.length;e++)t[e]=s[d[e]];h=_p(h,s,r.dtype,d,t),l=f["Dd"].getInnerMostAxes(l.length,u),s=t}od(r,"max"),f["Dd"].assertAxesAreInnerMostDims("max",l,u);const[p,m]=f["Dd"].computeOutAndReduceShapes(s,l),g=f["fi"].sizeFromShape(m),b=Op(h,g,p,r.dtype),y=o.write(b,p,r.dtype);let v=p;if(a){const t=f["Dd"].expandShapeToKeepDim(p,c);v=t}return{dataId:y,shape:v,dtype:r.dtype}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jp(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;od(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,c=1;f["fi"].assert(f["Dd"].eitherStridesOrDilationsAreOne(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const l=f["Dd"].computePool2DInfo(i.shape,a,o,c,s,u);let d;if(1===l.filterWidth&&1===l.filterHeight&&f["fi"].arraysEqual(l.inShape,l.outShape))d=Cd({inputs:{x:i},backend:n});else{const t=n.data.get(i.dataId).values,e=f["fi"].computeStrides(i.shape),r=Hd(t,i.shape,i.dtype,e,l,"max");d=n.makeTensorInfo(l.outShape,i.dtype,r.values)}return d}const kp={kernelName:f["Mb"],backendName:"cpu",kernelFunc:jp};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cp(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;od([a,o],"maxPoolBackprop");const{filterSize:u,strides:c,pad:l,dimRoundingMode:d}=r,h=f["Dd"].computePool2DInfo(s.shape,u,c,1,l,d),p=n.data.get(s.dataId).values,m=Object(f["Nd"])(h.outShape,s.dtype,Xd(p,s.shape,s.dtype,h).values),g=h.strideHeight,b=h.strideWidth,y=h.dilationHeight,v=h.dilationWidth,x=h.effectiveFilterHeight,w=h.effectiveFilterWidth,O=w-1-h.padInfo.left,_=x-1-h.padInfo.top,A=Object(f["Nd"])(s.shape,"float32"),j=n.data.get(i.dataId).values,k=Object(f["Nd"])(i.shape,"float32",j);for(let f=0;f<h.batchSize;++f)for(let t=0;t<h.inChannels;++t)for(let e=0;e<h.inHeight;++e)for(let n=0;n<h.inWidth;++n){const r=e-_,i=n-O;let a=0;for(let e=0;e<x;e+=y){const n=(r+e)/g;if(!(n<0||n>=h.outHeight||Math.floor(n)!==n))for(let r=0;r<w;r+=v){const o=(i+r)/b;if(o<0||o>=h.outWidth||Math.floor(o)!==o)continue;const s=x*w-1-m.get(f,n,o,t),u=e*w+r,c=s===u?1:0;if(0===c)continue;const l=k.get(f,n,o,t);a+=l*c}}A.set(a,f,e,n,t)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const Ep={kernelName:f["Pb"],backendName:"cpu",kernelFunc:Cp};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sp(t,e,n,r,i){const a=f["fi"].computeStrides(e),o=Hd(t,e,n,a,i,"max"),s=Xd(t,e,n,i,!0,r);return[o.values,s.values]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dp={kernelName:f["Qb"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,u=n;od(r,"MaxPoolWithArgmax");const c=u.data.get(r.dataId).values,l=f["Dd"].computePool2DInfo(r.shape,i,a,[1,1],o),[d,h]=Sp(c,r.shape,r.dtype,s,l),p=u.write(d,l.outShape,r.dtype),m=u.write(h,l.outShape,r.dtype);return[{dataId:p,shape:l.outShape,dtype:r.dtype},{dataId:m,shape:l.outShape,dtype:"int32"}]}},Fp=f["of"].nonMaxSuppressionV4Impl,Np={kernelName:f["ac"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{boxes:r,scores:i}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:s,padToMaxOutputSize:u}=n,c=e;od(r,"NonMaxSuppressionPadded");const l=c.data.get(r.dataId).values,f=c.data.get(i.dataId).values,{selectedIndices:d,validOutputs:h}=Fp(l,f,a,o,s,u);return[d,h]}},Tp=f["of"].nonMaxSuppressionV5Impl,Mp={kernelName:f["bc"],backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{boxes:r,scores:i}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:s,softNmsSigma:u}=n,c=e;od(r,"NonMaxSuppressionWithScore");const l=c.data.get(r.dataId).values,f=c.data.get(i.dataId).values,d=a,h=o,p=s,m=u,{selectedIndices:g,selectedScores:b}=Tp(l,f,d,h,p,m);return[g,b]}},Ip=Ad((t,e)=>t!==e?1:0),Rp=Td(f["cc"],Ip,null,"bool"),$p={kernelName:f["cc"],backendName:"cpu",kernelFunc:Rp};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Bp(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:o}=r;od(i,"pad");const s=a.map((t,e)=>t[0]+i.shape[e]+t[1]),u=a.map(t=>t[0]),c=n.data.get(i.dataId).values,l=f["fi"].sizeFromShape(i.shape),d=i.shape.length,h=f["fi"].computeStrides(i.shape),p=f["fi"].sizeFromShape(s),m=s.length,g=f["fi"].computeStrides(s),b=f["fi"].getTypedArrayFromDType(i.dtype,p);0!==o&&b.fill(o);for(let v=0;v<l;v++){const t=f["fi"].indexToLoc(v,d,h),e=t.map((t,e)=>t+u[e]),n=f["fi"].locToIndex(e,m,g);b[n]=c[v]}const y=n.write(b,s,i.dtype);return{dataId:y,shape:s,dtype:i.dtype}}const zp={kernelName:f["hc"],backendName:"cpu",kernelFunc:Bp},Lp=yd(f["qc"],t=>1/t),Pp={kernelName:f["qc"],backendName:"cpu",kernelFunc:Lp},Up={kernelName:f["Ac"],backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,u=f["fi"].getTypedArrayFromDType(r.dtype,f["fi"].sizeFromShape(r.shape)),[c,l,d,h]=r.shape,[p,m]=f["Dd"].getImageCenter(o,l,d),g=255,b=Math.sin(i),y=Math.cos(i),v=s.data.get(r.dataId).values;for(let f=0;f<c;f++){const t=f*d*l*h;for(let e=0;e<l;e++){const n=e*(d*h);for(let r=0;r<d;r++){const i=r*h;for(let o=0;o<h;o++){const s=[c,e,r,o],f=s[2],x=s[1];let w=(f-p)*y-(x-m)*b,O=(f-p)*b+(x-m)*y;w=Math.round(w+p),O=Math.round(O+m);let _=a;if("number"!==typeof a&&(_=3===o?g:a[o]),w>=0&&w<d&&O>=0&&O<l){const e=O*(d*h),n=w*h,r=t+e+n+o;_=v[r]}const A=t+n+i+o;u[A]=_}}}}const x=s.write(u,r.shape,r.dtype);return{dataId:x,shape:r.shape,dtype:r.dtype}}},Wp=yd(f["Bc"],t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),qp={kernelName:f["Bc"],backendName:"cpu",kernelFunc:Wp},Vp=eh(t=>1/Math.sqrt(t)),Gp=vd(f["Cc"],Vp),Hp={kernelName:f["Cc"],backendName:"cpu",kernelFunc:Gp},Xp=f["Dd"].SELU_SCALEALPHA,Yp=f["Dd"].SELU_SCALE,Kp=yd(f["Gc"],t=>t>=0?Yp*t:Xp*(Math.exp(t)-1)),Jp={kernelName:f["Gc"],backendName:"cpu",kernelFunc:Kp},Zp=yd(f["Hc"],t=>1/(1+Math.exp(-t))),Qp={kernelName:f["Hc"],backendName:"cpu",kernelFunc:Zp},tm=yd(f["Ic"],t=>t<0?-1:t>0?1:0),em={kernelName:f["Ic"],backendName:"cpu",kernelFunc:tm},nm=yd(f["Jc"],t=>Math.sin(t)),rm={kernelName:f["Jc"],backendName:"cpu",kernelFunc:nm},im=yd(f["Kc"],t=>Math.sinh(t)),am={kernelName:f["Kc"],backendName:"cpu",kernelFunc:im},om=1.1920928955078125e-7,sm=Math.log(om)+2,um=yd(f["Nc"],t=>{const e=t>-sm,n=t<sm,r=Math.exp(t);let i;return i=n?r:e?t:Math.log(1+r),i}),cm={kernelName:f["Nc"],backendName:"cpu",kernelFunc:um};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function lm(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:a}=n;od(i,"transpose");const o=i.shape.length,s=new Array(o);for(let f=0;f<s.length;f++)s[f]=i.shape[a[f]];const u=r.data.get(i.dataId).values,c=_p(u,i.shape,i.dtype,a,s),l=r.write(c,s,i.dtype);return{dataId:l,shape:s,dtype:i.dtype}}const fm={kernelName:f["ed"],backendName:"cpu",kernelFunc:lm};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dm(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:o}=r;od([i],"spaceToBatchND");const s=f["fi"].sizeFromShape(a),u=[[0,0]];u.push(...o);for(let f=1+a.length;f<i.shape.length;++f)u.push([0,0]);const c=zp.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:u,constantValue:0}}),l=f["Dd"].getReshaped(c.shape,a,s,!1),d=f["Dd"].getPermuted(l.length,a.length,!1),h=f["Dd"].getReshapedPermuted(c.shape,a,s,!1),p={x:c},m={shape:l},g=ch({inputs:p,backend:n,attrs:m}),b={x:g},y={perm:d},v=lm({inputs:b,backend:n,attrs:y}),x={x:v},w={shape:h},O=ch({inputs:x,backend:n,attrs:w});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),O}const hm={kernelName:f["Oc"],backendName:"cpu",kernelFunc:dm},pm=yd(f["Rc"],t=>Math.sqrt(t)),mm={kernelName:f["Rc"],backendName:"cpu",kernelFunc:pm},gm={kernelName:f["Sc"],backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;od(n,"square");const i=r.data.get(n.dataId).values,a=new Float32Array(i.length);for(let s=0;s<i.length;++s){const t=i[s];a[s]=t*t}const o=r.write(a,n.shape,n.dtype);return{dataId:o,shape:n.shape,dtype:n.dtype}}},bm=Ad((t,e)=>{const n=t-e;return n*n}),ym=Td(f["Tc"],bm),vm={kernelName:f["Tc"],backendName:"cpu",kernelFunc:ym},xm=yd(f["Uc"],(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),wm={kernelName:f["Uc"],backendName:"cpu",kernelFunc:xm},Om=yd(f["Yc"],t=>Math.tan(t)),_m={kernelName:f["Yc"],backendName:"cpu",kernelFunc:Om},Am=yd(f["Zc"],t=>Math.tanh(t)),jm={kernelName:f["Zc"],backendName:"cpu",kernelFunc:Am};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function km(t,e,n,r){const i=f["fi"].parseAxisParam(e,n)[0],a=[1,n[0],1];for(let f=0;f<i;f++)a[0]*=n[f];a[1]=n[i];for(let f=i+1;f<n.length;f++)a[2]*=n[f];const o={},s=new Int32Array(n[i]),u=new f["bd"](a,r,t),c=[],l=1===a[0]&&1===a[2];for(let f=0;f<n[i];f++){let e;if(l)e=t[f].toString();else{const t=[];for(let e=0;e<a[0];e++)for(let n=0;n<a[2];n++)t.push(u.get(e,f,n));e=t.join(",")}if(void 0!==o[e])s[f]=o[e];else{const t=Object.keys(o).length;o[e]=t,s[f]=t,c.push(f)}}const d=a.slice();d[1]=Object.keys(o).length;const h=new f["bd"](d,r);c.forEach((t,e)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)h.set(u.get(n,t,r),n,e,r)});const p=n.slice();return p[i]=d[1],{outputValues:h.values,outputShape:p,indices:s}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cm(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;od(a,"unique");const o=r.data.get(a.dataId).values,{outputValues:s,outputShape:u,indices:c}=km(o,i,a.shape,a.dtype);return[r.makeTensorInfo(u,a.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}const Em={kernelName:f["fd"],backendName:"cpu",kernelFunc:Cm},Sm=[bd,wd,_d,Bd,Ld,Ud,qd,Gd,Kd,Zd,th,Nd,ih,oh,kd,dh,ph,gh,bh,vh,yh,Oh,Ah,Nh,Ih,Bh,np,rp,op,Ed,up,uh,lp,dp,pp,bp,vp,wp,kp,Ep,Dp,Ap,Uh,Np,Mp,$p,zp,Dd,Pp,lh,Up,qp,Hp,Jp,Qp,em,rm,am,Vh,cm,hm,mm,gm,vm,wm,Yh,_m,jm,fm,Em];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */for(const v_ of Sm)Object(f["Ig"])(v_);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dm={},Fm={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Nm(t,e){Dm[t]=e}function Tm(t){if(!(t in Dm)){const e=Im(t);if(null===e)return console.log("Could not get context for WebGL version",t),null;Dm[t]=e}const e=Dm[t];return e.isContextLost()?(delete Dm[t],Tm(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Dm[t])}function Mm(t){if("undefined"!==typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Im(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=Mm(t);return e.addEventListener("webglcontextlost",e=>{e.preventDefault(),delete Dm[t]},!1),1===t?e.getContext("webgl",Fm)||e.getContext("experimental-webgl",Fm):e.getContext("webgl2",Fm)}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Rm,$m,Bm;function zm(t,e){return[e,t]}function Lm(t,e){return t*e}function Pm(t){const e=f["fi"].sizeFromShape(t),n=Math.ceil(e/4);return f["fi"].sizeToSquarishShape(n)}function Um(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function Wm(t,e){const[n,r]=Um(t,e);return n*r*4}function qm(t,e){const n=t;let r,i,a,o,s,u,c,l,d,h;return 2===Object(f["Ce"])().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,a=n.RGBA16F,o=n.RGBA32F,s=n.RED,c=4,l=1,d=n.HALF_FLOAT,h=n.FLOAT):(r=t.RGBA,i=t.RGBA,a=t.RGBA,o=n.RGBA,s=t.RGBA,c=4,l=4,d=null!=e?e.HALF_FLOAT_OES:null,h=t.FLOAT),u=t.RGBA,{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:u,downloadUnpackNumChannels:c,defaultNumChannels:l,textureTypeHalfFloat:d,textureTypeFloat:h}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vm(t,e){const n=e();return Object(f["Ce"])().getBool("DEBUG")&&Gm(t),n}function Gm(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Km(t,e))}(function(t){t[t["DENSE"]=0]="DENSE",t[t["SHARED_BATCH"]=1]="SHARED_BATCH"})(Rm||(Rm={})),function(t){t[t["RENDER"]=0]="RENDER",t[t["UPLOAD"]=1]="UPLOAD",t[t["PIXELS"]=2]="PIXELS",t[t["DOWNLOAD"]=3]="DOWNLOAD"}($m||($m={})),function(t){t[t["UNPACKED_FLOAT16"]=0]="UNPACKED_FLOAT16",t[t["UNPACKED_FLOAT32"]=1]="UNPACKED_FLOAT32",t[t["PACKED_4X1_UNSIGNED_BYTE"]=2]="PACKED_4X1_UNSIGNED_BYTE",t[t["PACKED_2X2_FLOAT32"]=3]="PACKED_2X2_FLOAT32",t[t["PACKED_2X2_FLOAT16"]=4]="PACKED_2X2_FLOAT16"}(Bm||(Bm={}));const Hm=5.96e-8,Xm=65504;function Ym(t){return!!(Object(f["Ce"])().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||Hm<Math.abs(t)&&Math.abs(t)<Xm)}function Km(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Jm(t,e){return vg(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Zm(t,e){const n=vg(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Vm(t,()=>t.shaderSource(n,e)),Vm(t,()=>t.compileShader(n)),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Qm(t,e){const n=vg(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Vm(t,()=>t.shaderSource(n,e)),Vm(t,()=>t.compileShader(n)),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw eg(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const tg=/ERROR: [0-9]+:([0-9]+):/g;function eg(t,e){const n=tg.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);const r=+n[1],i=t.split("\n"),a=i.length.toString().length+2,o=i.map((t,e)=>f["fi"].rightPad((e+1).toString(),a)+t);let s=0;for(let f=0;f<o.length;f++)s=Math.max(o[f].length,s);const u=o.slice(0,r-1),c=o.slice(r-1,r),l=o.slice(r);console.log(u.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+f["fi"].rightPad(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}function ng(t){return vg(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function rg(t,e){if(Vm(t,()=>t.linkProgram(e)),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function ig(t,e){if(Vm(t,()=>t.validateProgram(e)),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function ag(t,e){const n=vg(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Vm(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Vm(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function og(t,e){const n=vg(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Vm(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Vm(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function sg(t){return vg(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function ug(t,e){const n=Object(f["Ce"])().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const n=`[${t}x${e}]`;throw new Error("Requested texture size "+n+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function cg(t){return vg(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function lg(t,e,n,r,i,a,o){const s=t.getAttribLocation(e,n);return-1!==s&&(Vm(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Vm(t,()=>t.vertexAttribPointer(s,i,t.FLOAT,!1,a,o)),Vm(t,()=>t.enableVertexAttribArray(s)),!0)}function fg(t,e,n){xg(t,n),Vm(t,()=>t.activeTexture(t.TEXTURE0+n)),Vm(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function dg(t,e,n){return vg(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function hg(t,e,n){return t.getUniformLocation(e,n)}function pg(t,e,n,r){Vm(t,()=>fg(t,e,r)),Vm(t,()=>t.uniform1i(n,r))}function mg(t,e,n){Vm(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Vm(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function gg(t,e){Vm(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Vm(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function bg(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+yg(t,e))}function yg(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function vg(t,e,n){const r=Vm(t,()=>e());if(null==r)throw new Error(n);return r}function xg(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const t=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${t}.`)}}function wg(t,e=2){return f["fi"].sizeFromShape(t.slice(0,t.length-e))}function Og(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function _g(t){let e=[1,1,1];const n=0===t.length||1===t.length&&1===t[0];return n||(e=[wg(t),...Og(t)]),e}function Ag(t,e=!1){let n=Object(f["Ce"])().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(n*=2,t=t.map((e,n)=>n>=t.length-2?f["fi"].nearestLargerEven(t[n]):t[n]),1===t.length&&(t=[2,t[0]])),2!==t.length){const e=f["fi"].squeezeShape(t);t=e.newShape}let r=f["fi"].sizeFromShape(t);if(t.length<=1&&r<=n)return[1,r];if(2===t.length&&t[0]<=n&&t[1]<=n)return t;if(3===t.length&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];if(e){const e=wg(t);let n=2,i=2;return t.length&&([n,i]=Og(t)),r=e*(n/2)*(i/2),f["fi"].sizeToSquarishShape(r).map(t=>2*t)}return f["fi"].sizeToSquarishShape(r)}function jg(t){return t%2===0}function kg(t,e){if(t=t.slice(-2),e=e.slice(-2),f["fi"].arraysEqual(t,e))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(jg(n)&&jg(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&jg(t[0])&&jg(e[0])}let Cg,Eg;function Sg(t){if(null==Cg){const e=Tm(t);Cg=e.getParameter(e.MAX_TEXTURE_SIZE)}return Cg}function Dg(t){if(null==Eg){const e=Tm(t);Eg=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Eg)}function Fg(t){if(0===t)return 0;let e;const n=Tm(t);return e=Ng(n,"EXT_disjoint_timer_query_webgl2")&&2===t?2:Ng(n,"EXT_disjoint_timer_query")?1:0,e}function Ng(t,e){const n=t.getExtension(e);return null!=n}function Tg(t){try{const e=Tm(t);if(null!=e)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Mg(t){if(0===t)return!1;const e=Tm(t);if(1===t){if(!Ng(e,"OES_texture_float"))return!1}else if(!Ng(e,"EXT_color_buffer_float"))return!1;const n=Rg(e);return n}function Ig(t){if(0===t)return!1;const e=Tm(t);if(1!==t){if(Ng(e,"EXT_color_buffer_float"))return Rg(e);const t="EXT_color_buffer_half_float";if(Ng(e,t)){const n=e.getExtension(t);return $g(e,n)}return!1}if(!Ng(e,"OES_texture_float"))return!1;if(!Ng(e,"WEBGL_color_buffer_float"))return!1;const n=Rg(e);return n}function Rg(t){const e=qm(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,i=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(a),o}function $g(t,e){const n=qm(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,a=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,a,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function Bg(t){if(2!==t)return!1;const e=Tm(t),n=null!=e.fenceSync;return n}function zg(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{null!=t&&f["fi"].assert("complex64"!==t.dtype,()=>e+" does not support complex64 tensors in the WebGL backend.")})}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lg=Object(f["Ce"])();Lg.registerFlag("HAS_WEBGL",()=>Lg.getNumber("WEBGL_VERSION")>0),Lg.registerFlag("WEBGL_VERSION",()=>Tg(2)?2:Tg(1)?1:0),Lg.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Lg.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===Lg.get("WEBGL_VERSION")),Lg.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Lg.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Lg.registerFlag("WEBGL_PACK",()=>Lg.getBool("HAS_WEBGL")),Lg.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Lg.getBool("WEBGL_PACK")),Lg.registerFlag("WEBGL_PACK_CLIP",()=>Lg.getBool("WEBGL_PACK")),Lg.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1),Lg.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Lg.getBool("WEBGL_PACK")),Lg.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Lg.getBool("WEBGL_PACK")),Lg.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Lg.getBool("WEBGL_PACK")),Lg.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Lg.getBool("WEBGL_PACK")),Lg.registerFlag("WEBGL_PACK_REDUCE",()=>Lg.getBool("WEBGL_PACK")),Lg.registerFlag("WEBGL_LAZILY_UNPACK",()=>Lg.getBool("WEBGL_PACK")),Lg.registerFlag("WEBGL_CONV_IM2COL",()=>Lg.getBool("WEBGL_PACK")),Lg.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Sg(Lg.getNumber("WEBGL_VERSION"))),Lg.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Dg(Lg.getNumber("WEBGL_VERSION"))),Lg.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Lg.getNumber("WEBGL_VERSION");return 0===t?0:Fg(t)}),Lg.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Lg.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!f["me"].isMobile()),Lg.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Mg(Lg.getNumber("WEBGL_VERSION"))),Lg.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!Lg.getBool("WEBGL_FORCE_F16_TEXTURES")&&Lg.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Lg.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Ig(Lg.getNumber("WEBGL_VERSION"))),Lg.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Bg(Lg.getNumber("WEBGL_VERSION"))),Lg.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{const t=Lg.getBool("WEBGL_RENDER_FLOAT32_ENABLED");return t?4:0}),Lg.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(t<0&&-1!==t)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const{simpleAbsImpl:Pg,addImpl:Ug,ceilImpl:Wg,expImpl:qg,expm1Impl:Vg,floorImpl:Gg,logImpl:Hg,maxImpl:Xg,multiplyImpl:Yg,rsqrtImpl:Kg,sliceImpl:Jg,subImpl:Zg,transposeImpl:Qg,uniqueImpl:tb}=l;
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eb{constructor(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((t,e)=>"T"+e);const n=[];this.variableNames.forEach(t=>{n.push(`float v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>"v"+t).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nb{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((t,e)=>"T"+e);const n=[];this.variableNames.forEach(t=>{n.push(`vec4 v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>"v"+t).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rb{constructor(t,e,n){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:a}=t;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const o="max"===e?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${s};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${o} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ib(t,e){return["x","y","z","w","u","v"].slice(0,e).map(e=>`${t}.${e}`)}function ab(t,e){return 1===e?[t]:ib(t,e)}function ob(t,e){if(1===t)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sb(){let t,e,n,r,i,a,o,s,u,c;return 2===Object(f["Ce"])().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ub(t,e,n="index"){const r=f["fi"].computeStrides(e);return r.map((e,i)=>{const a=`int ${t[i]} = ${n} / ${e}`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${e}`:`index -= ${t[i]} * ${e}`;return`${a}; ${o};`}).join("")}function cb(t){const e=f["fi"].computeStrides(t).map(t=>t.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;\n  }\n`}const lb="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:fb}=f["Dd"];
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function db(t,e,n,r){const i=[];t.forEach(t=>{const e=f["fi"].sizeFromShape(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?i.push(`uniform float ${t.name}${e>1?`[${e}]`:""};`):(i.push(`uniform sampler2D ${t.name};`),i.push(`uniform int offset${t.name};`))});const a=i.join("\n"),o=t.map(t=>mb(t,e,r)).join("\n"),s=e.texShape,u=sb(),c=yb(u);let l,d,h=wb(u);e.isPacked?(l=gb(e.logicalShape,s),d=xb(u)):(l=bb(e.logicalShape,s),d=vb(u)),r&&(h+=jb);const p=[h,c,d,a,l,o,n].join("\n");return p}function hb(t){const e=t.shapeInfo.logicalShape;switch(e.length){case 0:return zb(t);case 1:return Pb(t);case 2:return Wb(t);case 3:return Vb(t);case 4:return Hb(t);case 5:return Xb(t);case 6:return Yb(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function pb(t){const e=t.shapeInfo.logicalShape;switch(e.length){case 0:return Bb(t);case 1:return Lb(t);case 2:return Ub(t);case 3:return qb(t);default:return Gb(t)}}function mb(t,e,n=!1){let r="";r+=n?pb(t):hb(t);const i=t.shapeInfo.logicalShape,a=e.logicalShape;return i.length<=a.length&&(r+=n?Jb(t,e):Zb(t,e)),r}function gb(t,e){switch(t.length){case 0:return kb();case 1:return Cb(t,e);case 2:return Ib(t,e);case 3:return Sb(t,e);default:return Fb(t,e)}}function bb(t,e){switch(t.length){case 0:return kb();case 1:return Eb(t,e);case 2:return Rb(t,e);case 3:return Db(t,e);case 4:return Nb(t,e);case 5:return Tb(t,e);case 6:return Mb(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}}function yb(t){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${t.texture2D}(textureSampler, uv).r;\n    }\n  `}function vb(t){return`\n    void setOutput(float val) {\n      ${t.output} = vec4(val, 0, 0, 0);\n    }\n  `}function xb(t){return`\n    void setOutput(vec4 val) {\n      ${t.output} = val;\n    }\n  `}function wb(t){const e=`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFs} vec2 resultUV;\n    ${t.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${t.defineSpecialNaN}\n    ${t.defineSpecialInf}\n    ${t.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${Ob}\n    ${_b}\n    ${Ab}\n  `;return e}const Ob="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",_b="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Ab="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",jb="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function kb(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function Cb(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}function Eb(t,e){return 1===e[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${e[1]}.0);\n      }\n    `:1===e[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${e[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      return resTexRC.x * ${e[1]} + resTexRC.y;\n    }\n  `}function Sb(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),i=r*Math.ceil(t[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}function Db(t,e){const n=ub(["r","c","d"],t);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}function Fb(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2);let a=i,o="",s="b, r, c";for(let u=2;u<t.length-1;u++)a*=t[t.length-u-1],o=`\n      int b${u} = index / ${a};\n      index -= b${u} * ${a};\n    `+o,s=`b${u}, `+s;return`\n    ivec${t.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${o}\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${t.length}(${s});\n    }\n  `}function Nb(t,e){const n=ub(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${n}\n      return ivec4(r, c, d, d2);\n    }\n  `}function Tb(t,e){const n=ub(["r","c","d","d2","d3"],t);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},\n                             ${e[1]}));\n\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}function Mb(t,e){const n=ub(["r","c","d","d2","d3","d4"],t);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}function Ib(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(f["fi"].arraysEqual(t,e))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;const r=Math.ceil(t[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}function Rb(t,e){return f["fi"].arraysEqual(t,e)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));\n      }\n    `:1===t[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===t[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${e[0]}, ${e[1]}));\n        int index = resTexRC.x * ${e[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      int r = index / ${t[1]};\n      int c = index - r * ${t[1]};\n      return ivec2(r, c);\n    }\n  `}function $b(t){return"offset"+t}function Bb(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=sb();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${e}, halfCR);\n    }\n  `}function zb(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${n}() {return ${e};}`;const[r,i]=t.shapeInfo.texShape;if(1===r&&1===i)return`\n      float ${n}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const[a,o]=t.shapeInfo.texShape,s=$b(e);return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${a}, ${o}, ${s});\n      return sampleTexture(${e}, uv);\n    }\n  `}function Lb(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=sb();return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${a.texture2D}(${e}, uv);\n    }\n  `}function Pb(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${Kb(t)}\n      }\n    `;const r=t.shapeInfo.texShape,i=r[0],a=r[1];if(1===a&&1===i)return`\n      float ${n}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const o=$b(e);return 1===a?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===i?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${i}, ${a}, index + ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `}function Ub(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,a=i[0],o=i[1],s=sb();if(null!=i&&f["fi"].arraysEqual(e,i))return`\n      vec4 ${r}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);\n\n        return ${s.texture2D}(${n}, uv);\n      }\n    `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(e[1]/2);return`\n    vec4 ${r}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);\n      return ${s.texture2D}(${n}, uv);\n    }\n  `}function Wb(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape;if(null!=i&&f["fi"].arraysEqual(e,i)){const t=i[0],e=i[1];return`\n    float ${r}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${e}.0, ${t}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `}const{newShape:a,keptDims:o}=f["fi"].squeezeShape(e),s=a;if(s.length<e.length){const e=ty(t,s),n=["row","col"];return`\n      ${hb(e)}\n      float ${r}(int row, int col) {\n        return ${r}(${ey(n,o)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));\n        ${Kb(t)}\n      }\n    `;const u=i[0],c=i[1],l=$b(n);return 1===c?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${l}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `:1===u?`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${l}), vec3(${e[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n  float ${r}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${e[1]} + col + ${l};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${n}, uv);\n  }\n`}function qb(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===e[0]){const n=e.slice(1),i=[1,2],a=ty(t,n),o=["b","row","col"];return`\n        ${pb(a)}\n        vec4 ${r}(int b, int row, int col) {\n          return ${r}(${ey(o,i)});\n        }\n      `}const o=a[0],s=a[1],u=Math.ceil(e[2]/2),c=u*Math.ceil(e[1]/2),l=sb();return`\n    vec4 ${r}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${o}, ${s}, ${c}, ${u}, b, row, col);\n      return ${l.texture2D}(${n}, uv);\n    }\n  `}function Vb(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[1]*e[2],a=e[2],{newShape:o,keptDims:s}=f["fi"].squeezeShape(e),u=o;if(u.length<e.length){const e=ty(t,u),n=["row","col","depth"];return`\n        ${hb(e)}\n        float ${r}(int row, int col, int depth) {\n          return ${r}(${ey(n,s)});\n        }\n      `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${i}, ${a}, 1)));\n        ${Kb(t)}\n      }\n    `;const c=t.shapeInfo.texShape,l=c[0],d=c[1],h=t.shapeInfo.flatOffset;if(d===i&&null==h)return`\n        float ${r}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${a}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${l}.0);\n          return sampleTexture(${n}, uv);\n        }\n      `;if(d===a&&null==h)return`\n    float ${r}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${l}.0);\n      return sampleTexture(${n}, uv);\n    }\n  `;const p=$b(n);return`\n      float ${r}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${i} + col * ${a} + depth + ${p};\n        vec2 uv = uvFromFlat(${l}, ${d}, index);\n        return sampleTexture(${n}, uv);\n      }\n  `}function Gb(t){const e=t.shapeInfo.logicalShape,n=e.length,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=o[0],u=o[1],c=Math.ceil(e[n-1]/2);let l=c*Math.ceil(e[n-2]/2),f="int b, int row, int col",d=`b * ${l} + (row / 2) * ${c} + (col / 2)`;for(let p=2;p<n-1;p++)f=`int b${p}, `+f,l*=e[n-p-1],d=`b${p} * ${l} + `+d;const h=sb();return`\n    vec4 ${i}(${f}) {\n      int index = ${d};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${s});\n      return ${h.texture2D}(${r}, uv);\n    }\n  `}function Hb(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[3],a=e[2]*i,o=e[1]*a,{newShape:s,keptDims:u}=f["fi"].squeezeShape(e);if(s.length<e.length){const e=ty(t,s),n=["row","col","depth","depth2"];return`\n      ${hb(e)}\n      float ${r}(int row, int col, int depth, int depth2) {\n        return ${r}(${ey(n,u)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${o}, ${a}, ${i}, 1)));\n        ${Kb(t)}\n      }\n    `;const c=t.shapeInfo.flatOffset,l=t.shapeInfo.texShape,d=l[0],h=l[1];if(h===o&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${a}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(h===i&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${e[1]*e[2]}, ${e[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const p=$b(n);return`\n    float ${r}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${a} +\n          depth * ${i} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${h}, index + ${p});\n      return sampleTexture(${n}, uv);\n    }\n  `}function Xb(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],a=e[3]*i,o=e[2]*a,s=e[1]*o,{newShape:u,keptDims:c}=f["fi"].squeezeShape(e);if(u.length<e.length){const e=ty(t,u),n=["row","col","depth","depth2","depth3"];return`\n      ${hb(e)}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${ey(n,c)});\n      }\n    `}if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${o}, ${a}, ${i})) +\n          depth3;\n        ${Kb(t)}\n      }\n    `;const l=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],p=d[1];if(p===s&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${o}, ${a}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(p===i&&null==l)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${e[1]*e[2]*e[3]},\n               ${e[2]*e[3]}, ${e[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=$b(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${o} + depth * ${a} +\n          depth2 * ${i} + depth3 + ${m};\n      vec2 uv = uvFromFlat(${h}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function Yb(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:a}=f["fi"].squeezeShape(e);if(i.length<e.length){const e=ty(t,i),n=["row","col","depth","depth2","depth3","depth4"];return`\n      ${hb(e)}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${ey(n,a)});\n      }\n    `}const o=e[5],s=e[4]*o,u=e[3]*s,c=e[2]*u,l=e[1]*c;if(t.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${l}, ${c}, ${u}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${o}, 1)));\n        ${Kb(t)}\n      }\n    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,p=h[0],m=h[1];if(m===l&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${u}, ${s}, ${o})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${m}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(m===o&&null==d)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${e[1]*e[2]*e[3]*e[4]},\n               ${e[2]*e[3]*e[4]},\n               ${e[3]*e[4]},\n               ${e[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${m}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const g=$b(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${c} + depth * ${u} +\n          depth2 * ${s} + depth3 * ${o} + depth4 + ${g};\n      vec2 uv = uvFromFlat(${p}, ${m}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}function Kb(t){const e=t.name,n=f["fi"].sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${e}[i];\n      }\n    }\n  `}function Jb(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=fb(t.shapeInfo.logicalShape,e.logicalShape),u=Qb(o),c=o-a;let l;const d=["x","y","z","w","u","v"];l=0===a?"":o<2&&s.length>=1?"coords = 0;":s.map(t=>`coords.${d[t+c]} = 0;`).join("\n");let h="";h=o<2&&a>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>"coords."+d[e+c]).join(", ");let p="return outputValue;";const m=f["fi"].sizeFromShape(t.shapeInfo.logicalShape),g=1===m,b=f["fi"].sizeFromShape(e.logicalShape),y=1===b;if(1!==a||g||y){if(g&&!y)p=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const t=a-2,e=a-1;s.indexOf(t)>-1&&s.indexOf(e)>-1?p="return vec4(outputValue.x);":s.indexOf(t)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(e)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${u} coords = getOutputCoords();\n      ${l}\n      vec4 outputValue = get${r}(${h});\n      ${p}\n    }\n  `}function Zb(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===u&&null==t.shapeInfo.flatOffset&&f["fi"].arraysEqual(o,a))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const c=Qb(u),l=fb(t.shapeInfo.logicalShape,e.logicalShape),d=u-s;let h;const p=["x","y","z","w","u","v"];h=0===s?"":u<2&&l.length>=1?"coords = 0;":l.map(t=>`coords.${p[t+d]} = 0;`).join("\n");let m="";return m=u<2&&s>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>"coords."+p[e+d]).join(", "),`\n    float ${i}() {\n      ${c} coords = getOutputCoords();\n      ${h}\n      return get${r}(${m});\n    }\n  `}function Qb(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function ty(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function ey(t,e){return e.map(e=>t[e]).join(", ")}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ny{constructor(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,f["fi"].assert(t.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);const i=t[t.length-1],a=Math.ceil(i/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");const o=this.outputShape,s=o.length,u=Qb(s),c=ab("coords",s);let l,d;if(1===a){d=s+1;const t=Qb(d);l=`\n        ${t} sourceLocR = ${t}(${c.join()}, 0);\n        ++${c[s-1]};\n        ${t} sourceLocG = ${t}(${c.join()}, 0);\n        ++${c[s-2]};\n        ${t} sourceLocA = ${t}(${c.join()}, 0);\n        --${c[s-1]};\n        ${t} sourceLocB = ${t}(${c.join()}, 0);\n        --${c[s-2]};`}else d=s,l=`\n        ${u} sourceLocR = coords;\n        ++${c[s-1]};\n        ${u} sourceLocG = coords;\n        ++${c[s-2]};\n        ${u} sourceLocA = coords;\n        --${c[s-1]};\n        ${u} sourceLocB = coords;\n        --${c[s-2]};`;const h=["x","y","z","w","u","v"].slice(0,d),p="."+h[d-1],m=h.map(t=>"int "+t),g=ab("sourceLocR",d-1).concat("inIdx.r"),b=ab("sourceLocG",d-1).concat("inIdx.g"),y=ab("sourceLocB",d-1).concat("inIdx.b"),v=ab("sourceLocA",d-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${v.join()})));`,O=`vec4(\n            getAChannel(${g.join()}),\n            hasNextCol ? getAChannel(${b.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,_=r?"":`\n      float getBestIndicesAChannel(${m.join()}) {\n        return getChannel(getBestIndicesA(${h.join()}),\n                                          vec2(${h.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${m.join()}) {\n        return getChannel(getA(${h.join()}),\n                               vec2(${h.slice(-2).join()}));\n      }\n      ${_}\n      void main() {\n        ${u} coords = getOutputCoords();\n        bool hasNextCol = ${c[s-1]} < ${o[s-1]-1};\n        bool hasNextRow = ${c[s-2]} < ${o[s-2]-1};\n        ${l}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${e};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${O};\n\n        for (int i = 0; i < ${e}; i++) {\n          inIdx = srcIdx;\n          ${w}\n          vec4 candidate = ${O};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${x}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ry{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=s-1-t.padInfo.top,l=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`\n      const ivec2 pads = ivec2(${c}, ${l});\n      const float avgMultiplier = float(${f});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n            wR += ${a}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${u};\n            wC+= ${o}) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class iy{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=l-1-t.padInfo.front,p=f-1-t.padInfo.top,m=d-1-t.padInfo.left,g=1/(e*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${h}, ${p}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${l};\n            wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${i}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${f};\n              wR += ${u}) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${d};\n                wC += ${c}) {\n              float dyC = float(dyCCorner + wC) / ${o}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ay={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class oy{constructor(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=f["Dd"].assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${t}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sy="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",uy="return a + b;",cy="return a - b;",ly="return a * b;",fy="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",dy="\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",hy="return float(a == b);",py="return float(a != b);",my="return float(a < b);",gy="return float(a <= b);",by="return float(a > b);",yy="return float(a >= b);",vy="return float(a >= 1.0 && b >= 1.0);",xy="return float(a >= 1.0 || b >= 1.0);",wy=sy+"\n  return max(a, b);\n",Oy=sy+"\n  return min(a, b);\n",_y="if (b == 0.0) return NAN;\n  return mod(a, b);",Ay="return (b >= 1.0) ? a : a * (b + 1.0);",jy="return (a < 0.) ? b * a : a;";class ky{constructor(t,e,n){this.variableNames=["A","B"],this.outputShape=f["Dd"].assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${t}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cy="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n",Ey="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",Sy="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+Cy+"\n  return result;\n",Dy="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Fy="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",Ny="\n  return vec4(equal(a, b));\n",Ty="\n  return vec4(notEqual(a, b));\n",My="\n  return vec4(lessThan(a, b));\n",Iy="\n  return vec4(lessThanEqual(a, b));\n",Ry="\n  return vec4(greaterThan(a, b));\n",$y="\n  return vec4(greaterThanEqual(a, b));\n",By="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",zy="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",Ly="\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Cy+"\n  return result;\n",Py="\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Cy+"\n  return result;\n",Uy="\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+Cy+"\n  return result;\n";class Wy{constructor(t,e,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=f["Dd"].assertAndGetBroadcastShape(e,n);const i=this.outputShape.length;let a="";if(r)if(0===i||1===f["fi"].sizeFromShape(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const t=Qb(i);if(a=`\n          ${t} coords = getOutputCoords();\n        `,1===i)a+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const t=ab("coords",i);a+=`\n            bool nextRowOutOfBounds =\n              (${t[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${t[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${t}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${a}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qy{constructor(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vy{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gy{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hy{constructor(t){this.outputShape=[],this.outputShape=f["Dd"].computeOutShape(t,1),this.variableNames=t.map((t,e)=>"T"+e);const e=new Array(t.length-1);e[0]=t[0][1];for(let a=1;a<e.length;a++)e[a]=e[a-1]+t[a][1];const n=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<e.length;a++){const t=e[a-1];n.push(`else if (yC < ${e[a]}) setOutput(getT${a}(yR, yC-${t}));`)}const r=e.length,i=e[e.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xy{constructor(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=f["Dd"].computeOutShape(t,e);const n=this.outputShape,r=n.length,i=Qb(r),a=ab("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((t,e)=>"T"+e);const s=new Array(t.length-1);s[0]=t[0][e];for(let f=1;f<s.length;f++)s[f]=s[f-1]+t[f][e];const u=o[e],c=o.slice(-2),l=o.join();let d=`if (${u} < ${s[0]}) {\n        return getChannel(\n            getT0(${l}), vec2(${c.join()}));\n        }`;for(let f=1;f<s.length;f++){const t=s[f-1];d+=`\n        if (${u} < ${s[f]}  && ${u} >= ${s[f-1]}) {\n          return getChannel(\n            getT${f}(${Yy(o,u,t)}),\n            vec2(${Yy(c,u,t)}));\n        }`}const h=s.length,p=s[s.length-1];d+=`\n        return getChannel(\n          getT${h}(${Yy(o,u,p)}),\n          vec2(${Yy(c,u,p)}));`,this.userCode=`\n      float getValue(${o.map(t=>"int "+t)}) {\n        ${d}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${a}), 0., 0., 0.);\n\n        ${a[r-1]} = ${a[r-1]} + 1;\n        if (${a[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${a});\n        }\n\n        ${a[r-2]} = ${a[r-2]} + 1;\n        if (${a[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${a});\n        }\n\n        ${a[r-1]} = ${a[r-1]} - 1;\n        if (${a[r-2]} < ${n[r-2]} &&\n            ${a[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${a});\n        }\n        setOutput(result);\n      }\n    `}}function Yy(t,e,n){const r=t.indexOf(e),i=t.map((t,e)=>e===r?`${t} - ${n}`:t);return i.join()}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ky{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a="channelsLast"===t.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${e} - ${r};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              if (${a}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Jy{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a="channelsLast"===t.dataFormat,o=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=a?1:2,c=a?2:3,l=a?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${l}];\n\n        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n\n              if (${a}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Zy{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,a=t.padInfo.top,o=t.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yF = 0; yF < ${t.outDepth}; yF++) {\n            int xF = wF + yF * ${e} - ${i};\n\n            if (xF < 0 || xF >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${t.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${a};\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${t.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${o};\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Qy{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,c=r-1-t.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${s}, ${u}, ${c});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${e}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${i}.0;\n\n          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${e} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${a}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${o}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tv{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${a} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${e} - ${r};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ev{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.top,o=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${o});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nv{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,a=t.padInfo.left,o=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterHeight,f=t.filterWidth,d=4*Math.floor(t.inChannels/4),h=t.inChannels%4,p="channelsLast"===t.dataFormat,m=p?1:2,g=p?2:3,b=p?3:1;let y="",v="";n&&(y=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,v="result = activation(result);");const x=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${o}, ${s});\n      const ivec2 pads = ivec2(${i}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${b}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${m}], coords[${g}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${l}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${f}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${t.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${d}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${p}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===h}) {\n\n              if (${p}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${d}) *\n                    getW(wR, wC, ${d}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${d}, xR, xC) *\n                    getW(wR, wC, ${d}, d2);\n              }\n\n            } else if (${2===h}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${d}, d2),\n                getW(wR, wC, ${d} + 1, d2)\n              );\n\n              if (${p}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${d}),\n                  getX(batch, xR, xC, ${d} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${d}, xR, xC),\n                  getX(batch, ${d} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===h}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${d}, d2),\n                getW(wR, wC, ${d} + 1, d2),\n                getW(wR, wC, ${d} + 2, d2)\n              );\n\n              if (${p}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${d}),\n                  getX(batch, xR, xC, ${d} + 1),\n                  getX(batch, xR, xC, ${d} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${d}, xR, xC),\n                  getX(batch, ${d} + 1, xR, xC),\n                  getX(batch, ${d} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${v}\n        setOutput(result);\n      }\n    `}}class rv{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterDepth,f=t.filterHeight,d=t.filterWidth,h=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${a}, ${o});\n      const ivec3 pads = ivec3(${e}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${l}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${f}; wR++) {\n            int xR = xRCorner + wR * ${u};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${c};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${h}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===p}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${h}) *\n                  getW(wF, wR, wC, ${h}, d2);\n              } else if (${2===p}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===p}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1),\n                  getX(batch, xF, xR, xC, ${h} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2),\n                  getW(wF, wR, wC, ${h} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iv{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=t.outChannels/t.inChannels;let m="",g="";n&&(m=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,g="result = activation(result);");const b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${m}\n\n      const ivec2 strides = ivec2(${u}, ${c});\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${p};\n        int q = d2 - d1 * ${p};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${l};\n\n          if (xR < 0 || xR >= ${i}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${h}; wC++) {\n            int xC = xCCorner + wC * ${f};\n\n            if (xC < 0 || xC >= ${a}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${b}\n        ${g}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class av{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;const i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,m=p;let g="int xR; int xC; int xCOffset;";for(let f=0;f<h;f++)for(let t=0;t<p;t++)g+=`\n          vec4 xTexelR${f}C${2*t} = vec4(0.);\n          vec4 wR${f}C${t} = vec4(0.);\n          vec4 xR${f}C${t} = vec4(0.);`;for(let x=0;x<h;x++)for(let t=0;t<m;t++){const e=2*t;if(g+=`\n          xR = xRCorner + ${x*l};\n          xC = xCCorner + ${e*d};\n        `,1===c){if(e<p&&(g+=s%2===1?`\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ${i} && xCOffset >= 0 && xCOffset < ${a}) {\n                  xTexelR${x}C${e} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${a}) {\n                    xTexelR${x}C${e}.zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR${x}C${e} = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ${i} && xCOffset >= 0 && xCOffset < ${a}) {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${a}) {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR${x}C${e} = vec4(previous.zw, xTexelR${x}C${e}.xy);\n                } else {\n                  xR${x}C${e} = vec4(0, 0, xTexelR${x}C${e}.xy);\n                }\n              `:`\n                if(xR >= 0 && xR < ${i} && xC >= 0 && xC < ${a}) {\n                  xTexelR${x}C${e} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${x}C${e} = vec4(0.);\n                }\n\n                xR${x}C${e} = xTexelR${x}C${e};\n              `,e+1<p)){const t=s%2===0?f["fi"].nearestLargerEven(d):d;d%2===0&&s%2===1||d%2!==0&&s%2!==1?(g+=`\n                  xCOffset = xC + ${s%2} + ${t};\n\n                  if(xR >= 0 && xR < ${i} &&\n                    xCOffset >= 0 && xCOffset < ${a}) {\n                    xTexelR${x}C${e+2} = getX(batch, xR, xCOffset, d1);\n                  }\n                `,d>1&&(g+=`\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ${i} &&\n                      xCOffset >= 0 && xCOffset < ${a}) {\n                      xTexelR${x}C${e} = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR${x}C${e} = vec4(0.);\n                    }\n                  `),g+=`\n                  xR${x}C${e+1} = vec4(\n                    xTexelR${x}C${e}.zw, xTexelR${x}C${e+2}.xy);\n                `):g+=`\n                  xCOffset = xC + ${t};\n\n                  if(xR >= 0 && xR < ${i} &&\n                    xCOffset >= 0 && xCOffset < ${a}) {\n                    xTexelR${x}C${e+2} = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR${x}C${e+1} = xTexelR${x}C${e+2};\n                `}}else e<p&&(g+=`\n              if(xR >= 0 && xR < ${i}) {\n            `,s%2===1?(g+=`\n                xCOffset = xC + 1 - ${c};\n                if(xCOffset >= 0 && xCOffset < ${a}) {\n                  xTexelR${x}C${e} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${x}C${e} = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${a}) {\n                  xTexelR${x}C${e+2} = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR${x}C${e+2} = vec4(0.);\n                }\n\n                xR${x}C${e} = vec4(\n                  xTexelR${x}C${e}.zw, xTexelR${x}C${e+2}.zw);\n              `,e+1<p&&(g+=`\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ${c};\n                  if(xCOffset >= 0 && xCOffset < ${a}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR${x}C${e+1} = vec4(xTexelR${x}C${e+2}.xy, final.xy);\n                `)):(g+=`\n                if(xC >= 0 && xC < ${a}) {\n                  xTexelR${x}C${e} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${x}C${e} = vec4(0.);\n                }\n\n                xCOffset = xC + ${c};\n                if(xCOffset >= 0 && xCOffset < ${a}) {\n                  xTexelR${x}C${e+2} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${x}C${e+2} = vec4(0.);\n                }\n\n                xR${x}C${e} = vec4(\n                  xTexelR${x}C${e}.xy, xTexelR${x}C${e+2}.xy);\n              `,e+1<p&&(g+=`\n                  xR${x}C${e+1} = vec4(\n                    xTexelR${x}C${e}.zw, xTexelR${x}C${e+2}.zw);\n                `)),g+="}");e<p&&(g+=`\n            vec4 wTexelR${x}C${e} = getW(${x}, ${e}, d1, q);\n            wR${x}C${e} = vec4(wTexelR${x}C${e}.xz, wTexelR${x}C${e}.xz);\n          `,e+1<p&&(g+=`\n              vec4 wTexelR${x}C${e+1} = getW(${x}, ${e+1}, d1, q);\n              wR${x}C${e+1} =\n                vec4(wTexelR${x}C${e+1}.xz, wTexelR${x}C${e+1}.xz);`))}for(let f=0;f<h;f++)for(let t=0;t<p;t++)g+=`dotProd += xR${f}C${t} * wR${f}C${t};`;let b="",y="";n&&(b=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,y="result = activation(result);");const v=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${u}, ${c});\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ${g}\n\n        vec4 result = dotProd;\n        ${v}\n        ${y}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ov{constructor(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,s,u]=t,[c]=e,[l,f]=n;this.outputShape=[c,l,f,u];const d="bilinear"===r?1:0,[h,p]=[o-1+".0",s-1+".0"],[m,g,b]=l>1?[""+(o-1)/(l-1),"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0","0.5 * (y1+y2) * "+h],[y,v,x]=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio",`x1*${p} + float(x)*(width_scale)`]:["0.0","0.0","0.5 * (x1+x2) * "+p];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${v};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${h} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${x};\n        if( in_x < 0.0 || in_x > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}class sv{constructor(t,e,n){this.variableNames=["x"],this.outputShape=t;const r=t.length,i=e?"0.0":`getX(${uv(r,"coords")})`,a=t[t.length-1];let o="",s="";e?(o=n?"end != "+(a-1):"end != 0",s=n?"end + 1":"end - 1"):(o=n?"end + pow2 < "+a:"end >= pow2",s=n?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${Qb(r)} coords = getOutputCoords();\n        int end = ${cv(r,"coords")};\n        float val = ${i};\n        int pow2 = int(pow(2.0, index));\n        if (${o}) {\n          int idx = ${s};\n          ${cv(r,"coords")} = idx;\n          val += getX(${uv(r,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.index&&(this.index=e.getUniformLocation(n,"index")),e.gl.uniform1f(this.index,t)}}}function uv(t,e){if(1===t)return""+e;if(2===t)return`${e}.x, ${e}.y`;if(3===t)return`${e}.x, ${e}.y, ${e}.z`;if(4===t)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}function cv(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error(`Cumulative sum for rank ${t} is not yet supported`)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lv{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Rm.DENSE;const e=Pm(t),n=sb();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${ub(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fv{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Rm.DENSE;const e=Pm(t),n=sb();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${ub(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dv{constructor(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${e};\n      int offset_h = imod(h, ${e});\n      int in_w = w / ${e};\n      int offset_w = imod(w, ${e});\n      int offset_d = (offset_h * ${e} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hv{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pv{constructor(t){this.variableNames=["A"],this.outTexUsage=$m.DOWNLOAD;const e=sb();this.outputShape=t,this.userCode=`\n      ${lb}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${e.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mv{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=$m.DOWNLOAD;const e=sb();this.outputShape=t,this.userCode=`\n      ${lb}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${e.output} = encode_float(x);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gv{constructor(t,e,n=!1){this.variableNames=["A"];const r=sb(),[i,a]=e;this.outputShape=t;let o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`\n      ${cb(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${a};\n        int c = imod(flatIndex, ${a});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${a}.0, ${i}.0);\n        vec4 values = ${r.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${r.output} = vec4(${o}, 0., 0., 0.);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bv{constructor(t,e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const r=sb(),[i,a]=e;this.outputShape=t;let o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let u=0;u<=1;u++)for(let e=0;e<=1;e++){const n=2*u+e;o+=`\n          localCoords = coords;\n          if(localCoords[2] + ${e} < ${t[2]}) {\n            localCoords[2] += ${e};\n            if(localCoords[1] + ${u} < ${t[1]}) {\n              localCoords[1] += ${u};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${a};\n              c = imod(flatIndex, ${a});\n              uv = (vec2(c, r) + halfCR) / vec2(${a}.0, ${i}.0);\n              values = ${r.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${n}] = values[0];\n              } else if(offset == 1) {\n                result[${n}] = values[1];\n              } else if(offset == 2) {\n                result[${n}] = values[2];\n              } else {\n                result[${n}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${cb(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${o}\n\n        ${r.output} = ${s};\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yv={REAL:"return real * expR - imag * expI;",IMAG:"return real * expI + imag * expR;"};class vv{constructor(t,e,n){this.variableNames=["real","imag"];const r=e[1];this.outputShape=e;const i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${t}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${a};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xv{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(t){return(e,n)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(n,"value")),e.gl.uniform1f(this.valueLoc,t)}}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wv{constructor(t,e,n){this.variableNames=["A","indices"];const r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;const i=Qb(this.rank),a=Ov(t,n);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        setOutput(getA(${a}));\n      }\n    `}}function Ov(t,e){const n=t.length;if(n>4)throw Error(`Gather for rank ${n} is not yet supported`);if(1===n)return"int(getIndices(resRC))";const r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let a=0;a<t.length;a++)a===e?i.push(`int(getIndices(${r[a]}))`):i.push(""+r[a]);return i.join()}class _v{constructor(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;const r=Qb(e.length),i=Qb(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${a};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Av(t){const e=sb(),n=`${e.version}\n    precision highp float;\n    ${e.attribute} vec3 clipSpacePos;\n    ${e.attribute} vec2 uv;\n    ${e.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`;return Zm(t,n)}function jv(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return ag(t,e)}function kv(t){const e=new Uint16Array([0,1,2,2,1,3]);return og(t,e)}function Cv(t,e,n,r,i,a){ug(e,n);const o=sg(t),s=t.TEXTURE_2D;return Vm(t,()=>t.bindTexture(s,o)),Vm(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Vm(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Vm(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),Vm(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),Vm(t,()=>t.texImage2D(s,0,r,e,n,0,i,a,null)),Vm(t,()=>t.bindTexture(t.TEXTURE_2D,null)),o}function Ev(t){return t.internalFormatFloat}function Sv(t,e,n,r){const[i,a]=zm(e,n);return Cv(t,i,a,Ev(r),r.textureFormatFloat,t.FLOAT)}function Dv(t){return t.internalFormatHalfFloat}function Fv(t,e,n,r){const[i,a]=zm(e,n);return Cv(t,i,a,Dv(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Nv(t){return t.downloadTextureFormat}function Tv(t,e,n,r){const[i,a]=zm(e,n);return Cv(t,i,a,Nv(r),t.RGBA,t.UNSIGNED_BYTE)}function Mv(t){return t.internalFormatPackedFloat}function Iv(t,e,n,r){const[i,a]=Um(e,n);return Cv(t,i,a,Mv(r),t.RGBA,t.FLOAT)}function Rv(t){return t.internalFormatPackedHalfFloat}function $v(t,e,n,r){const[i,a]=Um(e,n);return Cv(t,i,a,Rv(r),t.RGBA,r.textureTypeHalfFloat)}function Bv(t,e,n){const r=0,i=12,a=20;Vm(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n));const o=lg(t,e,"clipSpacePos",n,3,a,r);return o&&lg(t,e,"uv",n,2,a,i)}function zv(t,e,n,r,i,a){let o,s,u;Vm(t,()=>t.bindTexture(t.TEXTURE_2D,e)),i instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,u=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,u=a.internalFormatPackedFloat),o.set(i),Vm(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,s,o)),Vm(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Lv(t,e,n){Vm(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Vm(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Vm(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Vm(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Pv(t,e,n,r){const i=t.createBuffer();Vm(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=4,o=4,s=a*o*e*n;return Vm(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)),Vm(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Vm(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function Uv(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function Wv(t,e,n,r){const[i,a]=zm(e,n),o=4,s=new Uint8Array(Lm(e*n,o));return Vm(t,()=>t.readPixels(0,0,i,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function qv(t,e,n,r,i,a,o,s){const u=t,c=new Float32Array(Wm(a,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function Vv(t,e,n){const r=new Float32Array(e*n*4);return Vm(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gv{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const e=Object(f["Ce"])().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,Nm(e,t)):this.gl=Tm(e);let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(1===Object(f["Ce"])().getNumber("WEBGL_VERSION")){const t="OES_texture_float",e="OES_texture_half_float";if(this.textureFloatExtension=Jm(this.gl,t),Ng(this.gl,e))this.textureHalfFloatExtension=Jm(this.gl,e);else if(Object(f["Ce"])().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Ng(this.gl,r))this.colorBufferHalfFloatExtension=Jm(this.gl,r);else if(Object(f["Ce"])().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Ng(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Ng(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=jv(this.gl),this.indexBuffer=kv(this.gl),this.framebuffer=cg(this.gl),this.textureConfig=qm(this.gl,this.textureHalfFloatExtension)}get debug(){return Object(f["Ce"])().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;Vm(t,()=>t.finish()),Vm(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Vm(t,()=>t.deleteFramebuffer(this.framebuffer)),Vm(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Vm(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Vm(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,e){return this.throwIfDisposed(),Sv(this.gl,t,e,this.textureConfig)}createFloat16MatrixTexture(t,e){return this.throwIfDisposed(),Fv(this.gl,t,e,this.textureConfig)}createUnsignedBytesMatrixTexture(t,e){return this.throwIfDisposed(),Tv(this.gl,t,e,this.textureConfig)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),Lv(this.gl,t,e)}uploadDenseMatrixToTexture(t,e,n,r){this.throwIfDisposed(),zv(this.gl,t,e,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(t,e){return this.throwIfDisposed(),$v(this.gl,t,e,this.textureConfig)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),Iv(this.gl,t,e,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(gg(this.gl,this.framebuffer),this.outputTexture=null),Vm(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,e,n){return this.downloadMatrixDriver(t,()=>Wv(this.gl,e,n,this.textureConfig))}downloadPackedMatrixFromBuffer(t,e,n,r,i,a){return qv(this.gl,t,e,n,r,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,e){return Uv(this.gl,t,e)}createBufferFromTexture(t,e,n){this.bindTextureToFrameBuffer(t);const r=Pv(this.gl,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,n;if(Object(f["Ce"])().getBool("WEBGL_FENCE_API_ENABLED")){const r=t,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=()=>{const t=r.clientWaitSync(i,0,0);return t===r.ALREADY_SIGNALED||t===r.CONDITION_SATISFIED},e=i}else Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(e,Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:e,isFencePassed:n}}downloadMatrixFromPackedTexture(t,e,n){return this.downloadMatrixDriver(t,()=>Vv(this.gl,e,n))}createProgram(t){this.throwIfDisposed();const e=this.gl,n=Qm(e,t),r=Av(e),i=ng(e);return Vm(e,()=>e.attachShader(i,r)),Vm(e,()=>e.attachShader(i,n)),rg(e,i),this.debug&&ig(e,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=Bv(e,this.program,this.vertexBuffer)),i}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&Vm(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&ig(this.gl,this.program),Vm(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,e,n=!0){return this.throwIfDisposed(),n?dg(this.gl,t,e):hg(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),Vm(this.gl,()=>this.gl.getAttribLocation(t,e))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),pg(this.gl,t,e,n)}setOutputMatrixTexture(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)}setOutputPackedMatrixTexture(t,e,n){this.throwIfDisposed();const[r,i]=Um(e,n);this.setOutputMatrixTextureDriver(t,r,i)}setOutputMatrixWriteRegion(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)}setOutputPackedMatrixWriteRegion(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&ig(this.gl,this.program),bg(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),Vm(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Vm(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Jm(this.gl,2===Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}const t=this.getQueryTimerExtensionWebGL1(),e=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2();return void t.endQuery(e.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await f["fi"].repeatedTry(()=>this.disposed||this.isQueryAvailable(t,Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,e){if(0===e)return null;if(2===e){const e=this.gl,n=e.getQueryParameter(t,e.QUERY_RESULT);return n/1e6}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_EXT);return n/1e6}}isQueryAvailable(t,e){if(0===e)return!0;if(2===e){const e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(e.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){const t=Hv(this.itemsToPoll.map(t=>t.isDoneFn));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||f["fi"].repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),mg(this.gl,t,this.framebuffer),this.debug&&bg(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(mg(this.gl,this.outputTexture,this.framebuffer),this.debug&&bg(this.gl)):gg(this.gl,this.framebuffer)}downloadMatrixDriver(t,e){this.bindTextureToFrameBuffer(t);const n=e();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(t,e,n){this.throwIfDisposed();const r=this.gl;mg(r,t,this.framebuffer),this.debug&&bg(r),this.outputTexture=t,Vm(r,()=>r.viewport(0,0,e,n)),Vm(r,()=>r.scissor(0,0,e,n))}setOutputMatrixWriteRegionDriver(t,e,n,r){this.throwIfDisposed(),Vm(this.gl,()=>this.gl.scissor(t,e,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function Hv(t){let e=0;for(;e<t.length;++e){const n=t[e]();if(!n)break}return e-1}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xv(t,e,n,r){const i=e.userCode,a=n.map((t,n)=>{const r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),o=a.map(t=>t.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=db(a,s,i,e.packedInputs),c=t.createProgram(u);let l=null;const d=t.getUniformLocation(c,"NAN",!1);1===Object(f["Ce"])().getNumber("WEBGL_VERSION")&&(l=t.getUniformLocation(c,"INFINITY",!1));const h={};for(let f=0;f<e.variableNames.length;f++){const n=e.variableNames[f],r=!1;h[n]=t.getUniformLocation(c,n,r),h["offset"+n]=t.getUniformLocation(c,"offset"+n,r)}return{program:e,source:u,webGLProgram:c,uniformLocations:h,inShapeInfos:o,outShapeInfo:s,infLoc:l,nanLoc:d}}function Yv(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((t,n)=>{const r=t.logicalShape,i=e[n],a=i.shape;if(!f["fi"].arraysEqual(r,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${a} must match`);if(t.isUniform&&i.isUniform)return;const o=t.texShape,s=i.isUniform?null:i.texData.texShape;if(!f["fi"].arraysEqual(o,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${s} must match`)})}function Kv(t,e,n,r,i){Yv(e.inShapeInfos,n),Yv([e.outShapeInfo],[r]);const a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a,o[0],o[1]):t.setOutputMatrixTexture(a,o[0],o[1]),t.setProgram(e.webGLProgram),1===Object(f["Ce"])().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((n,r)=>{const i=e.program.variableNames[r],a=e.uniformLocations[i],o=e.uniformLocations["offset"+i];if(null!=a)if(n.isUniform)if(f["fi"].sizeFromShape(n.shape)<2)t.gl.uniform1f(a,n.uniformValues[0]);else{let e=n.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),t.gl.uniform1fv(a,e)}else null!=n.texData.slice&&null!=o&&t.gl.uniform1i(o,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,a,r)}),null!=i&&i(t,e.webGLProgram),t.executeProgram()}function Jv(t,e,n){let r="";e.concat(n).forEach(t=>{const e=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0,n=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${n}_${e}`});const i=t.userCode;let a=t.constructor.name;return a+="_"+r+"_"+i,a}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zv{constructor(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;const{filterWidth:r,inChannels:i,strideWidth:a,strideHeight:o,padInfo:s,outWidth:u,dilationWidth:c,dilationHeight:l,dataFormat:f}=n,{left:d,top:h}=s,p=i*r,m=sb(),g="channelsLast"===f,b=g?0:1,y=g?1:2;let v="";for(let x=0;x<=1;x++)for(let n=0;n<=1;n++)v+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${x};\n\n          if(blockIndex < ${t[1]} && pos < ${t[0]}) {\n            offsetY = int(blockIndex / (${u})) * ${o} - ${h};\n            d0 = offsetY + ${l} * (pos / ${p});\n\n            if(d0 < ${e[b]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${u}.) * ${a}. - ${d}.);\n              d1 = offsetX + ${c} * (int(mod(float(pos), ${p}.) / ${i}.));\n\n              if(d1 < ${e[y]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${i}.));\n\n                if (${g}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*x+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*x+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${v}\n\n        ${m.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qv{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];const a=e,o=t[3]-1;let s;this.outputShape=t;const u=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${u})`:1===i?`1.0/(${u})`:`exp(log(${u}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${a}; j <= ${a}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${o}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${s};\n        setOutput(val);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tx{constructor(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${e})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${e} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ex{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=e,o=t[3]-1;let s;this.outputShape=t;const u=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${u})`:1===i?`1.0/(${u})`:`exp(log(${u}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${a};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${a}; j <= ${a}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nx{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,a=t.effectiveFilterWidth,o=i-1-t.padInfo.top,s=a-1-t.padInfo.left,u=i*a-1;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${a} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class rx{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=s-1-t.padInfo.front,f=u-1-t.padInfo.top,d=c-1-t.padInfo.left,h=s*u*c-1;this.userCode=`\n      const ivec3 pads = ivec3(${l}, ${f}, ${d});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${e}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${u};\n              wR += ${a}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${c};\n                wC += ${o}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${h} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${u} * ${c} +\n                  wR * ${c} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ix{constructor(t,e,n=!1,r=!1,i=!1,a=null,o=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const s=n?t[1]:t[2],u=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let h="",p="";a&&(h=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,p="result = activation(result);");const m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${h}\n\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${u}; i++) {\n          vec4 a = getMatrixA(rc.x, ${c});\n          vec4 b = getMatrixB(rc.x, ${l});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${f[0]} * ${d[0]});\n          result += (${f[1]} * ${d[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${m}\n\n        ${p}\n\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ax{constructor(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.seedLoc&&(this.seedLoc=e.getUniformLocation(n,"seed")),e.gl.uniform1f(this.seedLoc,t)}}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ox{constructor(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sx{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;const e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=ab("rc",e),r=Qb(e),i=cx(e,t,n),a=lx(e,t[t.length-1],t[t.length-2],n),o=fx(t,n);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${i}) {\n            setOutput(vec4(0));\n          } else {\n            ${a}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}}function ux(t,e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let a=`${0===r?"r":"rp1"}, ${0===i?"c":"cp1"}`;for(let n=2;n<t;n++)a=e[e.length-1-n]+","+a;n.push(a)}return n}function cx(t,e,n){if(1===t)return"rc > "+e[0];let r="";for(let i=t-2;i<t;i++)r+=`${n[i]} >= ${e[i]}`,i<t-1&&(r+="||");return r}function lx(t,e,n,r){if(1===t)return"";const i=r.slice(-2);return`\n    int r = ${i[0]};\n    int c = ${i[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${e};\n    bool rEdge = rp1 >= ${n};\n  `}function fx(t,e){const n=t.length,r=ux(n,e);return 1===n?`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${r[0]}),\n          cEdge ? 0. : getA(${r[1]}),\n          rEdge ? 0. : getA(${r[2]}),\n          rEdge || cEdge ? 0. : getA(${r[3]})`}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dx{constructor(t,e,n){this.variableNames=["x"],this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=Qb(r),a=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${a});\n      ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(${n}));\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${o};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(${n}));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hx{constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=Qb(r),a=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),s=ab("rc",r),u=ab("source",r),c=`${s[r-1]} < ${this.outputShape[r-1]}`,l=1===r?"source":`vec2(${u.slice(-2).join()})`,f=[i+" rc = outputLoc;",`${s[r-1]} += 1;\n       if(${c}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${s[r-2]} += 1;\n       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;\n         if(${c}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let p=0,m=1===r?2:4;p<m;p++)h+=`\n        ${f[p]}\n        if (${d}) {\n          result[${p}] = float(${n});\n        } else {\n          ${i} source = rc - start;\n          result[${p}] = getChannel(getX(${u.join()}), ${l});\n        }\n      `;h+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${a});\n      const ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class px{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,o=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;const p="avg"===e,m=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,g=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let b="0.0";if(p||(b="-1.0 / 1e-20"),n){const e=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${o}, ${s});\n        const ivec2 pads = ivec2(${d}, ${h});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${l};\n              wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${f};\n                wC += ${c}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${e} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?m:g:`wR * ${f} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const y="max";let v=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(v="avgValue / count");const x=4*Math.floor(a/4),w=a%4,O=`\n      if (${p}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${y}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${s});\n      const ivec2 pads = ivec2(${d}, ${h});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${l};\n            wR += ${u}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${x}; wC += 4) {\n            int xC = xCCorner + wC * ${c};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              getValue(batch, xR, xC + 3 * ${c}, d)\n            );\n\n            ${O}\n          }\n\n          int xC = xCCorner + ${x};\n          if (${1===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${O}\n          } else if (${2===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${O}\n          } else if (${3===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              initializationValue\n            );\n\n            ${O}\n          }\n        }\n        setOutput(${v});\n      }\n    `}}class mx{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,o=t.strideDepth,s=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,l=t.dilationHeight,f=t.dilationWidth,d=t.effectiveFilterDepth,h=t.effectiveFilterHeight,p=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;const y="avg"===e;let v="0.0";if(y||(v="-1.0 / 1e-20"),n){const e=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${o}, ${s}, ${u});\n        const ivec3 pads = ivec3(${m}, ${g}, ${b});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${c}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${h};\n                wR += ${l}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${p};\n                  wC += ${f}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${e} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${h} * ${p} +\n                      wR * ${p} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}const x="max";let w=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===e&&(w="avgValue / count");const O=4*Math.floor(a/4),_=a%4,A=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ${x}(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${o}, ${s}, ${u});\n      const ivec3 pads = ivec3(${m}, ${g}, ${b});\n      const float initializationValue = ${v};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${v});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${c}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h};\n            wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${O}; wC += 4) {\n              int xC = xCCorner + wC * ${f};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${f}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${f}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${f}, ch)\n              );\n\n              ${A}\n            }\n\n            int xC = xCCorner + ${O};\n            if (${1===_}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${A}\n            } else if (${2===_}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${f}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${A}\n            } else if (${3===_}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${f}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${f}, ch),\n                initializationValue\n              );\n\n              ${A}\n            }\n          }\n          setOutput(${w});\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gx{constructor(t,e){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:a}=t;this.outputShape=[r,a];let o="0.0",s="";"prod"===e?o="1.0":"min"===e?(o="1.0 / 1e-20",s="min"):"max"===e&&(o="-1.0 / 1e-20",s="max");let u=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===e?u="sumValue":"prod"===e?u="prodValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");const c=4*Math.floor(n/4),l=n%4;let f=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n      }\n    `,d="vec4";"all"===e?(o="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===e&&(o="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${o};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${o});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${f}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===l}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${f}\n        } else if (${2===l}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${f}\n        } else if (${3===l}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${f}\n        }\n        setOutput(${u});\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bx{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;let n="";for(let r=0;r<4;r++){let t="thisRC = rc;";r%2===1&&(t+="thisRC.z += 1;"),r>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${r>0?"}":""}\n      `}this.userCode=`\n      ${yx(e)}\n      ${cb(t)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${t[1]};\n        int cols = ${t[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}function yx(t){const e=ub(["r","c","d"],t);return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${e}\n      return ivec3(r, c, d);\n    }\n  `}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vx{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;const[,r,i]=e.shape,[,a,o]=t.shape,s=[n&&a>1?r-1:r,n&&o>1?i-1:i],u=[n&&a>1?a-1:a,n&&o>1?o-1:o],c=s[0]/u[0],l=s[1]/u[1],f=1/c,d=1/l,h=2*Math.ceil(f)+2,p=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${f});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${p});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xx{constructor(t,e,n,r){this.variableNames=["A"],this.outputShape=[];const[i,a,o,s]=t;this.outputShape=[i,e,n,s];const u=[r&&e>1?a-1:a,r&&n>1?o-1:o],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wx{constructor(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,o,s]=t;this.outputShape=[i,e,n,s];const u=[r&&e>1?a-1:a,r&&n>1?o-1:o],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${s-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ox{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;const[,r,i]=e.shape,[,a,o]=t.shape,s=[n&&a>1?r-1:r,n&&o>1?i-1:i],u=[n&&a>1?a-1:a,n&&o>1?o-1:o],c=s[0]/u[0],l=s[1]/u[1],f=1/c,d=1/l,h=2*Math.ceil(f)+2,p=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${l});\n\n        const float invHeightScale = float(${f});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${p});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${u[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${u[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _x{constructor(t,e,n,r){this.variableNames=["A"],this.outputShape=[];const[i,a,o,s]=t;this.outputShape=[i,e,n,s];const u=[r&&e>1?a-1:a,r&&n>1?o-1:o],c=[r&&e>1?e-1:e,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${l})));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ax{constructor(t,e){this.variableNames=["x"];const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=t,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${t[0]} - coord - 1));\n        }\n      `);const r=n=>-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - coords[${n}] - 1`:`coords[${n}]`,i=t.map((t,e)=>r(e)).join(","),a=Qb(n);this.userCode=`\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jx{constructor(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=t;const r=ab("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,a=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,o=Qb(n);function s(t){return f(t)}function u(t){return t[n-1]="("+t[n-1]+" + 1)",f(t)}function c(t){return t[n-2]="("+t[n-2]+" + 1)",f(t)}function l(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",f(t)}function f(e){const n=t.map((t,n)=>d(n,e)),r=n.join(","),i=n.slice(-2).join(",");return`getChannel(getX(${r}), vec2(${i}))`}function d(n,r){return-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - ${r[n]} - 1`:""+r[n]}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${t[0]} - rc - 1),\n            ${t[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),\n                ${t[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${o} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${s(r.slice())};\n          if(${i}){\n            result.g = ${u(r.slice())};\n          }\n          if(${a}) {\n            result.b = ${c(r.slice())};\n            if(${i}) {\n              result.a = ${l(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kx{constructor(t,e,n,r,i,a,o=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const s=Qb(i.length),u=Qb(a.length);let c="";1===n?c="i":2===n&&(c="i, j");const l=`getIndices(${c})`;let f="";1===r?f="i":2===r&&(f="i, coords[1]");const d=`getUpdates(${f})`,h=e>1?"strides[j]":"strides";this.userCode=`\n        ${s} strides = ${s}(${i});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${e}; j++) {\n              int index = round(${l});\n              flattenedIndex += index * ${h};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${d};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cx{constructor(t,e){this.variableNames=["x","segmentIds"];const n=t.windowSize,r=t.batchSize,i=t.inSize,a=t.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];const s="0.0",u="sumValue",c=4*Math.floor(n/4),l=n%4,f="\n        sumValue += dot(values, segFilter);\n    ";let d="";i%n>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${s};\n\n      float getValue(int batch, int inIdx) {\n        ${d}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${h}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${a})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${a})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${f}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${f}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${f}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${f}\n        }\n        setOutput(${u});\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ex{constructor(t,e,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],o=[];for(let r=0;r<e.length;r++)o.push(""+n[r]),r<t&&a.push(""+n[r]);r=a.join(),i=o.join()}const a=Qb(n);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sx{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const e=Qb(this.rank),n=`uniform int start[${this.rank}];`,r=Fx(this.rank);let i;const a=t.map((t,e)=>`sourceLoc.${Dx[e]} = start[${e}] + coords.${Dx[e]};`);i=`\n        ${e} sourceLoc;\n        ${e} coords = getOutputCoords();\n        ${a.join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${i}\n        setOutput(getSource(${r}));\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}const Dx=["x","y","z","w","u","v"];function Fx(t){if(1===t)return"sourceLoc";if(t<=6)return Dx.slice(0,t).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nx{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;const e=Qb(this.rank),n=ab("coords",this.rank),r=ab("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${i})`,o=`\n      result.x = ${a};\n      if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${a};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${t[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${a};\n        if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${a};\n        }\n      }\n    `,u=this.rank<=4?`sourceLoc = coords +\n            ${e}(${t.map((t,e)=>`start[${e}]`).join()});`:t.map((t,e)=>`${r[e]} = ${n[e]} + start[${e}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${e} coords = getOutputCoords();\n        ${e} sourceLoc;\n        ${u}\n        vec4 result = vec4(0.);\n        ${o}\n        ${s}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tx{constructor(t,e,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=Qb(n.length),a=Qb(n.length);let o="";if(1===r)o="coords * strides + begin";else{let t=0;o=n.map((e,r)=>(t++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${t-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${t});\n      ${i} strides = ${i}(${e});\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${o}));\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mx{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,e,n){const r=zx(e,n),i=Lx(t,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const a=Rx(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const t=this.freeTextures[i].shift();return this.usedTextures[i].push(t),t}let o;return r===Bm.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===Bm.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):r===Bm.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===Bm.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===Bm.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(t,e,n,r){if(null==this.freeTextures)return;const i=zx(n,r),a=Lx(e,i,r);a in this.freeTextures||(this.freeTextures[a]=[]);const o=Rx(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Object(f["Ce"])().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(t),this._numBytesAllocated-=o):(this.freeTextures[a].push(t),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const u=this.usedTextures[a],c=u.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const e=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: "+this._numBytesAllocated),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const t in this.freeTextures)this.freeTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});for(const t in this.usedTextures)this.usedTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Ix(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;throw new Error("Unknown internal format "+e)}function Rx(t,e,n,r,i){const a=$x(e,r);let o;if(i){const[e,n]=Um(t[0],t[1]);o=e*n}else{const[e,n]=zm(t[0],t[1]);o=e*n}const s=Ix(n,a);return o*s}function $x(t,e){switch(t){case Bm.PACKED_2X2_FLOAT32:return Mv(e);case Bm.PACKED_2X2_FLOAT16:return Rv(e);case Bm.UNPACKED_FLOAT32:return Ev(e);case Bm.UNPACKED_FLOAT16:return Dv(e);case Bm.PACKED_4X1_UNSIGNED_BYTE:return Nv(e);default:throw new Error("Unknown physical texture type "+t)}}function Bx(t){return Object(f["Ce"])().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Bm.PACKED_2X2_FLOAT32:Bm.UNPACKED_FLOAT32:t?Bm.PACKED_2X2_FLOAT16:Bm.UNPACKED_FLOAT16}function zx(t,e){if(t===$m.UPLOAD)return Bm.PACKED_2X2_FLOAT32;if(t===$m.RENDER||null==t)return Bx(e);if(t===$m.DOWNLOAD||t===$m.PIXELS)return Bm.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function Lx(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Px{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let a=0;a<n.length;a++)n[a]=t[a]*e[a];this.outputShape=n,this.rank=n.length;const r=Qb(this.rank),i=Ux(t);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function Ux(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(1===e)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wx{constructor(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const qx="if (isnan(x)) return x;",Vx="return x;",Gx="return abs(x);",Hx=qx+"\n  return (x < 0.0) ? 0.0 : x;\n",Xx=qx+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Yx="return (x >= 0.0) ? x : (exp(x) - 1.0);",Kx=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${f["Dd"].SELU_SCALEALPHA};\n  float scale = ${f["Dd"].SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`;function Jx(t=0){return qx+`\n    return x > 0.0 ? 1.0 : float(${t});\n  `}const Zx="return -x;",Qx="return ceil(x);",tw="return floor(x);",ew="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",nw="return float(isnan(x));",rw="return float(isinf(x));",iw="return float(!isnan(x) && !isinf(x));",aw="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",ow="return exp(x);",sw="return exp(x) - 1.0;",uw="if (x < 0.0) return NAN;\n  return log(x);",cw="return log(1.0 + x);",lw="return sqrt(x);",fw="return inversesqrt(x);",dw="return 1.0 / (1.0 + exp(-1.0 * x));",hw="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",pw=qx+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",mw=qx+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",gw=qx+"\n  return atan(x);\n",bw="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",yw="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",vw="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",xw=qx+"return log(x + sqrt(x * x + 1.0));",ww=qx+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",Ow=qx+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",_w=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${f["Dd"].ERF_P};\n  float a1 = ${f["Dd"].ERF_A1};\n  float a2 = ${f["Dd"].ERF_A2};\n  float a3 = ${f["Dd"].ERF_A3};\n  float a4 = ${f["Dd"].ERF_A4};\n  float a5 = ${f["Dd"].ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,Aw="return 1.0 / x;",jw="return float(!(x >= 1.0));",kw="return float(int(x));",Cw="return x;",Ew="return x;",Sw="\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",Dw="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Fw="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Nw="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n";class Tw{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${e}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mw{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;const e=t.length,n=ab("rc",e),r=Qb(e),i=ob(e,n),a=n.slice(-2),o=e<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${o}));\n      }\n    `}}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{segment_util:Iw}=f["Dd"],Rw=f["of"].split,$w=f["of"].tile,Bw=f["of"].topkImpl,zw=f["of"].whereImpl,Lw=1e-7,Pw=1e-4,Uw={};function Ww(t){return t in Uw||(Uw[t]={}),Uw[t]}function qw(t,e=!1){if("linear"===t)return e?Ew:Vx;if("relu"===t)return e?Dw:Hx;if("elu"===t)return e?Nw:Yx;if("relu6"===t)return e?Fw:Xx;if("prelu"===t)return e?Dy:jy;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}const Vw=128,Gw=600;function Hw(){return null==Object(f["Ce"])().global.screen?1024:Object(f["Ce"])().global.screen.height*Object(f["Ce"])().global.screen.width*window.devicePixelRatio*Gw/1024/1024}const Xw=1e3;class Yw extends f["zb"]{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!Object(f["Ce"])().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){const t=Tm(Object(f["Ce"])().getNumber("WEBGL_VERSION"));this.binaryCache=Ww(Object(f["Ce"])().getNumber("WEBGL_VERSION")),this.gpgpu=new Gv(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=t,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;this.textureManager=new Mx(this.gpgpu),this.numMBBeforeWarning=Hw(),this.texData=new f["O"](this,Object(f["Be"])())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(t,e,n){if((Object(f["Ce"])().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(f["Ce"])().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:$m.UPLOAD,refCount:1}),r}incRef(t){const e=this.texData.get(t);e.refCount++}decRef(t){if(this.texData.has(t)){const e=this.texData.get(t);e.refCount--}}move(t,e,n,r){if(Object(f["Ce"])().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:$m.UPLOAD,refCount:1})}disposeIntermediateTensorInfo(t){const e=t.dataId;if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--,t.refCount<1&&this.disposeData(e)}}readSync(t){const e=this.texData.get(t),{values:n,dtype:r,complexTensors:i,slice:a,shape:o,isPacked:s}=e;if(null!=a){let e;e=s?new Tw(o,Cw):new Wx(o,Cw);const n=this.runWebGLProgram(e,[{dataId:t,shape:o,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;const u=null!=this.activeTimers;let c,l;if(u&&(c=f["fi"].now()),"complex64"===r){const t=i.real.dataSync(),e=i.imag.dataSync();l=f["Dd"].mergeRealAndImagArrays(t,e)}else l=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=f["fi"].now()-c),this.convertAndCacheOnCPU(t,l)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const e=this.texData.get(t),{values:n,shape:r,slice:i,dtype:a,complexTensors:o,isPacked:s}=e;if(null!=i){let e;e=s?new Tw(r,Cw):new Wx(r,Cw);const n=this.runWebGLProgram(e,[{dataId:t,shape:r,dtype:a}],a),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(t);if(!Object(f["Ce"])().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Object(f["Ce"])().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,c,l=null;if("complex64"!==a&&Object(f["Ce"])().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(t);const e=this.texData.get(u.dataId);l=this.gpgpu.createBufferFromTexture(e.texture,...Pm(r))}if(this.pendingRead.set(t,[]),"complex64"!==a&&await this.gpgpu.createAndWaitForFence(),"complex64"===a){const t=await Promise.all([o.real.data(),o.imag.data()]),e=t[0],n=t[1];c=f["Dd"].mergeRealAndImagArrays(e,n)}else if(null==l)c=this.getValuesFromTexture(t);else{const t=f["fi"].sizeFromShape(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(l,t)}null!=u&&this.disposeIntermediateTensorInfo(u);const d=this.convertAndCacheOnCPU(t,c),h=this.pendingRead.get(t);return this.pendingRead.delete(t),h.forEach(t=>t(d)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),d}checkNumericalProblems(t){if(null!=t)for(let e=0;e<t.length;e++){const n=t[e];if(!Ym(n)){if(Object(f["Ce"])().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:e,dtype:n,isPacked:r}=this.texData.get(t),i=f["fi"].sizeFromShape(e);if(Object(f["Ce"])().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(t),r=this.texData.get(n.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...Pm(e)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),a}const a=Object(f["Ce"])().getBool("WEBGL_PACK")&&!0===r,o=a?_g(e):e,s=a?new mv(o):new pv(o),u=this.runWebGLProgram(s,[{shape:o,dtype:n,dataId:t}],"float32"),c=this.texData.get(u.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),l}async time(t){const e=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t();const i=f["fi"].flatten(this.activeTimers.map(t=>t.query)).filter(t=>null!=t),a=f["fi"].flatten(this.activeTimers.map(t=>t.name)).filter(t=>null!=t);this.activeTimers=e,r&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(i);o["kernelMs"]=f["fi"].sum(t),o["getExtraProfileInfo"]=()=>t.map((t,e)=>({name:a[e],ms:t})).map(t=>`${t.name}: ${t.ms}`).join(", ")}else o["kernelMs"]={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:f["fi"].now(),endMs:null}}endTimer(t){return Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=f["fi"].now(),t)}async getQueryTime(t){if(Object(f["Ce"])().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const e=t;return e.endMs-e.startMs}disposeData(t){if(this.pendingDisposal.has(t))return;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(!this.texData.has(t))return;this.releaseGPUData(t);const{complexTensors:e}=this.texData.get(t);null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}releaseGPUData(t){const{texture:e,dtype:n,texShape:r,usage:i,isPacked:a,slice:o}=this.texData.get(t),s=o&&o.origDataId||t,u=this.dataRefCount.get(s);u>1?this.dataRefCount.set(s,u-1):(this.dataRefCount.delete(s),null!=e&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(e,r,i,a)));const c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture}getDataInfo(t){return this.texData.get(t)}getCPUBackend(){return Object(f["Ce"])().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Object(f["Be"])().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(t,e=Vw){const n=this.getCPUBackend();return this.warnedAboutCPUBackend||null!=n||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=n&&t.every(t=>null==this.texData.get(t.dataId).texture&&f["fi"].sizeFromShape(t.shape)<e)}getGPGPUContext(){return this.gpgpu}complex(t,e){const n=this.makeOutput(t.shape,"complex64"),r=this.texData.get(n.dataId);return r.complexTensors={real:Object(f["Be"])().keep(t.clone()),imag:Object(f["Be"])().keep(e.clone())},n}real(t){const e=this.texData.get(t.dataId);return e.complexTensors.real.clone()}imag(t){const e=this.texData.get(t.dataId);return e.complexTensors.imag.clone()}slice(t,e,n){if(this.shouldExecuteOnCPU([t])){const r=Jg(this.texData.get(t.dataId).values,e,n,t.shape,t.dtype);return this.makeOutput(n,t.dtype,r)}if(0===f["fi"].sizeFromShape(n))return Object(f["Jh"])([],n,t.dtype);const{isPacked:r}=this.texData.get(t.dataId),i=f["oh"].isSliceContinous(t.shape,e,n);if(r||!i){const r=Object(f["Ce"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Nx(n):new Sx(n),i=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,i)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)}shallowSlice(t,e,n){const r=this.texData.get(t.dataId),i=this.makeOutput(n,t.dtype),a=this.texData.get(i.dataId);Object.assign(a,r),a.shape=n,a.dtype=t.dtype;let o=f["oh"].computeFlatOffset(e,t.strides);r.slice&&(o+=r.slice.flatOffset),a.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||t.dataId};const s=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,s+1),i}stridedSlice(t,e,n,r){const i=this.tryRunOnCpuOrThrow([t],()=>this.cpuBackend.stridedSlice(t,e,n,r));if(i)return i;const a=f["oh"].computeOutShape(e,n,r);if(a.some(t=>0===t))return Object(f["Jh"])([],a);const o=new Tx(e,r,a);return this.compileAndRun(o,[t])}reverse(t,e){const n=Object(f["Ce"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jx(t.shape,e):new Ax(t.shape,e);return this.compileAndRun(n,[t])}concat(t,e){if("complex64"===t[0].dtype){const n=t.map(t=>Object(f["Eg"])(t)),r=t.map(t=>Object(f["ff"])(t));return Object(f["Sd"])(this.concat(n,e),this.concat(r,e))}if(1===t.length)return t[0];if(t.length>Object(f["Ce"])().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const n=Math.floor(t.length/2),r=this.concat(t.slice(0,n),e),i=this.concat(t.slice(n),e);return this.concat([r,i],e)}if(Object(f["Ce"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){const n=new Xy(t.map(t=>t.shape),e);return this.compileAndRun(n,t)}const n=f["Dd"].computeOutShape(t.map(t=>t.shape),e),r=t.map(t=>t.as2D(-1,f["fi"].sizeFromShape(t.shape.slice(e)))),i=new Hy(r.map(t=>t.shape)),a=this.compileAndRun(i,r);return a.reshape(n)}neg(t){const e=this.tryRunOnCpuOrThrow([t],()=>this.cpuBackend.neg(t));if(e)return e;if(Object(f["Ce"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Zx,t.dtype);const n=new Wx(t.shape,Zx);return this.compileAndRun(n,[t])}batchMatMul(t,e,n,r){const i=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2],o=n?t.shape[1]:t.shape[2],[s,,]=t.shape;if((1===i||1===a)&&o>Xw){n&&(t=Object(f["Xh"])(t,[0,2,1])),r&&(e=Object(f["Xh"])(e,[0,2,1]));const i=1===a?t:t.as3D(s,o,1),u=1===a?2:1,c=1===a?e.as3D(s,1,o):e;return this.multiply(i,c).sum(u,!0)}const u=Object(f["ei"])(t.dtype,e.dtype),c=new ix(t.shape,[s,i,a],n,r);return this.compileAndRun(c,[t,e],u)}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:a,preluActivationWeights:o}){const s=n?t.shape[2]:t.shape[1],u=r?e.shape[1]:e.shape[2],[c,,]=t.shape,l=Object(f["ei"])(t.dtype,e.dtype),d=null!=i,h=null!=o,p=a?qw(a,!0):null,m=new ix(t.shape,[c,s,u],n,r,d,p,h),g=[t,e];return i&&g.push(i),o&&g.push(o),this.compileAndRun(m,g,l)}multiply(t,e){if("complex64"===t.dtype){const n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),i=new oy(ay.REAL,t.shape,e.shape),a=new oy(ay.IMAG,t.shape,e.shape),o=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag),this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)],s=this.compileAndRun(i,o),u=this.compileAndRun(a,o),c=this.complex(s,u);return s.dispose(),u.dispose(),c}const n=Object(f["ei"])(t.dtype,e.dtype);if(this.shouldExecuteOnCPU([t,e])){const r=this.texData.get(t.dataId),i=this.texData.get(e.dataId),[a,o]=Yg(t.shape,e.shape,r.values,i.values,n);return this.makeOutput(o,n,a)}if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,ly,t.dtype);const r=new ky(ly,t.shape,e.shape);return this.compileAndRun(r,[t,e],t.dtype)}localResponseNormalization4D(t,e,n,r,i){const a=Object(f["Ce"])().getBool("WEBGL_PACK_NORMALIZATION")?new ex(t.shape,e,n,r,i):new Qv(t.shape,e,n,r,i);return this.compileAndRun(a,[t])}LRNGrad(t,e,n,r,i,a,o){const s=new tx(e.shape,r,i,a,o);return this.compileAndRun(s,[e,n,t])}tile(t,e){if("string"===t.dtype){const n=this.readSync(t.dataId),r=n.map(t=>f["fi"].decodeString(t)),i=Object(f["Nd"])(t.shape,t.dtype,r);return $w(i,e)}const n=new Px(t.shape,e);return this.compileAndRun(n,[t])}pad(t,e,n){const r=Object(f["Ce"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hx(t.shape,e,n):new dx(t.shape,e,n);return this.compileAndRun(r,[t])}gather(t,e,n){const r=this.tryRunOnCpuOrThrow([t,e],()=>this.cpuBackend.gather(t,e,n));if(r)return r;const i=new wv(t.shape,e.size,n);return this.compileAndRun(i,[t,e])}batchToSpaceND(t,e,n){f["fi"].assert(t.rank<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const r=e.reduce((t,e)=>t*e),i=f["Dd"].getReshaped(t.shape,e,r),a=f["Dd"].getPermuted(i.length,e.length),o=f["Dd"].getReshapedPermuted(t.shape,e,r),s=f["Dd"].getSliceBeginCoords(n,e.length),u=f["Dd"].getSliceSize(o,n,e.length);return Object(f["Xh"])(t.reshape(i),a).reshape(o).slice(s,u)}spaceToBatchND(t,e,n){f["fi"].assert(t.rank<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const r=e.reduce((t,e)=>t*e),i=[[0,0]];i.push(...n);for(let l=1+e.length;l<t.shape.length;++l)i.push([0,0]);const a=t.pad(i),o=f["Dd"].getReshaped(a.shape,e,r,!1),s=f["Dd"].getPermuted(o.length,e.length,!1),u=f["Dd"].getReshapedPermuted(a.shape,e,r,!1),c=Object(f["Xh"])(a.reshape(o),s);return Object(f["Mg"])(c,u)}reduce(t,e,n){const r=t.shape[0],i=t.shape[1],a=f["Dd"].computeOptimalWindowSize(i),o=Math.ceil(i/a),s={windowSize:a,inSize:i,batchSize:r,outSize:o},u=new gx(s,e),c=this.compileAndRun(u,[t],n);return 1===c.shape[1]?c:this.reduce(c,e,n)}argReduce(t,e,n=null){let r=t.shape[0],i=t.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);const a=f["Dd"].computeOptimalWindowSize(i),o={windowSize:a,inSize:i,batchSize:r,outSize:Math.ceil(i/a)},s=new rb(o,e,null==n),u=[t];null!=n&&u.push(n);const c=this.compileAndRun(s,u,"int32");return 1===c.shape[1]?c:this.argReduce(t,e,c)}argReducePacked(t,e,n=null){const r=null!=n?n.shape:t.shape,i=r[r.length-1],a=f["Dd"].computeOptimalWindowSize(i),o=new ny(r,a,e,null==n),s=null==n?[t]:[t,n],u=this.compileAndRun(o,s,"int32");return u.rank===t.rank?this.argReducePacked(t,e,u):u}sum(t,e){f["Dd"].assertAxesAreInnerMostDims("sum",e,t.rank);const[n,r]=f["Dd"].computeOutAndReduceShapes(t.shape,e),i=f["fi"].sizeFromShape(r),a=t.as2D(-1,i),o=f["Gh"](t.dtype);return this.reduce(a,"sum",o).reshape(n)}prod(t,e){const n=this.tryRunOnCpuOrThrow([t],()=>this.cpuBackend.prod(t,e));if(n)return n;const[r,i]=f["Dd"].computeOutAndReduceShapes(t.shape,e),a=f["fi"].sizeFromShape(i),o=t.as2D(-1,a),s=f["Gh"](t.dtype);return this.reduce(o,"prod",s).reshape(r)}unsortedSegmentSum(t,e,n){let r=0;const i=f["Dd"].getAxesPermutation([r],t.rank);let a=t;null!=i&&(a=Object(f["Xh"])(t,i),r=f["Dd"].getInnerMostAxes(1,t.rank)[0]);const o=Iw.computeOutShape(a.shape,r,n),s=f["fi"].sizeFromShape([a.shape[r]]),u=a.as2D(-1,s),c=f["Gh"](t.dtype);let l=this.segOpCompute(u,"unsortedSegmentSum",e,c,n).reshape(o);return null!=i&&(l=Object(f["Xh"])(l,f["Dd"].getUndoAxesPermutation(i))),l}segOpCompute(t,e,n,r,i){const a=t.shape[0],o=t.shape[1],s=Iw.segOpComputeOptimalWindowSize(o,i),u={windowSize:s,inSize:o,batchSize:a,numSegments:i},c=new Cx(u,e),l=this.compileAndRun(c,[t,n],r);return l.shape[1]===i?l:(n=Object(f["Cg"])(0,i).tile([o/s]),this.segOpCompute(l,e,n,r,i))}argMinMaxReduce(t,e,n){const r=[e];if(f["Dd"].assertAxesAreInnerMostDims("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,t.rank),!Object(f["Ce"])().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){const[e,i]=f["Dd"].computeOutAndReduceShapes(t.shape,r),a=f["fi"].sizeFromShape(i),o=t.as2D(-1,a);return this.argReduce(o,n).reshape(e)}return this.argReducePacked(t,n)}argMin(t,e){return this.argMinMaxReduce(t,e,"min")}argMax(t,e){return this.argMinMaxReduce(t,e,"max")}cumsum(t,e,n,r){if(e!==t.rank-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${t.rank-1} but got axis=`+e);const i=t.shape[e];let a=t;for(let o=0;o<=Math.ceil(Math.log2(i))-1;o++){const e=new sv(t.shape,!1,r),n=e.getCustomSetupFunc(o),i=a;a=this.compileAndRun(e,[a],a.dtype,n),i.dispose()}if(n){const e=new sv(t.shape,n,r),i=a;a=this.compileAndRun(e,[a]),i.dispose()}return a}equal(t,e){if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ny,"bool");const n=new ky(hy,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}notEqual(t,e){if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ty,"bool");const n=new ky(py,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}less(t,e){const n=this.tryRunOnCpuOrThrow([t,e],()=>this.cpuBackend.less(t,e));if(n)return n;if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,My,"bool");const r=new ky(my,t.shape,e.shape);return this.compileAndRun(r,[t,e],"bool")}lessEqual(t,e){if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Iy,"bool");const n=new ky(gy,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}greater(t,e){const n=this.tryRunOnCpuOrThrow([t,e],()=>this.cpuBackend.greater(t,e));if(n)return n;if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ry,"bool");const r=new ky(by,t.shape,e.shape);return this.compileAndRun(r,[t,e],"bool")}greaterEqual(t,e){if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,$y,"bool");const n=new ky(yy,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}logicalNot(t){const e=new Wx(t.shape,jw);return this.compileAndRun(e,[t])}logicalAnd(t,e){if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,By,"bool");const n=new ky(vy,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}logicalOr(t,e){if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,zy,"bool");const n=new ky(xy,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}select(t,e,n){const r=new Ex(t.rank,e.shape,e.rank);return this.compileAndRun(r,[t,e,n],Object(f["ei"])(e.dtype,n.dtype))}where(t){f["Dd"].warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const e=t.dataSync();return zw(t.shape,e)}topk(t,e,n){const r=t.dataSync();return Bw(r,t.shape,t.dtype,e,n)}min(t,e){f["Dd"].assertAxesAreInnerMostDims("min",e,t.rank);const[n,r]=f["Dd"].computeOutAndReduceShapes(t.shape,e),i=f["fi"].sizeFromShape(r),a=t.as2D(-1,i);return this.reduce(a,"min",a.dtype).reshape(n)}minimum(t,e){const n=this.tryRunOnCpuOrThrow([t,e],()=>this.cpuBackend.minimum(t,e));if(n)return n;const r=Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Wy(Py,t.shape,e.shape):new ky(Oy,t.shape,e.shape);return this.compileAndRun(r,[t,e])}mod(t,e){const n=Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Wy(Uy,t.shape,e.shape):new ky(_y,t.shape,e.shape);return this.compileAndRun(n,[t,e])}maximum(t,e){const n=this.tryRunOnCpuOrThrow([t,e],()=>this.cpuBackend.maximum(t,e));if(n)return n;const r=Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Wy(Ly,t.shape,e.shape):new ky(wy,t.shape,e.shape);return this.compileAndRun(r,[t,e])}all(t,e){f["Dd"].assertAxesAreInnerMostDims("all",e,t.rank);const[n,r]=f["Dd"].computeOutAndReduceShapes(t.shape,e),i=f["fi"].sizeFromShape(r),a=t.as2D(-1,i);return this.reduce(a,"all",a.dtype).reshape(n)}any(t,e){f["Dd"].assertAxesAreInnerMostDims("any",e,t.rank);const[n,r]=f["Dd"].computeOutAndReduceShapes(t.shape,e),i=f["fi"].sizeFromShape(r),a=t.as2D(-1,i);return this.reduce(a,"any",a.dtype).reshape(n)}floorDiv(t,e){const n=fy,r="int32";if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ey,r);const i=new ky(n,t.shape,e.shape);return this.compileAndRun(i,[t,e],r)}add(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,uy);const n=Object(f["ei"])(t.dtype,e.dtype);if(this.shouldExecuteOnCPU([t,e])){const r=this.texData.get(t.dataId),i=this.texData.get(e.dataId),[a,o]=Ug(t.shape,e.shape,r.values,i.values,n);return this.makeOutput(o,n,a)}if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,uy,n);const r=new ky(uy,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)}packedUnaryOp(t,e,n){const r=new Tw(t.shape,e);return this.compileAndRun(r,[t],n)}packedBinaryOp(t,e,n,r,i=!1){const a=new Wy(n,t.shape,e.shape,i);return this.compileAndRun(a,[t,e],r)}complexSeparableBinaryOp(t,e,n){const r=this.texData.get(t.dataId),i=this.texData.get(e.dataId),[a,o]=[[r.complexTensors.real,i.complexTensors.real],[r.complexTensors.imag,i.complexTensors.imag]].map(r=>{const[i,a]=r,o=this.makeComplexComponentTensorInfo(t,i),s=this.makeComplexComponentTensorInfo(e,a),u=new ky(n,t.shape,e.shape);return this.compileAndRun(u,[o,s],Object(f["ei"])(i.dtype,a.dtype))}),s=this.complex(a,o);return a.dispose(),o.dispose(),s}makeComplexComponentTensorInfo(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}addN(t){if(1===t.length)return t[0];if(t.length>Object(f["Ce"])().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}const e=t.map(t=>t.dtype).reduce((t,e)=>Object(f["ei"])(t,e)),n=t.map(t=>t.shape),r=Object(f["Ce"])().getBool("WEBGL_PACK"),i=r?new nb(t[0].shape,n):new eb(t[0].shape,n);return this.compileAndRun(i,t,e)}subtract(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,cy);const n=Object(f["ei"])(t.dtype,e.dtype);if(this.shouldExecuteOnCPU([t,e])){const r=this.texData.get(t.dataId),i=this.texData.get(e.dataId),[a,o]=Zg(t.shape,e.shape,r.values,i.values,n);return this.makeOutput(o,n,a)}if(Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,cy,t.dtype);const r=new ky(cy,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)}pow(t,e){const n=Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS"),r=n?new Wy(Sy,t.shape,e.shape):new ky(dy,t.shape,e.shape),i=Object(f["ei"])(t.dtype,e.dtype);return this.compileAndRun(r,[t,e],i)}ceil(t){if(this.shouldExecuteOnCPU([t])){const e=Wg(this.texData.get(t.dataId).values,t.dtype);return this.makeOutput(t.shape,t.dtype,e)}if(Object(f["Ce"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Qx,t.dtype);const e=new Wx(t.shape,Qx);return this.compileAndRun(e,[t])}floor(t){if(this.shouldExecuteOnCPU([t])){const e=Gg(this.texData.get(t.dataId).values,t.dtype);return this.makeOutput(t.shape,t.dtype,e)}if(Object(f["Ce"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,tw,t.dtype);const e=new Wx(t.shape,tw);return this.compileAndRun(e,[t])}sign(t){const e=new Wx(t.shape,ew);return this.compileAndRun(e,[t])}isNaN(t){const e=new Wx(t.shape,nw);return this.compileAndRun(e,[t],"bool")}isInf(t){const e=new Wx(t.shape,rw);return this.compileAndRun(e,[t],"bool")}isFinite(t){const e=new Wx(t.shape,iw);return this.compileAndRun(e,[t],"bool")}round(t){const e=new Wx(t.shape,aw);return this.compileAndRun(e,[t])}exp(t){if(this.shouldExecuteOnCPU([t])){const e=qg(this.texData.get(t.dataId).values,t.dtype);return this.makeOutput(t.shape,t.dtype,e)}if(Object(f["Ce"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,ow,t.dtype);const e=new Wx(t.shape,ow);return this.compileAndRun(e,[t])}expm1(t){if(this.shouldExecuteOnCPU([t])){const e=Vg(this.texData.get(t.dataId).values,t.dtype);return this.makeOutput(t.shape,t.dtype,e)}if(Object(f["Ce"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,sw,t.dtype);const e=new Wx(t.shape,sw);return this.compileAndRun(e,[t])}softmax(t,e){const n=f["fi"].parseAxisParam([e],t.shape),r=Object(f["Jf"])(t,n),i=f["Dd"].expandShapeToKeepDim(r.shape,n),a=this.subtract(t,r.reshape(i)),o=this.exp(a),s=this.sum(o,n).reshape(i);return Object(f["se"])(o,s)}log(t){if(this.shouldExecuteOnCPU([t])){const e=Hg(this.texData.get(t.dataId).values,t.dtype);return this.makeOutput(t.shape,t.dtype,e)}if(Object(f["Ce"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Sw,t.dtype);const e=new Wx(t.shape,uw);return this.compileAndRun(e,[t])}log1p(t){const e=new Wx(t.shape,cw);return this.compileAndRun(e,[t])}sqrt(t){const e=new Wx(t.shape,lw);return this.compileAndRun(e,[t])}rsqrt(t){if(this.shouldExecuteOnCPU([t])){const e=Kg(this.texData.get(t.dataId).values,t.dtype);return this.makeOutput(t.shape,t.dtype,e)}const e=new Wx(t.shape,fw);return this.compileAndRun(e,[t])}reciprocal(t){const e=new Wx(t.shape,Aw);return this.compileAndRun(e,[t])}relu(t){let e;return e=Object(f["Ce"])().getBool("WEBGL_PACK")?new Tw(t.shape,Dw):new Wx(t.shape,Hx),this.compileAndRun(e,[t])}relu6(t){let e;return e=Object(f["Ce"])().getBool("WEBGL_PACK")?new Tw(t.shape,Fw):new Wx(t.shape,Xx),this.compileAndRun(e,[t])}prelu(t,e){const n=Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Wy(Dy,t.shape,e.shape):new ky(jy,t.shape,e.shape);return this.compileAndRun(n,[t,e])}elu(t){if(Object(f["Ce"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Nw,t.dtype);const e=new Wx(t.shape,Yx);return this.compileAndRun(e,[t])}eluDer(t,e){const n=Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Wy(Fy,t.shape,e.shape):new ky(Ay,t.shape,e.shape);return this.compileAndRun(n,[t,e])}selu(t){const e=new Wx(t.shape,Kx);return this.compileAndRun(e,[t])}int(t){const e=new Wx(t.shape,kw);return this.compileAndRun(e,[t],"int32")}clip(t,e,n){let r;r=Object(f["Ce"])().getBool("WEBGL_PACK_CLIP")?new Vy(t.shape):new qy(t.shape);const i=r.getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,i)}abs(t){if(this.shouldExecuteOnCPU([t])&&"complex64"!==t.dtype){const e=Pg(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,e)}if(Object(f["Ce"])().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Gx,t.dtype);const e=new Wx(t.shape,Gx);return this.compileAndRun(e,[t])}complexAbs(t){const e=this.texData.get(t.dataId),n=new Gy(t.shape),r=[this.makeComplexComponentTensorInfo(t,e.complexTensors.real),this.makeComplexComponentTensorInfo(t,e.complexTensors.imag)];return this.compileAndRun(n,r)}sigmoid(t){const e=new Wx(t.shape,dw);return this.compileAndRun(e,[t])}softplus(t){const e=new Wx(t.shape,hw);return this.compileAndRun(e,[t])}asin(t){const e=new Wx(t.shape,pw);return this.compileAndRun(e,[t])}acos(t){const e=new Wx(t.shape,mw);return this.compileAndRun(e,[t])}atan(t){const e=new Wx(t.shape,gw);return this.compileAndRun(e,[t])}sinh(t){const e=new Wx(t.shape,bw);return this.compileAndRun(e,[t])}cosh(t){const e=new Wx(t.shape,yw);return this.compileAndRun(e,[t])}tanh(t){const e=new Wx(t.shape,vw);return this.compileAndRun(e,[t])}asinh(t){const e=new Wx(t.shape,xw);return this.compileAndRun(e,[t])}acosh(t){const e=new Wx(t.shape,ww);return this.compileAndRun(e,[t])}atanh(t){const e=new Wx(t.shape,Ow);return this.compileAndRun(e,[t])}erf(t){const e=new Wx(t.shape,_w);return this.compileAndRun(e,[t])}step(t,e){const n=new Wx(t.shape,Jx(e));return this.compileAndRun(n,[t])}conv2dByMatMul(t,e,n,r,i,a){const o=t.shape,s=this.texData.get(t.dataId),u=n.inChannels,c=o[0]*o[1]*o[2],l=n.outChannels,d="channelsLast"===n.dataFormat,h=!1,p=!1,m=(1===c||1===l)&&u>Xw,g=o[2]%2!==0&&!!s.isPacked;if(m||!Object(f["Ce"])().getBool("WEBGL_LAZILY_UNPACK")||!Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!g){const s=d?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],u=Object(f["Mg"])(t,[1,s,n.inChannels]),c=Object(f["Mg"])(e,[1,n.inChannels,n.outChannels]),l=this.fusedBatchMatMul({a:u,b:c,transposeA:h,transposeB:p,bias:r,activation:i,preluActivationWeights:a});return Object(f["Mg"])(l,n.outShape)}const b=d?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),y={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},v=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,f["fi"].assert(kg(s.shape,y.shape),()=>`packed reshape ${s.shape} to ${y.shape} isn't free`);const x=Object(f["Mg"])(e,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:y,b:x,transposeA:h,transposeB:p,bias:r,activation:i,preluActivationWeights:a}),O=this.texData.get(w.dataId);return f["fi"].assert(O.isPacked,()=>"batchMatMul result is expected to be packed"),s.shape=v,O.shape=n.outShape,Object(f["Be"])().makeTensorFromDataId(w.dataId,n.outShape,w.dtype)}conv2dWithIm2Row(t,e,n,r,i,a){const{filterWidth:o,filterHeight:s,inChannels:u,outWidth:c,outHeight:l,dataFormat:f}=n,d="channelsLast"===f,h=o*s*u,p=l*c,m=[h,p],g=!0,b=!1,y=t.squeeze([0]),v=e.reshape([1,h,-1]),x=new Zv(m,y.shape,n),w=this.compileAndRun(x,[y]).reshape([1,m[0],m[1]]),O=null!=r,_=null!=a,A=i?qw(i,!0):null,j=new ix(w.shape,[1,p,n.outChannels],g,b,O,A,_),k=[w,v];r&&k.push(r),_&&k.push(a);const C=this.compileAndRun(j,k);return d?C.reshape([1,l,c,n.outChannels]):C.reshape([1,n.outChannels,l,c])}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:a}){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n,r,i,a);if(Object(f["Ce"])().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n,r,i,a);const o=null!=r,s=null!=a,u=i?qw(i,!1):null,c=new nv(n,o,u,s),l=[t,e];return r&&l.push(r),a&&l.push(a),this.compileAndRun(c,l)}conv2d(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(Object(f["Ce"])().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);const r=new nv(n);return this.compileAndRun(r,[t,e])}conv2dDerInput(t,e,n){const r=new Jy(n);return this.compileAndRun(r,[t,e])}conv2dDerFilter(t,e,n){const r=new Ky(n);return this.compileAndRun(r,[t,e])}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:a}){const o=Object(f["Ce"])().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels===1,s=i?qw(i,o):null,u=[t,e],c=null!=r,l=null!=a;let d;return c&&u.push(r),l&&u.push(a),o?(d=new av(n,c,s,l),this.compileAndRun(d,u)):(d=new iv(n,c,s,l),this.compileAndRun(d,u))}depthwiseConv2D(t,e,n){let r;return Object(f["Ce"])().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels===1?(r=new av(n),this.compileAndRun(r,[t,e])):(r=new iv(n),this.compileAndRun(r,[t,e]))}depthwiseConv2DDerInput(t,e,n){const r=new ev(n);return this.compileAndRun(r,[t,e])}depthwiseConv2DDerFilter(t,e,n){const r=new tv(n);return this.compileAndRun(r,[t,e])}conv3d(t,e,n){const r=new rv(n);return this.compileAndRun(r,[t,e])}conv3dDerInput(t,e,n){const r=new Qy(n);return this.compileAndRun(r,[t,e])}conv3dDerFilter(t,e,n){const r=new Zy(n);return this.compileAndRun(r,[t,e])}cast(t,e){return f["Dd"].castTensor(t,e,this)}unstack(t,e){const n=t.shape[e],r=new Array(t.rank-1);let i=0;for(let u=0;u<t.rank;u++)u!==e&&(r[i++]=t.shape[u]);const a=new Array(t.rank).fill(0),o=t.shape.slice();o[e]=1;const s=new Array(n);for(let u=0;u<s.length;u++)a[e]=u,s[u]=this.slice(t,a,o).reshape(r);return s}avgPool3d(t,e){const n=new mx(e,"avg",!1);return this.compileAndRun(n,[t],"float32")}avgPool3dBackprop(t,e,n){const r=new iy(n);return this.compileAndRun(r,[t],e.dtype)}maxPool3d(t,e){const n=new mx(e,"max",!1);return this.compileAndRun(n,[t],"float32")}maxPool3dBackprop(t,e,n,r){const i=!0,a=new mx(r,"max",i),o=this.compileAndRun(a,[e]),s=new rx(r),u=this.compileAndRun(s,[t,o],e.dtype);return o.dispose(),u}resizeBilinear(t,e,n,r){const i=Object(f["Ce"])().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new wx(t.shape,e,n,r):new xx(t.shape,e,n,r);return this.compileAndRun(i,[t],"float32")}resizeBilinearBackprop(t,e,n){const r=new vx(t,e,n);return this.compileAndRun(r,[t])}resizeNearestNeighbor(t,e,n,r){const i=new _x(t.shape,e,n,r);return this.compileAndRun(i,[t])}resizeNearestNeighborBackprop(t,e,n){const r=new Ox(t,e,n);return this.compileAndRun(r,[t])}multinomial(t,e,n,r){const i=e?t:Object(f["ph"])(t),a=i.shape[0],o=i.shape[1],s=new ax(a,o,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],"int32",u)}oneHot(t,e,n,r){const i=new ox(t.size,e,n,r);return this.compileAndRun(i,[t])}diag(t){const e=new hv(t.size);return this.compileAndRun(e,[t])}cropAndResize(t,e,n,r,i,a){const o=new ov(t.shape,e.shape,r,i,a);return this.compileAndRun(o,[t,e,n],"float32")}depthToSpace(t,e,n){f["fi"].assert(e>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+e);const r=t.shape[0],i="NHWC"===n?t.shape[1]:t.shape[2],a="NHWC"===n?t.shape[2]:t.shape[3],o="NHWC"===n?t.shape[3]:t.shape[1],s=i*e,u=a*e,c=o/(e*e),l="NHWC"===n?[r,s,u,c]:[r,c,s,u],d=new dv(l,e,n);return this.compileAndRun(d,[t])}split(t,e,n){return Rw(t,e,n)}scatterND(t,e,n){const{sliceRank:r,numUpdates:i,sliceSize:a,strides:o,outputSize:s}=f["Dd"].calculateShapes(e,t,n),u=[s/a,a],c=t.reshape([i,r]),l=e.reshape([i,a]);if(0===s)return f["Dd"].reshapeTensor(Object(f["Jh"])([]),n);const d=Object(f["Vg"])(0),h=new kx(i,r,c.rank,l.rank,o,u),p=this.compileAndRun(h,[l,c,d]);return p.reshape(n)}sparseToDense(t,e,n,r){const{sliceRank:i,numUpdates:a,strides:o,outputSize:s}=f["Dd"].calculateShapes(e,t,n),u=!1,c=new kx(a,i,t.rank,e.rank,o,[s,1],u),l=this.compileAndRun(c,[e,t,r]);return l.reshape(n)}fft(t){const e=!1;return this.fftImpl(t,e)}ifft(t){const e=!0;return this.fftImpl(t,e)}fftImpl(t,e){const n=this.texData.get(t.dataId),r=new vv(yv.REAL,t.shape,e),i=new vv(yv.IMAG,t.shape,e),a=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)],o=this.compileAndRun(r,a),s=this.compileAndRun(i,a),u=this.complex(o,s).as2D(t.shape[0],t.shape[1]);return o.dispose(),s.dispose(),u}gatherND(t,e){const n=e.shape,r=n[n.length-1],[i,a,o,s]=f["Dd"].prepareAndValidate(t,e),u=e.reshape([a,r]),c=t.reshape([t.size/o,o]),l=new _v(r,s,[a,o]),d=this.compileAndRun(l,[c,u]);return d.reshape(i)}fill(t,e,n){if(n=n||f["fi"].inferDtype(e),"string"===n){const r=f["fi"].getArrayFromDType(n,f["fi"].sizeFromShape(t));return r.fill(e),Object(f["Be"])().makeTensor(r,t,n,this)}{const r=new xv(t,e),i=r.getCustomSetupFunc(e);return this.compileAndRun(r,[],n,i)}}onesLike(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)}zerosLike(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)}linspace(t,e,n){return f["Dd"].linspaceImpl(t,e,n)}makeTensorInfo(t,e,n){const r=this.write(n,t,e);return this.texData.get(r).usage=null,{dataId:r,shape:t,dtype:e}}makeOutput(t,e,n){const{dataId:r}=this.makeTensorInfo(t,e,n);return Object(f["Be"])().makeTensorFromDataId(r,t,e,this)}unpackTensor(t){const e=new Mw(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}packTensor(t){const e=new sx(t.shape),n=!0;return this.runWebGLProgram(e,[t],t.dtype,null,n)}packedReshape(t,e){const n=[wg(t.shape),...Og(t.shape)],r={dtype:t.dtype,shape:n,dataId:t.dataId},i=[wg(e),...Og(e)],a=new bx(i,n),o=!0,s=this.runWebGLProgram(a,[r],t.dtype,null,o);return{dataId:s.dataId,shape:e,dtype:s.dtype}}decode(t){const e=this.texData.get(t),{isPacked:n,shape:r,dtype:i}=e,a=_g(r);let o;o=n?new fv(a):new lv(a);const s=!0,u=this.runWebGLProgram(o,[{shape:a,dtype:i,dataId:t}],i,null,s);return{dtype:i,shape:r,dataId:u.dataId}}runWebGLProgram(t,e,n,r,i=!1){const a=this.makeTensorInfo(t.outputShape,n),o=this.texData.get(a.dataId);if(t.packedOutput&&(o.isPacked=!0),t.outPackingScheme===Rm.DENSE){const e=Pm(t.outputShape);o.texShape=e.map(t=>2*t)}if(null!=t.outTexUsage&&(o.usage=t.outTexUsage),0===f["fi"].sizeFromShape(a.shape))return o.values=f["fi"].getTypedArrayFromDType(a.dtype,0),a;const s=[],u=e.map(e=>{if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&f["fi"].sizeFromShape(e.shape)<=Object(f["Ce"])().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!==!!t.packedInputs)e=n.isPacked?this.unpackTensor(e):this.packTensor(e),s.push(e),n=this.texData.get(e.dataId);else if(n.isPacked&&!kg(n.shape,e.shape)){const t=e,r=e.shape;e.shape=n.shape,e=this.packedReshape(e,r),s.push(e),n=this.texData.get(e.dataId),t.shape=r}return this.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(a.dataId);const c={shape:a.shape,texData:o,isUniform:!1},l=Jv(t,u,c),d=this.getAndSaveBinary(l,()=>Xv(this.gpgpu,t,u,c)),h=null!=this.activeTimers;let p;if(h&&(p=this.startTimer()),Kv(this.gpgpu,d,u,c,r),s.forEach(t=>this.disposeIntermediateTensorInfo(t)),h&&(p=this.endTimer(p),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(p)})),!Object(f["Ce"])().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===i){const t=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),t}return a}compileAndRun(t,e,n,r,i=!1){n=n||e[0].dtype;const a=this.runWebGLProgram(t,e,n,r,i);return Object(f["Be"])().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}getAndSaveBinary(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Object(f["Ce"])().getBool("IS_TEST")){const t=Object.keys(this.binaryCache);t.forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(f["Sh"])(()=>{if(!Object(f["Ce"])().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=Object(f["Ce"])().getBool("DEBUG");Object(f["Ce"])().set("DEBUG",!1);const e=this.abs(Object(f["Vg"])(1e-8)).dataSync()[0];if(Object(f["Ce"])().set("DEBUG",t),e>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?Lw:Pw}uploadToGPU(t){const e=this.texData.get(t),{shape:n,dtype:r,values:i,texture:a,usage:o,isPacked:s}=e;if(null!=a)return;const u=null!=this.activeTimers;let c;u&&(c=f["fi"].now());let l=e.texShape;if(null==l&&(l=Ag(n,s),e.texShape=l),null!=i){const t=_g(n);let a,o=l[1],d=l[0];const h=i instanceof Uint8Array;s?([o,d]=Um(l[0],l[1]),a=new bv(t,[d,o],h)):a=new gv(t,[d,o],h);const p=this.makeTensorInfo([d,o],r);this.texData.get(p.dataId).usage=h?$m.PIXELS:$m.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),o,d,i);const m=!0,g=this.runWebGLProgram(a,[p],r,null,m),b=this.texData.get(g.dataId);e.texture=b.texture,e.texShape=b.texShape,e.isPacked=b.isPacked,e.usage=b.usage,this.disposeIntermediateTensorInfo(p),this.texData.delete(g.dataId),e.values=null,u&&(this.uploadWaitMs+=f["fi"].now()-c)}else{const t=this.acquireTexture(l,o,r,s);e.texture=t}}convertAndCacheOnCPU(t,e){const n=this.texData.get(t),{dtype:r}=n;return this.releaseGPUData(t),null!=e&&(n.values=Kw(e,r)),n.values}acquireTexture(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const t=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${t} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,e,r)}computeBytes(t,e){return t[0]*t[1]*f["fi"].bytesPerElement(e)}tryRunOnCpuOrThrow(t,e){if(this.shouldExecuteOnCPU(t))try{return e()}catch(n){if(Object(f["Ce"])().getBool("IS_TEST"))throw new Error("CPU forwarding failed")}return null}}function Kw(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){const n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length);for(let e=0;e<n.length;++e)n[e]=Math.round(t[e]);return n}throw new Error("Unknown dtype "+e)}
/** @license See the LICENSE file. */const Jw="2.6.0";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
f["me"].isBrowser()&&Object(f["Gg"])("webgl",()=>new Yw,2);const Zw="if (isnan(x)) return x;",Qw="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",tO="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";function eO(t){return({inputs:e,backend:n})=>{const{x:r}=e,i=n,a=new Wx(r.shape,t);return i.runWebGLProgram(a,[r],r.dtype)}}function nO(t,e,n,r){return({inputs:i,backend:a})=>{const{a:o,b:s}=i,u=a,c=Object(f["Ce"])().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Wy(e,o.shape,s.shape,!!n):new ky(t,o.shape,s.shape),l=r||o.dtype,d=u.runWebGLProgram(c,[o,s],l);return d}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rO=Qw+"\n  return atan(a, b);\n",iO="\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+tO+"\n  return result;\n",aO=nO(rO,iO),oO={kernelName:f["q"],backendName:"webgl",kernelFunc:aO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function sO(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const uO={kernelName:f["ub"],backendName:"webgl",kernelFunc:sO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cO(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;zg(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,c=1;f["fi"].assert(f["Dd"].eitherStridesOrDilationsAreOne(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const l=f["Dd"].computePool2DInfo(i.shape,a,o,c,s,u);if(1===l.filterWidth&&1===l.filterHeight&&f["fi"].arraysEqual(l.inShape,l.outShape))return sO({inputs:{x:i},backend:n});const d=new px(l,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const lO={kernelName:f["s"],backendName:"webgl",kernelFunc:cO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fO(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;zg([i,a],"avgPoolBackprop");const{filterSize:s,strides:u,pad:c}=r,l=f["Dd"].computePool2DInfo(o.shape,s,u,1,c),d=new ry(l);return n.runWebGLProgram(d,[i],o.dtype)}const dO={kernelName:f["v"],backendName:"webgl",kernelFunc:fO};
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hO{constructor(t,e,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],f["Dd"].assertAndGetBroadcastShape(t,e),f["Dd"].assertAndGetBroadcastShape(t,n);let o="0.0";null!=r&&(f["Dd"].assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="1.0";null!=i&&(f["Dd"].assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${o};\n        float scale = ${s};\n        float inv = scale * inversesqrt(variance + float(${a}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pO{constructor(t,e,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],f["Dd"].assertAndGetBroadcastShape(t,e),f["Dd"].assertAndGetBroadcastShape(t,n);let o="vec4(0.0)";null!=r&&(f["Dd"].assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=i&&(f["Dd"].assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${s};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${a}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mO=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:a,offset:o,scale:s}=t;f["fi"].assert(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),f["fi"].assert(null==o||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),f["fi"].assert(null==s||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;null==u&&(u=.001);const c=[r,i,a];let l=null;null!=o&&(l=o.shape,c.push(o));let d=null;null!=s&&(d=s.shape,c.push(s));const h=Object(f["Ce"])().getBool("WEBGL_PACK_NORMALIZATION")?new pO(r.shape,i.shape,a.shape,l,d,u):new hO(r.shape,i.shape,a.shape,l,d,u),p=e.runWebGLProgram(h,c,c[0].dtype);return p},gO={kernelName:f["mb"],backendName:"webgl",kernelFunc:mO},bO=Zw+"\n  return cos(x);\n",yO=eO(bO),vO={kernelName:f["K"],backendName:"webgl",kernelFunc:yO},xO="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",wO="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",OO=nO(xO,wO,!0),_O={kernelName:f["X"],backendName:"webgl",kernelFunc:OO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class AO{constructor(t){this.variableNames=["Image"],this.outputShape=[];const e=t[2];this.outputShape=t,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${e} - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${e}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jO={kernelName:f["ib"],backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new AO(n.shape),a=r.runWebGLProgram(i,[n],n.dtype);return a}};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kO{constructor(t){this.variableNames=["A"];const e=sb(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${e.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CO{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=sb(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${e.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${e.output} = result;\n      }\n    `}}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EO={kernelName:f["lb"],backendName:"webgl",kernelFunc:DO};let SO;function DO(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:a}=r,o="undefined"!==typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement,[u,c]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=[c,u],d=[c,u,a];(s||o)&&(null==SO&&(SO=document.createElement("canvas").getContext("2d")),SO.canvas.width=u,SO.canvas.height=c,SO.drawImage(i,0,0,u,c),i=SO.canvas);const h=n.makeTensorInfo(l,"int32");n.texData.get(h.dataId).usage=$m.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),i);const p=Object(f["Ce"])().getBool("WEBGL_PACK")?new CO(d):new kO(d),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FO(t){const e=[];while(0===e.length||1!==e[e.length-1].outSize){const n=e.length?e[e.length-1].outSize:t[1],r=f["Dd"].computeOptimalWindowSize(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function NO(t,e,n,r){const i=FO(t.shape);let a=t;for(let o=0;o<i.length;o++){const{inSize:s,windowSize:u,outSize:c}=i[o],l=new gx({windowSize:u,inSize:s,batchSize:t.shape[0],outSize:c},n),f=a;a=r.runWebGLProgram(l,[a],e),f.dataId!==t.dataId&&r.disposeData(f.dataId)}return a}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TO(t,e,n){const r=[wg(t.shape),...Og(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},a=[wg(e),...Og(e)],o=new bx(a,r),s=!0,u=n.runWebGLProgram(o,[i],t.dtype,null,s);return{dataId:u.dataId,shape:e,dtype:u.dtype}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MO(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=n,s=f["fi"].sizeFromShape(i.shape),u=f["fi"].inferFromImplicitShape(a,s),c=f["fi"].sizeFromShape(u);f["fi"].assert(s===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const l=o.texData.get(i.dataId);return!l.isPacked||kg(i.shape,u)||null!==l.texture&&kg(l.shape,u)?(o.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype}):TO(i,u,o)}const IO={kernelName:f["uc"],backendName:"webgl",kernelFunc:MO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RO(t,e,n,r){const i=f["fi"].sizeFromShape(e),a=f["fi"].sizeFromShape(t.shape),o=a/i,s=MO({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),u=NO(s,t.dtype,"max",r),c=MO({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $O{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let a=0;a<n.length;a++)n[a]=t[e[a]];this.outputShape=n,this.rank=n.length;const r=Qb(this.rank),i=BO(e);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}function BO(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zO{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(t.length);for(let c=0;c<n.length;c++)n[c]=t[e[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=Qb(this.rank),i=ib("rc",this.rank),a=new Array(this.rank);for(let c=0;c<e.length;c++)a[e[c]]=i[c];const o=`vec2(${a.slice(-2).join()})`,s=`++${i[this.rank-1]} < ${n[this.rank-1]}`,u=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${u};\n      if(${s}) {\n        result[1] = ${u};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${u};\n        if(${s}) {\n          result[3] = ${u};\n        }\n      }\n      setOutput(result);\n    }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LO(t,e,n){const r=Object(f["Ce"])().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zO(t.shape,e):new $O(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PO={kernelName:f["Lb"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{reductionIndices:i,keepDims:a}=e,o=n,s=r.shape.length,u=f["fi"].parseAxisParam(i,r.shape);let c=u;const l=f["Dd"].getAxesPermutation(c,s),d=null!=l,h=o.shouldExecuteOnCPU([r]);let p=r;if(d){if(h){const t=o.texData.get(p.dataId),e=t.values,n=new Array(s);for(let o=0;o<n.length;o++)n[o]=r.shape[l[o]];const i=Qg(e,r.shape,r.dtype,l,n);p=o.makeTensorInfo(n,r.dtype);const a=o.texData.get(p.dataId);a.values=i}else p=LO(r,l,o);c=f["Dd"].getInnerMostAxes(c.length,s)}f["Dd"].assertAxesAreInnerMostDims("max",c,s);const[m,g]=f["Dd"].computeOutAndReduceShapes(p.shape,c);let b,y=m;if(a&&(y=f["Dd"].expandShapeToKeepDim(m,u)),h){const t=o.texData.get(p.dataId),e=t.values,n=Xg(e,f["fi"].sizeFromShape(g),y,r.dtype);b=o.makeTensorInfo(y,r.dtype);const i=o.texData.get(b.dataId);i.values=n}else b=RO(p,g,y,o);return d&&o.disposeIntermediateTensorInfo(p),b}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UO(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;zg(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,c=1;f["fi"].assert(f["Dd"].eitherStridesOrDilationsAreOne(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const l=f["Dd"].computePool2DInfo(i.shape,a,o,c,s,u);if(1===l.filterWidth&&1===l.filterHeight&&f["fi"].arraysEqual(l.inShape,l.outShape))return sO({inputs:{x:i},backend:n});const d=new px(l,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const WO={kernelName:f["Mb"],backendName:"webgl",kernelFunc:UO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qO(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;zg([a,o],"maxPoolBackprop");const{filterSize:u,strides:c,pad:l,dimRoundingMode:d}=r,h=f["Dd"].computePool2DInfo(s.shape,u,c,1,l,d),p=!0,m=new px(h,"max",p),g=n.runWebGLProgram(m,[s],s.dtype),b=new nx(h),y=n.runWebGLProgram(b,[i,g],s.dtype);return n.disposeIntermediateTensorInfo(g),y}const VO={kernelName:f["Pb"],backendName:"webgl",kernelFunc:qO};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GO(t,e,n,r){let i=new px(n,"max",!1);const a=r.runWebGLProgram(i,[t],"float32");i=new px(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[a,o]}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HO={kernelName:f["Qb"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,u=n;f["fi"].assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];f["fi"].assert(f["Dd"].eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const l=f["Dd"].computePool2DInfo(r.shape,i,a,c,o),[d,h]=GO(r,s,l,u);return[d,h]}},XO={kernelName:f["Zb"],backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{f["Dd"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:s}=n,u=e,c=u.readSync(r.dataId),l=u.readSync(i.dataId),d=a,h=o,p=s;return f["of"].nonMaxSuppressionV3Impl(c,l,d,h,p)}},YO=f["of"].nonMaxSuppressionV4Impl,KO={kernelName:f["ac"],backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{f["Dd"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:s,padToMaxOutputSize:u}=n,c=e,l=c.readSync(r.dataId),d=c.readSync(i.dataId),{selectedIndices:h,validOutputs:p}=YO(l,d,a,o,s,u);return[h,p]}},JO=f["of"].nonMaxSuppressionV5Impl,ZO={kernelName:f["bc"],backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{f["Dd"].warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:a,iouThreshold:o,scoreThreshold:s,softNmsSigma:u}=n,c=e,l=c.readSync(r.dataId),d=c.readSync(i.dataId),h=a,p=o,m=s,g=u,{selectedIndices:b,selectedScores:y}=JO(l,d,h,p,m,g);return[b,y]}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class QO{constructor(t,e,n,r){this.variableNames=["Image"],this.outputShape=[];const i=t[1],a=t[2],o=Math.sin(e).toFixed(3),s=Math.cos(e).toFixed(3);this.outputShape=t;const[u,c]=f["Dd"].getImageCenter(r,i,a),l=u.toFixed(3),d=c.toFixed(3);let h="";h="number"===typeof n?`float outputValue = ${n.toFixed(2)};`:`\n        vec3 fill = vec3(${n.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ${l}) * ${s} - (float(y) - ${d}) * ${o};\n          float coordYFloat = (float(x) - ${l}) * ${o} + (float(y) - ${d}) * ${s};\n          int coordX = int(round(coordXFloat + ${l}));\n          int coordY = int(round(coordYFloat + ${d}));\n          ${h}\n          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${i}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t_={kernelName:f["Ac"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,u=new QO(r.shape,i,a,o),c=s.runWebGLProgram(u,[r],r.dtype);return c}},e_=Zw+"\n  return sin(x);\n",n_=eO(e_),r_={kernelName:f["Jc"],backendName:"webgl",kernelFunc:n_},i_="return x * x;",a_=eO(i_),o_={kernelName:f["Sc"],backendName:"webgl",kernelFunc:a_},s_="return (a - b) * (a - b);",u_=nO(s_,s_),c_={kernelName:f["Tc"],backendName:"webgl",kernelFunc:u_},l_="return tan(x);",f_=eO(l_),d_={kernelName:f["Yc"],backendName:"webgl",kernelFunc:f_},h_={kernelName:f["ed"],backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{perm:i}=e,a=n,o=r.shape.length,s=new Array(o);for(let c=0;c<s.length;c++)s[c]=r.shape[i[c]];let u;if(a.shouldExecuteOnCPU([r])){const t=a.texData.get(r.dataId),e=t.values,n=Qg(e,r.shape,r.dtype,i,s);u=a.makeTensorInfo(s,r.dtype);const o=a.texData.get(u.dataId);o.values=n}else u=LO(r,i,a);return u}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function p_(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;zg(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(a.dataId),{outputValues:s,outputShape:u,indices:c}=tb(o,i,a.shape,a.dtype);return[r.makeTensorInfo(u,a.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}const m_={kernelName:f["fd"],backendName:"webgl",kernelFunc:p_},g_=[oO,lO,dO,gO,vO,_O,jO,EO,uO,PO,WO,VO,HO,XO,KO,ZO,IO,t_,r_,o_,c_,d_,h_,m_];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */for(const v_ of g_)Object(f["Ig"])(v_);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/** @license See the LICENSE file. */const b_="2.6.0",y_={"tfjs-core":f["ki"],"tfjs-backend-cpu":pd,"tfjs-backend-webgl":Jw,"tfjs-data":ad,"tfjs-layers":pr,"tfjs-converter":kf,tfjs:b_};
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */},ce1a4:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n("7ad3")),o=n("1309"),s=n("6180"),u=n("8e47");function c(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=Array.isArray(e.values[0])?e.values:[e.values],i=r[0].length,c=e.series?e.series:r.map((t,e)=>"Series "+(e+1));s.assert(c.length===r.length,"Must have an equal number of series labels as there are data series"),null!=n.seriesColors&&s.assert(n.seriesColors.length===r.length,"Must have an equal number of series colors as there are data series");const f=[];for(let t=0;t<i;t++){const e={x:t};c.forEach((n,i)=>{const a=r[i][t].y;e[n]=a,e[n+"-name"]=n}),f.push(e)}const d=Object.assign({},l,n),h=()=>d.zoomToFit?{zero:!1}:null!=d.yAxisDomain?{domain:d.yAxisDomain}:void 0,p={x:{field:"x",type:d.xType,title:d.xLabel},tooltip:[{field:"x",type:"quantitative"},...c.map(t=>({field:t,type:"quantitative"}))]},m=c.map(t=>({data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:t,type:d.yType,title:d.yLabel,scale:h()},color:{field:t+"-name",type:"nominal",legend:{values:c,title:null},scale:{range:d.seriesColors}}}})),g={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},b=u.getDrawArea(t),y={width:d.width||o.getDefaultWidth(b),height:d.height||o.getDefaultHeight(b),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:d.fontSize,titleFontSize:d.fontSize},text:{fontSize:d.fontSize},legend:{labelFontSize:d.fontSize,titleFontSize:d.fontSize}},data:{values:f},encoding:p,layer:[...m,g]},v={actions:!1,mode:"vega-lite",defaultStyle:!1};return yield a.default(b,y,v),Promise.resolve()}))}e.linechart=c;const l={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},ce4e:function(t,e,n){var r=n("da84"),i=n("9112");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},ce86:function(t,e,n){var r=n("9e69"),i=n("7948"),a=n("6747"),o=n("ffd6"),s=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;function l(t){if("string"==typeof t)return t;if(a(t))return i(t,l)+"";if(o(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}t.exports=l},cef0:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(o["a"])(t,"a","greater"),u=Object(o["a"])(e,"b","greater");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(s["a"])(n.shape,u.shape);const c=t=>t.greater(n,u),l={a:n,b:u};return r["a"].runKernelFunc(c,l,null,i["kb"])}const l=Object(u["b"])({greater_:c})},cf61:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return R})),n.d(e,"c",(function(){return k})),n.d(e,"d",(function(){return C})),n.d(e,"e",(function(){return L})),n.d(e,"f",(function(){return B})),n.d(e,"g",(function(){return $})),n.d(e,"h",(function(){return _}));var r=n("f506"),i=n("3512"),a=n("d217"),o=n("c092");const s=/^([A-Za-z]+:)?\/\//,u=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,c=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,l="file://";function f(t,e){return n=>({options:n||{},sanitize:h,load:d,fileAccess:!!e,file:p(e),http:g(t)})}async function d(t,e){const n=await this.sanitize(t,e),r=n.href;return n.localFile?this.file(r):this.http(r,e)}async function h(t,e){e=Object(r["b"])({},this.options,e);const n=this.fileAccess,i={href:null};let a,o,f;const d=u.test(t.replace(c,""));null!=t&&"string"===typeof t&&d||Object(r["a"])("Sanitize failure, invalid URI: "+Object(r["h"])(t));const h=s.test(t);return(f=e.baseURL)&&!h&&(t.startsWith("/")||"/"===f[f.length-1]||(t="/"+t),t=f+t),o=(a=t.startsWith(l))||"file"===e.mode||"http"!==e.mode&&!h&&n,a?t=t.slice(l.length):t.startsWith("//")&&("file"===e.defaultProtocol?(t=t.slice(2),o=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!o}),i.href=t,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function p(t){return t?e=>new Promise((n,r)=>{t.readFile(e,(t,e)=>{t?r(t):n(e)})}):m}async function m(){Object(r["a"])("No file system access.")}function g(t){return t?async function(e,n){const i=Object(r["b"])({},this.options.http,n),a=n&&n.response,o=await t(e,i);return o.ok?Object(r["f"])(o[a])?o[a]():o.text():Object(r["a"])(o.status+""+o.statusText)}:b}async function b(){Object(r["a"])("No HTTP fetch method available.")}const y=t=>null!=t&&t===t,v=t=>"true"===t||"false"===t||!0===t||!1===t,x=t=>!Number.isNaN(Date.parse(t)),w=t=>!Number.isNaN(+t)&&!(t instanceof Date),O=t=>w(t)&&Number.isInteger(+t),_={boolean:r["i"],integer:r["k"],number:r["k"],date:r["j"],string:r["l"],unknown:r["e"]},A=[v,O,w,x],j=["boolean","integer","number","date"];function k(t,e){if(!t||!t.length)return"unknown";const n=t.length,r=A.length,i=A.map((t,e)=>e+1);for(let a,o,s=0,u=0;s<n;++s)for(o=e?t[s][e]:t[s],a=0;a<r;++a)if(i[a]&&y(o)&&!A[a](o)&&(i[a]=0,++u,u===A.length))return"string";return j[i.reduce((t,e)=>0===t?e:t,0)-1]}function C(t,e){return e.reduce((e,n)=>(e[n]=k(t,n),e),{})}function E(t){const e=function(e,n){const i={delimiter:t};return S(e,n?Object(r["b"])(n,i):i)};return e.responseType="text",e}function S(t,e){return e.header&&(t=e.header.map(r["h"]).join(e.delimiter)+"\n"+t),Object(i["a"])(e.delimiter).parse(t+"")}function D(e){return!("function"!==typeof t||!Object(r["f"])(t.isBuffer))&&t.isBuffer(e)}function F(t,e){const n=e&&e.property?Object(r["c"])(e.property):r["e"];return Object(r["g"])(t)&&!D(t)?N(n(t),e):n(JSON.parse(t))}function N(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}S.responseType="text",F.responseType="json";const T={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function M(t,e){let n,i,o,s;return t=F(t,e),e&&e.feature?(n=a["a"],o=e.feature):e&&e.mesh?(n=a["b"],o=e.mesh,s=T[e.filter]):Object(r["a"])("Missing TopoJSON feature or mesh parameter."),i=(i=t.objects[o])?n(t,i,s):Object(r["a"])("Invalid TopoJSON object: "+o),i&&i.features||[i]}M.responseType="json";const I={dsv:S,csv:E(","),tsv:E("\t"),json:F,topojson:M};function R(t,e){return arguments.length>1?(I[t]=e,this):Object(r["d"])(I,t)?I[t]:null}function $(t){const e=R(t);return e&&e.responseType||"text"}function B(t,e,n,i){e=e||{};const a=R(e.type||"json");return a||Object(r["a"])("Unknown data format type: "+e.type),t=a(t,e),e.parse&&z(t,e.parse,n,i),Object(r["d"])(t,"columns")&&delete t.columns,t}function z(t,e,n,r){if(!t.length)return;const i=Object(o["e"])();n=n||i.timeParse,r=r||i.utcParse;let a,s,u,c,l,f,d=t.columns||Object.keys(t[0]);"auto"===e&&(e=C(t,d)),d=Object.keys(e);const h=d.map(t=>{const i=e[t];let a,o;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){a=i.split(/:(.+)?/,2),o=a[1],("'"===o[0]&&"'"===o[o.length-1]||'"'===o[0]&&'"'===o[o.length-1])&&(o=o.slice(1,-1));const t="utc"===a[0]?r:n;return t(o)}if(!_[i])throw Error("Illegal format pattern: "+t+":"+i);return _[i]});for(u=0,l=t.length,f=d.length;u<l;++u)for(a=t[u],c=0;c<f;++c)s=d[c],a[s]=h[c](a[s])}const L=f("undefined"!==typeof fetch&&fetch,null)}).call(this,n("b639").Buffer)},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("428f"),i=n("da84"),a=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?a(r[t])||a(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},d08e:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("f0a9"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e){const n=Object(a["a"])(t,"x","reverse"),u=t=>{const r=Object(o["parseAxisParam"])(e,n.shape);if(0===n.rank)return Object(s["a"])(n);const i=t.reverse(n,r);return Object(c["a"])(i,n.shape)},l={x:n},f={dims:e};return r["a"].runKernelFunc(u,l,null,i["lc"],f)}const f=Object(u["b"])({reverse_:l})},d094:function(t,e){var n="\\ud800-\\udfff",r="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",o=r+i+a,s="\\ufe0e\\ufe0f",u="["+n+"]",c="["+o+"]",l="\\ud83c[\\udffb-\\udfff]",f="(?:"+c+"|"+l+")",d="[^"+n+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",g=f+"?",b="["+s+"]?",y="(?:"+m+"(?:"+[d,h,p].join("|")+")"+b+g+")*",v=b+g+y,x="(?:"+[d+c+"?",c,h,p,u].join("|")+")",w=RegExp(l+"(?="+l+")|"+x+v,"g");function O(t){return t.match(w)||[]}t.exports=O},d194:function(t,e,n){var r=n("c32f"),i=n("aaec"),a=n("126d"),o=n("76dd");function s(t){return function(e){e=o(e);var n=i(e)?a(e):void 0,s=n?n[0]:e.charAt(0),u=n?r(n,1).join(""):e.slice(1);return s[t]()+u}}t.exports=s},d1a8:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","atanh"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.atanh(e);return n([e]),r},n,null,i["n"])}const u=Object(o["b"])({atanh_:s})},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!r.call({1:2},1);e.f=a?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d1f4:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("a3f7"),i=n("eb7e"),a=n("54ef"),o=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e){const n=Object(r["a"])(t,"x","squeeze");return Object(o["a"])(n,Object(i["squeezeShape"])(n.shape,e).newShape)}const u=Object(a["b"])({squeeze_:s})},d217:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return l}));var r=function(t){return t},i=function(t){if(null==t)return r;var e,n,i=t.scale[0],a=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var u=2,c=t.length,l=new Array(c);l[0]=(e+=t[0])*i+o,l[1]=(n+=t[1])*a+s;while(u<c)l[u]=t[u],++u;return l}},a=function(t,e){var n,r=t.length,i=r-e;while(i<--r)n=t[i],t[i++]=t[r],t[r]=n},o=function(t,e){return"string"===typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return s(t,e)}))}:s(t,e)};function s(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,a=u(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function u(t,e){var n=i(t.transform),r=t.arcs;function o(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&a(e,s)}function s(t){return n(t)}function u(t){for(var e=[],n=0,r=t.length;n<r;++n)o(t[n],e);return e.length<2&&e.push(e[0]),e}function c(t){var e=u(t);while(e.length<4)e.push(e[0]);return e}function l(t){return t.map(c)}function f(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(f)};case"Point":e=s(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(s);break;case"LineString":e=u(t.arcs);break;case"MultiLineString":e=t.arcs.map(u);break;case"Polygon":e=l(t.arcs);break;case"MultiPolygon":e=t.arcs.map(l);break;default:return null}return{type:n,coordinates:e}}return f(e)}var c=function(t,e){var n={},r={},i={},a=[],o=-1;function s(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}function u(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),a.push(i)}}return e.forEach((function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++o],e[o]=n,e[r]=i)})),e.forEach((function(t){var e,n,a=s(t),o=a[0],u=a[1];if(e=i[o])if(delete i[e.end],e.push(t),e.end=u,n=r[u]){delete r[n.start];var c=n===e?e:e.concat(n);r[c.start=e.start]=i[c.end=n.end]=c}else r[e.start]=i[e.end]=e;else if(e=r[u])if(delete r[e.start],e.unshift(t),e.start=o,n=i[o]){delete i[n.end];var l=n===e?e:n.concat(e);r[l.start=n.start]=i[l.end=e.end]=l}else r[e.start]=i[e.end]=e;else e=[t],r[e.start=o]=i[e.end=u]=e})),u(i,r),u(r,i),e.forEach((function(t){n[t<0?~t:t]||a.push([t])})),a},l=function(t){return u(t,f.apply(this,arguments))};function f(t,e,n){var r,i,a;if(arguments.length>1)r=d(t,e,n);else for(i=0,r=new Array(a=t.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:c(t,r)}}function d(t,e,n){var r,i=[],a=[];function o(t){var e=t<0?~t:t;(a[e]||(a[e]=[])).push({i:t,g:r})}function s(t){t.forEach(o)}function u(t){t.forEach(s)}function c(t){t.forEach(u)}function l(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":c(t.arcs);break}}return l(e),a.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}},d25f:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("a3f7"),i=n("526f"),a=n("e333"),o=n("ef00"),s=n("f183"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){const n=Object(r["a"])(t,"a","logicalXor","bool"),u=Object(r["a"])(e,"b","logicalXor","bool");return Object(i["a"])(n.shape,u.shape),Object(a["a"])(Object(s["a"])(t,e),Object(o["a"])(Object(a["a"])(t,e)))}const l=Object(u["b"])({logicalXor_:c})},d260:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("6e78"),i=o(r),a=n("da67");o(a);function o(t){return t&&t.__esModule?t:{default:t}}var s=i.default.isUnitlessNumber;function u(t,e,n){var r=null==e||"boolean"===typeof e||""===e;if(r)return"";var i=isNaN(e);if(i||0===e||s.hasOwnProperty(t)&&s[t])return""+e;"string"===typeof e&&(e=e.trim());return e+"px"}e.default=u},d28b:function(t,e,n){var r=n("746f");r("iterator")},d2bb:function(t,e,n){var r=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(a){}return function(n,a){return r(n),i(a),e?t.call(n,a):n.__proto__=a,n}}():void 0)},d2ef:function(t,e,n){const r=n("a236"),i=(t,e)=>{const n=r(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};t.exports=i},d303:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o}));
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r={};function i(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};r[t]=n}function a(t){return r[t]}function o(t){delete r[t]}},d30a:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","tan"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.tan(e);return n([e]),r},n,null,i["Jc"])}const u=Object(o["b"])({tan_:s})},d369:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","floor"),n={x:e};return r["a"].runKernelFunc(t=>t.floor(e),n,null,i["cb"])}const u=Object(o["b"])({floor_:s})},d3b7:function(t,e,n){var r=n("00ee"),i=n("6eeb"),a=n("b041");r||i(Object.prototype,"toString",a,{unsafe:!0})},d3ee:function(t,e,n){"use strict";n.r(e),n.d(e,"segOpComputeOptimalWindowSize",(function(){return a})),n.d(e,"computeOutShape",(function(){return o})),n.d(e,"collectGatherOpShapeInfo",(function(){return s}));var r=n("eb7e"),i=n("f63b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function a(t,e){let n,a=!1;t<=i["a"]?(n=t,a=!0):n=Object(r["nearestDivisor"])(t,Math.floor(Math.sqrt(t)));while(!a)n>e||n===t?a=!0:n=Object(r["nearestDivisor"])(t,n+1);return n}function o(t,e,n){const r=[],i=t.length;for(let a=0;a<i;a++)a!==e?r.push(t[a]):r.push(n);return r}function s(t,e,n){const r=t.shape[n],i=[];let a=1,o=1;for(let s=0;s<n;s++)i.push(t.shape[s]),a*=t.shape[s];for(let s=0;s<e.rank;s++)i.push(e.shape[s]);for(let s=n+1;s<t.rank;s++)i.push(t.shape[s]),o*=t.shape[s];return{batchSize:a,sliceSize:o,dimSize:r,outputShape:i}}},d44e:function(t,e,n){var r=n("9bf2").f,i=n("5135"),a=n("b622"),o=a("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},d4de:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(o["a"])(t,"a","notEqual"),u=Object(o["a"])(e,"b","notEqual");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(s["a"])(n.shape,u.shape);const c=t=>t.notEqual(n,u),l={a:n,b:u};return r["a"].runKernelFunc(c,l,null,i["Tb"])}const l=Object(u["b"])({notEqual_:c})},d4e4:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o}));var r=n("6125");n("d565");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class i{constructor(t,e,n,i,a){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=a||Math.random();this.random=r["alea"](o.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;while(!n){let r,i,a;do{r=2*this.random()-1,i=2*this.random()-1,a=r*r+i*i}while(a>=1||0===a);const o=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*r*o,e=this.mean+this.stdDev*i*o,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class a{constructor(t,e,n,a){this.alpha=t,this.beta=1/e,this.dtype=n;const o=a||Math.random();this.randu=r["alea"](o.toString()),this.randn=new i(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,i,a;while(1){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,t=r*r,e=1-.331*t*t,n=.5*t+this.d*(1-a+Math.log(a)),i=this.randu(),i<e||Math.log(i)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}class o{constructor(t=0,e=1,n,i){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=t,this.range=e-t,this.dtype=n,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=r["alea"](i)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}},d54d:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("a3f7"),i=n("eb7e"),a=n("649e"),o=n("dae8"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e=0){const n=Object(r["b"])(t,"tensors","stack");if(i["assert"](n.length>=1,()=>"Pass at least one tensor to tf.stack"),1===n.length)return Object(o["a"])(n[0],e);const s=n[0].rank,u=n[0].shape,c=n[0].dtype;i["assert"](e<=s,()=>"Axis must be <= rank of the tensor"),n.forEach(t=>{i["assertShapesMatch"](u,t.shape,"All tensors passed to stack must have matching shapes"),i["assert"](c===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const l=n.map(t=>Object(o["a"])(t,e));return Object(a["a"])(l,e)}const c=Object(s["b"])({stack_:u})},d556:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},d565:function(t,e,n){"use strict";n.r(e),n.d(e,"TEST_EPSILON_FLOAT16",(function(){return s})),n.d(e,"expectArraysClose",(function(){return u})),n.d(e,"testEpsilon",(function(){return c})),n.d(e,"expectPromiseToFail",(function(){return f})),n.d(e,"expectArraysEqual",(function(){return d})),n.d(e,"expectNumbersClose",(function(){return h})),n.d(e,"expectValuesInRange",(function(){return m})),n.d(e,"expectArrayBuffersEqual",(function(){return g}));var r=n("6ae2"),i=n("a3f7"),a=n("eb7e");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const o=.001,s=.1;function u(t,e,n){return null==n&&(n=c()),l(t,e,(t,e)=>p(t,e,n))}function c(){return 32===r["a"].backend.floatPrecision()?o:s}function l(t,e,n){let r=!0;if((Object(a["isTypedArray"])(t)||Object(a["isTypedArray"])(e))&&(r=!1),Object(a["isTypedArray"])(t)&&Object(a["isTypedArray"])(e)&&(r=!0),r){const n=t.constructor.name,r=e.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: `+r)}if(Array.isArray(t)&&Array.isArray(e)){const n=Object(i["c"])(t),r=Object(i["c"])(e);if(!Object(a["arraysEqual"])(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}const o=Object(a["isTypedArray"])(t)?t:Object(a["flatten"])(t),s=Object(a["isTypedArray"])(e)?e:Object(a["flatten"])(e);if(o.length!==s.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${s.length}.\nActual:   ${o}.\nExpected: ${s}.`);for(let i=0;i<s.length;++i){const t=o[i],e=s[i];if(!n(t,e))throw new Error(`Arrays differ: actual[${i}] = ${t}, expected[${i}] = ${e}.\nActual:   ${o}.\nExpected: ${s}.`)}}function f(t,e){t().then(()=>e.fail(),()=>e())}function d(t,e){const n="string"===typeof e||"number"===typeof e||"boolean"===typeof e?[e]:e;return Object(a["isString"])(t)||Object(a["isString"])(t[0])||Object(a["isString"])(e)||Object(a["isString"])(e[0])?l(t,n,(t,e)=>t==e):l(t,e,(t,e)=>p(t,e,0))}function h(t,e,n){if(null==n&&(n=c()),!p(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`)}function p(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function m(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function g(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}},d58f:function(t,e,n){var r=n("1c0b"),i=n("7b0b"),a=n("44ad"),o=n("50c4"),s=function(t){return function(e,n,s,u){r(n);var c=i(e),l=a(c),f=o(c.length),d=t?f-1:0,h=t?-1:1;if(s<2)while(1){if(d in l){u=l[d],d+=h;break}if(d+=h,t?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:f>d;d+=h)d in l&&(u=n(u,l[d],d,c));return u}};t.exports={left:s(!1),right:s(!0)}},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),a=n("b622"),o=n("9263"),s=n("9112"),u=a("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),f=a("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),h=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var p=a(t),m=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),g=m&&!i((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!m||!g||"replace"===t&&(!c||!l||d)||"split"===t&&!h){var b=/./[p],y=n(p,""[t],(function(t,e,n,r,i){return e.exec===o?m&&!i?{done:!0,value:b.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),v=y[0],x=y[1];r(String.prototype,t,v),r(RegExp.prototype,p,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}f&&s(RegExp.prototype[p],"sham",!0)}},d7b0:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"input","real"),n=t=>t.real(e),o={input:e};return r["a"].runKernelFunc(n,o,null,i["cc"])}const u=Object(o["b"])({real_:s})},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,a=n("1dde"),o=n("ae40"),s=a("map"),u=o("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},d8a1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=n("b14b"),i=a(r);function a(t){return t&&t.__esModule?t:{default:t}}var o=["-webkit-",""];function s(t,e){if("string"===typeof e&&!(0,i.default)(e)&&e.indexOf("image-set(")>-1)return o.map((function(t){return e.replace(/image-set\(/g,t+"image-set(")}))}t.exports=e["default"]},d933:function(t,e,n){"use strict";var r=n("a7fd");e["a"]=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Object(r["a"])(e)/3)))-Object(r["a"])(Math.abs(t)))}},d989:function(t,e,n){"use strict";var r=n("a7fd");e["a"]=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Object(r["a"])(e)-Object(r["a"])(t))+1}},da67:function(t,e,n){"use strict";var r=n("a211"),i=r;t.exports=i},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n("c8ba"))},dad1:function(t,e,n){"use strict";var r=n("a7fd");e["a"]=function(t){return Math.max(0,-Object(r["a"])(Math.abs(t)))}},dad4:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("8756"),a=n("8e47"),o=n("4149");function s(t,e){return r(this,void 0,void 0,(function*(){const n=a.getDrawArea(t),r=yield o.tensorStats(e),s=yield e.data();i.histogram(n,s,{height:150,stats:r})}))}e.valuesDistribution=s},dae8:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("a3f7"),i=n("eb7e"),a=n("54ef"),o=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t,e=0){const n=null,a=Object(r["a"])(t,"x","expandDims",n);i["assert"](e<=a.rank,()=>"Axis must be <= rank of the tensor");const s=a.shape.slice();return e<0&&(i["assert"](-(a.rank+1)<=e,()=>`Axis must be in the interval [${-(a.rank+1)}, ${a.rank}]`),e=a.rank+e+1),s.splice(e,0,1),Object(o["a"])(a,s)}const u=Object(a["b"])({expandDims_:s})},db49:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("36e5"),u=n("54ef"),c=n("c912");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e=0){let n=Object(a["a"])(t,"x","argMin");const u=(t,r)=>{r([n]),null==e&&(e=0);let i=o["parseAxisParam"](e,n.shape);const a=s["f"](i,n.rank);return null!=a&&(n=Object(c["a"])(n,a),i=s["g"](i.length,n.rank)),t.argMin(n,i[0])},l={x:n},f={axis:e};return r["a"].runKernelFunc(u,l,null,i["i"],f)}const f=Object(u["b"])({argMin_:l})},dbb4:function(t,e,n){var r=n("23e7"),i=n("83ab"),a=n("56ef"),o=n("fc6a"),s=n("06cf"),u=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=o(t),i=s.f,c=a(r),l={},f=0;while(c.length>f)n=i(r,e=c[f++]),void 0!==n&&u(l,e,n);return l}})},dbf3:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},dc14:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var r=n("fa11"),i=n("c388"),a=n("4cfc");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */
class o extends i["a"]{decodeUTF8(){return new s(this)}}class s extends a["a"]{constructor(t){super(),this.upstream=t,this.impl=new u(t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class u extends i["b"]{constructor(t){if(super(),this.upstream=t,Object(r["Ce"])().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:t}=n(4);this.decoder=new t("utf8")}}summary(){return this.upstream.summary()+" -> Utf8"}async pump(){const e=await this.upstream.next();let n,i;return!e.done&&(n=e.value,i=Object(r["Ce"])().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(t.from(n.buffer)),this.outputQueue.push(i),!0)}}}).call(this,n("b639").Buffer)},dc59:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","asinh"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.asinh(e);return n([e]),r},n,null,i["k"])}const u=Object(o["b"])({asinh_:s})},dd7e:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("b818"),u=n("54ef"),c=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n,u,l="NHWC",f=[1,1],d){const h=Object(a["a"])(t,"x","conv2d"),p=Object(a["a"])(e,"filter","conv2d");let m=h,g=!1;3===h.rank&&(g=!0,m=Object(c["a"])(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o["assert"](4===m.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${m.rank}.`),o["assert"](4===p.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+p.rank+"."),null!=d&&o["assert"](o["isInt"](u),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${d} but got pad ${u}.`);const b="NHWC"===l?m.shape[3]:m.shape[1];o["assert"](b===p.shape[2],()=>`Error in conv2d: depth of input (${b}) must match input depth for filter ${p.shape[2]}.`),o["assert"](s["h"](n,f),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${f}'`);const y=(t,e)=>{const r=s["g"](l),i=s["a"](m.shape,p.shape,n,f,u,d,!1,r),a=t.conv2d(m,p,i);return e([m,p]),a},v={x:m,filter:p},x={strides:n,pad:u,dataFormat:l,dilations:f,dimRoundingMode:d},w=r["a"].runKernelFunc(y,v,null,i["A"],x);return g?Object(c["a"])(w,[w.shape[1],w.shape[2],w.shape[3]]):w}const f=Object(u["b"])({conv2d_:l})},ddb0:function(t,e,n){var r=n("da84"),i=n("fdbc"),a=n("e260"),o=n("9112"),s=n("b622"),u=s("iterator"),c=s("toStringTag"),l=a.values;for(var f in i){var d=r[f],h=d&&d.prototype;if(h){if(h[u]!==l)try{o(h,u,l)}catch(m){h[u]=l}if(h[c]||o(h,c,f),i[f])for(var p in a)if(h[p]!==a[p])try{o(h,p,a[p])}catch(m){h[p]=a[p]}}}},ddc6:function(t,e){function n(t){return function(e){return null==t?void 0:t[e]}}t.exports=n},de1a:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef"),s=n("35c9"),u=n("6d3c"),c=n("5ebd");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e,n,o,l=0,f=0,d=0,h=0,p=0){let m=Object(a["a"])(t,"x","stridedSlice");const g=t=>{null==o&&(o=new Array(e.length));const r=Object(c["maskToAxes"])(d);if(r.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==d&&0!==h)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==d&&0!==p)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const i=m.rank-e.length,a=Object(c["maskToAxes"])(h),g=m.shape.slice();a.forEach(t=>{e[t]=0,n[t]=1,g.splice(t,0,1)}),m=Object(s["a"])(m,g);const{begin:b,end:y,strides:v}=Object(c["getNormalizedAxes"])(m.shape,r,i,e,n,o,l,f,d);e=b,n=y,o=v;const x=Object(c["maskToAxes"])(p);x.forEach(t=>{n[t]=e[t]+1,o[t]=1});const w=Object(c["computeOutShape"])(e,n,o),O=w.filter((t,e)=>-1===x.indexOf(e)),_=o.every(t=>1===t);if(_)return Object(s["a"])(Object(u["a"])(m,e,w),O);const A=t.stridedSlice(m,e,n,o);return Object(s["a"])(A,O)},b={x:m},y={begin:e,end:n,strides:o,beginMask:l,endMask:f,ellipsisMask:d,newAxisMask:h,shrinkAxisMask:p};return r["a"].runKernelFunc(g,b,null,i["Gc"],y)}const f=Object(o["b"])({stridedSlice_:l})},de20:function(t){t.exports=JSON.parse('{"name":"vega-tooltip","version":"0.23.2","description":"A tooltip plugin for Vega-Lite and Vega visualizations.","main":"build/vega-tooltip.js","module":"build/src/index.js","unpkg":"build/vega-tooltip.min.js","jsdelivr":"build/vega-tooltip.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-tooltip.git"},"keywords":["vega-lite","vega","tooltip"],"author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"collaborators":["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-tooltip/issues"},"homepage":"https://github.com/vega/vega-tooltip#readme","scripts":{"prepare":"beemo create-config --silent","tsc:src":"tsc -b tsconfig.src.json","build":"yarn tsc:src && rollup -c","clean":"rm -rf build examples/data && rm -f src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","postbuild":"terser build/vega-tooltip.js -c -m -o build/vega-tooltip.min.js","prebuild":"mkdir -p build && yarn copy:data && ./build-style.sh","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'browser-sync start -s -f build examples --serveStatic examples\' \'yarn tsc:src -w\' \'rollup -c -w\'","pretest":"./build-style.sh","test":"jest"},"devDependencies":{"@rollup/plugin-commonjs":"13.0.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^8.1.0","@types/jest":"^26.0.4","browser-sync":"^2.26.7","codecov":"^3.7.0","concurrently":"^5.2.0","gh-pages":"^3.1.0","jest":"^26.1.0","node-sass":"^4.14.1","path":"^0.12.7","rollup":"^2.21.0","terser":"^4.8.0","ts-jest":"^26.1.1","typescript":"^3.9.6","vega-datasets":"^2.1.0","vega-lite-dev-config":"^0.11.8","vega-typings":"^0.18.0"},"dependencies":{"vega-util":"^1.14.1"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]},"jest":{"testURL":"http://localhost/","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["node_modules","<rootDir>/build","src"]}}')},de28:function(t,e,n){"use strict";n.d(e,"a",(function(){return A})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return k})),n.d(e,"d",(function(){return C})),n.d(e,"e",(function(){return D})),n.d(e,"f",(function(){return E})),n.d(e,"g",(function(){return O})),n.d(e,"h",(function(){return w})),n.d(e,"i",(function(){return S})),n.d(e,"j",(function(){return F})),n.d(e,"k",(function(){return _})),n.d(e,"l",(function(){return x})),n.d(e,"m",(function(){return B})),n.d(e,"n",(function(){return Ft})),n.d(e,"o",(function(){return et})),n.d(e,"p",(function(){return st})),n.d(e,"q",(function(){return lt})),n.d(e,"r",(function(){return ht})),n.d(e,"s",(function(){return I})),n.d(e,"t",(function(){return T})),n.d(e,"u",(function(){return it})),n.d(e,"v",(function(){return ut})),n.d(e,"w",(function(){return ft})),n.d(e,"x",(function(){return pt})),n.d(e,"y",(function(){return q})),n.d(e,"z",(function(){return V})),n.d(e,"A",(function(){return z}));var r=n("fc17"),i=n("742c"),a=n("b14c"),o=n("6eb2"),s=n("2739"),u=n("a15a"),c=n("9603"),l=n("b3c3"),f=n("2c38"),d=n("5edf"),h=n("1809"),p=n("77ae"),m=n("55f8"),g=n("f623"),b=n("f8ee"),y=n("2a2d"),v=n("eecb");const x="year",w="quarter",O="month",_="week",A="date",j="day",k="dayofyear",C="hours",E="minutes",S="seconds",D="milliseconds",F=[x,w,O,_,A,j,k,C,E,S,D],N=F.reduce((t,e,n)=>(t[e]=1+n,t),{});function T(t){const e=Object(r["e"])(t).slice(),n={};e.length||Object(r["k"])("Missing time unit."),e.forEach(t=>{Object(r["s"])(N,t)?n[t]=1:Object(r["k"])("Invalid time unit: ".concat(t,"."))});const i=(n[_]||n[j]?1:0)+(n[w]||n[O]||n[A]?1:0)+(n[k]?1:0);return i>1&&Object(r["k"])("Incompatible time units: ".concat(t)),e.sort((t,e)=>N[t]-N[e]),e}const M={[x]:"%Y ",[w]:"Q%q ",[O]:"%b ",[A]:"%d ",[_]:"W%U ",[j]:"%a ",[k]:"%j ",[C]:"%H:00",[E]:"00:%M",[S]:":%S",[D]:".%L",["".concat(x,"-").concat(O)]:"%Y-%m ",["".concat(x,"-").concat(O,"-").concat(A)]:"%Y-%m-%d ",["".concat(C,"-").concat(E)]:"%H:%M"};function I(t,e){const n=Object(r["l"])({},M,e),i=T(t),a=i.length;let o,s,u="",c=0;for(c=0;c<a;)for(o=i.length;o>c;--o)if(s=i.slice(c,o).join("-"),null!=n[s]){u+=n[s],c=o;break}return u.trim()}const R=new Date;function $(t){return R.setFullYear(t),R.setMonth(0),R.setDate(1),R.setHours(0,0,0,0),R}function B(t){return L(new Date(t))}function z(t){return P(new Date(t))}function L(t){return i["a"].count($(t.getFullYear())-1,t)}function P(t){return a["b"].count($(t.getFullYear())-1,t)}function U(t){return $(t).getDay()}function W(t,e,n,r,i,a,o){if(0<=t&&t<100){const s=new Date(-1,e,n,r,i,a,o);return s.setFullYear(t),s}return new Date(t,e,n,r,i,a,o)}function q(t){return G(new Date(t))}function V(t){return H(new Date(t))}function G(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return o["a"].count(e-1,t)}function H(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return s["b"].count(e-1,t)}function X(t){return R.setTime(Date.UTC(t,0,1)),R.getUTCDay()}function Y(t,e,n,r,i,a,o){if(0<=t&&t<100){const t=new Date(Date.UTC(-1,e,n,r,i,a,o));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(t,e,n,r,i,a,o))}function K(t,e,n,i,a){const o=e||1,s=Object(r["S"])(t),u=(t,e,r)=>(r=r||t,J(n[r],i[r],t===s&&o,e)),c=new Date,l=Object(r["ab"])(t),f=l[x]?u(x):Object(r["i"])(2012),d=l[O]?u(O):l[w]?u(w):r["gb"],h=l[_]&&l[j]?u(j,1,_+j):l[_]?u(_,1):l[j]?u(j,1):l[A]?u(A,1):l[k]?u(k,1):r["M"],p=l[C]?u(C):r["gb"],m=l[E]?u(E):r["gb"],g=l[S]?u(S):r["gb"],b=l[D]?u(D):r["gb"];return function(t){c.setTime(+t);const e=f(c);return a(e,d(c),h(c,e),p(c),m(c),g(c),b(c))}}function J(t,e,n,r){const i=n<=1?t:r?(e,i)=>r+n*Math.floor((t(e,i)-r)/n):(e,r)=>n*Math.floor(t(e,r)/n);return e?(t,n)=>e(i(t,n),n):i}function Z(t,e,n){return e+7*t-(n+6)%7}const Q={[x]:t=>t.getFullYear(),[w]:t=>Math.floor(t.getMonth()/3),[O]:t=>t.getMonth(),[A]:t=>t.getDate(),[C]:t=>t.getHours(),[E]:t=>t.getMinutes(),[S]:t=>t.getSeconds(),[D]:t=>t.getMilliseconds(),[k]:t=>L(t),[_]:t=>P(t),[_+j]:(t,e)=>Z(P(t),t.getDay(),U(e)),[j]:(t,e)=>Z(1,t.getDay(),U(e))},tt={[w]:t=>3*t,[_]:(t,e)=>Z(t,0,U(e))};function et(t,e){return K(t,e||1,Q,tt,W)}const nt={[x]:t=>t.getUTCFullYear(),[w]:t=>Math.floor(t.getUTCMonth()/3),[O]:t=>t.getUTCMonth(),[A]:t=>t.getUTCDate(),[C]:t=>t.getUTCHours(),[E]:t=>t.getUTCMinutes(),[S]:t=>t.getUTCSeconds(),[D]:t=>t.getUTCMilliseconds(),[k]:t=>G(t),[_]:t=>H(t),[j]:(t,e)=>Z(1,t.getUTCDay(),X(e)),[_+j]:(t,e)=>Z(H(t),t.getUTCDay(),X(e))},rt={[w]:t=>3*t,[_]:(t,e)=>Z(t,0,X(e))};function it(t,e){return K(t,e||1,nt,rt,Y)}const at={[x]:u["a"],[w]:c["a"].every(3),[O]:c["a"],[_]:a["b"],[A]:i["a"],[j]:i["a"],[k]:i["a"],[C]:l["a"],[E]:f["a"],[S]:d["a"],[D]:h["a"]},ot={[x]:p["a"],[w]:m["a"].every(3),[O]:m["a"],[_]:s["b"],[A]:o["a"],[j]:o["a"],[k]:o["a"],[C]:g["a"],[E]:b["a"],[S]:d["a"],[D]:h["a"]};function st(t){return at[t]}function ut(t){return ot[t]}function ct(t,e,n){return t?t.offset(e,n):void 0}function lt(t,e,n){return ct(st(t),e,n)}function ft(t,e,n){return ct(ut(t),e,n)}function dt(t,e,n,r){return t?t.range(e,n,r):void 0}function ht(t,e,n,r){return dt(st(t),e,n,r)}function pt(t,e,n,r){return dt(ut(t),e,n,r)}const mt=1e3,gt=60*mt,bt=60*gt,yt=24*bt,vt=7*yt,xt=30*yt,wt=365*yt,Ot=[x,O,A,C,E,S,D],_t=Ot.slice(0,-1),At=_t.slice(0,-1),jt=At.slice(0,-1),kt=jt.slice(0,-1),Ct=[x,_],Et=[x,O],St=[x],Dt=[[_t,1,mt],[_t,5,5*mt],[_t,15,15*mt],[_t,30,30*mt],[At,1,gt],[At,5,5*gt],[At,15,15*gt],[At,30,30*gt],[jt,1,bt],[jt,3,3*bt],[jt,6,6*bt],[jt,12,12*bt],[kt,1,yt],[Ct,1,vt],[Et,1,xt],[Et,3,3*xt],[St,1,wt]];function Ft(t){const e=t.extent,n=t.maxbins||40,i=Math.abs(Object(r["U"])(e))/n;let a,o,s=Object(y["a"])(t=>t[2]).right(Dt,i);return s===Dt.length?(a=St,o=Object(v["c"])(e[0]/wt,e[1]/wt,n)):s?(s=Dt[i/Dt[s-1][2]<Dt[s][2]/i?s-1:s],a=s[0],o=s[1]):(a=Ot,o=Math.max(Object(v["c"])(e[0],e[1],n),1)),{units:a,step:o}}},deb3:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"x","cast");if(!o["isValidDtype"](e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const s={x:n},u={dtype:e};return r["a"].runKernelFunc(t=>t.cast(n,e),s,null,i["v"],u)}const c=Object(s["b"])({cast_:u})},df37:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n("7ad3")),o=n("1309"),s=n("8e47");function u(t,e,n={}){return r(this,void 0,void 0,(function*(){const r=Object.assign({},c,n),i=s.getDrawArea(t),u=[],l=e.values,f=e.tickLabels||[],d=0===f.length;let h=!0;for(let t=0;t<l.length;t++){const e=d?"Class "+t:f[t];d&&f.push(e);for(let n=0;n<l[t].length;n++){const i=d?"Class "+n:f[n],a=l[t][n];t!==n||r.shadeDiagonal?(u.push({label:e,prediction:i,count:a,scaleCount:a}),0!==a&&(h=!1)):u.push({label:e,prediction:i,count:a,noFill:!0})}}if(!r.shadeDiagonal&&h)for(const t of u)!0===t.noFill&&(t.noFill=!1,t.scaleCount=t.count);const p={actions:!1,mode:"vega-lite",defaultStyle:!1},m={width:r.width||o.getDefaultWidth(i),height:r.height||o.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:r.fontSize,titleFontSize:r.fontSize},text:{fontSize:r.fontSize},legend:{labelFontSize:r.fontSize,titleFontSize:r.fontSize}},data:{values:u},encoding:{x:{field:"prediction",type:"ordinal",title:r.xLabel||"prediction",scale:{domain:f}},y:{field:"label",type:"ordinal",title:r.yLabel||"label",scale:{domain:f}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:r.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]};!1===r.shadeDiagonal&&m.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),r.showTextOverlay&&m.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}});const g="string"===typeof r.colorMap?{scheme:r.colorMap}:r.colorMap;m.layer[0].encoding.color.scale.range=g,yield a.default(i,m,p)}))}e.confusionMatrix=u;const c={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}},df75:function(t,e,n){var r=n("ca84"),i=n("7839");t.exports=Object.keys||function(t){return r(t,i)}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),o="/"===a(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),a=r(n.split("/")),o=Math.min(i.length,a.length),s=o,u=0;u<o;u++)if(i[u]!==a[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return c=c.concat(a.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,a=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===e?e=o:1!==a&&(a=1):-1!==e&&(a=-1);else if(!i){n=o+1;break}}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===n+1?"":t.slice(e,r)};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},df81:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("36e5"),u=n("54ef"),c=n("35c9"),l=n("c912");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function f(t,e=null,n=!1){let u=Object(a["a"])(t,"x","all","bool");const f=t=>{const r=Object(o["parseAxisParam"])(e,u.shape);let i=r;const a=Object(s["f"])(i,u.rank);null!=a&&(u=Object(l["a"])(u,a),i=Object(s["g"])(i.length,u.rank));const f=t.all(u,i);if(n){const t=Object(s["e"])(f.shape,r);return Object(c["a"])(f,t)}return f},d={x:u},h={axis:e,keepDims:n};return r["a"].runKernelFunc(f,d,null,i["f"],h)}const d=Object(u["b"])({all_:f})},e01a:function(t,e,n){"use strict";var r=n("23e7"),i=n("83ab"),a=n("da84"),o=n("5135"),s=n("861d"),u=n("9bf2").f,c=n("e893"),l=a.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new l(t):void 0===t?l():l(t);return""===t&&(f[e]=!0),e};c(d,l);var h=d.prototype=l.prototype;h.constructor=d;var p=h.toString,m="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;u(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(o(f,t))return"";var n=m?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},e053:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("36e5"),u=n("deb3"),c=n("54ef"),l=n("35c9"),f=n("c912");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function d(t,e=null,n=!1){let c=Object(a["a"])(t,"x","sum");"bool"===c.dtype&&(c=Object(u["a"])(c,"int32"));const d=(t,r)=>{r([c]);const i=Object(o["parseAxisParam"])(e,c.shape),a=Object(s["f"])(i,c.rank);let u=i,d=c;null!=a&&(d=Object(f["a"])(c,a),u=Object(s["g"])(u.length,c.rank));let h=t.sum(d,u);if(n){const t=Object(s["e"])(h.shape,i);h=Object(l["a"])(h,t)}return h},h={x:c},p={axis:e,keepDims:n};return r["a"].runKernelFunc(d,h,null,i["Ic"],p)}const h=Object(c["b"])({sum_:d})},e0fa:function(t,e,n){"use strict";
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(e){a(e)}}function s(t){try{u(r["throw"](t))}catch(e){a(e)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=n("ce1a4"),a=n("8e47"),o=n("1309");function s(t,e,n,s={}){return r(this,void 0,void 0,(function*(){const r=a.getDrawArea(t),l={};for(const t of n)if(/val_/.test(t)){const r=t.replace("val_","");u(l,r);const i=c(e,t,n.indexOf(t));l[r].series.push(t),l[r].values.push(i)}else{const r=c(e,t,n.indexOf(t));u(l,t),l[t].series.push(t),l[t].values.push(r)}const f=Object.keys(l),d=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},s),h=[];for(const t of f){const e=o.subSurface(r,t),n=l[t].series,a=l[t].values;n.every(t=>Boolean(t.match("acc")))&&(d.zoomToFitAccuracy?d.zoomToFit=!0:(d.yAxisDomain=[0,1],delete d.zoomToFit));const s=i.linechart(e,{values:a,series:n},d);h.push(s)}yield Promise.all(h)}))}function u(t,e){null==t[e]&&(t[e]={series:[],values:[]})}function c(t,e,n){if(Array.isArray(t)){const r=Array.isArray(t[0])?t[n]:t,i=[];for(let t=0;t<r.length;t++){const n=r[t];i.push({x:t,y:n[e]})}return i}return t.history[e].map((t,e)=>({x:e,y:t}))}function l(t,e,n={}){const i={},u=n.callbacks||["onEpochEnd","onBatchEnd"],c=a.getDrawArea(t),l=Object.assign({},n);function d(t){return(n,u)=>r(this,void 0,void 0,(function*(){/batch/i.test(t)?l.xLabel="Batch":/epoch/i.test(t)&&(l.xLabel="Epoch");const n=[],r=[];for(const a of e)if(null!=u[a]){r.push(a);const e=f(i,t,a);e.push({[a]:u[a]}),n.push(e)}const d=o.subSurface(c,t,{title:t});s(d,n,r,l),yield a.nextFrame()}))}delete l.callbacks;const h={};return u.forEach(t=>{h[t]=d(t)}),h}function f(t,e,n){return null==t[e]&&(t[e]={}),null==t[e][n]&&(t[e][n]=[]),t[e][n]}e.history=s,e.fitCallbacks=l},e101:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("54ef"),u=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e=5,n=1,s=1,c=.5){const l=Object(a["a"])(t,"x","localResponseNormalization");o["assert"](4===l.rank||3===l.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${l.rank}.`),o["assert"](o["isInt"](e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let f=l,d=!1;3===l.rank&&(d=!0,f=Object(u["a"])(l,[1,l.shape[0],l.shape[1],l.shape[2]]));const h=(t,r)=>{const i=t.localResponseNormalization4D(f,e,n,s,c);return r([f,i]),i},p={x:f},m={depthRadius:e,bias:n,alpha:s,beta:c},g=r["a"].runKernelFunc(h,p,null,i["sb"],m);return d?Object(u["a"])(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const l=Object(s["b"])({localResponseNormalization_:c})},e163:function(t,e,n){var r=n("5135"),i=n("7b0b"),a=n("f772"),o=n("e177"),s=a("IE_PROTO"),u=Object.prototype;t.exports=o?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e1fd:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("526f"),u=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function c(t,e){let n=Object(o["a"])(t,"a","less"),u=Object(o["a"])(e,"b","less");[n,u]=Object(a["makeTypesMatch"])(n,u),Object(s["a"])(n.shape,u.shape);const c=t=>t.less(n,u),l={a:n,b:u};return r["a"].runKernelFunc(c,l,null,i["ub"])}const l=Object(u["b"])({less_:c})},e22c:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef"),s=n("35c9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e,n=1,o=0){if(e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);const u=Object(a["a"])(t,"indices","oneHot","int32"),c=[...u.shape,e],l=(t,r)=>(r([u]),Object(s["a"])(t.oneHot(Object(s["a"])(u,[u.size]),e,n,o),c)),f={indices:u},d={depth:e,onValue:n,offValue:o};return r["a"].runKernelFunc(l,f,null,i["Ub"],d)}const c=Object(o["b"])({oneHot_:u})},e260:function(t,e,n){"use strict";var r=n("fc6a"),i=n("44d2"),a=n("3f8c"),o=n("69f3"),s=n("7dd0"),u="Array Iterator",c=o.set,l=o.getterFor(u);t.exports=s(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},e2cc:function(t,e,n){var r=n("6eeb");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},e333:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("526f"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"a","logicalAnd","bool"),s=Object(a["a"])(e,"b","logicalAnd","bool");Object(o["a"])(n.shape,s.shape);const u={a:n,b:s};return r["a"].runKernelFunc(t=>t.logicalAnd(n,s),u,null,i["Ab"])}const c=Object(s["b"])({logicalAnd_:u})},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},e439:function(t,e,n){var r=n("23e7"),i=n("d039"),a=n("fc6a"),o=n("06cf").f,s=n("83ab"),u=i((function(){o(1)})),c=!s||u;r({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(a(t),e)}})},e538:function(t,e,n){var r=n("b622");e.f=r},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e6cf:function(t,e,n){"use strict";var r,i,a,o,s=n("23e7"),u=n("c430"),c=n("da84"),l=n("d066"),f=n("fea9"),d=n("6eeb"),h=n("e2cc"),p=n("d44e"),m=n("2626"),g=n("861d"),b=n("1c0b"),y=n("19aa"),v=n("c6b6"),x=n("8925"),w=n("2266"),O=n("1c7e"),_=n("4840"),A=n("2cf4").set,j=n("b575"),k=n("cdf9"),C=n("44de"),E=n("f069"),S=n("e667"),D=n("69f3"),F=n("94ca"),N=n("b622"),T=n("2d00"),M=N("species"),I="Promise",R=D.get,$=D.set,B=D.getterFor(I),z=f,L=c.TypeError,P=c.document,U=c.process,W=l("fetch"),q=E.f,V=q,G="process"==v(U),H=!!(P&&P.createEvent&&c.dispatchEvent),X="unhandledrejection",Y="rejectionhandled",K=0,J=1,Z=2,Q=1,tt=2,et=F(I,(function(){var t=x(z)!==String(z);if(!t){if(66===T)return!0;if(!G&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!z.prototype["finally"])return!0;if(T>=51&&/native code/.test(z))return!1;var e=z.resolve(1),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[M]=n,!(e.then((function(){}))instanceof n)})),nt=et||!O((function(t){z.all(t)["catch"]((function(){}))})),rt=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},it=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;j((function(){var i=e.value,a=e.state==J,o=0;while(r.length>o){var s,u,c,l=r[o++],f=a?l.ok:l.fail,d=l.resolve,h=l.reject,p=l.domain;try{f?(a||(e.rejection===tt&&ut(t,e),e.rejection=Q),!0===f?s=i:(p&&p.enter(),s=f(i),p&&(p.exit(),c=!0)),s===l.promise?h(L("Promise-chain cycle")):(u=rt(s))?u.call(s,d,h):d(s)):h(i)}catch(m){p&&!c&&p.exit(),h(m)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&ot(t,e)}))}},at=function(t,e,n){var r,i;H?(r=P.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},(i=c["on"+t])?i(r):t===X&&C("Unhandled promise rejection",n)},ot=function(t,e){A.call(c,(function(){var n,r=e.value,i=st(e);if(i&&(n=S((function(){G?U.emit("unhandledRejection",r,t):at(X,t,r)})),e.rejection=G||st(e)?tt:Q,n.error))throw n.value}))},st=function(t){return t.rejection!==Q&&!t.parent},ut=function(t,e){A.call(c,(function(){G?U.emit("rejectionHandled",t):at(Y,t,e.value)}))},ct=function(t,e,n,r){return function(i){t(e,n,i,r)}},lt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=Z,it(t,e,!0))},ft=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw L("Promise can't be resolved itself");var i=rt(n);i?j((function(){var r={done:!1};try{i.call(n,ct(ft,t,r,e),ct(lt,t,r,e))}catch(a){lt(t,r,a,e)}})):(e.value=n,e.state=J,it(t,e,!1))}catch(a){lt(t,{done:!1},a,e)}}};et&&(z=function(t){y(this,z,I),b(t),r.call(this);var e=R(this);try{t(ct(ft,this,e),ct(lt,this,e))}catch(n){lt(this,e,n)}},r=function(t){$(this,{type:I,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:K,value:void 0})},r.prototype=h(z.prototype,{then:function(t,e){var n=B(this),r=q(_(this,z));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=G?U.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=K&&it(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=R(t);this.promise=t,this.resolve=ct(ft,t,e),this.reject=ct(lt,t,e)},E.f=q=function(t){return t===z||t===a?new i(t):V(t)},u||"function"!=typeof f||(o=f.prototype.then,d(f.prototype,"then",(function(t,e){var n=this;return new z((function(t,e){o.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof W&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return k(z,W.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:et},{Promise:z}),p(z,I,!1,!0),m(I),a=l(I),s({target:I,stat:!0,forced:et},{reject:function(t){var e=q(this);return e.reject.call(void 0,t),e.promise}}),s({target:I,stat:!0,forced:u||et},{resolve:function(t){return k(u&&this===a?z:this,t)}}),s({target:I,stat:!0,forced:nt},{all:function(t){var e=this,n=q(e),r=n.resolve,i=n.reject,a=S((function(){var n=b(e.resolve),a=[],o=0,s=1;w(t,(function(t){var u=o++,c=!1;a.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,a[u]=t,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(t){var e=this,n=q(e),r=n.reject,i=S((function(){var i=b(e.resolve);w(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(t,e,n){var r=n("5135"),i=n("56ef"),a=n("06cf"),o=n("9bf2");t.exports=function(t,e){for(var n=i(e),s=o.f,u=a.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},e89f:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("36e5"),u=n("54ef"),c=n("c912");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e=0){let n=Object(a["a"])(t,"x","argMax");const u=(t,r)=>{r([n]);let i=o["parseAxisParam"](e,n.shape);const a=s["f"](i,n.rank);return null!=a&&(n=Object(c["a"])(n,a),i=s["g"](i.length,n.rank)),t.argMax(n,i[0])},l={x:n},f={axis:e};return r["a"].runKernelFunc(u,l,null,i["h"],f)}const f=Object(u["b"])({argMax_:l})},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95a:function(t,e,n){var r=n("b622"),i=n("3f8c"),a=r("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[a]===t)}},e9a7:function(t,e,n){var r=n("76dd"),i=n("8103");function a(t){return i(r(t).toLowerCase())}t.exports=a},e9fa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var r=n("b14b"),i=a(r);function a(t){return t&&t.__esModule?t:{default:t}}var o=["-webkit-","-moz-",""],s=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;function u(t,e){if("string"===typeof e&&!(0,i.default)(e)&&s.test(e))return o.map((function(t){return t+e}))}t.exports=e["default"]},ea72:function(t,e,n){var r=n("7559"),i=n("7e8e"),a=n("76dd"),o=n("f4d9");function s(t,e,n){return t=a(t),e=n?void 0:e,void 0===e?i(t)?o(t):r(t):t.match(e)||[]}t.exports=s},eaf4:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("a3f7"),i=n("eb7e"),a=n("9748"),o=n("3b28"),s=n("b818"),u=n("9fe6"),c=n("54ef"),l=n("35c9"),f=n("7580");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function d(t,e,n,c,d,m){null==d&&(d=[1,1]),null==m&&(m=1),0===c&&(c="valid");const g=Object(r["a"])(t,"x","maxPool");let b=g,y=!1;3===g.rank&&(y=!0,b=Object(l["a"])(g,[1,g.shape[0],g.shape[1],g.shape[2]])),i["assert"](s["h"](m,d),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${m} and dilations '${d}'`);const v=s["e"](b.shape,e,m,d,c),x=[v.dilationHeight,v.dilationWidth];let w;w="same"===c?p([v.filterHeight,v.filterWidth],x):[[0,0],[0,0]];const O=1===x[0]&&1===x[1],[_,A]=h([v.inHeight,v.inWidth],x,w),j=O?c:"valid",k=O?b:Object(f["a"])(b,x,_),C="avg"===n?()=>Object(a["a"])(k,e,m,j):()=>Object(u["a"])(k,e,m,j),E=C(),S=O?E:Object(o["a"])(E,x,A);return y?Object(l["a"])(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function h(t,e,n){const r=n.map(t=>t[0]),i=n.map(t=>t[1]),a=t.concat(r,i),o=e.map((t,e)=>(t-a[e]%t)%t),s=i.map((t,e)=>t+o[e]),u=e.map((t,e)=>[r[e],s[e]]),c=e.map((t,e)=>[0,o[e]]);return[u,c]}function p(t,e){const n=t.map((t,n)=>t+(t-1)*(e[n]-1)),r=n.map(t=>t-1),i=r.map(t=>Math.floor(t/2)),a=r.map((t,e)=>t-i[e]);return r.map((t,e)=>[i[e],a[e]])}const m=Object(c["b"])({pool_:d})},eb7e:function(t,e,n){"use strict";n.r(e),n.d(e,"shuffle",(function(){return i})),n.d(e,"clamp",(function(){return a})),n.d(e,"nearestLargerEven",(function(){return o})),n.d(e,"sum",(function(){return s})),n.d(e,"randUniform",(function(){return u})),n.d(e,"distSquared",(function(){return c})),n.d(e,"assert",(function(){return l})),n.d(e,"assertShapesMatch",(function(){return f})),n.d(e,"assertNonNull",(function(){return d})),n.d(e,"flatten",(function(){return h})),n.d(e,"sizeFromShape",(function(){return p})),n.d(e,"isScalarShape",(function(){return m})),n.d(e,"arraysEqual",(function(){return g})),n.d(e,"isInt",(function(){return b})),n.d(e,"tanh",(function(){return y})),n.d(e,"sizeToSquarishShape",(function(){return v})),n.d(e,"createShuffledIndices",(function(){return x})),n.d(e,"rightPad",(function(){return w})),n.d(e,"repeatedTry",(function(){return O})),n.d(e,"inferFromImplicitShape",(function(){return _})),n.d(e,"parseAxisParam",(function(){return A})),n.d(e,"squeezeShape",(function(){return j})),n.d(e,"getTypedArrayFromDType",(function(){return k})),n.d(e,"getArrayFromDType",(function(){return C})),n.d(e,"checkConversionForErrors",(function(){return E})),n.d(e,"isValidDtype",(function(){return S})),n.d(e,"hasEncodingLoss",(function(){return D})),n.d(e,"isTypedArray",(function(){return F})),n.d(e,"bytesPerElement",(function(){return N})),n.d(e,"bytesFromStringArray",(function(){return T})),n.d(e,"isString",(function(){return M})),n.d(e,"isBoolean",(function(){return I})),n.d(e,"isNumber",(function(){return R})),n.d(e,"inferDtype",(function(){return $})),n.d(e,"isFunction",(function(){return B})),n.d(e,"nearestDivisor",(function(){return z})),n.d(e,"computeStrides",(function(){return L})),n.d(e,"createScalarValue",(function(){return P})),n.d(e,"toTypedArray",(function(){return U})),n.d(e,"toNestedArray",(function(){return q})),n.d(e,"makeOnesTypedArray",(function(){return G})),n.d(e,"makeZerosTypedArray",(function(){return H})),n.d(e,"makeZerosNestedTypedArray",(function(){return X})),n.d(e,"now",(function(){return Y})),n.d(e,"assertNonNegativeIntegerDimensions",(function(){return K})),n.d(e,"fetch",(function(){return J})),n.d(e,"encodeString",(function(){return Z})),n.d(e,"decodeString",(function(){return Q})),n.d(e,"locToIndex",(function(){return tt})),n.d(e,"indexToLoc",(function(){return et}));var r=n("b333");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t){let e=t.length,n=0,r=0;while(e>0)r=Math.random()*e|0,e--,n=t[e],t[e]=t[r],t[r]=n}function a(t,e,n){return Math.max(t,Math.min(e,n))}function o(t){return t%2===0?t:t+1}function s(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function u(t,e){const n=Math.random();return e*n+(1-n)*t}function c(t,e){let n=0;for(let r=0;r<t.length;r++){const i=Number(t[r])-Number(e[r]);n+=i*i}return n}function l(t,e){if(!t)throw new Error("string"===typeof e?e:e())}function f(t,e,n=""){l(g(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function d(t){l(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function h(t,e=[],n=!1){if(null==e&&(e=[]),Array.isArray(t)||F(t)&&!n)for(let r=0;r<t.length;++r)h(t[r],e,n);else e.push(t);return e}function p(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function m(t){return 0===t.length}function g(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function b(t){return t%1===0}function y(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function v(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function x(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return i(e),e}function w(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function O(t,e=(t=>0),n){return new Promise((r,i)=>{let a=0;const o=()=>{if(t())return void r();a++;const s=e(a);null!=n&&a>=n?i():setTimeout(o,s)};o()})}function _(t,e){let n=1,r=-1;for(let a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(-1===t[a]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(t[a]<0)throw Error(`Shapes can not be < 0. Found ${t[a]} at dim ${a}`);if(-1===r){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function A(t,e){const n=e.length;return t=null==t?e.map((t,e)=>e):[].concat(t),l(t.every(t=>t>=-n&&t<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis `+t),l(t.every(t=>b(t)),()=>"All values in axis param must be integers but got axis "+t),t.map(t=>t<0?n+t:t)}function j(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,a=null==e||i?null:A(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(null!=a){if(a[o]===s&&1!==t[s])throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(null==a[o]||a[o]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function k(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function C(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function E(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function S(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function D(t,e){return"complex64"!==e&&(("float32"!==e||"complex64"===t)&&(("int32"!==e||"float32"===t||"complex64"===t)&&("bool"!==e||"bool"!==t)))}function F(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function N(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function T(t){if(null==t)return 0;let e=0;return t.forEach(t=>e+=t.length),e}function M(t){return"string"===typeof t||t instanceof String}function I(t){return"boolean"===typeof t}function R(t){return"number"===typeof t}function $(t){return Array.isArray(t)?$(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":R(t)?"float32":M(t)?"string":I(t)?"bool":"float32"}function B(t){return!!(t&&t.constructor&&t.call&&t.apply)}function z(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function L(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function P(t,e){return"string"===e?Z(t):U([t],e)}function U(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=h(t)),Object(r["c"])().getBool("DEBUG")&&E(t,e),V(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){const e=new Uint8Array(t.length);for(let n=0;n<e.length;++n)0!==Math.round(t[n])&&(e[n]=1);return e}throw new Error("Unknown data type "+e)}function W(t,e,n){const r=new Array;if(1===e.length){const i=e[0];for(let e=0;e<i;e++)r[e]=n[t+e]}else{const i=e[0],a=e.slice(1),o=a.reduce((t,e)=>t*e);for(let e=0;e<i;e++)r[e]=W(t+e*o,a,n)}return r}function q(t,e){if(0===t.length)return e[0];const n=t.reduce((t,e)=>t*e);if(0===n)return[];if(n!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}.`);return W(0,t,e)}function V(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}function G(t,e){const n=H(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function H(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function X(t,e){const n=t.reduce((t,e)=>t*e,1);if(null==e||"float32"===e)return q(t,new Float32Array(n));if("int32"===e)return q(t,new Int32Array(n));if("bool"===e)return q(t,new Uint8Array(n));throw new Error("Unknown data type "+e)}function Y(){return Object(r["c"])().platform.now()}function K(t){t.forEach(e=>{l(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function J(t,e){return Object(r["c"])().platform.fetch(t,e)}function Z(t,e="utf-8"){return e=e||"utf-8",Object(r["c"])().platform.encode(t,e)}function Q(t,e="utf-8"){return e=e||"utf-8",Object(r["c"])().platform.decode(t,e)}function tt(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function et(t,e,n){if(0===e)return[];if(1===e)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}},ed91:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=n("b14b"),i=a(r);function a(t){return t&&t.__esModule?t:{default:t}}var o=["-webkit-",""];function s(t,e){if("string"===typeof e&&!(0,i.default)(e)&&e.indexOf("filter(")>-1)return o.map((function(t){return e.replace(/filter\(/g,t+"filter(")}))}t.exports=e["default"]},eecb:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}));var r=Math.sqrt(50),i=Math.sqrt(10),a=Math.sqrt(2);function o(t,e,n){var o=(e-t)/Math.max(0,n),s=Math.floor(Math.log(o)/Math.LN10),u=o/Math.pow(10,s);return s>=0?(u>=r?10:u>=i?5:u>=a?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(u>=r?10:u>=i?5:u>=a?2:1)}function s(t,e,n){var o=Math.abs(e-t)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),u=o/s;return u>=r?s*=10:u>=i?s*=5:u>=a&&(s*=2),e<t?-s:s}e["a"]=function(t,e,n){var r,i,a,s,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=o(t,e,n))||!isFinite(s))return[];if(s>0){t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(i=Math.ceil(e-t+1));while(++u<i)a[u]=(t+u)*s}else{s=-s,t=Math.ceil(t*s),e=Math.floor(e*s),a=new Array(i=Math.ceil(e-t+1));while(++u<i)a[u]=(t+u)/s}return r&&a.reverse(),a}},ef00:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","logicalNot","bool"),n={x:e};return r["a"].runKernelFunc(t=>t.logicalNot(e),n,null,i["Bb"])}const u=Object(o["b"])({logicalNot_:s})},eff7:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","cos"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.cos(e);return n([e]),r},n,null,i["G"])}const u=Object(o["b"])({cos_:s})},f011:function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},f069:function(t,e,n){"use strict";var r=n("1c0b"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},f0a9:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","clone",null),n=()=>r["a"].makeTensorFromDataId(e.dataId,e.shape,e.dtype),o={x:e};return r["a"].runKernelFunc(n,o,null,i["nb"])}const u=Object(o["b"])({clone_:s})},f0e5:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("6ae2"),i=n("c05b"),a=n("76c2"),o=n("a3f7"),s=n("526f"),u=n("deb3"),c=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function l(t,e){let n=Object(o["a"])(t,"a","minimum"),c=Object(o["a"])(e,"b","minimum");[n,c]=Object(a["makeTypesMatch"])(n,c),"bool"===n.dtype&&(n=Object(u["a"])(n,"int32"),c=Object(u["a"])(c,"int32")),Object(s["a"])(n.shape,c.shape);const l=(t,e)=>{const r=t.minimum(n,c);return e([n,c]),r},f={a:n,b:c};return r["a"].runKernelFunc(l,f,null,i["Mb"])}const f=Object(c["b"])({minimum_:l})},f161:function(t){t.exports=JSON.parse('{"a":"5.13.0"}')},f183:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("526f"),s=n("54ef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function u(t,e){const n=Object(a["a"])(t,"a","logicalOr","bool"),s=Object(a["a"])(e,"b","logicalOr","bool");Object(o["a"])(n.shape,s.shape);const u={a:n,b:s};return r["a"].runKernelFunc(t=>t.logicalOr(n,s),u,null,i["Cb"])}const c=Object(s["b"])({logicalOr_:u})},f195:function(t,e,n){const r=n("3034"),i=(t,e,n)=>0!==r(t,e,n);t.exports=i},f1b5:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return w})),n.d(e,"d",(function(){return O})),n.d(e,"e",(function(){return _})),n.d(e,"f",(function(){return A}));var r=n("c04e"),i=n("a3f7"),a=n("eb7e"),o=n("b9b9"),s=n("cef0"),u=n("bb2d"),c=n("e1fd"),l=n("b21c"),f=n("d4de"),d=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function h(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","notEqualStrict"),o=Object(i["a"])(e,"b","notEqualStrict");return Object(a["assertShapesMatch"])(n.shape,o.shape,"Error in notEqualStrict: "),Object(f["a"])(n,o)}function p(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","lessStrict"),o=Object(i["a"])(e,"b","lessStrict");return Object(a["assertShapesMatch"])(n.shape,o.shape,"Error in lessStrict: "),Object(c["a"])(n,o)}function m(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","equalStrict"),s=Object(i["a"])(e,"b","equalStrict");return Object(a["assertShapesMatch"])(n.shape,s.shape,"Error in equalStrict: "),Object(o["a"])(n,s)}function g(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","lessEqualStrict"),o=Object(i["a"])(e,"b","lessEqualStrict");return Object(a["assertShapesMatch"])(n.shape,o.shape,"Error in lessEqualStrict: "),Object(l["a"])(n,o)}function b(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","greaterStrict"),o=Object(i["a"])(e,"b","greaterStrict");return Object(a["assertShapesMatch"])(n.shape,o.shape,"Error in greaterStrict: "),Object(s["a"])(n,o)}function y(t,e){Object(r["b"])("strict variants of ops have been deprecated and will be removed in future");const n=Object(i["a"])(t,"a","greaterEqualStrict"),o=Object(i["a"])(e,"b","greaterEqualStrict");return Object(a["assertShapesMatch"])(n.shape,o.shape,"Error in greaterEqualStrict: "),Object(u["a"])(n,o)}const v=Object(d["b"])({equalStrict_:m}),x=Object(d["b"])({greaterEqualStrict_:y}),w=Object(d["b"])({greaterStrict_:b}),O=Object(d["b"])({lessEqualStrict_:g}),_=Object(d["b"])({lessStrict_:p}),A=Object(d["b"])({notEqualStrict_:h})},f3ae:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("eb7e"),s=n("36e5"),u=n("deb3"),c=n("54ef"),l=n("35c9"),f=n("c912");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function d(t,e=null,n=!1){let c=Object(a["a"])(t,"x","prod");const d=t=>{"bool"===c.dtype&&(c=Object(u["a"])(c,"int32"));const r=Object(o["parseAxisParam"])(e,c.shape),i=Object(s["f"])(r,c.rank);let a=r,d=c;null!=i&&(d=Object(f["a"])(c,i),a=Object(s["g"])(a.length,c.rank));let h=t.prod(d,a);if(n){const t=Object(s["e"])(h.shape,r);h=Object(l["a"])(h,t)}return h},h={x:c},p={axis:e,keepDims:n};return r["a"].runKernelFunc(d,h,null,i["ac"],p)}const h=Object(c["b"])({prod_:d})},f3b9:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r=n("eb7e");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(t,e){const n=t[0].length;t.forEach((t,e)=>{r["assert"](t.length===n,()=>`Error in concat${n}D: rank of tensors[${e}] must be the same as the rank of the rest (${n})`)}),r["assert"](e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const i=t[0];t.forEach((t,a)=>{for(let o=0;o<n;o++)r["assert"](o===e||t[o]===i[o],()=>`Error in concat${n}D: Shape of tensors[${a}] (${t}) does not match the shape of the rest (${i}) along the non-concatenated axis ${a}.`)})}function a(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}},f490:function(t,e,n){"use strict";(function(t,r){
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
let i;function a(){if(null==i){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof t)e=t;else if("undefined"!==typeof r)e=r;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}i=e}return i}function o(){const t=a();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}function s(t,e){const n=o();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s}))}).call(this,n("c8ba"),n("4362"))},f4d9:function(t,e){var n="\\ud800-\\udfff",r="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",o=r+i+a,s="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",c="\\xac\\xb1\\xd7\\xf7",l="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f="\\u2000-\\u206f",d=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",h="A-Z\\xc0-\\xd6\\xd8-\\xde",p="\\ufe0e\\ufe0f",m=c+l+f+d,g="[']",b="["+m+"]",y="["+o+"]",v="\\d+",x="["+s+"]",w="["+u+"]",O="[^"+n+m+v+s+u+h+"]",_="\\ud83c[\\udffb-\\udfff]",A="(?:"+y+"|"+_+")",j="[^"+n+"]",k="(?:\\ud83c[\\udde6-\\uddff]){2}",C="[\\ud800-\\udbff][\\udc00-\\udfff]",E="["+h+"]",S="\\u200d",D="(?:"+w+"|"+O+")",F="(?:"+E+"|"+O+")",N="(?:"+g+"(?:d|ll|m|re|s|t|ve))?",T="(?:"+g+"(?:D|LL|M|RE|S|T|VE))?",M=A+"?",I="["+p+"]?",R="(?:"+S+"(?:"+[j,k,C].join("|")+")"+I+M+")*",$="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",B="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",z=I+M+R,L="(?:"+[x,k,C].join("|")+")"+z,P=RegExp([E+"?"+w+"+"+N+"(?="+[b,E,"$"].join("|")+")",F+"+"+T+"(?="+[b,E+D,"$"].join("|")+")",E+"?"+D+"+"+N,E+"+"+T,B,$,v,L].join("|"),"g");function U(t){return t.match(P)||[]}t.exports=U},f506:function(t,e,n){"use strict";function r(t,e,n){return t.fields=e||[],t.fname=n,t}function i(t){return 1===t.length?a(t[0]):o(t)}n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return w})),n.d(e,"i",(function(){return O})),n.d(e,"j",(function(){return A})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return j}));const a=t=>function(e){return e[t]},o=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};function s(t){throw Error(t)}function u(t){const e=[],n=t.length;let r,i,a,o=null,u=0,c="";function l(){e.push(c+t.substring(r,i)),c="",r=i+1}for(t+="",r=i=0;i<n;++i)if(a=t[i],"\\"===a)c+=t.substring(r,i),c+=t.substring(++i,++i),r=i;else if(a===o)l(),o=null,u=-1;else{if(o)continue;r===u&&'"'===a||r===u&&"'"===a?(r=i+1,o=a):"."!==a||u?"["===a?(i>r&&l(),u=r=i+1):"]"===a&&(u||s("Access path missing open bracket: "+t),u>0&&l(),u=0,r=i+1):i>r?l():r=i+1}return u&&s("Access path missing closing bracket: "+t),o&&s("Access path missing closing quote: "+t),i>r&&(i++,l()),e}function c(t,e,n){const a=u(t);return t=1===a.length?a[0]:t,r((n&&n.get||i)(a),[t],e||t)}c("id");const l=r(t=>t,[],"identity");r(()=>0,[],"zero"),r(()=>1,[],"one"),r(()=>!0,[],"true"),r(()=>!1,[],"false");var f=Array.isArray;function d(t){return t===Object(t)}function h(t){return null==t||""===t?null:+t}function p(t){return"function"===typeof t}function m(t){for(let e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r],e)t[n]=e[n];return t}const g=Object.prototype.hasOwnProperty;function b(t,e){return g.call(t,e)}function y(t){return"[object Date]"===Object.prototype.toString.call(t)}function v(t){return"number"===typeof t}function x(t){return"string"===typeof t}function w(t){return f(t)?"["+t.map(w)+"]":d(t)||x(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function O(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t}const _=t=>v(t)||y(t)?t:Date.parse(t);function A(t,e){return e=e||_,null==t||""===t?null:e(t)}function j(t){return null==t||""===t?null:t+""}},f5df:function(t,e,n){var r=n("00ee"),i=n("c6b6"),a=n("b622"),o=a("toStringTag"),s="Arguments"==i(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),o))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},f5ea:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function i(t,e){if("display"===t&&r.hasOwnProperty(e))return r[e]}t.exports=e["default"]},f623:function(t,e,n){"use strict";var r=n("18e2"),i=n("1738"),a=Object(r["a"])((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*i["b"])}),(function(t,e){return(e-t)/i["b"]}),(function(t){return t.getUTCHours()}));e["a"]=a;a.range},f63b:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r=n("eb7e");
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i=30;function a(t){return t<=i?t:Object(r["nearestDivisor"])(t,Math.floor(Math.sqrt(t)))}},f67c:function(t,e,n){const r=n("2a86"),i=n("3034");t.exports=(t,e,n)=>{const a=[];let o=null,s=null;const u=t.sort((t,e)=>i(t,e,n));for(const i of u){const t=r(i,e,n);t?(s=i,o||(o=i)):(s&&a.push([o,s]),s=null,o=null)}o&&a.push([o,null]);const c=[];for(const[r,i]of a)r===i?c.push(r):i||r!==u[0]?i?r===u[0]?c.push("<="+i):c.push(`${r} - ${i}`):c.push(">="+r):c.push("*");const l=c.join(" || "),f="string"===typeof e.raw?e.raw:String(e);return l.length<f.length?l:e}},f71e:function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"===typeof e&&(e={cmp:e});var n="boolean"===typeof e.cycles&&e.cycles,r=e.cmp&&function(t){return function(e){return function(n,r){var i={key:n,value:e[n]},a={key:r,value:e[r]};return t(i,a)}}}(e.cmp),i=[];return function t(e){if(e&&e.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var a,o;if(Array.isArray(e)){for(o="[",a=0;a<e.length;a++)a&&(o+=","),o+=t(e[a])||"null";return o+"]"}if(null===e)return"null";if(-1!==i.indexOf(e)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=i.push(e)-1,u=Object.keys(e).sort(r&&r(e));for(o="",a=0;a<u.length;a++){var c=u[a],l=t(e[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return i.splice(s,1),"{"+o+"}"}}(t)}},f74c:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("34d7"),i=n("a3f7"),a=n("eb7e");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
async function o(t,e){const n=Object(i["a"])(t,"x","setdiff1d"),o=Object(i["a"])(e,"y","setdiff1d");a["assert"](n.dtype===o.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${o.dtype}).`),a["assert"](1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),a["assert"](1===o.rank,()=>`y should be 1D tensor, but got y (${o.shape}).`);const s=await n.data(),u=await o.data(),c=new Set(u);let l=0;for(let r=0;r<s.length;r++)c.has(s[r])||l++;const f=new r["b"]([l],n.dtype),d=new r["b"]([l],"int32");for(let r=0,i=0;r<s.length;r++)c.has(s[r])||(f.values[i]=s[r],d.values[i]=r,i++);return[f.toTensor(),d.toTensor()]}const s=o},f757:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("a3f7"),i=n("eb7e"),a=n("8ae0"),o=n("36e5"),s=n("c021"),u=n("ae6d"),c=n("54ef"),l=n("c9f1"),f=n("35c9"),d=n("015f"),h=n("163a"),p=n("93b2"),m=n("e053");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function g(t,e="euclidean",n=null,a=!1){t=Object(r["a"])(t,"x","norm");const s=b(t,e,n);let u=s.shape;if(a){const e=Object(i["parseAxisParam"])(n,t.shape);u=o["e"](s.shape,e)}return Object(f["a"])(s,u)}function b(t,e,n=null){if(0===t.rank)return Object(a["a"])(t);if(1!==t.rank&&null===n)return b(Object(f["a"])(t,[-1]),e,n);if(1===t.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===e)return Object(m["a"])(Object(a["a"])(t),n);if(e===1/0)return Object(s["a"])(Object(a["a"])(t),n);if(e===-1/0)return Object(u["a"])(Object(a["a"])(t),n);if("euclidean"===e||2===e)return Object(h["a"])(Object(m["a"])(Object(l["a"])(Object(a["a"])(t),Object(d["a"])(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+e)}if(Array.isArray(n)&&2===n.length){if(1===e)return Object(s["a"])(Object(m["a"])(Object(a["a"])(t),n[0]),n[1]-1);if(e===1/0)return Object(s["a"])(Object(m["a"])(Object(a["a"])(t),n[1]),n[0]);if(e===-1/0)return Object(u["a"])(Object(m["a"])(Object(a["a"])(t),n[1]),n[0]);if("fro"===e||"euclidean"===e)return Object(h["a"])(Object(m["a"])(Object(p["a"])(t),n));throw new Error("Error in norm: invalid ord value: "+e)}throw new Error("Error in norm: invalid axis: "+n)}const y=Object(c["b"])({norm_:g})},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),a=r("keys");t.exports=function(t){return a[t]||(a[t]=i(t))}},f8bb:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return _})),n.d(e,"i",(function(){return k})),n.d(e,"c",(function(){return C})),n.d(e,"f",(function(){return E})),n.d(e,"e",(function(){return F})),n.d(e,"d",(function(){return N})),n.d(e,"k",(function(){return M})),n.d(e,"g",(function(){return I})),n.d(e,"h",(function(){return R})),n.d(e,"j",(function(){return $})),n.d(e,"b",(function(){return B}));var r=n("fa11"),i=n("46cc"),a=n("d303"),o=n("526c"),s=n("aeab"),u=n("c8ad"),c=n("5874"),l=n("9489"),f=n("04b8"),d=n("f011"),h=n("d556"),p=n("3d50"),m=n("29d8"),g=n("a80f"),b=n("673d"),y=n("3bfc"),v=n("31bb"),x=n("dbf3"),w=n("113e"),O=n("9e7b");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class _{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[s,u,c,l,f,d,h,g,m,p,b,y,v,x,w,O],e=[].concat(...t.map(t=>t.json));this.opMappers=e.reduce((t,e)=>(t[e.tfOpName]=e,t),{})}transformGraph(t,e={}){const n=t.node,r=[],i=[],a=[],s=n.reduce((t,e)=>(t[e.name]=this.mapNode(e),e.op.startsWith("Placeholder")?r.push(t[e.name]):"Const"===e.op?i.push(t[e.name]):null!=e.input&&0!==e.input.length||a.push(t[e.name]),t),{});let u=[];const c=[];let l={},f={};null!=e&&(l=this.mapSignatureEntries(e.inputs),f=this.mapSignatureEntries(e.outputs));const d=Object.keys(s);d.forEach(t=>{const e=s[t];e.inputNames.forEach(t=>{const[n]=Object(o["b"])(t);e.inputs.push(s[n]),s[n].children.push(e)})}),0===Object.keys(f).length?d.forEach(t=>{const e=s[t];0===e.children.length&&c.push(e)}):Object.keys(f).forEach(t=>{const[e]=Object(o["b"])(t),n=s[e];null!=n&&(n.signatureKey=f[t],c.push(n))}),Object.keys(l).length>0?Object.keys(l).forEach(t=>{const[e]=Object(o["b"])(t),n=s[e];n&&(n.signatureKey=l[t],u.push(n))}):u=r;let h={};null!=t.library&&null!=t.library.function&&(h=t.library.function.reduce((t,e)=>(t[e.signature.name]=this.mapFunction(e),t),{}));const p={nodes:s,inputs:u,outputs:c,weights:i,placeholders:r,signature:e,functions:h};return a.length>0&&(p.initNodes=a),p}mapSignatureEntries(t){return Object.keys(t||{}).reduce((e,n)=>(e[t[n].name]=n,e),{})}mapNode(t){const e=Object(a["b"])(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});const n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map(t=>t.startsWith("^")?t.substr(1):t),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr};return null!=e.inputs&&(n.inputParams=e.inputs.reduce((t,e)=>(t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce((e,n)=>{const r=n.type;let i=void 0;switch(n.type){case"string":i=k(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=k(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=R(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=R(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=E(t.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=E(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=I(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=I(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=C(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=C(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=B(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=B(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=M(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=M(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=$(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=$(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=F(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=F(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=N(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=N(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=D(t.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=D(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${t.op}`)}return e[n.name]={value:i,type:r},e},{})),n}mapFunction(t){const e=t.nodeDef,n=[],r=[];let i={};null!=e&&(i=e.reduce((t,e)=>(t[e.name]=this.mapNode(e),"Const"===e.op&&r.push(t[e.name]),t),{}));const a=[],s=[];t.signature.inputArg.forEach(t=>{const[e]=Object(o["b"])(t.name),n={name:e,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:S(t.type),type:"dtype"}},children:[]};n.signatureKey=t.name,a.push(n),i[e]=n});const u=Object.keys(i);u.forEach(t=>{const e=i[t];e.inputNames.forEach(t=>{const[n]=Object(o["b"])(t);e.inputs.push(i[n]),i[n].children.push(e)})});const c=t.ret;t.signature.outputArg.forEach(t=>{const[e,n]=Object(o["b"])(c[t.name]),r=i[e];null!=r&&(r.defaultOutput=n,s.push(r))});const l=this.mapArgsToSignature(t);return{nodes:i,inputs:a,outputs:s,weights:r,placeholders:n,signature:l}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((t,e)=>(t[e.name]=this.mapArgToTensorInfo(e),t),{}),outputs:t.signature.outputArg.reduce((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n,t.ret),e),{})}}mapArgToTensorInfo(t,e){let n=t.name;return null!=e&&(n=e[n]),{name:n,dtype:t.type}}}function A(e){const n=Object(r["Ce"])().global;if("undefined"!==typeof n.atob)return n.atob(e);if("undefined"!==typeof t)return new t(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function j(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):A(t);return e?n:n.toLowerCase()}function k(t,e,n,r=!1){const i=t[e];return null!=i?j(i.s,r):n}function C(t,e,n){const r=t[e];return r?r.b:n}function E(t,e,n){const r=t[e]||{},i=null!=r["i"]?r["i"]:null!=r["f"]?r["f"]:n;return"number"===typeof i?i:parseInt(i,10)}function S(t){switch("string"===typeof t&&(t=i["a"][t]),t){case i["a"].DT_FLOAT:return"float32";case i["a"].DT_INT32:case i["a"].DT_INT64:case i["a"].DT_INT8:case i["a"].DT_UINT8:return"int32";case i["a"].DT_BOOL:return"bool";case i["a"].DT_DOUBLE:return"float32";case i["a"].DT_STRING:return"string";default:return null}}function D(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function F(t,e,n){const r=t[e];return r&&r.type?S(r.type):n}function N(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(t=>S(t)):n}function T(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(t=>"number"===typeof t.size?t.size:parseInt(t.size,10)):[]}function M(t,e,n){const r=t[e];return r&&r.shape?T(r.shape):n}function I(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(t=>"number"===typeof t?t:parseInt(t,10)):n}function R(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map(t=>j(t,r)):n}function $(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(t=>T(t)):n}function B(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n("b639").Buffer)},f8ee:function(t,e,n){"use strict";var r=n("18e2"),i=n("1738"),a=Object(r["a"])((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*i["c"])}),(function(t,e){return(e-t)/i["c"]}),(function(t){return t.getUTCMinutes()}));e["a"]=a;a.range},f9a1:function(t,e,n){"use strict";var r=/([A-Z])/g;function i(t){return t.replace(r,"-$1").toLowerCase()}t.exports=i},fa11:function(t,e,n){"use strict";n.d(e,"d",(function(){return le})),n.d(e,"e",(function(){return de})),n.d(e,"f",(function(){return me})),n.d(e,"g",(function(){return ye})),n.d(e,"Wb",(function(){return xe})),n.d(e,"gc",(function(){return ce})),n.d(e,"mc",(function(){return we})),n.d(e,"Dc",(function(){return ve})),n.d(e,"ad",(function(){return rt["a"]})),n.d(e,"bd",(function(){return rt["b"]})),n.d(e,"id",(function(){return rt["c"]})),n.d(e,"oc",(function(){return Oe["a"]})),n.d(e,"Gh",(function(){return Oe["b"]})),n.d(e,"ei",(function(){return Oe["c"]})),n.d(e,"ld",(function(){return _e["b"]})),n.d(e,"md",(function(){return _e["c"]})),n.d(e,"nd",(function(){return _e["d"]})),n.d(e,"od",(function(){return _e["e"]})),n.d(e,"pd",(function(){return _e["f"]})),n.d(e,"rd",(function(){return _e["h"]})),n.d(e,"sd",(function(){return _e["i"]})),n.d(e,"td",(function(){return _e["j"]})),n.d(e,"ud",(function(){return _e["k"]})),n.d(e,"vd",(function(){return _e["l"]})),n.d(e,"wd",(function(){return _e["m"]})),n.d(e,"xd",(function(){return _e["n"]})),n.d(e,"yd",(function(){return _e["o"]})),n.d(e,"zd",(function(){return _e["p"]})),n.d(e,"Ad",(function(){return _e["q"]})),n.d(e,"Bd",(function(){return _e["r"]})),n.d(e,"Ed",(function(){return _e["s"]})),n.d(e,"Jd",(function(){return _e["x"]})),n.d(e,"Fd",(function(){return _e["t"]})),n.d(e,"Gd",(function(){return _e["u"]})),n.d(e,"Hd",(function(){return _e["v"]})),n.d(e,"Id",(function(){return _e["w"]})),n.d(e,"Ld",(function(){return _e["z"]})),n.d(e,"Nd",(function(){return _e["A"]})),n.d(e,"Od",(function(){return _e["B"]})),n.d(e,"Pd",(function(){return _e["C"]})),n.d(e,"Qd",(function(){return _e["D"]})),n.d(e,"Rd",(function(){return _e["E"]})),n.d(e,"Sd",(function(){return _e["F"]})),n.d(e,"Td",(function(){return _e["G"]})),n.d(e,"Ud",(function(){return _e["H"]})),n.d(e,"Vd",(function(){return _e["I"]})),n.d(e,"Wd",(function(){return _e["J"]})),n.d(e,"Xd",(function(){return _e["K"]})),n.d(e,"Yd",(function(){return _e["L"]})),n.d(e,"Zd",(function(){return _e["M"]})),n.d(e,"ae",(function(){return _e["N"]})),n.d(e,"be",(function(){return _e["O"]})),n.d(e,"ce",(function(){return _e["P"]})),n.d(e,"ee",(function(){return _e["Q"]})),n.d(e,"fe",(function(){return _e["R"]})),n.d(e,"he",(function(){return _e["T"]})),n.d(e,"ke",(function(){return _e["U"]})),n.d(e,"le",(function(){return _e["V"]})),n.d(e,"ne",(function(){return _e["W"]})),n.d(e,"oe",(function(){return _e["X"]})),n.d(e,"se",(function(){return _e["Y"]})),n.d(e,"te",(function(){return _e["Z"]})),n.d(e,"ve",(function(){return _e["bb"]})),n.d(e,"xe",(function(){return _e["db"]})),n.d(e,"De",(function(){return _e["fb"]})),n.d(e,"Fe",(function(){return _e["hb"]})),n.d(e,"Ge",(function(){return _e["ib"]})),n.d(e,"He",(function(){return _e["jb"]})),n.d(e,"Ie",(function(){return _e["kb"]})),n.d(e,"Je",(function(){return _e["lb"]})),n.d(e,"Le",(function(){return _e["nb"]})),n.d(e,"Oe",(function(){return _e["ob"]})),n.d(e,"Pe",(function(){return _e["pb"]})),n.d(e,"Re",(function(){return _e["rb"]})),n.d(e,"af",(function(){return _e["tb"]})),n.d(e,"bf",(function(){return _e["ub"]})),n.d(e,"ff",(function(){return _e["yb"]})),n.d(e,"kf",(function(){return _e["Cb"]})),n.d(e,"lf",(function(){return _e["Db"]})),n.d(e,"mf",(function(){return _e["Eb"]})),n.d(e,"pf",(function(){return _e["Fb"]})),n.d(e,"qf",(function(){return _e["Gb"]})),n.d(e,"rf",(function(){return _e["Hb"]})),n.d(e,"vf",(function(){return _e["Lb"]})),n.d(e,"wf",(function(){return _e["Mb"]})),n.d(e,"xf",(function(){return _e["Nb"]})),n.d(e,"yf",(function(){return _e["Ob"]})),n.d(e,"zf",(function(){return _e["Pb"]})),n.d(e,"Af",(function(){return _e["Qb"]})),n.d(e,"Bf",(function(){return _e["Rb"]})),n.d(e,"Cf",(function(){return _e["Sb"]})),n.d(e,"Df",(function(){return _e["Tb"]})),n.d(e,"Ef",(function(){return _e["Ub"]})),n.d(e,"Ff",(function(){return _e["Vb"]})),n.d(e,"Hf",(function(){return _e["Xb"]})),n.d(e,"Jf",(function(){return _e["Yb"]})),n.d(e,"Kf",(function(){return _e["Zb"]})),n.d(e,"Lf",(function(){return _e["ac"]})),n.d(e,"Mf",(function(){return _e["bc"]})),n.d(e,"Nf",(function(){return _e["cc"]})),n.d(e,"Pf",(function(){return _e["ec"]})),n.d(e,"Rf",(function(){return _e["fc"]})),n.d(e,"Sf",(function(){return _e["gc"]})),n.d(e,"Uf",(function(){return _e["ic"]})),n.d(e,"Wf",(function(){return _e["kc"]})),n.d(e,"Yf",(function(){return _e["mc"]})),n.d(e,"ag",(function(){return _e["oc"]})),n.d(e,"bg",(function(){return _e["pc"]})),n.d(e,"cg",(function(){return _e["qc"]})),n.d(e,"fg",(function(){return _e["sc"]})),n.d(e,"hg",(function(){return _e["uc"]})),n.d(e,"ig",(function(){return _e["vc"]})),n.d(e,"jg",(function(){return _e["wc"]})),n.d(e,"lg",(function(){return _e["yc"]})),n.d(e,"mg",(function(){return _e["zc"]})),n.d(e,"ng",(function(){return _e["Ac"]})),n.d(e,"og",(function(){return _e["Bc"]})),n.d(e,"pg",(function(){return _e["Cc"]})),n.d(e,"qg",(function(){return _e["Dc"]})),n.d(e,"rg",(function(){return _e["Ec"]})),n.d(e,"sg",(function(){return _e["Fc"]})),n.d(e,"ug",(function(){return _e["Hc"]})),n.d(e,"vg",(function(){return _e["Ic"]})),n.d(e,"wg",(function(){return _e["Jc"]})),n.d(e,"yg",(function(){return _e["Kc"]})),n.d(e,"zg",(function(){return _e["Lc"]})),n.d(e,"Ag",(function(){return _e["Mc"]})),n.d(e,"Bg",(function(){return _e["Nc"]})),n.d(e,"Cg",(function(){return _e["Oc"]})),n.d(e,"Eg",(function(){return _e["Pc"]})),n.d(e,"Fg",(function(){return _e["Qc"]})),n.d(e,"Jg",(function(){return _e["Rc"]})),n.d(e,"Kg",(function(){return _e["Sc"]})),n.d(e,"Mg",(function(){return _e["Tc"]})),n.d(e,"Ng",(function(){return _e["Uc"]})),n.d(e,"Og",(function(){return _e["Vc"]})),n.d(e,"Pg",(function(){return _e["Wc"]})),n.d(e,"Qg",(function(){return _e["Xc"]})),n.d(e,"Rg",(function(){return _e["Yc"]})),n.d(e,"Tg",(function(){return _e["ad"]})),n.d(e,"Ug",(function(){return _e["bd"]})),n.d(e,"Vg",(function(){return _e["cd"]})),n.d(e,"Yg",(function(){return _e["ed"]})),n.d(e,"Zg",(function(){return _e["fd"]})),n.d(e,"dh",(function(){return _e["gd"]})),n.d(e,"eh",(function(){return _e["hd"]})),n.d(e,"fh",(function(){return _e["id"]})),n.d(e,"hh",(function(){return _e["kd"]})),n.d(e,"ih",(function(){return _e["ld"]})),n.d(e,"jh",(function(){return _e["md"]})),n.d(e,"kh",(function(){return _e["nd"]})),n.d(e,"lh",(function(){return _e["od"]})),n.d(e,"mh",(function(){return _e["pd"]})),n.d(e,"nh",(function(){return _e["qd"]})),n.d(e,"ph",(function(){return _e["rd"]})),n.d(e,"qh",(function(){return _e["sd"]})),n.d(e,"rh",(function(){return _e["td"]})),n.d(e,"Ke",(function(){return _e["mb"]})),n.d(e,"ef",(function(){return _e["xb"]})),n.d(e,"jf",(function(){return _e["Bb"]})),n.d(e,"Sg",(function(){return _e["Zc"]})),n.d(e,"uh",(function(){return _e["wd"]})),n.d(e,"vh",(function(){return _e["xd"]})),n.d(e,"wh",(function(){return _e["yd"]})),n.d(e,"xh",(function(){return _e["zd"]})),n.d(e,"zh",(function(){return _e["Bd"]})),n.d(e,"Ah",(function(){return _e["Cd"]})),n.d(e,"Bh",(function(){return _e["Dd"]})),n.d(e,"Ch",(function(){return _e["Ed"]})),n.d(e,"Dh",(function(){return _e["Fd"]})),n.d(e,"Fh",(function(){return _e["Hd"]})),n.d(e,"Hh",(function(){return _e["Id"]})),n.d(e,"Ih",(function(){return _e["Jd"]})),n.d(e,"Jh",(function(){return _e["Kd"]})),n.d(e,"Kh",(function(){return _e["Ld"]})),n.d(e,"Lh",(function(){return _e["Md"]})),n.d(e,"Mh",(function(){return _e["Nd"]})),n.d(e,"Nh",(function(){return _e["Od"]})),n.d(e,"Oh",(function(){return _e["Pd"]})),n.d(e,"Ph",(function(){return _e["Qd"]})),n.d(e,"Th",(function(){return _e["Rd"]})),n.d(e,"Vh",(function(){return _e["Sd"]})),n.d(e,"Yh",(function(){return _e["Ud"]})),n.d(e,"Zh",(function(){return _e["Vd"]})),n.d(e,"ci",(function(){return _e["Wd"]})),n.d(e,"di",(function(){return _e["Xd"]})),n.d(e,"ii",(function(){return _e["Yd"]})),n.d(e,"li",(function(){return _e["Zd"]})),n.d(e,"mi",(function(){return _e["ae"]})),n.d(e,"ni",(function(){return _e["be"]})),n.d(e,"oi",(function(){return _e["ce"]})),n.d(e,"Kd",(function(){return _e["y"]})),n.d(e,"Ee",(function(){return _e["gb"]})),n.d(e,"cf",(function(){return _e["vb"]})),n.d(e,"df",(function(){return _e["wb"]})),n.d(e,"sf",(function(){return _e["Ib"]})),n.d(e,"tf",(function(){return _e["Jb"]})),n.d(e,"gg",(function(){return _e["tc"]})),n.d(e,"qd",(function(){return _e["g"]})),n.d(e,"ue",(function(){return _e["ab"]})),n.d(e,"Of",(function(){return _e["dc"]})),n.d(e,"Tf",(function(){return _e["hc"]})),n.d(e,"Vf",(function(){return _e["jc"]})),n.d(e,"Zf",(function(){return _e["nc"]})),n.d(e,"tg",(function(){return _e["Gc"]})),n.d(e,"yh",(function(){return _e["Ad"]})),n.d(e,"Eh",(function(){return _e["Gd"]})),n.d(e,"Xh",(function(){return _e["Td"]})),n.d(e,"eg",(function(){return _e["rc"]})),n.d(e,"Xf",(function(){return _e["lc"]})),n.d(e,"Wg",(function(){return _e["dd"]})),n.d(e,"sh",(function(){return _e["ud"]})),n.d(e,"Se",(function(){return _e["sb"]})),n.d(e,"we",(function(){return _e["cb"]})),n.d(e,"Ae",(function(){return _e["eb"]})),n.d(e,"ge",(function(){return _e["S"]})),n.d(e,"hf",(function(){return _e["Ab"]})),n.d(e,"kg",(function(){return _e["xc"]})),n.d(e,"dc",(function(){return _e["a"]})),n.d(e,"gf",(function(){return _e["zb"]})),n.d(e,"uf",(function(){return _e["Kb"]})),n.d(e,"Gf",(function(){return _e["Wb"]})),n.d(e,"th",(function(){return _e["vd"]})),n.d(e,"Qe",(function(){return _e["qb"]})),n.d(e,"gh",(function(){return _e["jd"]})),n.d(e,"rc",(function(){return Ae["a"]})),n.d(e,"Wh",(function(){return ke})),n.d(e,"ze",(function(){return te["g"]})),n.d(e,"ye",(function(){return te["f"]})),n.d(e,"pe",(function(){return te["c"]})),n.d(e,"je",(function(){return te["b"]})),n.d(e,"re",(function(){return te["e"]})),n.d(e,"Be",(function(){return te["h"]})),n.d(e,"Qf",(function(){return te["m"]})),n.d(e,"xg",(function(){return te["n"]})),n.d(e,"Sh",(function(){return te["t"]})),n.d(e,"qe",(function(){return te["d"]})),n.d(e,"nf",(function(){return te["l"]})),n.d(e,"Uh",(function(){return te["u"]})),n.d(e,"bh",(function(){return te["r"]})),n.d(e,"Dg",(function(){return te["o"]})),n.d(e,"Ue",(function(){return te["k"]})),n.d(e,"Lg",(function(){return te["q"]})),n.d(e,"Me",(function(){return te["i"]})),n.d(e,"Ne",(function(){return te["j"]})),n.d(e,"Gg",(function(){return te["p"]})),n.d(e,"Cd",(function(){return te["a"]})),n.d(e,"ch",(function(){return te["s"]})),n.d(e,"We",(function(){return zt["c"]})),n.d(e,"Ve",(function(){return zt["b"]})),n.d(e,"Xe",(function(){return zt["d"]})),n.d(e,"Ig",(function(){return zt["f"]})),n.d(e,"Hg",(function(){return zt["e"]})),n.d(e,"bi",(function(){return zt["h"]})),n.d(e,"ai",(function(){return zt["g"]})),n.d(e,"de",(function(){return zt["a"]})),n.d(e,"ie",(function(){return se["a"]})),n.d(e,"Ye",(function(){return se["b"]})),n.d(e,"Ze",(function(){return se["c"]})),n.d(e,"gi",(function(){return se["d"]})),n.d(e,"hi",(function(){return se["e"]})),n.d(e,"ji",(function(){return se["f"]})),n.d(e,"bb",(function(){return f["b"]})),n.d(e,"Ce",(function(){return f["c"]})),n.d(e,"Y",(function(){return f["a"]})),n.d(e,"ki",(function(){return Qt})),n.d(e,"dg",(function(){return Ee})),n.d(e,"Md",(function(){return a})),n.d(e,"if",(function(){return r})),n.d(e,"If",(function(){return i})),n.d(e,"ah",(function(){return s})),n.d(e,"Rh",(function(){return Zt})),n.d(e,"fi",(function(){return S})),n.d(e,"Dd",(function(){return u})),n.d(e,"Qh",(function(){return Jt})),n.d(e,"oh",(function(){return Ht})),n.d(e,"Te",(function(){return o})),n.d(e,"Xg",(function(){return Gt})),n.d(e,"me",(function(){return hn})),n.d(e,"of",(function(){return c})),n.d(e,"zb",(function(){return wn["b"]})),n.d(e,"O",(function(){return wn["a"]})),n.d(e,"a",(function(){return Bt["a"]})),n.d(e,"b",(function(){return Bt["b"]})),n.d(e,"c",(function(){return Bt["c"]})),n.d(e,"h",(function(){return Bt["d"]})),n.d(e,"i",(function(){return Bt["e"]})),n.d(e,"j",(function(){return Bt["f"]})),n.d(e,"k",(function(){return Bt["g"]})),n.d(e,"l",(function(){return Bt["h"]})),n.d(e,"m",(function(){return Bt["i"]})),n.d(e,"n",(function(){return Bt["j"]})),n.d(e,"o",(function(){return Bt["k"]})),n.d(e,"p",(function(){return Bt["l"]})),n.d(e,"r",(function(){return Bt["n"]})),n.d(e,"q",(function(){return Bt["m"]})),n.d(e,"s",(function(){return Bt["o"]})),n.d(e,"v",(function(){return Bt["r"]})),n.d(e,"t",(function(){return Bt["p"]})),n.d(e,"u",(function(){return Bt["q"]})),n.d(e,"w",(function(){return Bt["s"]})),n.d(e,"x",(function(){return Bt["t"]})),n.d(e,"y",(function(){return Bt["u"]})),n.d(e,"z",(function(){return Bt["v"]})),n.d(e,"A",(function(){return Bt["w"]})),n.d(e,"B",(function(){return Bt["x"]})),n.d(e,"C",(function(){return Bt["y"]})),n.d(e,"D",(function(){return Bt["z"]})),n.d(e,"E",(function(){return Bt["A"]})),n.d(e,"F",(function(){return Bt["B"]})),n.d(e,"G",(function(){return Bt["C"]})),n.d(e,"H",(function(){return Bt["D"]})),n.d(e,"I",(function(){return Bt["E"]})),n.d(e,"J",(function(){return Bt["F"]})),n.d(e,"K",(function(){return Bt["G"]})),n.d(e,"L",(function(){return Bt["H"]})),n.d(e,"N",(function(){return Bt["J"]})),n.d(e,"M",(function(){return Bt["I"]})),n.d(e,"P",(function(){return Bt["K"]})),n.d(e,"Q",(function(){return Bt["L"]})),n.d(e,"R",(function(){return Bt["M"]})),n.d(e,"S",(function(){return Bt["N"]})),n.d(e,"T",(function(){return Bt["O"]})),n.d(e,"U",(function(){return Bt["P"]})),n.d(e,"W",(function(){return Bt["R"]})),n.d(e,"V",(function(){return Bt["Q"]})),n.d(e,"X",(function(){return Bt["S"]})),n.d(e,"Z",(function(){return Bt["T"]})),n.d(e,"ab",(function(){return Bt["U"]})),n.d(e,"db",(function(){return Bt["W"]})),n.d(e,"cb",(function(){return Bt["V"]})),n.d(e,"eb",(function(){return Bt["X"]})),n.d(e,"fb",(function(){return Bt["Y"]})),n.d(e,"gb",(function(){return Bt["Z"]})),n.d(e,"hb",(function(){return Bt["ab"]})),n.d(e,"ib",(function(){return Bt["bb"]})),n.d(e,"jb",(function(){return Bt["cb"]})),n.d(e,"kb",(function(){return Bt["db"]})),n.d(e,"mb",(function(){return Bt["fb"]})),n.d(e,"qb",(function(){return Bt["jb"]})),n.d(e,"pb",(function(){return Bt["ib"]})),n.d(e,"rb",(function(){return Bt["kb"]})),n.d(e,"sb",(function(){return Bt["lb"]})),n.d(e,"ub",(function(){return Bt["nb"]})),n.d(e,"tb",(function(){return Bt["mb"]})),n.d(e,"vb",(function(){return Bt["ob"]})),n.d(e,"wb",(function(){return Bt["pb"]})),n.d(e,"xb",(function(){return Bt["qb"]})),n.d(e,"yb",(function(){return Bt["rb"]})),n.d(e,"Cb",(function(){return Bt["ub"]})),n.d(e,"Db",(function(){return Bt["vb"]})),n.d(e,"Eb",(function(){return Bt["wb"]})),n.d(e,"Fb",(function(){return Bt["xb"]})),n.d(e,"Gb",(function(){return Bt["yb"]})),n.d(e,"Ib",(function(){return Bt["Ab"]})),n.d(e,"Jb",(function(){return Bt["Bb"]})),n.d(e,"Kb",(function(){return Bt["Cb"]})),n.d(e,"Hb",(function(){return Bt["zb"]})),n.d(e,"Ab",(function(){return Bt["sb"]})),n.d(e,"Bb",(function(){return Bt["tb"]})),n.d(e,"Lb",(function(){return Bt["Db"]})),n.d(e,"Rb",(function(){return Bt["Jb"]})),n.d(e,"Mb",(function(){return Bt["Eb"]})),n.d(e,"Pb",(function(){return Bt["Hb"]})),n.d(e,"Nb",(function(){return Bt["Fb"]})),n.d(e,"Ob",(function(){return Bt["Gb"]})),n.d(e,"Qb",(function(){return Bt["Ib"]})),n.d(e,"Sb",(function(){return Bt["Kb"]})),n.d(e,"Tb",(function(){return Bt["Lb"]})),n.d(e,"Ub",(function(){return Bt["Mb"]})),n.d(e,"Vb",(function(){return Bt["Nb"]})),n.d(e,"Xb",(function(){return Bt["Ob"]})),n.d(e,"Yb",(function(){return Bt["Pb"]})),n.d(e,"cc",(function(){return Bt["Tb"]})),n.d(e,"Zb",(function(){return Bt["Qb"]})),n.d(e,"ac",(function(){return Bt["Rb"]})),n.d(e,"bc",(function(){return Bt["Sb"]})),n.d(e,"fc",(function(){return Bt["Vb"]})),n.d(e,"ec",(function(){return Bt["Ub"]})),n.d(e,"hc",(function(){return Bt["Wb"]})),n.d(e,"ic",(function(){return Bt["Xb"]})),n.d(e,"jc",(function(){return Bt["Yb"]})),n.d(e,"kc",(function(){return Bt["Zb"]})),n.d(e,"lc",(function(){return Bt["ac"]})),n.d(e,"nc",(function(){return Bt["bc"]})),n.d(e,"pc",(function(){return Bt["cc"]})),n.d(e,"qc",(function(){return Bt["dc"]})),n.d(e,"sc",(function(){return Bt["ec"]})),n.d(e,"uc",(function(){return Bt["gc"]})),n.d(e,"xc",(function(){return Bt["jc"]})),n.d(e,"yc",(function(){return Bt["kc"]})),n.d(e,"vc",(function(){return Bt["hc"]})),n.d(e,"wc",(function(){return Bt["ic"]})),n.d(e,"tc",(function(){return Bt["fc"]})),n.d(e,"zc",(function(){return Bt["lc"]})),n.d(e,"Bc",(function(){return Bt["nc"]})),n.d(e,"Cc",(function(){return Bt["oc"]})),n.d(e,"Ec",(function(){return Bt["pc"]})),n.d(e,"Fc",(function(){return Bt["qc"]})),n.d(e,"Gc",(function(){return Bt["rc"]})),n.d(e,"Lc",(function(){return Bt["wc"]})),n.d(e,"Jc",(function(){return Bt["uc"]})),n.d(e,"Kc",(function(){return Bt["vc"]})),n.d(e,"Ic",(function(){return Bt["tc"]})),n.d(e,"Hc",(function(){return Bt["sc"]})),n.d(e,"Nc",(function(){return Bt["yc"]})),n.d(e,"Rc",(function(){return Bt["Cc"]})),n.d(e,"Xc",(function(){return Bt["Ic"]})),n.d(e,"Oc",(function(){return Bt["zc"]})),n.d(e,"Qc",(function(){return Bt["Bc"]})),n.d(e,"Mc",(function(){return Bt["xc"]})),n.d(e,"Tc",(function(){return Bt["Ec"]})),n.d(e,"Sc",(function(){return Bt["Dc"]})),n.d(e,"Wc",(function(){return Bt["Hc"]})),n.d(e,"Pc",(function(){return Bt["Ac"]})),n.d(e,"Vc",(function(){return Bt["Gc"]})),n.d(e,"Yc",(function(){return Bt["Jc"]})),n.d(e,"Zc",(function(){return Bt["Kc"]})),n.d(e,"cd",(function(){return Bt["Lc"]})),n.d(e,"dd",(function(){return Bt["Mc"]})),n.d(e,"ed",(function(){return Bt["Nc"]})),n.d(e,"fd",(function(){return Bt["Oc"]})),n.d(e,"gd",(function(){return Bt["Pc"]})),n.d(e,"hd",(function(){return Bt["Qc"]})),n.d(e,"jd",(function(){return Bt["Rc"]})),n.d(e,"Uc",(function(){return Bt["Fc"]})),n.d(e,"lb",(function(){return Bt["eb"]})),n.d(e,"Ac",(function(){return Bt["mc"]})),n.d(e,"kd",(function(){return Bt["Sc"]})),n.d(e,"nb",(function(){return Bt["gb"]})),n.d(e,"ob",(function(){return Bt["hb"]}));var r={};n.r(r),n.d(r,"copyModel",(function(){return K})),n.d(r,"listModels",(function(){return X})),n.d(r,"moveModel",(function(){return J})),n.d(r,"removeModel",(function(){return Y})),n.d(r,"browserFiles",(function(){return ht})),n.d(r,"browserHTTPRequest",(function(){return kt})),n.d(r,"concatenateArrayBuffers",(function(){return d["d"]})),n.d(r,"decodeWeights",(function(){return d["e"]})),n.d(r,"encodeWeights",(function(){return d["f"]})),n.d(r,"fromMemory",(function(){return St})),n.d(r,"getLoadHandlers",(function(){return b})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return d["g"]})),n.d(r,"getSaveHandlers",(function(){return g})),n.d(r,"http",(function(){return jt})),n.d(r,"isHTTPScheme",(function(){return _t})),n.d(r,"loadWeights",(function(){return bt})),n.d(r,"registerLoadRouter",(function(){return m})),n.d(r,"registerSaveRouter",(function(){return p})),n.d(r,"weightsLoaderFactory",(function(){return yt})),n.d(r,"withSaveHandler",(function(){return Dt}));var i={};n.r(i),n.d(i,"confusionMatrix",(function(){return $t}));var a={};n.r(a),n.d(a,"toPixels",(function(){return Wt})),n.d(a,"fromPixels",(function(){return qt}));var o={};n.r(o),n.d(o,"prepareAndValidate",(function(){return Vt}));var s={};n.r(s),n.d(s,"Serializable",(function(){return Xt})),n.d(s,"SerializationMap",(function(){return Yt})),n.d(s,"registerClass",(function(){return Kt}));var u={};n.r(u),n.d(u,"axesAreInnerMostDims",(function(){return Fe["b"]})),n.d(u,"combineLocations",(function(){return Fe["c"]})),n.d(u,"computeOutAndReduceShapes",(function(){return Fe["d"]})),n.d(u,"expandShapeToKeepDim",(function(){return Fe["e"]})),n.d(u,"assertAxesAreInnerMostDims",(function(){return Fe["a"]})),n.d(u,"getAxesPermutation",(function(){return Fe["f"]})),n.d(u,"getUndoAxesPermutation",(function(){return Fe["h"]})),n.d(u,"getInnerMostAxes",(function(){return Fe["g"]})),n.d(u,"getBroadcastDims",(function(){return Ne["b"]})),n.d(u,"getReductionAxes",(function(){return Ne["c"]})),n.d(u,"assertAndGetBroadcastShape",(function(){return Ne["a"]})),n.d(u,"assertParamsConsistent",(function(){return Te["a"]})),n.d(u,"computeOutShape",(function(){return Te["b"]})),n.d(u,"computeDilation2DInfo",(function(){return Me["d"]})),n.d(u,"computePool2DInfo",(function(){return Me["e"]})),n.d(u,"computePool3DInfo",(function(){return Me["f"]})),n.d(u,"computeConv2DInfo",(function(){return Me["a"]})),n.d(u,"computeConv3DInfo",(function(){return Me["b"]})),n.d(u,"computeDefaultPad",(function(){return Me["c"]})),n.d(u,"tupleValuesAreOne",(function(){return Me["i"]})),n.d(u,"eitherStridesOrDilationsAreOne",(function(){return Me["h"]})),n.d(u,"convertConv2DDataFormat",(function(){return Me["g"]})),n.d(u,"getFusedDyActivation",(function(){return Ie["c"]})),n.d(u,"getFusedBiasGradient",(function(){return Ie["b"]})),n.d(u,"applyActivation",(function(){return Ie["a"]})),n.d(u,"shouldFuse",(function(){return Ie["d"]})),n.d(u,"PARALLELIZE_THRESHOLD",(function(){return Re["a"]})),n.d(u,"computeOptimalWindowSize",(function(){return Re["b"]})),n.d(u,"slice_util",(function(){return Ht})),n.d(u,"upcastType",(function(){return Oe["c"]})),n.d(u,"getImageCenter",(function(){return $e})),n.d(u,"getReshaped",(function(){return Be})),n.d(u,"getPermuted",(function(){return ze})),n.d(u,"getReshapedPermuted",(function(){return Le})),n.d(u,"getSliceBeginCoords",(function(){return Pe})),n.d(u,"getSliceSize",(function(){return Ue})),n.d(u,"prepareAndValidate",(function(){return Vt})),n.d(u,"validateUpdateShape",(function(){return Gt["validateUpdateShape"]})),n.d(u,"validateInput",(function(){return Gt["validateInput"]})),n.d(u,"calculateShapes",(function(){return Gt["calculateShapes"]})),n.d(u,"SELU_SCALEALPHA",(function(){return We})),n.d(u,"SELU_SCALE",(function(){return qe})),n.d(u,"ERF_P",(function(){return Ve})),n.d(u,"ERF_A1",(function(){return Ge})),n.d(u,"ERF_A2",(function(){return He})),n.d(u,"ERF_A3",(function(){return Xe})),n.d(u,"ERF_A4",(function(){return Ye})),n.d(u,"ERF_A5",(function(){return Ke})),n.d(u,"warn",(function(){return Je})),n.d(u,"log",(function(){return Ze})),n.d(u,"mergeRealAndImagArrays",(function(){return Qe})),n.d(u,"splitRealAndImagArrays",(function(){return tn})),n.d(u,"complexWithEvenIndex",(function(){return en})),n.d(u,"complexWithOddIndex",(function(){return nn})),n.d(u,"getComplexWithIndex",(function(){return rn})),n.d(u,"assignToTypedArray",(function(){return an})),n.d(u,"exponents",(function(){return on})),n.d(u,"exponent",(function(){return sn})),n.d(u,"prepareSplitSize",(function(){return un["a"]})),n.d(u,"segment_util",(function(){return cn})),n.d(u,"castTensor",(function(){return ln})),n.d(u,"reshapeTensor",(function(){return fn})),n.d(u,"linspaceImpl",(function(){return dn}));var c={};n.r(c),n.d(c,"nonMaxSuppressionV3Impl",(function(){return pn["a"]})),n.d(c,"nonMaxSuppressionV4Impl",(function(){return pn["b"]})),n.d(c,"nonMaxSuppressionV5Impl",(function(){return pn["c"]})),n.d(c,"split",(function(){return gn})),n.d(c,"tile",(function(){return bn})),n.d(c,"topkImpl",(function(){return vn})),n.d(c,"whereImpl",(function(){return xn["a"]}));var l=n("6ae2"),f=(n("29a8"),n("b333")),d=n("350f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class h{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==h.instance&&(h.instance=new h),h.instance}static registerSaveRouter(t){h.getInstance().saveRouters.push(t)}static registerLoadRouter(t){h.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return h.getHandlers(t,"save")}static getLoadHandlers(t,e){return h.getHandlers(t,"load",e)}static getHandlers(t,e,n){const r=[],i="load"===e?h.getInstance().loadRouters:h.getInstance().saveRouters;return i.forEach(e=>{const i=e(t,n);null!==i&&r.push(i)}),r}}const p=t=>h.registerSaveRouter(t),m=t=>h.registerLoadRouter(t),g=t=>h.getSaveHandlers(t),b=(t,e)=>h.getLoadHandlers(t,e)
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */,y="tensorflowjs",v=1,x="models_store",w="model_info_store";function O(){if(!Object(f["c"])().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t="undefined"===typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function _(t){const e=t.result;e.createObjectStore(x,{keyPath:"modelPath"}),e.createObjectStore(w,{keyPath:"modelPath"})}class A{constructor(t){if(this.indexedDB=O(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise((t,n)=>{const r=this.indexedDB.open(y,v);r.onupgradeneeded=()=>_(r),r.onsuccess=()=>{const i=r.result;if(null==e){const e=i.transaction(x,"readonly"),r=e.objectStore(x),a=r.get(this.modelPath);a.onsuccess=()=>{if(null==a.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));t(a.result.modelArtifacts)},a.onerror=t=>(i.close(),n(a.error)),e.oncomplete=()=>i.close()}else{const r=Object(d["g"])(e),a=i.transaction(w,"readwrite");let o=a.objectStore(w);const s=o.put({modelPath:this.modelPath,modelArtifactsInfo:r});let u;s.onsuccess=()=>{u=i.transaction(x,"readwrite");const s=u.objectStore(x),c=s.put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:r});c.onsuccess=()=>t({modelArtifactsInfo:r}),c.onerror=t=>{o=a.objectStore(w);const e=o.delete(this.modelPath);e.onsuccess=()=>(i.close(),n(c.error)),e.onerror=t=>(i.close(),n(c.error))}},s.onerror=t=>(i.close(),n(s.error)),a.oncomplete=()=>{null==u?i.close():u.oncomplete=()=>i.close()}}},r.onerror=t=>n(r.error)})}}A.URL_SCHEME="indexeddb://";const j=t=>Object(f["c"])().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(A.URL_SCHEME)?k(t.slice(A.URL_SCHEME.length)):null;function k(t){return new A(t)}function C(t){return t.startsWith(A.URL_SCHEME)?t.slice(A.URL_SCHEME.length):t}h.registerSaveRouter(j),h.registerLoadRouter(j);class E{constructor(){this.indexedDB=O()}async listModels(){return new Promise((t,e)=>{const n=this.indexedDB.open(y,v);n.onupgradeneeded=()=>_(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(w,"readonly"),a=i.objectStore(w),o=a.getAll();o.onsuccess=()=>{const e={};for(const t of o.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},o.onerror=t=>(r.close(),e(o.error)),i.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)})}async removeModel(t){return t=C(t),new Promise((e,n)=>{const r=this.indexedDB.open(y,v);r.onupgradeneeded=()=>_(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(w,"readwrite"),o=a.objectStore(w),s=o.get(t);let u;s.onsuccess=()=>{if(null==s.result)return i.close(),n(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const r=o.delete(t),a=()=>{u=i.transaction(x,"readwrite");const r=u.objectStore(x),a=r.delete(t);a.onsuccess=()=>e(s.result.modelArtifactsInfo),a.onerror=t=>n(s.error)};r.onsuccess=a,r.onerror=t=>(a(),i.close(),n(s.error))}},s.onerror=t=>(i.close(),n(s.error)),a.oncomplete=()=>{null==u?i.close():u.oncomplete=()=>i.close()}},r.onerror=t=>n(r.error)})}}var S=n("eb7e");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D="/",F="tensorflowjs_models",N="info",T="model_topology",M="weight_specs",I="weight_data",R="model_metadata";function $(t){return{info:[F,t,N].join(D),topology:[F,t,T].join(D),weightSpecs:[F,t,M].join(D),weightData:[F,t,I].join(D),modelMetadata:[F,t,R].join(D)}}function B(t){const e=t.split(D);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(D)}function z(t){return t.startsWith(L.URL_SCHEME)?t.slice(L.URL_SCHEME.length):t}class L{constructor(t){if(!Object(f["c"])().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=$(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),i=Object(d["g"])(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Object(d["a"])(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),{modelArtifactsInfo:i}}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const t=JSON.parse(i);e.format=t["format"],e.generatedBy=t["generatedBy"],e.convertedBy=t["convertedBy"],e.userDefinedMetadata=t["userDefinedMetadata"]}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=Object(d["b"])(a),e}}L.URL_SCHEME="localstorage://";const P=t=>Object(f["c"])().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(L.URL_SCHEME)?U(t.slice(L.URL_SCHEME.length)):null;function U(t){return new L(t)}h.registerSaveRouter(P),h.registerLoadRouter(P);class W{constructor(){Object(S["assert"])(Object(f["c"])().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Object(S["assert"])("undefined"===typeof window||"undefined"!==typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},e=F+D,n=D+N;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(e)&&i.endsWith(n)){const e=B(i);t[e]=JSON.parse(this.LS.getItem(i))}}return t}async removeModel(t){t=z(t);const e=$(t);if(null==this.LS.getItem(e.info))throw new Error(`Cannot find model at path '${t}'`);const n=JSON.parse(this.LS.getItem(e.info));return this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),n}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q="://";class V{constructor(){this.managers={}}static getInstance(){return null==V.instance&&(V.instance=new V),V.instance}static registerManager(t,e){Object(S["assert"])(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(q)&&(t=t.slice(0,t.indexOf(q))),Object(S["assert"])(t.length>0,()=>"scheme must not be an empty string.");const n=V.getInstance();Object(S["assert"])(null==n.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),n.managers[t]=e}static getManager(t){const e=this.getInstance().managers[t];if(null==e)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(this.getInstance().managers)}}function G(t){if(-1===t.indexOf(q))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+V.getSchemes().join(","));return{scheme:t.split(q)[0],path:t.split(q)[1]}}async function H(t,e,n=!1){Object(S["assert"])(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=h.getLoadHandlers(t);Object(S["assert"])(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),Object(S["assert"])(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const i=r[0],a=h.getSaveHandlers(e);Object(S["assert"])(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),Object(S["assert"])(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=a[0],s=G(t).scheme,u=G(t).path,c=s===G(t).scheme,l=await i.load();n&&c&&await V.getManager(s).removeModel(u);const f=await o.save(l);return n&&!c&&await V.getManager(s).removeModel(u),f.modelArtifactsInfo}async function X(){const t=V.getSchemes(),e={};for(const n of t){const t=await V.getManager(n).listModels();for(const r in t){const i=n+q+r;e[i]=t[r]}}return e}async function Y(t){const e=G(t),n=V.getManager(e.scheme);return n.removeModel(e.path)}async function K(t,e){const n=!1;return H(t,e,n)}async function J(t,e){const n=!0;return H(t,e,n)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z{fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}}if(Object(f["c"])().get("IS_BROWSER")){Object(f["c"])().setPlatform("browser",new Z);try{V.registerManager(L.URL_SCHEME,new W)}catch(To){}try{V.registerManager(A.URL_SCHEME,new E)}catch(To){}}n("4b05");var Q=n("043e"),tt=n("deb3"),et=n("f0a9"),nt=n("7568"),rt=n("34d7");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
Object(l["b"])();const it={buffer:Q["a"],cast:tt["a"],clone:et["a"],print:nt["a"]};Object(rt["e"])(it);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const at="model",ot=".json",st=".weights.bin";function ut(t){return new Promise(t=>setTimeout(t)).then(t)}class ct{constructor(t){if(!Object(f["c"])().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(ct.URL_SCHEME)&&(t=t.slice(ct.URL_SCHEME.length)),null!=t&&0!==t.length||(t=at),this.modelTopologyFileName=t+ot,this.weightDataFileName=t+st}async save(t){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=i,await ut(()=>a.dispatchEvent(new MouseEvent("click"))),null!=t.weightData){const t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=e,await ut(()=>t.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Object(d["g"])(t)}}}}ct.URL_SCHEME="downloads://";class lt{constructor(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}async load(){const t=this.files[0],e=this.files.slice(1);return new Promise((n,r)=>{const i=new FileReader;i.onload=i=>{const a=JSON.parse(i.target.result),o=a.modelTopology;if(null==o)return void r(new Error("modelTopology field is missing from file "+t.name));0===e.length&&n({modelTopology:o});const s=a.weightsManifest;if(null==s)return void r(new Error("weightManifest field is missing from file "+t.name));let u;try{u=this.checkManifestAndWeightFiles(s,e)}catch(To){return void r(To)}const c=[],l=[],f=[];s.forEach(t=>{t.paths.forEach(t=>{l.push(t),f.push(null)}),c.push(...t.weights)}),s.forEach(t=>{t.paths.forEach(t=>{const e=new FileReader;e.onload=e=>{const r=e.target.result,i=l.indexOf(t);f[i]=r,-1===f.indexOf(null)&&n({modelTopology:o,weightSpecs:c,weightData:Object(d["d"])(f),format:a.format,generatedBy:a.generatedBy,convertedBy:a.convertedBy,userDefinedMetadata:a.userDefinedMetadata})},e.onerror=e=>r(`Failed to weights data from file of path '${t}'.`),e.readAsArrayBuffer(u[t])})})},i.onerror=e=>r(`Failed to read model topology and weights manifest JSON from file '${t.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(t)})}checkManifestAndWeightFiles(t,e){const n=[],r=e.map(t=>Object(d["c"])(t.name)),i={};for(const a of t)a.paths.forEach(t=>{const a=Object(d["c"])(t);if(-1!==n.indexOf(a))throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),-1===r.indexOf(a))throw new Error(`Weight file with basename '${a}' is not provided.`);i[t]=e[r.indexOf(a)]});if(n.length!==e.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${e.length}).`);return i}}const ft=t=>Object(f["c"])().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ct.URL_SCHEME)?dt(t.slice(ct.URL_SCHEME.length)):null;function dt(t="model"){return new ct(t)}function ht(t){return new lt(t)}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pt(t,e,n,r){o(t),n=null==n?0:n,r=null==r?1:r,s(n,r);let i=0;const a=a=>(a.then(a=>{const o=n+ ++i/t.length*(r-n);return e(o),a}),a);function o(t){Object(S["assert"])(null!=t&&Array.isArray(t)&&t.length>0,()=>"promises must be a none empty array")}function s(t,e){Object(S["assert"])(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+t),Object(S["assert"])(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+e),Object(S["assert"])(e>=t,()=>`startFraction must be no more than endFraction, but got startFraction ${t} and endFraction `+e)}return Promise.all(t.map(a))}h.registerSaveRouter(ft);var mt=n("9847");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function gt(t,e){null==e&&(e={});const n=null==e.fetchFunc?Object(f["c"])().platform.fetch:e.fetchFunc,r=t.map(t=>n(t,e.requestInit,{isBinary:!0})),i=0,a=.5,o=null==e.onProgress?await Promise.all(r):await pt(r,e.onProgress,i,a),s=o.map(t=>t.arrayBuffer()),u=.5,c=1,l=null==e.onProgress?await Promise.all(s):await pt(s,e.onProgress,u,c);return l}async function bt(t,e="",n,r){const i=t=>gt(t,{requestInit:r}),a=yt(i);return a(t,e,n)}function yt(t){return async(e,n="",r)=>{const i=e.map(()=>!1),a={},o=null!=r?r.map(()=>!1):[],s=[];if(e.forEach((t,e)=>{let n=0;t.weights.forEach(t=>{const u="quantization"in t?t.quantization.dtype:t.dtype,c=mt["a"][u]*S["sizeFromShape"](t.shape),l=()=>{i[e]=!0,null==a[e]&&(a[e]=[]),a[e].push({manifestEntry:t,groupOffset:n,sizeBytes:c})};null!=r?r.forEach((e,n)=>{e===t.name&&(l(),o[n]=!0)}):l(),s.push(t.name),n+=c})}),!o.every(t=>t)){const t=r.filter((t,e)=>!o[e]);throw new Error("Could not find weights in manifest with names: "+t.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".")}const u=i.reduce((t,e,n)=>(e&&t.push(n),t),[]),c=[];u.forEach(t=>{e[t].paths.forEach(t=>{const e=n+(n.endsWith("/")?"":"/")+t;c.push(e)})});const l=await t(c),f={};let h=0;return u.forEach(t=>{const n=e[t].paths.length;let r=0;for(let e=0;e<n;e++)r+=l[h+e].byteLength;const i=new ArrayBuffer(r),o=new Uint8Array(i);let s=0;for(let e=0;e<n;e++){const t=new Uint8Array(l[h+e]);o.set(t,s),s+=t.byteLength}const u=a[t];u.forEach(t=>{const e=i.slice(t.groupOffset,t.groupOffset+t.sizeBytes),n=Object(d["e"])(e,[t.manifestEntry]);for(const r in n)f[r]=n[r]}),h+=n}),f}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vt="application/octet-stream",xt="application/json";class wt{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,this.weightUrlConverter=e.weightUrlConverter,null!=e.fetchFunc?(Object(S["assert"])("function"===typeof e.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=e.fetchFunc):this.fetch=Object(f["c"])().platform.fetch,Object(S["assert"])(null!=t&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&Object(S["assert"])(2===t.length,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:n};e.body.append("model.json",new Blob([JSON.stringify(r)],{type:xt}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:vt}),"model.weights.bin");const i=await this.fetch(this.path,e);if(i.ok)return{modelArtifactsInfo:Object(d["g"])(t),responses:[i]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code `+t.status+". Please verify this URL points to the model JSON of the model to load.");let e;try{e=await t.json()}catch(d){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=e.modelTopology,r=e.weightsManifest,i=e.generatedBy,a=e.convertedBy,o=e.format,s=e.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let u,c;if(null!=r){const t=await this.loadWeights(r);[u,c]=t}const l={modelTopology:n,weightSpecs:u,weightData:c,userDefinedMetadata:s,generatedBy:i,convertedBy:a,format:o},f=e.modelInitializer;return f&&(l.modelInitializer=f),l}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=Ot(e),i=this.weightPathPrefix||n,a=[];for(const c of t)a.push(...c.weights);const o=[],s=[];for(const c of t)for(const t of c.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(t)):o.push(i+t+r);this.weightUrlConverter&&o.push(...await Promise.all(s));const u=await gt(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,Object(d["d"])(u)]}}function Ot(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function _t(t){return null!=t.match(wt.URL_SCHEME_REGEX)}wt.URL_SCHEME_REGEX=/^https?:\/\//;const At=(t,e)=>{if("undefined"===typeof fetch&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every(t=>_t(t)):_t(t),n)return jt(t,e)}return null};function jt(t,e){return new wt(t,e)}function kt(t,e){return jt(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */h.registerSaveRouter(At),h.registerLoadRouter(At);class Ct{constructor(t){this.modelArtifacts=t}async load(){return this.modelArtifacts}}class Et{constructor(t){this.saveHandler=t}async save(t){return this.saveHandler(t)}}function St(t,e,n,r){if(1===arguments.length){const e=null!=t.modelTopology||null!=t.weightSpecs;return e?new Ct(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ct({modelTopology:t}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ct({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r})}function Dt(t){return new Et(t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ft=n("a3f7"),Nt=n("487b"),Tt=n("e22c"),Mt=n("54ef"),It=n("c912");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Rt(t,e,n){const r=Object(Ft["a"])(t,"labels","confusionMatrix"),i=Object(Ft["a"])(e,"predictions","confusionMatrix");S["assert"](null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got "+n),S["assert"](1===r.rank,()=>"Expected the rank of labels to be 1, but got "+r.rank),S["assert"](1===i.rank,()=>"Expected the rank of predictions to be 1, but got "+i.rank),S["assert"](r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),S["assert"](n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+n);const a=Object(Tt["a"])(Object(tt["a"])(r,"int32"),n),o=Object(Tt["a"])(Object(tt["a"])(i,"int32"),n),s=Object(It["a"])(a);return Object(tt["a"])(Object(Nt["a"])(s,o),"int32")}const $t=Object(Mt["b"])({confusionMatrix_:Rt});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Bt=n("c05b"),zt=n("73b8"),Lt=n("05bb");
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
let Pt;function Ut(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,a=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement)i=!0;else if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement)a=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);o=!0}if(i){const e=2;if(i&&t.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}const s=Object(zt["c"])(Bt["eb"],l["a"].backendName);if(null!=s){const n={pixels:t},r={numChannels:e};return l["a"].runKernel(Bt["eb"],n,r)}const[u,c]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let f,d;if(o?f=t.getContext("2d").getImageData(0,0,u,c).data:r||n?f=t.data:(a||i)&&(null==Pt&&(Pt=document.createElement("canvas").getContext("2d")),Pt.canvas.width=u,Pt.canvas.height=c,Pt.drawImage(t,0,0,u,c),f=Pt.getImageData(0,0,u,c).data),4===e)d=new Int32Array(f);else{const t=u*c;d=new Int32Array(t*e);for(let n=0;n<t;n++)for(let t=0;t<e;++t)d[n*e+t]=f[4*n+t]}const h=[c,u,e];return Object(Lt["a"])(d,h,"int32")}async function Wt(t,e){let n=Object(Ft["a"])(t,"img","toPixels");if(!(t instanceof rt["a"])){const t=n;n=Object(tt["a"])(t,"int32"),t.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,i]=n.shape.slice(0,2),a=2===n.rank?1:n.shape[2];if(a>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);const o=await n.data(),s="float32"===n.dtype?255:1,u=new Uint8ClampedArray(i*r*4);for(let c=0;c<r*i;++c){const t=[0,0,0,255];for(let r=0;r<a;r++){const e=o[c*a+r];if("float32"===n.dtype){if(e<0||e>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${e}.`)}else if("int32"===n.dtype&&(e<0||e>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${e}.`);1===a?(t[0]=e*s,t[1]=e*s,t[2]=e*s):t[r]=e*s}const e=4*c;u[e+0]=Math.round(t[0]),u[e+1]=Math.round(t[1]),u[e+2]=Math.round(t[2]),u[e+3]=Math.round(t[3])}if(null!=e){e.width=i,e.height=r;const t=e.getContext("2d"),n=new ImageData(u,i,r);t.putImageData(n,0,0)}return n!==t&&n.dispose(),u}const qt=Object(Mt["b"])({fromPixels_:Ut});function Vt(t,e){if(t.rank<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==e.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[e.rank-1]>t.rank)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[e.rank-1]} vs. ${t.rank}`);if(0===t.size)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const n=e.shape,r=n[n.length-1];let i=1;for(let c=0;c<n.length-1;++c)i*=n[c];const a=t.shape,o=n.slice();o.pop();let s=1;for(let c=r;c<t.rank;++c)s*=a[c],o.push(a[c]);const u=[...Object(S["computeStrides"])(t.shape).map(t=>t/s),1].slice(0,r);return[o,i,s,u]}var Gt=n("a34f"),Ht=n("5ebd");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class Xt{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class Yt{constructor(){this.classNameMap={}}static getMap(){return null==Yt.instance&&(Yt.instance=new Yt),Yt.instance}static register(t){Yt.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function Kt(t){Object(S["assert"])(null!=t.className,()=>"Class being registered does not have the static className property defined."),Object(S["assert"])("string"===typeof t.className,()=>"className is required to be a string, but got type "+typeof t.className),Object(S["assert"])(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Yt.register(t)}var Jt=n("76c2"),Zt=n("d565");
/** @license See the LICENSE file. */
const Qt="2.6.0";var te=n("c04e"),ee=n("9117"),ne=n("c77c"),re=n("a5aa"),ie=n("163a"),ae=n("93b2"),oe=n("a09b"),se=n("538e"),ue=n("015f");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ce extends Xt{minimize(t,e=!1,n){const{value:r,grads:i}=this.computeGradients(t,n);if(null!=n){const t=n.map(t=>({name:t.name,tensor:i[t.name]}));this.applyGradients(t)}else this.applyGradients(i);return Object(te["d"])(i),e?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return Object(se["f"])(t,e)}dispose(){null!=this.iterations_&&Object(te["d"])(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Object(ue["a"])(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(ce,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients});
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class le extends ce{constructor(t,e,n=null){super(),this.learningRate=t,this.rho=e,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=l["a"].backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=l["a"].registeredVariables[e],i=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:e+"/accum_grad",variable:Object(te["t"])(()=>Object(oe["a"])(r).variable(i))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:e+"/accum_var",variable:Object(te["t"])(()=>Object(oe["a"])(r).variable(i))});const a=Array.isArray(t)?t[n].tensor:t[e];if(null==a)return;const o=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;Object(te["t"])(()=>{const t=Object(ee["a"])(Object(re["a"])(o,this.rho),Object(re["a"])(Object(ae["a"])(a),1-this.rho)),e=Object(re["a"])(Object(ne["a"])(Object(ie["a"])(Object(ee["a"])(s,this.epsilon)),Object(ie["a"])(Object(ee["a"])(o,this.epsilon))),a),n=Object(ee["a"])(Object(re["a"])(s,this.rho),Object(re["a"])(Object(ae["a"])(e),1-this.rho));o.assign(t),s.assign(n);const i=Object(ee["a"])(Object(re["a"])(e,-this.learningRate),r);r.assign(i)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Object(te["d"])(this.accumulatedGrads.map(t=>t.variable)),Object(te["d"])(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=t.length/2,n=!1;this.accumulatedGrads=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedUpdates=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e["learningRate"],e["rho"],e["epsilon"])}}le.className="Adadelta",Kt(le);var fe=n("46b8");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class de extends ce{constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=l["a"].registeredVariables[e];if(null==this.accumulatedGrads[n]){const t=!1;this.accumulatedGrads[n]={originalName:e+"/accumulator",variable:Object(te["t"])(()=>Object(fe["a"])(r.shape,this.initialAccumulatorValue).variable(t))}}const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const a=this.accumulatedGrads[n].variable;Object(te["t"])(()=>{const t=Object(ee["a"])(a,Object(ae["a"])(i));a.assign(t);const e=Object(ee["a"])(Object(re["a"])(Object(ne["a"])(i,Object(ie["a"])(Object(ee["a"])(t,l["a"].backend.epsilon()))),-this.learningRate),r);r.assign(e)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Object(te["d"])(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulatedGrads=t.map(t=>({originalName:t.name,variable:t.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e["learningRate"],e["initialAccumulatorValue"])}}de.className="Adagrad",Kt(de);var he=n("c9f1"),pe=n("a009");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class me extends ce{constructor(t,e,n,r=null){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Object(te["t"])(()=>{this.accBeta1=Object(ue["a"])(e).variable(),this.accBeta2=Object(ue["a"])(n).variable()}),null==r&&(this.epsilon=l["a"].backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);Object(te["t"])(()=>{const n=Object(pe["a"])(1,this.accBeta1),r=Object(pe["a"])(1,this.accBeta2);e.forEach((e,i)=>{const a=l["a"].registeredVariables[e],o=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:e+"/m",variable:Object(te["t"])(()=>Object(oe["a"])(a).variable(o))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:e+"/v",variable:Object(te["t"])(()=>Object(oe["a"])(a).variable(o))});const s=Array.isArray(t)?t[i].tensor:t[e];if(null==s)return;const u=this.accumulatedFirstMoment[i].variable,c=this.accumulatedSecondMoment[i].variable,f=Object(ee["a"])(Object(re["a"])(u,this.beta1),Object(re["a"])(s,1-this.beta1)),d=Object(ee["a"])(Object(re["a"])(c,this.beta2),Object(re["a"])(Object(ae["a"])(s),1-this.beta2)),h=Object(ne["a"])(f,n),p=Object(ne["a"])(d,r);u.assign(f),c.assign(d);const m=Object(ee["a"])(Object(re["a"])(Object(ne["a"])(h,Object(ee["a"])(Object(ie["a"])(p),this.epsilon)),-this.learningRate),a);a.assign(m)}),this.accBeta1.assign(Object(re["a"])(this.accBeta1,this.beta1)),this.accBeta2.assign(Object(re["a"])(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Object(te["d"])(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedSecondMoment&&Object(te["d"])(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),Object(te["t"])(()=>{this.accBeta1.assign(Object(he["a"])(this.beta1,this.iterations_+1)),this.accBeta2.assign(Object(he["a"])(this.beta2,this.iterations_+1))});const e=t.length/2,n=!1;this.accumulatedFirstMoment=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedSecondMoment=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e["learningRate"],e["beta1"],e["beta2"],e["epsilon"])}}me.className="Adam",Kt(me);var ge=n("8ae0"),be=n("09f4");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ye extends ce{constructor(t,e,n,r=null,i=0){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Object(te["t"])(()=>{this.iteration=Object(ue["a"])(0).variable(),this.accBeta1=Object(ue["a"])(e).variable()}),null==r&&(this.epsilon=l["a"].backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);Object(te["t"])(()=>{const n=Object(pe["a"])(1,this.accBeta1),r=Object(ne["a"])(-this.learningRate,Object(ee["a"])(Object(re["a"])(this.iteration,this.decay),1));e.forEach((e,i)=>{const a=l["a"].registeredVariables[e],o=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:e+"/m",variable:Object(oe["a"])(a).variable(o)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:e+"/v",variable:Object(oe["a"])(a).variable(o)});const s=Array.isArray(t)?t[i].tensor:t[e];if(null==s)return;const u=this.accumulatedFirstMoment[i].variable,c=this.accumulatedWeightedInfNorm[i].variable,f=Object(ee["a"])(Object(re["a"])(u,this.beta1),Object(re["a"])(s,1-this.beta1)),d=Object(re["a"])(c,this.beta2),h=Object(ge["a"])(s),p=Object(be["a"])(d,h);u.assign(f),c.assign(p);const m=Object(ee["a"])(Object(re["a"])(Object(ne["a"])(r,n),Object(ne["a"])(f,Object(ee["a"])(p,this.epsilon))),a);a.assign(m)}),this.iteration.assign(Object(ee["a"])(this.iteration,1)),this.accBeta1.assign(Object(re["a"])(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Object(te["d"])(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedWeightedInfNorm&&Object(te["d"])(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e["learningRate"],e["beta1"],e["beta2"],e["epsilon"],e["decay"])}}ye.className="Adamax",Kt(ye);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class ve extends ce{constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=Array.isArray(t)?t[n].tensor:t[e];if(null==r)return;const i=l["a"].registeredVariables[e];Object(te["t"])(()=>{const t=Object(ee["a"])(Object(re["a"])(this.c,r),i);i.assign(t)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=Object(te["l"])(Object(ue["a"])(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),0!==t.length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e["learningRate"])}}ve.className="SGD",Kt(ve);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class xe extends ve{constructor(t,e,n=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=n,this.accumulations=[],this.m=Object(ue["a"])(this.momentum)}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=l["a"].registeredVariables[e];if(null==this.accumulations[n]){const t=!1;this.accumulations[n]={originalName:e+"/momentum",variable:Object(te["t"])(()=>Object(oe["a"])(r).variable(t))}}const i=this.accumulations[n].variable,a=Array.isArray(t)?t[n].tensor:t[e];null!=a&&Object(te["t"])(()=>{let t;const e=Object(ee["a"])(Object(re["a"])(this.m,i),a);t=this.useNesterov?Object(ee["a"])(Object(re["a"])(this.c,Object(ee["a"])(a,Object(re["a"])(e,this.m))),r):Object(ee["a"])(Object(re["a"])(this.c,e),r),i.assign(e),r.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Object(te["d"])(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulations=t.map(t=>({originalName:t.name,variable:t.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e["learningRate"],e["momentum"],e["useNesterov"])}}xe.className="Momentum",Kt(xe);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class we extends ce{constructor(t,e=.9,n=0,r=null,i=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=l["a"].backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);e.forEach((e,n)=>{const r=l["a"].registeredVariables[e],i=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:e+"/rms",variable:Object(te["t"])(()=>Object(oe["a"])(r).variable(i))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:e+"/momentum",variable:Object(te["t"])(()=>Object(oe["a"])(r).variable(i))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:e+"/mg",variable:Object(te["t"])(()=>Object(oe["a"])(r).variable(i))});const a=Array.isArray(t)?t[n].tensor:t[e];if(null==a)return;const o=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;Object(te["t"])(()=>{const t=Object(ee["a"])(Object(re["a"])(o,this.decay),Object(re["a"])(Object(ae["a"])(a),1-this.decay));if(this.centered){const e=this.accumulatedMeanGrads[n].variable,i=Object(ee["a"])(Object(re["a"])(e,this.decay),Object(re["a"])(a,1-this.decay)),u=Object(ne["a"])(Object(re["a"])(a,this.learningRate),Object(ie["a"])(Object(pe["a"])(t,Object(ee["a"])(Object(ae["a"])(i),this.epsilon)))),c=Object(ee["a"])(Object(re["a"])(s,this.momentum),u);o.assign(t),e.assign(i),s.assign(c);const l=Object(pe["a"])(r,c);r.assign(l)}else{const t=Object(ee["a"])(Object(re["a"])(o,this.decay),Object(re["a"])(Object(ae["a"])(a),1-this.decay)),e=Object(ee["a"])(Object(re["a"])(s,this.momentum),Object(ne["a"])(Object(re["a"])(a,this.learningRate),Object(ie["a"])(Object(ee["a"])(t,this.epsilon))));o.assign(t),s.assign(e);const n=Object(pe["a"])(r,e);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Object(te["d"])(this.accumulatedMeanSquares.map(t=>t.variable)),null!=this.accumulatedMeanGrads&&this.centered&&Object(te["d"])(this.accumulatedMeanGrads.map(t=>t.variable)),null!=this.accumulatedMoments&&Object(te["d"])(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=this.centered?t.length/3:t.length/2,n=!1;this.accumulatedMeanSquares=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.accumulatedMoments=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(t=>({originalName:t.name,variable:t.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e["learningRate"],e["decay"],e["momentum"],e["epsilon"],e["centered"])}}we.className="RMSProp",Kt(we);var Oe=n("23bf"),_e=n("132b"),Ae=n("57e0");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class je{static sgd(t){return new ve(t)}static momentum(t,e,n=!1){return new xe(t,e,n)}static rmsprop(t,e=.9,n=0,r=null,i=!1){return new we(t,e,n,r,i)}static adam(t=.001,e=.9,n=.999,r=null){return new me(t,e,n,r)}static adadelta(t=.001,e=.95,n=null){return new le(t,e,n)}static adamax(t=.002,e=.9,n=.999,r=null,i=0){return new ye(t,e,n,r,i)}static adagrad(t,e=.1){return new de(t,e)}}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ke={sgd:je.sgd,momentum:je.momentum,adadelta:je.adadelta,adagrad:je.adagrad,rmsprop:je.rmsprop,adamax:je.adamax,adam:je.adam},Ce=(()=>"undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:t=>t())();
/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ee(){return new Promise(t=>Ce(()=>t()))}var Se=n("960f"),De=n("5a2c"),Fe=n("36e5"),Ne=n("526f"),Te=n("f3b9"),Me=n("b818"),Ie=n("4749"),Re=n("f63b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function $e(t,e,n){const r=n*("number"===typeof t?t:t[0]),i=e*("number"===typeof t?t:t[1]);return[r,i]}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Be(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const n=e.length;for(let r=0;r<n;++r)i=i.concat([t[r+1]/e[r],e[r]]);i=i.concat(t.slice(n+1))}return i}function ze(t,e,n=!0){const r=[];if(n){r.push(e);for(let n=e+1;n<t;++n)n<=2*e?(r.push(n),r.push(n-(e+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<t;++r)r>=2*e+1||r%2===1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function Le(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function Pe(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function Ue(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const We=1.7580993408473768,qe=1.0507009873554805,Ve=.3275911,Ge=.254829592,He=-.284496736,Xe=1.421413741,Ye=-1.453152027,Ke=1.061405429;
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Je(...t){Object(f["c"])().getBool("IS_TEST")||console.warn(...t)}function Ze(...t){Object(f["c"])().getBool("IS_TEST")||console.log(...t)}
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qe(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function tn(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function en(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function nn(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function rn(t,e){const n=t[2*e],r=t[2*e+1];return{real:n,imag:r}}function an(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function on(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const a=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function sn(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}var un=n("415b"),cn=n("d3ee");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ln(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();const e=Object(De["a"])(t.shape),r=Object(tt["a"])(t,"float32"),i=n.complex(r,e);return e.dispose(),r.dispose(),i}if(!Object(S["hasEncodingLoss"])(t.dtype,e))return l["a"].makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){const r=n.real(t),i=Object(tt["a"])(r,e);return r.dispose(),i}if("int32"===e)return n.int(t);if("bool"===e){const e=Object(ue["a"])(0,t.dtype),r=n.notEqual(t,e);return e.dispose(),r}throw new Error(`Error in Cast: failed to cast ${t.dtype} to ${e}`)}function fn(t,e){return l["a"].makeTensorFromDataId(t.dataId,e,t.dtype)}function dn(t,e,n){const r=(e-t)/(n-1),i=Object(S["makeZerosTypedArray"])(n,"float32");i[0]=t;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return Object(Se["a"])(i,"float32")}var hn=n("7ed6"),pn=n("8389"),mn=n("6d3c");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function gn(t,e,n){const r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(e=>{const a=[...i];a[n]=e;const o=Object(mn["a"])(t,r,a);return r[n]+=e,o})}
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bn(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Object(Q["a"])(n,t.dtype);for(let i=0;i<r.values.length;++i){const e=r.indexToLoc(i),n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=e[r]%t.shape[r];const a=t.locToIndex(n);r.values[i]=t.values[a]}return r.toTensor()}var yn=n("357d");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vn(t,e,n,r,i){const a=e[e.length-1],[o,s]=[t.length/a,a],u=Object(S["getTypedArrayFromDType"])(n,o*r),c=Object(S["getTypedArrayFromDType"])("int32",o*r);for(let f=0;f<o;f++){const e=f*s,n=t.subarray(e,e+s),i=[];for(let t=0;t<n.length;t++)i.push({value:n[t],index:t});i.sort((t,e)=>e.value-t.value);const a=f*r,o=u.subarray(a,a+r),l=c.subarray(a,a+r);for(let t=0;t<r;t++)o[t]=i[t].value,l[t]=i[t].index}const l=e.slice();return l[l.length-1]=r,[Object(yn["a"])(u,l,n),Object(yn["a"])(c,l,"int32")]}var xn=n("0280"),wn=n("8b87"),On=n("2fb1");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const _n={kernelName:Bt["a"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(t,Object(On["a"])(Object(tt["a"])(n,"float32"),-1))}}};var An=n("3bb7");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jn={kernelName:Bt["b"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Object(ae["a"])(Object(tt["a"])(n,"float32")),r=Object(ie["a"])(Object(pe["a"])(Object(ue["a"])(1),e));return Object(An["a"])(Object(ne["a"])(t,r))}}}},kn={kernelName:Bt["c"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Object(ie["a"])(Object(pe["a"])(Object(ae["a"])(Object(tt["a"])(n,"float32")),1));return Object(ne["a"])(t,e)}}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Cn=n("35c9"),En=n("e053");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Sn={kernelName:Bt["d"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ne["a"](n.shape,r.shape),a=()=>{let e=t;const r=Ne["c"](n.shape,i);return r.length>0&&(e=Object(En["a"])(e,r)),Object(Cn["a"])(e,n.shape)},o=()=>{let e=t;const n=Ne["c"](r.shape,i);return n.length>0&&(e=Object(En["a"])(e,n)),Object(Cn["a"])(e,r.shape)};return{a:a,b:o}}},Dn={kernelName:Bt["e"],saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((e,r)=>{n[r]=()=>t.clone()}),n}},Fn={kernelName:Bt["h"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(oe["a"])(n)}}},Nn={kernelName:Bt["i"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(oe["a"])(n)}}},Tn={kernelName:Bt["j"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(ne["a"])(t,Object(ie["a"])(Object(pe["a"])(Object(ue["a"])(1),Object(ae["a"])(Object(tt["a"])(n,"float32")))))}}},Mn={kernelName:Bt["k"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Object(ie["a"])(Object(ee["a"])(Object(ue["a"])(1),Object(ae["a"])(Object(tt["a"])(n,"float32"))));return Object(ne["a"])(t,e)}}}},In={kernelName:Bt["m"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(Ne["a"])(n.shape,r.shape),a=()=>{const e=Object(ee["a"])(Object(ae["a"])(n),Object(ae["a"])(r));let a=Object(re["a"])(t,Object(ne["a"])(r,e));const o=Object(Ne["c"])(n.shape,i);return o.length>0&&(a=Object(En["a"])(a,o)),Object(Cn["a"])(a,n.shape)},o=()=>{const e=Object(ee["a"])(Object(ae["a"])(n),Object(ae["a"])(r));let a=Object(An["a"])(Object(re["a"])(t,Object(ne["a"])(n,e)));const o=Object(Ne["c"])(r.shape,i);return o.length>0&&(a=Object(En["a"])(a,o)),Object(Cn["a"])(a,r.shape)};return{a:a,b:o}}},Rn={kernelName:Bt["l"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(ne["a"])(t,Object(ee["a"])(Object(ae["a"])(Object(tt["a"])(n,"float32")),1))}}},$n={kernelName:Bt["n"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(ne["a"])(t,Object(pe["a"])(Object(ue["a"])(1),Object(ae["a"])(Object(tt["a"])(n,"float32"))))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Bn(t,e,n,r,i=[1,1,1],a,o){const s=Object(Ft["a"])(t,"dy","avgPool3dBackprop"),u=Object(Ft["a"])(e,"input","avgPool3dBackprop");let c=s,f=u,d=!1;4===u.rank&&(d=!0,c=Object(Cn["a"])(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),f=Object(Cn["a"])(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),S["assert"](5===c.rank,()=>"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."),S["assert"](5===f.rank,()=>"Error in avgPool3dBackprop: input must be rank 5 but got rank "+f.rank+"."),S["assert"](Me["h"](r,i),()=>`Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`),null!=o&&S["assert"](S["isInt"](a),()=>`Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode ${o} but got pad ${a}.`);const h=t=>{const e=Me["f"](f.shape,n,r,i,a,o);return t.avgPool3dBackprop(c,f,e)},p={dy:c,input:f},m={filterSize:n,strides:r,dilations:i,pad:a,dimRoundingMode:o},g=l["a"].runKernelFunc(h,p,null,Bt["q"],m);return d?Object(Cn["a"])(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const zn=Object(Mt["b"])({avgPool3dBackprop_:Bn}),Ln={kernelName:Bt["p"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,dilations:o,pad:s,dimRoundingMode:u}=n,c=null==o?[1,1,1]:o;return{x:()=>zn(t,r,i,a,c,s,u)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Pn(t,e,n,r,i){const a=Object(Ft["a"])(t,"dy","avgPoolBackprop"),o=Object(Ft["a"])(e,"input","avgPoolBackprop");S["assert"](o.rank===a.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${a.rank})`);let s=o,u=a,c=!1;3===o.rank&&(c=!0,s=Object(Cn["a"])(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=Object(Cn["a"])(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S["assert"](4===u.rank,()=>"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."),S["assert"](4===s.rank,()=>"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+".");const f=t=>{const e=Me["e"](s.shape,n,r,1,i);return t.avgPoolBackprop(u,s,e)},d={dy:u,input:s},h={filterSize:n,strides:r,pad:i},p=l["a"].runKernelFunc(f,d,null,Bt["r"],h);return c?Object(Cn["a"])(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Un=Object(Mt["b"])({avgPoolBackprop_:Pn}),Wn={kernelName:Bt["o"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:o}=n;return{x:()=>Un(t,r,i,a,o)}}},qn={kernelName:Bt["s"],inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:a,transposeB:o}=n;return a||o?!a&&o?{a:()=>Object(Nt["a"])(t,i,!1,!1),b:()=>Object(Nt["a"])(t,r,!0,!1)}:a&&!o?{a:()=>Object(Nt["a"])(i,t,!1,!0),b:()=>Object(Nt["a"])(r,t,!1,!1)}:{a:()=>Object(Nt["a"])(i,t,!0,!0),b:()=>Object(Nt["a"])(t,r,!0,!0)}:{a:()=>Object(Nt["a"])(t,i,!1,!0),b:()=>Object(Nt["a"])(r,t,!0,!1)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Vn=n("7580");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gn={kernelName:Bt["t"],gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>Object(Vn["a"])(t,r,i)}}},Hn={kernelName:Bt["u"],gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,a=r.shape,o=Array.from(a);for(let u=i.length-1;u>=0;u--)if(i[u]===a[u])o[u]=1;else if(1!==i[u])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);const s=[];for(let u=0;u<o.length;u++)o[u]>1&&s.push(u);return{x:()=>Object(En["a"])(t,s,!0)}}},Xn={kernelName:Bt["v"],gradFunc:t=>({x:()=>t.clone()})},Yn={kernelName:Bt["w"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Kn=n("bb2d"),Jn=n("b21c"),Zn=n("e333"),Qn=n("6791");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const tr={kernelName:Bt["x"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>Object(Qn["a"])(Object(Zn["a"])(Object(Kn["a"])(r,i),Object(Jn["a"])(r,a)),t,Object(oe["a"])(t))}}};var er=n("45bb");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nr={kernelName:Bt["z"],saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(t=>t.shape),{axis:i}=n,a=Object(S["parseAxisParam"])(i,e[0].shape)[0],o=r.map(t=>t[a]),s=Object(er["a"])(t,o,a);return s.map(t=>()=>t)}};var rr=n("0f6f"),ir=n("73d3");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const ar={kernelName:Bt["A"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:a,strides:o,pad:s,dataFormat:u}=n;return S["assert"](Me["i"](a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>Object(ir["a"])(r.shape,t,i,o,s,u),filter:()=>Object(rr["a"])(r,t,i.shape,o,s,u)}}};var or=n("dd7e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sr={kernelName:Bt["C"],inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:a,pad:o,dataFormat:s,dimRoundingMode:u}=n;return{dy:()=>Object(or["a"])(t,i,a,o,s,1,u),filter:()=>Object(rr["a"])(t,r,i.shape,a,o,s,u)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ur(t,e,n,r,i){let a=t;4===t.rank&&(a=Object(Cn["a"])(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;4===o.rank&&(o=Object(Cn["a"])(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),S["assert"](5===a.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."),S["assert"](5===o.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."),S["assert"](5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."),S["assert"](a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),S["assert"](o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const s=t=>{const e=1,s=Me["b"](a.shape,n,r,e,i);return t.conv3dDerFilter(a,o,s)},u={x:a,y:o},c={strides:r,pad:i};return l["a"].runKernelFunc(s,u,null,Bt["E"],c)}const cr=Object(Mt["b"])({conv3DBackpropFilter_:ur});var lr=n("99d0");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fr={kernelName:Bt["D"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a}=n;S["assert"](Object(Me["i"])(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,s]=e;return{x:()=>Object(lr["a"])(o.shape,t,s,i,a),filter:()=>cr(o,t,s.shape,i,a)}}};var dr=n("6932");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hr={kernelName:Bt["G"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(Object(An["a"])(Object(dr["a"])(Object(tt["a"])(n,"float32"))),t)}}};var pr=n("5dc4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mr={kernelName:Bt["H"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(Object(pr["a"])(Object(tt["a"])(n,"float32")),t)}}};var gr=n("1e68");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const br={kernelName:Bt["J"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:a,reverse:o}=n;return{x:()=>{const e=Object(Fe["f"])([i],r.rank);let n=Object(gr["a"])(t,i,a,!o);return null!=e&&(n=Object(It["a"])(n,e)),n}}}};var yr=n("6926"),vr=n("8cb0");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const xr={kernelName:Bt["L"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a,dimRoundingMode:o}=n,s=null==r?[1,1]:r;S["assert"](Me["i"](s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[u,c]=e;S["assert"](4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),S["assert"](4===c.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),S["assert"](u.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),S["assert"](Me["h"](i,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`),null!=o&&S["assert"](S["isInt"](a),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${o} but got pad ${a}.`);const l=Me["a"](u.shape,c.shape,i,s,a,o,!0);return{x:()=>Object(vr["a"])(u.shape,t,c,l),filter:()=>Object(yr["a"])(u,t,c.shape,l)}}},wr={kernelName:Bt["P"],inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,a={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>l["a"].runKernel(Bt["R"],a,n),filter:()=>l["a"].runKernel(Bt["Q"],o,n)}}},Or={kernelName:Bt["S"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ne["a"](n.shape,r.shape),a=()=>{const e=Object(ne["a"])(t,Object(tt["a"])(r,"float32")),a=Ne["c"](n.shape,i);return a.length>0?Object(Cn["a"])(Object(En["a"])(e,a),n.shape):e},o=()=>{let e=Object(re["a"])(t,Object(tt["a"])(n,"float32"));const a=Ne["c"](r.shape,i);a.length>0&&(e=Object(Cn["a"])(Object(En["a"])(e,a),r.shape));const o=Object(ae["a"])(r);return Object(An["a"])(Object(ne["a"])(e,Object(tt["a"])(o,"float32")))};return{a:a,b:o}}},_r={kernelName:Bt["T"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r=e=>e.eluDer(t,n),i={dy:t,y:n};return{x:()=>l["a"].runKernelFunc(r,i,null,Bt["U"])}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ar=n("4f20");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jr={kernelName:Bt["W"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Object(re["a"])(Object(Ar["a"])(Object(An["a"])(Object(ae["a"])(n))),2/Math.sqrt(Math.PI));return{x:()=>Object(re["a"])(t,r)}}},kr={kernelName:Bt["X"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(t,n)}}},Cr={kernelName:Bt["Y"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(t,Object(Ar["a"])(n))}}},Er={kernelName:Bt["cb"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})},Sr={kernelName:Bt["db"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(Ne["a"])(n.shape,r.shape),a=()=>{const e=Object(ne["a"])(t,Object(tt["a"])(r,"float32")),a=Object(Ne["c"])(n.shape,i);return a.length>0?Object(Cn["a"])(Object(En["a"])(e,a),n.shape):e},o=()=>{let e=Object(re["a"])(t,Object(tt["a"])(n,"float32"));const a=Object(Ne["c"])(r.shape,i);a.length>0&&(e=Object(Cn["a"])(Object(En["a"])(e,a),r.shape));const o=Object(ae["a"])(r);return Object(An["a"])(Object(ne["a"])(e,Object(tt["a"])(o,"float32")))};return{a:a,b:o}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Dr=n("5f2a"),Fr=n("8d71");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const Nr={kernelName:Bt["fb"],inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,a,o,s]=e,u=null==s?Object(ue["a"])(1):s,c=Object(Ne["c"])(a.shape,i.shape),l=[];if(1===a.rank){for(let t=0;t<i.shape.length-1;++t)l.push(i.shape[t]);l.push(1)}const f=Object(pe["a"])(i,a),d=Object(re["a"])(t,u),h=Object(Dr["a"])(Object(ee["a"])(o,Object(ue["a"])(r))),p=Object(re["a"])(Object(re["a"])(Object(re["a"])(h,h),h),Object(ue["a"])(-.5)),m=()=>1===a.rank?Object(Cn["a"])(Object(re["a"])(Object(re["a"])(t,Object(Fr["a"])(Object(Cn["a"])(h,[1,1,1,a.shape[0]]),l)),u),i.shape):Object(Cn["a"])(Object(re["a"])(Object(re["a"])(t,h),u),i.shape),g=()=>{let t=Object(re["a"])(Object(re["a"])(h,Object(ue["a"])(-1)),d);return 1===a.rank&&(t=Object(En["a"])(t,c)),Object(Cn["a"])(t,a.shape)},b=()=>{let t=Object(re["a"])(Object(re["a"])(p,f),d);return 1===a.rank&&(t=Object(En["a"])(t,c)),Object(Cn["a"])(t,a.shape)},y=()=>{const e=Object(re["a"])(f,h);let n=Object(re["a"])(t,e);return 1===a.rank&&(n=Object(En["a"])(n,c)),Object(Cn["a"])(n,a.shape)},v=()=>{let e=t;return 1===a.rank&&(e=Object(En["a"])(e,c)),Object(Cn["a"])(e,a.shape)};return{x:m,mean:g,variance:b,scale:y,offset:v}}};var Tr=n("53f2");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mr={kernelName:Bt["jb"],inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:a}=n,o=Object(S["parseAxisParam"])(a,r.shape)[0],s=()=>{const e=r.shape,n=i.size,s=e.slice(0,o),u=s.length,c=e.slice(a,e.length).slice(1),l=c.length,f=Ir(0,u),d=Ir(u+1,u+1+l),h=Rr([s,[n],c]),p=Object(Cn["a"])(t,h),m=Object(Cn["a"])(i,[n]),g=Rr([[u],f,d]),b=Object(It["a"])(p,g);let y=Object(Tr["a"])(b,m,r.shape[o]);const v=Object(Fe["h"])(g);return y=Object(It["a"])(y,v),y};return{x:s,indices:()=>i}}};function Ir(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function Rr(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $r={kernelName:Bt["lb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Object(oe["a"])(n),b:()=>Object(oe["a"])(r)}}},Br={kernelName:Bt["nb"],gradFunc:t=>({x:()=>Object(tt["a"])(t,"float32")})},zr={kernelName:Bt["pb"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})},Lr={kernelName:Bt["qb"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})},Pr={kernelName:Bt["rb"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})},Ur={kernelName:Bt["yb"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(ne["a"])(t,Object(ee["a"])(n,1))}}},Wr={kernelName:Bt["xb"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(ne["a"])(t,Object(tt["a"])(n,"float32"))}}},qr={kernelName:Bt["zb"],inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const e=!0,n=Object(Ar["a"])(r);return Object(pe["a"])(t,Object(re["a"])(Object(En["a"])(t,i,e),n))}}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function Vr(t,e,n,r=5,i=1,a=1,o=.5){const s=s=>s.LRNGrad(n,t,e,r,i,a,o),u={x:t,y:e,dy:n},c={depthRadius:r,bias:i,alpha:a,beta:o};return l["a"].runKernelFunc(s,u,null,Bt["tb"],c)}const Gr=Object(Mt["b"])({localResponseNormalizationBackprop_:Vr}),Hr={kernelName:Bt["sb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:a,bias:o,alpha:s,beta:u}=n;return{x:()=>Gr(r,i,t,a,o,s,u)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Xr=n("b9b9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yr(t,e,n,r,i){return e.rank<n.rank&&(e=Object(Cn["a"])(e,Fe["e"](e.shape,r))),t.rank<n.rank&&(t=Object(Cn["a"])(t,Fe["e"](t.shape,r))),{x:()=>{const r=Object(re["a"])(t,Object(tt["a"])(Object(Xr["a"])(n,e),t.dtype));return null==i?r:Object(It["a"])(r,i)}}}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kr={kernelName:Bt["Db"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,[a,o]=e,s=S["parseAxisParam"](i,a.shape),u=Fe["f"](s,a.rank),c=Yr(t,o,a,s,u);return{x:()=>{let t=c["x"]();return null!=u&&(t=Object(It["a"])(t)),t}}}};var Jr=n("e1fd");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zr={kernelName:Bt["Jb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=()=>Object(re["a"])(t,Object(tt["a"])(Object(Kn["a"])(n,r),"float32")),a=()=>Object(re["a"])(t,Object(tt["a"])(Object(Jr["a"])(n,r),"float32"));return{a:i,b:a}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qr(t,e,n,r,i,a=[1,1,1],o,s){const u=Object(Ft["a"])(t,"dy","maxPool3dBackprop"),c=Object(Ft["a"])(e,"input","maxPool3dBackprop"),f=Object(Ft["a"])(n,"output","maxPool3dBackprop");let d=u,h=c,p=f,m=!1;4===c.rank&&(m=!0,d=Object(Cn["a"])(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=Object(Cn["a"])(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),p=Object(Cn["a"])(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),S["assert"](5===d.rank,()=>"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+d.rank+"."),S["assert"](5===h.rank,()=>"Error in maxPool3dBackprop: input must be rank 5 but got rank "+h.rank+"."),S["assert"](5===p.rank,()=>"Error in maxPool3dBackprop: output must be rank 5 but got rank "+p.rank+"."),S["assert"](Me["h"](i,a),()=>`Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`),null!=s&&S["assert"](S["isInt"](o),()=>`Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode ${s} but got pad ${o}.`);const g=t=>{const e=Me["f"](h.shape,r,i,a,o,s);return t.maxPool3dBackprop(d,h,p,e)},b={dy:d,input:h,output:p},y={filterSize:r,strides:i,dilations:a,pad:o,dimRoundingMode:s},v=l["a"].runKernelFunc(g,b,null,Bt["Gb"],y);return m?Object(Cn["a"])(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const ti=Object(Mt["b"])({maxPool3dBackprop_:Qr}),ei={kernelName:Bt["Fb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,dilations:s,pad:u,dimRoundingMode:c}=n,l=null==s?[1,1,1]:s;return{x:()=>ti(t,r,i,a,o,l,u,c)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function ni(t,e,n,r,i,a,o){const s=Object(Ft["a"])(t,"dy","maxPoolBackprop"),u=Object(Ft["a"])(e,"input","maxPoolBackprop"),c=Object(Ft["a"])(n,"output","maxPoolBackprop");S["assert"](u.rank===s.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${s.rank})`),S["assert"](4===s.rank,()=>"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."),S["assert"](4===u.rank,()=>"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+"."),null!=o&&S["assert"](S["isInt"](a),()=>`Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode ${o} but got pad ${a}.`);const f=t=>{const e=Me["e"](u.shape,r,i,1,a,o);return t.maxPoolBackprop(s,u,c,e)},d={dy:s,input:u,output:c},h={filterSize:r,strides:i,pad:a,dimRoundingMode:o};return l["a"].runKernelFunc(f,d,null,Bt["Hb"],h)}const ri=Object(Mt["b"])({maxPoolBackprop_:ni}),ii={kernelName:Bt["Eb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,pad:s}=n;return{x:()=>ri(t,r,i,a,o,s)}}},ai={kernelName:Bt["Lb"],inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[a,o]=e,s=S["parseAxisParam"](i,a.shape),u=Fe["f"](s,a.rank),c=Yr(t,o,a,s,u);return{x:()=>{let t=c["x"]();return null!=u&&(t=Object(It["a"])(t)),t}}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var oi=n("cef0");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const si={kernelName:Bt["Mb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=()=>Object(re["a"])(t,Object(tt["a"])(Object(Jn["a"])(n,r),"float32")),a=()=>Object(re["a"])(t,Object(tt["a"])(Object(oi["a"])(n,r),"float32"));return{a:i,b:a}}};var ui=n("d369");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ci={kernelName:Bt["Nb"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(Ne["a"])(n.shape,r.shape),a=()=>{const e=Object(Ne["c"])(n.shape,i);return e.length>0?Object(Cn["a"])(Object(En["a"])(t,e),n.shape):t},o=()=>{const e=Object(re["a"])(t,Object(An["a"])(Object(ui["a"])(Object(ne["a"])(n,r)))),a=Object(Ne["c"])(r.shape,i);return a.length>0?Object(Cn["a"])(Object(En["a"])(e,a),r.shape):e};return{a:a,b:o}}},li={kernelName:Bt["Ob"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(Ne["a"])(n.shape,r.shape),a=()=>{const e=Object(re["a"])(t,Object(tt["a"])(r,"float32")),a=Object(Ne["c"])(n.shape,i);return a.length>0?Object(Cn["a"])(Object(En["a"])(e,a),n.shape):e},o=()=>{const e=Object(re["a"])(t,Object(tt["a"])(n,"float32")),a=Object(Ne["c"])(r.shape,i);return a.length>0?Object(Cn["a"])(Object(En["a"])(e,a),r.shape):e};return{a:a,b:o}}},fi={kernelName:Bt["Pb"],gradFunc:t=>({x:()=>Object(An["a"])(t)})},di={kernelName:Bt["Ub"],inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Object(De["a"])(n.shape,"float32")}}},hi={kernelName:Bt["Vb"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})},pi={kernelName:Bt["Wb"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(t=>t[0]);return{x:()=>Object(mn["a"])(t,a,r.shape)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var mi=n("1359");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gi={kernelName:Bt["Yb"],inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,a=n,o=r,s=Ne["a"](a.shape,o.shape),u=()=>{const e=Object(tt["a"])(o,"float32");let n=Object(re["a"])(t,Object(re["a"])(e,Object(he["a"])(a,Object(pe["a"])(e,Object(ue["a"])(1)))));const r=Ne["c"](a.shape,s);return r.length>0&&(n=Object(En["a"])(n,r)),Object(Cn["a"])(n,a.shape)},c=()=>{const e=Object(oi["a"])(a,0),n=Object(Qn["a"])(e,Object(mi["a"])(a),Object(oe["a"])(a));let r=Object(re["a"])(t,Object(re["a"])(i,n));const u=Ne["c"](o.shape,s);return u.length>0&&(r=Object(En["a"])(r,u)),Object(Cn["a"])(r,o.shape)};return{a:u,b:c}}},bi={kernelName:Bt["Zb"],inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(oi["a"])(n,0);return{x:()=>Object(Qn["a"])(i,t,Object(re["a"])(t,r)),alpha:()=>{let e=Object(Qn["a"])(i,Object(oe["a"])(t),Object(re["a"])(t,n));const a=Object(Ne["c"])(r.shape,t.shape);return a.length>0&&(e=Object(En["a"])(e,a)),Object(Cn["a"])(e,r.shape)}}}},yi={kernelName:Bt["dc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(ne["a"])(t,Object(An["a"])(Object(ae["a"])(n)))}}},vi={kernelName:Bt["fc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Object(re["a"])(Object(Jn["a"])(n,6),Object(On["a"])(n));return{x:()=>Object(re["a"])(t,Object(tt["a"])(r,"float32"))}}},xi={kernelName:Bt["ec"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(t,Object(tt["a"])(Object(On["a"])(n),"float32"))}}},wi={kernelName:Bt["gc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(Cn["a"])(t,n.shape)}}},Oi={kernelName:Bt["hc"],inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i=e=>{const{alignCorners:i}=n;return e.resizeBilinearBackprop(t,r,i)},a={images:r},o=()=>l["a"].runKernelFunc(i,a,null,Bt["ic"],n);return{images:o}}},_i={kernelName:Bt["jc"],inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i=e=>{const{alignCorners:i}=n;return e.resizeNearestNeighborBackprop(t,r,i)},a={images:r},o=()=>l["a"].runKernelFunc(i,a,null,Bt["kc"],n);return{images:o}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ai=n("d08e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ji={kernelName:Bt["lc"],gradFunc:(t,e,n)=>{const{dims:r}=n,i=Object(S["parseAxisParam"])(r,t.shape);return{x:()=>Object(Ai["a"])(t,i)}}},ki={kernelName:Bt["nc"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})},Ci={kernelName:Bt["oc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(An["a"])(Object(ne["a"])(t,Object(re["a"])(Object(he["a"])(n,1.5),2)))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ei=n("ef00");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Si={kernelName:Bt["qc"],inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Object(tt["a"])(Object(oe["a"])(n),"float32"),t:()=>Object(re["a"])(t,Object(tt["a"])(n,t.dtype)),e:()=>Object(re["a"])(t,Object(tt["a"])(Object(Ei["a"])(n),t.dtype))}}},Di={kernelName:Bt["rc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=Object(oi["a"])(n,Object(ue["a"])(0)),r=Object(ue["a"])(We),i=Object(ue["a"])(qe),a=Object(re["a"])(t,i),o=Object(re["a"])(Object(re["a"])(t,r),Object(Ar["a"])(Object(tt["a"])(n,"float32")));return Object(Qn["a"])(e,a,o)}}}},Fi={kernelName:Bt["sc"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(t,Object(re["a"])(n,Object(pe["a"])(Object(ue["a"])(1),n)))}}},Ni={kernelName:Bt["tc"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ti=n("eff7");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mi={kernelName:Bt["uc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(Object(Ti["a"])(Object(tt["a"])(n,"float32")),t)}}};var Ii=n("c1a2");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ri={kernelName:Bt["vc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(Object(Ii["a"])(Object(tt["a"])(n,"float32")),t)}}};var $i=n("0eb5");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bi={kernelName:Bt["wc"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:a}=n,o=r.shape,[s,u]=Object(Ht["parseSliceParams"])(r,i,a),c=[];for(let l=0;l<t.rank;l++)c.push([s[l],o[l]-s[l]-u[l]]);return{x:()=>Object($i["a"])(t,c)}}},zi={kernelName:Bt["xc"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,a=!0,o=Object(re["a"])(t,r);return{logits:()=>Object(pe["a"])(o,Object(re["a"])(Object(En["a"])(o,[i],a),r))}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Li=n("ffb3");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pi={kernelName:Bt["yc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(t,Object(Li["a"])(n))}}};var Ui=n("3b28");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wi={kernelName:Bt["zc"],gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>Object(Ui["a"])(t,r,i)}}};var qi=n("649e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vi={kernelName:Bt["Bc"],gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Object(qi["a"])(t,r)}}},Gi={kernelName:Bt["Cc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(ne["a"])(t,Object(re["a"])(Object(ie["a"])(Object(tt["a"])(n,"float32")),2))}}},Hi={kernelName:Bt["Dc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(t,Object(re["a"])(Object(tt["a"])(n,"float32"),2))}}},Xi={kernelName:Bt["Ec"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Object(ue["a"])(2),a=()=>Object(re["a"])(t,Object(re["a"])(i,Object(pe["a"])(n,r))),o=()=>Object(re["a"])(t,Object(re["a"])(i,Object(pe["a"])(r,n)));return{a:a,b:o}}},Yi={kernelName:Bt["Fc"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})},Ki={kernelName:Bt["Hc"],inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=Ne["a"](n.shape,r.shape),a=()=>{let e=t;const r=Ne["c"](n.shape,i);return r.length>0&&(e=Object(En["a"])(e,r)),Object(Cn["a"])(e,n.shape)},o=()=>{let e=t;const n=Ne["c"](r.shape,i);return n.length>0&&(e=Object(En["a"])(e,n)),Object(Cn["a"])(Object(An["a"])(e),r.shape)};return{a:a,b:o}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ji=n("c22a");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zi={kernelName:Bt["Ic"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:a}=n,o=Object(S["parseAxisParam"])(a,r.shape);o.forEach(t=>{i[t]=1});const s=Object(Cn["a"])(t,i),u=Object(re["a"])(s,Object(Ji["a"])(r.shape,"float32"));return{x:()=>u}}},Qi={kernelName:Bt["Jc"],inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(ne["a"])(t,Object(ae["a"])(Object(Ti["a"])(n)))}}},ta={kernelName:Bt["Kc"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Object(re["a"])(Object(pe["a"])(Object(ue["a"])(1),Object(ae["a"])(n)),t)}}},ea={kernelName:Bt["Lc"],inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n,a=()=>{let e=Object(oe["a"])(r);if(1===r.rank)for(let n=0;n<i[0];++n)e=Object(ee["a"])(e,Object(mn["a"])(t,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)e=Object(ee["a"])(e,Object(mn["a"])(t,[n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)for(let o=0;o<i[2];++o)e=Object(ee["a"])(e,Object(mn["a"])(t,[n*r.shape[0],a*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(let n=0;n<i[0];++n)for(let a=0;a<i[1];++a)for(let o=0;o<i[2];++o)for(let s=0;s<i[3];++s)e=Object(ee["a"])(e,Object(mn["a"])(t,[n*r.shape[0],a*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return e};return{x:a}}},na={kernelName:Bt["Nc"],gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,a=Fe["h"](i);return{x:()=>Object(It["a"])(t,a)}}};
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ra=n("d54d");
/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ia={kernelName:Bt["Pc"],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>Object(ra["a"])(t,i)}}};var aa=n("dae8"),oa=n("91a3");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
const sa={kernelName:Bt["Qc"],inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e,r=()=>ua(t,n);return{x:r}}};function ua(t,e){const n=Object(be["a"])(e,Object(oe["a"])(e)),r=Object(oa["a"])(t,n);let i=Object(Kn["a"])(e,Object(ue["a"])(0,"int32"));const a=r.rank-i.rank;for(let s=0;s<a;++s)i=Object(aa["a"])(i,s+1);i=Object(Zn["a"])(i,Object(Ji["a"])(r.shape,"bool"));const o=Object(oe["a"])(r);return Object(Qn["a"])(i,r,o)}
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ca={kernelName:Bt["Rc"],gradFunc:t=>({x:()=>Object(oe["a"])(t)})},la=[_n,jn,kn,Sn,Dn,Fn,Nn,Tn,Mn,In,Rn,$n,Ln,Wn,qn,Gn,Hn,Xn,Yn,tr,nr,sr,ar,fr,hr,mr,br,xr,wr,Or,_r,jr,kr,Cr,Sr,Er,Nr,Mr,$r,Br,zr,Lr,Pr,Ur,Wr,qr,Hr,Kr,Kr,Zr,ei,ii,ai,si,ci,li,fi,di,hi,pi,pi,gi,bi,yi,vi,xi,wi,Oi,_i,ji,ki,Ci,Si,Di,Fi,Ni,Mi,Ri,Bi,zi,Pi,Wi,Wi,Vi,Vi,Gi,Xi,Hi,Yi,Ki,Zi,Qi,ta,ea,na,ia,sa,ca];
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */for(const Mo of la)Object(zt["e"])(Mo);
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.abs=function(){return this.throwIfDisposed(),Object(ge["a"])(this)};var fa=n("a374");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.acos=function(){return this.throwIfDisposed(),Object(fa["a"])(this)};var da=n("4615");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.acosh=function(){return this.throwIfDisposed(),Object(da["a"])(this)};var ha=n("ccb1");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.addStrict=function(t){return this.throwIfDisposed(),Object(ha["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.add=function(t){return this.throwIfDisposed(),Object(ee["a"])(this,t)};var pa=n("df81");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.all=function(t,e){return this.throwIfDisposed(),Object(pa["a"])(this,t,e)};var ma=n("4516");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.any=function(t,e){return this.throwIfDisposed(),Object(ma["a"])(this,t,e)};var ga=n("e89f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.argMax=function(t){return this.throwIfDisposed(),Object(ga["a"])(this,t)};var ba=n("db49");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.argMin=function(t){return this.throwIfDisposed(),Object(ba["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.asScalar=function(){return this.throwIfDisposed(),Object(S["assert"])(1===this.size,()=>"The array must have only 1 element."),Object(Cn["a"])(this,[])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.asType=function(t){return this.throwIfDisposed(),Object(tt["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.as1D=function(){return this.throwIfDisposed(),Object(Cn["a"])(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.as2D=function(t,e){return this.throwIfDisposed(),Object(Cn["a"])(this,[t,e])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Object(Cn["a"])(this,[t,e,n])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),Object(Cn["a"])(this,[t,e,n,r])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),Object(Cn["a"])(this,[t,e,n,r,i])};var ya=n("220f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.asin=function(){return this.throwIfDisposed(),Object(ya["a"])(this)};var va=n("dc59");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.asinh=function(){return this.throwIfDisposed(),Object(va["a"])(this)};var xa=n("7e36");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.atan=function(){return this.throwIfDisposed(),Object(xa["a"])(this)};var wa=n("6002");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.atan2=function(t){return this.throwIfDisposed(),Object(wa["a"])(this,t)};var Oa=n("d1a8");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.atanh=function(){return this.throwIfDisposed(),Object(Oa["a"])(this)};var _a=n("9748");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),Object(_a["a"])(this,t,e,n,r)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Object(Ui["a"])(this,t,e)};var Aa=n("71db");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),Object(Aa["a"])(this,t,e,n,r,i)};var ja=n("48db");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.broadcastTo=function(t){return this.throwIfDisposed(),Object(ja["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.cast=function(t){return this.throwIfDisposed(),Object(tt["a"])(this,t)};var ka=n("5960");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.ceil=function(){return this.throwIfDisposed(),Object(ka["a"])(this)};var Ca=n("c08f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Object(Ca["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof rt["a"]&&(t=[t]),Object(qi["a"])([this,...t],e)};var Ea=n("7675");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.conv1d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Object(Ea["a"])(this,t,e,n,r,i,a)};var Sa=n("cd1f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),Object(Sa["a"])(this,t,e,n,r,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.conv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Object(or["a"])(this,t,e,n,r,i,a)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.cos=function(){return this.throwIfDisposed(),Object(Ti["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.cosh=function(){return this.throwIfDisposed(),Object(Ii["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),Object(gr["a"])(this,t,e,n)};var Da=n("364e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Object(Da["a"])(this,t,e)};var Fa=n("838f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.depthwiseConv2D=function(t,e,n,r,i,a){return Object(te["b"])("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),Object(Fa["a"])(this,t,e,n,r,i,a)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.depthwiseConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Object(Fa["a"])(this,t,e,n,r,i,a)};var Na=n("c170");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),Object(Na["a"])(this,t,e,n,r,i)};var Ta=n("011b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.divNoNan=function(t){return this.throwIfDisposed(),Object(Ta["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.divStrict=function(t){return this.throwIfDisposed(),Object(ha["b"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.div=function(t){return this.throwIfDisposed(),Object(ne["a"])(this,t)};var Ma=n("29fc");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.dot=function(t){return this.throwIfDisposed(),Object(Ma["a"])(this,t)};var Ia=n("9e38");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.elu=function(){return this.throwIfDisposed(),Object(Ia["a"])(this)};var Ra=n("f1b5");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.equalStrict=function(t){return this.throwIfDisposed(),Object(Ra["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.equal=function(t){return this.throwIfDisposed(),Object(Xr["a"])(this,t)};var $a=n("8e05");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.erf=function(){return this.throwIfDisposed(),Object($a["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.exp=function(){return this.throwIfDisposed(),Object(Ar["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.expandDims=function(t){return this.throwIfDisposed(),Object(aa["a"])(this,t)};var Ba=n("1ba2");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.expm1=function(){return this.throwIfDisposed(),Object(Ba["a"])(this)};var za=n("1ab7");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.fft=function(){return this.throwIfDisposed(),Object(za["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.flatten=function(){return this.throwIfDisposed(),Object(Cn["a"])(this,[this.size])},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.floor=function(){return this.throwIfDisposed(),Object(ui["a"])(this)};var La=n("508f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.floorDiv=function(t){return this.throwIfDisposed(),Object(La["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.gather=function(t,e){return this.throwIfDisposed(),Object(oa["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Object(Ra["b"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.greaterEqual=function(t){return this.throwIfDisposed(),Object(Kn["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.greaterStrict=function(t){return this.throwIfDisposed(),Object(Ra["c"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.greater=function(t){return this.throwIfDisposed(),Object(oi["a"])(this,t)};var Pa=n("4c7a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.ifft=function(){return this.throwIfDisposed(),Object(Pa["a"])(this)};var Ua=n("69dc");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.irfft=function(){return this.throwIfDisposed(),Object(Ua["a"])(this)};var Wa=n("fc0b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.isFinite=function(){return this.throwIfDisposed(),Object(Wa["a"])(this)};var qa=n("5980");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.isInf=function(){return this.throwIfDisposed(),Object(qa["a"])(this)};var Va=n("6fef");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.isNaN=function(){return this.throwIfDisposed(),Object(Va["a"])(this)};var Ga=n("6f37");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.leakyRelu=function(t){return this.throwIfDisposed(),Object(Ga["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Object(Ra["d"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.lessEqual=function(t){return this.throwIfDisposed(),Object(Jn["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.lessStrict=function(t){return this.throwIfDisposed(),Object(Ra["e"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.less=function(t){return this.throwIfDisposed(),Object(Jr["a"])(this,t)};var Ha=n("e101");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),Object(Ha["a"])(this,t,e,n,r)};var Xa=n("c314");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.logSigmoid=function(){return this.throwIfDisposed(),Object(Xa["a"])(this)};var Ya=n("804a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.logSoftmax=function(t){return this.throwIfDisposed(),Object(Ya["a"])(this,t)};var Ka=n("afda");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Object(Ka["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.log=function(){return this.throwIfDisposed(),Object(mi["a"])(this)};var Ja=n("46b1");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.log1p=function(){return this.throwIfDisposed(),Object(Ja["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.logicalAnd=function(t){return this.throwIfDisposed(),Object(Zn["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.logicalNot=function(){return this.throwIfDisposed(),Object(Ei["a"])(this)};var Za=n("f183");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.logicalOr=function(t){return this.throwIfDisposed(),Object(Za["a"])(this,t)};var Qa=n("d25f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.logicalXor=function(t){return this.throwIfDisposed(),Object(Qa["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Object(Nt["a"])(this,t,e,n)};var to=n("9fe6");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Object(to["a"])(this,t,e,n,r)};var eo=n("c021");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.max=function(t,e){return this.throwIfDisposed(),Object(eo["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.maximumStrict=function(t){return this.throwIfDisposed(),Object(ha["c"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.maximum=function(t){return this.throwIfDisposed(),Object(be["a"])(this,t)};var no=n("122e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.mean=function(t,e){return this.throwIfDisposed(),Object(no["a"])(this,t,e)};var ro=n("ae6d");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.min=function(t,e){return this.throwIfDisposed(),Object(ro["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.minimumStrict=function(t){return this.throwIfDisposed(),Object(ha["d"])(this,t)};var io=n("f0e5");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.minimum=function(t){return this.throwIfDisposed(),Object(io["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.modStrict=function(t){return this.throwIfDisposed(),Object(ha["e"])(this,t)};var ao=n("4611");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.mod=function(t){return this.throwIfDisposed(),Object(ao["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.mulStrict=function(t){return this.throwIfDisposed(),Object(ha["f"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.mul=function(t){return this.throwIfDisposed(),Object(re["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.neg=function(){return this.throwIfDisposed(),Object(An["a"])(this)};var oo=n("f757");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.norm=function(t,e,n){return this.throwIfDisposed(),Object(oo["a"])(this,t,e,n)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Object(Ra["f"])(this,t)};var so=n("d4de");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.notEqual=function(t){return this.throwIfDisposed(),Object(so["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),Object(Tt["a"])(this,t,e,n)};var uo=n("0db5");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.onesLike=function(){return this.throwIfDisposed(),Object(uo["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.pad=function(t,e){return this.throwIfDisposed(),Object($i["a"])(this,t,e)};var co=n("eaf4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.pool=function(t,e,n,r,i){return this.throwIfDisposed(),Object(co["a"])(this,t,e,n,r,i)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.powStrict=function(t){return this.throwIfDisposed(),Object(ha["g"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.pow=function(t){return this.throwIfDisposed(),Object(he["a"])(this,t)};var lo=n("520f");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.prelu=function(t){return this.throwIfDisposed(),Object(lo["a"])(this,t)};var fo=n("f3ae");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.prod=function(t,e){return this.throwIfDisposed(),Object(fo["a"])(this,t,e)};var ho=n("b500");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.reciprocal=function(){return this.throwIfDisposed(),Object(ho["a"])(this)};var po=n("917a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.relu=function(){return this.throwIfDisposed(),Object(po["a"])(this)};var mo=n("46a8");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.relu6=function(){return this.throwIfDisposed(),Object(mo["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.reshapeAs=function(t){return this.throwIfDisposed(),Object(Cn["a"])(this,t.shape)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.reshape=function(t){return this.throwIfDisposed(),Object(Cn["a"])(this,t)};var go=n("73f8");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.resizeBilinear=function(t,e){return this.throwIfDisposed(),Object(go["a"])(this,t,e)};var bo=n("0f86");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.resizeNearestNeighbor=function(t,e){return this.throwIfDisposed(),Object(bo["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.reverse=function(t){return this.throwIfDisposed(),Object(Ai["a"])(this,t)};var yo=n("b61d");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.rfft=function(){return this.throwIfDisposed(),Object(yo["a"])(this)};var vo=n("08a9");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.round=function(){return this.throwIfDisposed(),Object(vo["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.rsqrt=function(){return this.throwIfDisposed(),Object(Dr["a"])(this)};var xo=n("b39e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.selu=function(){return this.throwIfDisposed(),Object(xo["a"])(this)};var wo=n("116b");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.separableConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),Object(wo["a"])(this,t,e,n,r,i,a)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.sigmoid=function(){return this.throwIfDisposed(),Object(Li["a"])(this)};var Oo=n("1df6");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.sign=function(){return this.throwIfDisposed(),Object(Oo["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.sin=function(){return this.throwIfDisposed(),Object(dr["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.sinh=function(){return this.throwIfDisposed(),Object(pr["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.slice=function(t,e){return this.throwIfDisposed(),Object(mn["a"])(this,t,e)};var _o=n("5f87");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.softmax=function(t){return this.throwIfDisposed(),Object(_o["a"])(this,t)};var Ao=n("9ffd");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.softplus=function(){return this.throwIfDisposed(),Object(Ao["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Object(Vn["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.split=function(t,e){return this.throwIfDisposed(),Object(er["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.sqrt=function(){return this.throwIfDisposed(),Object(ie["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.square=function(){return this.throwIfDisposed(),Object(ae["a"])(this)};var jo=n("4184");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.squaredDifference=function(t){return this.throwIfDisposed(),Object(jo["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Object(ha["h"])(this,t)};var ko=n("d1f4");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.squeeze=function(t){return this.throwIfDisposed(),Object(ko["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof rt["a"]?[this,t]:[this,...t];return Object(ra["a"])(n,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.step=function(t){return this.throwIfDisposed(),Object(On["a"])(this,t)};var Co=n("de1a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.stridedSlice=function(t,e,n,r,i,a,o,s){return this.throwIfDisposed(),Object(Co["a"])(this,t,e,n,r,i,a,o,s)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.subStrict=function(t){return this.throwIfDisposed(),Object(ha["i"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.sub=function(t){return this.throwIfDisposed(),Object(pe["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.sum=function(t,e){return this.throwIfDisposed(),Object(En["a"])(this,t,e)};var Eo=n("d30a");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.tan=function(){return this.throwIfDisposed(),Object(Eo["a"])(this)};var So=n("8888");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.tanh=function(){return this.throwIfDisposed(),Object(So["a"])(this)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.tile=function(t){return this.throwIfDisposed(),Object(Fr["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.toBool=function(){return this.throwIfDisposed(),Object(tt["a"])(this,"bool")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.toFloat=function(){return this.throwIfDisposed(),Object(tt["a"])(this,"float32")},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.toInt=function(){return this.throwIfDisposed(),Object(tt["a"])(this,"int32")};var Do=n("5616");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.topk=function(t,e){return this.throwIfDisposed(),Object(Do["a"])(this,t,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.transpose=function(t){return this.throwIfDisposed(),Object(It["a"])(this,t)};var Fo=n("853e");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.unique=function(t){return this.throwIfDisposed(),Object(Fo["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Object(Tr["a"])(this,t,e)};var No=n("3a44");
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt["a"].prototype.unstack=function(t){return this.throwIfDisposed(),Object(No["a"])(this,t)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.where=function(t,e){return this.throwIfDisposed(),Object(Qn["a"])(t,this,e)},
/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
rt["a"].prototype.zerosLike=function(){return this.throwIfDisposed(),Object(oe["a"])(this)}},fb6a:function(t,e,n){"use strict";var r=n("23e7"),i=n("861d"),a=n("e8b5"),o=n("23cb"),s=n("50c4"),u=n("fc6a"),c=n("8418"),l=n("b622"),f=n("1dde"),d=n("ae40"),h=f("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),m=l("species"),g=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!h||!p},{slice:function(t,e){var n,r,l,f=u(this),d=s(f.length),h=o(t,d),p=o(void 0===e?d:e,d);if(a(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?i(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(f,h,p);for(r=new(void 0===n?Array:n)(b(p-h,0)),l=0;h<p;h++,l++)h in f&&c(r,l,f[h]);return r.length=l,r}})},fbc0:function(t,e,n){"use strict";var r=n("f9a1"),i=/^ms-/;function a(t){return r(t).replace(i,"-ms-")}t.exports=a},fc0b:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","isFinite"),n={x:e};return r["a"].runKernelFunc(t=>t.isFinite(e),n,null,i["pb"])}const u=Object(o["b"])({isFinite_:s})},fc17:function(t,e,n){"use strict";function r(t,e,n){return t.fields=e||[],t.fname=n,t}function i(t){return null==t?null:t.fname}function a(t){return null==t?null:t.fields}function o(t){return 1===t.length?s(t[0]):u(t)}n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return K})),n.d(e,"f",(function(){return et})),n.d(e,"g",(function(){return J})),n.d(e,"h",(function(){return tt})),n.d(e,"i",(function(){return at})),n.d(e,"j",(function(){return ot})),n.d(e,"k",(function(){return c})),n.d(e,"l",(function(){return st})),n.d(e,"m",(function(){return ut})),n.d(e,"n",(function(){return ct})),n.d(e,"o",(function(){return b})),n.d(e,"p",(function(){return ht})),n.d(e,"q",(function(){return f})),n.d(e,"r",(function(){return pt})),n.d(e,"s",(function(){return ft})),n.d(e,"t",(function(){return d})),n.d(e,"u",(function(){return h})),n.d(e,"v",(function(){return mt})),n.d(e,"w",(function(){return gt})),n.d(e,"x",(function(){return j})),n.d(e,"y",(function(){return bt})),n.d(e,"z",(function(){return yt})),n.d(e,"A",(function(){return Z})),n.d(e,"B",(function(){return vt})),n.d(e,"C",(function(){return xt})),n.d(e,"D",(function(){return k})),n.d(e,"E",(function(){return wt})),n.d(e,"F",(function(){return Ot})),n.d(e,"G",(function(){return _t})),n.d(e,"H",(function(){return At})),n.d(e,"I",(function(){return A})),n.d(e,"J",(function(){return kt})),n.d(e,"K",(function(){return Ct})),n.d(e,"L",(function(){return E})),n.d(e,"M",(function(){return m})),n.d(e,"N",(function(){return St})),n.d(e,"O",(function(){return z})),n.d(e,"P",(function(){return L})),n.d(e,"Q",(function(){return P})),n.d(e,"R",(function(){return U})),n.d(e,"S",(function(){return F})),n.d(e,"T",(function(){return X})),n.d(e,"U",(function(){return Dt})),n.d(e,"V",(function(){return l})),n.d(e,"W",(function(){return Ft})),n.d(e,"X",(function(){return Nt})),n.d(e,"Y",(function(){return Mt})),n.d(e,"Z",(function(){return N})),n.d(e,"ab",(function(){return Rt})),n.d(e,"bb",(function(){return It})),n.d(e,"cb",(function(){return $t})),n.d(e,"db",(function(){return g})),n.d(e,"eb",(function(){return Y})),n.d(e,"fb",(function(){return Bt})),n.d(e,"gb",(function(){return p})),n.d(e,"hb",(function(){return q})),n.d(e,"ib",(function(){return V})),n.d(e,"jb",(function(){return G})),n.d(e,"kb",(function(){return H}));const s=t=>function(e){return e[t]},u=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};function c(t){throw Error(t)}function l(t){const e=[],n=t.length;let r,i,a,o=null,s=0,u="";function l(){e.push(u+t.substring(r,i)),u="",r=i+1}for(t+="",r=i=0;i<n;++i)if(a=t[i],"\\"===a)u+=t.substring(r,i),u+=t.substring(++i,++i),r=i;else if(a===o)l(),o=null,s=-1;else{if(o)continue;r===s&&'"'===a||r===s&&"'"===a?(r=i+1,o=a):"."!==a||s?"["===a?(i>r&&l(),s=r=i+1):"]"===a&&(s||c("Access path missing open bracket: "+t),s>0&&l(),s=0,r=i+1):i>r?l():r=i+1}return s&&c("Access path missing closing bracket: "+t),o&&c("Access path missing closing quote: "+t),i>r&&(i++,l()),e}function f(t,e,n){const i=l(t);return t=1===i.length?i[0]:t,r((n&&n.get||o)(i),[t],e||t)}const d=f("id"),h=r(t=>t,[],"identity"),p=r(()=>0,[],"zero"),m=r(()=>1,[],"one"),g=r(()=>!0,[],"true"),b=r(()=>!1,[],"false");function y(t,e,n){const r=[e].concat([].slice.call(n));console[t].apply(console,r)}const v=0,x=1,w=2,O=3,_=4;function A(t,e){let n=t||v;return{level(t){return arguments.length?(n=+t,this):n},error(){return n>=x&&y(e||"error","ERROR",arguments),this},warn(){return n>=w&&y(e||"warn","WARN",arguments),this},info(){return n>=O&&y(e||"log","INFO",arguments),this},debug(){return n>=_&&y(e||"log","DEBUG",arguments),this}}}var j=Array.isArray;function k(t){return t===Object(t)}const C=t=>"__proto__"!==t;function E(...t){return t.reduce((t,e)=>{for(const n in e)if("signals"===n)t.signals=D(t.signals,e.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;S(t,n,e[n],r)}return t},{})}function S(t,e,n,r){if(!C(e))return;let i,a;if(k(n)&&!j(n))for(i in a=k(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?S(a,i,n[i]):C(i)&&(a[i]=n[i]);else t[e]=n}function D(t,e){if(null==t)return e;const n={},r=[];function i(t){n[t.name]||(n[t.name]=1,r.push(t))}return e.forEach(i),t.forEach(i),r}function F(t){return t[t.length-1]}function N(t){return null==t||""===t?null:+t}const T=t=>e=>t*Math.exp(e),M=t=>e=>Math.log(t*e),I=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),R=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,$=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function B(t,e,n,r){const i=n(t[0]),a=n(F(t)),o=(a-i)*e;return[r(i-o),r(a-o)]}function z(t,e){return B(t,e,N,h)}function L(t,e){var n=Math.sign(t[0]);return B(t,e,M(n),T(n))}function P(t,e,n){return B(t,e,$(n),$(1/n))}function U(t,e,n){return B(t,e,I(n),R(n))}function W(t,e,n,r,i){const a=r(t[0]),o=r(F(t)),s=null!=e?r(e):(a+o)/2;return[i(s+(a-s)*n),i(s+(o-s)*n)]}function q(t,e,n){return W(t,e,n,N,h)}function V(t,e,n){const r=Math.sign(t[0]);return W(t,e,n,M(r),T(r))}function G(t,e,n,r){return W(t,e,n,$(r),$(1/r))}function H(t,e,n,r){return W(t,e,n,I(r),R(r))}function X(t){return 1+~~(new Date(t).getMonth()/3)}function Y(t){return 1+~~(new Date(t).getUTCMonth()/3)}function K(t){return null!=t?j(t)?t:[t]:[]}function J(t,e,n){let r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]}function Z(t){return"function"===typeof t}const Q="descending";function tt(t,e,n){n=n||{},e=K(e)||[];const i=[],o=[],s={},u=n.comparator||nt;return K(t).forEach((t,r)=>{null!=t&&(i.push(e[r]===Q?-1:1),o.push(t=Z(t)?t:f(t,null,n)),(a(t)||[]).forEach(t=>s[t]=1))}),0===o.length?null:r(u(o,i),Object.keys(s))}const et=(t,e)=>(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),nt=(t,e)=>1===t.length?rt(t[0],e[0]):it(t,e,t.length),rt=(t,e)=>function(n,r){return et(t(n),t(r))*e},it=(t,e,n)=>(e.push(0),function(r,i){let a,o=0,s=-1;while(0===o&&++s<n)a=t[s],o=et(a(r),a(i));return o*e[s]});function at(t){return Z(t)?t:()=>t}function ot(t,e){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(e(r),n=null),t)}}function st(t){for(let e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r],e)t[n]=e[n];return t}function ut(t,e){let n,r,i,a,o=0;if(t&&(n=t.length))if(null==e){for(r=t[o];o<n&&(null==r||r!==r);r=t[++o]);for(i=a=r;o<n;++o)r=t[o],null!=r&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=e(t[o]);o<n&&(null==r||r!==r);r=e(t[++o]));for(i=a=r;o<n;++o)r=e(t[o]),null!=r&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]}function ct(t,e){const n=t.length;let r,i,a,o,s,u=-1;if(null==e){while(++u<n)if(i=t[u],null!=i&&i>=i){r=a=i;break}if(u===n)return[-1,-1];o=s=u;while(++u<n)i=t[u],null!=i&&(r>i&&(r=i,o=u),a<i&&(a=i,s=u))}else{while(++u<n)if(i=e(t[u],u,t),null!=i&&i>=i){r=a=i;break}if(u===n)return[-1,-1];o=s=u;while(++u<n)i=e(t[u],u,t),null!=i&&(r>i&&(r=i,o=u),a<i&&(a=i,s=u))}return[o,s]}const lt=Object.prototype.hasOwnProperty;function ft(t,e){return lt.call(t,e)}const dt={};function ht(t){let e,n={};function r(t){return ft(n,t)&&n[t]!==dt}const i={size:0,empty:0,object:n,has:r,get(t){return r(t)?n[t]:void 0},set(t,e){return r(t)||(++i.size,n[t]===dt&&--i.empty),n[t]=e,this},delete(t){return r(t)&&(--i.size,++i.empty,n[t]=dt),this},clear(){i.size=i.empty=0,i.object=n={}},test(t){return arguments.length?(e=t,i):e},clean(){const t={};let r=0;for(const i in n){const a=n[i];a===dt||e&&e(a)||(t[i]=a,++r)}i.size=r,i.empty=0,i.object=n=t}};return t&&Object.keys(t).forEach(e=>{i.set(e,t[e])}),i}function pt(t,e,n,r,i,a){if(!n&&0!==n)return a;const o=+n;let s,u=t[0],c=F(t);c<u&&(s=u,u=c,c=s),s=Math.abs(e-u);const l=Math.abs(c-e);return s<l&&s<=o?r:l<=o?i:a}function mt(t,e,n){const r=t.prototype=Object.create(e.prototype);return r.constructor=t,st(r,n)}function gt(t,e,n,r){let i,a=e[0],o=e[e.length-1];return a>o&&(i=a,a=o,o=i),n=void 0===n||n,r=void 0===r||r,(n?a<=t:a<t)&&(r?t<=o:t<o)}function bt(t){return"boolean"===typeof t}function yt(t){return"[object Date]"===Object.prototype.toString.call(t)}function vt(t){return t&&Z(t[Symbol.iterator])}function xt(t){return"number"===typeof t}function wt(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function Ot(t){return"string"===typeof t}function _t(t,e,n){t&&(t=e?K(t).map(t=>t.replace(/\\(.)/g,"$1")):K(t));const i=t&&t.length,a=n&&n.get||o,s=t=>a(e?[t]:l(t));let u;if(i)if(1===i){const e=s(t[0]);u=function(t){return""+e(t)}}else{const e=t.map(s);u=function(t){let n=""+e[0](t),r=0;while(++r<i)n+="|"+e[r](t);return n}}else u=function(){return""};return r(u,t,"key")}function At(t,e){const n=t[0],r=F(t),i=+e;return i?1===i?r:n+i*(r-n):n}const jt=1e4;function kt(t){let e,n,r;t=+t||jt;const i=()=>{e={},n={},r=0},a=(i,a)=>(++r>t&&(n=e,e={},r=1),e[i]=a);return i(),{clear:i,has:t=>ft(e,t)||ft(n,t),get:t=>ft(e,t)?e[t]:ft(n,t)?a(t,n[t]):void 0,set:(t,n)=>ft(e,t)?e[t]=n:a(t,n)}}function Ct(t,e,n,r){const i=e.length,a=n.length;if(!a)return e;if(!i)return n;const o=r||new e.constructor(i+a);let s=0,u=0,c=0;for(;s<i&&u<a;++c)o[c]=t(e[s],n[u])>0?n[u++]:e[s++];for(;s<i;++s,++c)o[c]=e[s];for(;u<a;++u,++c)o[c]=n[u];return o}function Et(t,e){let n="";while(--e>=0)n+=t;return n}function St(t,e,n,r){const i=n||" ",a=t+"",o=e-a.length;return o<=0?a:"left"===r?Et(i,o)+a:"center"===r?Et(i,~~(o/2))+a+Et(i,Math.ceil(o/2)):a+Et(i,o)}function Dt(t){return t&&F(t)-t[0]||0}function Ft(t){return j(t)?"["+t.map(Ft)+"]":k(t)||Ot(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Nt(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t}const Tt=t=>xt(t)||yt(t)?t:Date.parse(t);function Mt(t,e){return e=e||Tt,null==t||""===t?null:e(t)}function It(t){return null==t||""===t?null:t+""}function Rt(t){const e={},n=t.length;for(let r=0;r<n;++r)e[t[r]]=!0;return e}function $t(t,e,n,r){const i=null!=r?r:"",a=t+"",o=a.length,s=Math.max(0,e-i.length);return o<=e?a:"left"===n?i+a.slice(o-s):"center"===n?a.slice(0,Math.ceil(s/2))+i+a.slice(o-~~(s/2)):a.slice(0,s)+i}function Bt(t,e,n){if(t)if(e){const r=t.length;for(let i=0;i<r;++i){const r=e(t[i]);r&&n(r,i,t)}}else t.forEach(n)}},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fd32:function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return Jt})),n.d(e,"creator",(function(){return u})),n.d(e,"local",(function(){return Qt})),n.d(e,"matcher",(function(){return y})),n.d(e,"mouse",(function(){return re})),n.d(e,"namespace",(function(){return a})),n.d(e,"namespaces",(function(){return i})),n.d(e,"clientPoint",(function(){return ne})),n.d(e,"select",(function(){return Kt})),n.d(e,"selectAll",(function(){return ie})),n.d(e,"selection",(function(){return Yt})),n.d(e,"selector",(function(){return l})),n.d(e,"selectorAll",(function(){return h})),n.d(e,"style",(function(){return J})),n.d(e,"touch",(function(){return ae})),n.d(e,"touches",(function(){return oe})),n.d(e,"window",(function(){return G})),n.d(e,"event",(function(){return Tt})),n.d(e,"customEvent",(function(){return Pt}));var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},a=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t};function o(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===r&&e.documentElement.namespaceURI===r?e.createElement(t):e.createElementNS(n,t)}}function s(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var u=function(t){var e=a(t);return(e.local?s:o)(e)};function c(){}var l=function(t){return null==t?c:function(){return this.querySelector(t)}},f=function(t){"function"!==typeof t&&(t=l(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],u=s.length,c=r[i]=new Array(u),f=0;f<u;++f)(a=s[f])&&(o=t.call(a,a.__data__,f,s))&&("__data__"in a&&(o.__data__=a.__data__),c[f]=o);return new Ht(r,this._parents)};function d(){return[]}var h=function(t){return null==t?d:function(){return this.querySelectorAll(t)}},p=function(t){"function"!==typeof t&&(t=h(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],u=s.length,c=0;c<u;++c)(o=s[c])&&(r.push(t.call(o,o.__data__,c,s)),i.push(o));return new Ht(r,i)},m=function(t){return function(){return this.matches(t)}};if("undefined"!==typeof document){var g=document.documentElement;if(!g.matches){var b=g.webkitMatchesSelector||g.msMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector;m=function(t){return function(){return b.call(this,t)}}}}var y=m,v=function(t){"function"!==typeof t&&(t=y(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,u=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&u.push(a);return new Ht(r,this._parents)},x=function(t){return new Array(t.length)},w=function(){return new Ht(this._enter||this._groups.map(x),this._parents)};function O(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}O.prototype={constructor:O,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var _=function(t){return function(){return t}},A="$";function j(t,e,n,r,i,a){for(var o,s=0,u=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new O(t,a[s]);for(;s<u;++s)(o=e[s])&&(i[s]=o)}function k(t,e,n,r,i,a,o){var s,u,c,l={},f=e.length,d=a.length,h=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(h[s]=c=A+o.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<d;++s)c=A+o.call(t,a[s],s,a),(u=l[c])?(r[s]=u,u.__data__=a[s],l[c]=null):n[s]=new O(t,a[s]);for(s=0;s<f;++s)(u=e[s])&&l[h[s]]===u&&(i[s]=u)}var C=function(t,e){if(!t)return h=new Array(this.size()),c=-1,this.each((function(t){h[++c]=t})),h;var n=e?k:j,r=this._parents,i=this._groups;"function"!==typeof t&&(t=_(t));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),c=0;c<a;++c){var l=r[c],f=i[c],d=f.length,h=t.call(l,l&&l.__data__,c,r),p=h.length,m=s[c]=new Array(p),g=o[c]=new Array(p),b=u[c]=new Array(d);n(l,f,m,g,b,h,e);for(var y,v,x=0,w=0;x<p;++x)if(y=m[x]){x>=w&&(w=x+1);while(!(v=g[w])&&++w<p);y._next=v||null}}return o=new Ht(o,r),o._enter=s,o._exit=u,o},E=function(){return new Ht(this._exit||this._groups.map(x),this._parents)},S=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,c=e[s],l=n[s],f=c.length,d=o[s]=new Array(f),h=0;h<f;++h)(u=c[h]||l[h])&&(d[h]=u);for(;s<r;++s)o[s]=e[s];return new Ht(o,this._parents)},D=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},F=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=N);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],u=s.length,c=i[a]=new Array(u),l=0;l<u;++l)(o=s[l])&&(c[l]=o);c.sort(e)}return new Ht(i,this._parents).order()};function N(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var T=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},M=function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},I=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},R=function(){var t=0;return this.each((function(){++t})),t},$=function(){return!this.node()},B=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this};function z(t){return function(){this.removeAttribute(t)}}function L(t){return function(){this.removeAttributeNS(t.space,t.local)}}function P(t,e){return function(){this.setAttribute(t,e)}}function U(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function W(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function q(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var V=function(t,e){var n=a(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?L:z:"function"===typeof e?n.local?q:W:n.local?U:P)(n,e))},G=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function H(t){return function(){this.style.removeProperty(t)}}function X(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Y(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}var K=function(t,e,n){return arguments.length>1?this.each((null==e?H:"function"===typeof e?Y:X)(t,e,null==n?"":n)):J(this.node(),t)};function J(t,e){return t.style.getPropertyValue(e)||G(t).getComputedStyle(t,null).getPropertyValue(e)}function Z(t){return function(){delete this[t]}}function Q(t,e){return function(){this[t]=e}}function tt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}var et=function(t,e){return arguments.length>1?this.each((null==e?Z:"function"===typeof e?tt:Q)(t,e)):this.node()[t]};function nt(t){return t.trim().split(/^|\s+/)}function rt(t){return t.classList||new it(t)}function it(t){this._node=t,this._names=nt(t.getAttribute("class")||"")}function at(t,e){var n=rt(t),r=-1,i=e.length;while(++r<i)n.add(e[r])}function ot(t,e){var n=rt(t),r=-1,i=e.length;while(++r<i)n.remove(e[r])}function st(t){return function(){at(this,t)}}function ut(t){return function(){ot(this,t)}}function ct(t,e){return function(){(e.apply(this,arguments)?at:ot)(this,t)}}it.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var lt=function(t,e){var n=nt(t+"");if(arguments.length<2){var r=rt(this.node()),i=-1,a=n.length;while(++i<a)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?ct:e?st:ut)(n,e))};function ft(){this.textContent=""}function dt(t){return function(){this.textContent=t}}function ht(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}var pt=function(t){return arguments.length?this.each(null==t?ft:("function"===typeof t?ht:dt)(t)):this.node().textContent};function mt(){this.innerHTML=""}function gt(t){return function(){this.innerHTML=t}}function bt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}var yt=function(t){return arguments.length?this.each(null==t?mt:("function"===typeof t?bt:gt)(t)):this.node().innerHTML};function vt(){this.nextSibling&&this.parentNode.appendChild(this)}var xt=function(){return this.each(vt)};function wt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var Ot=function(){return this.each(wt)},_t=function(t){var e="function"===typeof t?t:u(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))};function At(){return null}var jt=function(t,e){var n="function"===typeof t?t:u(t),r=null==e?At:"function"===typeof e?e:l(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))};function kt(){var t=this.parentNode;t&&t.removeChild(this)}var Ct=function(){return this.each(kt)};function Et(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function St(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var Dt=function(t){return this.select(t?St:Et)},Ft=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Nt={},Tt=null;if("undefined"!==typeof document){var Mt=document.documentElement;"onmouseenter"in Mt||(Nt={mouseenter:"mouseover",mouseleave:"mouseout"})}function It(t,e,n){return t=Rt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Rt(t,e,n){return function(r){var i=Tt;Tt=r;try{t.call(this,this.__data__,e,n)}finally{Tt=i}}}function $t(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Bt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function zt(t,e,n){var r=Nt.hasOwnProperty(t.type)?It:Rt;return function(i,a,o){var s,u=this.__on,c=r(e,a,o);if(u)for(var l=0,f=u.length;l<f;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}var Lt=function(t,e,n){var r,i,a=$t(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?zt:Bt,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value};function Pt(t,e,n,r){var i=Tt;t.sourceEvent=Tt,Tt=t;try{return e.apply(n,r)}finally{Tt=i}}function Ut(t,e,n){var r=G(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Wt(t,e){return function(){return Ut(this,t,e)}}function qt(t,e){return function(){return Ut(this,t,e.apply(this,arguments))}}var Vt=function(t,e){return this.each(("function"===typeof e?qt:Wt)(t,e))},Gt=[null];function Ht(t,e){this._groups=t,this._parents=e}function Xt(){return new Ht([[document.documentElement]],Gt)}Ht.prototype=Xt.prototype={constructor:Ht,select:f,selectAll:p,filter:v,data:C,enter:w,exit:E,merge:S,order:D,sort:F,call:T,nodes:M,node:I,size:R,empty:$,each:B,attr:V,style:K,property:et,classed:lt,text:pt,html:yt,raise:xt,lower:Ot,append:_t,insert:jt,remove:Ct,clone:Dt,datum:Ft,on:Lt,dispatch:Vt};var Yt=Xt,Kt=function(t){return"string"===typeof t?new Ht([[document.querySelector(t)]],[document.documentElement]):new Ht([[t]],Gt)},Jt=function(t){return Kt(u(t).call(document.documentElement))},Zt=0;function Qt(){return new te}function te(){this._="@"+(++Zt).toString(36)}te.prototype=Qt.prototype={constructor:te,get:function(t){var e=this._;while(!(e in t))if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var ee=function(){var t,e=Tt;while(t=e.sourceEvent)e=t;return e},ne=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},re=function(t){var e=ee();return e.changedTouches&&(e=e.changedTouches[0]),ne(t,e)},ie=function(t){return"string"===typeof t?new Ht([document.querySelectorAll(t)],[document.documentElement]):new Ht([null==t?[]:t],Gt)},ae=function(t,e,n){arguments.length<3&&(n=e,e=ee().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return ne(t,r);return null},oe=function(t,e){null==e&&(e=ee().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=ne(t,e[n]);return i}},fd90:function(t,e,n){const r=n("bbfd"),i=n("3fce"),a=(t,e,n)=>{let a=null,o=null,s=null;try{s=new i(e,n)}catch(u){return null}return t.forEach(t=>{s.test(t)&&(a&&1!==o.compare(t)||(a=t,o=new r(a,n)))}),a};t.exports=a},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(t,e,n){var r=n("da84");t.exports=r.Promise},ffb3:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6ae2"),i=n("c05b"),a=n("a3f7"),o=n("54ef");
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function s(t){const e=Object(a["a"])(t,"x","sigmoid"),n={x:e};return r["a"].runKernelFunc((t,n)=>{const r=t.sigmoid(e);return n([r]),r},n,null,i["sc"])}const u=Object(o["b"])({sigmoid_:s})},ffc3:function(t,e,n){"use strict";n.r(e),n.d(e,"formatDefaultLocale",(function(){return w})),n.d(e,"format",(function(){return d})),n.d(e,"formatPrefix",(function(){return h})),n.d(e,"formatLocale",(function(){return x})),n.d(e,"formatSpecifier",(function(){return u})),n.d(e,"precisionFixed",(function(){return O})),n.d(e,"precisionPrefix",(function(){return _})),n.d(e,"precisionRound",(function(){return A}));var r=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},i=function(t){return t=r(Math.abs(t)),t?t[1]:NaN},a=function(t,e){return function(n,r){var i=n.length,a=[],o=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[o=(o+1)%t.length]}return a.reverse().join(e)}},o=function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}},s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(t){return new c(t)}function c(t){if(!(e=s.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}u.prototype=c.prototype,c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var l,f,d,h,p=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}break}return i>0?t.slice(0,i)+t.slice(e+1):t},m=function(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],a=n[1],o=a-(l=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+r(t,Math.max(0,e+o-1))[0]},g=function(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")},b={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return g(100*t,e)},r:g,s:m,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},y=function(t){return t},v=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],x=function(t){var e=t.grouping&&t.thousands?a(t.grouping,t.thousands):y,n=t.currency,r=t.decimal,s=t.numerals?o(t.numerals):y,c=t.percent||"%";function f(t){t=u(t);var i=t.fill,a=t.align,o=t.sign,f=t.symbol,d=t.zero,h=t.width,m=t.comma,g=t.precision,y=t.trim,x=t.type;"n"===x?(m=!0,x="g"):b[x]||(null==g&&(g=12),y=!0,x="g"),(d||"0"===i&&"="===a)&&(d=!0,i="0",a="=");var w="$"===f?n[0]:"#"===f&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",O="$"===f?n[1]:/[%p]/.test(x)?c:"",_=b[x],A=/[defgprs%]/.test(x);function j(t){var n,u,c,f=w,b=O;if("c"===x)b=_(t)+b,t="";else{t=+t;var j=t<0;if(t=_(Math.abs(t),g),y&&(t=p(t)),j&&0===+t&&(j=!1),f=(j?"("===o?o:"-":"-"===o||"("===o?"":o)+f,b=("s"===x?v[8+l/3]:"")+b+(j&&"("===o?")":""),A){n=-1,u=t.length;while(++n<u)if(c=t.charCodeAt(n),48>c||c>57){b=(46===c?r+t.slice(n+1):t.slice(n))+b,t=t.slice(0,n);break}}}m&&!d&&(t=e(t,1/0));var k=f.length+t.length+b.length,C=k<h?new Array(h-k+1).join(i):"";switch(m&&d&&(t=e(C+t,C.length?h-b.length:1/0),C=""),a){case"<":t=f+t+b+C;break;case"=":t=f+C+t+b;break;case"^":t=C.slice(0,k=C.length>>1)+f+t+b+C.slice(k);break;default:t=C+f+t+b;break}return s(t)}return g=null==g?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),j.toString=function(){return t+""},j}function d(t,e){var n=f((t=u(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(i(e)/3))),a=Math.pow(10,-r),o=v[8+r/3];return function(t){return n(a*t)+o}}return{format:f,formatPrefix:d}};function w(t){return f=x(t),d=f.format,h=f.formatPrefix,f}w({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var O=function(t){return Math.max(0,-i(Math.abs(t)))},_=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(i(e)/3)))-i(Math.abs(t)))},A=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,i(e)-i(t))+1}},ffd6:function(t,e,n){var r=n("3729"),i=n("1310"),a="[object Symbol]";function o(t){return"symbol"==typeof t||i(t)&&r(t)==a}t.exports=o}}]);
//# sourceMappingURL=chunk-vendors.7b66a70d.js.map